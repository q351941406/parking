import{c as ml,g as E_}from"./_commonjsHelpers-5-cIlDoe.js";import{_ as su,o as _l,c as gl,a as Xo,r as R_,b as k_,l as I_,d as ou}from"./index-EgUD6bev.js";var a0={exports:{}};a0.exports;(function(xo,fs){(function(To,gr){xo.exports=gr()})(ml,function(){function To(Z,m){var t=Object.keys(Z);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(Z);m&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(Z,o).enumerable})),t.push.apply(t,n)}return t}function gr(Z){for(var m=1;m<arguments.length;m++){var t=arguments[m]!=null?arguments[m]:{};m%2?To(Object(t),!0).forEach(function(n){ln(Z,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Z,Object.getOwnPropertyDescriptors(t)):To(Object(t)).forEach(function(n){Object.defineProperty(Z,n,Object.getOwnPropertyDescriptor(t,n))})}return Z}function Ni(Z){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},Ni(Z)}function En(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}function hs(Z,m){for(var t=0;t<m.length;t++){var n=m[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(Z,vl(n.key),n)}}function Rn(Z,m,t){return m&&hs(Z.prototype,m),t&&hs(Z,t),Object.defineProperty(Z,"prototype",{writable:!1}),Z}function ln(Z,m,t){return m=vl(m),m in Z?Object.defineProperty(Z,m,{value:t,enumerable:!0,configurable:!0,writable:!0}):Z[m]=t,Z}function ba(Z){return xs(Z)||ps(Z)||ms(Z)||lu()}function xs(Z){if(Array.isArray(Z))return o0(Z)}function ps(Z){if(typeof Symbol<"u"&&Z[Symbol.iterator]!=null||Z["@@iterator"]!=null)return Array.from(Z)}function ms(Z,m){if(Z){if(typeof Z=="string")return o0(Z,m);var t=Object.prototype.toString.call(Z).slice(8,-1);if(t==="Object"&&Z.constructor&&(t=Z.constructor.name),t==="Map"||t==="Set")return Array.from(Z);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o0(Z,m)}}function o0(Z,m){(m==null||m>Z.length)&&(m=Z.length);for(var t=0,n=new Array(m);t<m;t++)n[t]=Z[t];return n}function lu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qo(Z,m){var t=typeof Symbol<"u"&&Z[Symbol.iterator]||Z["@@iterator"];if(!t){if(Array.isArray(Z)||(t=ms(Z))||m&&Z&&typeof Z.length=="number"){t&&(Z=t);var n=0,o=function(){};return{s:o,n:function(){return n>=Z.length?{done:!0}:{done:!1,value:Z[n++]}},e:function(E){throw E},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,d=!1,c;return{s:function(){t=t.call(Z)},n:function(){var E=t.next();return l=E.done,E},e:function(E){d=!0,c=E},f:function(){try{!l&&t.return!=null&&t.return()}finally{if(d)throw c}}}}function du(Z,m){if(typeof Z!="object"||Z===null)return Z;var t=Z[Symbol.toPrimitive];if(t!==void 0){var n=t.call(Z,m||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(Z)}function vl(Z){var m=du(Z,"string");return typeof m=="symbol"?m:String(m)}var cu=function(){function Z(m,t){En(this,Z),this.coreX=m,this.coreY=t}return Rn(Z,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}}]),Z}();Date.prototype.Format=function(Z){var m={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(Z)&&(Z=Z.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in m)new RegExp("("+t+")").test(Z)&&(Z=Z.replace(RegExp.$1,RegExp.$1.length==1?m[t]:("00"+m[t]).substr((""+m[t]).length)));return Z};var _s=function(m,t,n,o){var l=document.getElementsByTagName("head")[0].getElementsByTagName("script"),d=!1;if(n)d=n();else for(var c=0;c<l.length;c++)l[c].getAttribute("src")==m&&(d=!0,l[c].readyState?l[c].onreadystatechange=function(){(l[c].readyState=="complete"||l[c].readyState=="loaded")&&(l[c].onreadystatechange=null,t(o))}:l[c].onload=function(){t(o)});if(d)setTimeout(function(){t(o)},15);else{var E=document.createElement("script");E.setAttribute("src",m),E.setAttribute("crossorigin",!0),E.onload=function(){return t(o)},document.getElementsByTagName("head")[0].appendChild(E)}},po=function(m,t){for(var n=document.getElementsByTagName("head")[0].getElementsByTagName("link"),o=!1,l=0;l<n.length;l++)n[l].getAttribute("href")==m&&(o=!0);if(!o){var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.href=m,d.onload=t,document.getElementsByTagName("head")[0].appendChild(d)}},Sa=function(m){return!!m&&(Ni(m)==="object"||typeof m=="function")&&typeof m.then=="function"},ar=function(m,t){var n=new RegExp("(\\?|#|&)"+m+"=(.*?)(#|&|$)"),o=(t||window.location.href).match(n);return decodeURIComponent(o?o[2]:"")},Oa=function(m,t){var n=t.parentNode;n.lastChild==t?n.appendChild(m):n.insertBefore(m,t.nextSibling)},uu=function(m){if(console.log("requestFullScreen",document.getElementById(m)),navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1)m.webkitRequestFullScreen();else{var t=m.requestFullScreen||m.webkitRequestFullScreen||m.mozRequestFullScreen||m.msRequestFullScreen;if(t)t.call(m);else if(typeof window.ActiveXObject<"u"){var n=new window.ActiveXObject("WScript.Shell");n!==null&&n.SendKeys("{F11}")}}},yl=function(m){var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=m,l="";l+="width:"+n+"px;",l+="height:"+t+"px;",l+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",l+="-webkit-transform-origin: "+t/2+"px "+t/2+"px;",l+="transform-origin: "+t/2+"px "+t/2+"px;",l+="position: fixed;top: 0;left: 0;z-index:10",o.style.cssText=l},Jo=function(m){uu(m);var t=new Promise(function(n,o){var l=setInterval(function(){var c=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(c)return clearInterval(l),n(!0)},100),d=setTimeout(function(){var c=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;c||o(!1),clearTimeout(d)},2e3)});return t},fu=function(m,t,n){var o="";o+="width:"+t+"px;",o+="height:"+n+"px;",o+="-webkit-transform: none; transform: none;",o+="-webkit-transform-origin: 0 0;",o+="transform-origin: 0 0;",m.style.cssText=o},hu=function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},gs=function(m){hu();var t=new Promise(function(n,o){var l=setInterval(function(){var c=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;if(!c)return clearInterval(l),n(!0)},50),d=setTimeout(function(){var c=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;c&&o(!1),clearTimeout(d)},2e3)});return t},pn=function(m){var t=m.split("/")[3],n=m.split("/")[4].split(".")[0],o=m.split("/")[2].split("@").length===2?m.split("/")[2].split("@")[0]:"",l=m.indexOf(".hd")!==-1,d=m.split("/")[4].split(".")[m.split("/")[4].split(".").length-1].split("?")[0];return d==="rec"&&m.indexOf(".cloud.rec")!==-1&&(d="cloud.rec"),{deviceSerial:t,channelNo:n,validCode:o,hd:l,type:d}},bl=function(m){var t=/\/([A-Za-z\d]{9})\_(\d)\_(\d)/,n=m.match(t);if(n.length>3){var o=n[1],l=n[2],d=n[3]==="1",c="live";return m.indexOf("rec=local")>-1?c="rec":m.indexOf("rec=cloud")>-1&&(c="cloud.rec"),{deviceSerial:o,channelNo:l,hd:d,type:c}}return{}};function xu(Z){if(typeof Z=="string")try{var m=JSON.parse(Z);return!!(Ni(m)==="object"&&m)}catch{return!1}console.log("It is not a string!")}var Ca=function(m,t,n,o,l,d){var c=m,E=new XMLHttpRequest;E.onreadystatechange=function(){if(E.readyState==4&&E.status==200)if(xu(E.responseText)){var w=JSON.parse(E.responseText);l(w)}else l(E.responseText)},E.open(t,c,!0);var C=new FormData;for(var y in n)C.append(y,n[y]);if(o&&Ni(o)==="object")for(var y in o)E.setRequestHeader(y,o[y]);E.send(C)},Ko=function(){return window?navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone|Opera Mini)/i):!1},pu=function(){function Z(m,t){var n=this;En(this,Z),_s("https://open.ys7.com/assets/ezuikit_v3.4/js/hls.js",function(){console.log("加载hls.min.js成功",window.Hls),console.log("isSupportHls",window.Hls.isSupported()),window.Hls.isSupported()&&n.initHLS(m,t)},function(){return!!window.Hls})}return Rn(Z,[{key:"toString",value:function(){return"hls ".concat(this.coreX,"-").concat(this.coreY)}},{key:"initHLS",value:function(t,n){var o=bl(n),l=o.deviceSerial,d=o.channelNo;o.hd,window.ezuikitMonitor.report({protocol:"hls",url:n,serial:l,no:d,action:1});var c=document.getElementById(t),E=new window.Hls({defaultAudioCodec:"mp4a.40.2"});E.loadSource(n),E.attachMedia(c),E.on(window.Hls.Events.MANIFEST_PARSED,function(){c.play()}),E.on(window.Hls.Events.ERROR,function(C,y){if(y.fatal)switch(y.type){case window.Hls.ErrorTypes.NETWORK_ERROR:console.log("fatal network error encountered, try to recover"),E.startLoad();break;case window.Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),E.recoverMediaError();break;default:E.destroy();break}}),this.hls=E,this.video=c,this.hlsUrl=n}},{key:"play",value:function(){console.log("执行hls播放",this.video),this.hls.startLoad(),this.video.play()}},{key:"stop",value:function(){this.video.pause(),this.hls.stopLoad()}}]),Z}(),Na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ml<"u"?ml:typeof self<"u"?self:{};function Sl(Z){return Z&&Z.__esModule&&Object.prototype.hasOwnProperty.call(Z,"default")?Z.default:Z}var mu={exports:{}};(function(Z,m){(function(t,n){Z.exports=n()})(self,()=>(()=>{var t={99:l=>{var d,c=typeof Reflect=="object"?Reflect:null,E=c&&typeof c.apply=="function"?c.apply:function(x,O,ne){return Function.prototype.apply.call(x,O,ne)};d=c&&typeof c.ownKeys=="function"?c.ownKeys:Object.getOwnPropertySymbols?function(x){return Object.getOwnPropertyNames(x).concat(Object.getOwnPropertySymbols(x))}:function(x){return Object.getOwnPropertyNames(x)};var C=Number.isNaN||function(x){return x!=x};function y(){y.init.call(this)}l.exports=y,l.exports.once=function(x,O){return new Promise(function(ne,Q){function ye(Ze){x.removeListener(O,se),Q(Ze)}function se(){typeof x.removeListener=="function"&&x.removeListener("error",ye),ne([].slice.call(arguments))}ue(x,O,se,{once:!0}),O!=="error"&&function(Ze,Qe,M){typeof Ze.on=="function"&&ue(Ze,"error",Qe,M)}(x,ye,{once:!0})})},y.EventEmitter=y,y.prototype._events=void 0,y.prototype._eventsCount=0,y.prototype._maxListeners=void 0;var w=10;function g(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}function p(x){return x._maxListeners===void 0?y.defaultMaxListeners:x._maxListeners}function te(x,O,ne,Q){var ye,se,Ze,Qe;if(g(ne),(se=x._events)===void 0?(se=x._events=Object.create(null),x._eventsCount=0):(se.newListener!==void 0&&(x.emit("newListener",O,ne.listener?ne.listener:ne),se=x._events),Ze=se[O]),Ze===void 0)Ze=se[O]=ne,++x._eventsCount;else if(typeof Ze=="function"?Ze=se[O]=Q?[ne,Ze]:[Ze,ne]:Q?Ze.unshift(ne):Ze.push(ne),(ye=p(x))>0&&Ze.length>ye&&!Ze.warned){Ze.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+Ze.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=x,M.type=O,M.count=Ze.length,Qe=M,console&&console.warn&&console.warn(Qe)}return x}function ae(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function de(x,O,ne){var Q={fired:!1,wrapFn:void 0,target:x,type:O,listener:ne},ye=ae.bind(Q);return ye.listener=ne,Q.wrapFn=ye,ye}function ie(x,O,ne){var Q=x._events;if(Q===void 0)return[];var ye=Q[O];return ye===void 0?[]:typeof ye=="function"?ne?[ye.listener||ye]:[ye]:ne?function(se){for(var Ze=new Array(se.length),Qe=0;Qe<Ze.length;++Qe)Ze[Qe]=se[Qe].listener||se[Qe];return Ze}(ye):Ve(ye,ye.length)}function we(x){var O=this._events;if(O!==void 0){var ne=O[x];if(typeof ne=="function")return 1;if(ne!==void 0)return ne.length}return 0}function Ve(x,O){for(var ne=new Array(O),Q=0;Q<O;++Q)ne[Q]=x[Q];return ne}function ue(x,O,ne,Q){if(typeof x.on=="function")Q.once?x.once(O,ne):x.on(O,ne);else{if(typeof x.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x);x.addEventListener(O,function ye(se){Q.once&&x.removeEventListener(O,ye),ne(se)})}}Object.defineProperty(y,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(x){if(typeof x!="number"||x<0||C(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");w=x}}),y.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},y.prototype.setMaxListeners=function(x){if(typeof x!="number"||x<0||C(x))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+x+".");return this._maxListeners=x,this},y.prototype.getMaxListeners=function(){return p(this)},y.prototype.emit=function(x){for(var O=[],ne=1;ne<arguments.length;ne++)O.push(arguments[ne]);var Q=x==="error",ye=this._events;if(ye!==void 0)Q=Q&&ye.error===void 0;else if(!Q)return!1;if(Q){var se;if(O.length>0&&(se=O[0]),se instanceof Error)throw se;var Ze=new Error("Unhandled error."+(se?" ("+se.message+")":""));throw Ze.context=se,Ze}var Qe=ye[x];if(Qe===void 0)return!1;if(typeof Qe=="function")E(Qe,this,O);else{var M=Qe.length,Te=Ve(Qe,M);for(ne=0;ne<M;++ne)E(Te[ne],this,O)}return!0},y.prototype.addListener=function(x,O){return te(this,x,O,!1)},y.prototype.on=y.prototype.addListener,y.prototype.prependListener=function(x,O){return te(this,x,O,!0)},y.prototype.once=function(x,O){return g(O),this.on(x,de(this,x,O)),this},y.prototype.prependOnceListener=function(x,O){return g(O),this.prependListener(x,de(this,x,O)),this},y.prototype.removeListener=function(x,O){var ne,Q,ye,se,Ze;if(g(O),(Q=this._events)===void 0)return this;if((ne=Q[x])===void 0)return this;if(ne===O||ne.listener===O)--this._eventsCount==0?this._events=Object.create(null):(delete Q[x],Q.removeListener&&this.emit("removeListener",x,ne.listener||O));else if(typeof ne!="function"){for(ye=-1,se=ne.length-1;se>=0;se--)if(ne[se]===O||ne[se].listener===O){Ze=ne[se].listener,ye=se;break}if(ye<0)return this;ye===0?ne.shift():function(Qe,M){for(;M+1<Qe.length;M++)Qe[M]=Qe[M+1];Qe.pop()}(ne,ye),ne.length===1&&(Q[x]=ne[0]),Q.removeListener!==void 0&&this.emit("removeListener",x,Ze||O)}return this},y.prototype.off=y.prototype.removeListener,y.prototype.removeAllListeners=function(x){var O,ne,Q;if((ne=this._events)===void 0)return this;if(ne.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ne[x]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete ne[x]),this;if(arguments.length===0){var ye,se=Object.keys(ne);for(Q=0;Q<se.length;++Q)(ye=se[Q])!=="removeListener"&&this.removeAllListeners(ye);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(O=ne[x])=="function")this.removeListener(x,O);else if(O!==void 0)for(Q=O.length-1;Q>=0;Q--)this.removeListener(x,O[Q]);return this},y.prototype.listeners=function(x){return ie(this,x,!0)},y.prototype.rawListeners=function(x){return ie(this,x,!1)},y.listenerCount=function(x,O){return typeof x.listenerCount=="function"?x.listenerCount(O):we.call(x,O)},y.prototype.listenerCount=we,y.prototype.eventNames=function(){return this._eventsCount>0?d(this._events):[]}},994:(l,d,c)=>{c.d(d,{Z:()=>E});const E=class{constructor(){this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.refFrames=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}isComplete(){const C=!this.hasAudio||this.hasAudio&&this.audioCodec!=null&&this.audioSampleRate!=null&&this.audioChannelCount!=null,y=!this.hasVideo||this.hasVideo&&this.videoCodec!=null&&this.width!=null&&this.height!=null&&this.fps!=null&&this.profile!=null&&this.level!=null&&this.refFrames!=null&&this.chromaFormat!=null&&this.sarNum!=null&&this.sarDen!=null;return this.mimeType!=null&&C&&y}isSeekable(){return this.hasKeyframesIndex}getNearestKeyframe(C){if(this.keyframesIndex==null)return null;const y=this.keyframesIndex,w=this._search(y.times,C);return{index:w,milliseconds:y.times[w],fileposition:y.filepositions[w]}}_search(C,y){let w=0;const g=C.length-1;let p=0,te=0,ae=g;for(y<C[0]&&(w=0,te=ae+1);te<=ae;){if(p=te+Math.floor((ae-te)/2),p===g||y>=C[p]&&y<C[p+1]){w=p;break}C[p]<y?te=p+1:ae=p-1}return w}}},68:(l,d,c)=>{c.d(d,{J1:()=>w,Vn:()=>y,Wk:()=>E,Yy:()=>C});class E{constructor(p,te,ae,de,ie){this.dts=p,this.pts=te,this.duration=ae,this.originalDts=de,this.isSyncPoint=ie,this.fileposition=null}}class C{constructor(){this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}appendSyncPoint(p){p.isSyncPoint=!0,this.syncPoints.push(p)}}class y{constructor(){this._list=[]}clear(){this._list=[]}appendArray(p){const te=this._list;p.length!==0&&(te.length>0&&p[0].originalDts<te[te.length-1].originalDts&&this.clear(),Array.prototype.push.apply(te,p))}getLastSyncPointBeforeDts(p){if(this._list.length===0)return null;const te=this._list;let ae=0;const de=te.length-1;let ie=0,we=0,Ve=de;for(p<te[0].dts&&(ae=0,we=Ve+1);we<=Ve;){if(ie=we+Math.floor((Ve-we)/2),ie===de||p>=te[ie].dts&&p<te[ie+1].dts){ae=ie;break}te[ie].dts<p?we=ie+1:Ve=ie-1}return this._list[ae]}}class w{constructor(p){this._type=p,this._list=[],this._lastAppendLocation=-1}get type(){return this._type}get length(){return this._list.length}isEmpty(){return this._list.length===0}clear(){this._list=[],this._lastAppendLocation=-1}_searchNearestSegmentBefore(p){var te;const ae=this._list;if(ae.length===0)return-2;const de=ae.length-1;let ie=0,we=0,Ve=de,ue=0;if(p<ae[0].originalBeginDts)return ue=-1,ue;for(;we<=Ve;){if(ie=we+Math.floor((Ve-we)/2),ie===de||p>(((te=ae[ie].lastSample)===null||te===void 0?void 0:te.originalDts)||0)&&p<ae[ie+1].originalBeginDts){ue=ie;break}ae[ie].originalBeginDts<p?we=ie+1:Ve=ie-1}return ue}_searchNearestSegmentAfter(p){return this._searchNearestSegmentBefore(p)+1}append(p){var te,ae;const de=this._list,ie=p,we=this._lastAppendLocation;let Ve=0;we!==-1&&we<de.length&&ie.originalBeginDts>=(((ae=(te=de[we])===null||te===void 0?void 0:te.lastSample)===null||ae===void 0?void 0:ae.originalDts)||0)&&(we===de.length-1||we<de.length-1&&ie.originalBeginDts<de[we+1].originalBeginDts)?Ve=we+1:de.length>0&&(Ve=this._searchNearestSegmentBefore(ie.originalBeginDts)+1),this._lastAppendLocation=Ve,this._list.splice(Ve,0,ie)}getLastSegmentBefore(p){const te=this._searchNearestSegmentBefore(p);return te>=0?this._list[te]:null}getLastSampleBefore(p){const te=this.getLastSegmentBefore(p);return te!=null?te.lastSample:null}getLastSyncPointBefore(p){let te=this._searchNearestSegmentBefore(p),ae=this._list[te].syncPoints;for(;ae.length===0&&te>0;)te--,ae=this._list[te].syncPoints;return ae.length>0?ae[ae.length-1]:null}}},943:(l,d,c)=>{c.d(d,{Z:()=>At});var E=c(99),C=c(645),y=c(479),w=c(994);function g(j,T,F){const S=j;if(T+F<S.length){for(;F--;)if((192&S[++T])!=128)return!1;return!0}return!1}const p=function(j){const T=[],F=j;let S=0;const be=j.length;for(;S<be;)if(F[S]<128)T.push(String.fromCharCode(F[S])),++S;else{if(!(F[S]<192)){if(F[S]<224){if(g(F,S,1)){const _e=(31&F[S])<<6|63&F[S+1];if(_e>=128){T.push(String.fromCharCode(65535&_e)),S+=2;continue}}}else if(F[S]<240){if(g(F,S,2)){const _e=(15&F[S])<<12|(63&F[S+1])<<6|63&F[S+2];if(_e>=2048&&(63488&_e)!=55296){T.push(String.fromCharCode(65535&_e)),S+=3;continue}}}else if(F[S]<248&&g(F,S,3)){let _e=(7&F[S])<<18|(63&F[S+1])<<12|(63&F[S+2])<<6|63&F[S+3];if(_e>65536&&_e<1114112){_e-=65536,T.push(String.fromCharCode(_e>>>10|55296)),T.push(String.fromCharCode(1023&_e|56320)),S+=4;continue}}}T.push("�"),++S}return T.join("")};var te=c(411);const ae=function(){const j=new ArrayBuffer(2);return new DataView(j).setInt16(0,256,!0),new Int16Array(j)[0]===256}();class de{static parseScriptData(T,F,S){const be={};try{const _e=de.parseValue(T,F,S),Me=de.parseValue(T,F+_e.size,S-_e.size);be[_e.data]=Me.data}catch(_e){C.Z.e("AMF",_e.toString())}return be}static parseObject(T,F,S){if(S<3)throw new te.rT("Data not enough when parse ScriptDataObject");const be=de.parseString(T,F,S),_e=de.parseValue(T,F+be.size,S-be.size),Me=_e.objectEnd;return{data:{name:be.data,value:_e.data},size:be.size+_e.size,objectEnd:Me}}static parseVariable(T,F,S){return de.parseObject(T,F,S)}static parseString(T,F,S){if(S<2)throw new te.rT("Data not enough when parse String");const be=new DataView(T,F,S).getUint16(0,!ae);let _e;return _e=be>0?p(new Uint8Array(T,F+2,be)):"",{data:_e,size:2+be}}static parseLongString(T,F,S){if(S<4)throw new te.rT("Data not enough when parse LongString");const be=new DataView(T,F,S).getUint32(0,!ae);let _e;return _e=be>0?p(new Uint8Array(T,F+4,be)):"",{data:_e,size:4+be}}static parseDate(T,F,S){if(S<10)throw new te.rT("Data size invalid when parse Date");const be=new DataView(T,F,S);let _e=be.getFloat64(0,!ae);return _e+=60*be.getInt16(8,!ae)*1e3,{data:new Date(_e),size:10}}static parseValue(T,F,S){if(S<1)throw new te.rT("Data not enough when parse Value");const be=new DataView(T,F,S);let _e=1;const Me=be.getUint8(0);let Ue,ft=!1;try{switch(Me){case 0:Ue=be.getFloat64(1,!ae),_e+=8;break;case 1:Ue=!!be.getUint8(1),_e+=1;break;case 2:{const Gt=de.parseString(T,F+1,S-1);Ue=Gt.data,_e+=Gt.size;break}case 3:{Ue={};let Gt=0;for((16777215&be.getUint32(S-4,!ae))==9&&(Gt=3);_e<S-4;){const Ft=de.parseObject(T,F+_e,S-_e-Gt);if(Ft.objectEnd)break;Ue[Ft.data.name]=Ft.data.value,_e+=Ft.size}_e<=S-3&&(16777215&be.getUint32(_e-1,!ae))===9&&(_e+=3);break}case 8:{Ue={},_e+=4;let Gt=0;for((16777215&be.getUint32(S-4,!ae))==9&&(Gt=3);_e<S-8;){const Ft=de.parseVariable(T,F+_e,S-_e-Gt);if(Ft.objectEnd)break;Ue[Ft.data.name]=Ft.data.value,_e+=Ft.size}_e<=S-3&&(16777215&be.getUint32(_e-1,!ae))===9&&(_e+=3);break}case 9:Ue=void 0,_e=1,ft=!0;break;case 10:{Ue=[];const Gt=be.getUint32(1,!ae);_e+=4;for(let Ft=0;Ft<Gt;Ft++){const Ee=de.parseValue(T,F+_e,S-_e);Ue.push(Ee.data),_e+=Ee.size}break}case 11:{const Gt=de.parseDate(T,F+1,S-1);Ue=Gt.data,_e+=Gt.size;break}case 12:{const Gt=de.parseString(T,F+1,S-1);Ue=Gt.data,_e+=Gt.size;break}default:_e=S,C.Z.w("AMF","Unsupported AMF value type "+Me.toString())}}catch(Gt){C.Z.e("AMF",Gt.toString())}return{data:Ue,size:_e,objectEnd:ft}}}const ie=de,we=class{constructor(j){this.TAG="ExpGolomb",this._buffer=j,this._buffer_index=0,this._total_bytes=j.byteLength,this._total_bits=8*j.byteLength,this._current_word=0,this._current_word_bits_left=0}destroy(){this._buffer=null}_fillCurrentWord(){var j;const T=this._total_bytes-this._buffer_index;if(T<=0)throw new te.rT("ExpGolomb: _fillCurrentWord() but no bytes available");const F=Math.min(4,T),S=new Uint8Array(4);S.set((j=this._buffer)===null||j===void 0?void 0:j.subarray(this._buffer_index,this._buffer_index+F)),this._current_word=new DataView(S.buffer).getUint32(0,!1),this._buffer_index+=F,this._current_word_bits_left=8*F}readBits(j){if(j>32)throw new te.OC("ExpGolomb: readBits() bits exceeded max 32bits!");if(j<=this._current_word_bits_left){const _e=this._current_word>>>32-j;return this._current_word<<=j,this._current_word_bits_left-=j,_e}let T=this._current_word_bits_left?this._current_word:0;T>>>=32-this._current_word_bits_left;const F=j-this._current_word_bits_left;this._fillCurrentWord();const S=Math.min(F,this._current_word_bits_left),be=this._current_word>>>32-S;return this._current_word<<=S,this._current_word_bits_left-=S,T=T<<S|be,T}readBool(){return this.readBits(1)===1}readByte(){return this.readBits(8)}_skipLeadingZero(){let j;for(j=0;j<this._current_word_bits_left;j++)if(this._current_word&2147483648>>>j)return this._current_word<<=j,this._current_word_bits_left-=j,j;return this._fillCurrentWord(),j+this._skipLeadingZero()}readUEG(){const j=this._skipLeadingZero();return this.readBits(j+1)-1}readSEG(){const j=this.readUEG();return 1&j?j+1>>>1:-1*(j>>>1)}};class Ve{static _ebsp2rbsp(T){const F=T,S=F.byteLength,be=new Uint8Array(S);let _e=0;for(let Me=0;Me<S;Me++)Me>=2&&F[Me]===3&&F[Me-1]===0&&F[Me-2]===0||(be[_e]=F[Me],_e++);return new Uint8Array(be.buffer,0,_e)}static parseSPS(T){const F=T.subarray(1,4);let S="avc1.";for(let fn=0;fn<3;fn++){let Cn=F[fn].toString(16);Cn.length<2&&(Cn="0"+Cn),S+=Cn}const be=Ve._ebsp2rbsp(T);let _e=new we(be);_e.readByte();const Me=_e.readByte();_e.readByte();const Ue=_e.readByte();_e.readUEG();const ft=Ve.getProfileString(Me),Gt=Ve.getLevelString(Ue);let Ft=1,Ee=420;const nt=[0,420,422,444];let Zt=8,bi=8;if((Me===100||Me===110||Me===122||Me===244||Me===44||Me===83||Me===86||Me===118||Me===128||Me===138||Me===144)&&(Ft=_e.readUEG(),Ft===3&&_e.readBits(1),Ft<=3&&(Ee=nt[Ft]),Zt=_e.readUEG()+8,bi=_e.readUEG()+8,_e.readBits(1),_e.readBool())){const fn=Ft!==3?8:12;for(let Cn=0;Cn<fn;Cn++)_e.readBool()&&(Cn<6?Ve._skipScalingList(_e,16):Ve._skipScalingList(_e,64))}_e.readUEG();const Kt=_e.readUEG();if(Kt===0)_e.readUEG();else if(Kt===1){_e.readBits(1),_e.readSEG(),_e.readSEG();const fn=_e.readUEG();for(let Cn=0;Cn<fn;Cn++)_e.readSEG()}const ri=_e.readUEG();_e.readBits(1);const Li=_e.readUEG(),li=_e.readUEG(),Mt=_e.readBits(1);Mt===0&&_e.readBits(1),_e.readBits(1);let Nt=0,ai=0,ji=0,tn=0;_e.readBool()&&(Nt=_e.readUEG(),ai=_e.readUEG(),ji=_e.readUEG(),tn=_e.readUEG());let Ui=1,Gi=1,nn=0,Zi=!0,Yi=0,bn=0;if(_e.readBool()){if(_e.readBool()){const fn=_e.readByte();fn>0&&fn<16?(Ui=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][fn-1],Gi=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][fn-1]):fn===255&&(Ui=_e.readByte()<<8|_e.readByte(),Gi=_e.readByte()<<8|_e.readByte())}if(_e.readBool()&&_e.readBool(),_e.readBool()&&(_e.readBits(4),_e.readBool()&&_e.readBits(24)),_e.readBool()&&(_e.readUEG(),_e.readUEG()),_e.readBool()){const fn=_e.readBits(32),Cn=_e.readBits(32);Zi=_e.readBool(),Yi=Cn,bn=2*fn,nn=Yi/bn}}let vn=1;Ui===1&&Gi===1||(vn=Ui/Gi);let jn=0,un=0;Ft===0?(jn=1,un=2-Mt):(jn=Ft===3?1:2,un=(Ft===1?2:1)*(2-Mt));let Un=16*(Li+1),Hn=16*(li+1)*(2-Mt);Un-=(Nt+ai)*jn,Hn-=(ji+tn)*un;const yn=Math.ceil(Un*vn);return _e.destroy(),_e=null,{codec_mimetype:S,profile_idc:Me,level_idc:Ue,profile_string:ft,level_string:Gt,chroma_format_idc:Ft,bit_depth:Zt,bit_depth_luma:Zt,bit_depth_chroma:bi,ref_frames:ri,chroma_format:Ee,chroma_format_string:Ve.getChromaFormatString(Ee),frame_rate:{fixed:Zi,fps:nn,fps_den:bn,fps_num:Yi},sar_ratio:{width:Ui,height:Gi},codec_size:{width:Un,height:Hn},present_size:{width:yn,height:Hn}}}static _skipScalingList(T,F){let S=8,be=8,_e=0;for(let Me=0;Me<F;Me++)be!==0&&(_e=T.readSEG(),be=(S+_e+256)%256),S=be===0?S:be}static getProfileString(T){switch(T){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}static getLevelString(T){return(T/10).toFixed(1)}static getChromaFormatString(T){switch(T){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}const ue=Ve;var x=c(898);class O{static _ebsp2rbsp(T){const F=T,S=F.byteLength,be=new Uint8Array(S);let _e=0;for(let Me=0;Me<S;Me++)Me>=2&&F[Me]===3&&F[Me-1]===0&&F[Me-2]===0||(be[_e]=F[Me],_e++);return new Uint8Array(be.buffer,0,_e)}static parseVPS(T){const F=O._ebsp2rbsp(T),S=new we(F);return S.readByte(),S.readByte(),S.readBits(4),S.readBits(2),S.readBits(6),{num_temporal_layers:S.readBits(3)+1,temporal_id_nested:S.readBool()}}static parseSPS(T){const F=O._ebsp2rbsp(T);let S=new we(F);S.readByte(),S.readByte();let be=0,_e=0,Me=0,Ue=0;S.readBits(4);const ft=S.readBits(3),Gt=(S.readBool(),S.readBits(2)),Ft=S.readBool(),Ee=S.readBits(5),nt=S.readByte(),Zt=S.readByte(),bi=S.readByte(),Kt=S.readByte(),ri=S.readByte(),Li=S.readByte(),li=S.readByte(),Mt=S.readByte(),Nt=S.readByte(),ai=S.readByte(),ji=S.readByte(),tn=[],Ui=[];for(let _n=0;_n<ft;_n++)tn.push(S.readBool()),Ui.push(S.readBool());if(ft>0)for(let _n=ft;_n<8;_n++)S.readBits(2);for(let _n=0;_n<ft;_n++)tn[_n]&&(S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte(),S.readByte()),Ui[_n]&&S.readByte();S.readUEG();const Gi=S.readUEG();Gi===3&&S.readBits(1);const nn=S.readUEG(),Zi=S.readUEG();S.readBool()&&(be+=S.readUEG(),_e+=S.readUEG(),Me+=S.readUEG(),Ue+=S.readUEG());const Yi=S.readUEG(),bn=S.readUEG(),vn=S.readUEG();for(let _n=S.readBool()?0:ft;_n<=ft;_n++)S.readUEG(),S.readUEG(),S.readUEG();if(S.readUEG(),S.readUEG(),S.readUEG(),S.readUEG(),S.readUEG(),S.readUEG(),S.readBool()&&S.readBool())for(let _n=0;_n<4;_n++)for(let fr=0;fr<(_n===3?2:6);fr++)if(S.readBool()){const Jn=Math.min(64,1<<4+(_n<<1));_n>1&&S.readSEG();for(let kn=0;kn<Jn;kn++)S.readSEG()}else S.readUEG();S.readBool(),S.readBool(),S.readBool()&&(S.readByte(),S.readUEG(),S.readUEG(),S.readBool());const jn=S.readUEG();let un=0;for(let _n=0;_n<jn;_n++){let fr=!1;if(_n!==0&&(fr=S.readBool()),fr){_n===jn&&S.readUEG(),S.readBool(),S.readUEG();let Jn=0;for(let kn=0;kn<=un;kn++){const mr=S.readBool();let Yn=!1;mr||(Yn=S.readBool()),(mr||Yn)&&Jn++}un=Jn}else{const Jn=S.readUEG(),kn=S.readUEG();un=Jn+kn;for(let mr=0;mr<Jn;mr++)S.readUEG(),S.readBool();for(let mr=0;mr<kn;mr++)S.readUEG(),S.readBool()}}if(S.readBool()){const _n=S.readUEG();for(let fr=0;fr<_n;fr++){for(let Jn=0;Jn<vn+4;Jn++)S.readBits(1);S.readBits(1)}}let Un=!1,Hn=0,yn=1,fn=1,Cn=!1,wr=1,tr=1;if(S.readBool(),S.readBool(),S.readBool()){if(S.readBool()){const _n=S.readByte();_n>0&&_n<=16?(yn=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][_n-1],fn=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][_n-1]):_n===255&&(yn=S.readBits(16),fn=S.readBits(16))}if(S.readBool()&&S.readBool(),S.readBool()&&(S.readBits(3),S.readBool(),S.readBool()&&(S.readByte(),S.readByte(),S.readByte())),S.readBool()&&(S.readUEG(),S.readUEG()),S.readBool(),S.readBool(),S.readBool(),Un=S.readBool(),Un&&(S.readUEG(),S.readUEG(),S.readUEG(),S.readUEG()),S.readBool()&&(wr=S.readBits(32),tr=S.readBits(32),S.readBool()&&S.readUEG(),S.readBool())){let _n=!1,fr=!1,Jn=!1;_n=S.readBool(),fr=S.readBool(),(_n||fr)&&(Jn=S.readBool(),Jn&&(S.readByte(),S.readBits(5),S.readBool(),S.readBits(5)),S.readBits(4),S.readBits(4),Jn&&S.readBits(4),S.readBits(5),S.readBits(5),S.readBits(5));for(let kn=0;kn<=ft;kn++){const mr=S.readBool();Cn=mr;let Yn=!1,Dr=1;mr||(Yn=S.readBool());let ta=!1;if(Yn?S.readSEG():ta=S.readBool(),ta||(Dr=S.readUEG()+1),_n)for(let Vr=0;Vr<Dr;Vr++)S.readUEG(),S.readUEG(),Jn&&(S.readUEG(),S.readUEG());if(fr)for(let Vr=0;Vr<Dr;Vr++)S.readUEG(),S.readUEG(),Jn&&(S.readUEG(),S.readUEG())}}S.readBool()&&(S.readBool(),S.readBool(),S.readBool(),Hn=S.readUEG(),S.readUEG(),S.readUEG(),S.readUEG(),S.readUEG())}S.readBool();const Nn=`hvc1.${Ee}.1.L${ji}.B0`,lr=nn-(be+_e)*(Gi===1||Gi===2?2:1),zr=Zi-(Me+Ue)*(Gi===1?2:1);let Ir=1;return yn!==1&&fn!==1&&(Ir=yn/fn),S.destroy(),S=null,{codec_mimetype:Nn,level_string:O.getLevelString(ji),profile_idc:Ee,bit_depth:Yi+8,ref_frames:1,chroma_format:Gi,chroma_format_string:O.getChromaFormatString(Gi),general_level_idc:ji,general_profile_space:Gt,general_tier_flag:Ft,general_profile_idc:Ee,general_profile_compatibility_flags_1:nt,general_profile_compatibility_flags_2:Zt,general_profile_compatibility_flags_3:bi,general_profile_compatibility_flags_4:Kt,general_constraint_indicator_flags_1:ri,general_constraint_indicator_flags_2:Li,general_constraint_indicator_flags_3:li,general_constraint_indicator_flags_4:Mt,general_constraint_indicator_flags_5:Nt,general_constraint_indicator_flags_6:ai,min_spatial_segmentation_idc:Hn,constant_frame_rate:0,chroma_format_idc:Gi,bit_depth_luma_minus8:Yi,bit_depth_chroma_minus8:bn,frame_rate:{fixed:Cn,fps:tr/wr,fps_den:wr,fps_num:tr},sar_ratio:{width:yn,height:fn},codec_size:{width:lr,height:zr},present_size:{width:lr*Ir,height:zr}}}static parsePPS(T){const F=O._ebsp2rbsp(T),S=new we(F);S.readByte(),S.readByte(),S.readUEG(),S.readUEG(),S.readBool(),S.readBool(),S.readBits(3),S.readBool(),S.readBool(),S.readUEG(),S.readUEG(),S.readSEG(),S.readBool(),S.readBool(),S.readBool()&&S.readUEG(),S.readSEG(),S.readSEG(),S.readBool(),S.readBool(),S.readBool(),S.readBool();const be=S.readBool(),_e=S.readBool();let Me=1;return _e&&be?Me=0:_e?Me=3:be&&(Me=2),{parallelismType:Me}}static getChromaFormatString(T){switch(T){case 0:return"4:0:0";case 1:return"4:2:0";case 2:return"4:2:2";case 3:return"4:4:4";default:return"Unknown"}}static getProfileString(T){switch(T){case 1:return"Main";case 2:return"Main10";case 3:return"MainSP";case 4:return"Rext";case 9:return"SCC";default:return"Unknown"}}static getLevelString(T){return(T/30).toFixed(1)}}const ne=O;function Q(j){return j.byteOffset%2==0&&j.byteLength%2==0}function ye(j){return j.byteOffset%4==0&&j.byteLength%4==0}function se(j,T){for(let F=0;F<j.length;F++)if(j[F]!==T[F])return!1;return!0}const Ze=function(j,T){return j.byteLength===T.byteLength&&(ye(j)&&ye(T)?function(F,S){return se(new Uint32Array(F.buffer,F.byteOffset,F.byteLength/4),new Uint32Array(S.buffer,S.byteOffset,S.byteLength/4))}(j,T):Q(j)&&Q(T)?function(F,S){return se(new Uint16Array(F.buffer,F.byteOffset,F.byteLength/2),new Uint16Array(S.buffer,S.byteOffset,S.byteLength/2))}(j,T):function(F,S){return se(F,S)}(j,T))};class Qe{static parseOBUs(T){let F=null;for(let S=0;S<T.byteLength;){T[S];const be=(120&T[S])>>3,_e=(4&T[S])!=0,Me=(2&T[S])!=0;T[S],S+=1,_e&&(S+=1);let Ue=Number.POSITIVE_INFINITY;if(Me){Ue=0;for(let ft=0;Ue|=(127&T[S])<<7*ft,S+=1,(128&T[S])!=0;ft++);}be===1&&(F=Qe.parseSeuqneceHeader(T.subarray(S,S+Ue))),S+=Ue}return F}static parseSeuqneceHeader(T){let F=new we(T);const S=F.readBits(3),be=(F.readBool(),F.readBool());let _e=!0,Me=0,Ue=0;const ft=[];if(be)ft.push({operating_point_idc:0,level:F.readBits(5),tier:0});else{if(F.readBool()){const nn=F.readBits(32),Zi=F.readBits(32),Yi=F.readBool();if(Yi){let bn=0;for(;F.readBits(1)===0;)bn+=1;bn>=32||(1<<bn)-1+F.readBits(bn)}Ue=nn,Me=Zi,_e=Yi,F.readBool()&&(F.readBits(5),F.readBits(32),F.readBits(5),F.readBits(5))}const Ui=F.readBool(),Gi=F.readBits(5);for(let nn=0;nn<=Gi;nn++){const Zi=F.readBits(12),Yi=F.readBits(5),bn=Yi>7?F.readBits(1):0;ft.push({operating_point_idc:Zi,level:Yi,tier:bn}),Ui&&F.readBool()&&F.readBits(4)}}const{level:Gt,tier:Ft}=ft[0],Ee=F.readBits(4),nt=F.readBits(4),Zt=F.readBits(Ee+1)+1,bi=F.readBits(nt+1)+1;let Kt=!1;be||(Kt=F.readBool()),Kt&&(F.readBits(4),F.readBits(4)),F.readBool(),F.readBool(),F.readBool();let ri=!1,Li=2;be||(F.readBool(),F.readBool(),F.readBool(),F.readBool(),ri=F.readBool(),ri&&(F.readBool(),F.readBool()),Li=F.readBool()?2:F.readBits(1),Li&&(F.readBool()||F.readBits(1)),ri&&F.readBits(3)+1),F.readBool(),F.readBool(),F.readBool();const li=F.readBool();let Mt=8;S===2&&li?Mt=F.readBool()?12:10:Mt=li?10:8;let Nt=!1;S!==1&&(Nt=F.readBool()),F.readBool()&&(F.readBits(8),F.readBits(8),F.readBits(8));let ai=1,ji=1;return Nt?(F.readBits(1),ai=1,ji=1):(F.readBits(1),S===0?(ai=1,ji=1):S===1?(ai=0,ji=0):Mt===12?F.readBits(1)&&F.readBits(1):(ai=1,ji=0),ai&&ji&&F.readBits(2),F.readBits(1)),F.readBool(),F.destroy(),F=null,{codec_mimetype:`av01.${S}.${Qe.getLevelString(Gt,Ft)}.${Mt.toString(10).padStart(2,"0")}`,level:Gt,tier:Ft,level_string:Qe.getLevelString(Gt,Ft),profile_idc:S,profile_string:`${S}`,bit_depth:Mt,ref_frames:1,chroma_format:Qe.getChromaFormat(Nt,ai,ji),chroma_format_string:Qe.getChromaFormatString(Nt,ai,ji),frame_rate:{fixed:_e,fps:Me/Ue,fps_den:Ue,fps_num:Me},sar_ratio:{width:1,height:1},codec_size:{width:Zt,height:bi},present_size:{width:1*Zt,height:bi}}}static getLevelString(T,F){return`${T.toString(10).padStart(2,"0")}${F===0?"M":"H"}`}static getChromaFormat(T,F,S){return T?0:F===0&&S===0?3:F===1&&S===0?2:F===1&&S===1?1:Number.NaN}static getChromaFormatString(T,F,S){return T?"4:0:0":F===0&&S===0?"4:4:4":F===1&&S===0?"4:2:2":F===1&&S===1?"4:2:0":"Unknown"}}const M=Qe;class Te{constructor(T,F){this.TAG="FLVDemuxer",this._config=F,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=T.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=T.hasAudioTrack,this._hasVideo=T.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new w.Z,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){const S=new ArrayBuffer(2);return new DataView(S).setInt16(0,256,!0),new Int16Array(S)[0]===256}()}destroy(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onMetaDataArrived=null,this._onScriptDataArrived=null,this._onTrackMetadata=null,this._onDataAvailable=null}static probe(T){const F=new Uint8Array(T);if(F.byteLength<9)return{needMoreData:!0};const S={match:!1};if(F[0]!==70||F[1]!==76||F[2]!==86||F[3]!==1)return S;const be=(4&F[4])>>>2!=0,_e=(1&F[4])!=0,Me=(Ue=F)[ft=5]<<24|Ue[ft+1]<<16|Ue[ft+2]<<8|Ue[ft+3];var Ue,ft;return Me<9?S:{match:!0,consumed:Me,dataOffset:Me,hasAudioTrack:be,hasVideoTrack:_e}}bindDataSource(T){return T.onDataArrival=this.parseChunks.bind(this),this}get onTrackMetadata(){return this._onTrackMetadata}set onTrackMetadata(T){this._onTrackMetadata=T}get onMediaInfo(){return this._onMediaInfo}set onMediaInfo(T){this._onMediaInfo=T}get onMetaDataArrived(){return this._onMetaDataArrived}set onMetaDataArrived(T){this._onMetaDataArrived=T}get onScriptDataArrived(){return this._onScriptDataArrived}set onScriptDataArrived(T){this._onScriptDataArrived=T}get onError(){return this._onError}set onError(T){this._onError=T}get onDataAvailable(){return this._onDataAvailable}set onDataAvailable(T){this._onDataAvailable=T}get timestampBase(){return this._timestampBase}set timestampBase(T){this._timestampBase=T}get overridedDuration(){return this._duration}set overridedDuration(T){this._durationOverrided=!0,this._duration=T,this._mediaInfo&&(this._mediaInfo.duration=T)}set overridedHasAudio(T){this._hasAudioFlagOverrided=!0,this._hasAudio=T,this._mediaInfo&&(this._mediaInfo.hasAudio=T)}set overridedHasVideo(T){this._hasVideoFlagOverrided=!0,this._hasVideo=T,this._mediaInfo&&(this._mediaInfo.hasVideo=T)}resetMediaInfo(){this._mediaInfo=new w.Z}_isInitialMetadataDispatched(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}parseChunks(T,F){var S,be;if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new te.rT("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");let _e=0;const Me=this._littleEndian;if(F===0){if(!(T.byteLength>13))return 0;{const Ue=Te.probe(T);_e=(Ue==null?void 0:Ue.dataOffset)||0}}for(this._firstParse&&(this._firstParse=!1,F+_e!==this._dataOffset&&C.Z.w(this.TAG,"First time parsing but chunk byteStart invalid!"),new DataView(T,_e).getUint32(0,!Me)!==0&&C.Z.w(this.TAG,"PrevTagSize0 !== 0 !!!"),_e+=4);_e<T.byteLength;){this._dispatch=!0;const Ue=new DataView(T,_e);if(_e+11+4>T.byteLength)break;const ft=Ue.getUint8(0),Gt=16777215&Ue.getUint32(0,!Me);if(_e+11+Gt+4>T.byteLength)break;if(ft!==8&&ft!==9&&ft!==18){C.Z.w(this.TAG,`Unsupported tag type ${ft}, skipped`),_e+=11+Gt+4;continue}const Ft=Ue.getUint8(4),Ee=Ue.getUint8(5),nt=Ue.getUint8(6)|Ee<<8|Ft<<16|Ue.getUint8(7)<<24;16777215&Ue.getUint32(7,!Me)&&C.Z.w(this.TAG,"Meet tag which has StreamID != 0!");const Zt=_e+11;switch(ft){case 8:this._parseAudioData(T,Zt,Gt,nt);break;case 9:this._parseVideoData(T,Zt,Gt,nt,F+_e);break;case 18:this._parseScriptData(T,Zt,Gt)}const bi=Ue.getUint32(11+Gt,!Me);bi!==11+Gt&&C.Z.w(this.TAG,`Invalid PrevTagSize ${bi}`),_e+=11+Gt+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(!((S=this._audioTrack)===null||S===void 0)&&S.length||!((be=this._videoTrack)===null||be===void 0)&&be.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),_e}_parseScriptData(T,F,S){var be,_e,Me;const Ue=ie.parseScriptData(T,F,S);if(Ue.hasOwnProperty("onMetaData")){if(Ue.onMetaData==null||typeof Ue.onMetaData!="object")return void C.Z.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&C.Z.w(this.TAG,"Found another onMetaData tag!"),this._metadata=Ue;const ft=(be=this._metadata)===null||be===void 0?void 0:be.onMetaData;if(this._onMetaDataArrived&&this._onMetaDataArrived(Object.assign({},ft)),typeof(ft==null?void 0:ft.hasAudio)=="boolean"&&(this._hasAudioFlagOverrided||(this._hasAudio=ft.hasAudio,this._mediaInfo&&(this._mediaInfo.hasAudio=this._hasAudio))),typeof(ft==null?void 0:ft.hasVideo)=="boolean"&&(this._hasVideoFlagOverrided||(this._hasVideo=ft.hasVideo,this._mediaInfo&&(this._mediaInfo.hasVideo=this._hasVideo))),typeof(ft==null?void 0:ft.audiodatarate)=="number"&&this._mediaInfo&&(this._mediaInfo.audioDataRate=ft.audiodatarate),typeof(ft==null?void 0:ft.videodatarate)=="number"&&this._mediaInfo&&(this._mediaInfo.videoDataRate=ft.videodatarate),typeof(ft==null?void 0:ft.width)=="number"&&this._mediaInfo&&(this._mediaInfo.width=ft.width),typeof(ft==null?void 0:ft.height)=="number"&&this._mediaInfo&&(this._mediaInfo.height=ft.height),typeof(ft==null?void 0:ft.duration)=="number"){if(!this._durationOverrided){const Gt=Math.floor(ft.duration*this._timescale);this._duration=Gt,this._mediaInfo&&(this._mediaInfo.duration=Gt)}}else this._mediaInfo&&(this._mediaInfo.duration=0);if(typeof(ft==null?void 0:ft.framerate)=="number"){const Gt=Math.floor(1e3*ft.framerate);if(Gt>0){const Ft=Gt/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=Ft,this._referenceFrameRate.fps_num=Gt,this._referenceFrameRate.fps_den=1e3,this._mediaInfo&&(this._mediaInfo.fps=Ft)}}if(typeof(ft==null?void 0:ft.keyframes)=="object"){this._mediaInfo&&(this._mediaInfo.hasKeyframesIndex=!0);const Gt=ft.keyframes;this._mediaInfo&&(this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(Gt)),ft.keyframes=null}else this._mediaInfo&&(this._mediaInfo.hasKeyframesIndex=!1);this._dispatch=!1,this._mediaInfo&&(this._mediaInfo.metadata=ft),C.Z.v(this.TAG,"Parsed onMetaData"),!((_e=this._mediaInfo)===null||_e===void 0)&&_e.isComplete()&&((Me=this._onMediaInfo)===null||Me===void 0||Me.call(this,this._mediaInfo))}Object.keys(Ue).length>0&&this._onScriptDataArrived&&this._onScriptDataArrived(Object.assign({},Ue))}_parseKeyframesIndex(T){const F=[],S=[];for(let be=1;be<T.times.length;be++){const _e=this._timestampBase+Math.floor(1e3*T.times[be]);F.push(_e),S.push(T.filepositions[be])}return{times:F,filepositions:S}}_parseAudioData(T,F,S,be){var _e,Me,Ue,ft,Gt,Ft,Ee,nt,Zt,bi;if(S<=1)return void C.Z.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");if(this._hasAudioFlagOverrided&&this._hasAudio===!1)return;this._littleEndian;const Kt=new DataView(T,F,S).getUint8(0),ri=Kt>>>4;if(ri!==2&&ri!==10)return void((_e=this._onError)===null||_e===void 0||_e.call(this,x.Z.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+ri));let Li=0;const li=(12&Kt)>>>2;if(!(li>=0&&li<=4))return void((Me=this._onError)===null||Me===void 0||Me.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+li));Li=this._flvSoundRateTable[li];const Mt=1&Kt;let Nt=this._audioMetadata;const ai=this._audioTrack;if(Nt||(this._hasAudio!==!1||this._hasAudioFlagOverrided||(this._hasAudio=!0,this._mediaInfo&&(this._mediaInfo.hasAudio=!0)),Nt=this._audioMetadata={},Nt.type="audio",Nt.id=ai==null?void 0:ai.id,Nt.timescale=this._timescale,Nt.duration=this._duration,Nt.audioSampleRate=Li,Nt.channelCount=Mt===0?1:2),ri===10){const ji=this._parseAACAudioData(T,F+1,S-1);if(ji===void 0)return;if((ji==null?void 0:ji.packetType)===0){if(Nt!=null&&Nt.config){if(Ze(ji.data.config,Nt==null?void 0:Nt.config))return;C.Z.w(this.TAG,"AudioSpecificConfig has been changed, re-generate initialization segment")}const tn=ji.data;Nt.audioSampleRate=tn==null?void 0:tn.samplingRate,Nt.channelCount=tn==null?void 0:tn.channelCount,Nt.codec=tn==null?void 0:tn.codec,Nt.originalCodec=tn==null?void 0:tn.originalCodec,Nt.config=tn==null?void 0:tn.config,Nt.refSampleDuration=1024/Nt.audioSampleRate*Nt.timescale,C.Z.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(!((Ue=this._audioTrack)===null||Ue===void 0)&&Ue.length||!((ft=this._videoTrack)===null||ft===void 0)&&ft.length)&&((Gt=this._onDataAvailable)===null||Gt===void 0||Gt.call(this,this._audioTrack,this._videoTrack)):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,(Ft=this._onTrackMetadata)===null||Ft===void 0||Ft.call(this,"audio",Nt);const Ui=this._mediaInfo;Ui.audioCodec=Nt.originalCodec||"",Ui.audioSampleRate=Nt.audioSampleRate,Ui.audioChannelCount=Nt.channelCount,Ui.hasVideo?Ui.videoCodec!=null&&(Ui.mimeType='video/x-flv; codecs="'+Ui.videoCodec+","+Ui.audioCodec+'"'):Ui.mimeType='video/x-flv; codecs="'+Ui.audioCodec+'"',Ui!=null&&Ui.isComplete()&&((Ee=this._onMediaInfo)===null||Ee===void 0||Ee.call(this,Ui))}else if(ji.packetType===1){const tn=this._timestampBase+be,Ui={unit:ji.data,length:ji.data.byteLength,dts:tn,pts:tn};ai&&(ai==null||ai.samples.push(Ui),ai.length+=((nt=ji==null?void 0:ji.data)===null||nt===void 0?void 0:nt.length)||0)}else C.Z.e(this.TAG,`Flv: Unsupported AAC data type ${ji.packetType}`)}else if(ri===2){if(!Nt.codec){const Gi=this._parseMP3AudioData(T,F+1,S-1,!0);if(Gi===void 0)return;Nt.audioSampleRate=Gi.samplingRate,Nt.channelCount=Gi.channelCount,Nt.codec=Gi.codec,Nt.originalCodec=Gi.originalCodec,Nt.refSampleDuration=1152/Nt.audioSampleRate*Nt.timescale,C.Z.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,(Zt=this._onTrackMetadata)===null||Zt===void 0||Zt.call(this,"audio",Nt);const nn=this._mediaInfo;nn.audioCodec=Nt.codec,nn.audioSampleRate=Nt.audioSampleRate,nn.audioChannelCount=Nt.channelCount,nn.audioDataRate=Gi.bitRate,nn!=null&&nn.hasVideo?nn.videoCodec!=null&&(nn.mimeType='video/x-flv; codecs="'+nn.videoCodec+","+nn.audioCodec+'"'):nn.mimeType='video/x-flv; codecs="'+nn.audioCodec+'"',nn.isComplete()&&((bi=this._onMediaInfo)===null||bi===void 0||bi.call(this,nn))}const ji=this._parseMP3AudioData(T,F+1,S-1,!1);if(ji===void 0)return;const tn=this._timestampBase+be,Ui={unit:ji,length:ji.byteLength,dts:tn,pts:tn};ai==null||ai.samples.push(Ui),ai&&(ai.length+=ji.length)}}_parseAACAudioData(T,F,S){if(S<=1)return void C.Z.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!");const be={},_e=new Uint8Array(T,F,S);return be.packetType=_e[0],_e[0]===0?be.data=this._parseAACAudioSpecificConfig(T,F+1,S-1):be.data=_e.subarray(1),be}_parseAACAudioSpecificConfig(T,F,S){var be,_e;const Me=new Uint8Array(T,F,S);let Ue=null,ft=0,Gt=0,Ft=0,Ee=null;if(ft=Gt=Me[0]>>>3,Ft=(7&Me[0])<<1|Me[1]>>>7,Ft<0||Ft>=this._mpegSamplingRates.length)return void((be=this._onError)===null||be===void 0||be.call(this,x.Z.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!"));const nt=this._mpegSamplingRates[Ft],Zt=(120&Me[1])>>>3;if(Zt<0||Zt>=8)return void((_e=this._onError)===null||_e===void 0||_e.call(this,x.Z.FORMAT_ERROR,"Flv: AAC invalid channel configuration"));ft===5&&(Ee=(7&Me[1])<<1|Me[2]>>>7,(124&Me[2])>>>2);const bi=self.navigator.userAgent.toLowerCase();return bi.includes("firefox")?Ft>=6?(ft=5,Ue=new Array(4),Ee=Ft-3):(ft=2,Ue=new Array(2),Ee=Ft):bi.includes("android")?(ft=2,Ue=new Array(2),Ee=Ft):(ft=5,Ee=Ft,Ue=new Array(4),Ft>=6?Ee=Ft-3:Zt===1&&(ft=2,Ue=new Array(2),Ee=Ft)),Ue[0]=ft<<3,Ue[0]|=(15&Ft)>>>1,Ue[1]=(15&Ft)<<7,Ue[1]|=(15&Zt)<<3,ft===5&&(Ue[1]|=(15&Ee)>>>1,Ue[2]=(1&Ee)<<7,Ue[2]|=8,Ue[3]=0),{config:Ue,samplingRate:nt,channelCount:Zt,codec:"mp4a.40."+ft,originalCodec:"mp4a.40."+Gt}}_parseMP3AudioData(T,F,S,be){if(S<4)return void C.Z.w(this.TAG,"Flv: Invalid MP3 packet, header missing!");this._littleEndian;const _e=new Uint8Array(T,F,S);let Me;if(be){if(_e[0]!==255)return;const Ue=_e[1]>>>3&3,ft=(6&_e[1])>>1,Gt=(240&_e[2])>>>4,Ft=(12&_e[2])>>>2,Ee=(_e[3]>>>6&3)!==3?2:1;let nt=0,Zt=0;const bi="mp3";switch(Ue){case 0:nt=this._mpegAudioV25SampleRateTable[Ft];break;case 2:nt=this._mpegAudioV20SampleRateTable[Ft];break;case 3:nt=this._mpegAudioV10SampleRateTable[Ft]}switch(ft){case 1:Gt<this._mpegAudioL3BitRateTable.length&&(Zt=this._mpegAudioL3BitRateTable[Gt]);break;case 2:Gt<this._mpegAudioL2BitRateTable.length&&(Zt=this._mpegAudioL2BitRateTable[Gt]);break;case 3:Gt<this._mpegAudioL1BitRateTable.length&&(Zt=this._mpegAudioL1BitRateTable[Gt])}Me={bitRate:Zt,samplingRate:nt,channelCount:Ee,codec:bi,originalCodec:bi}}else Me=_e;return Me}_parseVideoData(T,F,S,be,_e){var Me,Ue;if(S<=1)return void C.Z.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");if(this._hasVideoFlagOverrided&&this._hasVideo===!1)return;const ft=new Uint8Array(T,F,S)[0],Gt=(112&ft)>>>4;if(128&ft){const Ft=15&ft,Ee=String.fromCharCode(...new Uint8Array(T,F,S).slice(1,5));Ee==="hvc1"?this._parseEnhancedHEVCVideoPacket(T,F+5,S-5,be,_e,Gt,Ft):Ee==="av01"?this._parseEnhancedAV1VideoPacket(T,F+5,S-5,be,_e,Gt,Ft):(Ue=this._onError)===null||Ue===void 0||Ue.call(this,x.Z.CODEC_UNSUPPORTED,`Flv: Unsupported codec in video frame: ${Ee}`)}else{const Ft=15&ft;Ft===7?this._parseAVCVideoPacket(T,F+1,S-1,be,_e,Gt):Ft===12?this._parseHEVCVideoPacket(T,F+1,S-1,be,_e,Gt):(Me=this._onError)===null||Me===void 0||Me.call(this,x.Z.CODEC_UNSUPPORTED,`Flv: Unsupported codec in video frame: ${Ft}`)}}_parseAVCVideoPacket(T,F,S,be,_e,Me){var Ue;if(S<4)return void C.Z.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");const ft=this._littleEndian,Gt=new DataView(T,F,S),Ft=Gt.getUint8(0),Ee=(16777215&Gt.getUint32(0,!ft))<<8>>8;Ft===0?this._parseAVCDecoderConfigurationRecord(T,F+4,S-4):Ft===1?this._parseAVCVideoData(T,F+4,S-4,be,_e,Me,Ee):Ft===2||(Ue=this._onError)===null||Ue===void 0||Ue.call(this,x.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${Ft}`)}_parseHEVCVideoPacket(T,F,S,be,_e,Me){var Ue;if(S<4)return void C.Z.w(this.TAG,"Flv: Invalid HEVC packet, missing HEVCPacketType or/and CompositionTime");const ft=this._littleEndian,Gt=new DataView(T,F,S),Ft=Gt.getUint8(0),Ee=(16777215&Gt.getUint32(0,!ft))<<8>>8;Ft===0?this._parseHEVCDecoderConfigurationRecord(T,F+4,S-4):Ft===1?this._parseHEVCVideoData(T,F+4,S-4,be,_e,Me,Ee):Ft===2||(Ue=this._onError)===null||Ue===void 0||Ue.call(this,x.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${Ft}`)}_parseEnhancedHEVCVideoPacket(T,F,S,be,_e,Me,Ue){var ft;const Gt=this._littleEndian,Ft=new DataView(T,F,S);if(Ue===0)this._parseHEVCDecoderConfigurationRecord(T,F,S);else if(Ue===1){const Ee=(4294967040&Ft.getUint32(0,!Gt))>>8;this._parseHEVCVideoData(T,F+3,S-3,be,_e,Me,Ee)}else Ue===3?this._parseHEVCVideoData(T,F,S,be,_e,Me,0):Ue===2||(ft=this._onError)===null||ft===void 0||ft.call(this,x.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${Ue}`)}_parseEnhancedAV1VideoPacket(T,F,S,be,_e,Me,Ue){var ft,Gt;this._littleEndian,Ue===0?this._parseAV1CodecConfigurationRecord(T,F,S):Ue===1?this._parseAV1VideoData(T,F,S,be,_e,Me,0):Ue===5?(ft=this._onError)===null||ft===void 0||ft.call(this,x.Z.FORMAT_ERROR,`Flv: Not Suported MP2T AV1 video packet type ${Ue}`):Ue===2||(Gt=this._onError)===null||Gt===void 0||Gt.call(this,x.Z.FORMAT_ERROR,`Flv: Invalid video packet type ${Ue}`)}_parseAVCDecoderConfigurationRecord(T,F,S){var be,_e,Me,Ue,ft,Gt,Ft,Ee,nt,Zt,bi;if(S<7)return void C.Z.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");let Kt=this._videoMetadata;const ri=this._videoTrack,Li=this._littleEndian,li=new DataView(T,F,S);if(Kt){if(Kt.avcc!==void 0){const Ui=new Uint8Array(T,F,S);if(Ze(Ui,Kt.avcc))return;C.Z.w(this.TAG,"AVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo!==!1||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),Kt=this._videoMetadata={},Kt.type="video",Kt.id=ri==null?void 0:ri.id,Kt.timescale=this._timescale,Kt.duration=this._duration;const Mt=li.getUint8(0),Nt=li.getUint8(1);if(li.getUint8(2),li.getUint8(3),Mt!==1||Nt===0)return void((be=this._onError)===null||be===void 0||be.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord"));if(this._naluLengthSize=1+(3&li.getUint8(4)),this._naluLengthSize!==3&&this._naluLengthSize!==4)return void((_e=this._onError)===null||_e===void 0||_e.call(this,x.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)));const ai=31&li.getUint8(5);if(ai===0)return void((Me=this._onError)===null||Me===void 0||Me.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS"));ai>1&&C.Z.w(this.TAG,`Flv: Strange AVCDecoderConfigurationRecord: SPS Count = ${ai}`);let ji=6;for(let Ui=0;Ui<ai;Ui++){const Gi=li.getUint16(ji,!Li);if(ji+=2,Gi===0)continue;const nn=new Uint8Array(T,F+ji,Gi);ji+=Gi;const Zi=ue.parseSPS(nn);if(Ui!==0)continue;Kt.codecWidth=Zi.codec_size.width,Kt.codecHeight=Zi.codec_size.height,Kt.presentWidth=Zi.present_size.width,Kt.presentHeight=Zi.present_size.height,Kt.profile=Zi.profile_string,Kt.level=Zi.level_string,Kt.bitDepth=Zi.bit_depth,Kt.chromaFormat=Zi.chroma_format,Kt.sarRatio=Zi.sar_ratio,Kt.frameRate=Zi.frame_rate,Zi.frame_rate.fixed&&Zi.frame_rate.fps_num!==0&&Zi.frame_rate.fps_den!==0||(Kt.frameRate=this._referenceFrameRate);const Yi=(Ue=Kt.frameRate)===null||Ue===void 0?void 0:Ue.fps_den,bn=(ft=Kt.frameRate)===null||ft===void 0?void 0:ft.fps_num;Kt.refSampleDuration=Kt.timescale*(Yi/bn);const vn=nn.subarray(1,4);let jn="avc1.";for(let Un=0;Un<3;Un++){let Hn=vn[Un].toString(16);Hn.length<2&&(Hn="0"+Hn),jn+=Hn}Kt.codec=jn;const un=this._mediaInfo;un.width=Kt.codecWidth,un.height=Kt.codecHeight,un.fps=Kt.frameRate.fps,un.profile=Kt.profile,un.level=Kt.level,un.refFrames=Zi.ref_frames,un.chromaFormat=Zi.chroma_format_string,un.sarNum=Kt.sarRatio.width,un.sarDen=Kt.sarRatio.height,un.videoCodec=jn,un.hasAudio?un.audioCodec!=null&&(un.mimeType='video/x-flv; codecs="'+un.videoCodec+","+un.audioCodec+'"'):un.mimeType='video/x-flv; codecs="'+un.videoCodec+'"',un.isComplete()&&((Gt=this._onMediaInfo)===null||Gt===void 0||Gt.call(this,un))}const tn=li.getUint8(ji);if(tn!==0){tn>1&&C.Z.w(this.TAG,`Flv: Strange AVCDecoderConfigurationRecord: PPS Count = ${tn}`),ji++;for(let Ui=0;Ui<tn;Ui++){const Gi=li.getUint16(ji,!Li);ji+=2,Gi!==0&&(ji+=Gi)}Kt.avcc=new Uint8Array(S),Kt.avcc.set(new Uint8Array(T,F,S),0),C.Z.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(!((Ee=this._audioTrack)===null||Ee===void 0)&&Ee.length||!((nt=this._videoTrack)===null||nt===void 0)&&nt.length)&&((Zt=this._onDataAvailable)===null||Zt===void 0||Zt.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,(bi=this._onTrackMetadata)===null||bi===void 0||bi.call(this,"video",Kt)}else(Ft=this._onError)===null||Ft===void 0||Ft.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}_parseHEVCDecoderConfigurationRecord(T,F,S){var be,_e,Me,Ue,ft,Gt,Ft;if(S<22)return void C.Z.w(this.TAG,"Flv: Invalid HEVCDecoderConfigurationRecord, lack of data!");let Ee=this._videoMetadata;const nt=this._videoTrack,Zt=this._littleEndian,bi=new DataView(T,F,S);if(Ee){if(Ee.hvcc!==void 0){const li=new Uint8Array(T,F,S);if(Ze(li,Ee.hvcc))return;C.Z.w(this.TAG,"HEVCDecoderConfigurationRecord has been changed, re-generate initialization segment")}}else this._hasVideo!==!1||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),Ee=this._videoMetadata={},Ee.type="video",Ee.id=nt==null?void 0:nt.id,Ee.timescale=this._timescale,Ee.duration=this._duration;const Kt=bi.getUint8(0),ri=31&bi.getUint8(1);if(Kt!==1||ri===0)return void((be=this._onError)===null||be===void 0||be.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid HEVCDecoderConfigurationRecord"));if(this._naluLengthSize=1+(3&bi.getUint8(21)),this._naluLengthSize!==3&&this._naluLengthSize!==4)return void((_e=this._onError)===null||_e===void 0||_e.call(this,x.Z.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1)));const Li=bi.getUint8(22);for(let li=0,Mt=23;li<Li;li++){const Nt=63&bi.getUint8(Mt+0),ai=bi.getUint16(Mt+1,!Zt);Mt+=3;for(let ji=0;ji<ai;ji++){const tn=bi.getUint16(Mt+0,!Zt);if(ji===0)if(Nt===33){Mt+=2;const Ui=new Uint8Array(T,F+Mt,tn),Gi=ne.parseSPS(Ui);Ee.codecWidth=Gi.codec_size.width,Ee.codecHeight=Gi.codec_size.height,Ee.presentWidth=Gi.present_size.width,Ee.presentHeight=Gi.present_size.height,Ee.profile=Gi==null?void 0:Gi.profile_string,Ee.level=Gi.level_string,Ee.bitDepth=Gi.bit_depth,Ee.chromaFormat=Gi.chroma_format,Ee.sarRatio=Gi.sar_ratio,Ee.frameRate=Gi.frame_rate,Gi.frame_rate.fixed&&Gi.frame_rate.fps_num!==0&&Gi.frame_rate.fps_den!==0||(Ee.frameRate=this._referenceFrameRate);const nn=Ee.frameRate.fps_den,Zi=Ee.frameRate.fps_num;Ee.refSampleDuration=Ee.timescale*(nn/Zi),Ee.codec=Gi.codec_mimetype;const Yi=this._mediaInfo;Yi.width=Ee.codecWidth,Yi.height=Ee.codecHeight,Yi.fps=Ee.frameRate.fps,Yi.profile=Ee.profile,Yi.level=Ee.level,Yi.refFrames=Gi.ref_frames,Yi.chromaFormat=Gi.chroma_format_string,Yi.sarNum=Ee.sarRatio.width,Yi.sarDen=Ee.sarRatio.height,Yi.videoCodec=Gi.codec_mimetype,Yi.hasAudio?Yi.audioCodec!=null&&(Yi.mimeType='video/x-flv; codecs="'+Yi.videoCodec+","+Yi.audioCodec+'"'):Yi.mimeType='video/x-flv; codecs="'+Yi.videoCodec+'"',Yi.isComplete()&&((Me=this._onMediaInfo)===null||Me===void 0||Me.call(this,Yi)),Mt+=tn}else Mt+=2+tn;else Mt+=2+tn}}Ee.hvcc=new Uint8Array(S),Ee.hvcc.set(new Uint8Array(T,F,S),0),C.Z.v(this.TAG,"Parsed HEVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(!((Ue=this._audioTrack)===null||Ue===void 0)&&Ue.length||!((ft=this._videoTrack)===null||ft===void 0)&&ft.length)&&((Gt=this._onDataAvailable)===null||Gt===void 0||Gt.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,(Ft=this._onTrackMetadata)===null||Ft===void 0||Ft.call(this,"video",Ee)}_parseAV1CodecConfigurationRecord(T,F,S){var be,_e,Me,Ue,ft,Gt,Ft,Ee,nt,Zt,bi;if(S<4)return void C.Z.w(this.TAG,"Flv: Invalid AV1CodecConfigurationRecord, lack of data!");let Kt=this._videoMetadata;const ri=this._videoTrack,Li=(this._littleEndian,new DataView(T,F,S));Kt?Kt.av1c!==void 0&&C.Z.w(this.TAG,"Found another AV1CodecConfigurationRecord!"):(this._hasVideo!==!1||this._hasVideoFlagOverrided||(this._hasVideo=!0,this._mediaInfo&&(this._mediaInfo.hasVideo=!0)),Kt=this._videoMetadata={},Kt.type="video",Kt.id=ri==null?void 0:ri.id,Kt.timescale=this._timescale,Kt.duration=this._duration);const li=127&Li.getUint8(0);if(Li.getUint8(1),Li.getUint8(1),Li.getUint8(2),li!==1)return void((be=this._onError)===null||be===void 0||be.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"));const Mt=M.parseOBUs(new Uint8Array(T,F+4,S-4));if(Mt==null)return void((_e=this._onError)===null||_e===void 0||_e.call(this,x.Z.FORMAT_ERROR,"Flv: Invalid AV1CodecConfigurationRecord"));Kt.codecWidth=(Me=Mt==null?void 0:Mt.codec_size)===null||Me===void 0?void 0:Me.width,Kt.codecHeight=(Ue=Mt==null?void 0:Mt.codec_size)===null||Ue===void 0?void 0:Ue.height,Kt.presentWidth=(ft=Mt==null?void 0:Mt.present_size)===null||ft===void 0?void 0:ft.width,Kt.presentHeight=(Gt=Mt==null?void 0:Mt.present_size)===null||Gt===void 0?void 0:Gt.height,Kt.profile=Mt.profile_string,Kt.level=Mt.level_string,Kt.bitDepth=Mt.bit_depth,Kt.chromaFormat=Mt.chroma_format,Kt.sarRatio=Mt.sar_ratio,Kt.frameRate=Mt.frame_rate,Mt.frame_rate.fixed&&Mt.frame_rate.fps_num!==0&&Mt.frame_rate.fps_den!==0||(Kt.frameRate=this._referenceFrameRate);const Nt=Kt.frameRate.fps_den,ai=Kt.frameRate.fps_num;Kt.refSampleDuration=Kt.timescale*(Nt/ai),Kt.codec=Mt.codec_mimetype;const ji=this._mediaInfo;ji.width=Kt.codecWidth,ji.height=Kt.codecHeight,ji.fps=Kt.frameRate.fps,ji.profile=Kt.profile,ji.level=Kt.level,ji.refFrames=Mt.ref_frames,ji.chromaFormat=Mt.chroma_format_string,ji.sarNum=Kt.sarRatio.width,ji.sarDen=Kt.sarRatio.height,ji.videoCodec=Mt.codec_mimetype,ji.hasAudio?ji.audioCodec!=null&&(ji.mimeType='video/x-flv; codecs="'+ji.videoCodec+","+ji.audioCodec+'"'):ji.mimeType='video/x-flv; codecs="'+ji.videoCodec+'"',ji.isComplete()&&((Ft=this._onMediaInfo)===null||Ft===void 0||Ft.call(this,ji)),Kt.av1c=new Uint8Array(S),Kt.av1c.set(new Uint8Array(T,F,S),0),C.Z.v(this.TAG,"Parsed AV1CodecConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(!((Ee=this._audioTrack)===null||Ee===void 0)&&Ee.length||!((nt=this._videoTrack)===null||nt===void 0)&&nt.length)&&((Zt=this._onDataAvailable)===null||Zt===void 0||Zt.call(this,this._audioTrack,this._videoTrack)):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,(bi=this._onTrackMetadata)===null||bi===void 0||bi.call(this,"video",Kt)}_parseAVCVideoData(T,F,S,be,_e,Me,Ue){const ft=this._littleEndian,Gt=new DataView(T,F,S),Ft=[];let Ee=0,nt=0;const Zt=this._naluLengthSize,bi=this._timestampBase+be;let Kt=Me===1;for(;nt<S;){if(nt+4>=S){C.Z.w(this.TAG,`Malformed Nalu near timestamp ${bi}, offset = ${nt}, dataSize = ${S}`);break}let ri=Gt.getUint32(nt,!ft);if(Zt===3&&(ri>>>=8),ri>S-Zt)return void C.Z.w(this.TAG,`Malformed Nalus near timestamp ${bi}, NaluSize > DataSize!`);const Li=31&Gt.getUint8(nt+Zt);Li===5&&(Kt=!0);const li=new Uint8Array(T,F+nt,Zt+ri),Mt={type:Li,data:li};Ft.push(Mt),Ee+=li.byteLength,nt+=Zt+ri}if(Ft.length){const ri=this._videoTrack,Li={units:Ft,length:Ee,isKeyframe:Kt,dts:bi,cts:Ue,pts:bi+Ue};Kt&&(Li.fileposition=_e),ri&&(ri.samples.push(Li),ri.length+=Ee)}}_parseHEVCVideoData(T,F,S,be,_e,Me,Ue){const ft=this._littleEndian,Gt=new DataView(T,F,S),Ft=[];let Ee=0,nt=0;const Zt=this._naluLengthSize,bi=this._timestampBase+be;let Kt=Me===1;for(;nt<S;){if(nt+4>=S){C.Z.w(this.TAG,`Malformed Nalu near timestamp ${bi}, offset = ${nt}, dataSize = ${S}`);break}let ri=Gt.getUint32(nt,!ft);if(Zt===3&&(ri>>>=8),ri>S-Zt)return void C.Z.w(this.TAG,`Malformed Nalus near timestamp ${bi}, NaluSize > DataSize!`);const Li=31&Gt.getUint8(nt+Zt);Li!==19&&Li!==20||(Kt=!0);const li=new Uint8Array(T,F+nt,Zt+ri),Mt={type:Li,data:li};Ft.push(Mt),Ee+=li.byteLength,nt+=Zt+ri}if(Ft.length){const ri=this._videoTrack,Li={units:Ft,length:Ee,isKeyframe:Kt,dts:bi,cts:Ue,pts:bi+Ue};Kt&&(Li.fileposition=_e),ri&&(ri==null||ri.samples.push(Li),ri.length+=Ee)}}_parseAV1VideoData(T,F,S,be,_e,Me,Ue){this._littleEndian;const ft=[];let Gt=0;const Ft=this._timestampBase+be,Ee=Me===1;if(Gt=S,ft.push({unitType:0,data:new Uint8Array(T,F+0,S)}),ft.length){const nt=this._videoTrack,Zt={units:ft,length:Gt,isKeyframe:Ee,dts:Ft,cts:Ue,pts:Ft+Ue};Ee&&(Zt.fileposition=_e),nt&&(nt==null||nt.samples.push(Zt),nt.length+=Gt)}}}const ze=Te;class oi{constructor(){}destroy(){this.onError=null,this.onMediaInfo=null,this.onMetaDataArrived=null,this.onTrackMetadata=null,this.onDataAvailable=null,this.onTimedID3Metadata=null,this.onSMPTE2038Metadata=null,this.onSCTE35Metadata=null,this.onPESPrivateData=null,this.onPESPrivateDataDescriptor=null}}class wi{constructor(){this.program_pmt_pid={}}}var ui,di,zi,$e;(function(j){j[j.kMPEG1Audio=3]="kMPEG1Audio",j[j.kMPEG2Audio=4]="kMPEG2Audio",j[j.kPESPrivateData=6]="kPESPrivateData",j[j.kADTSAAC=15]="kADTSAAC",j[j.kLOASAAC=17]="kLOASAAC",j[j.kAC3=129]="kAC3",j[j.kEAC3=135]="kEAC3",j[j.kID3=21]="kID3",j[j.kSCTE35=134]="kSCTE35",j[j.kH264=27]="kH264",j[j.kH265=36]="kH265"})(ui||(ui={}));class st{constructor(){this.pid_stream_type={},this.common_pids={h264:void 0,h265:void 0,adts_aac:void 0,loas_aac:void 0,opus:void 0,ac3:void 0,eac3:void 0,mp3:void 0},this.pes_private_data_pids={},this.timed_id3_pids={},this.scte_35_pids={},this.smpte2038_pids={}}}class Ke{}class Ne{}class at{constructor(){this.slices=[],this.total_length=0,this.expected_length=0,this.file_position=0,this.random_access_indicator=0}}(function(j){j[j.kUnspecified=0]="kUnspecified",j[j.kSliceNonIDR=1]="kSliceNonIDR",j[j.kSliceDPA=2]="kSliceDPA",j[j.kSliceDPB=3]="kSliceDPB",j[j.kSliceDPC=4]="kSliceDPC",j[j.kSliceIDR=5]="kSliceIDR",j[j.kSliceSEI=6]="kSliceSEI",j[j.kSliceSPS=7]="kSliceSPS",j[j.kSlicePPS=8]="kSlicePPS",j[j.kSliceAUD=9]="kSliceAUD",j[j.kEndOfSequence=10]="kEndOfSequence",j[j.kEndOfStream=11]="kEndOfStream",j[j.kFiller=12]="kFiller",j[j.kSPSExt=13]="kSPSExt",j[j.kReserved0=14]="kReserved0"})(di||(di={}));class Ut{}class Wt{constructor(T){const F=T.data.byteLength;this.type=T.type,this.data=new Uint8Array(4+F),new DataView(this.data.buffer).setUint32(0,F),this.data.set(T.data,4)}}class kt{constructor(T){this.TAG="H264AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=T,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&C.Z.e(this.TAG,"Could not find H264 startcode until payload end!")}findNextStartCodeOffset(T){let F=T;const S=this.data_;for(;;){if(F+3>=S.byteLength)return this.eof_flag_=!0,S.byteLength;const be=S[F+0]<<24|S[F+1]<<16|S[F+2]<<8|S[F+3],_e=S[F+0]<<16|S[F+1]<<8|S[F+2];if(be===1||_e===1)return F;F++}}readNextNaluPayload(){const T=this.data_;let F=null;for(;F==null&&!this.eof_flag_;){let S=this.current_startcode_offset_;S+=(T[S]<<24|T[S+1]<<16|T[S+2]<<8|T[S+3])===1?4:3;const be=31&T[S],_e=(128&T[S])>>>7,Me=this.findNextStartCodeOffset(S);if(this.current_startcode_offset_=Me,be>=di.kReserved0||_e!==0)continue;const Ue=T.subarray(S,Me);F=new Ut,F.type=be,F.data=Ue}return F}}class ee{constructor(T,F,S){let be=8+T.byteLength+1+2+F.byteLength,_e=!1;T[3]!==66&&T[3]!==77&&T[3]!==88&&(_e=!0,be+=4);const Me=this.data=new Uint8Array(be);Me[0]=1,Me[1]=T[1],Me[2]=T[2],Me[3]=T[3],Me[4]=255,Me[5]=225;const Ue=T.byteLength;Me[6]=Ue>>>8,Me[7]=255&Ue;let ft=8;Me.set(T,8),ft+=Ue,Me[ft]=1;const Gt=F.byteLength;Me[ft+1]=Gt>>>8,Me[ft+2]=255&Gt,Me.set(F,ft+3),ft+=3+Gt,_e&&(Me[ft]=252|S.chroma_format_idc,Me[ft+1]=248|S.bit_depth_luma-8,Me[ft+2]=248|S.bit_depth_chroma-8,Me[ft+3]=0,ft+=4)}getData(){return this.data}}(function(j){j[j.kNull=0]="kNull",j[j.kAACMain=1]="kAACMain",j[j.kAAC_LC=2]="kAAC_LC",j[j.kAAC_SSR=3]="kAAC_SSR",j[j.kAAC_LTP=4]="kAAC_LTP",j[j.kAAC_SBR=5]="kAAC_SBR",j[j.kAAC_Scalable=6]="kAAC_Scalable",j[j.kLayer1=32]="kLayer1",j[j.kLayer2=33]="kLayer2",j[j.kLayer3=34]="kLayer3"})(zi||(zi={})),function(j){j[j.k96000Hz=0]="k96000Hz",j[j.k88200Hz=1]="k88200Hz",j[j.k64000Hz=2]="k64000Hz",j[j.k48000Hz=3]="k48000Hz",j[j.k44100Hz=4]="k44100Hz",j[j.k32000Hz=5]="k32000Hz",j[j.k24000Hz=6]="k24000Hz",j[j.k22050Hz=7]="k22050Hz",j[j.k16000Hz=8]="k16000Hz",j[j.k12000Hz=9]="k12000Hz",j[j.k11025Hz=10]="k11025Hz",j[j.k8000Hz=11]="k8000Hz",j[j.k7350Hz=12]="k7350Hz"}($e||($e={}));const me=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];class P{}class Y extends P{}class Oe{constructor(T){this.TAG="AACADTSParser",this.data_=T,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&C.Z.e(this.TAG,"Could not found ADTS syncword until payload end")}findNextSyncwordOffset(T){let F=T;const S=this.data_;for(;;){if(F+7>=S.byteLength)return this.eof_flag_=!0,S.byteLength;if((S[F+0]<<8|S[F+1])>>>4===4095)return F;F++}}readNextAACFrame(){const T=this.data_;let F=null;for(;F==null&&!this.eof_flag_;){let S=this.current_syncword_offset_;const be=(8&T[S+1])>>>3,_e=(6&T[S+1])>>>1,Me=1&T[S+1],Ue=(192&T[S+2])>>>6,ft=(60&T[S+2])>>>2,Gt=(1&T[S+2])<<2|(192&T[S+3])>>>6,Ft=(3&T[S+3])<<11|T[S+4]<<3|(224&T[S+5])>>>5;if(T[S+6],S+Ft>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const Ee=Me===1?7:9,nt=Ft-Ee;S+=Ee;const Zt=this.findNextSyncwordOffset(S+nt);if(this.current_syncword_offset_=Zt,be!==0&&be!==1||_e!==0)continue;const bi=T.subarray(S,S+nt);F=new P,F.audio_object_type=Ue+1,F.sampling_freq_index=ft,F.sampling_frequency=me[ft],F.channel_config=Gt,F.data=bi}return F}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class N{constructor(T){this.TAG="AACLOASParser",this.data_=T,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&C.Z.e(this.TAG,"Could not found LOAS syncword until payload end")}findNextSyncwordOffset(T){let F=T;const S=this.data_;for(;;){if(F+1>=S.byteLength)return this.eof_flag_=!0,S.byteLength;if((S[F+0]<<3|S[F+1]>>>5)===695)return F;F++}}getLATMValue(T){const F=T.readBits(2);let S=0;for(let be=0;be<=F;be++)S<<=8,S|=T.readByte();return S}readNextAACFrame(T){const F=this.data_;let S=null;for(;S==null&&!this.eof_flag_;){const be=this.current_syncword_offset_,_e=(31&F[be+1])<<8|F[be+2];if(be+3+_e>=this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const Me=new we(F.subarray(be+3,be+3+_e));let Ue=null;if(Me.readBool()){if(T==null){C.Z.w(this.TAG,"StreamMuxConfig Missing"),this.current_syncword_offset_=this.findNextSyncwordOffset(be+3+_e),Me.destroy();continue}Ue=T}else{const Ft=Me.readBool();if(Ft&&Me.readBool()){C.Z.e(this.TAG,"audioMuxVersionA is Not Supported"),Me.destroy();break}if(Ft&&this.getLATMValue(Me),!Me.readBool()){C.Z.e(this.TAG,"allStreamsSameTimeFraming zero is Not Supported"),Me.destroy();break}if(Me.readBits(6)!==0){C.Z.e(this.TAG,"more than 2 numSubFrames Not Supported"),Me.destroy();break}if(Me.readBits(4)!==0){C.Z.e(this.TAG,"more than 2 numProgram Not Supported"),Me.destroy();break}if(Me.readBits(3)!==0){C.Z.e(this.TAG,"more than 2 numLayer Not Supported"),Me.destroy();break}let Ee=Ft?this.getLATMValue(Me):0;const nt=Me.readBits(5);Ee-=5;const Zt=Me.readBits(4);Ee-=4;const bi=Me.readBits(4);Ee-=4,Me.readBits(3),Ee-=3,Ee>0&&Me.readBits(Ee);const Kt=Me.readBits(3);if(Kt!==0){C.Z.e(this.TAG,`frameLengthType = ${Kt}. Only frameLengthType = 0 Supported`),Me.destroy();break}Me.readByte();const ri=Me.readBool();if(ri)if(Ft)this.getLATMValue(Me);else{let Li=0;for(;;){Li<<=8;const li=Me.readBool();if(Li+=Me.readByte(),!li)break}console.log(Li)}Me.readBool()&&Me.readByte(),Ue=new Y,Ue.audio_object_type=nt,Ue.sampling_freq_index=Zt,Ue.sampling_frequency=me[Ue.sampling_freq_index],Ue.channel_config=bi,Ue.other_data_present=ri}let ft=0;for(;;){const Ft=Me.readByte();if(ft+=Ft,Ft!==255)break}const Gt=new Uint8Array(ft);for(let Ft=0;Ft<ft;Ft++)Gt[Ft]=Me.readByte();S=new Y,S.audio_object_type=Ue.audio_object_type,S.sampling_freq_index=Ue.sampling_freq_index,S.sampling_frequency=me[Ue.sampling_freq_index],S.channel_config=Ue.channel_config,S.other_data_present=Ue.other_data_present,S.data=Gt,this.current_syncword_offset_=this.findNextSyncwordOffset(be+3+_e)}return S}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class fe{constructor(T){let F=[];const S=T.audio_object_type;let be=T.audio_object_type;const _e=T.sampling_freq_index,Me=T.channel_config;let Ue=0;const ft=navigator.userAgent.toLowerCase();ft.includes("firefox")?_e>=6?(be=5,F=new Array(4),Ue=_e-3):(be=2,F=new Array(2),Ue=_e):ft.includes("android")?(be=2,F=new Array(2),Ue=_e):(be=5,Ue=_e,F=new Array(4),_e>=6?Ue=_e-3:Me===1&&(be=2,F=new Array(2),Ue=_e)),F[0]=be<<3,F[0]|=(15&_e)>>>1,F[1]=(15&_e)<<7,F[1]|=(15&Me)<<3,be===5&&(F[1]|=(15&Ue)>>>1,F[2]=(1&Ue)<<7,F[2]|=8,F[3]=0),this.config=F,this.sampling_rate=me[_e],this.channel_count=Me,this.codec_mimetype="mp4a.40."+be.toString(),this.original_codec_mimetype="mp4a.40."+S.toString()}}class I{}class L{}var re;(function(j){j[j.kSpliceNull=0]="kSpliceNull",j[j.kSpliceSchedule=4]="kSpliceSchedule",j[j.kSpliceInsert=5]="kSpliceInsert",j[j.kTimeSignal=6]="kTimeSignal",j[j.kBandwidthReservation=7]="kBandwidthReservation",j[j.kPrivateCommand=255]="kPrivateCommand"})(re||(re={}));const J=j=>{const T=j.readBool();return T?(j.readBits(6),{time_specified_flag:T,pts_time:4*j.readBits(31)+j.readBits(2)}):(j.readBits(7),{time_specified_flag:T})},De=j=>{const T=j.readBool();return j.readBits(6),{auto_return:T,duration:4*j.readBits(31)+j.readBits(2)}},Ye=(j,T)=>{const F=T.readBits(8);return j?{component_tag:F}:{component_tag:F,splice_time:J(T)}},et=j=>({component_tag:j.readBits(8),utc_splice_time:j.readBits(32)}),R=j=>{const T=j.readBits(32),F=j.readBool();j.readBits(7);const S={splice_event_id:T,splice_event_cancel_indicator:F};if(F)return S;if(S.out_of_network_indicator=j.readBool(),S.program_splice_flag=j.readBool(),S.duration_flag=j.readBool(),j.readBits(5),S.program_splice_flag)S.utc_splice_time=j.readBits(32);else{S.component_count=j.readBits(8),S.components=[];for(let be=0;be<S.component_count;be++)S.components.push(et(j))}return S.duration_flag&&(S.break_duration=De(j)),S.unique_program_id=j.readBits(16),S.avail_num=j.readBits(8),S.avails_expected=j.readBits(8),S},He=(j,T,F,S)=>({descriptor_tag:j,descriptor_length:T,identifier:F,provider_avail_id:S.readBits(32)}),G=(j,T,F,S)=>{const be=S.readBits(8),_e=S.readBits(3);S.readBits(5);let Me="";for(let Ue=0;Ue<_e;Ue++)Me+=String.fromCharCode(S.readBits(8));return{descriptor_tag:j,descriptor_length:T,identifier:F,preroll:be,dtmf_count:_e,DTMF_char:Me}},ge=j=>{const T=j.readBits(8);return j.readBits(7),{component_tag:T,pts_offset:4*j.readBits(31)+j.readBits(2)}},xe=(j,T,F,S)=>{const be=S.readBits(32),_e=S.readBool();S.readBits(7);const Me={descriptor_tag:j,descriptor_length:T,identifier:F,segmentation_event_id:be,segmentation_event_cancel_indicator:_e};if(_e)return Me;if(Me.program_segmentation_flag=S.readBool(),Me.segmentation_duration_flag=S.readBool(),Me.delivery_not_restricted_flag=S.readBool(),Me.delivery_not_restricted_flag?S.readBits(5):(Me.web_delivery_allowed_flag=S.readBool(),Me.no_regional_blackout_flag=S.readBool(),Me.archive_allowed_flag=S.readBool(),Me.device_restrictions=S.readBits(2)),!Me.program_segmentation_flag){Me.component_count=S.readBits(8),Me.components=[];for(let Ue=0;Ue<Me.component_count;Ue++)Me.components.push(ge(S))}Me.segmentation_duration_flag&&(Me.segmentation_duration=S.readBits(40)),Me.segmentation_upid_type=S.readBits(8),Me.segmentation_upid_length=S.readBits(8);{const Ue=new Uint8Array(Me.segmentation_upid_length);for(let ft=0;ft<Me.segmentation_upid_length;ft++)Ue[ft]=S.readBits(8);Me.segmentation_upid=Ue.buffer}return Me.segmentation_type_id=S.readBits(8),Me.segment_num=S.readBits(8),Me.segments_expected=S.readBits(8),Me.segmentation_type_id!==52&&Me.segmentation_type_id!==54&&Me.segmentation_type_id!==56&&Me.segmentation_type_id!==58||(Me.sub_segment_num=S.readBits(8),Me.sub_segments_expected=S.readBits(8)),Me},ke=(j,T,F,S)=>({descriptor_tag:j,descriptor_length:T,identifier:F,TAI_seconds:S.readBits(48),TAI_ns:S.readBits(32),UTC_offset:S.readBits(16)}),ce=j=>({component_tag:j.readBits(8),ISO_code:String.fromCharCode(j.readBits(8),j.readBits(8),j.readBits(8)),Bit_Stream_Mode:j.readBits(3),Num_Channels:j.readBits(4),Full_Srvc_Audio:j.readBool()}),X=(j,T,F,S)=>{const be=S.readBits(4),_e=[];for(let Me=0;Me<be;Me++)_e.push(ce(S));return{descriptor_tag:j,descriptor_length:T,identifier:F,audio_count:be,components:_e}},Be=j=>{var T,F,S,be,_e,Me;const Ue=new we(j),ft=Ue.readBits(8),Gt=Ue.readBool(),Ft=Ue.readBool();Ue.readBits(2);const Ee=Ue.readBits(12),nt=Ue.readBits(8),Zt=Ue.readBool(),bi=Ue.readBits(6),Kt=4*Ue.readBits(31)+Ue.readBits(2),ri=Ue.readBits(8),Li=Ue.readBits(12),li=Ue.readBits(12),Mt=Ue.readBits(8);let Nt=null;Mt===re.kSpliceNull?Nt={}:Mt===re.kSpliceSchedule?Nt=(Ui=>{const Gi=Ui.readBits(8),nn=[];for(let Zi=0;Zi<Gi;Zi++)nn.push(R(Ui));return{splice_count:Gi,events:nn}})(Ue):Mt===re.kSpliceInsert?Nt=(Ui=>{const Gi=Ui.readBits(32),nn=Ui.readBool();Ui.readBits(7);const Zi={splice_event_id:Gi,splice_event_cancel_indicator:nn};if(nn)return Zi;if(Zi.out_of_network_indicator=Ui.readBool(),Zi.program_splice_flag=Ui.readBool(),Zi.duration_flag=Ui.readBool(),Zi.splice_immediate_flag=Ui.readBool(),Ui.readBits(4),Zi.program_splice_flag&&!Zi.splice_immediate_flag&&(Zi.splice_time=J(Ui)),!Zi.program_splice_flag){Zi.component_count=Ui.readBits(8),Zi.components=[];for(let Yi=0;Yi<Zi.component_count;Yi++)Zi.components.push(Ye(Zi.splice_immediate_flag,Ui))}return Zi.duration_flag&&(Zi.break_duration=De(Ui)),Zi.unique_program_id=Ui.readBits(16),Zi.avail_num=Ui.readBits(8),Zi.avails_expected=Ui.readBits(8),Zi})(Ue):Mt===re.kTimeSignal?Nt=(Ui=>({splice_time:J(Ui)}))(Ue):Mt===re.kBandwidthReservation?Nt={}:Mt===re.kPrivateCommand?Nt=((Ui,Gi)=>{const nn=String.fromCharCode(Gi.readBits(8),Gi.readBits(8),Gi.readBits(8),Gi.readBits(8)),Zi=new Uint8Array(Ui-4);for(let Yi=0;Yi<Ui-4;Yi++)Zi[Yi]=Gi.readBits(8);return{identifier:nn,private_data:Zi.buffer}})(li,Ue):Ue.readBits(8*li);const ai=[],ji=Ue.readBits(16);for(let Ui=0;Ui<ji;){const Gi=Ue.readBits(8),nn=Ue.readBits(8),Zi=String.fromCharCode(Ue.readBits(8),Ue.readBits(8),Ue.readBits(8),Ue.readBits(8));Gi===0?ai.push(He(Gi,nn,Zi,Ue)):Gi===1?ai.push(G(Gi,nn,Zi,Ue)):Gi===2?ai.push(xe(Gi,nn,Zi,Ue)):Gi===3?ai.push(ke(Gi,nn,Zi,Ue)):Gi===4?ai.push(X(Gi,nn,Zi,Ue)):Ue.readBits(8*(nn-4)),Ui+=2+nn}const tn={table_id:ft,section_syntax_indicator:Gt,private_indicator:Ft,section_length:Ee,protocol_version:nt,encrypted_packet:Zt,encryption_algorithm:bi,pts_adjustment:Kt,cw_index:ri,tier:Li,splice_command_length:li,splice_command_type:Mt,splice_command:Nt,descriptor_loop_length:ji,splice_descriptors:ai,E_CRC32:Zt?Ue.readBits(32):void 0,CRC32:Ue.readBits(32)};if(Mt===re.kSpliceInsert){const Ui=Nt;if(Ui.splice_event_cancel_indicator)return{splice_command_type:Mt,detail:tn,data:j};if(Ui.program_splice_flag&&!Ui.splice_immediate_flag){const Gi=Ui.duration_flag?(T=Ui==null?void 0:Ui.break_duration)===null||T===void 0?void 0:T.auto_return:void 0,nn=Ui.duration_flag?(((F=Ui==null?void 0:Ui.break_duration)===null||F===void 0?void 0:F.duration)||0)/90:void 0;return!((S=Ui.splice_time)===null||S===void 0)&&S.time_specified_flag?{splice_command_type:Mt,pts:(Kt+(((be=Ui==null?void 0:Ui.splice_time)===null||be===void 0?void 0:be.pts_time)||0))%Math.pow(2,33),auto_return:Gi,duraiton:nn,detail:tn,data:j}:{splice_command_type:Mt,auto_return:Gi,duraiton:nn,detail:tn,data:j}}return{splice_command_type:Mt,auto_return:Ui.duration_flag?(_e=Ui.break_duration)===null||_e===void 0?void 0:_e.auto_return:void 0,duraiton:Ui.duration_flag?(((Me=Ui.break_duration)===null||Me===void 0?void 0:Me.duration)||0)/90:void 0,detail:tn,data:j}}if(Mt===re.kTimeSignal){const Ui=Nt;return Ui.splice_time.time_specified_flag?{splice_command_type:Mt,pts:(Kt+(Ui.splice_time.pts_time||0))%Math.pow(2,33),detail:tn,data:j}:{splice_command_type:Mt,detail:tn,data:j}}return{splice_command_type:Mt,detail:tn,data:j}};var lt;(function(j){j[j.kSliceIDR_W_RADL=19]="kSliceIDR_W_RADL",j[j.kSliceIDR_N_LP=20]="kSliceIDR_N_LP",j[j.kSliceCRA_NUT=21]="kSliceCRA_NUT",j[j.kSliceVPS=32]="kSliceVPS",j[j.kSliceSPS=33]="kSliceSPS",j[j.kSlicePPS=34]="kSlicePPS",j[j.kSliceAUD=35]="kSliceAUD"})(lt||(lt={}));class dt{}class Lt{constructor(T){const F=T.data.byteLength;this.type=T.type,this.data=new Uint8Array(4+F),new DataView(this.data.buffer).setUint32(0,F),this.data.set(T.data,4)}}class qt{constructor(T){this.TAG="H265AnnexBParser",this.current_startcode_offset_=0,this.eof_flag_=!1,this.data_=T,this.current_startcode_offset_=this.findNextStartCodeOffset(0),this.eof_flag_&&C.Z.e(this.TAG,"Could not find H265 startcode until payload end!")}findNextStartCodeOffset(T){let F=T;const S=this.data_;for(;;){if(F+3>=S.byteLength)return this.eof_flag_=!0,S.byteLength;const be=S[F+0]<<24|S[F+1]<<16|S[F+2]<<8|S[F+3],_e=S[F+0]<<16|S[F+1]<<8|S[F+2];if(be===1||_e===1)return F;F++}}readNextNaluPayload(){const T=this.data_;let F=null;for(;F==null&&!this.eof_flag_;){let S=this.current_startcode_offset_;S+=(T[S]<<24|T[S+1]<<16|T[S+2]<<8|T[S+3])===1?4:3;const be=T[S]>>1&63,_e=(128&T[S])>>>7,Me=this.findNextStartCodeOffset(S);if(this.current_startcode_offset_=Me,_e!==0)continue;const Ue=T.subarray(S,Me);F=new dt,F.type=be,F.data=Ue}return F}}class Si{constructor(T,F,S,be){const _e=23+(5+T.byteLength)+(5+F.byteLength)+(5+S.byteLength),Me=this.data=new Uint8Array(_e);Me[0]=1,Me[1]=(3&be.general_profile_space)<<6|(be.general_tier_flag?1:0)<<5|31&be.general_profile_idc,Me[2]=be.general_profile_compatibility_flags_1,Me[3]=be.general_profile_compatibility_flags_2,Me[4]=be.general_profile_compatibility_flags_3,Me[5]=be.general_profile_compatibility_flags_4,Me[6]=be.general_constraint_indicator_flags_1,Me[7]=be.general_constraint_indicator_flags_2,Me[8]=be.general_constraint_indicator_flags_3,Me[9]=be.general_constraint_indicator_flags_4,Me[10]=be.general_constraint_indicator_flags_5,Me[11]=be.general_constraint_indicator_flags_6,Me[12]=be.general_level_idc,Me[13]=240|(3840&be.min_spatial_segmentation_idc)>>8,Me[14]=255&be.min_spatial_segmentation_idc,Me[15]=252|3&be.parallelismType,Me[16]=252|3&be.chroma_format_idc,Me[17]=248|7&be.bit_depth_luma_minus8,Me[18]=248|7&be.bit_depth_chroma_minus8,Me[19]=0,Me[20]=0,Me[21]=(3&be.constant_frame_rate)<<6|(7&be.num_temporal_layers)<<3|(be.temporal_id_nested?1:0)<<2|3,Me[22]=3,Me[23]=128|lt.kSliceVPS,Me[24]=0,Me[25]=1,Me[26]=(65280&T.byteLength)>>8,Me[27]=(255&T.byteLength)>>0,Me.set(T,28),Me[23+(5+T.byteLength)+0]=128|lt.kSliceSPS,Me[23+(5+T.byteLength)+1]=0,Me[23+(5+T.byteLength)+2]=1,Me[23+(5+T.byteLength)+3]=(65280&F.byteLength)>>8,Me[23+(5+T.byteLength)+4]=(255&F.byteLength)>>0,Me.set(F,23+(5+T.byteLength)+5),Me[23+(5+T.byteLength+5+F.byteLength)+0]=128|lt.kSlicePPS,Me[23+(5+T.byteLength+5+F.byteLength)+1]=0,Me[23+(5+T.byteLength+5+F.byteLength)+2]=1,Me[23+(5+T.byteLength+5+F.byteLength)+3]=(65280&S.byteLength)>>8,Me[23+(5+T.byteLength+5+F.byteLength)+4]=(255&S.byteLength)>>0,Me.set(S,23+(5+T.byteLength+5+F.byteLength)+5)}getData(){return this.data}}class he{}class Bi{}class yt{}const wt=[[64,64,80,80,96,96,112,112,128,128,160,160,192,192,224,224,256,256,320,320,384,384,448,448,512,512,640,640,768,768,896,896,1024,1024,1152,1152,1280,1280],[69,70,87,88,104,105,121,122,139,140,174,175,208,209,243,244,278,279,348,349,417,418,487,488,557,558,696,697,835,836,975,976,1114,1115,1253,1254,1393,1394],[96,96,120,120,144,144,168,168,192,192,240,240,288,288,336,336,384,384,480,480,576,576,672,672,768,768,960,960,1152,1152,1344,1344,1536,1536,1728,1728,1920,1920]];class pt{constructor(T){this.TAG="AC3Parser",this.data_=T,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&C.Z.e(this.TAG,"Could not found AC3 syncword until payload end")}findNextSyncwordOffset(T){let F=T;const S=this.data_;for(;;){if(F+7>=S.byteLength)return this.eof_flag_=!0,S.byteLength;if((S[F+0]<<8|S[F+1]<<0)===2935)return F;F++}}readNextAC3Frame(){const T=this.data_;let F=null;for(;F==null&&!this.eof_flag_;){const S=this.current_syncword_offset_,be=T[S+4]>>6,_e=[48e3,44200,33e3][be],Me=63&T[S+4],Ue=2*wt[be][Me];if(S+Ue>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const ft=this.findNextSyncwordOffset(S+Ue);this.current_syncword_offset_=ft;const Gt=T[S+5]>>3,Ft=7&T[S+5],Ee=T[S+6]>>5;let nt=0;1&Ee&&Ee!==1&&(nt+=2),4&Ee&&(nt+=2),Ee===2&&(nt+=2);const Zt=(T[S+6]<<8|T[S+7]<<0)>>12-nt&1,bi=[2,1,2,3,3,4,4,5][Ee]+Zt;F=new yt,F.sampling_frequency=_e,F.channel_count=bi,F.channel_mode=Ee,F.bit_stream_identification=Gt,F.low_frequency_effects_channel_on=Zt,F.bit_stream_mode=Ft,F.frame_size_code=Me,F.data=T.subarray(S,S+Ue)}return F}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class Dt{constructor(T){let F=[];F=[T.sampling_rate_code<<6|T.bit_stream_identification<<1|T.bit_stream_mode>>2,(3&T.bit_stream_mode)<<6|T.channel_mode<<3|T.low_frequency_effects_channel_on<<2|T.frame_size_code>>4,T.frame_size_code<<4&224],this.config=F,this.sampling_rate=T.sampling_frequency,this.bit_stream_identification=T.bit_stream_identification,this.bit_stream_mode=T.bit_stream_mode,this.low_frequency_effects_channel_on=T.low_frequency_effects_channel_on,this.channel_count=T.channel_count,this.channel_mode=T.channel_mode,this.codec_mimetype="ac-3",this.original_codec_mimetype="ac-3"}}class St{}class Et{constructor(T){this.TAG="EAC3Parser",this.data_=T,this.current_syncword_offset_=this.findNextSyncwordOffset(0),this.eof_flag_&&C.Z.e(this.TAG,"Could not found AC3 syncword until payload end")}findNextSyncwordOffset(T){let F=T;const S=this.data_;for(;;){if(F+7>=S.byteLength)return this.eof_flag_=!0,S.byteLength;if((S[F+0]<<8|S[F+1]<<0)===2935)return F;F++}}readNextEAC3Frame(){const T=this.data_;let F=null;for(;F==null&&!this.eof_flag_;){const S=this.current_syncword_offset_,be=new we(T.subarray(S+2)),_e=(be.readBits(2),be.readBits(3),be.readBits(11)+1<<1);let Me=be.readBits(2),Ue=null,ft=null;Me===3?(Me=be.readBits(2),Ue=[24e3,22060,16e3][Me],ft=3):(Ue=[48e3,44100,32e3][Me],ft=be.readBits(2));const Gt=be.readBits(3),Ft=be.readBits(1),Ee=be.readBits(5);if(S+_e>this.data_.byteLength){this.eof_flag_=!0,this.has_last_incomplete_data=!0;break}const nt=this.findNextSyncwordOffset(S+_e);this.current_syncword_offset_=nt;const Zt=[2,1,2,3,3,4,4,5][Gt]+Ft;be.destroy(),F=new St,F.sampling_frequency=Ue,F.channel_count=Zt,F.channel_mode=Gt,F.bit_stream_identification=Ee,F.low_frequency_effects_channel_on=Ft,F.frame_size=_e,F.num_blks=[1,2,3,6][ft],F.data=T.subarray(S,S+_e)}return F}hasIncompleteData(){return this.has_last_incomplete_data}getIncompleteData(){return this.has_last_incomplete_data?this.data_.subarray(this.current_syncword_offset_):null}}class jt{constructor(T){let F=[];const S=Math.floor(T.frame_size*T.sampling_frequency/(16*T.num_blks));F=[255&S,248&S,T.sampling_rate_code<<6|T.bit_stream_identification<<1|0,0|T.channel_mode<<1|T.low_frequency_effects_channel_on<<0,0],this.config=F,this.sampling_rate=T.sampling_frequency,this.bit_stream_identification=T.bit_stream_identification,this.num_blks=T.num_blks,this.low_frequency_effects_channel_on=T.low_frequency_effects_channel_on,this.channel_count=T.channel_count,this.channel_mode=T.channel_mode,this.codec_mimetype="ec-3",this.original_codec_mimetype="ec-3"}}const _t=class extends oi{constructor(j,T){super(),this.TAG="TSDemuxer",this.first_parse_=!0,this.media_info_=new w.Z,this.timescale_=90,this.duration_=0,this.current_pmt_pid_=-1,this.program_pmt_map_={},this.pes_slice_queues_={},this.section_slice_queues_={},this.video_metadata_={vps:void 0,sps:void 0,pps:void 0,details:void 0},this.audio_metadata_={codec:void 0,audio_object_type:void 0,sampling_freq_index:void 0,sampling_frequency:void 0,channel_config:void 0},this.aac_last_sample_pts_=void 0,this.aac_last_incomplete_data_=null,this.has_video_=!1,this.has_audio_=!1,this.video_init_segment_dispatched_=!1,this.audio_init_segment_dispatched_=!1,this.video_metadata_changed_=!1,this.audio_metadata_changed_=!1,this.loas_previous_frame=null,this.video_track_={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this.audio_track_={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this.ts_packet_size_=j.ts_packet_size,this.sync_offset_=j.sync_offset,this.config_=T}destroy(){this.media_info_=null,this.pes_slice_queues_=null,this.section_slice_queues_=null,this.video_metadata_=null,this.audio_metadata_=null,this.aac_last_incomplete_data_=null,this.video_track_=null,this.audio_track_=null,super.destroy()}static probe(j){const T=new Uint8Array(j);let F=-1,S=188;if(T.byteLength<=3*S)return{needMoreData:!0};for(;F===-1;){const be=Math.min(1e3,T.byteLength-3*S);for(let _e=0;_e<be;){if(T[_e]===71&&T[_e+S]===71&&T[_e+2*S]===71){F=_e;break}_e++}if(F===-1)if(S===188)S=192;else{if(S!==192)break;S=204}}return F===-1?{match:!1}:(S===192&&F>=4?(C.Z.v("TSDemuxer","ts_packet_size = 192, m2ts mode"),F-=4):S===204&&C.Z.v("TSDemuxer","ts_packet_size = 204, RS encoded MPEG2-TS stream"),{match:!0,consumed:0,ts_packet_size:S,sync_offset:F})}bindDataSource(j){return j.onDataArrival=this.parseChunks.bind(this),this}resetMediaInfo(){this.media_info_=new w.Z}parseChunks(j,T){var F;if(!(this.onError&&this.onMediaInfo&&this.onTrackMetadata&&this.onDataAvailable))throw new te.rT("onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");let S=0;for(this.first_parse_&&(this.first_parse_=!1,S=this.sync_offset_);S+this.ts_packet_size_<=j.byteLength;){const be=T+S;this.ts_packet_size_===192&&(S+=4);const _e=new Uint8Array(j,S,188),Me=_e[0];if(Me!==71){C.Z.e(this.TAG,`sync_byte = ${Me}, not 0x47`);break}const Ue=(64&_e[1])>>>6,ft=(_e[1],(31&_e[1])<<8|_e[2]),Gt=(48&_e[3])>>>4,Ft=15&_e[3];let Ee={},nt=4;if(Gt===2||Gt===3){const Zt=_e[4];if(5+Zt===188){S+=188,this.ts_packet_size_===204&&(S+=16);continue}Zt>0&&(Ee=this.parseAdaptationField(j,S+4,1+Zt)),nt=5+Zt}if(Gt===1||Gt===3){if(ft===0||ft===this.current_pmt_pid_||this.pmt_!==void 0&&this.pmt_.pid_stream_type[ft]===ui.kSCTE35){const Zt=188-nt;this.handleSectionSlice(j,S+nt,Zt,{pid:ft,file_position:be,payload_unit_start_indicator:Ue,continuity_conunter:Ft,random_access_indicator:Ee.random_access_indicator})}else if(((F=this.pmt_)===null||F===void 0?void 0:F.pid_stream_type[ft])!==void 0){const Zt=188-nt,bi=this.pmt_.pid_stream_type[ft];(ft===this.pmt_.common_pids.h264||ft===this.pmt_.common_pids.h265||ft===this.pmt_.common_pids.adts_aac||ft===this.pmt_.common_pids.loas_aac||ft===this.pmt_.common_pids.ac3||ft===this.pmt_.common_pids.eac3||ft===this.pmt_.common_pids.opus||ft===this.pmt_.common_pids.mp3||this.pmt_.pes_private_data_pids[ft]||this.pmt_.timed_id3_pids[ft])&&this.handlePESSlice(j,S+nt,Zt,{pid:ft,stream_type:bi,file_position:be,payload_unit_start_indicator:Ue,continuity_conunter:Ft,random_access_indicator:Ee.random_access_indicator})}}S+=188,this.ts_packet_size_===204&&(S+=16)}return this.dispatchAudioVideoMediaSegment(),S}parseAdaptationField(j,T,F){const S=new Uint8Array(j,T,F),be=S[0];return be>0?be>183?(C.Z.w(this.TAG,`Illegal adaptation_field_length: ${be}`),{}):{discontinuity_indicator:(128&S[1])>>>7,random_access_indicator:(64&S[1])>>>6,elementary_stream_priority_indicator:(32&S[1])>>>5}:{}}handleSectionSlice(j,T,F,S){const be=new Uint8Array(j,T,F);let _e=this.section_slice_queues_?this.section_slice_queues_[S.pid]:{};if(S.payload_unit_start_indicator){const Me=be[0];if(_e!==void 0&&(_e==null?void 0:_e.total_length)!==0){const Ue=new Uint8Array(j,T+1,Math.min(F,Me));_e.slices.push(Ue),_e.total_length+=Ue.byteLength,_e.total_length===_e.expected_length?this.emitSectionSlices(_e,S):this.clearSlices(_e,S)}for(let Ue=1+Me;Ue<be.byteLength&&be[Ue+0]!==255;){const ft=(15&be[Ue+1])<<8|be[Ue+2];this.section_slice_queues_&&(this.section_slice_queues_[S.pid]=new at,_e=this.section_slice_queues_[S.pid]),_e.expected_length=ft+3,_e.file_position=S.file_position,_e.random_access_indicator=S.random_access_indicator;const Gt=new Uint8Array(j,T+Ue,Math.min(F-Ue,_e.expected_length-_e.total_length));_e.slices.push(Gt),_e.total_length+=Gt.byteLength,_e.total_length===_e.expected_length?this.emitSectionSlices(_e,S):_e.total_length>=_e.expected_length&&this.clearSlices(_e,S),Ue+=Gt.byteLength}}else if(_e!==void 0&&_e.total_length!==0){const Me=new Uint8Array(j,T,Math.min(F,_e.expected_length-_e.total_length));_e.slices.push(Me),_e.total_length+=Me.byteLength,_e.total_length===_e.expected_length?this.emitSectionSlices(_e,S):_e.total_length>=_e.expected_length&&this.clearSlices(_e,S)}}handlePESSlice(j,T,F,S){const be=new Uint8Array(j,T,F),_e=be[0]<<16|be[1]<<8|be[2],Me=(be[3],be[4]<<8|be[5]);if(S.payload_unit_start_indicator){if(_e!==1)return void C.Z.e(this.TAG,`handlePESSlice: packet_start_code_prefix should be 1 but with value ${_e}`);const ft=this.pes_slice_queues_[S.pid];ft&&(ft.expected_length===0||ft.expected_length===ft.total_length?this.emitPESSlices(ft,S):this.clearSlices(ft,S)),this.pes_slice_queues_&&(this.pes_slice_queues_[S.pid]=new at,this.pes_slice_queues_[S.pid].file_position=S.file_position,this.pes_slice_queues_[S.pid].random_access_indicator=S.random_access_indicator)}if(this.pes_slice_queues_[S.pid]===void 0)return;const Ue=this.pes_slice_queues_[S.pid];Ue.slices.push(be),S.payload_unit_start_indicator&&(Ue.expected_length=Me===0?0:Me+6),Ue.total_length+=be.byteLength,Ue.expected_length>0&&Ue.expected_length===Ue.total_length?this.emitPESSlices(Ue,S):Ue.expected_length>0&&Ue.expected_length<Ue.total_length&&this.clearSlices(Ue,S)}emitSectionSlices(j,T){const F=new Uint8Array(j.total_length);for(let be=0,_e=0;be<j.slices.length;be++){const Me=j.slices[be];F.set(Me,_e),_e+=Me.byteLength}j.slices=[],j.expected_length=-1,j.total_length=0;const S=new Ne;S.pid=T.pid,S.data=F,S.file_position=j.file_position,S.random_access_indicator=j.random_access_indicator,this.parseSection(S)}emitPESSlices(j,T){const F=new Uint8Array(j.total_length);for(let be=0,_e=0;be<j.slices.length;be++){const Me=j.slices[be];F.set(Me,_e),_e+=Me.byteLength}j.slices=[],j.expected_length=-1,j.total_length=0;const S=new Ke;S.pid=T.pid,S.data=F,S.stream_type=T.stream_type,S.file_position=j.file_position,S.random_access_indicator=j.random_access_indicator,this.parsePES(S)}clearSlices(j,T){j.slices=[],j.expected_length=-1,j.total_length=0}parseSection(j){var T;const F=j.data,S=j.pid;S===0?this.parsePAT(F):S===this.current_pmt_pid_?this.parsePMT(F):!((T=this.pmt_)===null||T===void 0)&&T.scte_35_pids[S]&&this.parseSCTE35(F)}parsePES(j){const T=j.data,F=T[0]<<16|T[1]<<8|T[2],S=T[3],be=T[4]<<8|T[5];if(F===1){if(S!==188&&S!==190&&S!==191&&S!==240&&S!==241&&S!==255&&S!==242&&S!==248){T[6];const _e=(192&T[7])>>>6,Me=T[8];let Ue,ft;_e!==2&&_e!==3||(Ue=536870912*(14&T[9])+4194304*(255&T[10])+16384*(254&T[11])+128*(255&T[12])+(254&T[13])/2,ft=_e===3?536870912*(14&T[14])+4194304*(255&T[15])+16384*(254&T[16])+128*(255&T[17])+(254&T[18])/2:Ue);const Gt=9+Me;let Ft;if(be!==0){if(be<3+Me)return void C.Z.v(this.TAG,"Malformed PES: PES_packet_length < 3 + PES_header_data_length");Ft=be-3-Me}else Ft=T.byteLength-Gt;const Ee=T.subarray(Gt,Gt+Ft);switch(j.stream_type){case ui.kMPEG1Audio:case ui.kMPEG2Audio:this.parseMP3Payload(Ee,Ue);break;case ui.kPESPrivateData:this.pmt_.common_pids.opus===j.pid?this.parseOpusPayload(Ee,Ue):this.pmt_.common_pids.ac3===j.pid?this.parseAC3Payload(Ee,Ue):this.pmt_.common_pids.eac3===j.pid?this.parseEAC3Payload(Ee,Ue):this.pmt_.smpte2038_pids[j.pid]?this.parseSMPTE2038MetadataPayload(Ee,Ue,ft,j.pid,S):this.parsePESPrivateDataPayload(Ee,Ue,ft,j.pid,S);break;case ui.kADTSAAC:this.parseADTSAACPayload(Ee,Ue);break;case ui.kLOASAAC:this.parseLOASAACPayload(Ee,Ue);break;case ui.kAC3:this.parseAC3Payload(Ee,Ue);break;case ui.kEAC3:this.parseEAC3Payload(Ee,Ue);break;case ui.kID3:this.parseTimedID3MetadataPayload(Ee,Ue,ft,j.pid,S);break;case ui.kH264:this.parseH264Payload(Ee,Ue,ft,j.file_position,j.random_access_indicator);break;case ui.kH265:this.parseH265Payload(Ee,Ue,ft,j.file_position,j.random_access_indicator)}}else if((S===188||S===191||S===240||S===241||S===255||S===242||S===248)&&j.stream_type===ui.kPESPrivateData){let Me;Me=be!==0?be:T.byteLength-6;const Ue=T.subarray(6,6+Me);this.parsePESPrivateDataPayload(Ue,void 0,void 0,j.pid,S)}}else C.Z.e(this.TAG,`parsePES: packet_start_code_prefix should be 1 but with value ${F}`)}parsePAT(j){const T=j[0];if(T!==0)return void C.Z.e(this.TAG,`parsePAT: table_id ${T} is not corresponded to PAT!`);const F=(15&j[1])<<8|j[2],S=(j[3],j[4],(62&j[5])>>>1),be=1&j[5],_e=j[6];j[7];let Me=null;if(be===1&&_e===0)Me=new wi,Me.version_number=S;else if(Me=this.pat_,Me==null)return;const Ue=F-5-4;let ft=-1,Gt=-1;for(let Ft=8;Ft<8+Ue;Ft+=4){const Ee=j[Ft]<<8|j[Ft+1],nt=(31&j[Ft+2])<<8|j[Ft+3];Ee===0?Me.network_pid=nt:(Me.program_pmt_pid[Ee]=nt,ft===-1&&(ft=Ee),Gt===-1&&(Gt=nt))}be===1&&_e===0&&(this.pat_===void 0&&C.Z.v(this.TAG,`Parsed first PAT: ${JSON.stringify(Me)}`),this.pat_=Me,this.current_program_=ft,this.current_pmt_pid_=Gt)}parsePMT(j){const T=j[0];if(T!==2)return void C.Z.e(this.TAG,`parsePMT: table_id ${T} is not corresponded to PMT!`);const F=(15&j[1])<<8|j[2],S=j[3]<<8|j[4],be=(62&j[5])>>>1,_e=1&j[5],Me=j[6];j[7];let Ue=null;if(_e===1&&Me===0)Ue=new st,Ue.program_number=S,Ue.version_number=be,this.program_pmt_map_[S]=Ue;else if(Ue=this.program_pmt_map_[S],Ue==null)return;j[8],j[9];const ft=(15&j[10])<<8|j[11],Gt=12+ft,Ft=F-9-ft-4;for(let Ee=Gt;Ee<Gt+Ft;){const nt=j[Ee],Zt=(31&j[Ee+1])<<8|j[Ee+2],bi=(15&j[Ee+3])<<8|j[Ee+4];Ue.pid_stream_type[Zt]=nt;const Kt=Ue.common_pids.h264||Ue.common_pids.h265,ri=Ue.common_pids.adts_aac||Ue.common_pids.loas_aac||Ue.common_pids.ac3||Ue.common_pids.eac3||Ue.common_pids.opus||Ue.common_pids.mp3;if(nt!==ui.kH264||Kt)if(nt!==ui.kH265||Kt)if(nt!==ui.kADTSAAC||ri)if(nt!==ui.kLOASAAC||ri)if(nt!==ui.kAC3||ri)if(nt!==ui.kEAC3||ri)if(nt!==ui.kMPEG1Audio&&nt!==ui.kMPEG2Audio||ri)if(nt===ui.kPESPrivateData){if(Ue.pes_private_data_pids[Zt]=!0,bi>0){for(let li=Ee+5;li<Ee+5+bi;){const Mt=j[li+0],Nt=j[li+1];if(Mt===5){const ai=String.fromCharCode(...Array.from(j.subarray(li+2,li+2+Nt)));ai==="VANC"?Ue.smpte2038_pids[Zt]=!0:ai==="Opus"&&(Ue.common_pids.opus=Zt)}else if(Mt===127&&Zt===Ue.common_pids.opus){let ai=null;if(j[li+2]===128&&(ai=j[li+3]),ai==null){C.Z.e(this.TAG,"Not Supported Opus channel count.");continue}const ji={codec:"opus",channel_count:15&ai?15&ai:2,channel_config_code:ai,sample_rate:48e3},tn={codec:"opus",meta:ji};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(tn)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(tn)):(this.audio_metadata_=ji,this.dispatchAudioInitSegment(tn))}li+=2+Nt}const Li=j.subarray(Ee+5,Ee+5+bi);this.dispatchPESPrivateDataDescriptor(Zt,nt,Li)}}else nt===ui.kID3?Ue.timed_id3_pids[Zt]=!0:nt===ui.kSCTE35&&(Ue.scte_35_pids[Zt]=!0);else Ue.common_pids.mp3=Zt;else Ue.common_pids.eac3=Zt;else Ue.common_pids.ac3=Zt;else Ue.common_pids.loas_aac=Zt;else Ue.common_pids.adts_aac=Zt;else Ue.common_pids.h265=Zt;else Ue.common_pids.h264=Zt;Ee+=5+bi}S===this.current_program_&&(this.pmt_===void 0&&C.Z.v(this.TAG,`Parsed first PMT: ${JSON.stringify(Ue)}`),this.pmt_=Ue,(Ue.common_pids.h264||Ue.common_pids.h265)&&(this.has_video_=!0),(Ue.common_pids.adts_aac||Ue.common_pids.loas_aac||Ue.common_pids.ac3||Ue.common_pids.opus||Ue.common_pids.mp3)&&(this.has_audio_=!0))}parseSCTE35(j){const T=Be(j);if(T.pts!==void 0){const F=Math.floor(T.pts/this.timescale_);T.pts=F}else T.nearest_pts=this.aac_last_sample_pts_;this.onSCTE35Metadata&&this.onSCTE35Metadata(T)}parseH264Payload(j,T,F,S,be){var _e,Me;const Ue=new kt(j);let ft=null;const Gt=[];let Ft=0,Ee=!1;for(;(ft=Ue.readNextNaluPayload())!=null;){const bi=new Wt(ft);if(bi.type===di.kSliceSPS){const Kt=ue.parseSPS(ft.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(bi,Kt)&&(C.Z.v(this.TAG,"H264: Critical h264 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:bi,pps:void 0,details:Kt}):this.video_metadata_&&(this.video_metadata_.sps=bi,this.video_metadata_.details=Kt)}else bi.type===di.kSlicePPS?this.video_init_segment_dispatched_&&!this.video_metadata_changed_||(this.video_metadata_&&(this.video_metadata_.pps=bi),!((_e=this.video_metadata_)===null||_e===void 0)&&_e.sps&&(!((Me=this.video_metadata_)===null||Me===void 0)&&Me.pps)&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())):(bi.type===di.kSliceIDR||bi.type===di.kSliceNonIDR&&be===1)&&(Ee=!0);this.video_init_segment_dispatched_&&(Gt.push(bi),Ft+=bi.data.byteLength)}const nt=Math.floor(T/this.timescale_),Zt=Math.floor(F/this.timescale_);if(Gt.length){const bi=this.video_track_,Kt={units:Gt,length:Ft,isKeyframe:Ee,dts:Zt,pts:nt,cts:nt-Zt,file_position:S};bi&&(bi.samples.push(Kt),bi.length+=Ft)}}parseH265Payload(j,T,F,S,be){var _e,Me,Ue,ft,Gt,Ft,Ee;const nt=new qt(j);let Zt=null;const bi=[];let Kt=0,ri=!1;for(;(Zt=nt.readNextNaluPayload())!=null;){const Mt=new Lt(Zt);if(Mt.type===lt.kSliceVPS){if(!this.video_init_segment_dispatched_){const Nt=ne.parseVPS(Zt.data);this.video_metadata_&&(this.video_metadata_.vps=Mt,this.video_metadata_.details=Object.assign(Object.assign({},(_e=this.video_metadata_)===null||_e===void 0?void 0:_e.details),Nt))}}else if(Mt.type===lt.kSliceSPS){const Nt=ne.parseSPS(Zt.data);this.video_init_segment_dispatched_?this.detectVideoMetadataChange(Mt,Nt)&&(C.Z.v(this.TAG,"H265: Critical h265 metadata has been changed, attempt to re-generate InitSegment"),this.video_metadata_changed_=!0,this.video_metadata_={vps:void 0,sps:Mt,pps:void 0,details:Nt}):this.video_metadata_&&(this.video_metadata_.sps=Mt,this.video_metadata_.details=Object.assign(Object.assign({},(Me=this.video_metadata_)===null||Me===void 0?void 0:Me.details),Nt))}else if(Mt.type===lt.kSlicePPS){if(!this.video_init_segment_dispatched_||this.video_metadata_changed_){const Nt=ne.parsePPS(Zt.data);this.video_metadata_&&(this.video_metadata_.pps=Mt,this.video_metadata_.details=Object.assign(Object.assign({},(Ue=this.video_metadata_)===null||Ue===void 0?void 0:Ue.details),Nt)),!((ft=this.video_metadata_)===null||ft===void 0)&&ft.vps&&(!((Gt=this.video_metadata_)===null||Gt===void 0)&&Gt.sps)&&(!((Ft=this.video_metadata_)===null||Ft===void 0)&&Ft.pps)&&(this.video_metadata_changed_&&this.dispatchVideoMediaSegment(),this.dispatchVideoInitSegment())}}else Mt.type!==lt.kSliceIDR_W_RADL&&Mt.type!==lt.kSliceIDR_N_LP&&Mt.type!==lt.kSliceCRA_NUT||(ri=!0);this.video_init_segment_dispatched_&&(bi.push(Mt),Kt+=Mt.data.byteLength)}const Li=Math.floor(T/this.timescale_),li=Math.floor(F/this.timescale_);if(bi.length){const Mt=this.video_track_,Nt={units:bi,length:Kt,isKeyframe:ri,dts:li,pts:Li,cts:Li-li,file_position:S};Mt&&((Ee=Mt.samples)===null||Ee===void 0||Ee.push(Nt),Mt.length+=Kt)}}detectVideoMetadataChange(j,T){var F,S,be,_e,Me,Ue,ft,Gt,Ft,Ee;if(T.codec_mimetype!==((S=(F=this.video_metadata_)===null||F===void 0?void 0:F.details)===null||S===void 0?void 0:S.codec_mimetype))return C.Z.v(this.TAG,`Video: Codec mimeType changed from ${(be=this.video_metadata_)===null||be===void 0?void 0:be.details.codec_mimetype} to ${T==null?void 0:T.codec_mimetype}`),!0;if(T.codec_size.width!==((Me=(_e=this.video_metadata_)===null||_e===void 0?void 0:_e.details)===null||Me===void 0?void 0:Me.codec_size.width)||T.codec_size.height!==((ft=(Ue=this.video_metadata_)===null||Ue===void 0?void 0:Ue.details)===null||ft===void 0?void 0:ft.codec_size.height)){const nt=(Gt=this.video_metadata_)===null||Gt===void 0?void 0:Gt.details.codec_size,Zt=T.codec_size;return C.Z.v(this.TAG,`Video: Coded Resolution changed from ${nt.width}x${nt.height} to ${Zt.width}x${Zt.height}`),!0}return T.present_size.width!==((Ft=this.video_metadata_)===null||Ft===void 0?void 0:Ft.details.present_size.width)&&(C.Z.v(this.TAG,`Video: Present resolution width changed from ${(Ee=this.video_metadata_)===null||Ee===void 0?void 0:Ee.details.present_size.width} to ${T==null?void 0:T.present_size.width}`),!0)}isInitSegmentDispatched(){return this.has_video_&&this.has_audio_?this.video_init_segment_dispatched_&&this.audio_init_segment_dispatched_:this.has_video_&&!this.has_audio_?this.video_init_segment_dispatched_:!(this.has_video_||!this.has_audio_)&&this.audio_init_segment_dispatched_}dispatchVideoInitSegment(){var j,T,F,S,be,_e,Me,Ue,ft,Gt,Ft,Ee;const nt=(j=this.video_metadata_)===null||j===void 0?void 0:j.details,Zt={type:"video"};Zt.id=(T=this.video_track_)===null||T===void 0?void 0:T.id,Zt.timescale=1e3,Zt.duration=this.duration_,Zt.codecWidth=nt.codec_size.width,Zt.codecHeight=nt.codec_size.height,Zt.presentWidth=nt.present_size.width,Zt.presentHeight=nt.present_size.height,Zt.profile=nt.profile_string,Zt.level=nt.level_string,Zt.bitDepth=nt.bit_depth,Zt.chromaFormat=nt.chroma_format,Zt.sarRatio=nt.sar_ratio,Zt.frameRate=nt.frame_rate;const bi=Zt.frameRate.fps_den,Kt=Zt.frameRate.fps_num;if(Zt.refSampleDuration=bi/Kt*1e3,Zt.codec=nt.codec_mimetype,(F=this.video_metadata_)===null||F===void 0?void 0:F.vps){const Li=(S=this.video_metadata_)===null||S===void 0?void 0:S.vps.data.subarray(4),li=(_e=(be=this.video_metadata_)===null||be===void 0?void 0:be.sps)===null||_e===void 0?void 0:_e.data.subarray(4),Mt=(Ue=(Me=this.video_metadata_)===null||Me===void 0?void 0:Me.pps)===null||Ue===void 0?void 0:Ue.data.subarray(4),Nt=new Si(Li,li,Mt,nt);Zt.hvcc=Nt.getData(),this.video_init_segment_dispatched_||C.Z.v(this.TAG,`Generated first HEVCDecoderConfigurationRecord for mimeType: ${Zt.codec}`)}else{const Li=(Gt=(ft=this.video_metadata_)===null||ft===void 0?void 0:ft.sps)===null||Gt===void 0?void 0:Gt.data.subarray(4),li=(Ee=(Ft=this.video_metadata_)===null||Ft===void 0?void 0:Ft.pps)===null||Ee===void 0?void 0:Ee.data.subarray(4),Mt=new ee(Li,li,nt);Zt.avcc=Mt.getData(),this.video_init_segment_dispatched_||C.Z.v(this.TAG,`Generated first AVCDecoderConfigurationRecord for mimeType: ${Zt.codec}`)}this.onTrackMetadata&&this.onTrackMetadata("video",Zt),this.video_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;const ri=this.media_info_;ri.hasVideo=!0,ri.width=Zt.codecWidth,ri.height=Zt.codecHeight,ri.fps=Zt.frameRate.fps,ri.profile=Zt.profile,ri.level=Zt.level,ri.refFrames=nt.ref_frames,ri.chromaFormat=nt.chroma_format_string,ri.sarNum=Zt.sarRatio.width,ri.sarDen=Zt.sarRatio.height,ri.videoCodec=Zt.codec,ri.hasAudio&&ri.audioCodec?ri.mimeType=`video/mp2t; codecs="${ri.videoCodec},${ri.audioCodec}"`:ri.mimeType=`video/mp2t; codecs="${ri.videoCodec}"`,ri.isComplete()&&this.onMediaInfo&&this.onMediaInfo(ri)}dispatchVideoMediaSegment(){var j;this.isInitSegmentDispatched()&&(!((j=this.video_track_)===null||j===void 0)&&j.length)&&this.onDataAvailable&&this.onDataAvailable(null,this.video_track_)}dispatchAudioMediaSegment(){var j;this.isInitSegmentDispatched()&&(!((j=this.audio_track_)===null||j===void 0)&&j.length)&&this.onDataAvailable&&this.onDataAvailable(this.audio_track_,null)}dispatchAudioVideoMediaSegment(){var j,T;this.isInitSegmentDispatched()&&(!((j=this.audio_track_)===null||j===void 0)&&j.length||!((T=this.video_track_)===null||T===void 0)&&T.length)&&this.onDataAvailable&&this.onDataAvailable(this.audio_track_,this.video_track_)}parseADTSAACPayload(j,T){var F,S,be;if(this.has_video_&&!this.video_init_segment_dispatched_)return;if(this.aac_last_incomplete_data_){const Ee=new Uint8Array(j.byteLength+this.aac_last_incomplete_data_.byteLength);Ee.set(this.aac_last_incomplete_data_,0),Ee.set(j,this.aac_last_incomplete_data_.byteLength),j=Ee}let _e,Me=0;if(T!==void 0&&(Me=T/this.timescale_),((F=this.audio_metadata_)===null||F===void 0?void 0:F.codec)==="aac"){if(T===void 0&&this.aac_last_sample_pts_!==void 0)_e=1024/((S=this.audio_metadata_)===null||S===void 0?void 0:S.sampling_frequency)*1e3,Me=this.aac_last_sample_pts_+_e;else if(T===void 0)return void C.Z.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){_e=1024/this.audio_metadata_.sampling_frequency*1e3;const Ee=this.aac_last_sample_pts_+_e;Math.abs(Ee-Me)>1&&(C.Z.w(this.TAG,`AAC: Detected pts overlapped, expected: ${Ee}ms, PES pts: ${Me}ms`),Me=Ee)}}const Ue=new Oe(j);let ft=null,Gt=Me,Ft=0;for(;(ft=Ue.readNextAACFrame())!=null;){_e=1024/ft.sampling_frequency*1e3;const Ee={codec:"aac",data:ft};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(Ee)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Ee)):(this.audio_metadata_={codec:"aac",audio_object_type:ft.audio_object_type,sampling_freq_index:ft.sampling_freq_index,sampling_frequency:ft.sampling_frequency,channel_config:ft.channel_config},this.dispatchAudioInitSegment(Ee)),Ft=Gt;const nt=Math.floor(Gt),Zt={unit:ft.data,length:ft.data.byteLength,pts:nt,dts:nt};this.audio_track_&&((be=this.audio_track_)===null||be===void 0||be.samples.push(Zt),this.audio_track_.length+=ft.data.byteLength),Gt+=_e}Ue.hasIncompleteData()&&(this.aac_last_incomplete_data_=Ue.getIncompleteData()),Ft&&(this.aac_last_sample_pts_=Ft)}parseLOASAACPayload(j,T){var F,S,be;if(this.has_video_&&!this.video_init_segment_dispatched_)return;if(this.aac_last_incomplete_data_){const Ee=new Uint8Array(j.byteLength+this.aac_last_incomplete_data_.byteLength);Ee.set(this.aac_last_incomplete_data_,0),Ee.set(j,this.aac_last_incomplete_data_.byteLength),j=Ee}let _e,Me=0;if(T!==void 0&&(Me=T/this.timescale_),((F=this.audio_metadata_)===null||F===void 0?void 0:F.codec)==="aac"){if(T===void 0&&this.aac_last_sample_pts_!==void 0)_e=1024/this.audio_metadata_.sampling_frequency*1e3,Me=this.aac_last_sample_pts_+_e;else if(T===void 0)return void C.Z.w(this.TAG,"AAC: Unknown pts");if(this.aac_last_incomplete_data_&&this.aac_last_sample_pts_){_e=1024/this.audio_metadata_.sampling_frequency*1e3;const Ee=this.aac_last_sample_pts_+_e;Math.abs(Ee-Me)>1&&(C.Z.w(this.TAG,`AAC: Detected pts overlapped, expected: ${Ee}ms, PES pts: ${Me}ms`),Me=Ee)}}const Ue=new N(j);let ft=null,Gt=Me,Ft=0;for(;(ft=Ue.readNextAACFrame((S=this.loas_previous_frame)!==null&&S!==void 0?S:void 0))!=null;){this.loas_previous_frame=ft,_e=1024/ft.sampling_frequency*1e3;const Ee={codec:"aac",data:ft};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(Ee)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Ee)):(this.audio_metadata_={codec:"aac",audio_object_type:ft.audio_object_type,sampling_freq_index:ft.sampling_freq_index,sampling_frequency:ft.sampling_frequency,channel_config:ft.channel_config},this.dispatchAudioInitSegment(Ee)),Ft=Gt;const nt=Math.floor(Gt),Zt={unit:ft.data,length:ft.data.byteLength,pts:nt,dts:nt};this.audio_track_&&((be=this.audio_track_)===null||be===void 0||be.samples.push(Zt),this.audio_track_.length+=ft.data.byteLength),Gt+=_e}Ue.hasIncompleteData()&&(this.aac_last_incomplete_data_=Ue.getIncompleteData()),Ft&&(this.aac_last_sample_pts_=Ft)}parseAC3Payload(j,T){var F,S;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let be,_e=0;if(T!==void 0&&(_e=T/this.timescale_),((F=this.audio_metadata_)===null||F===void 0?void 0:F.codec)==="ac-3"){if(T===void 0&&this.aac_last_sample_pts_!==void 0)be=1536/this.audio_metadata_.sampling_frequency*1e3,_e=this.aac_last_sample_pts_+be;else if(T===void 0)return void C.Z.w(this.TAG,"AC3: Unknown pts")}const Me=new pt(j);let Ue=null,ft=_e,Gt=0;for(;(Ue=Me.readNextAC3Frame())!=null;){be=1536/Ue.sampling_frequency*1e3;const Ft={codec:"ac-3",data:Ue};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(Ft)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Ft)):(this.audio_metadata_={codec:"ac-3",sampling_frequency:Ue.sampling_frequency,bit_stream_identification:Ue.bit_stream_identification,bit_stream_mode:Ue.bit_stream_mode,low_frequency_effects_channel_on:Ue.low_frequency_effects_channel_on,channel_mode:Ue.channel_mode},this.dispatchAudioInitSegment(Ft)),Gt=ft;const Ee=Math.floor(ft),nt={unit:Ue.data,length:Ue.data.byteLength,pts:Ee,dts:Ee};this.audio_track_&&((S=this.audio_track_)===null||S===void 0||S.samples.push(nt),this.audio_track_.length+=Ue.data.byteLength),ft+=be}Gt&&(this.aac_last_sample_pts_=Gt)}parseEAC3Payload(j,T){var F,S;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let be,_e=0;if(T!==void 0&&(_e=T/this.timescale_),((F=this.audio_metadata_)===null||F===void 0?void 0:F.codec)==="ec-3"){if(T===void 0&&this.aac_last_sample_pts_!==void 0)be=256*(this.audio_metadata_.num_blks||0)/(this.audio_metadata_.sampling_frequency||0)*1e3,_e=this.aac_last_sample_pts_+be;else if(T===void 0)return void C.Z.w(this.TAG,"EAC3: Unknown pts")}const Me=new Et(j);let Ue=null,ft=_e,Gt=0;for(;(Ue=Me.readNextEAC3Frame())!=null;){be=1536/Ue.sampling_frequency*1e3;const Ft={codec:"ec-3",data:Ue};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(Ft)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Ft)):(this.audio_metadata_={codec:"ec-3",sampling_frequency:Ue.sampling_frequency,bit_stream_identification:Ue.bit_stream_identification,low_frequency_effects_channel_on:Ue.low_frequency_effects_channel_on,num_blks:Ue.num_blks,channel_mode:Ue.channel_mode},this.dispatchAudioInitSegment(Ft)),Gt=ft;const Ee=Math.floor(ft),nt={unit:Ue.data,length:Ue.data.byteLength,pts:Ee,dts:Ee};this.audio_track_&&((S=this.audio_track_)===null||S===void 0||S.samples.push(nt),this.audio_track_.length+=Ue.data.byteLength),ft+=be}Gt&&(this.aac_last_sample_pts_=Gt)}parseOpusPayload(j,T){var F,S;if(this.has_video_&&!this.video_init_segment_dispatched_)return;let be,_e=0;if(T!==void 0&&(_e=T/this.timescale_),((F=this.audio_metadata_)===null||F===void 0?void 0:F.codec)==="opus"){if(T===void 0&&this.aac_last_sample_pts_!==void 0)be=20,_e=this.aac_last_sample_pts_+be;else if(T===void 0)return void C.Z.w(this.TAG,"Opus: Unknown pts")}let Me=_e,Ue=0;for(let ft=0;ft<j.length;){be=20;const Gt=(16&j[ft+1])!=0,Ft=(8&j[ft+1])!=0;let Ee=ft+2,nt=0;for(;j[Ee]===255;)nt+=255,Ee+=1;nt+=j[Ee],Ee+=1,Ee+=Gt?2:0,Ee+=Ft?2:0,Ue=Me;const Zt=Math.floor(Me),bi=j.slice(Ee,Ee+nt),Kt={unit:bi,length:bi.byteLength,pts:Zt,dts:Zt};this.audio_track_&&((S=this.audio_track_)===null||S===void 0||S.samples.push(Kt),this.audio_track_.length+=bi.byteLength),Me+=be,ft=Ee+nt}Ue&&(this.aac_last_sample_pts_=Ue)}parseMP3Payload(j,T){var F;if(this.has_video_&&!this.video_init_segment_dispatched_)return;const S=[44100,48e3,32e3,0],be=[22050,24e3,16e3,0],_e=[11025,12e3,8e3,0],Me=j[1]>>>3&3,Ue=(6&j[1])>>1;(240&j[2])>>>4;const ft=(12&j[2])>>>2,Gt=(j[3]>>>6&3)!==3?2:1;let Ft=0,Ee=34;switch(Me){case 0:Ft=_e[ft];break;case 2:Ft=be[ft];break;case 3:Ft=S[ft]}switch(Ue){case 1:Ee=34;break;case 2:Ee=33;break;case 3:Ee=32}const nt=new Bi;nt.object_type=Ee,nt.sample_rate=Ft,nt.channel_count=Gt,nt.data=j;const Zt={codec:"mp3",data:nt};this.audio_init_segment_dispatched_?this.detectAudioMetadataChange(Zt)&&(this.dispatchAudioMediaSegment(),this.dispatchAudioInitSegment(Zt)):(this.audio_metadata_={codec:"mp3",object_type:Ee,sample_rate:Ft,channel_count:Gt},this.dispatchAudioInitSegment(Zt));const bi={unit:j,length:j.byteLength,pts:T/this.timescale_,dts:T/this.timescale_};this.audio_track_&&((F=this.audio_track_)===null||F===void 0||F.samples.push(bi),this.audio_track_.length+=j.byteLength)}detectAudioMetadataChange(j){var T,F,S,be;if(j.codec!==((T=this.audio_metadata_)===null||T===void 0?void 0:T.codec))return C.Z.v(this.TAG,`Audio: Audio Codecs changed from ${(F=this.audio_metadata_)===null||F===void 0?void 0:F.codec} to ${j.codec}`),!0;if(j.codec==="aac"&&this.audio_metadata_.codec==="aac"){const _e=j.data;if(_e.audio_object_type!==this.audio_metadata_.audio_object_type)return C.Z.v(this.TAG,`AAC: AudioObjectType changed from ${this.audio_metadata_.audio_object_type} to ${_e.audio_object_type}`),!0;if(_e.sampling_freq_index!==this.audio_metadata_.sampling_freq_index)return C.Z.v(this.TAG,`AAC: SamplingFrequencyIndex changed from ${this.audio_metadata_.sampling_freq_index} to ${_e.sampling_freq_index}`),!0;if(_e.channel_config!==this.audio_metadata_.channel_config)return C.Z.v(this.TAG,`AAC: Channel configuration changed from ${(S=this.audio_metadata_)===null||S===void 0?void 0:S.channel_config} to ${_e.channel_config}`),!0}else if(j.codec==="ac-3"&&this.audio_metadata_.codec==="ac-3"){const _e=j.data;if(_e.sampling_frequency!==this.audio_metadata_.sampling_frequency)return C.Z.v(this.TAG,`AC3: Sampling Frequency changed from ${(be=this.audio_metadata_)===null||be===void 0?void 0:be.sampling_frequency} to ${_e.sampling_frequency}`),!0;if(_e.bit_stream_identification!==this.audio_metadata_.bit_stream_identification)return C.Z.v(this.TAG,`AC3: Bit Stream Identification changed from ${this.audio_metadata_.bit_stream_identification} to ${_e.bit_stream_identification}`),!0;if(_e.bit_stream_mode!==this.audio_metadata_.bit_stream_mode)return C.Z.v(this.TAG,`AC3: BitStream Mode changed from ${this.audio_metadata_.bit_stream_mode} to ${_e.bit_stream_mode}`),!0;if(_e.channel_mode!==this.audio_metadata_.channel_mode)return C.Z.v(this.TAG,`AC3: Channel Mode changed from ${this.audio_metadata_.channel_mode} to ${_e.channel_mode}`),!0;if(_e.low_frequency_effects_channel_on!==this.audio_metadata_.low_frequency_effects_channel_on)return C.Z.v(this.TAG,`AC3: Low Frequency Effects Channel On changed from ${this.audio_metadata_.low_frequency_effects_channel_on} to ${_e.low_frequency_effects_channel_on}`),!0}else if(j.codec==="opus"&&this.audio_metadata_.codec==="opus"){const _e=j.meta;if(_e.sample_rate!==this.audio_metadata_.sample_rate)return C.Z.v(this.TAG,`Opus: SamplingFrequencyIndex changed from ${this.audio_metadata_.sample_rate} to ${_e.sample_rate}`),!0;if(_e.channel_count!==this.audio_metadata_.channel_count)return C.Z.v(this.TAG,`Opus: Channel count changed from ${this.audio_metadata_.channel_count} to ${_e.channel_count}`),!0}else if(j.codec==="mp3"&&this.audio_metadata_.codec==="mp3"){const _e=j.data;if(_e.object_type!==this.audio_metadata_.object_type)return C.Z.v(this.TAG,`MP3: AudioObjectType changed from ${this.audio_metadata_.object_type} to ${_e.object_type}`),!0;if(_e.sample_rate!==this.audio_metadata_.sample_rate)return C.Z.v(this.TAG,`MP3: SamplingFrequencyIndex changed from ${this.audio_metadata_.sample_rate} to ${_e.sample_rate}`),!0;if(_e.channel_count!==this.audio_metadata_.channel_count)return C.Z.v(this.TAG,`MP3: Channel count changed from ${this.audio_metadata_.channel_count} to ${_e.channel_count}`),!0}return!1}dispatchAudioInitSegment(j){var T,F,S,be,_e,Me;const Ue={type:"audio"};if(Ue.id=(T=this.audio_track_)===null||T===void 0?void 0:T.id,Ue.timescale=1e3,Ue.duration=this.duration_,((F=this.audio_metadata_)===null||F===void 0?void 0:F.codec)==="aac"){const Gt=j.codec==="aac"?j.data:null,Ft=new fe(Gt);Ue.audioSampleRate=Ft.sampling_rate,Ue.channelCount=Ft.channel_count,Ue.codec=Ft.codec_mimetype,Ue.originalCodec=Ft.original_codec_mimetype,Ue.config=Ft.config,Ue.refSampleDuration=1024/Ue.audioSampleRate*Ue.timescale}else if(((S=this.audio_metadata_)===null||S===void 0?void 0:S.codec)==="ac-3"){const Gt=j.codec==="ac-3"?j.data:null,Ft=new Dt(Gt);Ue.audioSampleRate=Ft.sampling_rate,Ue.channelCount=Ft.channel_count,Ue.codec=Ft.codec_mimetype,Ue.originalCodec=Ft.original_codec_mimetype,Ue.config=Ft.config,Ue.refSampleDuration=1536/Ue.audioSampleRate*Ue.timescale}else if(((be=this.audio_metadata_)===null||be===void 0?void 0:be.codec)==="ec-3"){const Gt=j.codec==="ec-3"?j.data:null,Ft=new jt(Gt);Ue.audioSampleRate=Ft.sampling_rate,Ue.channelCount=Ft.channel_count,Ue.codec=Ft.codec_mimetype,Ue.originalCodec=Ft.original_codec_mimetype,Ue.config=Ft.config,Ue.refSampleDuration=256*Ft.num_blks/Ue.audioSampleRate*Ue.timescale}else((_e=this.audio_metadata_)===null||_e===void 0?void 0:_e.codec)==="opus"?(Ue.audioSampleRate=this.audio_metadata_.sample_rate,Ue.channelCount=this.audio_metadata_.channel_count,Ue.channelConfigCode=this.audio_metadata_.channel_config_code,Ue.codec="opus",Ue.originalCodec="opus",Ue.config=void 0,Ue.refSampleDuration=20):((Me=this.audio_metadata_)===null||Me===void 0?void 0:Me.codec)==="mp3"&&(Ue.audioSampleRate=this.audio_metadata_.sample_rate,Ue.channelCount=this.audio_metadata_.channel_count,Ue.codec="mp3",Ue.originalCodec="mp3",Ue.config=void 0);this.audio_init_segment_dispatched_||C.Z.v(this.TAG,`Generated first AudioSpecificConfig for mimeType: ${Ue.codec}`),this.onTrackMetadata&&this.onTrackMetadata("audio",Ue),this.audio_init_segment_dispatched_=!0,this.video_metadata_changed_=!1;const ft=this.media_info_;ft.hasAudio=!0,ft.audioCodec=Ue.originalCodec,ft.audioSampleRate=Ue.audioSampleRate,ft.audioChannelCount=Ue.channelCount,ft.hasVideo&&ft.videoCodec?ft.mimeType=`video/mp2t; codecs="${ft.videoCodec},${ft.audioCodec}"`:ft.mimeType=`video/mp2t; codecs="${ft.audioCodec}"`,ft.isComplete()&&this.onMediaInfo&&this.onMediaInfo(ft)}dispatchPESPrivateDataDescriptor(j,T,F){const S=new L;S.pid=j,S.stream_type=T,S.descriptor=F,this.onPESPrivateDataDescriptor&&this.onPESPrivateDataDescriptor(S)}parsePESPrivateDataPayload(j,T,F,S,be){const _e=new I;if(_e.pid=S,_e.stream_id=be,_e.len=j.byteLength,_e.data=j,T!==void 0){const Me=Math.floor(T/this.timescale_);_e.pts=Me}else _e.nearest_pts=this.aac_last_sample_pts_;if(F!==void 0){const Me=Math.floor(F/this.timescale_);_e.dts=Me}this.onPESPrivateData&&this.onPESPrivateData(_e)}parseTimedID3MetadataPayload(j,T,F,S,be){const _e=new I;if(_e.pid=S,_e.stream_id=be,_e.len=j.byteLength,_e.data=j,T!==void 0){const Me=Math.floor(T/this.timescale_);_e.pts=Me}if(F!==void 0){const Me=Math.floor(F/this.timescale_);_e.dts=Me}this.onTimedID3Metadata&&this.onTimedID3Metadata(_e)}parseSMPTE2038MetadataPayload(j,T,F,S,be){const _e=new he;if(_e.pid=S,_e.stream_id=be,_e.len=j.byteLength,_e.data=j,T!==void 0){const Me=Math.floor(T/this.timescale_);_e.pts=Me}if(_e.nearest_pts=this.aac_last_sample_pts_,F!==void 0){const Me=Math.floor(F/this.timescale_);_e.dts=Me}_e.ancillaries=(Me=>{let Ue=new we(Me),ft=0;const Gt=[];for(;ft+=6,Ue.readBits(6)===0;){const Ft=Ue.readBool();ft+=1;const Ee=Ue.readBits(11);ft+=11;const nt=Ue.readBits(12);ft+=12;const Zt=255&Ue.readBits(10);ft+=10;const bi=255&Ue.readBits(10);ft+=10;const Kt=255&Ue.readBits(10);ft+=10;const ri=new Uint8Array(Kt);for(let Mt=0;Mt<Kt;Mt++){const Nt=255&Ue.readBits(10);ft+=10,ri[Mt]=Nt}Ue.readBits(10),ft+=10;let Li="User Defined";const li={};Zt===65?bi===7&&(Li="SCTE-104"):Zt===95?bi===220?Li="ARIB STD-B37 (1SEG)":bi===221?Li="ARIB STD-B37 (ANALOG)":bi===222?Li="ARIB STD-B37 (SD)":bi===223&&(Li="ARIB STD-B37 (HD)"):Zt===97&&(bi===1?Li="EIA-708":bi===2&&(Li="EIA-608")),Gt.push({yc_indicator:Ft,line_number:Ee,horizontal_offset:nt,did:Zt,sdid:bi,user_data:ri,description:Li,information:li}),Ue.readBits(8-(ft-Math.floor(ft/8))%8),ft+=(8-(ft-Math.floor(ft/8)))%8}return Ue.destroy(),Ue=null,Gt})(j),this.onSMPTE2038Metadata&&this.onSMPTE2038Metadata(_e)}},Xt=new Uint8Array([0,0,0,0,0,0,0,0]);class ot{static init(){ot.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hvc1:[],hvcC:[],av01:[],av1C:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[],Opus:[],dOps:[],"ac-3":[],dac3:[],"ec-3":[],dec3:[]};for(const T in ot.types)ot.types.hasOwnProperty(T)&&(ot.types[T]=[T.charCodeAt(0),T.charCodeAt(1),T.charCodeAt(2),T.charCodeAt(3)])}static box(T,...F){let S=8,be=null;const _e=Array.prototype.slice.call(arguments,1),Me=_e.length;for(let ft=0;ft<Me;ft++)S+=_e[ft].byteLength;be=new Uint8Array(S),be[0]=S>>>24&255,be[1]=S>>>16&255,be[2]=S>>>8&255,be[3]=255&S,be.set(T,4);let Ue=8;for(let ft=0;ft<Me;ft++)be.set(_e[ft],Ue),Ue+=_e[ft].byteLength;return be}static generateInitSegment(T){const F=ot.box(ot.types.ftyp,ot.constants.FTYP),S=ot.moov(T),be=new Uint8Array(F.byteLength+S.byteLength);return be.set(F,0),be.set(S,F.byteLength),be}static moov(T){const F=ot.mvhd(T.timescale,T.duration),S=ot.trak(T),be=ot.mvex(T);return ot.box(ot.types.moov,F,S,be)}static mvhd(T,F){return ot.box(ot.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,T>>>24&255,T>>>16&255,T>>>8&255,255&T,F>>>24&255,F>>>16&255,F>>>8&255,255&F,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}static trak(T){return ot.box(ot.types.trak,ot.tkhd(T),ot.mdia(T))}static tkhd(T){const F=T.id,S=T.duration,be=T.presentWidth,_e=T.presentHeight;return ot.box(ot.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,255&F,0,0,0,0,S>>>24&255,S>>>16&255,S>>>8&255,255&S,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,be>>>8&255,255&be,0,0,_e>>>8&255,255&_e,0,0]))}static mdia(T){return ot.box(ot.types.mdia,ot.mdhd(T),ot.hdlr(T),ot.minf(T))}static mdhd(T){const F=T.timescale,S=T.duration;return ot.box(ot.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,255&F,S>>>24&255,S>>>16&255,S>>>8&255,255&S,85,196,0,0]))}static hdlr(T){let F=null;return F=T.type==="audio"?ot.constants.HDLR_AUDIO:ot.constants.HDLR_VIDEO,ot.box(ot.types.hdlr,F)}static minf(T){let F=null;return F=T.type==="audio"?ot.box(ot.types.smhd,ot.constants.SMHD):ot.box(ot.types.vmhd,ot.constants.VMHD),ot.box(ot.types.minf,F,ot.dinf(),ot.stbl(T))}static dinf(){return ot.box(ot.types.dinf,ot.box(ot.types.dref,ot.constants.DREF))}static stbl(T){return ot.box(ot.types.stbl,ot.stsd(T),ot.box(ot.types.stts,ot.constants.STTS),ot.box(ot.types.stsc,ot.constants.STSC),ot.box(ot.types.stsz,ot.constants.STSZ),ot.box(ot.types.stco,ot.constants.STCO))}static stsd(T){return T.type==="audio"?T.codec==="mp3"?ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.mp3(T)):T.codec==="ac-3"?ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.ac3(T)):T.codec==="ec-3"?ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.ec3(T)):T.codec==="opus"?ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.Opus(T)):ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.mp4a(T)):T.type==="video"&&T.codec.startsWith("hvc1")?ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.hvc1(T)):T.type==="video"&&T.codec.startsWith("av01")?ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.av01(T)):ot.box(ot.types.stsd,ot.constants.STSD_PREFIX,ot.avc1(T))}static mp3(T){const F=T.channelCount,S=T.audioSampleRate,be=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F,0,16,0,0,0,0,S>>>8&255,255&S,0,0]);return ot.box(ot.types[".mp3"],be)}static mp4a(T){const F=T.channelCount,S=T.audioSampleRate,be=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F,0,16,0,0,0,0,S>>>8&255,255&S,0,0]);return ot.box(ot.types.mp4a,be,ot.esds(T))}static ac3(T){var F;const S=T.channelCount,be=T.audioSampleRate,_e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,S,0,16,0,0,0,0,be>>>8&255,255&be,0,0]);return ot.box(ot.types["ac-3"],_e,ot.box(ot.types.dac3,new Uint8Array((F=T.config)!==null&&F!==void 0?F:[])))}static ec3(T){var F;const S=T.channelCount,be=T.audioSampleRate,_e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,S,0,16,0,0,0,0,be>>>8&255,255&be,0,0]);return ot.box(ot.types["ec-3"],_e,ot.box(ot.types.dec3,new Uint8Array((F=T.config)!==null&&F!==void 0?F:[])))}static esds(T){var F;const S=(F=T.config)!==null&&F!==void 0?F:[],be=S.length,_e=new Uint8Array([0,0,0,0,3,23+be,0,1,0,4,15+be,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([be]).concat(S).concat([6,1,2]));return ot.box(ot.types.esds,_e)}static Opus(T){const F=T.channelCount,S=T.audioSampleRate,be=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F,0,16,0,0,0,0,S>>>8&255,255&S,0,0]);return ot.box(ot.types.Opus,be,ot.dOps(T))}static dOps(T){const F=T.channelCount,S=T.channelConfigCode,be=T.audioSampleRate;let _e=[];switch(S){case 1:case 2:_e=[0];break;case 0:_e=[255,1,1,0,1];break;case 128:_e=[255,2,0,0,1];break;case 3:_e=[1,2,1,0,2,1];break;case 4:_e=[1,2,2,0,1,2,3];break;case 5:_e=[1,3,2,0,4,1,2,3];break;case 6:_e=[1,4,2,0,4,1,2,3,5];break;case 7:_e=[1,4,2,0,4,1,2,3,5,6];break;case 8:_e=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:_e=[1,1,2,0,1];break;case 131:_e=[1,1,3,0,1,2];break;case 132:_e=[1,1,4,0,1,2,3];break;case 133:_e=[1,1,5,0,1,2,3,4];break;case 134:_e=[1,1,6,0,1,2,3,4,5];break;case 135:_e=[1,1,7,0,1,2,3,4,5,6];break;case 136:_e=[1,1,8,0,1,2,3,4,5,6,7]}const Me=new Uint8Array([0,F,0,0,be>>>24&255,be>>>17&255,be>>>8&255,be>>>0&255,0,0,..._e]);return ot.box(ot.types.dOps,Me)}static avc1(T){const F=T.avcc,S=T.codecWidth,be=T.codecHeight,_e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,S>>>8&255,255&S,be>>>8&255,255&be,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return ot.box(ot.types.avc1,_e,ot.box(ot.types.avcC,F))}static hvc1(T){const F=T.hvcc,S=T.codecWidth,be=T.codecHeight,_e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,S>>>8&255,255&S,be>>>8&255,255&be,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return ot.box(ot.types.hvc1,_e,ot.box(ot.types.hvcC,F))}static av01(T){var F,S;const be=T.av1c,_e=(F=T.codecWidth)!==null&&F!==void 0?F:192,Me=(S=T.codecHeight)!==null&&S!==void 0?S:108,Ue=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,_e>>>8&255,255&_e,Me>>>8&255,255&Me,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return ot.box(ot.types.av01,Ue,ot.box(ot.types.av1C,be))}static mvex(T){return ot.box(ot.types.mvex,ot.trex(T))}static trex(T){const F=T.id,S=new Uint8Array([0,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,255&F,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return ot.box(ot.types.trex,S)}static moof(T,F){return ot.box(ot.types.moof,ot.mfhd(T.sequenceNumber),ot.traf(T,F))}static mfhd(T){const F=new Uint8Array([0,0,0,0,T>>>24&255,T>>>16&255,T>>>8&255,255&T]);return ot.box(ot.types.mfhd,F)}static traf(T,F){const S=T.id,be=ot.box(ot.types.tfhd,new Uint8Array([0,0,0,0,S>>>24&255,S>>>16&255,S>>>8&255,255&S])),_e=ot.box(ot.types.tfdt,new Uint8Array([0,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,255&F])),Me=ot.sdtp(T),Ue=ot.trun(T,Me.byteLength+16+16+8+16+8+8);return ot.box(ot.types.traf,be,_e,Ue,Me)}static sdtp(T){const F=T.samples||[],S=F.length,be=new Uint8Array(4+S);for(let _e=0;_e<S;_e++){const Me=F[_e].flags;be[_e+4]=Me.isLeading<<6|Me.dependsOn<<4|Me.isDependedOn<<2|Me.hasRedundancy}return ot.box(ot.types.sdtp,be)}static trun(T,F){const S=T.samples||[],be=S.length,_e=12+16*be,Me=new Uint8Array(_e);F+=8+_e,Me.set([0,0,15,1,be>>>24&255,be>>>16&255,be>>>8&255,255&be,F>>>24&255,F>>>16&255,F>>>8&255,255&F],0);for(let Ue=0;Ue<be;Ue++){const ft=S[Ue].duration,Gt=S[Ue].size,Ft=S[Ue].flags,Ee=S[Ue].cts;Me.set([ft>>>24&255,ft>>>16&255,ft>>>8&255,255&ft,Gt>>>24&255,Gt>>>16&255,Gt>>>8&255,255&Gt,Ft.isLeading<<2|Ft.dependsOn,Ft.isDependedOn<<6|Ft.hasRedundancy<<4|Ft.isNonSync,0,0,Ee>>>24&255,Ee>>>16&255,Ee>>>8&255,255&Ee],12+16*Ue)}return ot.box(ot.types.trun,Me)}static mdat(T){return ot.box(ot.types.mdat,T)}}ot.constants={FTYP:new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),STSD_PREFIX:new Uint8Array([0,0,0,0,0,0,0,1]),STTS:Xt,STSC:Xt,STCO:Xt,STSZ:new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),HDLR_VIDEO:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),HDLR_AUDIO:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),DREF:new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),SMHD:new Uint8Array([0,0,0,0,0,0,0,0]),VMHD:new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])},ot.init();const mi=ot,Pi=class{static getSilentFrame(j,T){if(j==="mp4a.40.2"){if(T===1)return new Uint8Array([0,200,0,128,35,128]);if(T===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(T===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(T===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(T===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(T===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(T===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(T===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(T===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}};var Ii=c(68);const ti=class{constructor(j){var T;this.TAG="MP4Remuxer",this._fillSilentAfterSeek=!1,this._config=j,this._isLive=!!j.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new Ii.J1("audio"),this._videoSegmentInfoList=new Ii.J1("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!y.Z.chrome||!(y.Z.version&&y.Z.version.major<50||y.Z.version&&y.Z.version.major===50&&(((T=y.Z.version)===null||T===void 0?void 0:T.build)||0)<2661)),this._fillSilentAfterSeek=!(!y.Z.msedge&&!y.Z.msie),this._mp3UseMpegAudio=!y.Z.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}destroy(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}bindDataSource(j){var T;return j.onDataAvailable=(T=this.remux)===null||T===void 0?void 0:T.bind(this),j.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}get onInitSegment(){return this._onInitSegment}set onInitSegment(j){this._onInitSegment=j}get onMediaSegment(){return this._onMediaSegment}set onMediaSegment(j){this._onMediaSegment=j}insertDiscontinuity(){this._audioNextDts=this._videoNextDts=void 0}seek(j){this._audioStashedLastSample=null,this._videoStashedLastSample=null,this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}remux(j,T){if(!this._onMediaSegment)throw new te.rT("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(j,T),T&&this._remuxVideo(T),j&&this._remuxAudio(j)}_onTrackMetadataReceived(j,T){let F=null,S="mp4",be=T.codec;if(j==="audio")this._audioMeta=T,T.codec==="mp3"&&this._mp3UseMpegAudio?(S="mpeg",be="",F=new Uint8Array):F=mi.generateInitSegment(T);else{if(j!=="video")return;this._videoMeta=T,F=mi.generateInitSegment(T)}if(!this._onInitSegment)throw new te.rT("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(j,{type:j,data:F.buffer,codec:be,container:`${j}/${S}`,mediaDuration:T.duration})}_calculateDtsBase(j,T){var F,S;this._dtsBaseInited||(!((F=j==null?void 0:j.samples)===null||F===void 0)&&F.length&&(this._audioDtsBase=j.samples[0].dts),!((S=T==null?void 0:T.samples)===null||S===void 0)&&S.length&&(this._videoDtsBase=T.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}getTimestampBase(){if(this._dtsBaseInited)return this._dtsBase}flushStashedSamples(){const j=this._videoStashedLastSample,T=this._audioStashedLastSample,F={type:"video",id:1,sequenceNumber:0,samples:[],length:0};j!=null&&(F.samples.push(j),F.length=j==null?void 0:j.length);const S={type:"audio",id:2,sequenceNumber:0,samples:[],length:0};T!=null&&(S.samples.push(T),S.length=T==null?void 0:T.length),this._videoStashedLastSample=null,this._audioStashedLastSample=null,this._remuxVideo(F,!0),this._remuxAudio(S,!0)}_remuxAudio(j,T){var F,S,be,_e,Me,Ue,ft;if(this._audioMeta==null)return;const Gt=j,Ft=Gt.samples;let Ee,nt=-1,Zt=-1;const bi=this._audioMeta.refSampleDuration,Kt=this._audioMeta.codec==="mp3"&&this._mp3UseMpegAudio,ri=this._dtsBaseInited&&this._audioNextDts===void 0;let Li=!1;if(!Ft||Ft.length===0||Ft.length===1&&!T)return;let li=0,Mt=null,Nt=0;Kt?(li=0,Nt=Gt.length):(li=8,Nt=8+Gt.length);let ai=null;if(Ft.length>1&&(ai=Ft.pop(),Nt-=ai.length),this._audioStashedLastSample!=null){const Yi=this._audioStashedLastSample;this._audioStashedLastSample=null,Ft.unshift(Yi),Nt+=Yi.length}ai!=null&&(this._audioStashedLastSample=ai);const ji=Ft[0].dts-this._dtsBase;if(this._audioNextDts)Ee=ji-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())Ee=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&this._audioMeta.originalCodec!=="mp3"&&(Li=!0);else{const Yi=this._audioSegmentInfoList.getLastSampleBefore(ji);if(Yi!=null){let bn=ji-(Yi.originalDts+Yi.duration);bn<=3&&(bn=0),Ee=ji-(Yi.dts+Yi.duration+bn)}else Ee=0}if(Li){const Yi=ji-Ee,bn=this._videoSegmentInfoList.getLastSegmentBefore(ji);if(bn!=null&&bn.beginDts<Yi){const vn=Pi.getSilentFrame((F=this._audioMeta)===null||F===void 0?void 0:F.originalCodec,(S=this._audioMeta)===null||S===void 0?void 0:S.channelCount);if(vn){const jn=bn.beginDts,un=Yi-bn.beginDts;C.Z.v(this.TAG,`InsertPrefixSilentAudio: dts: ${jn}, duration: ${un}`),Ft.unshift({unit:vn,dts:jn,pts:jn}),Nt+=vn.byteLength}}else Li=!1}const tn=[];for(let Yi=0;Yi<Ft.length;Yi++){const bn=Ft[Yi],vn=bn.unit,jn=bn.dts-this._dtsBase;let un=jn,Un=!1,Hn=null,yn=0;if(!(jn<-.001)){if(this._audioMeta.codec!=="mp3"){let fn=jn;const Cn=3;if(this._audioNextDts&&(fn=this._audioNextDts),Ee=jn-fn,Ee<=-Cn*(bi||0)){C.Z.w(this.TAG,`Dropping 1 audio frame (originalDts: ${jn} ms ,curRefDts: ${fn} ms)  due to dtsCorrection: ${Ee} ms overlap.`);continue}if(Ee>=Cn*(bi||0)&&this._fillAudioTimestampGap&&!y.Z.safari){Un=!0;const wr=Math.floor(Ee/(bi||0));C.Z.w(this.TAG,`Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.
originalDts: ${jn} ms, curRefDts: ${fn} ms, dtsCorrection: ${Math.round(Ee)} ms, generate: ${wr} frames`),un=Math.floor(fn),yn=Math.floor(fn+(bi||0))-un;let tr=Pi.getSilentFrame((be=this._audioMeta)===null||be===void 0?void 0:be.originalCodec,this._audioMeta.channelCount);tr==null&&(C.Z.w(this.TAG,`Unable to generate silent frame for ${(_e=this._audioMeta)===null||_e===void 0?void 0:_e.originalCodec} with ${this._audioMeta.channelCount} channels, repeat last frame`),tr=vn),Hn=[];for(let Nn=0;Nn<wr;Nn++){fn+=bi||0;const lr=Math.floor(fn),zr=Math.floor(fn+(bi||0))-lr,Ir={dts:lr,pts:lr,cts:0,unit:tr,size:tr.byteLength,duration:zr,originalDts:jn,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};Hn.push(Ir),Nt+=Ir.size}this._audioNextDts=fn+(bi||0)}else un=Math.floor(fn),yn=Math.floor(fn+(bi||0))-un,this._audioNextDts=fn+(bi||0)}else un=jn-Ee,Yi!==Ft.length-1?yn=Ft[Yi+1].dts-this._dtsBase-Ee-un:ai!=null?yn=ai.dts-this._dtsBase-Ee-un:yn=tn.length>=1?(Me=tn[tn.length-1])===null||Me===void 0?void 0:Me.duration:Math.floor(bi||0),this._audioNextDts=un+yn;nt===-1&&(nt=un),tn.push({dts:un,pts:un,cts:0,unit:bn.unit,size:(Ue=bn.unit)===null||Ue===void 0?void 0:Ue.byteLength,duration:yn,originalDts:jn,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),Un&&tn.push.apply(tn,Hn)}}if(tn.length===0)return Gt.samples=[],void(Gt.length=0);Kt?Mt=new Uint8Array(Nt):(Mt=new Uint8Array(Nt),Mt[0]=Nt>>>24&255,Mt[1]=Nt>>>16&255,Mt[2]=Nt>>>8&255,Mt[3]=255&Nt,Mt.set(mi.types.mdat,4));for(let Yi=0;Yi<tn.length;Yi++){const bn=tn[Yi].unit;Mt.set(bn,li),li+=bn.byteLength||0}const Ui=tn[tn.length-1];Zt=Ui.dts+Ui.duration;const Gi=new Ii.Yy;Gi.beginDts=nt,Gi.endDts=Zt,Gi.beginPts=nt,Gi.endPts=Zt,Gi.originalBeginDts=tn[0].originalDts,Gi.originalEndDts=Ui.originalDts+Ui.duration,Gi.firstSample=new Ii.Wk(tn[0].dts,tn[0].pts,tn[0].duration,tn[0].originalDts,!1),Gi.lastSample=new Ii.Wk(Ui.dts,Ui.pts,Ui.duration,Ui.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(Gi),Gt.samples=tn,Gt.sequenceNumber++;let nn=null;nn=Kt?new Uint8Array:mi.moof(Gt,nt),Gt.samples=[],Gt.length=0;const Zi={type:"audio",data:this._mergeBoxes(nn,Mt).buffer,sampleCount:tn.length,info:Gi};Kt&&ri&&Zi&&(Zi.timestampOffset=nt),(ft=this._onMediaSegment)===null||ft===void 0||ft.call(this,"audio",Zi)}_remuxVideo(j,T){var F,S;if(this._videoMeta==null)return;const be=j,_e=be.samples;let Me,Ue=-1,ft=-1,Gt=-1,Ft=-1;if(!_e||_e.length===0||_e.length===1&&!T)return;let Ee=8,nt=null,Zt=8+j.length,bi=null;if(_e.length>1&&(bi=_e.pop(),Zt-=bi.length),this._videoStashedLastSample!=null){const Nt=this._videoStashedLastSample;this._videoStashedLastSample=null,_e.unshift(Nt),Zt+=(Nt==null?void 0:Nt.length)||0}bi!=null&&(this._videoStashedLastSample=bi);const Kt=_e[0].dts-this._dtsBase;if(this._videoNextDts)Me=Kt-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())Me=0;else{const Nt=this._videoSegmentInfoList.getLastSampleBefore(Kt);if(Nt!=null){let ai=Kt-(Nt.originalDts+Nt.duration);ai<=3&&(ai=0),Me=Kt-(Nt.dts+Nt.duration+ai)}else Me=0}const ri=new Ii.Yy,Li=[];for(let Nt=0;Nt<_e.length;Nt++){const ai=_e[Nt],ji=ai.dts-this._dtsBase,tn=ai.isKeyframe,Ui=ji-Me,Gi=ai.cts,nn=Ui+Gi;Ue===-1&&(Ue=Ui,Gt=nn);let Zi=0;if(Nt!==_e.length-1?Zi=_e[Nt+1].dts-this._dtsBase-Me-Ui:bi!=null?Zi=bi.dts-this._dtsBase-Me-Ui:Zi=Li.length>=1?Li[Li.length-1].duration:Math.floor(((F=this._videoMeta)===null||F===void 0?void 0:F.refSampleDuration)||0),tn){const Yi=new Ii.Wk(Ui,nn,Zi,ai.dts,!0);Yi.fileposition=ai.fileposition,ri.appendSyncPoint(Yi)}Li.push({dts:Ui,pts:nn,cts:Gi,units:ai.units,size:ai.length,isKeyframe:tn,duration:Zi,originalDts:ji,flags:{isLeading:0,dependsOn:tn?2:1,isDependedOn:tn?1:0,hasRedundancy:0,isNonSync:tn?0:1}})}nt=new Uint8Array(Zt),nt[0]=Zt>>>24&255,nt[1]=Zt>>>16&255,nt[2]=Zt>>>8&255,nt[3]=255&Zt,nt.set(mi.types.mdat,4);for(let Nt=0;Nt<Li.length;Nt++){const ai=Li[Nt].units;for(;ai!=null&&ai.length;){const ji=ai.shift(),tn=ji==null?void 0:ji.data;nt.set(tn,Ee),Ee+=tn.byteLength}}const li=Li[Li.length-1];if(ft=li.dts+li.duration,Ft=li.pts+li.duration,this._videoNextDts=ft,ri.beginDts=Ue,ri.endDts=ft,ri.beginPts=Gt,ri.endPts=Ft,ri.originalBeginDts=Li[0].originalDts,ri.originalEndDts=li.originalDts+li.duration,ri.firstSample=new Ii.Wk(Li[0].dts,Li[0].pts,Li[0].duration,Li[0].originalDts,!!Li[0].isKeyframe),ri.lastSample=new Ii.Wk(li.dts,li.pts,li.duration,li.originalDts,!!li.isKeyframe),this._isLive||this._videoSegmentInfoList.append(ri),be.samples=Li,be.sequenceNumber++,this._forceFirstIDR){const Nt=Li[0].flags;Nt.dependsOn=2,Nt.isNonSync=0}const Mt=mi.moof(be,Ue);be.samples=[],be.length=0,(S=this._onMediaSegment)===null||S===void 0||S.call(this,"video",{type:"video",data:this._mergeBoxes(Mt,nt).buffer,sampleCount:Li.length,info:ri})}_mergeBoxes(j,T){const F=new Uint8Array(j.byteLength+T.byteLength);return F.set(j,0),F.set(T,j.byteLength),F}};var Vi=c(575),Jt=c(473);const At=class{constructor(j,T){var F;this.TAG="TransmuxingController",this._emitter=new E.EventEmitter,this._config=T,j.segments||(j.segments=[{duration:j.duration,filesize:j.filesize,url:j.url}]),typeof j.cors!="boolean"&&(j.cors=!0),typeof j.withCredentials!="boolean"&&(j.withCredentials=!1),this._mediaDataSource=j,this._currentSegmentIndex=0;let S=0;(F=this._mediaDataSource.segments)===null||F===void 0||F.forEach(be=>{be.timestampBase=S,S+=be.duration,be.cors=j.cors,be.withCredentials=j.withCredentials,T.referrerPolicy&&(be.referrerPolicy=T.referrerPolicy)}),isNaN(S)||this._mediaDataSource.duration===S||(this._mediaDataSource.duration=S),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}destroy(){var j,T,F;this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&((j=this._ioctl)===null||j===void 0||j.destroy(),this._ioctl=null),this._demuxer&&((T=this._demuxer)===null||T===void 0||T.destroy(),this._demuxer=null),this._remuxer&&((F=this._remuxer)===null||F===void 0||F.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}on(j,T){this._emitter.addListener(j,T)}off(j,T){this._emitter.removeListener(j,T)}start(){this._loadSegment(0),this._enableStatisticsReporter()}_loadSegment(j,T){var F,S,be;if(this._currentSegmentIndex=j,(F=this._mediaDataSource)===null||F===void 0?void 0:F.segments){const _e=(S=this._mediaDataSource)===null||S===void 0?void 0:S.segments[j],Me=this._ioctl=new Vi.Z(_e,this._config,j);Me.onError=this._onIOException.bind(this),Me.onSeeked=this._onIOSeeked.bind(this),Me.onComplete=this._onIOComplete.bind(this),Me.onRedirect=this._onIORedirect.bind(this),Me.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),T?(be=this._demuxer)===null||be===void 0||be.bindDataSource(this._ioctl):Me.onDataArrival=this._onInitChunkArrival.bind(this),Me.open(T)}}stop(){this._internalAbort(),this._disableStatisticsReporter()}_internalAbort(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}pause(){var j;!((j=this._ioctl)===null||j===void 0)&&j.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())}resume(){var j;!((j=this._ioctl)===null||j===void 0)&&j.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())}seek(j){var T,F,S,be,_e,Me,Ue,ft,Gt,Ft,Ee,nt,Zt,bi;if(this._mediaInfo==null||!(!((T=this._mediaInfo)===null||T===void 0)&&T.isSeekable()))return;const Kt=this._searchSegmentIndexContains(j);if(Kt===this._currentSegmentIndex){const ri=!((F=this._mediaInfo)===null||F===void 0)&&F.segments?(S=this._mediaInfo)===null||S===void 0?void 0:S.segments[Kt]:{};if(ri===void 0)this._pendingSeekTime=j;else{const Li=ri==null?void 0:ri.getNearestKeyframe(j);(be=this._remuxer)===null||be===void 0||be.seek(Li==null?void 0:Li.milliseconds),(_e=this._ioctl)===null||_e===void 0||_e.seek(Li==null?void 0:Li.fileposition),this._pendingResolveSeekPoint=Li==null?void 0:Li.milliseconds}}else{const ri=!((Me=this._mediaInfo)===null||Me===void 0)&&Me.segments?(Ue=this._mediaInfo)===null||Ue===void 0?void 0:Ue.segments[Kt]:{};if(ri===void 0)this._pendingSeekTime=j,this._internalAbort(),(ft=this._remuxer)===null||ft===void 0||ft.seek(),(Gt=this._remuxer)===null||Gt===void 0||Gt.insertDiscontinuity(),this._loadSegment(Kt);else{const Li=ri.getNearestKeyframe(j);this._internalAbort(),(Ft=this._remuxer)===null||Ft===void 0||Ft.seek(j),(Ee=this._remuxer)===null||Ee===void 0||Ee.insertDiscontinuity(),this._demuxer&&((nt=this._demuxer)===null||nt===void 0||nt.resetMediaInfo(),this._demuxer.timestampBase=!((Zt=this._mediaDataSource)===null||Zt===void 0)&&Zt.segments?(bi=this._mediaDataSource)===null||bi===void 0?void 0:bi.segments[Kt].timestampBase:0),this._loadSegment(Kt,Li==null?void 0:Li.fileposition),this._pendingResolveSeekPoint=Li==null?void 0:Li.milliseconds,this._reportSegmentMediaInfo(Kt)}}this._enableStatisticsReporter()}_searchSegmentIndexContains(j){var T;const F=this._mediaDataSource.segments;let S=((F==null?void 0:F.length)||0)-1;if(((F==null?void 0:F.length)||0)===0)return S;for(let be=0;be<((F==null?void 0:F.length)||0);be++)if(F&&j<(((T=F[be])===null||T===void 0?void 0:T.timestampBase)||0)){S=be-1;break}return S}_onInitChunkArrival(j,T){var F,S,be,_e,Me;let Ue=0;if(T>0)(F=this._demuxer)===null||F===void 0||F.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments?(S=this._mediaDataSource.segments[this._currentSegmentIndex])===null||S===void 0?void 0:S.timestampBase:0,Ue=((be=this._demuxer)===null||be===void 0?void 0:be.parseChunks(j,T))||0;else{let ft=null;ft=ze.probe(j),ft.match&&(this._setupFLVDemuxerRemuxer(ft),Ue=((_e=this._demuxer)===null||_e===void 0?void 0:_e.parseChunks(j,T))||0),ft.match||ft!=null&&ft.needMoreData||(ft=_t.probe(j),ft.match&&(this._setupTSDemuxerRemuxer(ft),Ue=((Me=this._demuxer)===null||Me===void 0?void 0:Me.parseChunks(j,T))||0)),ft.match||ft!=null&&ft.needMoreData||(ft=null,C.Z.e(this.TAG,"Non MPEG-TS/FLV, Unsupported media type!"),Promise.resolve().then(()=>{this._internalAbort()}),this._emitter.emit(Jt.Z.DEMUX_ERROR,x.Z.FORMAT_UNSUPPORTED,"Non MPEG-TS/FLV, Unsupported media type!"))}return Ue}_setupFLVDemuxerRemuxer(j){var T;this._demuxer=new ze(j,this._config),this._remuxer||(this._remuxer=new ti(this._config));const F=this._mediaDataSource;F.duration===void 0||isNaN(F.duration)||(this._demuxer.overridedDuration=F.duration),typeof F.hasAudio=="boolean"&&(this._demuxer.overridedHasAudio=F.hasAudio),typeof F.hasVideo=="boolean"&&(this._demuxer.overridedHasVideo=F.hasVideo),F.segments&&this._demuxer&&this._remuxer&&(this._demuxer.timestampBase=(T=F==null?void 0:F.segments[this._currentSegmentIndex])===null||T===void 0?void 0:T.timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._demuxer.onMetaDataArrived=this._onMetaDataArrived.bind(this),this._demuxer.onScriptDataArrived=this._onScriptDataArrived.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this))}_setupTSDemuxerRemuxer(j){const T=this._demuxer=new _t(j,this._config);this._remuxer||(this._remuxer=new ti(this._config)),T.onError=this._onDemuxException.bind(this),T.onMediaInfo=this._onMediaInfo.bind(this),T.onMetaDataArrived=this._onMetaDataArrived.bind(this),T.onTimedID3Metadata=this._onTimedID3Metadata.bind(this),T.onSMPTE2038Metadata=this._onSMPTE2038Metadata.bind(this),T.onSCTE35Metadata=this._onSCTE35Metadata.bind(this),T.onPESPrivateDataDescriptor=this._onPESPrivateDataDescriptor.bind(this),T.onPESPrivateData=this._onPESPrivateData.bind(this),this._remuxer.bindDataSource(this._demuxer),this._demuxer.bindDataSource(this._ioctl),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this)}_onMediaInfo(j){var T,F;this._mediaInfo==null&&(this._mediaInfo=Object.assign({},j),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=((F=(T=this._mediaDataSource)===null||T===void 0?void 0:T.segments)===null||F===void 0?void 0:F.length)||0,Object.setPrototypeOf(this._mediaInfo,w.Z.prototype));const S=Object.assign({},j);Object.setPrototypeOf(S,w.Z.prototype),this._mediaInfo.segments&&(this._mediaInfo.segments[this._currentSegmentIndex]=S),this._reportSegmentMediaInfo(this._currentSegmentIndex),this._pendingSeekTime!=null&&Promise.resolve().then(()=>{const be=this._pendingSeekTime;this._pendingSeekTime=null,this.seek(be)})}_onMetaDataArrived(j){this._emitter.emit(Jt.Z.METADATA_ARRIVED,j)}_onScriptDataArrived(j){this._emitter.emit(Jt.Z.SCRIPTDATA_ARRIVED,j)}_onTimedID3Metadata(j){var T;const F=(T=this._remuxer)===null||T===void 0?void 0:T.getTimestampBase();F!==void 0&&(j.pts!==void 0&&(j.pts-=F),j.dts!==void 0&&(j.dts-=F),this._emitter.emit(Jt.Z.TIMED_ID3_METADATA_ARRIVED,j))}_onSMPTE2038Metadata(j){var T;const F=(T=this._remuxer)===null||T===void 0?void 0:T.getTimestampBase();F!==void 0&&(j.pts!==void 0&&(j.pts-=F),j.dts!==void 0&&(j.dts-=F),j.nearest_pts!==void 0&&(j.nearest_pts-=F),this._emitter.emit(Jt.Z.SMPTE2038_METADATA_ARRIVED,j))}_onSCTE35Metadata(j){var T;const F=(T=this._remuxer)===null||T===void 0?void 0:T.getTimestampBase();F!==void 0&&(j.pts!==void 0&&(j.pts-=F),j.nearest_pts!==void 0&&(j.nearest_pts-=F),this._emitter.emit(Jt.Z.SCTE35_METADATA_ARRIVED,j))}_onPESPrivateDataDescriptor(j){this._emitter.emit(Jt.Z.PES_PRIVATE_DATA_DESCRIPTOR,j)}_onPESPrivateData(j){var T;const F=(T=this._remuxer)===null||T===void 0?void 0:T.getTimestampBase();F!==void 0&&(j.pts!==void 0&&(j.pts-=F),j.nearest_pts!==void 0&&(j.nearest_pts-=F),j.dts!==void 0&&(j.dts-=F),this._emitter.emit(Jt.Z.PES_PRIVATE_DATA_ARRIVED,j))}_onIOSeeked(){var j;(j=this._remuxer)===null||j===void 0||j.insertDiscontinuity()}_onIOComplete(j){var T,F;const S=j+1;S<(((F=(T=this._mediaDataSource)===null||T===void 0?void 0:T.segments)===null||F===void 0?void 0:F.length)||0)?(this._internalAbort(),this._remuxer&&this._remuxer.flushStashedSamples(),this._loadSegment(S)):(this._remuxer&&this._remuxer.flushStashedSamples(),this._emitter.emit(Jt.Z.LOADING_COMPLETE),this._disableStatisticsReporter())}_onIORedirect(j){var T;const F=(T=this._ioctl)===null||T===void 0?void 0:T.extraData;this._mediaDataSource.segments&&(this._mediaDataSource.segments[F].redirectedURL=j)}_onIORecoveredEarlyEof(){this._emitter.emit(Jt.Z.RECOVERED_EARLY_EOF)}_onIOException(j,T){C.Z.e(this.TAG,`IOException: type = ${j}, code = ${T.code}, msg = ${T.msg}`),this._emitter.emit(Jt.Z.IO_ERROR,j,T),this._disableStatisticsReporter()}_onDemuxException(j,T){C.Z.e(this.TAG,`DemuxException: type = ${j}, info = ${T}`),this._emitter.emit(Jt.Z.DEMUX_ERROR,j,T)}_onRemuxerInitSegmentArrival(j,T){this._emitter.emit(Jt.Z.INIT_SEGMENT,j,T)}_onRemuxerMediaSegmentArrival(j,T){if(this._pendingSeekTime==null&&(this._emitter.emit(Jt.Z.MEDIA_SEGMENT,j,T),this._pendingResolveSeekPoint!=null&&j==="video")){const F=T.info.syncPoints;let S=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,y.Z.safari&&F.length>0&&F[0].originalDts===S&&(S=F[0].pts),this._emitter.emit(Jt.Z.RECOMMEND_SEEKPOINT,S)}}_enableStatisticsReporter(){this._statisticsReporter==null&&this._reportStatisticsInfo&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}_disableStatisticsReporter(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}_reportSegmentMediaInfo(j){var T,F,S,be;const _e=!((T=this._mediaInfo)===null||T===void 0)&&T.segments?(F=this._mediaInfo)===null||F===void 0?void 0:F.segments[j]:{},Me=Object.assign({},_e);Me.duration=(S=this._mediaInfo)===null||S===void 0?void 0:S.duration,Me.segmentCount=(be=this._mediaInfo)===null||be===void 0?void 0:be.segmentCount,delete Me.segments,delete Me.keyframesIndex,this._emitter.emit(Jt.Z.MEDIA_INFO,Me)}_reportStatisticsInfo(){var j,T,F,S,be,_e;const Me={};Me.url=(j=this._ioctl)===null||j===void 0?void 0:j.currentURL,Me.hasRedirect=(T=this._ioctl)===null||T===void 0?void 0:T.hasRedirect,Me.hasRedirect&&(Me.redirectedURL=(F=this._ioctl)===null||F===void 0?void 0:F.currentRedirectedURL),Me.speed=(S=this._ioctl)===null||S===void 0?void 0:S.currentSpeed,Me.loaderType=(be=this._ioctl)===null||be===void 0?void 0:be.loaderType,Me.currentSegmentIndex=this._currentSegmentIndex,Me.totalSegmentCount=(_e=this._mediaDataSource.segments)===null||_e===void 0?void 0:_e.length,this._emitter.emit(Jt.Z.STATISTICS_INFO,Me)}}},473:(l,d,c)=>{c.d(d,{Z:()=>E});const E={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},638:(l,d,c)=>{var E=c(278),C=c(943),y=c(473);let w=null;const g=function(M,Te){self.postMessage({msg:"logcat_callback",data:{type:M,logcat:Te}})};function p(M,Te){const ze={msg:y.Z.INIT_SEGMENT,data:{type:M,data:Te}};self.postMessage(ze,[Te.data])}function te(M,Te){const ze={msg:y.Z.MEDIA_SEGMENT,data:{type:M,data:Te}};self.postMessage(ze,[Te.data])}function ae(){const M={msg:y.Z.LOADING_COMPLETE};self.postMessage(M)}function de(){const M={msg:y.Z.RECOVERED_EARLY_EOF};self.postMessage(M)}function ie(M){const Te={msg:y.Z.MEDIA_INFO,data:M};self.postMessage(Te)}function we(M){const Te={msg:y.Z.METADATA_ARRIVED,data:M};self.postMessage(Te)}function Ve(M){const Te={msg:y.Z.SCRIPTDATA_ARRIVED,data:M};self.postMessage(Te)}function ue(M){const Te={msg:y.Z.TIMED_ID3_METADATA_ARRIVED,data:M};self.postMessage(Te)}function x(M){const Te={msg:y.Z.SMPTE2038_METADATA_ARRIVED,data:M};self.postMessage(Te)}function O(M){const Te={msg:y.Z.SCTE35_METADATA_ARRIVED,data:M};self.postMessage(Te)}function ne(M){const Te={msg:y.Z.PES_PRIVATE_DATA_DESCRIPTOR,data:M};self.postMessage(Te)}function Q(M){const Te={msg:y.Z.PES_PRIVATE_DATA_ARRIVED,data:M};self.postMessage(Te)}function ye(M){const Te={msg:y.Z.STATISTICS_INFO,data:M};self.postMessage(Te)}function se(M,Te){self.postMessage({msg:y.Z.IO_ERROR,data:{type:M,info:Te}})}function Ze(M,Te){self.postMessage({msg:y.Z.DEMUX_ERROR,data:{type:M,info:Te}})}function Qe(M){self.postMessage({msg:y.Z.RECOMMEND_SEEKPOINT,data:M})}self.addEventListener("message",function(M){switch(M.data.cmd){case"init":w=new C.Z(M.data.param[0],M.data.param[1]),w.on(y.Z.IO_ERROR,se),w.on(y.Z.DEMUX_ERROR,Ze),w.on(y.Z.INIT_SEGMENT,p),w.on(y.Z.MEDIA_SEGMENT,te),w.on(y.Z.LOADING_COMPLETE,ae),w.on(y.Z.RECOVERED_EARLY_EOF,de),w.on(y.Z.MEDIA_INFO,ie),w.on(y.Z.METADATA_ARRIVED,we),w.on(y.Z.SCRIPTDATA_ARRIVED,Ve),w.on(y.Z.TIMED_ID3_METADATA_ARRIVED,ue),w.on(y.Z.SMPTE2038_METADATA_ARRIVED,x),w.on(y.Z.SCTE35_METADATA_ARRIVED,O),w.on(y.Z.PES_PRIVATE_DATA_DESCRIPTOR,ne),w.on(y.Z.PES_PRIVATE_DATA_ARRIVED,Q),w.on(y.Z.STATISTICS_INFO,ye),w.on(y.Z.RECOMMEND_SEEKPOINT,Qe);break;case"destroy":w&&(w.destroy(),w=null),self.postMessage({msg:"destroyed"});break;case"start":w==null||w.start();break;case"stop":w==null||w.stop();break;case"seek":w==null||w.seek(M.data.param);break;case"pause":w==null||w.pause();break;case"resume":w==null||w.resume();break;case"logging_config":{const Te=M.data.param;E.Z.applyConfig(Te),Te.enableCallback===!0?E.Z.addLogListener(g):E.Z.removeLogListener(g);break}}})},898:(l,d,c)=>{c.d(d,{Z:()=>E});const E={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},578:(l,d,c)=>{c.d(d,{default:()=>me});var E=c(575);const C={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,liveBufferLatencyChasing:!1,liveBufferLatencyMaxLatency:1.5,liveBufferLatencyMinRemain:.5,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1,headers:void 0,customLoader:void 0,url:void 0,redirectedURL:void 0,cors:!1};function y(){return Object.assign({},C)}class w{static supportMSEH264Playback(){var Y;return(Y=window.MediaSource)===null||Y===void 0?void 0:Y.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}static supportMSEH265Playback(){var Y;return(Y=window.MediaSource)===null||Y===void 0?void 0:Y.isTypeSupported('video/mp4; codecs="hvc1.1.6.L93.B0"')}static supportNetworkStreamIO(){const Y=new E.Z({},y()),Oe=Y.loaderType;return Y.destroy(),Oe==="fetch-stream-loader"||Oe==="xhr-moz-chunked-loader"}static getNetworkLoaderTypeName(){const Y=new E.Z({},y()),Oe=Y.loaderType;return Y.destroy(),Oe}static supportNativeMediaPlayback(Y){w.videoElement===void 0&&(w.videoElement=window.document.createElement("video"));const Oe=w.videoElement.canPlayType(Y);return Oe==="probably"||Oe==="maybe"}static getFeatureList(){const Y={msePlayback:!1,mseLivePlayback:!1,mseH265Playback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeMP4H265Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return Y.msePlayback=w.supportMSEH264Playback(),Y.networkStreamIO=w.supportNetworkStreamIO(),Y.networkLoaderName=w.getNetworkLoaderTypeName()||"",Y.mseLivePlayback=Y.msePlayback&&Y.networkStreamIO,Y.mseH265Playback=w.supportMSEH265Playback(),Y.nativeMP4H264Playback=w.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),Y.nativeMP4H265Playback=w.supportNativeMediaPlayback('video/mp4; codecs="hvc1.1.6.L93.B0"'),Y.nativeWebmVP8Playback=w.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),Y.nativeWebmVP9Playback=w.supportNativeMediaPlayback('video/webm; codecs="vp9"'),Y}}const g=w;var p=c(108),te=c(99),ae=c(645),de=c(479);const ie={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",METADATA_ARRIVED:"metadata_arrived",SCRIPTDATA_ARRIVED:"scriptdata_arrived",TIMED_ID3_METADATA_ARRIVED:"timed_id3_metadata_arrived",SMPTE2038_METADATA_ARRIVED:"smpte2038_metadata_arrived",SCTE35_METADATA_ARRIVED:"scte35_metadata_arrived",PES_PRIVATE_DATA_DESCRIPTOR:"pes_private_data_descriptor",PES_PRIVATE_DATA_ARRIVED:"pes_private_data_arrived",STATISTICS_INFO:"statistics_info"},we=function(){const P=ENTRY_MODULE,Y={};function Oe(fe){if(Y[fe])return Y[fe].exports;const I=Y[fe]={exports:{}};return P[fe](I,I.exports,Oe),I.exports}Oe.m=P,Oe.n=fe=>{const I=fe&&fe.__esModule?()=>fe.default:()=>fe;return Oe.d(I,{a:I}),I},Oe.d=(fe,I)=>{for(const L in I)Oe.o(I,L)&&!Oe.o(fe,L)&&Object.defineProperty(fe,L,{enumerable:!0,get:I[L]})},Oe.g=function(){if(Object.prototype.toString.call(globalThis)==="[object Object]")return globalThis;try{return this||new Function("return this")()}catch{if(Object.prototype.toString.call(window)==="[object Object]")return window}}(),Oe.o=(fe,I)=>Object.prototype.hasOwnProperty.call(fe,I),Oe.r=fe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(fe,"__esModule",{value:!0})};const N=Oe(ENTRY_MODULE);return N.default||N};we.toString();const Ve="[\\.|\\-|\\+|\\w|/|@]+",ue="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+Ve+").*?\\)";function x(P){return(P+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function O(P,Y,Oe){const N={};N[Oe]=[];const fe=Y.toString(),I=fe.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||fe.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!I)return N;const L=I[1];let re,J=new RegExp("(\\\\n|\\W)"+x(L)+ue,"g");for(;re=J.exec(fe);)re[3]!=="dll-reference"&&N[Oe].push(re[3]);for(J=new RegExp("\\("+x(L)+'\\("(dll-reference\\s('+Ve+'))"\\)\\)'+ue,"g");re=J.exec(fe);)P[re[2]]||(N[Oe].push(re[1]),P[re[2]]=c(re[1]).m),N[re[2]]=N[re[2]]||[],N[re[2]].push(re[4]);const De=Object.keys(N);for(let et=0;et<De.length;et++)for(let R=0;R<N[De[et]].length;R++)Ye=N[De[et]][R],isNaN(1*Ye)||(N[De[et]][R]=1*N[De[et]][R]);var Ye;return N}function ne(P){return Object.keys(P).reduce((Y,Oe)=>Y||P[Oe].length>0,!1)}function Q(P,Y,Oe,N){const fe=P[N].map(L=>`"${L}": ${Y[N][L].toString()}`).join(","),I=we.toString().split("ENTRY_MODULE");return`${I[0]}{${fe}}${I[1]}"${Oe}"${I[2]}`}function ye(P,Y){Y=Y||{};const Oe={main:c.m},N=Y.all?{main:Object.keys(Oe.main)}:function(J,De){const Ye={main:[De]},et={main:[]},R={main:{}};for(;ne(Ye);){const He=Object.keys(Ye);for(let G=0;G<He.length;G++){const ge=He[G],xe=Ye[ge].pop();if(R[ge]=R[ge]||{},R[ge][xe]||!J[ge][xe])continue;R[ge][xe]=!0,et[ge]=et[ge]||[],et[ge].push(xe);const ke=O(J,J[ge][xe],ge),ce=Object.keys(ke);for(let X=0;X<ce.length;X++)Ye[ce[X]]=Ye[ce[X]]||[],Ye[ce[X]]=Ye[ce[X]].concat(ke[ce[X]])}}return et}(Oe,P);let fe="";Object.keys(N).filter(J=>J!=="main").forEach(J=>{let De=0;for(;N[J][De];)De++;N[J].push(De),Oe[J][De]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",fe+=`var ${J} = (${Q(N,Oe,De,modules)})();
`}),fe+=`(${Q(N,Oe,P,"main")})();`;const I=new window.Blob([fe],{type:"text/javascript"});if(Y.bare)return I;const L=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(I),re=new window.Worker(L);return re.objectURL=L,re}var se=c(278),Ze=c(943),Qe=c(473),M=c(994);const Te=class{constructor(P,Y){if(this.TAG="Transmuxer",this._workerDestroying=!1,this._controller=null,this._emitter=new te.EventEmitter,Y.enableWorker&&typeof Worker<"u")try{this._worker=this._worker=ye(638),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[P,Y]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},se.Z.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:se.Z.getConfig()})}catch{ae.Z.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new Ze.Z(P,Y)}else this._controller=new Ze.Z(P,Y);if(this._controller){const Oe=this._controller;Oe==null||Oe.on(Qe.Z.IO_ERROR,this._onIOError.bind(this)),Oe==null||Oe.on(Qe.Z.DEMUX_ERROR,this._onDemuxError.bind(this)),Oe==null||Oe.on(Qe.Z.INIT_SEGMENT,this._onInitSegment.bind(this)),Oe==null||Oe.on(Qe.Z.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),Oe==null||Oe.on(Qe.Z.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),Oe==null||Oe.on(Qe.Z.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),Oe==null||Oe.on(Qe.Z.MEDIA_INFO,this._onMediaInfo.bind(this)),Oe==null||Oe.on(Qe.Z.METADATA_ARRIVED,this._onMetaDataArrived.bind(this)),Oe==null||Oe.on(Qe.Z.SCRIPTDATA_ARRIVED,this._onScriptDataArrived.bind(this)),Oe==null||Oe.on(Qe.Z.TIMED_ID3_METADATA_ARRIVED,this._onTimedID3MetadataArrived.bind(this)),Oe==null||Oe.on(Qe.Z.SMPTE2038_METADATA_ARRIVED,this._onSMPTE2038MetadataArrived.bind(this)),Oe==null||Oe.on(Qe.Z.SCTE35_METADATA_ARRIVED,this._onSCTE35MetadataArrived.bind(this)),Oe==null||Oe.on(Qe.Z.PES_PRIVATE_DATA_DESCRIPTOR,this._onPESPrivateDataDescriptor.bind(this)),Oe==null||Oe.on(Qe.Z.PES_PRIVATE_DATA_ARRIVED,this._onPESPrivateDataArrived.bind(this)),Oe==null||Oe.on(Qe.Z.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),Oe==null||Oe.on(Qe.Z.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}destroy(){var P;this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),se.Z.removeListener(this.e.onLoggingConfigChanged),this.e=null):((P=this._controller)===null||P===void 0||P.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}on(P,Y){this._emitter.addListener(P,Y)}off(P,Y){this._emitter.removeListener(P,Y)}hasWorker(){return this._worker!=null}open(){var P;this._worker?this._worker.postMessage({cmd:"start"}):(P=this._controller)===null||P===void 0||P.start()}close(){var P;this._worker?this._worker.postMessage({cmd:"stop"}):(P=this._controller)===null||P===void 0||P.stop()}seek(P){var Y;this._worker?this._worker.postMessage({cmd:"seek",param:P}):(Y=this._controller)===null||Y===void 0||Y.seek(P)}pause(){var P;this._worker?this._worker.postMessage({cmd:"pause"}):(P=this._controller)===null||P===void 0||P.pause()}resume(){var P;this._worker?this._worker.postMessage({cmd:"resume"}):(P=this._controller)===null||P===void 0||P.resume()}_onInitSegment(P,Y){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.INIT_SEGMENT,P,Y)})}_onMediaSegment(P,Y){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.MEDIA_SEGMENT,P,Y)})}_onLoadingComplete(){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.LOADING_COMPLETE)})}_onRecoveredEarlyEof(){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.RECOVERED_EARLY_EOF)})}_onMediaInfo(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.MEDIA_INFO,P)})}_onMetaDataArrived(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.METADATA_ARRIVED,P)})}_onScriptDataArrived(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.SCRIPTDATA_ARRIVED,P)})}_onTimedID3MetadataArrived(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.TIMED_ID3_METADATA_ARRIVED,P)})}_onSMPTE2038MetadataArrived(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.SMPTE2038_METADATA_ARRIVED,P)})}_onSCTE35MetadataArrived(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.SCTE35_METADATA_ARRIVED,P)})}_onPESPrivateDataDescriptor(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.PES_PRIVATE_DATA_DESCRIPTOR,P)})}_onPESPrivateDataArrived(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.PES_PRIVATE_DATA_ARRIVED,P)})}_onStatisticsInfo(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.STATISTICS_INFO,P)})}_onIOError(P,Y){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.IO_ERROR,P,Y)})}_onDemuxError(P,Y){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.DEMUX_ERROR,P,Y)})}_onRecommendSeekpoint(P){Promise.resolve().then(()=>{this._emitter.emit(Qe.Z.RECOMMEND_SEEKPOINT,P)})}_onLoggingConfigChanged(P){this._worker&&this._worker.postMessage({cmd:"logging_config",param:P})}_onWorkerMessage(P){const Y=P.data,Oe=Y==null?void 0:Y.data;if(Y.msg==="destroyed"||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(Y.msg){case Qe.Z.INIT_SEGMENT:case Qe.Z.MEDIA_SEGMENT:this._emitter.emit(Y.msg,Oe.type,Oe.data);break;case Qe.Z.LOADING_COMPLETE:case Qe.Z.RECOVERED_EARLY_EOF:this._emitter.emit(Y.msg);break;case Qe.Z.MEDIA_INFO:Object.setPrototypeOf(Oe,M.Z.prototype),this._emitter.emit(Y.msg,Oe);break;case Qe.Z.METADATA_ARRIVED:case Qe.Z.SCRIPTDATA_ARRIVED:case Qe.Z.TIMED_ID3_METADATA_ARRIVED:case Qe.Z.SMPTE2038_METADATA_ARRIVED:case Qe.Z.SCTE35_METADATA_ARRIVED:case Qe.Z.PES_PRIVATE_DATA_DESCRIPTOR:case Qe.Z.PES_PRIVATE_DATA_ARRIVED:case Qe.Z.STATISTICS_INFO:this._emitter.emit(Y.msg,Oe);break;case Qe.Z.IO_ERROR:case Qe.Z.DEMUX_ERROR:this._emitter.emit(Y.msg,Oe.type,Oe.info);break;case Qe.Z.RECOMMEND_SEEKPOINT:this._emitter.emit(Y.msg,Oe);break;case"logcat_callback":ae.Z.emitter.emit("log",Oe.type,Oe.logcat)}}},ze={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"};var oi=c(68),wi=c(411);const ui=class{constructor(P){this.TAG="MSEController",this._config=P,this._emitter=new te.EventEmitter,this._config.isLive&&this._config.autoCleanupSourceBuffer===void 0&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new oi.Vn}destroy(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}on(P,Y){this._emitter.addListener(P,Y)}off(P,Y){this._emitter.removeListener(P,Y)}attachMediaElement(P){if(this._mediaSource)throw new wi.rT("MediaSource has been attached to an HTMLMediaElement!");const Y=this._mediaSource=new window.MediaSource;Y.addEventListener("sourceopen",this.e.onSourceOpen),Y.addEventListener("sourceended",this.e.onSourceEnded),Y.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=P,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),P.src=this._mediaSourceObjectURL}detachMediaElement(){if(this._mediaSource){const P=this._mediaSource;for(const Y in this._sourceBuffers){const Oe=this._pendingSegments[Y];Oe.splice(0,Oe.length),this._pendingSegments[Y]=null,this._pendingRemoveRanges[Y]=null,this._lastInitSegments[Y]=null;const N=this._sourceBuffers[Y];if(N){if(P.readyState!=="closed"){try{P.removeSourceBuffer(N)}catch(fe){ae.Z.e(this.TAG,fe.message)}N==null||N.removeEventListener("error",this.e.onSourceBufferError),N==null||N.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)}this._mimeTypes[Y]=null,this._sourceBuffers[Y]=null}}if(P.readyState==="open")try{P.endOfStream()}catch(Y){ae.Z.e(this.TAG,Y.message)}P.removeEventListener("sourceopen",this.e.onSourceOpen),P.removeEventListener("sourceended",this.e.onSourceEnded),P.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}appendInitSegment(P,Y){var Oe;if(!this._mediaSource||this._mediaSource.readyState!=="open")return this._pendingSourceBufferInit.push(P),void this._pendingSegments[P.type].push(P);const N=P;let fe=`${N.container}`;N.codec&&N.codec.length>0&&(fe+=`;codecs=${N.codec}`);let I=!1;if(ae.Z.v(this.TAG,"Received Initialization Segment, mimeType: "+fe),this._lastInitSegments[N.type]=N,fe!==this._mimeTypes[N.type]){if(this._mimeTypes[N.type])ae.Z.v(this.TAG,`Notice: ${N.type} mimeType changed, origin: ${this._mimeTypes[N.type]||""}, target: ${fe}`);else{I=!0;try{const L=this._sourceBuffers[N.type]=this._mediaSource.addSourceBuffer(fe);L.addEventListener("error",this.e.onSourceBufferError),L.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(L){return ae.Z.e(this.TAG,L.message),void this._emitter.emit(ze.ERROR,{code:L.code,msg:L.message})}}this._mimeTypes[N.type]=fe}Y||this._pendingSegments[N.type].push(N),I||this._sourceBuffers[N.type]&&!(!((Oe=this._sourceBuffers[N.type])===null||Oe===void 0)&&Oe.updating)&&this._doAppendSegments(),de.Z.safari&&N.container==="audio/mpeg"&&N.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=N.mediaDuration/1e3,this._updateMediaSourceDuration())}appendMediaSegment(P){const Y=P;this._pendingSegments[Y.type].push(Y),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();const Oe=this._sourceBuffers[Y.type];!Oe||Oe.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}seek(P){var Y,Oe;for(const N in this._sourceBuffers){if(!this._sourceBuffers[N])continue;const fe=this._sourceBuffers[N];if(((Y=this._mediaSource)===null||Y===void 0?void 0:Y.readyState)==="open")try{fe==null||fe.abort()}catch(L){ae.Z.e(this.TAG,L.message)}this._idrList.clear();const I=this._pendingSegments[N];if(I.splice(0,I.length),((Oe=this._mediaSource)===null||Oe===void 0?void 0:Oe.readyState)!=="closed"){if(fe){for(let L=0;L<fe.buffered.length;L++){const re=fe.buffered.start(L),J=fe.buffered.end(L);this._pendingRemoveRanges[N].push({start:re,end:J})}fe!=null&&fe.updating||this._doRemoveRanges()}if(de.Z.safari){const L=this._lastInitSegments[N];L&&(this._pendingSegments[N].push(L),fe!=null&&fe.updating||this._doAppendSegments())}}}}endOfStream(){var P,Y;const Oe=this._mediaSource,N=this._sourceBuffers;Oe&&Oe.readyState==="open"?!((P=N.video)===null||P===void 0)&&P.updating||!((Y=N.audio)===null||Y===void 0)&&Y.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,Oe.endOfStream()):Oe&&Oe.readyState==="closed"&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}getNearestKeyframe(P){return this._idrList.getLastSyncPointBeforeDts(P)}_needCleanupSourceBuffer(){var P,Y;if(!this._config.autoCleanupSourceBuffer)return!1;const Oe=(P=this._mediaElement)===null||P===void 0?void 0:P.currentTime;for(const N in this._sourceBuffers){const fe=this._sourceBuffers[N];if(fe){const I=fe.buffered;if(I.length>=1&&Oe-I.start(0)>=(((Y=this._config)===null||Y===void 0?void 0:Y.autoCleanupMaxBackwardDuration)||0))return!0}}return!1}_doCleanupSourceBuffer(){var P,Y,Oe;const N=(P=this._mediaElement)===null||P===void 0?void 0:P.currentTime;for(const fe in this._sourceBuffers){const I=this._sourceBuffers[fe];if(I){const L=I.buffered;let re=!1;for(let J=0;J<L.length;J++){const De=L.start(J),Ye=L.end(J);if(De<=N&&N<Ye+3){if(N-De>=(((Y=this._config)===null||Y===void 0?void 0:Y.autoCleanupMaxBackwardDuration)||0)){re=!0;const et=N-(((Oe=this._config)===null||Oe===void 0?void 0:Oe.autoCleanupMinBackwardDuration)||0);this._pendingRemoveRanges[fe].push({start:De,end:et})}}else Ye<N&&(re=!0,this._pendingRemoveRanges[fe].push({start:De,end:Ye}))}re&&!I.updating&&this._doRemoveRanges()}}}_updateMediaSourceDuration(){var P,Y,Oe,N;const fe=this._sourceBuffers;if(((P=this._mediaElement)===null||P===void 0?void 0:P.readyState)===0||((Y=this._mediaSource)===null||Y===void 0?void 0:Y.readyState)!=="open"||!((Oe=fe.video)===null||Oe===void 0)&&Oe.updating||!((N=fe.audio)===null||N===void 0)&&N.updating)return;const I=this._mediaSource.duration,L=this._pendingMediaDuration;L>0&&(isNaN(I)||L>I)&&(ae.Z.v(this.TAG,`Update MediaSource duration from ${I} to ${L}`),this._mediaSource.duration=L),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}_doRemoveRanges(){var P;for(const Y in this._pendingRemoveRanges){if(!this._sourceBuffers[Y]||!((P=this._sourceBuffers[Y])===null||P===void 0)&&P.updating)continue;const Oe=this._sourceBuffers[Y],N=this._pendingRemoveRanges[Y];for(;N.length&&!(Oe!=null&&Oe.updating);){const fe=N.shift();Oe==null||Oe.remove(fe.start,fe.end)}}}_doAppendSegments(){var P,Y,Oe;const N=this._pendingSegments;for(const fe in N)if(this._sourceBuffers[fe]&&!(!((P=this._sourceBuffers[fe])===null||P===void 0)&&P.updating)&&N[fe].length>0){const I=N[fe].shift();if(I!=null&&I.timestampOffset){const L=((Y=this._sourceBuffers[fe])===null||Y===void 0?void 0:Y.timestampOffset)||0,re=I.timestampOffset/1e3;Math.abs(L-re)>.1&&(ae.Z.v(this.TAG,`Update MPEG audio timestampOffset from ${L} to ${re}`),this._sourceBuffers[fe]&&(this._sourceBuffers[fe].timestampOffset=re)),delete I.timestampOffset}if(!I.data||I.data.byteLength===0)continue;try{(Oe=this._sourceBuffers[fe])===null||Oe===void 0||Oe.appendBuffer(I.data),this._isBufferFull=!1,fe==="video"&&I.hasOwnProperty("info")&&this._idrList.appendArray(I.info.syncPoints)}catch(L){this._pendingSegments[fe].unshift(I),L.code===22?(this._isBufferFull||this._emitter.emit(ze.BUFFER_FULL),this._isBufferFull=!0):(ae.Z.e(this.TAG,L.message),this._emitter.emit(ze.ERROR,{code:L.code,msg:L.message}))}}}_onSourceOpen(){var P;if(ae.Z.v(this.TAG,"MediaSource onSourceOpen"),(P=this._mediaSource)===null||P===void 0||P.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0){const Y=this._pendingSourceBufferInit;for(;Y.length;){const Oe=Y.shift();this.appendInitSegment(Oe,!0)}}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(ze.SOURCE_OPEN)}_onSourceEnded(){ae.Z.v(this.TAG,"MediaSource onSourceEnded")}_onSourceClose(){ae.Z.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&this.e!=null&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}_hasPendingSegments(){const P=this._pendingSegments;return P.video.length>0||P.audio.length>0}_hasPendingRemoveRanges(){const P=this._pendingRemoveRanges;return P.video.length>0||P.audio.length>0}_onSourceBufferUpdateEnd(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(ze.UPDATE_END)}_onSourceBufferError(P){ae.Z.e(this.TAG,`SourceBuffer Error: ${P}`)}};var di=c(898);const zi={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},$e={NETWORK_EXCEPTION:p.nm.EXCEPTION,NETWORK_STATUS_CODE_INVALID:p.nm.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:p.nm.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:p.nm.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:di.Z.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:di.Z.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:di.Z.CODEC_UNSUPPORTED};var st=function(P,Y,Oe,N){return new(Oe||(Oe=Promise))(function(fe,I){function L(De){try{J(N.next(De))}catch(Ye){I(Ye)}}function re(De){try{J(N.throw(De))}catch(Ye){I(Ye)}}function J(De){var Ye;De.done?fe(De.value):(Ye=De.value,Ye instanceof Oe?Ye:new Oe(function(et){et(Ye)})).then(L,re)}J((N=N.apply(P,Y||[])).next())})};const Ke=class{constructor(P,Y){var Oe,N,fe;this.TAG="MSEPlayer",this._type="MSEPlayer",this._emitter=new te.EventEmitter,this._config=y(),typeof Y=="object"&&Object.assign(this._config,Y);const I=P.type.toLowerCase();if(I!=="mse"&&I!=="mpegts"&&I!=="m2ts"&&I!=="flv")throw new wi.OC("MSEPlayer requires an mpegts/m2ts/flv MediaDataSource input!");P.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=P,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;const L=de.Z.chrome&&(de.Z.version&&((Oe=de.Z.version)===null||Oe===void 0?void 0:Oe.major)<50||de.Z.version&&((N=de.Z===null||de.Z===void 0?void 0:de.Z.version)===null||N===void 0?void 0:N.major)===50&&(((fe=de.Z===null||de.Z===void 0?void 0:de.Z.version)===null||fe===void 0?void 0:fe.build)||-1)<2661);this._alwaysSeekKeyframe=!!(L||de.Z.msedge||de.Z.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}destroy(){this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}on(P,Y){P===ie.MEDIA_INFO?this._mediaInfo!=null&&Promise.resolve().then(()=>{this._emitter.emit(ie.MEDIA_INFO,this.mediaInfo)}):P===ie.STATISTICS_INFO&&this._statisticsInfo!=null&&Promise.resolve().then(()=>{this._emitter.emit(ie.STATISTICS_INFO,this.statisticsInfo)}),this._emitter.addListener(P,Y)}off(P,Y){this._emitter.removeListener(P,Y)}attachMediaElement(P){var Y,Oe,N,fe,I;if(this._mediaElement=P,P.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),P.addEventListener("seeking",this.e.onvSeeking),P.addEventListener("canplay",this.e.onvCanPlay),P.addEventListener("stalled",this.e.onvStalled),P.addEventListener("progress",this.e.onvProgress),this._msectl=new ui(this._config),(Y=this._msectl)===null||Y===void 0||Y.on(ze.UPDATE_END,this._onmseUpdateEnd.bind(this)),(Oe=this._msectl)===null||Oe===void 0||Oe.on(ze.BUFFER_FULL,this._onmseBufferFull.bind(this)),(N=this._msectl)===null||N===void 0||N.on(ze.SOURCE_OPEN,()=>{this._mseSourceOpened=!0,this._hasPendingLoad&&(this._hasPendingLoad=!1,this.load())}),(fe=this._msectl)===null||fe===void 0||fe.on(ze.ERROR,L=>{this._emitter.emit(ie.ERROR,zi.MEDIA_ERROR,$e.MEDIA_MSE_ERROR,L)}),(I=this._msectl)===null||I===void 0||I.attachMediaElement(P),this._pendingSeekTime!=null)try{P.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}}detachMediaElement(){var P;this._mediaElement&&((P=this._msectl)===null||P===void 0||P.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}load(){if(!this._mediaElement)throw new wi.rT("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new wi.rT("MSEPlayer.load() has been called, please call unload() first!");this._hasPendingLoad||(!this._config.deferLoadAfterSourceOpen||this._mseSourceOpened?(this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new Te(this._mediaDataSource,this._config),this._transmuxer.on(Qe.Z.INIT_SEGMENT,(P,Y)=>{var Oe;(Oe=this._msectl)===null||Oe===void 0||Oe.appendInitSegment(Y)}),this._transmuxer.on(Qe.Z.MEDIA_SEGMENT,(P,Y)=>{var Oe,N,fe;if((Oe=this._msectl)===null||Oe===void 0||Oe.appendMediaSegment(Y),this._config.lazyLoad&&!this._config.isLive){const I=(N=this._mediaElement)===null||N===void 0?void 0:N.currentTime;Y.info.endDts>=1e3*(I+(((fe=this._config)===null||fe===void 0?void 0:fe.lazyLoadMaxDuration)||0))&&this._progressChecker==null&&(ae.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}),this._transmuxer.on(Qe.Z.LOADING_COMPLETE,()=>{var P;(P=this._msectl)===null||P===void 0||P.endOfStream(),this._emitter.emit(ie.LOADING_COMPLETE)}),this._transmuxer.on(Qe.Z.RECOVERED_EARLY_EOF,()=>{this._emitter.emit(ie.RECOVERED_EARLY_EOF)}),this._transmuxer.on(Qe.Z.IO_ERROR,(P,Y)=>{this._emitter.emit(ie.ERROR,zi.NETWORK_ERROR,P,Y)}),this._transmuxer.on(Qe.Z.DEMUX_ERROR,(P,Y)=>{this._emitter.emit(ie.ERROR,zi.MEDIA_ERROR,P,{code:-1,msg:Y})}),this._transmuxer.on(Qe.Z.MEDIA_INFO,P=>{this._mediaInfo=P,this._emitter.emit(ie.MEDIA_INFO,Object.assign({},P))}),this._transmuxer.on(Qe.Z.METADATA_ARRIVED,P=>{this._emitter.emit(ie.METADATA_ARRIVED,P)}),this._transmuxer.on(Qe.Z.SCRIPTDATA_ARRIVED,P=>{this._emitter.emit(ie.SCRIPTDATA_ARRIVED,P)}),this._transmuxer.on(Qe.Z.TIMED_ID3_METADATA_ARRIVED,P=>{this._emitter.emit(ie.TIMED_ID3_METADATA_ARRIVED,P)}),this._transmuxer.on(Qe.Z.SMPTE2038_METADATA_ARRIVED,P=>{this._emitter.emit(ie.SMPTE2038_METADATA_ARRIVED,P)}),this._transmuxer.on(Qe.Z.SCTE35_METADATA_ARRIVED,P=>{this._emitter.emit(ie.SCTE35_METADATA_ARRIVED,P)}),this._transmuxer.on(Qe.Z.PES_PRIVATE_DATA_DESCRIPTOR,P=>{this._emitter.emit(ie.PES_PRIVATE_DATA_DESCRIPTOR,P)}),this._transmuxer.on(Qe.Z.PES_PRIVATE_DATA_ARRIVED,P=>{this._emitter.emit(ie.PES_PRIVATE_DATA_ARRIVED,P)}),this._transmuxer.on(Qe.Z.STATISTICS_INFO,P=>{this._statisticsInfo=this._fillStatisticsInfo(P),this._emitter.emit(ie.STATISTICS_INFO,Object.assign({},this._statisticsInfo))}),this._transmuxer.on(Qe.Z.RECOMMEND_SEEKPOINT,P=>{this._mediaElement&&!this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=P/1e3)}),this._transmuxer.open()):this._hasPendingLoad=!0)}unload(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}play(){var P;return st(this,void 0,void 0,function*(){return yield(P=this._mediaElement)===null||P===void 0?void 0:P.play()})}pause(){var P;(P=this._mediaElement)===null||P===void 0||P.pause()}get type(){return this._type}get buffered(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.buffered}get duration(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.duration}get volume(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.volume}set volume(P){this._mediaElement&&(this._mediaElement.volume=P)}get muted(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.muted}set muted(P){this._mediaElement&&(this._mediaElement.muted=P)}get currentTime(){return this._mediaElement?this._mediaElement.currentTime:0}set currentTime(P){this._mediaElement?this._internalSeek(P):this._pendingSeekTime=P}get mediaInfo(){return Object.assign({},this._mediaInfo)}get statisticsInfo(){return this._statisticsInfo==null&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),Object.assign({},this._statisticsInfo)}_fillStatisticsInfo(P){if(P.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return P;let Y=!0,Oe=0,N=0;if(this._mediaElement.getVideoPlaybackQuality){const fe=this._mediaElement.getVideoPlaybackQuality();Oe=fe.totalVideoFrames,N=fe.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!==void 0?(Oe=this._mediaElement.webkitDecodedFrameCount,N=this._mediaElement.webkitDroppedFrameCount):Y=!1;return Y&&(P.decodedFrames=Oe,P.droppedFrames=N),P}_onmseUpdateEnd(){var P,Y,Oe,N;const fe=(P=this._mediaElement)===null||P===void 0?void 0:P.buffered,I=((Y=this._mediaElement)===null||Y===void 0?void 0:Y.currentTime)||0;if(this._config.isLive&&this._config.liveBufferLatencyChasing&&(fe==null?void 0:fe.length)>0&&!(!((Oe=this._mediaElement)===null||Oe===void 0)&&Oe.paused)){const re=fe.end(fe.length-1);if(re>(((N=this._config)===null||N===void 0?void 0:N.liveBufferLatencyMaxLatency)||0)&&re-I>(this._config.liveBufferLatencyMaxLatency||0)){const J=re-(this._config.liveBufferLatencyMinRemain||0);this.currentTime=J}}if(!this._config.lazyLoad||this._config.isLive)return;let L=0;for(let re=0;re<fe.length;re++){const J=fe.start(re),De=fe.end(re);if(J<=I&&I<De){L=De;break}}L>=I+(this._config.lazyLoadMaxDuration||0)&&this._progressChecker==null&&(ae.Z.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}_onmseBufferFull(){ae.Z.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),this._progressChecker==null&&this._suspendTransmuxer()}_suspendTransmuxer(){this._transmuxer&&(this._transmuxer.pause(),this._progressChecker==null&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}_checkProgressAndResume(){var P,Y,Oe;const N=((P=this._mediaElement)===null||P===void 0?void 0:P.currentTime)||0,fe=(Y=this._mediaElement)===null||Y===void 0?void 0:Y.buffered;let I=!1;for(let L=0;L<fe.length;L++){const re=fe.start(L),J=fe.end(L);if(N>=re&&N<J){N>=J-(this._config.lazyLoadRecoverDuration||0)&&(I=!0);break}}I&&(window.clearInterval(this._progressChecker),this._progressChecker=null,I&&(ae.Z.v(this.TAG,"Continue loading from paused position"),(Oe=this._transmuxer)===null||Oe===void 0||Oe.resume()))}_isTimepointBuffered(P){var Y;const Oe=(Y=this._mediaElement)===null||Y===void 0?void 0:Y.buffered;for(let N=0;N<Oe.length;N++){const fe=Oe.start(N),I=Oe.end(N);if(P>=fe&&P<I)return!0}return!1}_internalSeek(P){var Y,Oe,N,fe,I;const L=this._isTimepointBuffered(P);let re=!1,J=0;if(P<1&&((Y=this._mediaElement)===null||Y===void 0?void 0:Y.buffered).length>0){const De=((Oe=this._mediaElement)===null||Oe===void 0?void 0:Oe.buffered).start(0);(De<1&&P<De||de.Z.safari)&&(re=!0,J=de.Z.safari?.1:De)}if(re)this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=J);else if(L){if(this._alwaysSeekKeyframe){const De=(N=this._msectl)===null||N===void 0?void 0:N.getNearestKeyframe(Math.floor(1e3*P));this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=De!=null?De.dts/1e3:P)}else this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=P);this._progressChecker!=null&&this._checkProgressAndResume()}else this._progressChecker!=null&&(window.clearInterval(this._progressChecker),this._progressChecker=null),(fe=this._msectl)===null||fe===void 0||fe.seek(P),(I=this._transmuxer)===null||I===void 0||I.seek(Math.floor(1e3*P)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=P))}_checkAndApplyUnbufferedSeekpoint(){var P,Y,Oe,N;if(this._seekpointRecord)if((((P=this._seekpointRecord)===null||P===void 0?void 0:P.recordTime)||0)<=this._now()-100){const fe=(Y=this._mediaElement)===null||Y===void 0?void 0:Y.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(fe)||(this._progressChecker!=null&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),(Oe=this._msectl)===null||Oe===void 0||Oe.seek(fe),(N=this._transmuxer)===null||N===void 0||N.seek(Math.floor(1e3*fe)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=fe)))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}_checkAndResumeStuckPlayback(P){const Y=this._mediaElement;if(P||!this._receivedCanPlay||Y.readyState<2){const Oe=Y.buffered;Oe.length>0&&Y.currentTime<Oe.start(0)&&(ae.Z.w(this.TAG,`Playback seems stuck at ${Y.currentTime}, seek to ${Oe.start(0)}`),this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=Oe.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress)))}else this._mediaElement&&this._mediaElement.removeEventListener("progress",this.e.onvProgress)}_onvLoadedMetadata(P){this._pendingSeekTime!=null&&(this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime),this._pendingSeekTime=null)}_onvSeeking(P){var Y,Oe,N;const fe=(Y=this._mediaElement)===null||Y===void 0?void 0:Y.currentTime,I=(Oe=this._mediaElement)===null||Oe===void 0?void 0:Oe.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(fe<1&&I.length>0){const L=I.start(0);if(L<1&&fe<L||de.Z.safari)return this._requestSetTime=!0,void(this._mediaElement&&(this._mediaElement.currentTime=de.Z.safari?.1:L))}if(this._isTimepointBuffered(fe)){if(this._alwaysSeekKeyframe){const L=(N=this._msectl)===null||N===void 0?void 0:N.getNearestKeyframe(Math.floor(1e3*fe));L!=null&&(this._requestSetTime=!0,this._mediaElement&&(this._mediaElement.currentTime=L.dts/1e3))}this._progressChecker!=null&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:fe,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}}_onvCanPlay(P){var Y;this._receivedCanPlay=!0,(Y=this._mediaElement)===null||Y===void 0||Y.removeEventListener("canplay",this.e.onvCanPlay)}_onvStalled(P){this._checkAndResumeStuckPlayback(!0)}_onvProgress(P){this._checkAndResumeStuckPlayback()}};var Ne=function(P,Y,Oe,N){return new(Oe||(Oe=Promise))(function(fe,I){function L(De){try{J(N.next(De))}catch(Ye){I(Ye)}}function re(De){try{J(N.throw(De))}catch(Ye){I(Ye)}}function J(De){var Ye;De.done?fe(De.value):(Ye=De.value,Ye instanceof Oe?Ye:new Oe(function(et){et(Ye)})).then(L,re)}J((N=N.apply(P,Y||[])).next())})};const at=class{constructor(P,Y){this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new te.EventEmitter,this._config=y(),typeof Y=="object"&&Object.assign(this._config,Y);const Oe=P.type.toLowerCase();if(Oe==="mse"||Oe==="mpegts"||Oe==="m2ts"||Oe==="flv")throw new wi.OC("NativePlayer does't support mse/mpegts/m2ts/flv MediaDataSource input!");if(P.hasOwnProperty("segments"))throw new wi.OC(`NativePlayer(${P.type}) doesn't support multipart playback!`);this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=P,this._mediaElement=null}destroy(){var P;this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,(P=this._emitter)===null||P===void 0||P.removeAllListeners(),this._emitter=null}on(P,Y){P===ie.MEDIA_INFO?this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(()=>{this._emitter.emit(ie.MEDIA_INFO,this.mediaInfo)}):P===ie.STATISTICS_INFO&&this._mediaElement!=null&&this._mediaElement.readyState!==0&&Promise.resolve().then(()=>{this._emitter.emit(ie.STATISTICS_INFO,this.statisticsInfo)}),this._emitter.addListener(P,Y)}off(P,Y){this._emitter.removeListener(P,Y)}attachMediaElement(P){if(this._mediaElement=P,P.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._pendingSeekTime!=null)try{P.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch{}}detachMediaElement(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}load(){var P;if(!this._mediaElement)throw new wi.rT("HTMLMediaElement must be attached before load()!");this._mediaElement.src=((P=this._mediaDataSource)===null||P===void 0?void 0:P.url)||"",this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}unload(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),this._statisticsReporter!=null&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}play(){var P;return Ne(this,void 0,void 0,function*(){return yield(P=this._mediaElement)===null||P===void 0?void 0:P.play()})}pause(){var P;(P=this._mediaElement)===null||P===void 0||P.pause()}get type(){return this._type}get buffered(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.buffered}get duration(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.duration}get volume(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.volume}set volume(P){this._mediaElement&&(this._mediaElement.volume=P)}get muted(){var P;return(P=this._mediaElement)===null||P===void 0?void 0:P.muted}set muted(P){this._mediaElement&&(this._mediaElement.muted=P)}get currentTime(){return this._mediaElement?this._mediaElement.currentTime:0}set currentTime(P){this._mediaElement?this._mediaElement.currentTime=P:this._pendingSeekTime=P}get mediaInfo(){const P={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(P.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(P.width=this._mediaElement.videoWidth,P.height=this._mediaElement.videoHeight)),P}get statisticsInfo(){const P={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return P;let Y=!0,Oe=0,N=0;if(this._mediaElement.getVideoPlaybackQuality){const fe=this._mediaElement.getVideoPlaybackQuality();Oe=fe.totalVideoFrames,N=fe.droppedVideoFrames}else this._mediaElement.webkitDecodedFrameCount!==void 0?(Oe=this._mediaElement.webkitDecodedFrameCount,N=this._mediaElement.webkitDroppedFrameCount):Y=!1;return Y&&(P.decodedFrames=Oe,P.droppedFrames=N),P}_onvLoadedMetadata(P){this._pendingSeekTime!=null&&(this._mediaElement&&(this._mediaElement.currentTime=this._pendingSeekTime),this._pendingSeekTime=null),this._emitter.emit(ie.MEDIA_INFO,this.mediaInfo)}_reportStatisticsInfo(){this._emitter.emit(ie.STATISTICS_INFO,this.statisticsInfo)}},Ut={h264:1,h265:2,h266:4,vp8:8,vp9:16,av1:32},Wt=["h264","h265"],kt=P=>{const Y=P.split("?"),Oe=new URLSearchParams(Y[1]);return Oe.delete("vc"),Oe.set("vc",Wt.reduce((N,fe)=>N+(Ut[fe]||0),0).toString()),Y[0]+"?"+Oe.toString()},ee={createPlayer:function(P,Y){P!=null&&P.url&&(P.url=kt(P.url));const Oe=P;if(Oe==null||typeof Oe!="object")throw new wi.OC("MediaDataSource must be an javascript object!");if(!Object.prototype.hasOwnProperty.call(Oe,"type"))throw new wi.OC("MediaDataSource must has type field to indicate video file type!");switch(Oe.type){case"mse":case"mpegts":case"m2ts":case"flv":return new Ke(Oe,Y);default:return new at(Oe,Y)}},isSupported:function(){return g.supportMSEH264Playback()},getFeatureList:function(){return g.getFeatureList()},BaseLoader:p.fp,LoaderStatus:p.GM,LoaderErrors:p.nm,version:"",Events:ie,ErrorTypes:zi,ErrorDetails:$e,MSEPlayer:Ke,NativePlayer:at,LoggingControl:se.Z};Object.defineProperty(ee,"version",{enumerable:!0,get:function(){return"2.0.0"}});const me=ee},607:(l,d,c)=>{l.exports=c(578).default},575:(l,d,c)=>{c.d(d,{Z:()=>ne});var E=c(645);const C=class{constructor(){var Q;this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,!((Q=self.performance)===null||Q===void 0)&&Q.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}reset(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}addBytes(Q){this._firstCheckpoint===0?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=Q,this._totalBytes+=Q):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=Q,this._totalBytes+=Q):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=Q,this._totalBytes+=Q,this._lastCheckpoint=this._now())}get currentKBps(){this.addBytes(0);let Q=(this._now()-this._lastCheckpoint)/1e3;return Q===0&&(Q=1),this._intervalBytes/Q/1024}get lastSecondKBps(){return this.addBytes(0),this._lastSecondBytes!==0?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}get averageKBps(){const Q=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/Q/1024}};var y=c(108),w=c(479),g=c(411);class p extends y.fp{static isSupported(){var ye;try{const se=w.Z.msedge&&(((ye=w.Z===null||w.Z===void 0?void 0:w.Z.version)===null||ye===void 0?void 0:ye.minor)||0)>=15048&&!w.Z.webkit,Ze=!w.Z.msedge||se;return self.fetch&&self.ReadableStream&&Ze}catch{return!1}}constructor(ye,se){super("fetch-stream-loader"),this.TAG="FetchStreamLoader",this._seekHandler=ye,this._config=se,this._needStash=!0,this._requestAbort=!1,this._abortController=null,this._contentLength=null,this._receivedLength=0}destroy(){this.isWorking()&&this.abort(),super.destroy()}open(ye,se){this._dataSource=ye,this._range=se;let Ze=ye.url;this._config.reuseRedirectedURL&&ye.redirectedURL!==void 0&&(Ze=ye.redirectedURL);const Qe=this._seekHandler.getConfig(Ze,se),M=new self.Headers;if(typeof Qe.headers=="object"){const ze=Qe.headers;for(const oi in ze)ze.hasOwnProperty(oi)&&M.append(oi,ze[oi])}const Te={method:"GET",headers:M,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};if(typeof this._config.headers=="object")for(const ze in this._config.headers)M.append(ze,this._config.headers[ze]);ye.cors||(Te.mode="same-origin"),ye.withCredentials&&(Te.credentials="include"),ye!=null&&ye.referrerPolicy&&(Te.referrerPolicy=ye.referrerPolicy),self.AbortController&&(this._abortController=new self.AbortController,this._abortController&&(Te.signal=this._abortController.signal)),this._status=y.GM.kConnecting,self.fetch(Qe.url,Te).then(ze=>{var oi,wi;if(this._requestAbort)return this._status=y.GM.kIdle,void((oi=ze.body)===null||oi===void 0||oi.cancel());if(ze.ok&&ze.status>=200&&ze.status<=299){if(ze.url!==Qe.url&&this._onURLRedirect){const di=this._seekHandler.removeURLParameters(ze.url);this._onURLRedirect(di)}const ui=ze.headers.get("Content-Length");return ui!=null&&(this._contentLength=parseInt(ui),this._contentLength!==0&&this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)),this._pump.call(this,(wi=ze.body)===null||wi===void 0?void 0:wi.getReader())}if(this._status=y.GM.kError,!this._onError)throw new g.OZ("FetchStreamLoader: Http code invalid, "+ze.status+" "+ze.statusText);this._onError(y.nm.HTTP_STATUS_CODE_INVALID,{code:ze.status,msg:ze.statusText})}).catch(ze=>{var oi;if(!(!((oi=this._abortController)===null||oi===void 0)&&oi.signal.aborted)){if(this._status=y.GM.kError,!this._onError)throw ze;this._onError(y.nm.EXCEPTION,{code:-1,msg:ze.message})}})}abort(){var ye;if(this._requestAbort=!0,(this._status!==y.GM.kBuffering||!w.Z.chrome)&&this._abortController)try{(ye=this._abortController)===null||ye===void 0||ye.abort()}catch{}}_pump(ye){return ye.read().then(se=>{var Ze,Qe,M,Te;if(se.done)if(this._contentLength!==null&&this._receivedLength<this._contentLength){this._status=y.GM.kError;const ze=y.nm.EARLY_EOF,oi={code:-1,msg:"Fetch stream meet Early-EOF"};if(!this._onError)throw new g.OZ(oi.msg);this._onError(ze,oi)}else this._status=y.GM.kComplete,this._onComplete&&this._onComplete(((Ze=this._range)===null||Ze===void 0?void 0:Ze.from)||0,(((Qe=this._range)===null||Qe===void 0?void 0:Qe.from)||0)+this._receivedLength-1);else{if(!((M=this._abortController)===null||M===void 0)&&M.signal.aborted)return void(this._status=y.GM.kComplete);if(this._requestAbort)return this._status=y.GM.kComplete,ye.cancel();this._status=y.GM.kBuffering;const ze=se.value.buffer,oi=(((Te=this._range)===null||Te===void 0?void 0:Te.from)||0)+this._receivedLength;this._receivedLength+=ze.byteLength,this._onDataArrival&&this._onDataArrival(ze,oi,this._receivedLength),this._pump(ye)}}).catch(se=>{var Ze,Qe;if(!((Qe=(Ze=this._abortController)===null||Ze===void 0?void 0:Ze.signal)===null||Qe===void 0)&&Qe.aborted)return void(this._status=y.GM.kComplete);if(se.code===11&&w.Z.msedge)return;this._status=y.GM.kError;let M=0,Te=null;if(se.code!==19&&se.message!=="network error"||!(this._contentLength===null||this._contentLength!==null&&this._receivedLength<this._contentLength)?(M=y.nm.EXCEPTION,Te={code:se.code,msg:se.message}):(M=y.nm.EARLY_EOF,Te={code:se.code,msg:"Fetch stream meet Early-EOF"}),!this._onError)throw new g.OZ(Te.msg);this._onError(M,Te)})}}const te=p;class ae extends y.fp{static isSupported(){try{const ye=new XMLHttpRequest;return ye.open("GET","https://example.com",!0),ye.responseType="moz-chunked-arraybuffer",ye.responseType==="moz-chunked-arraybuffer"}catch(ye){return E.Z.w("MozChunkedLoader",ye.message),!1}}constructor(ye,se){super("xhr-moz-chunked-loader"),this.TAG="MozChunkedLoader",this._seekHandler=ye,this._config=se,this._needStash=!0,this._xhr=null,this._requestAbort=!1,this._contentLength=null,this._receivedLength=0}destroy(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),super.destroy()}open(ye,se){this._dataSource=ye,this._range=se;let Ze=ye.url;this._config.reuseRedirectedURL&&ye.redirectedURL!==void 0&&(Ze=ye.redirectedURL);const Qe=this._seekHandler.getConfig(Ze,se);this._requestURL=Qe.url;const M=this._xhr=new XMLHttpRequest;if(M.open("GET",Qe.url,!0),M.responseType="moz-chunked-arraybuffer",M.onreadystatechange=this._onReadyStateChange.bind(this),M.onprogress=this._onProgress.bind(this),M.onloadend=this._onLoadEnd.bind(this),M.onerror=this._onXhrError.bind(this),ye.withCredentials&&(M.withCredentials=!0),typeof Qe.headers=="object"){const Te=Qe.headers;for(const ze in Te)Te.hasOwnProperty(ze)&&M.setRequestHeader(ze,Te[ze])}if(typeof this._config.headers=="object"){const Te=this._config.headers;for(const ze in Te)Te.hasOwnProperty(ze)&&M.setRequestHeader(ze,Te[ze])}this._status=y.GM.kConnecting,M.send()}abort(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=y.GM.kComplete}_onReadyStateChange(ye){const se=ye.target;if(se.readyState===2){if(se.responseURL!==void 0&&se.responseURL!==this._requestURL&&this._onURLRedirect){const Ze=this._seekHandler.removeURLParameters(se.responseURL);this._onURLRedirect(Ze)}if(se.status!==0&&(se.status<200||se.status>299)){if(this._status=y.GM.kError,!this._onError)throw new g.OZ("MozChunkedLoader: Http code invalid, "+se.status+" "+se.statusText);this._onError(y.nm.HTTP_STATUS_CODE_INVALID,{code:se.status,msg:se.statusText})}else this._status=y.GM.kBuffering}}_onProgress(ye){var se;if(this._status===y.GM.kError)return;this._contentLength===null&&ye.total!==null&&ye.total!==0&&(this._contentLength=ye.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));const Ze=ye.target.response,Qe=(((se=this._range)===null||se===void 0?void 0:se.from)||0)+this._receivedLength;this._receivedLength+=Ze.byteLength,this._onDataArrival&&this._onDataArrival(Ze,Qe,this._receivedLength)}_onLoadEnd(ye){this._requestAbort?this._requestAbort=!1:this._status!==y.GM.kError&&(this._status=y.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}_onXhrError(ye){this._status=y.GM.kError;let se=0,Ze=null;if(this._contentLength&&ye.loaded<this._contentLength?(se=y.nm.EARLY_EOF,Ze={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(se=y.nm.EXCEPTION,Ze={code:-1,msg:ye.constructor.name+" "+ye.type}),!this._onError)throw new g.OZ(Ze.msg);this._onError(se,Ze)}}const de=ae;class ie extends y.fp{static isSupported(){try{const ye=new XMLHttpRequest;return ye.open("GET","https://example.com",!0),ye.responseType="arraybuffer",ye.responseType==="arraybuffer"}catch(ye){return E.Z.w("RangeLoader",ye.message),!1}}constructor(ye,se){super("xhr-range-loader"),this.TAG="RangeLoader",this._seekHandler=ye,this._config=se,this._needStash=!1,this._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],this._currentChunkSizeKB=384,this._currentSpeedNormalized=0,this._zeroSpeedChunkCount=0,this._xhr=null,this._speedSampler=new C,this._requestAbort=!1,this._waitForTotalLength=!1,this._totalLengthReceived=!1,this._currentRequestURL=null,this._currentRedirectedURL=null,this._currentRequestRange=null,this._totalLength=null,this._contentLength=null,this._receivedLength=0,this._lastTimeLoaded=0}destroy(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),super.destroy()}get currentSpeed(){return this._speedSampler.lastSecondKBps}open(ye,se){this._dataSource=ye,this._range=se,this._status=y.GM.kConnecting;let Ze=!1;this._dataSource.filesize!=null&&this._dataSource.filesize!==0&&(Ze=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||Ze?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}_openSubRange(){var ye,se;const Ze=1024*this._currentChunkSizeKB,Qe=(((ye=this._range)===null||ye===void 0?void 0:ye.from)||0)+this._receivedLength;let M=Qe+Ze;this._contentLength!=null&&M-this._range.from>=this._contentLength&&(M=(((se=this._range)===null||se===void 0?void 0:se.from)||0)+this._contentLength-1),this._currentRequestRange={from:Qe,to:M},this._internalOpen(this._dataSource,this._currentRequestRange)}_internalOpen(ye,se){this._lastTimeLoaded=0;let Ze=ye.url;this._config.reuseRedirectedURL&&(this._currentRedirectedURL!=null?Ze=this._currentRedirectedURL:ye.redirectedURL!=null&&(Ze=ye.redirectedURL));const Qe=this._seekHandler.getConfig(Ze,se);this._currentRequestURL=Qe.url;const M=this._xhr=new XMLHttpRequest;if(M.open("GET",Qe.url,!0),M.responseType="arraybuffer",M.onreadystatechange=this._onReadyStateChange.bind(this),M.onprogress=this._onProgress.bind(this),M.onload=this._onLoad.bind(this),M.onerror=this._onXhrError.bind(this),ye.withCredentials&&(M.withCredentials=!0),typeof Qe.headers=="object"){const Te=Qe.headers;for(const ze in Te)Te.hasOwnProperty(ze)&&M.setRequestHeader(ze,Te[ze])}if(typeof this._config.headers=="object"){const Te=this._config.headers;for(const ze in Te)Te.hasOwnProperty(ze)&&M.setRequestHeader(ze,Te[ze])}M.send()}abort(){this._requestAbort=!0,this._internalAbort(),this._status=y.GM.kComplete}_internalAbort(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}_onReadyStateChange(ye){const se=ye.target;if(se.readyState===2){if(se.responseURL!=null){const Ze=this._seekHandler.removeURLParameters(se.responseURL);se.responseURL!==this._currentRequestURL&&Ze!==this._currentRedirectedURL&&(this._currentRedirectedURL=Ze,this._onURLRedirect&&this._onURLRedirect(Ze))}if(se.status>=200&&se.status<=299){if(this._waitForTotalLength)return;this._status=y.GM.kBuffering}else{if(this._status=y.GM.kError,!this._onError)throw new g.OZ("RangeLoader: Http code invalid, "+se.status+" "+se.statusText);this._onError(y.nm.HTTP_STATUS_CODE_INVALID,{code:se.status,msg:se.statusText})}}}_onProgress(ye){if(this._status===y.GM.kError)return;if(this._contentLength===null){let Ze=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,Ze=!0;const Qe=ye.total;this._internalAbort(),Qe!=null&&Qe!==0&&(this._totalLength=Qe)}if(this._range.to===-1?this._contentLength=(this._totalLength||0)-this._range.from:this._contentLength=this._range.to-this._range.from+1,Ze)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}const se=ye.loaded-this._lastTimeLoaded;this._lastTimeLoaded=ye.loaded,this._speedSampler.addBytes(se)}_normalizeSpeed(ye){const se=this._chunkSizeKBList,Ze=se.length-1;let Qe=0,M=0,Te=Ze;if(ye<se[0])return se[0];for(;M<=Te;){if(Qe=M+Math.floor((Te-M)/2),Qe===Ze||ye>=se[Qe]&&ye<se[Qe+1])return se[Qe];se[Qe]<ye?M=Qe+1:Te=Qe-1}}_onLoad(ye){if(this._status===y.GM.kError)return;if(this._waitForTotalLength)return void(this._waitForTotalLength=!1);this._lastTimeLoaded=0;let se=this._speedSampler.lastSecondKBps;if(se===0&&(this._zeroSpeedChunkCount++,this._zeroSpeedChunkCount>=3&&(se=this._speedSampler.currentKBps)),se!==0){const Te=this._normalizeSpeed(se);this._currentSpeedNormalized!==Te&&(this._currentSpeedNormalized=Te,this._currentChunkSizeKB=Te)}const Ze=ye.target.response,Qe=this._range.from+this._receivedLength;this._receivedLength+=Ze.byteLength;let M=!1;this._contentLength!=null&&this._receivedLength<this._contentLength?this._openSubRange():M=!0,this._onDataArrival&&this._onDataArrival(Ze,Qe,this._receivedLength),M&&(this._status=y.GM.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}_onXhrError(ye){this._status=y.GM.kError;let se=0,Ze=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(se=y.nm.EARLY_EOF,Ze={code:-1,msg:"RangeLoader meet Early-Eof"}):(se=y.nm.EXCEPTION,Ze={code:-1,msg:ye.constructor.name+" "+ye.type}),!this._onError)throw new g.OZ(Ze.msg);this._onError(se,Ze)}}const we=ie;class Ve extends y.fp{static isSupported(){try{return self.WebSocket!==void 0}catch{return!1}}constructor(ye,se){super("websocket-loader"),this.TAG="WebSocketLoader",this._needStash=!0,this._ws=null,this._requestAbort=!1,this._receivedLength=0}destroy(){this._ws&&this.abort(),super.destroy()}open(ye){try{const se=this._ws=new self.WebSocket(ye.url);se.binaryType="arraybuffer",se.onopen=this._onWebSocketOpen.bind(this),se.onclose=this._onWebSocketClose.bind(this),se.onmessage=this._onWebSocketMessage.bind(this),se.onerror=this._onWebSocketError.bind(this),this._status=y.GM.kConnecting}catch(se){this._status=y.GM.kError;const Ze={code:se.code,msg:se.message};if(!this._onError)throw new g.OZ(Ze.msg);this._onError(y.nm.EXCEPTION,Ze)}}abort(){const ye=this._ws;!ye||ye.readyState!==0&&ye.readyState!==1||(this._requestAbort=!0,ye.close()),this._ws=null,this._status=y.GM.kComplete}_onWebSocketOpen(ye){this._status=y.GM.kBuffering}_onWebSocketClose(ye){this._requestAbort?this._requestAbort=!1:(this._status=y.GM.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1))}_onWebSocketMessage(ye){if(ye.data instanceof ArrayBuffer)this._dispatchArrayBuffer(ye.data);else if(ye.data instanceof Blob){const se=new FileReader;se.onload=()=>{this._dispatchArrayBuffer(se==null?void 0:se.result)},se.readAsArrayBuffer(ye.data)}else{this._status=y.GM.kError;const se={code:-1,msg:"Unsupported WebSocket message type: "+ye.data.constructor.name};if(!this._onError)throw new g.OZ(se.msg);this._onError(y.nm.EXCEPTION,se)}}_dispatchArrayBuffer(ye){const se=ye,Ze=this._receivedLength;this._receivedLength+=se.byteLength,this._onDataArrival&&this._onDataArrival(se,Ze,this._receivedLength)}_onWebSocketError(ye){this._status=y.GM.kError;const se={code:ye.code,msg:ye.message};if(!this._onError)throw new g.OZ(se.msg);this._onError(y.nm.EXCEPTION,se)}}const ue=Ve,x=class{constructor(Q){this._zeroStart=Q||!1}getConfig(Q,ye){const se={};if(ye.from!==0||ye.to!==-1){let Ze;Ze=ye.to!==-1?`bytes=${ye.from.toString()}-${ye.to.toString()}`:`bytes=${ye.from.toString()}-`,se.Range=Ze}else this._zeroStart&&(se.Range="bytes=0-");return{url:Q,headers:se}}removeURLParameters(Q){return Q}},O=class{constructor(Q,ye){this._startName=Q,this._endName=ye}getConfig(Q,ye){let se=Q;if(ye.from!==0||ye.to!==-1){let Ze=!0;se.includes("?")||(se+="?",Ze=!1),Ze&&(se+="&"),se+=`${this._startName}=${ye.from.toString()}`,ye.to!==-1&&(se+=`&${this._endName}=${ye.to.toString()}`)}return{url:se,headers:{}}}removeURLParameters(Q){const ye=Q.split("?")[0];let se;const Ze=Q.indexOf("?");Ze!==-1&&(se=Q.substring(Ze+1));let Qe="";if(se!==void 0&&se.length>0){const M=se.split("&");for(let Te=0;Te<M.length;Te++){const ze=M[Te].split("="),oi=Te>0;ze[0]!==this._startName&&ze[0]!==this._endName&&(oi&&(Qe+="&"),Qe+=M[Te])}}return Qe.length===0?ye:ye+"?"+Qe}},ne=class{constructor(Q,ye,se){this.TAG="IOController",this._config=ye,this._extraData=se,this._stashInitialSize=65536,ye.stashInitialSize!==void 0&&ye.stashInitialSize>0&&(this._stashInitialSize=ye.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,ye.enableStashBuffer||(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=Q,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(Q.url||""),this._refTotalLength=Q.filesize?Q.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new C,this._speedNormalizeList=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}destroy(){var Q,ye,se;!((Q=this._loader)===null||Q===void 0)&&Q.isWorking()&&((ye=this._loader)===null||ye===void 0||ye.abort()),(se=this._loader)===null||se===void 0||se.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}isWorking(){var Q;return((Q=this._loader)===null||Q===void 0?void 0:Q.isWorking())&&!this._paused}isPaused(){return this._paused}get status(){var Q;return(Q=this._loader)===null||Q===void 0?void 0:Q.status}get extraData(){return this._extraData}set extraData(Q){this._extraData=Q}get onDataArrival(){return this._onDataArrival}set onDataArrival(Q){this._onDataArrival=Q}get onSeeked(){return this._onSeeked}set onSeeked(Q){this._onSeeked=Q}get onError(){return this._onError}set onError(Q){this._onError=Q}get onComplete(){return this._onComplete}set onComplete(Q){this._onComplete=Q}get onRedirect(){return this._onRedirect}set onRedirect(Q){this._onRedirect=Q}get onRecoveredEarlyEof(){return this._onRecoveredEarlyEof}set onRecoveredEarlyEof(Q){this._onRecoveredEarlyEof=Q}get currentURL(){var Q;return(Q=this._dataSource)===null||Q===void 0?void 0:Q.url}get hasRedirect(){var Q;return this._redirectedURL!=null||((Q=this._dataSource)===null||Q===void 0?void 0:Q.redirectedURL)!==void 0}get currentRedirectedURL(){var Q;return this._redirectedURL||((Q=this._dataSource)===null||Q===void 0?void 0:Q.redirectedURL)}get currentSpeed(){var Q,ye;return this._loaderClass===we?(Q=this._loader)===null||Q===void 0?void 0:Q.currentSpeed:(ye=this._speedSampler)===null||ye===void 0?void 0:ye.lastSecondKBps}get loaderType(){var Q;return(Q=this._loader)===null||Q===void 0?void 0:Q.type}_selectSeekHandler(){const Q=this._config;if(Q.seekType==="range")this._seekHandler=new x(!!this._config.rangeLoadZeroStart);else if(Q.seekType==="param"){const ye=Q.seekParamStart||"bstart",se=Q.seekParamEnd||"bend";this._seekHandler=new O(ye,se)}else{if(Q.seekType!=="custom")throw new g.OC(`Invalid seekType in config: ${(Q==null?void 0:Q.seekType)||""}`);if(typeof Q.customSeekHandler!="function")throw new g.OC("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new Q.customSeekHandler}}_selectLoader(){var Q;if(this._config.customLoader!=null)this._loaderClass=((Q=this._config)===null||Q===void 0?void 0:Q.customLoader)||null;else if(this._isWebSocketURL)this._loaderClass=ue;else if(te.isSupported())this._loaderClass=te;else if(de.isSupported())this._loaderClass=de;else{if(!we.isSupported())throw new g.OZ("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=we}}_createLoader(){var Q;this._loaderClass&&(this._loader=new this._loaderClass(this._seekHandler,this._config),!((Q=this._loader)===null||Q===void 0)&&Q.needStashBuffer||(this._enableStash=!1),this._loader&&(this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)))}open(Q){var ye,se;this._currentRange={from:0,to:-1},Q&&(this._currentRange.from=Q),(ye=this._speedSampler)===null||ye===void 0||ye.reset(),Q||(this._fullRequestFlag=!0),(se=this._loader)===null||se===void 0||se.open(this._dataSource,Object.assign({},this._currentRange))}abort(){var Q;(Q=this._loader)===null||Q===void 0||Q.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}pause(){var Q,ye;this.isWorking()&&((Q=this._loader)===null||Q===void 0||Q.abort(),this._stashUsed!==0?(this._resumeFrom=this._stashByteStart,this._currentRange&&(this._currentRange.to=this._stashByteStart-1)):this._resumeFrom=(((ye=this._currentRange)===null||ye===void 0?void 0:ye.to)||0)+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}resume(){if(this._paused){this._paused=!1;const Q=this._resumeFrom;this._resumeFrom=0,this._internalSeek(Q,!0)}}seek(Q){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(Q,!0)}_internalSeek(Q,ye){var se,Ze,Qe,M;!((se=this._loader)===null||se===void 0)&&se.isWorking()&&((Ze=this._loader)===null||Ze===void 0||Ze.abort()),this._flushStashBuffer(ye),(Qe=this._loader)===null||Qe===void 0||Qe.destroy(),this._loader=null;const Te={from:Q,to:-1};this._currentRange={from:Te.from,to:-1},(M=this._speedSampler)===null||M===void 0||M.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,Te),this._onSeeked&&this._onSeeked()}updateUrl(Q){if(!Q||typeof Q!="string"||Q.length===0)throw new g.OC("Url must be a non-empty string!");this._dataSource.url=Q}_expandBuffer(Q){let ye=this._stashSize;for(;ye+1048576<Q;)ye*=2;if(ye+=1048576,ye===this._bufferSize)return;const se=new ArrayBuffer(ye);if(this._stashUsed>0){const Ze=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(se,0,ye).set(Ze,0)}this._stashBuffer=se,this._bufferSize=ye}_normalizeSpeed(Q){const ye=this._speedNormalizeList,se=ye.length-1;let Ze=0,Qe=0,M=se;if(Q<ye[0])return ye[0];for(;Qe<=M;){if(Ze=Qe+Math.floor((M-Qe)/2),Ze===se||Q>=ye[Ze]&&Q<ye[Ze+1])return ye[Ze];ye[Ze]<Q?Qe=Ze+1:M=Ze-1}}_adjustStashSize(Q){let ye=0;ye=this._config.isLive?Q/8:Q<512?Q:Q>=512&&Q<=1024?Math.floor(1.5*Q):2*Q,ye>8192&&(ye=8192);const se=1024*ye+1048576;this._bufferSize<se&&this._expandBuffer(se),this._stashSize=1024*ye}_dispatchChunks(Q,ye){return this._currentRange&&(this._currentRange.to=ye+Q.byteLength-1),this._onDataArrival?this._onDataArrival(Q,ye):0}_onURLRedirect(Q){this._redirectedURL=Q,this._onRedirect&&this._onRedirect(Q)}_onContentLengthKnown(Q){Q&&this._fullRequestFlag&&(this._totalLength=Q,this._fullRequestFlag=!1)}_onLoaderChunkArrival(Q,ye,se){var Ze,Qe;if(!this._onDataArrival)throw new g.rT("IOController: No existing consumer (onDataArrival) callback!");if(this._paused)return;this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),(Ze=this._speedSampler)===null||Ze===void 0||Ze.addBytes(Q.byteLength);const M=(Qe=this._speedSampler)===null||Qe===void 0?void 0:Qe.lastSecondKBps;if(M!==0){const Te=this._normalizeSpeed(M);this._speedNormalized!==Te&&(this._speedNormalized=Te,this._adjustStashSize(Te))}if(this._enableStash)if(this._stashUsed===0&&this._stashByteStart===0&&(this._stashByteStart=ye),this._stashUsed+Q.byteLength<=this._stashSize)new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(Q),this._stashUsed),this._stashUsed+=Q.byteLength;else{let Te=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){const ze=this._stashBuffer.slice(0,this._stashUsed),oi=this._dispatchChunks(ze,this._stashByteStart);if(oi<ze.byteLength){if(oi>0){const wi=new Uint8Array(ze,oi);Te.set(wi,0),this._stashUsed=wi.byteLength,this._stashByteStart+=oi}}else this._stashUsed=0,this._stashByteStart+=oi;this._stashUsed+Q.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+Q.byteLength),Te=new Uint8Array(this._stashBuffer,0,this._bufferSize)),Te.set(new Uint8Array(Q),this._stashUsed),this._stashUsed+=Q.byteLength}else{const ze=this._dispatchChunks(Q,ye);if(ze<Q.byteLength){const oi=Q.byteLength-ze;oi>this._bufferSize&&(this._expandBuffer(oi),Te=new Uint8Array(this._stashBuffer,0,this._bufferSize)),Te.set(new Uint8Array(Q,ze),0),this._stashUsed+=oi,this._stashByteStart=ye+ze}}}else if(this._stashUsed===0){const Te=this._dispatchChunks(Q,ye);if(Te<Q.byteLength){const ze=Q.byteLength-Te;ze>this._bufferSize&&this._expandBuffer(ze),new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(Q,Te),0),this._stashUsed+=ze,this._stashByteStart=ye+Te}}else{this._stashUsed+Q.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+Q.byteLength);const Te=new Uint8Array(this._stashBuffer,0,this._bufferSize);Te.set(new Uint8Array(Q),this._stashUsed),this._stashUsed+=Q.byteLength;const ze=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(ze<this._stashUsed&&ze>0){const oi=new Uint8Array(this._stashBuffer,ze);Te.set(oi,0)}this._stashUsed-=ze,this._stashByteStart+=ze}}_flushStashBuffer(Q){if(this._stashUsed>0){const ye=this._stashBuffer.slice(0,this._stashUsed),se=this._dispatchChunks(ye,this._stashByteStart),Ze=ye.byteLength-se;if(se<ye.byteLength){if(!Q){if(se>0){const Qe=new Uint8Array(this._stashBuffer,0,this._bufferSize),M=new Uint8Array(ye,se);Qe.set(M,0),this._stashUsed=M.byteLength,this._stashByteStart+=se}return 0}E.Z.w(this.TAG,`${Ze} bytes unconsumed data remain when flush buffer, dropped`)}return this._stashUsed=0,this._stashByteStart=0,Ze}return 0}_onLoaderComplete(Q,ye){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}_onLoaderError(Q,ye){var se;switch(E.Z.e(this.TAG,`Loader error, code = ${ye.code}, msg = ${ye.msg}`),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,Q=y.nm.UNRECOVERABLE_EARLY_EOF),Q){case y.nm.EARLY_EOF:if(!this._config.isLive&&this._totalLength){const Ze=(((se=this._currentRange)===null||se===void 0?void 0:se.to)||0)+1;return void(Ze<this._totalLength&&(E.Z.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(Ze,!1)))}Q=y.nm.UNRECOVERABLE_EARLY_EOF;case y.nm.UNRECOVERABLE_EARLY_EOF:case y.nm.CONNECTING_TIMEOUT:case y.nm.HTTP_STATUS_CODE_INVALID:case y.nm.EXCEPTION:}if(!this._onError)throw new g.OZ("IOException: "+ye.msg);this._onError(Q,ye)}}},108:(l,d,c)=>{c.d(d,{GM:()=>C,fp:()=>w,nm:()=>y});var E=c(411);const C={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4},y={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"};class w{constructor(p){this._type=p||"undefined",this._status=C.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}destroy(){this._status=C.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}isWorking(){return this._status===C.kConnecting||this._status===C.kBuffering}get type(){return this._type}get status(){return this._status}get needStashBuffer(){return this._needStash}get onContentLengthKnown(){return this._onContentLengthKnown}set onContentLengthKnown(p){this._onContentLengthKnown=p}get onURLRedirect(){return this._onURLRedirect}set onURLRedirect(p){this._onURLRedirect=p}get onDataArrival(){return this._onDataArrival}set onDataArrival(p){this._onDataArrival=p}get onError(){return this._onError}set onError(p){this._onError=p}get onComplete(){return this._onComplete}set onComplete(p){this._onComplete=p}open(p,te){throw new E.do("Unimplemented abstract function!")}abort(){throw new E.do("Unimplemented abstract function!")}}},479:(l,d,c)=>{c.d(d,{Z:()=>C});const E={};(function(){const y=self.navigator.userAgent.toLowerCase(),w=/(edge)\/([\w.]+)/.exec(y)||/(opr)[\/]([\w.]+)/.exec(y)||/(chrome)[ \/]([\w.]+)/.exec(y)||/(iemobile)[\/]([\w.]+)/.exec(y)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(y)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(y)||/(webkit)[ \/]([\w.]+)/.exec(y)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(y)||/(msie) ([\w.]+)/.exec(y)||y.includes("trident")&&/(rv)(?::| )([\w.]+)/.exec(y)||!y.includes("compatible")&&/(firefox)[ \/]([\w.]+)/.exec(y)||[],g=/(ipad)/.exec(y)||/(ipod)/.exec(y)||/(windows phone)/.exec(y)||/(iphone)/.exec(y)||/(kindle)/.exec(y)||/(android)/.exec(y)||/(windows)/.exec(y)||/(mac)/.exec(y)||/(linux)/.exec(y)||/(cros)/.exec(y)||[],p={browser:w[5]||w[3]||w[1]||"",version:w[2]||w[4]||"0",majorVersion:w[4]||w[2]||"0",platform:g[0]||""},te={};if(p.browser){te[p.browser]=!0;const ae=p.majorVersion.split(".");te.version={major:parseInt(p.majorVersion,10),string:p.version},ae.length>1&&(te.version.minor=parseInt(ae[1],10)),ae.length>2&&(te.version.build=parseInt(ae[2],10))}if(p.platform&&(te[p.platform]=!0),(te.chrome||te.opr||te.safari)&&(te.webkit=!0),te.rv||te.iemobile){te.rv&&delete te.rv;const ae="msie";p.browser=ae,te[ae]=!0}if(te.edge){delete te.edge;const ae="msedge";p.browser=ae,te[ae]=!0}if(te.opr){const ae="opera";p.browser=ae,te[ae]=!0}if(te.safari&&te.android){const ae="android";p.browser=ae,te[ae]=!0}te.name=p.browser,te.platform=p.platform;for(const ae in E)Object.prototype.hasOwnProperty.call(E,ae)&&delete E[ae];Object.assign(E,te)})();const C=E},411:(l,d,c)=>{c.d(d,{OC:()=>y,OZ:()=>E,do:()=>w,rT:()=>C});class E{constructor(p){this.name="RuntimeException",this._message=p}get message(){return this._message}toString(){return this.name+": "+this.message}}class C extends E{constructor(p){super(p),this.name="IllegalStateException"}}class y extends E{constructor(p){super(p),this.name="InvalidArgumentException"}}class w extends E{constructor(p){super(p),this.name="NotImplementedException"}}},645:(l,d,c)=>{c.d(d,{Z:()=>y});var E=c(99);class C{static e(g,p){var te;g&&!C.FORCE_GLOBAL_TAG||(g=C.GLOBAL_TAG);const ae=`[${g}] > ${p}`;C.ENABLE_CALLBACK&&((te=C.emitter)===null||te===void 0||te.emit("log","error",ae)),C.ENABLE_ERROR&&(console.error?console.error(ae):console.warn?console.warn(ae):console.log(ae))}static i(g,p){g&&!C.FORCE_GLOBAL_TAG||(g=C.GLOBAL_TAG);const te=`[${g}] > ${p}`;C.ENABLE_CALLBACK&&C.emitter.emit("log","info",te),C.ENABLE_INFO&&(console.info?console.info(te):console.log(te))}static w(g,p){g&&!C.FORCE_GLOBAL_TAG||(g=C.GLOBAL_TAG);const te=`[${g}] > ${p}`;C.ENABLE_CALLBACK&&C.emitter.emit("log","warn",te),C.ENABLE_WARN&&(console.warn?console.warn(te):console.log(te))}static d(g,p){var te;g&&!C.FORCE_GLOBAL_TAG||(g=C.GLOBAL_TAG);const ae=`[${g}] > ${p}`;C.ENABLE_CALLBACK&&((te=C.emitter)===null||te===void 0||te.emit("log","debug",ae)),C.ENABLE_DEBUG&&(console.debug?console.debug(ae):console.log(ae))}static v(g,p){var te;g&&!C.FORCE_GLOBAL_TAG||(g=C.GLOBAL_TAG);const ae=`[${g}] > ${p}`;C.ENABLE_CALLBACK&&((te=C.emitter)===null||te===void 0||te.emit("log","verbose",ae)),C.ENABLE_VERBOSE&&console.log(ae)}}C.FORCE_GLOBAL_TAG=!1,C.GLOBAL_TAG="mpegts.js",C.ENABLE_CALLBACK=!1,C.emitter=new E.EventEmitter,C.ENABLE_ERROR=!0,C.ENABLE_INFO=!0,C.ENABLE_WARN=!0,C.ENABLE_DEBUG=!0,C.ENABLE_VERBOSE=!0;const y=C},278:(l,d,c)=>{c.d(d,{Z:()=>w});var E=c(99),C=c(645);class y{static get forceGlobalTag(){return C.Z.FORCE_GLOBAL_TAG}static set forceGlobalTag(p){C.Z.FORCE_GLOBAL_TAG=p,y._notifyChange()}static get globalTag(){return C.Z.GLOBAL_TAG}static set globalTag(p){C.Z.GLOBAL_TAG=p,y._notifyChange()}static get enableAll(){return C.Z.ENABLE_VERBOSE&&C.Z.ENABLE_DEBUG&&C.Z.ENABLE_INFO&&C.Z.ENABLE_WARN&&C.Z.ENABLE_ERROR}static set enableAll(p){C.Z.ENABLE_VERBOSE=p,C.Z.ENABLE_DEBUG=p,C.Z.ENABLE_INFO=p,C.Z.ENABLE_WARN=p,C.Z.ENABLE_ERROR=p,y._notifyChange()}static get enableDebug(){return C.Z.ENABLE_DEBUG}static set enableDebug(p){C.Z.ENABLE_DEBUG=p,y._notifyChange()}static get enableVerbose(){return C.Z.ENABLE_VERBOSE}static set enableVerbose(p){C.Z.ENABLE_VERBOSE=p,y._notifyChange()}static get enableInfo(){return C.Z.ENABLE_INFO}static set enableInfo(p){C.Z.ENABLE_INFO=p,y._notifyChange()}static get enableWarn(){return C.Z.ENABLE_WARN}static set enableWarn(p){C.Z.ENABLE_WARN=p,y._notifyChange()}static get enableError(){return C.Z.ENABLE_ERROR}static set enableError(p){C.Z.ENABLE_ERROR=p,y._notifyChange()}static getConfig(){return{globalTag:C.Z.GLOBAL_TAG,forceGlobalTag:C.Z.FORCE_GLOBAL_TAG,enableVerbose:C.Z.ENABLE_VERBOSE,enableDebug:C.Z.ENABLE_DEBUG,enableInfo:C.Z.ENABLE_INFO,enableWarn:C.Z.ENABLE_WARN,enableError:C.Z.ENABLE_ERROR,enableCallback:C.Z.ENABLE_CALLBACK}}static applyConfig(p){C.Z.GLOBAL_TAG=p.globalTag,C.Z.FORCE_GLOBAL_TAG=p.forceGlobalTag,C.Z.ENABLE_VERBOSE=p.enableVerbose,C.Z.ENABLE_DEBUG=p.enableDebug,C.Z.ENABLE_INFO=p.enableInfo,C.Z.ENABLE_WARN=p.enableWarn,C.Z.ENABLE_ERROR=p.enableError,C.Z.ENABLE_CALLBACK=!!p.enableCallback}static _notifyChange(){const p=y.emitter;if(p.listenerCount("change")>0){const te=y.getConfig();p.emit("change",te)}}static registerListener(p){y.emitter.addListener("change",p)}static removeListener(p){y.emitter.removeListener("change",p)}static addLogListener(p){C.Z.emitter.addListener("log",p),C.Z.emitter.listenerCount("log")>0&&(C.Z.ENABLE_CALLBACK=!0,y._notifyChange())}static removeLogListener(p){C.Z.emitter.removeListener("log",p),C.Z.emitter.listenerCount("log")===0&&(C.Z.ENABLE_CALLBACK=!1,y._notifyChange())}}y.emitter=new E.EventEmitter;const w=y}},n={};function o(l){var d=n[l];if(d!==void 0)return d.exports;var c=n[l]={exports:{}};return t[l](c,c.exports,o),c.exports}return o.m=t,o.n=l=>{var d=l&&l.__esModule?()=>l.default:()=>l;return o.d(d,{a:d}),d},o.d=(l,d)=>{for(var c in d)o.o(d,c)&&!o.o(l,c)&&Object.defineProperty(l,c,{enumerable:!0,get:d[c]})},o.o=(l,d)=>Object.prototype.hasOwnProperty.call(l,d),o(607)})())})(mu);class _u{constructor(m,t){console.log("isSupportFlv",window.flvjs.isSupported()),window.flvjs.isSupported()&&this.initFLV(m,t)}toString(){return`Flv ${this.coreX}-${this.coreY}`}initFLV(m,t){const{deviceSerial:n,channelNo:o,hd:l,type:d}=bl(t);window.ezuikitMonitor.report({protocol:"flv",url:t,serial:n,no:o,action:1,logInfo:{type:d}});var c=document.getElementById(m),E=c.getAttribute("controls");E||c.setAttribute("controls",!0);var C=window.flvjs.createPlayer({type:"flv",url:t,isLive:!0},{enableStashBuffer:!0,stashInitialSize:128,enableWorker:!0});C.attachMediaElement(c),C.load(),C.play(),this.flvUrl=t,this.flv=C,this.video=c,this.video.addEventListener("oncanplaythrough",function(){console.log("oncanplaythrough")},!1),this.video.addEventListener("onerror",function(){console.log("onerror")},!1)}play(){console.log("执行flv播放",this.video),this.video.play()}stop(){this.video.pause(),this.flv.unload()}destroy(){this.flv===void 0||this.flv===null||(this.flv.pause(),this.flv.unload(),this.flv.detachMediaElement(),this.flv.destroy(),this.flv=null)}}var vs={exports:{}};vs.exports,function(Z,m){(function(){var t,n="4.17.21",o=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",c="Invalid `variable` option passed into `_.template`",E="__lodash_hash_undefined__",C=500,y="__lodash_placeholder__",w=1,g=2,p=4,te=1,ae=2,de=1,ie=2,we=4,Ve=8,ue=16,x=32,O=64,ne=128,Q=256,ye=512,se=30,Ze="...",Qe=800,M=16,Te=1,ze=2,oi=3,wi=1/0,ui=9007199254740991,di=17976931348623157e292,zi=NaN,$e=4294967295,st=$e-1,Ke=$e>>>1,Ne=[["ary",ne],["bind",de],["bindKey",ie],["curry",Ve],["curryRight",ue],["flip",ye],["partial",x],["partialRight",O],["rearg",Q]],at="[object Arguments]",Ut="[object Array]",Wt="[object AsyncFunction]",kt="[object Boolean]",ee="[object Date]",me="[object DOMException]",P="[object Error]",Y="[object Function]",Oe="[object GeneratorFunction]",N="[object Map]",fe="[object Number]",I="[object Null]",L="[object Object]",re="[object Promise]",J="[object Proxy]",De="[object RegExp]",Ye="[object Set]",et="[object String]",R="[object Symbol]",He="[object Undefined]",G="[object WeakMap]",ge="[object WeakSet]",xe="[object ArrayBuffer]",ke="[object DataView]",ce="[object Float32Array]",X="[object Float64Array]",Be="[object Int8Array]",lt="[object Int16Array]",dt="[object Int32Array]",Lt="[object Uint8Array]",qt="[object Uint8ClampedArray]",Si="[object Uint16Array]",he="[object Uint32Array]",Bi=/\b__p \+= '';/g,yt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pt=/&(?:amp|lt|gt|quot|#39);/g,Dt=/[&<>"']/g,St=RegExp(pt.source),Et=RegExp(Dt.source),jt=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,Xt=/<%=([\s\S]+?)%>/g,ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mi=/^\w*$/,Pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,ti=RegExp(Ii.source),Vi=/^\s+/,Jt=/\s/,At=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,j=/\{\n\/\* \[wrapped with (.+)\] \*/,T=/,? & /,F=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,S=/[()=,{}\[\]\/\s]/,be=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Me=/\w*$/,Ue=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,Gt=/^\[object .+?Constructor\]$/,Ft=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,nt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zt=/($^)/,bi=/['\n\r\u2028\u2029\\]/g,Kt="\\ud800-\\udfff",ri="\\u0300-\\u036f",Li="\\ufe20-\\ufe2f",li="\\u20d0-\\u20ff",Mt=ri+Li+li,Nt="\\u2700-\\u27bf",ai="a-z\\xdf-\\xf6\\xf8-\\xff",ji="\\xac\\xb1\\xd7\\xf7",tn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ui="\\u2000-\\u206f",Gi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nn="A-Z\\xc0-\\xd6\\xd8-\\xde",Zi="\\ufe0e\\ufe0f",Yi=ji+tn+Ui+Gi,bn="['’]",vn="["+Kt+"]",jn="["+Yi+"]",un="["+Mt+"]",Un="\\d+",Hn="["+Nt+"]",yn="["+ai+"]",fn="[^"+Kt+Yi+Un+Nt+ai+nn+"]",Cn="\\ud83c[\\udffb-\\udfff]",wr="(?:"+un+"|"+Cn+")",tr="[^"+Kt+"]",Nn="(?:\\ud83c[\\udde6-\\uddff]){2}",lr="[\\ud800-\\udbff][\\udc00-\\udfff]",zr="["+nn+"]",Ir="\\u200d",_n="(?:"+yn+"|"+fn+")",fr="(?:"+zr+"|"+fn+")",Jn="(?:"+bn+"(?:d|ll|m|re|s|t|ve))?",kn="(?:"+bn+"(?:D|LL|M|RE|S|T|VE))?",mr=wr+"?",Yn="["+Zi+"]?",Dr="(?:"+Ir+"(?:"+[tr,Nn,lr].join("|")+")"+Yn+mr+")*",ta="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Vr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jr=Yn+mr+Dr,ma="(?:"+[Hn,Nn,lr].join("|")+")"+jr,ca="(?:"+[tr+un+"?",un,Nn,lr,vn].join("|")+")",Ta=RegExp(bn,"g"),ir=RegExp(un,"g"),Tt=RegExp(Cn+"(?="+Cn+")|"+ca+jr,"g"),Gr=RegExp([zr+"?"+yn+"+"+Jn+"(?="+[jn,zr,"$"].join("|")+")",fr+"+"+kn+"(?="+[jn,zr+_n,"$"].join("|")+")",zr+"?"+_n+"+"+Jn,zr+"+"+kn,Vr,ta,Un,ma].join("|"),"g"),Ar=RegExp("["+Ir+Kt+Mt+Zi+"]"),oe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,si=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ge=-1,u={};u[ce]=u[X]=u[Be]=u[lt]=u[dt]=u[Lt]=u[qt]=u[Si]=u[he]=!0,u[at]=u[Ut]=u[xe]=u[kt]=u[ke]=u[ee]=u[P]=u[Y]=u[N]=u[fe]=u[L]=u[De]=u[Ye]=u[et]=u[G]=!1;var s={};s[at]=s[Ut]=s[xe]=s[ke]=s[kt]=s[ee]=s[ce]=s[X]=s[Be]=s[lt]=s[dt]=s[N]=s[fe]=s[L]=s[De]=s[Ye]=s[et]=s[R]=s[Lt]=s[qt]=s[Si]=s[he]=!0,s[P]=s[Y]=s[G]=!1;var e={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},A={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ce=parseFloat,Ae=parseInt,zt=typeof Na=="object"&&Na&&Na.Object===Object&&Na,z=typeof self=="object"&&self&&self.Object===Object&&self,H=zt||z||Function("return this")(),K=m&&!m.nodeType&&m,le=K&&!0&&Z&&!Z.nodeType&&Z,Xe=le&&le.exports===K,vt=Xe&&zt.process,bt=function(){try{var Ot=le&&le.require&&le.require("util").types;return Ot||vt&&vt.binding&&vt.binding("util")}catch{}}(),Ht=bt&&bt.isArrayBuffer,gi=bt&&bt.isDate,Hi=bt&&bt.isMap,hi=bt&&bt.isRegExp,Ai=bt&&bt.isSet,fi=bt&&bt.isTypedArray;function D(Ot,Ci,ht){switch(ht.length){case 0:return Ot.call(Ci);case 1:return Ot.call(Ci,ht[0]);case 2:return Ot.call(Ci,ht[0],ht[1]);case 3:return Ot.call(Ci,ht[0],ht[1],ht[2])}return Ot.apply(Ci,ht)}function h(Ot,Ci,ht,mt){for(var $t=-1,ii=Ot==null?0:Ot.length;++$t<ii;){var Mi=Ot[$t];Ci(mt,Mi,ht(Mi),Ot)}return mt}function k(Ot,Ci){for(var ht=-1,mt=Ot==null?0:Ot.length;++ht<mt&&Ci(Ot[ht],ht,Ot)!==!1;);return Ot}function V(Ot,Ci){for(var ht=Ot==null?0:Ot.length;ht--&&Ci(Ot[ht],ht,Ot)!==!1;);return Ot}function ve(Ot,Ci){for(var ht=-1,mt=Ot==null?0:Ot.length;++ht<mt;)if(!Ci(Ot[ht],ht,Ot))return!1;return!0}function je(Ot,Ci){for(var ht=-1,mt=Ot==null?0:Ot.length,$t=0,ii=[];++ht<mt;){var Mi=Ot[ht];Ci(Mi,ht,Ot)&&(ii[$t++]=Mi)}return ii}function We(Ot,Ci){var ht=Ot==null?0:Ot.length;return!!ht&&Er(Ot,Ci,0)>-1}function ct(Ot,Ci,ht){for(var mt=-1,$t=Ot==null?0:Ot.length;++mt<$t;)if(ht(Ci,Ot[mt]))return!0;return!1}function gt(Ot,Ci){for(var ht=-1,mt=Ot==null?0:Ot.length,$t=Array(mt);++ht<mt;)$t[ht]=Ci(Ot[ht],ht,Ot);return $t}function It(Ot,Ci){for(var ht=-1,mt=Ci.length,$t=Ot.length;++ht<mt;)Ot[$t+ht]=Ci[ht];return Ot}function xi(Ot,Ci,ht,mt){var $t=-1,ii=Ot==null?0:Ot.length;for(mt&&ii&&(ht=Ot[++$t]);++$t<ii;)ht=Ci(ht,Ot[$t],$t,Ot);return ht}function yi(Ot,Ci,ht,mt){var $t=Ot==null?0:Ot.length;for(mt&&$t&&(ht=Ot[--$t]);$t--;)ht=Ci(ht,Ot[$t],$t,Ot);return ht}function Ji(Ot,Ci){for(var ht=-1,mt=Ot==null?0:Ot.length;++ht<mt;)if(Ci(Ot[ht],ht,Ot))return!0;return!1}var ki=Tn("length");function en(Ot){return Ot.split("")}function In(Ot){return Ot.match(F)||[]}function On(Ot,Ci,ht){var mt;return ht(Ot,function($t,ii,Mi){if(Ci($t,ii,Mi))return mt=ii,!1}),mt}function Qn(Ot,Ci,ht,mt){for(var $t=Ot.length,ii=ht+(mt?1:-1);mt?ii--:++ii<$t;)if(Ci(Ot[ii],ii,Ot))return ii;return-1}function Er(Ot,Ci,ht){return Ci===Ci?pe(Ot,Ci,ht):Qn(Ot,Rr,ht)}function $r(Ot,Ci,ht,mt){for(var $t=ht-1,ii=Ot.length;++$t<ii;)if(mt(Ot[$t],Ci))return $t;return-1}function Rr(Ot){return Ot!==Ot}function Sr(Ot,Ci){var ht=Ot==null?0:Ot.length;return ht?hr(Ot,Ci)/ht:zi}function Tn(Ot){return function(Ci){return Ci==null?t:Ci[Ot]}}function ia(Ot){return function(Ci){return Ot==null?t:Ot[Ci]}}function pr(Ot,Ci,ht,mt,$t){return $t(Ot,function(ii,Mi,Ti){ht=mt?(mt=!1,ii):Ci(ht,ii,Mi,Ti)}),ht}function _r(Ot,Ci){var ht=Ot.length;for(Ot.sort(Ci);ht--;)Ot[ht]=Ot[ht].value;return Ot}function hr(Ot,Ci){for(var ht,mt=-1,$t=Ot.length;++mt<$t;){var ii=Ci(Ot[mt]);ii!==t&&(ht=ht===t?ii:ht+ii)}return ht}function Aa(Ot,Ci){for(var ht=-1,mt=Array(Ot);++ht<Ot;)mt[ht]=Ci(ht);return mt}function Qr(Ot,Ci){return gt(Ci,function(ht){return[ht,Ot[ht]]})}function Wr(Ot){return Ot&&Ot.slice(0,ut(Ot)+1).replace(Vi,"")}function Cr(Ot){return function(Ci){return Ot(Ci)}}function Zr(Ot,Ci){return gt(Ci,function(ht){return Ot[ht]})}function Ur(Ot,Ci){return Ot.has(Ci)}function Tr(Ot,Ci){for(var ht=-1,mt=Ot.length;++ht<mt&&Er(Ci,Ot[ht],0)>-1;);return ht}function Yr(Ot,Ci){for(var ht=Ot.length;ht--&&Er(Ci,Ot[ht],0)>-1;);return ht}function Se(Ot,Ci){for(var ht=Ot.length,mt=0;ht--;)Ot[ht]===Ci&&++mt;return mt}var Pe=ia(e),Fe=ia(r);function tt(Ot){return"\\"+A[Ot]}function Pt(Ot,Ci){return Ot==null?t:Ot[Ci]}function Yt(Ot){return Ar.test(Ot)}function ci(Ot){return oe.test(Ot)}function Fi(Ot){for(var Ci,ht=[];!(Ci=Ot.next()).done;)ht.push(Ci.value);return ht}function Pn(Ot){var Ci=-1,ht=Array(Ot.size);return Ot.forEach(function(mt,$t){ht[++Ci]=[$t,mt]}),ht}function q(Ot,Ci){return function(ht){return Ot(Ci(ht))}}function _(Ot,Ci){for(var ht=-1,mt=Ot.length,$t=0,ii=[];++ht<mt;){var Mi=Ot[ht];(Mi===Ci||Mi===y)&&(Ot[ht]=y,ii[$t++]=ht)}return ii}function U(Ot){var Ci=-1,ht=Array(Ot.size);return Ot.forEach(function(mt){ht[++Ci]=mt}),ht}function W(Ot){var Ci=-1,ht=Array(Ot.size);return Ot.forEach(function(mt){ht[++Ci]=[mt,mt]}),ht}function pe(Ot,Ci,ht){for(var mt=ht-1,$t=Ot.length;++mt<$t;)if(Ot[mt]===Ci)return mt;return-1}function Ie(Ot,Ci,ht){for(var mt=ht+1;mt--;)if(Ot[mt]===Ci)return mt;return mt}function Le(Ot){return Yt(Ot)?Qt(Ot):ki(Ot)}function it(Ot){return Yt(Ot)?vi(Ot):en(Ot)}function ut(Ot){for(var Ci=Ot.length;Ci--&&Jt.test(Ot.charAt(Ci)););return Ci}var Rt=ia(b);function Qt(Ot){for(var Ci=Tt.lastIndex=0;Tt.test(Ot);)++Ci;return Ci}function vi(Ot){return Ot.match(Tt)||[]}function Di(Ot){return Ot.match(Gr)||[]}var pi=function Ot(Ci){Ci=Ci==null?H:Oi.defaults(H.Object(),Ci,Oi.pick(H,si));var ht=Ci.Array,mt=Ci.Date,$t=Ci.Error,ii=Ci.Function,Mi=Ci.Math,Ti=Ci.Object,rn=Ci.RegExp,an=Ci.String,$i=Ci.TypeError,sn=ht.prototype,An=ii.prototype,mn=Ti.prototype,Mn=Ci["__core-js_shared__"],wn=An.toString,hn=mn.hasOwnProperty,nr=0,cr=function(){var a=/[^.]+$/.exec(Mn&&Mn.keys&&Mn.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),ur=mn.toString,Pr=wn.call(Ti),eo=H._,Wa=rn("^"+wn.call(hn).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mr=Xe?Ci.Buffer:t,$n=Ci.Symbol,to=Ci.Uint8Array,ua=Mr?Mr.allocUnsafe:t,Ma=q(Ti.getPrototypeOf,Ti),Bs=Ti.create,Ls=mn.propertyIsEnumerable,Po=sn.splice,Za=$n?$n.isConcatSpreadable:t,io=$n?$n.iterator:t,na=$n?$n.toStringTag:t,wo=function(){try{var a=Ao(Ti,"defineProperty");return a({},"",{}),a}catch{}}(),Eo=Ci.clearTimeout!==H.clearTimeout&&Ci.clearTimeout,Oo=mt&&mt.now!==H.Date.now&&mt.now,No=Ci.setTimeout!==H.setTimeout&&Ci.setTimeout,_o=Mi.ceil,jo=Mi.floor,go=Ti.getOwnPropertySymbols,ts=Mr?Mr.isBuffer:t,Uo=Ci.isFinite,P0=sn.join,is=q(Ti.keys,Ti),Br=Mi.max,ni=Mi.min,Bt=mt.now,Ri=Ci.parseInt,Ei=Mi.random,Wi=sn.reverse,Qi=Ao(Ci,"DataView"),on=Ao(Ci,"Map"),xn=Ao(Ci,"Promise"),cn=Ao(Ci,"Set"),Sn=Ao(Ci,"WeakMap"),Bn=Ao(Ti,"create"),zn=Sn&&new Sn,Vn={},Zn=Mo(Qi),dr=Mo(on),br=Mo(xn),aa=Mo(cn),Xr=Mo(Sn),Hr=$n?$n.prototype:t,Ba=Hr?Hr.valueOf:t,no=Hr?Hr.toString:t;function xt(a){if(Lr(a)&&!Gn(a)&&!(a instanceof rr)){if(a instanceof Pa)return a;if(hn.call(a,"__wrapped__"))return Pc(a)}return new Pa(a)}var Ho=function(){function a(){}return function(f){if(!kr(f))return{};if(Bs)return Bs(f);a.prototype=f;var B=new a;return a.prototype=t,B}}();function Fs(){}function Pa(a,f){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=t}xt.templateSettings={escape:jt,evaluate:_t,interpolate:Xt,variable:"",imports:{_:xt}},xt.prototype=Fs.prototype,xt.prototype.constructor=xt,Pa.prototype=Ho(Fs.prototype),Pa.prototype.constructor=Pa;function rr(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=$e,this.__views__=[]}function j1(){var a=new rr(this.__wrapped__);return a.__actions__=fa(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=fa(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=fa(this.__views__),a}function U1(){if(this.__filtered__){var a=new rr(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function H1(){var a=this.__wrapped__.value(),f=this.__dir__,B=Gn(a),Re=f<0,rt=B?a.length:0,Ct=e2(0,rt,this.__views__),Vt=Ct.start,ei=Ct.end,_i=ei-Vt,Xi=Re?ei:Vt-1,qi=this.__iteratees__,Ki=qi.length,dn=0,gn=ni(_i,this.__takeCount__);if(!B||!Re&&rt==_i&&gn==_i)return Xd(a,this.__actions__);var Ln=[];e:for(;_i--&&dn<gn;){Xi+=f;for(var qn=-1,Fn=a[Xi];++qn<Ki;){var er=qi[qn],sr=er.iteratee,va=er.type,la=sr(Fn);if(va==ze)Fn=la;else if(!la){if(va==Te)continue e;break e}}Ln[dn++]=Fn}return Ln}rr.prototype=Ho(Fs.prototype),rr.prototype.constructor=rr;function Ro(a){var f=-1,B=a==null?0:a.length;for(this.clear();++f<B;){var Re=a[f];this.set(Re[0],Re[1])}}function V1(){this.__data__=Bn?Bn(null):{},this.size=0}function G1(a){var f=this.has(a)&&delete this.__data__[a];return this.size-=f?1:0,f}function W1(a){var f=this.__data__;if(Bn){var B=f[a];return B===E?t:B}return hn.call(f,a)?f[a]:t}function Z1(a){var f=this.__data__;return Bn?f[a]!==t:hn.call(f,a)}function Y1(a,f){var B=this.__data__;return this.size+=this.has(a)?0:1,B[a]=Bn&&f===t?E:f,this}Ro.prototype.clear=V1,Ro.prototype.delete=G1,Ro.prototype.get=W1,Ro.prototype.has=Z1,Ro.prototype.set=Y1;function ro(a){var f=-1,B=a==null?0:a.length;for(this.clear();++f<B;){var Re=a[f];this.set(Re[0],Re[1])}}function X1(){this.__data__=[],this.size=0}function q1(a){var f=this.__data__,B=zs(f,a);if(B<0)return!1;var Re=f.length-1;return B==Re?f.pop():Po.call(f,B,1),--this.size,!0}function J1(a){var f=this.__data__,B=zs(f,a);return B<0?t:f[B][1]}function K1(a){return zs(this.__data__,a)>-1}function $1(a,f){var B=this.__data__,Re=zs(B,a);return Re<0?(++this.size,B.push([a,f])):B[Re][1]=f,this}ro.prototype.clear=X1,ro.prototype.delete=q1,ro.prototype.get=J1,ro.prototype.has=K1,ro.prototype.set=$1;function ao(a){var f=-1,B=a==null?0:a.length;for(this.clear();++f<B;){var Re=a[f];this.set(Re[0],Re[1])}}function Q1(){this.size=0,this.__data__={hash:new Ro,map:new(on||ro),string:new Ro}}function eh(a){var f=qs(this,a).delete(a);return this.size-=f?1:0,f}function th(a){return qs(this,a).get(a)}function ih(a){return qs(this,a).has(a)}function nh(a,f){var B=qs(this,a),Re=B.size;return B.set(a,f),this.size+=B.size==Re?0:1,this}ao.prototype.clear=Q1,ao.prototype.delete=eh,ao.prototype.get=th,ao.prototype.has=ih,ao.prototype.set=nh;function ko(a){var f=-1,B=a==null?0:a.length;for(this.__data__=new ao;++f<B;)this.add(a[f])}function rh(a){return this.__data__.set(a,E),this}function ah(a){return this.__data__.has(a)}ko.prototype.add=ko.prototype.push=rh,ko.prototype.has=ah;function La(a){var f=this.__data__=new ro(a);this.size=f.size}function oh(){this.__data__=new ro,this.size=0}function sh(a){var f=this.__data__,B=f.delete(a);return this.size=f.size,B}function lh(a){return this.__data__.get(a)}function dh(a){return this.__data__.has(a)}function ch(a,f){var B=this.__data__;if(B instanceof ro){var Re=B.__data__;if(!on||Re.length<o-1)return Re.push([a,f]),this.size=++B.size,this;B=this.__data__=new ao(Re)}return B.set(a,f),this.size=B.size,this}La.prototype.clear=oh,La.prototype.delete=sh,La.prototype.get=lh,La.prototype.has=dh,La.prototype.set=ch;function Pd(a,f){var B=Gn(a),Re=!B&&Bo(a),rt=!B&&!Re&&Co(a),Ct=!B&&!Re&&!rt&&Zo(a),Vt=B||Re||rt||Ct,ei=Vt?Aa(a.length,an):[],_i=ei.length;for(var Xi in a)(f||hn.call(a,Xi))&&!(Vt&&(Xi=="length"||rt&&(Xi=="offset"||Xi=="parent")||Ct&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||co(Xi,_i)))&&ei.push(Xi);return ei}function wd(a){var f=a.length;return f?a[F0(0,f-1)]:t}function uh(a,f){return Js(fa(a),Io(f,0,a.length))}function fh(a){return Js(fa(a))}function w0(a,f,B){(B!==t&&!Fa(a[f],B)||B===t&&!(f in a))&&oo(a,f,B)}function ns(a,f,B){var Re=a[f];(!(hn.call(a,f)&&Fa(Re,B))||B===t&&!(f in a))&&oo(a,f,B)}function zs(a,f){for(var B=a.length;B--;)if(Fa(a[B][0],f))return B;return-1}function hh(a,f,B,Re){return vo(a,function(rt,Ct,Vt){f(Re,rt,B(rt),Vt)}),Re}function Ed(a,f){return a&&Xa(f,qr(f),a)}function xh(a,f){return a&&Xa(f,xa(f),a)}function oo(a,f,B){f=="__proto__"&&wo?wo(a,f,{configurable:!0,enumerable:!0,value:B,writable:!0}):a[f]=B}function E0(a,f){for(var B=-1,Re=f.length,rt=ht(Re),Ct=a==null;++B<Re;)rt[B]=Ct?t:sl(a,f[B]);return rt}function Io(a,f,B){return a===a&&(B!==t&&(a=a<=B?a:B),f!==t&&(a=a>=f?a:f)),a}function wa(a,f,B,Re,rt,Ct){var Vt,ei=f&w,_i=f&g,Xi=f&p;if(B&&(Vt=rt?B(a,Re,rt,Ct):B(a)),Vt!==t)return Vt;if(!kr(a))return a;var qi=Gn(a);if(qi){if(Vt=i2(a),!ei)return fa(a,Vt)}else{var Ki=ra(a),dn=Ki==Y||Ki==Oe;if(Co(a))return Kd(a,ei);if(Ki==L||Ki==at||dn&&!rt){if(Vt=_i||dn?{}:mc(a),!ei)return _i?Wh(a,xh(Vt,a)):Gh(a,Ed(Vt,a))}else{if(!s[Ki])return rt?a:{};Vt=n2(a,Ki,ei)}}Ct||(Ct=new La);var gn=Ct.get(a);if(gn)return gn;Ct.set(a,Vt),Wc(a)?a.forEach(function(Fn){Vt.add(wa(Fn,f,B,Fn,a,Ct))}):Vc(a)&&a.forEach(function(Fn,er){Vt.set(er,wa(Fn,f,B,er,a,Ct))});var Ln=Xi?_i?Y0:Z0:_i?xa:qr,qn=qi?t:Ln(a);return k(qn||a,function(Fn,er){qn&&(er=Fn,Fn=a[er]),ns(Vt,er,wa(Fn,f,B,er,a,Ct))}),Vt}function ph(a){var f=qr(a);return function(B){return Rd(B,a,f)}}function Rd(a,f,B){var Re=B.length;if(a==null)return!Re;for(a=Ti(a);Re--;){var rt=B[Re],Ct=f[rt],Vt=a[rt];if(Vt===t&&!(rt in a)||!Ct(Vt))return!1}return!0}function kd(a,f,B){if(typeof a!="function")throw new $i(d);return cs(function(){a.apply(t,B)},f)}function rs(a,f,B,Re){var rt=-1,Ct=We,Vt=!0,ei=a.length,_i=[],Xi=f.length;if(!ei)return _i;B&&(f=gt(f,Cr(B))),Re?(Ct=ct,Vt=!1):f.length>=o&&(Ct=Ur,Vt=!1,f=new ko(f));e:for(;++rt<ei;){var qi=a[rt],Ki=B==null?qi:B(qi);if(qi=Re||qi!==0?qi:0,Vt&&Ki===Ki){for(var dn=Xi;dn--;)if(f[dn]===Ki)continue e;_i.push(qi)}else Ct(f,Ki,Re)||_i.push(qi)}return _i}var vo=ic(Ya),Id=ic(k0,!0);function mh(a,f){var B=!0;return vo(a,function(Re,rt,Ct){return B=!!f(Re,rt,Ct),B}),B}function Os(a,f,B){for(var Re=-1,rt=a.length;++Re<rt;){var Ct=a[Re],Vt=f(Ct);if(Vt!=null&&(ei===t?Vt===Vt&&!ga(Vt):B(Vt,ei)))var ei=Vt,_i=Ct}return _i}function _h(a,f,B,Re){var rt=a.length;for(B=Xn(B),B<0&&(B=-B>rt?0:rt+B),Re=Re===t||Re>rt?rt:Xn(Re),Re<0&&(Re+=rt),Re=B>Re?0:Yc(Re);B<Re;)a[B++]=f;return a}function Dd(a,f){var B=[];return vo(a,function(Re,rt,Ct){f(Re,rt,Ct)&&B.push(Re)}),B}function ea(a,f,B,Re,rt){var Ct=-1,Vt=a.length;for(B||(B=a2),rt||(rt=[]);++Ct<Vt;){var ei=a[Ct];f>0&&B(ei)?f>1?ea(ei,f-1,B,Re,rt):It(rt,ei):Re||(rt[rt.length]=ei)}return rt}var R0=nc(),Ad=nc(!0);function Ya(a,f){return a&&R0(a,f,qr)}function k0(a,f){return a&&Ad(a,f,qr)}function Ns(a,f){return je(f,function(B){return uo(a[B])})}function Do(a,f){f=bo(f,a);for(var B=0,Re=f.length;a!=null&&B<Re;)a=a[qa(f[B++])];return B&&B==Re?a:t}function Md(a,f,B){var Re=f(a);return Gn(a)?Re:It(Re,B(a))}function oa(a){return a==null?a===t?He:I:na&&na in Ti(a)?Qh(a):f2(a)}function I0(a,f){return a>f}function gh(a,f){return a!=null&&hn.call(a,f)}function vh(a,f){return a!=null&&f in Ti(a)}function yh(a,f,B){return a>=ni(f,B)&&a<Br(f,B)}function D0(a,f,B){for(var Re=B?ct:We,rt=a[0].length,Ct=a.length,Vt=Ct,ei=ht(Ct),_i=1/0,Xi=[];Vt--;){var qi=a[Vt];Vt&&f&&(qi=gt(qi,Cr(f))),_i=ni(qi.length,_i),ei[Vt]=!B&&(f||rt>=120&&qi.length>=120)?new ko(Vt&&qi):t}qi=a[0];var Ki=-1,dn=ei[0];e:for(;++Ki<rt&&Xi.length<_i;){var gn=qi[Ki],Ln=f?f(gn):gn;if(gn=B||gn!==0?gn:0,!(dn?Ur(dn,Ln):Re(Xi,Ln,B))){for(Vt=Ct;--Vt;){var qn=ei[Vt];if(!(qn?Ur(qn,Ln):Re(a[Vt],Ln,B)))continue e}dn&&dn.push(Ln),Xi.push(gn)}}return Xi}function bh(a,f,B,Re){return Ya(a,function(rt,Ct,Vt){f(Re,B(rt),Ct,Vt)}),Re}function as(a,f,B){f=bo(f,a),a=yc(a,f);var Re=a==null?a:a[qa(Ra(f))];return Re==null?t:D(Re,a,B)}function Bd(a){return Lr(a)&&oa(a)==at}function Sh(a){return Lr(a)&&oa(a)==xe}function Ch(a){return Lr(a)&&oa(a)==ee}function os(a,f,B,Re,rt){return a===f?!0:a==null||f==null||!Lr(a)&&!Lr(f)?a!==a&&f!==f:Th(a,f,B,Re,os,rt)}function Th(a,f,B,Re,rt,Ct){var Vt=Gn(a),ei=Gn(f),_i=Vt?Ut:ra(a),Xi=ei?Ut:ra(f);_i=_i==at?L:_i,Xi=Xi==at?L:Xi;var qi=_i==L,Ki=Xi==L,dn=_i==Xi;if(dn&&Co(a)){if(!Co(f))return!1;Vt=!0,qi=!1}if(dn&&!qi)return Ct||(Ct=new La),Vt||Zo(a)?hc(a,f,B,Re,rt,Ct):Kh(a,f,_i,B,Re,rt,Ct);if(!(B&te)){var gn=qi&&hn.call(a,"__wrapped__"),Ln=Ki&&hn.call(f,"__wrapped__");if(gn||Ln){var qn=gn?a.value():a,Fn=Ln?f.value():f;return Ct||(Ct=new La),rt(qn,Fn,B,Re,Ct)}}return dn?(Ct||(Ct=new La),$h(a,f,B,Re,rt,Ct)):!1}function Ph(a){return Lr(a)&&ra(a)==N}function A0(a,f,B,Re){var rt=B.length,Ct=rt,Vt=!Re;if(a==null)return!Ct;for(a=Ti(a);rt--;){var ei=B[rt];if(Vt&&ei[2]?ei[1]!==a[ei[0]]:!(ei[0]in a))return!1}for(;++rt<Ct;){ei=B[rt];var _i=ei[0],Xi=a[_i],qi=ei[1];if(Vt&&ei[2]){if(Xi===t&&!(_i in a))return!1}else{var Ki=new La;if(Re)var dn=Re(Xi,qi,_i,a,f,Ki);if(!(dn===t?os(qi,Xi,te|ae,Re,Ki):dn))return!1}}return!0}function Ld(a){if(!kr(a)||s2(a))return!1;var f=uo(a)?Wa:Gt;return f.test(Mo(a))}function wh(a){return Lr(a)&&oa(a)==De}function Eh(a){return Lr(a)&&ra(a)==Ye}function Rh(a){return Lr(a)&&i0(a.length)&&!!u[oa(a)]}function Fd(a){return typeof a=="function"?a:a==null?pa:typeof a=="object"?Gn(a)?Nd(a[0],a[1]):Od(a):ru(a)}function M0(a){if(!ds(a))return is(a);var f=[];for(var B in Ti(a))hn.call(a,B)&&B!="constructor"&&f.push(B);return f}function kh(a){if(!kr(a))return u2(a);var f=ds(a),B=[];for(var Re in a)Re=="constructor"&&(f||!hn.call(a,Re))||B.push(Re);return B}function B0(a,f){return a<f}function zd(a,f){var B=-1,Re=ha(a)?ht(a.length):[];return vo(a,function(rt,Ct,Vt){Re[++B]=f(rt,Ct,Vt)}),Re}function Od(a){var f=q0(a);return f.length==1&&f[0][2]?gc(f[0][0],f[0][1]):function(B){return B===a||A0(B,a,f)}}function Nd(a,f){return K0(a)&&_c(f)?gc(qa(a),f):function(B){var Re=sl(B,a);return Re===t&&Re===f?ll(B,a):os(f,Re,te|ae)}}function js(a,f,B,Re,rt){a!==f&&R0(f,function(Ct,Vt){if(rt||(rt=new La),kr(Ct))Ih(a,f,Vt,B,js,Re,rt);else{var ei=Re?Re(Q0(a,Vt),Ct,Vt+"",a,f,rt):t;ei===t&&(ei=Ct),w0(a,Vt,ei)}},xa)}function Ih(a,f,B,Re,rt,Ct,Vt){var ei=Q0(a,B),_i=Q0(f,B),Xi=Vt.get(_i);if(Xi){w0(a,B,Xi);return}var qi=Ct?Ct(ei,_i,B+"",a,f,Vt):t,Ki=qi===t;if(Ki){var dn=Gn(_i),gn=!dn&&Co(_i),Ln=!dn&&!gn&&Zo(_i);qi=_i,dn||gn||Ln?Gn(ei)?qi=ei:Or(ei)?qi=fa(ei):gn?(Ki=!1,qi=Kd(_i,!0)):Ln?(Ki=!1,qi=$d(_i,!0)):qi=[]:us(_i)||Bo(_i)?(qi=ei,Bo(ei)?qi=Xc(ei):(!kr(ei)||uo(ei))&&(qi=mc(_i))):Ki=!1}Ki&&(Vt.set(_i,qi),rt(qi,_i,Re,Ct,Vt),Vt.delete(_i)),w0(a,B,qi)}function jd(a,f){var B=a.length;if(B)return f+=f<0?B:0,co(f,B)?a[f]:t}function Ud(a,f,B){f.length?f=gt(f,function(Ct){return Gn(Ct)?function(Vt){return Do(Vt,Ct.length===1?Ct[0]:Ct)}:Ct}):f=[pa];var Re=-1;f=gt(f,Cr(Dn()));var rt=zd(a,function(Ct,Vt,ei){var _i=gt(f,function(Xi){return Xi(Ct)});return{criteria:_i,index:++Re,value:Ct}});return _r(rt,function(Ct,Vt){return Vh(Ct,Vt,B)})}function Dh(a,f){return Hd(a,f,function(B,Re){return ll(a,Re)})}function Hd(a,f,B){for(var Re=-1,rt=f.length,Ct={};++Re<rt;){var Vt=f[Re],ei=Do(a,Vt);B(ei,Vt)&&ss(Ct,bo(Vt,a),ei)}return Ct}function Ah(a){return function(f){return Do(f,a)}}function L0(a,f,B,Re){var rt=Re?$r:Er,Ct=-1,Vt=f.length,ei=a;for(a===f&&(f=fa(f)),B&&(ei=gt(a,Cr(B)));++Ct<Vt;)for(var _i=0,Xi=f[Ct],qi=B?B(Xi):Xi;(_i=rt(ei,qi,_i,Re))>-1;)ei!==a&&Po.call(ei,_i,1),Po.call(a,_i,1);return a}function Vd(a,f){for(var B=a?f.length:0,Re=B-1;B--;){var rt=f[B];if(B==Re||rt!==Ct){var Ct=rt;co(rt)?Po.call(a,rt,1):N0(a,rt)}}return a}function F0(a,f){return a+jo(Ei()*(f-a+1))}function Mh(a,f,B,Re){for(var rt=-1,Ct=Br(_o((f-a)/(B||1)),0),Vt=ht(Ct);Ct--;)Vt[Re?Ct:++rt]=a,a+=B;return Vt}function z0(a,f){var B="";if(!a||f<1||f>ui)return B;do f%2&&(B+=a),f=jo(f/2),f&&(a+=a);while(f);return B}function Kn(a,f){return el(vc(a,f,pa),a+"")}function Bh(a){return wd(Yo(a))}function Lh(a,f){var B=Yo(a);return Js(B,Io(f,0,B.length))}function ss(a,f,B,Re){if(!kr(a))return a;f=bo(f,a);for(var rt=-1,Ct=f.length,Vt=Ct-1,ei=a;ei!=null&&++rt<Ct;){var _i=qa(f[rt]),Xi=B;if(_i==="__proto__"||_i==="constructor"||_i==="prototype")return a;if(rt!=Vt){var qi=ei[_i];Xi=Re?Re(qi,_i,ei):t,Xi===t&&(Xi=kr(qi)?qi:co(f[rt+1])?[]:{})}ns(ei,_i,Xi),ei=ei[_i]}return a}var Gd=zn?function(a,f){return zn.set(a,f),a}:pa,Fh=wo?function(a,f){return wo(a,"toString",{configurable:!0,enumerable:!1,value:cl(f),writable:!0})}:pa;function zh(a){return Js(Yo(a))}function Ea(a,f,B){var Re=-1,rt=a.length;f<0&&(f=-f>rt?0:rt+f),B=B>rt?rt:B,B<0&&(B+=rt),rt=f>B?0:B-f>>>0,f>>>=0;for(var Ct=ht(rt);++Re<rt;)Ct[Re]=a[Re+f];return Ct}function Oh(a,f){var B;return vo(a,function(Re,rt,Ct){return B=f(Re,rt,Ct),!B}),!!B}function Us(a,f,B){var Re=0,rt=a==null?Re:a.length;if(typeof f=="number"&&f===f&&rt<=Ke){for(;Re<rt;){var Ct=Re+rt>>>1,Vt=a[Ct];Vt!==null&&!ga(Vt)&&(B?Vt<=f:Vt<f)?Re=Ct+1:rt=Ct}return rt}return O0(a,f,pa,B)}function O0(a,f,B,Re){var rt=0,Ct=a==null?0:a.length;if(Ct===0)return 0;f=B(f);for(var Vt=f!==f,ei=f===null,_i=ga(f),Xi=f===t;rt<Ct;){var qi=jo((rt+Ct)/2),Ki=B(a[qi]),dn=Ki!==t,gn=Ki===null,Ln=Ki===Ki,qn=ga(Ki);if(Vt)var Fn=Re||Ln;else Xi?Fn=Ln&&(Re||dn):ei?Fn=Ln&&dn&&(Re||!gn):_i?Fn=Ln&&dn&&!gn&&(Re||!qn):gn||qn?Fn=!1:Fn=Re?Ki<=f:Ki<f;Fn?rt=qi+1:Ct=qi}return ni(Ct,st)}function Wd(a,f){for(var B=-1,Re=a.length,rt=0,Ct=[];++B<Re;){var Vt=a[B],ei=f?f(Vt):Vt;if(!B||!Fa(ei,_i)){var _i=ei;Ct[rt++]=Vt===0?0:Vt}}return Ct}function Zd(a){return typeof a=="number"?a:ga(a)?zi:+a}function _a(a){if(typeof a=="string")return a;if(Gn(a))return gt(a,_a)+"";if(ga(a))return no?no.call(a):"";var f=a+"";return f=="0"&&1/a==-wi?"-0":f}function yo(a,f,B){var Re=-1,rt=We,Ct=a.length,Vt=!0,ei=[],_i=ei;if(B)Vt=!1,rt=ct;else if(Ct>=o){var Xi=f?null:qh(a);if(Xi)return U(Xi);Vt=!1,rt=Ur,_i=new ko}else _i=f?[]:ei;e:for(;++Re<Ct;){var qi=a[Re],Ki=f?f(qi):qi;if(qi=B||qi!==0?qi:0,Vt&&Ki===Ki){for(var dn=_i.length;dn--;)if(_i[dn]===Ki)continue e;f&&_i.push(Ki),ei.push(qi)}else rt(_i,Ki,B)||(_i!==ei&&_i.push(Ki),ei.push(qi))}return ei}function N0(a,f){return f=bo(f,a),a=yc(a,f),a==null||delete a[qa(Ra(f))]}function Yd(a,f,B,Re){return ss(a,f,B(Do(a,f)),Re)}function Hs(a,f,B,Re){for(var rt=a.length,Ct=Re?rt:-1;(Re?Ct--:++Ct<rt)&&f(a[Ct],Ct,a););return B?Ea(a,Re?0:Ct,Re?Ct+1:rt):Ea(a,Re?Ct+1:0,Re?rt:Ct)}function Xd(a,f){var B=a;return B instanceof rr&&(B=B.value()),xi(f,function(Re,rt){return rt.func.apply(rt.thisArg,It([Re],rt.args))},B)}function j0(a,f,B){var Re=a.length;if(Re<2)return Re?yo(a[0]):[];for(var rt=-1,Ct=ht(Re);++rt<Re;)for(var Vt=a[rt],ei=-1;++ei<Re;)ei!=rt&&(Ct[rt]=rs(Ct[rt]||Vt,a[ei],f,B));return yo(ea(Ct,1),f,B)}function qd(a,f,B){for(var Re=-1,rt=a.length,Ct=f.length,Vt={};++Re<rt;){var ei=Re<Ct?f[Re]:t;B(Vt,a[Re],ei)}return Vt}function U0(a){return Or(a)?a:[]}function H0(a){return typeof a=="function"?a:pa}function bo(a,f){return Gn(a)?a:K0(a,f)?[a]:Tc(xr(a))}var Nh=Kn;function So(a,f,B){var Re=a.length;return B=B===t?Re:B,!f&&B>=Re?a:Ea(a,f,B)}var Jd=Eo||function(a){return H.clearTimeout(a)};function Kd(a,f){if(f)return a.slice();var B=a.length,Re=ua?ua(B):new a.constructor(B);return a.copy(Re),Re}function V0(a){var f=new a.constructor(a.byteLength);return new to(f).set(new to(a)),f}function jh(a,f){var B=f?V0(a.buffer):a.buffer;return new a.constructor(B,a.byteOffset,a.byteLength)}function Uh(a){var f=new a.constructor(a.source,Me.exec(a));return f.lastIndex=a.lastIndex,f}function Hh(a){return Ba?Ti(Ba.call(a)):{}}function $d(a,f){var B=f?V0(a.buffer):a.buffer;return new a.constructor(B,a.byteOffset,a.length)}function Qd(a,f){if(a!==f){var B=a!==t,Re=a===null,rt=a===a,Ct=ga(a),Vt=f!==t,ei=f===null,_i=f===f,Xi=ga(f);if(!ei&&!Xi&&!Ct&&a>f||Ct&&Vt&&_i&&!ei&&!Xi||Re&&Vt&&_i||!B&&_i||!rt)return 1;if(!Re&&!Ct&&!Xi&&a<f||Xi&&B&&rt&&!Re&&!Ct||ei&&B&&rt||!Vt&&rt||!_i)return-1}return 0}function Vh(a,f,B){for(var Re=-1,rt=a.criteria,Ct=f.criteria,Vt=rt.length,ei=B.length;++Re<Vt;){var _i=Qd(rt[Re],Ct[Re]);if(_i){if(Re>=ei)return _i;var Xi=B[Re];return _i*(Xi=="desc"?-1:1)}}return a.index-f.index}function ec(a,f,B,Re){for(var rt=-1,Ct=a.length,Vt=B.length,ei=-1,_i=f.length,Xi=Br(Ct-Vt,0),qi=ht(_i+Xi),Ki=!Re;++ei<_i;)qi[ei]=f[ei];for(;++rt<Vt;)(Ki||rt<Ct)&&(qi[B[rt]]=a[rt]);for(;Xi--;)qi[ei++]=a[rt++];return qi}function tc(a,f,B,Re){for(var rt=-1,Ct=a.length,Vt=-1,ei=B.length,_i=-1,Xi=f.length,qi=Br(Ct-ei,0),Ki=ht(qi+Xi),dn=!Re;++rt<qi;)Ki[rt]=a[rt];for(var gn=rt;++_i<Xi;)Ki[gn+_i]=f[_i];for(;++Vt<ei;)(dn||rt<Ct)&&(Ki[gn+B[Vt]]=a[rt++]);return Ki}function fa(a,f){var B=-1,Re=a.length;for(f||(f=ht(Re));++B<Re;)f[B]=a[B];return f}function Xa(a,f,B,Re){var rt=!B;B||(B={});for(var Ct=-1,Vt=f.length;++Ct<Vt;){var ei=f[Ct],_i=Re?Re(B[ei],a[ei],ei,B,a):t;_i===t&&(_i=a[ei]),rt?oo(B,ei,_i):ns(B,ei,_i)}return B}function Gh(a,f){return Xa(a,J0(a),f)}function Wh(a,f){return Xa(a,xc(a),f)}function Vs(a,f){return function(B,Re){var rt=Gn(B)?h:hh,Ct=f?f():{};return rt(B,a,Dn(Re,2),Ct)}}function Vo(a){return Kn(function(f,B){var Re=-1,rt=B.length,Ct=rt>1?B[rt-1]:t,Vt=rt>2?B[2]:t;for(Ct=a.length>3&&typeof Ct=="function"?(rt--,Ct):t,Vt&&sa(B[0],B[1],Vt)&&(Ct=rt<3?t:Ct,rt=1),f=Ti(f);++Re<rt;){var ei=B[Re];ei&&a(f,ei,Re,Ct)}return f})}function ic(a,f){return function(B,Re){if(B==null)return B;if(!ha(B))return a(B,Re);for(var rt=B.length,Ct=f?rt:-1,Vt=Ti(B);(f?Ct--:++Ct<rt)&&Re(Vt[Ct],Ct,Vt)!==!1;);return B}}function nc(a){return function(f,B,Re){for(var rt=-1,Ct=Ti(f),Vt=Re(f),ei=Vt.length;ei--;){var _i=Vt[a?ei:++rt];if(B(Ct[_i],_i,Ct)===!1)break}return f}}function Zh(a,f,B){var Re=f&de,rt=ls(a);function Ct(){var Vt=this&&this!==H&&this instanceof Ct?rt:a;return Vt.apply(Re?B:this,arguments)}return Ct}function rc(a){return function(f){f=xr(f);var B=Yt(f)?it(f):t,Re=B?B[0]:f.charAt(0),rt=B?So(B,1).join(""):f.slice(1);return Re[a]()+rt}}function Go(a){return function(f){return xi(iu(tu(f).replace(Ta,"")),a,"")}}function ls(a){return function(){var f=arguments;switch(f.length){case 0:return new a;case 1:return new a(f[0]);case 2:return new a(f[0],f[1]);case 3:return new a(f[0],f[1],f[2]);case 4:return new a(f[0],f[1],f[2],f[3]);case 5:return new a(f[0],f[1],f[2],f[3],f[4]);case 6:return new a(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new a(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var B=Ho(a.prototype),Re=a.apply(B,f);return kr(Re)?Re:B}}function Yh(a,f,B){var Re=ls(a);function rt(){for(var Ct=arguments.length,Vt=ht(Ct),ei=Ct,_i=Wo(rt);ei--;)Vt[ei]=arguments[ei];var Xi=Ct<3&&Vt[0]!==_i&&Vt[Ct-1]!==_i?[]:_(Vt,_i);if(Ct-=Xi.length,Ct<B)return dc(a,f,Gs,rt.placeholder,t,Vt,Xi,t,t,B-Ct);var qi=this&&this!==H&&this instanceof rt?Re:a;return D(qi,this,Vt)}return rt}function ac(a){return function(f,B,Re){var rt=Ti(f);if(!ha(f)){var Ct=Dn(B,3);f=qr(f),B=function(ei){return Ct(rt[ei],ei,rt)}}var Vt=a(f,B,Re);return Vt>-1?rt[Ct?f[Vt]:Vt]:t}}function oc(a){return lo(function(f){var B=f.length,Re=B,rt=Pa.prototype.thru;for(a&&f.reverse();Re--;){var Ct=f[Re];if(typeof Ct!="function")throw new $i(d);if(rt&&!Vt&&Xs(Ct)=="wrapper")var Vt=new Pa([],!0)}for(Re=Vt?Re:B;++Re<B;){Ct=f[Re];var ei=Xs(Ct),_i=ei=="wrapper"?X0(Ct):t;_i&&$0(_i[0])&&_i[1]==(ne|Ve|x|Q)&&!_i[4].length&&_i[9]==1?Vt=Vt[Xs(_i[0])].apply(Vt,_i[3]):Vt=Ct.length==1&&$0(Ct)?Vt[ei]():Vt.thru(Ct)}return function(){var Xi=arguments,qi=Xi[0];if(Vt&&Xi.length==1&&Gn(qi))return Vt.plant(qi).value();for(var Ki=0,dn=B?f[Ki].apply(this,Xi):qi;++Ki<B;)dn=f[Ki].call(this,dn);return dn}})}function Gs(a,f,B,Re,rt,Ct,Vt,ei,_i,Xi){var qi=f&ne,Ki=f&de,dn=f&ie,gn=f&(Ve|ue),Ln=f&ye,qn=dn?t:ls(a);function Fn(){for(var er=arguments.length,sr=ht(er),va=er;va--;)sr[va]=arguments[va];if(gn)var la=Wo(Fn),ya=Se(sr,la);if(Re&&(sr=ec(sr,Re,rt,gn)),Ct&&(sr=tc(sr,Ct,Vt,gn)),er-=ya,gn&&er<Xi){var Nr=_(sr,la);return dc(a,f,Gs,Fn.placeholder,B,sr,Nr,ei,_i,Xi-er)}var za=Ki?B:this,ho=dn?za[a]:a;return er=sr.length,ei?sr=h2(sr,ei):Ln&&er>1&&sr.reverse(),qi&&_i<er&&(sr.length=_i),this&&this!==H&&this instanceof Fn&&(ho=qn||ls(ho)),ho.apply(za,sr)}return Fn}function sc(a,f){return function(B,Re){return bh(B,a,f(Re),{})}}function Ws(a,f){return function(B,Re){var rt;if(B===t&&Re===t)return f;if(B!==t&&(rt=B),Re!==t){if(rt===t)return Re;typeof B=="string"||typeof Re=="string"?(B=_a(B),Re=_a(Re)):(B=Zd(B),Re=Zd(Re)),rt=a(B,Re)}return rt}}function G0(a){return lo(function(f){return f=gt(f,Cr(Dn())),Kn(function(B){var Re=this;return a(f,function(rt){return D(rt,Re,B)})})})}function Zs(a,f){f=f===t?" ":_a(f);var B=f.length;if(B<2)return B?z0(f,a):f;var Re=z0(f,_o(a/Le(f)));return Yt(f)?So(it(Re),0,a).join(""):Re.slice(0,a)}function Xh(a,f,B,Re){var rt=f&de,Ct=ls(a);function Vt(){for(var ei=-1,_i=arguments.length,Xi=-1,qi=Re.length,Ki=ht(qi+_i),dn=this&&this!==H&&this instanceof Vt?Ct:a;++Xi<qi;)Ki[Xi]=Re[Xi];for(;_i--;)Ki[Xi++]=arguments[++ei];return D(dn,rt?B:this,Ki)}return Vt}function lc(a){return function(f,B,Re){return Re&&typeof Re!="number"&&sa(f,B,Re)&&(B=Re=t),f=fo(f),B===t?(B=f,f=0):B=fo(B),Re=Re===t?f<B?1:-1:fo(Re),Mh(f,B,Re,a)}}function Ys(a){return function(f,B){return typeof f=="string"&&typeof B=="string"||(f=ka(f),B=ka(B)),a(f,B)}}function dc(a,f,B,Re,rt,Ct,Vt,ei,_i,Xi){var qi=f&Ve,Ki=qi?Vt:t,dn=qi?t:Vt,gn=qi?Ct:t,Ln=qi?t:Ct;f|=qi?x:O,f&=~(qi?O:x),f&we||(f&=~(de|ie));var qn=[a,f,rt,gn,Ki,Ln,dn,ei,_i,Xi],Fn=B.apply(t,qn);return $0(a)&&bc(Fn,qn),Fn.placeholder=Re,Sc(Fn,a,f)}function W0(a){var f=Mi[a];return function(B,Re){if(B=ka(B),Re=Re==null?0:ni(Xn(Re),292),Re&&Uo(B)){var rt=(xr(B)+"e").split("e"),Ct=f(rt[0]+"e"+(+rt[1]+Re));return rt=(xr(Ct)+"e").split("e"),+(rt[0]+"e"+(+rt[1]-Re))}return f(B)}}var qh=cn&&1/U(new cn([,-0]))[1]==wi?function(a){return new cn(a)}:hl;function cc(a){return function(f){var B=ra(f);return B==N?Pn(f):B==Ye?W(f):Qr(f,a(f))}}function so(a,f,B,Re,rt,Ct,Vt,ei){var _i=f&ie;if(!_i&&typeof a!="function")throw new $i(d);var Xi=Re?Re.length:0;if(Xi||(f&=~(x|O),Re=rt=t),Vt=Vt===t?Vt:Br(Xn(Vt),0),ei=ei===t?ei:Xn(ei),Xi-=rt?rt.length:0,f&O){var qi=Re,Ki=rt;Re=rt=t}var dn=_i?t:X0(a),gn=[a,f,B,Re,rt,qi,Ki,Ct,Vt,ei];if(dn&&c2(gn,dn),a=gn[0],f=gn[1],B=gn[2],Re=gn[3],rt=gn[4],ei=gn[9]=gn[9]===t?_i?0:a.length:Br(gn[9]-Xi,0),!ei&&f&(Ve|ue)&&(f&=~(Ve|ue)),!f||f==de)var Ln=Zh(a,f,B);else f==Ve||f==ue?Ln=Yh(a,f,ei):(f==x||f==(de|x))&&!rt.length?Ln=Xh(a,f,B,Re):Ln=Gs.apply(t,gn);var qn=dn?Gd:bc;return Sc(qn(Ln,gn),a,f)}function uc(a,f,B,Re){return a===t||Fa(a,mn[B])&&!hn.call(Re,B)?f:a}function fc(a,f,B,Re,rt,Ct){return kr(a)&&kr(f)&&(Ct.set(f,a),js(a,f,t,fc,Ct),Ct.delete(f)),a}function Jh(a){return us(a)?t:a}function hc(a,f,B,Re,rt,Ct){var Vt=B&te,ei=a.length,_i=f.length;if(ei!=_i&&!(Vt&&_i>ei))return!1;var Xi=Ct.get(a),qi=Ct.get(f);if(Xi&&qi)return Xi==f&&qi==a;var Ki=-1,dn=!0,gn=B&ae?new ko:t;for(Ct.set(a,f),Ct.set(f,a);++Ki<ei;){var Ln=a[Ki],qn=f[Ki];if(Re)var Fn=Vt?Re(qn,Ln,Ki,f,a,Ct):Re(Ln,qn,Ki,a,f,Ct);if(Fn!==t){if(Fn)continue;dn=!1;break}if(gn){if(!Ji(f,function(er,sr){if(!Ur(gn,sr)&&(Ln===er||rt(Ln,er,B,Re,Ct)))return gn.push(sr)})){dn=!1;break}}else if(!(Ln===qn||rt(Ln,qn,B,Re,Ct))){dn=!1;break}}return Ct.delete(a),Ct.delete(f),dn}function Kh(a,f,B,Re,rt,Ct,Vt){switch(B){case ke:if(a.byteLength!=f.byteLength||a.byteOffset!=f.byteOffset)return!1;a=a.buffer,f=f.buffer;case xe:return!(a.byteLength!=f.byteLength||!Ct(new to(a),new to(f)));case kt:case ee:case fe:return Fa(+a,+f);case P:return a.name==f.name&&a.message==f.message;case De:case et:return a==f+"";case N:var ei=Pn;case Ye:var _i=Re&te;if(ei||(ei=U),a.size!=f.size&&!_i)return!1;var Xi=Vt.get(a);if(Xi)return Xi==f;Re|=ae,Vt.set(a,f);var qi=hc(ei(a),ei(f),Re,rt,Ct,Vt);return Vt.delete(a),qi;case R:if(Ba)return Ba.call(a)==Ba.call(f)}return!1}function $h(a,f,B,Re,rt,Ct){var Vt=B&te,ei=Z0(a),_i=ei.length,Xi=Z0(f),qi=Xi.length;if(_i!=qi&&!Vt)return!1;for(var Ki=_i;Ki--;){var dn=ei[Ki];if(!(Vt?dn in f:hn.call(f,dn)))return!1}var gn=Ct.get(a),Ln=Ct.get(f);if(gn&&Ln)return gn==f&&Ln==a;var qn=!0;Ct.set(a,f),Ct.set(f,a);for(var Fn=Vt;++Ki<_i;){dn=ei[Ki];var er=a[dn],sr=f[dn];if(Re)var va=Vt?Re(sr,er,dn,f,a,Ct):Re(er,sr,dn,a,f,Ct);if(!(va===t?er===sr||rt(er,sr,B,Re,Ct):va)){qn=!1;break}Fn||(Fn=dn=="constructor")}if(qn&&!Fn){var la=a.constructor,ya=f.constructor;la!=ya&&"constructor"in a&&"constructor"in f&&!(typeof la=="function"&&la instanceof la&&typeof ya=="function"&&ya instanceof ya)&&(qn=!1)}return Ct.delete(a),Ct.delete(f),qn}function lo(a){return el(vc(a,t,Rc),a+"")}function Z0(a){return Md(a,qr,J0)}function Y0(a){return Md(a,xa,xc)}var X0=zn?function(a){return zn.get(a)}:hl;function Xs(a){for(var f=a.name+"",B=Vn[f],Re=hn.call(Vn,f)?B.length:0;Re--;){var rt=B[Re],Ct=rt.func;if(Ct==null||Ct==a)return rt.name}return f}function Wo(a){var f=hn.call(xt,"placeholder")?xt:a;return f.placeholder}function Dn(){var a=xt.iteratee||ul;return a=a===ul?Fd:a,arguments.length?a(arguments[0],arguments[1]):a}function qs(a,f){var B=a.__data__;return o2(f)?B[typeof f=="string"?"string":"hash"]:B.map}function q0(a){for(var f=qr(a),B=f.length;B--;){var Re=f[B],rt=a[Re];f[B]=[Re,rt,_c(rt)]}return f}function Ao(a,f){var B=Pt(a,f);return Ld(B)?B:t}function Qh(a){var f=hn.call(a,na),B=a[na];try{a[na]=t;var Re=!0}catch{}var rt=ur.call(a);return Re&&(f?a[na]=B:delete a[na]),rt}var J0=go?function(a){return a==null?[]:(a=Ti(a),je(go(a),function(f){return Ls.call(a,f)}))}:xl,xc=go?function(a){for(var f=[];a;)It(f,J0(a)),a=Ma(a);return f}:xl,ra=oa;(Qi&&ra(new Qi(new ArrayBuffer(1)))!=ke||on&&ra(new on)!=N||xn&&ra(xn.resolve())!=re||cn&&ra(new cn)!=Ye||Sn&&ra(new Sn)!=G)&&(ra=function(a){var f=oa(a),B=f==L?a.constructor:t,Re=B?Mo(B):"";if(Re)switch(Re){case Zn:return ke;case dr:return N;case br:return re;case aa:return Ye;case Xr:return G}return f});function e2(a,f,B){for(var Re=-1,rt=B.length;++Re<rt;){var Ct=B[Re],Vt=Ct.size;switch(Ct.type){case"drop":a+=Vt;break;case"dropRight":f-=Vt;break;case"take":f=ni(f,a+Vt);break;case"takeRight":a=Br(a,f-Vt);break}}return{start:a,end:f}}function t2(a){var f=a.match(j);return f?f[1].split(T):[]}function pc(a,f,B){f=bo(f,a);for(var Re=-1,rt=f.length,Ct=!1;++Re<rt;){var Vt=qa(f[Re]);if(!(Ct=a!=null&&B(a,Vt)))break;a=a[Vt]}return Ct||++Re!=rt?Ct:(rt=a==null?0:a.length,!!rt&&i0(rt)&&co(Vt,rt)&&(Gn(a)||Bo(a)))}function i2(a){var f=a.length,B=new a.constructor(f);return f&&typeof a[0]=="string"&&hn.call(a,"index")&&(B.index=a.index,B.input=a.input),B}function mc(a){return typeof a.constructor=="function"&&!ds(a)?Ho(Ma(a)):{}}function n2(a,f,B){var Re=a.constructor;switch(f){case xe:return V0(a);case kt:case ee:return new Re(+a);case ke:return jh(a,B);case ce:case X:case Be:case lt:case dt:case Lt:case qt:case Si:case he:return $d(a,B);case N:return new Re;case fe:case et:return new Re(a);case De:return Uh(a);case Ye:return new Re;case R:return Hh(a)}}function r2(a,f){var B=f.length;if(!B)return a;var Re=B-1;return f[Re]=(B>1?"& ":"")+f[Re],f=f.join(B>2?", ":" "),a.replace(At,`{
/* [wrapped with `+f+`] */
`)}function a2(a){return Gn(a)||Bo(a)||!!(Za&&a&&a[Za])}function co(a,f){var B=typeof a;return f=f??ui,!!f&&(B=="number"||B!="symbol"&&Ee.test(a))&&a>-1&&a%1==0&&a<f}function sa(a,f,B){if(!kr(B))return!1;var Re=typeof f;return(Re=="number"?ha(B)&&co(f,B.length):Re=="string"&&f in B)?Fa(B[f],a):!1}function K0(a,f){if(Gn(a))return!1;var B=typeof a;return B=="number"||B=="symbol"||B=="boolean"||a==null||ga(a)?!0:mi.test(a)||!ot.test(a)||f!=null&&a in Ti(f)}function o2(a){var f=typeof a;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?a!=="__proto__":a===null}function $0(a){var f=Xs(a),B=xt[f];if(typeof B!="function"||!(f in rr.prototype))return!1;if(a===B)return!0;var Re=X0(B);return!!Re&&a===Re[0]}function s2(a){return!!cr&&cr in a}var l2=Mn?uo:pl;function ds(a){var f=a&&a.constructor,B=typeof f=="function"&&f.prototype||mn;return a===B}function _c(a){return a===a&&!kr(a)}function gc(a,f){return function(B){return B==null?!1:B[a]===f&&(f!==t||a in Ti(B))}}function d2(a){var f=e0(a,function(Re){return B.size===C&&B.clear(),Re}),B=f.cache;return f}function c2(a,f){var B=a[1],Re=f[1],rt=B|Re,Ct=rt<(de|ie|ne),Vt=Re==ne&&B==Ve||Re==ne&&B==Q&&a[7].length<=f[8]||Re==(ne|Q)&&f[7].length<=f[8]&&B==Ve;if(!(Ct||Vt))return a;Re&de&&(a[2]=f[2],rt|=B&de?0:we);var ei=f[3];if(ei){var _i=a[3];a[3]=_i?ec(_i,ei,f[4]):ei,a[4]=_i?_(a[3],y):f[4]}return ei=f[5],ei&&(_i=a[5],a[5]=_i?tc(_i,ei,f[6]):ei,a[6]=_i?_(a[5],y):f[6]),ei=f[7],ei&&(a[7]=ei),Re&ne&&(a[8]=a[8]==null?f[8]:ni(a[8],f[8])),a[9]==null&&(a[9]=f[9]),a[0]=f[0],a[1]=rt,a}function u2(a){var f=[];if(a!=null)for(var B in Ti(a))f.push(B);return f}function f2(a){return ur.call(a)}function vc(a,f,B){return f=Br(f===t?a.length-1:f,0),function(){for(var Re=arguments,rt=-1,Ct=Br(Re.length-f,0),Vt=ht(Ct);++rt<Ct;)Vt[rt]=Re[f+rt];rt=-1;for(var ei=ht(f+1);++rt<f;)ei[rt]=Re[rt];return ei[f]=B(Vt),D(a,this,ei)}}function yc(a,f){return f.length<2?a:Do(a,Ea(f,0,-1))}function h2(a,f){for(var B=a.length,Re=ni(f.length,B),rt=fa(a);Re--;){var Ct=f[Re];a[Re]=co(Ct,B)?rt[Ct]:t}return a}function Q0(a,f){if(!(f==="constructor"&&typeof a[f]=="function")&&f!="__proto__")return a[f]}var bc=Cc(Gd),cs=No||function(a,f){return H.setTimeout(a,f)},el=Cc(Fh);function Sc(a,f,B){var Re=f+"";return el(a,r2(Re,x2(t2(Re),B)))}function Cc(a){var f=0,B=0;return function(){var Re=Bt(),rt=M-(Re-B);if(B=Re,rt>0){if(++f>=Qe)return arguments[0]}else f=0;return a.apply(t,arguments)}}function Js(a,f){var B=-1,Re=a.length,rt=Re-1;for(f=f===t?Re:f;++B<f;){var Ct=F0(B,rt),Vt=a[Ct];a[Ct]=a[B],a[B]=Vt}return a.length=f,a}var Tc=d2(function(a){var f=[];return a.charCodeAt(0)===46&&f.push(""),a.replace(Pi,function(B,Re,rt,Ct){f.push(rt?Ct.replace(be,"$1"):Re||B)}),f});function qa(a){if(typeof a=="string"||ga(a))return a;var f=a+"";return f=="0"&&1/a==-wi?"-0":f}function Mo(a){if(a!=null){try{return wn.call(a)}catch{}try{return a+""}catch{}}return""}function x2(a,f){return k(Ne,function(B){var Re="_."+B[0];f&B[1]&&!We(a,Re)&&a.push(Re)}),a.sort()}function Pc(a){if(a instanceof rr)return a.clone();var f=new Pa(a.__wrapped__,a.__chain__);return f.__actions__=fa(a.__actions__),f.__index__=a.__index__,f.__values__=a.__values__,f}function p2(a,f,B){(B?sa(a,f,B):f===t)?f=1:f=Br(Xn(f),0);var Re=a==null?0:a.length;if(!Re||f<1)return[];for(var rt=0,Ct=0,Vt=ht(_o(Re/f));rt<Re;)Vt[Ct++]=Ea(a,rt,rt+=f);return Vt}function m2(a){for(var f=-1,B=a==null?0:a.length,Re=0,rt=[];++f<B;){var Ct=a[f];Ct&&(rt[Re++]=Ct)}return rt}function _2(){var a=arguments.length;if(!a)return[];for(var f=ht(a-1),B=arguments[0],Re=a;Re--;)f[Re-1]=arguments[Re];return It(Gn(B)?fa(B):[B],ea(f,1))}var g2=Kn(function(a,f){return Or(a)?rs(a,ea(f,1,Or,!0)):[]}),v2=Kn(function(a,f){var B=Ra(f);return Or(B)&&(B=t),Or(a)?rs(a,ea(f,1,Or,!0),Dn(B,2)):[]}),y2=Kn(function(a,f){var B=Ra(f);return Or(B)&&(B=t),Or(a)?rs(a,ea(f,1,Or,!0),t,B):[]});function b2(a,f,B){var Re=a==null?0:a.length;return Re?(f=B||f===t?1:Xn(f),Ea(a,f<0?0:f,Re)):[]}function S2(a,f,B){var Re=a==null?0:a.length;return Re?(f=B||f===t?1:Xn(f),f=Re-f,Ea(a,0,f<0?0:f)):[]}function C2(a,f){return a&&a.length?Hs(a,Dn(f,3),!0,!0):[]}function T2(a,f){return a&&a.length?Hs(a,Dn(f,3),!0):[]}function P2(a,f,B,Re){var rt=a==null?0:a.length;return rt?(B&&typeof B!="number"&&sa(a,f,B)&&(B=0,Re=rt),_h(a,f,B,Re)):[]}function wc(a,f,B){var Re=a==null?0:a.length;if(!Re)return-1;var rt=B==null?0:Xn(B);return rt<0&&(rt=Br(Re+rt,0)),Qn(a,Dn(f,3),rt)}function Ec(a,f,B){var Re=a==null?0:a.length;if(!Re)return-1;var rt=Re-1;return B!==t&&(rt=Xn(B),rt=B<0?Br(Re+rt,0):ni(rt,Re-1)),Qn(a,Dn(f,3),rt,!0)}function Rc(a){var f=a==null?0:a.length;return f?ea(a,1):[]}function w2(a){var f=a==null?0:a.length;return f?ea(a,wi):[]}function E2(a,f){var B=a==null?0:a.length;return B?(f=f===t?1:Xn(f),ea(a,f)):[]}function R2(a){for(var f=-1,B=a==null?0:a.length,Re={};++f<B;){var rt=a[f];Re[rt[0]]=rt[1]}return Re}function kc(a){return a&&a.length?a[0]:t}function k2(a,f,B){var Re=a==null?0:a.length;if(!Re)return-1;var rt=B==null?0:Xn(B);return rt<0&&(rt=Br(Re+rt,0)),Er(a,f,rt)}function I2(a){var f=a==null?0:a.length;return f?Ea(a,0,-1):[]}var D2=Kn(function(a){var f=gt(a,U0);return f.length&&f[0]===a[0]?D0(f):[]}),A2=Kn(function(a){var f=Ra(a),B=gt(a,U0);return f===Ra(B)?f=t:B.pop(),B.length&&B[0]===a[0]?D0(B,Dn(f,2)):[]}),M2=Kn(function(a){var f=Ra(a),B=gt(a,U0);return f=typeof f=="function"?f:t,f&&B.pop(),B.length&&B[0]===a[0]?D0(B,t,f):[]});function B2(a,f){return a==null?"":P0.call(a,f)}function Ra(a){var f=a==null?0:a.length;return f?a[f-1]:t}function L2(a,f,B){var Re=a==null?0:a.length;if(!Re)return-1;var rt=Re;return B!==t&&(rt=Xn(B),rt=rt<0?Br(Re+rt,0):ni(rt,Re-1)),f===f?Ie(a,f,rt):Qn(a,Rr,rt,!0)}function F2(a,f){return a&&a.length?jd(a,Xn(f)):t}var z2=Kn(Ic);function Ic(a,f){return a&&a.length&&f&&f.length?L0(a,f):a}function O2(a,f,B){return a&&a.length&&f&&f.length?L0(a,f,Dn(B,2)):a}function N2(a,f,B){return a&&a.length&&f&&f.length?L0(a,f,t,B):a}var j2=lo(function(a,f){var B=a==null?0:a.length,Re=E0(a,f);return Vd(a,gt(f,function(rt){return co(rt,B)?+rt:rt}).sort(Qd)),Re});function U2(a,f){var B=[];if(!(a&&a.length))return B;var Re=-1,rt=[],Ct=a.length;for(f=Dn(f,3);++Re<Ct;){var Vt=a[Re];f(Vt,Re,a)&&(B.push(Vt),rt.push(Re))}return Vd(a,rt),B}function tl(a){return a==null?a:Wi.call(a)}function H2(a,f,B){var Re=a==null?0:a.length;return Re?(B&&typeof B!="number"&&sa(a,f,B)?(f=0,B=Re):(f=f==null?0:Xn(f),B=B===t?Re:Xn(B)),Ea(a,f,B)):[]}function V2(a,f){return Us(a,f)}function G2(a,f,B){return O0(a,f,Dn(B,2))}function W2(a,f){var B=a==null?0:a.length;if(B){var Re=Us(a,f);if(Re<B&&Fa(a[Re],f))return Re}return-1}function Z2(a,f){return Us(a,f,!0)}function Y2(a,f,B){return O0(a,f,Dn(B,2),!0)}function X2(a,f){var B=a==null?0:a.length;if(B){var Re=Us(a,f,!0)-1;if(Fa(a[Re],f))return Re}return-1}function q2(a){return a&&a.length?Wd(a):[]}function J2(a,f){return a&&a.length?Wd(a,Dn(f,2)):[]}function K2(a){var f=a==null?0:a.length;return f?Ea(a,1,f):[]}function $2(a,f,B){return a&&a.length?(f=B||f===t?1:Xn(f),Ea(a,0,f<0?0:f)):[]}function Q2(a,f,B){var Re=a==null?0:a.length;return Re?(f=B||f===t?1:Xn(f),f=Re-f,Ea(a,f<0?0:f,Re)):[]}function ex(a,f){return a&&a.length?Hs(a,Dn(f,3),!1,!0):[]}function tx(a,f){return a&&a.length?Hs(a,Dn(f,3)):[]}var ix=Kn(function(a){return yo(ea(a,1,Or,!0))}),nx=Kn(function(a){var f=Ra(a);return Or(f)&&(f=t),yo(ea(a,1,Or,!0),Dn(f,2))}),rx=Kn(function(a){var f=Ra(a);return f=typeof f=="function"?f:t,yo(ea(a,1,Or,!0),t,f)});function ax(a){return a&&a.length?yo(a):[]}function ox(a,f){return a&&a.length?yo(a,Dn(f,2)):[]}function sx(a,f){return f=typeof f=="function"?f:t,a&&a.length?yo(a,t,f):[]}function il(a){if(!(a&&a.length))return[];var f=0;return a=je(a,function(B){if(Or(B))return f=Br(B.length,f),!0}),Aa(f,function(B){return gt(a,Tn(B))})}function Dc(a,f){if(!(a&&a.length))return[];var B=il(a);return f==null?B:gt(B,function(Re){return D(f,t,Re)})}var lx=Kn(function(a,f){return Or(a)?rs(a,f):[]}),dx=Kn(function(a){return j0(je(a,Or))}),cx=Kn(function(a){var f=Ra(a);return Or(f)&&(f=t),j0(je(a,Or),Dn(f,2))}),ux=Kn(function(a){var f=Ra(a);return f=typeof f=="function"?f:t,j0(je(a,Or),t,f)}),fx=Kn(il);function hx(a,f){return qd(a||[],f||[],ns)}function xx(a,f){return qd(a||[],f||[],ss)}var px=Kn(function(a){var f=a.length,B=f>1?a[f-1]:t;return B=typeof B=="function"?(a.pop(),B):t,Dc(a,B)});function Ac(a){var f=xt(a);return f.__chain__=!0,f}function mx(a,f){return f(a),a}function Ks(a,f){return f(a)}var _x=lo(function(a){var f=a.length,B=f?a[0]:0,Re=this.__wrapped__,rt=function(Ct){return E0(Ct,a)};return f>1||this.__actions__.length||!(Re instanceof rr)||!co(B)?this.thru(rt):(Re=Re.slice(B,+B+(f?1:0)),Re.__actions__.push({func:Ks,args:[rt],thisArg:t}),new Pa(Re,this.__chain__).thru(function(Ct){return f&&!Ct.length&&Ct.push(t),Ct}))});function gx(){return Ac(this)}function vx(){return new Pa(this.value(),this.__chain__)}function yx(){this.__values__===t&&(this.__values__=Zc(this.value()));var a=this.__index__>=this.__values__.length,f=a?t:this.__values__[this.__index__++];return{done:a,value:f}}function bx(){return this}function Sx(a){for(var f,B=this;B instanceof Fs;){var Re=Pc(B);Re.__index__=0,Re.__values__=t,f?rt.__wrapped__=Re:f=Re;var rt=Re;B=B.__wrapped__}return rt.__wrapped__=a,f}function Cx(){var a=this.__wrapped__;if(a instanceof rr){var f=a;return this.__actions__.length&&(f=new rr(this)),f=f.reverse(),f.__actions__.push({func:Ks,args:[tl],thisArg:t}),new Pa(f,this.__chain__)}return this.thru(tl)}function Tx(){return Xd(this.__wrapped__,this.__actions__)}var Px=Vs(function(a,f,B){hn.call(a,B)?++a[B]:oo(a,B,1)});function wx(a,f,B){var Re=Gn(a)?ve:mh;return B&&sa(a,f,B)&&(f=t),Re(a,Dn(f,3))}function Ex(a,f){var B=Gn(a)?je:Dd;return B(a,Dn(f,3))}var Rx=ac(wc),kx=ac(Ec);function Ix(a,f){return ea($s(a,f),1)}function Dx(a,f){return ea($s(a,f),wi)}function Ax(a,f,B){return B=B===t?1:Xn(B),ea($s(a,f),B)}function Mc(a,f){var B=Gn(a)?k:vo;return B(a,Dn(f,3))}function Bc(a,f){var B=Gn(a)?V:Id;return B(a,Dn(f,3))}var Mx=Vs(function(a,f,B){hn.call(a,B)?a[B].push(f):oo(a,B,[f])});function Bx(a,f,B,Re){a=ha(a)?a:Yo(a),B=B&&!Re?Xn(B):0;var rt=a.length;return B<0&&(B=Br(rt+B,0)),n0(a)?B<=rt&&a.indexOf(f,B)>-1:!!rt&&Er(a,f,B)>-1}var Lx=Kn(function(a,f,B){var Re=-1,rt=typeof f=="function",Ct=ha(a)?ht(a.length):[];return vo(a,function(Vt){Ct[++Re]=rt?D(f,Vt,B):as(Vt,f,B)}),Ct}),Fx=Vs(function(a,f,B){oo(a,B,f)});function $s(a,f){var B=Gn(a)?gt:zd;return B(a,Dn(f,3))}function zx(a,f,B,Re){return a==null?[]:(Gn(f)||(f=f==null?[]:[f]),B=Re?t:B,Gn(B)||(B=B==null?[]:[B]),Ud(a,f,B))}var Ox=Vs(function(a,f,B){a[B?0:1].push(f)},function(){return[[],[]]});function Nx(a,f,B){var Re=Gn(a)?xi:pr,rt=arguments.length<3;return Re(a,Dn(f,4),B,rt,vo)}function jx(a,f,B){var Re=Gn(a)?yi:pr,rt=arguments.length<3;return Re(a,Dn(f,4),B,rt,Id)}function Ux(a,f){var B=Gn(a)?je:Dd;return B(a,t0(Dn(f,3)))}function Hx(a){var f=Gn(a)?wd:Bh;return f(a)}function Vx(a,f,B){(B?sa(a,f,B):f===t)?f=1:f=Xn(f);var Re=Gn(a)?uh:Lh;return Re(a,f)}function Gx(a){var f=Gn(a)?fh:zh;return f(a)}function Wx(a){if(a==null)return 0;if(ha(a))return n0(a)?Le(a):a.length;var f=ra(a);return f==N||f==Ye?a.size:M0(a).length}function Zx(a,f,B){var Re=Gn(a)?Ji:Oh;return B&&sa(a,f,B)&&(f=t),Re(a,Dn(f,3))}var Yx=Kn(function(a,f){if(a==null)return[];var B=f.length;return B>1&&sa(a,f[0],f[1])?f=[]:B>2&&sa(f[0],f[1],f[2])&&(f=[f[0]]),Ud(a,ea(f,1),[])}),Qs=Oo||function(){return H.Date.now()};function Xx(a,f){if(typeof f!="function")throw new $i(d);return a=Xn(a),function(){if(--a<1)return f.apply(this,arguments)}}function Lc(a,f,B){return f=B?t:f,f=a&&f==null?a.length:f,so(a,ne,t,t,t,t,f)}function Fc(a,f){var B;if(typeof f!="function")throw new $i(d);return a=Xn(a),function(){return--a>0&&(B=f.apply(this,arguments)),a<=1&&(f=t),B}}var nl=Kn(function(a,f,B){var Re=de;if(B.length){var rt=_(B,Wo(nl));Re|=x}return so(a,Re,f,B,rt)}),zc=Kn(function(a,f,B){var Re=de|ie;if(B.length){var rt=_(B,Wo(zc));Re|=x}return so(f,Re,a,B,rt)});function Oc(a,f,B){f=B?t:f;var Re=so(a,Ve,t,t,t,t,t,f);return Re.placeholder=Oc.placeholder,Re}function Nc(a,f,B){f=B?t:f;var Re=so(a,ue,t,t,t,t,t,f);return Re.placeholder=Nc.placeholder,Re}function jc(a,f,B){var Re,rt,Ct,Vt,ei,_i,Xi=0,qi=!1,Ki=!1,dn=!0;if(typeof a!="function")throw new $i(d);f=ka(f)||0,kr(B)&&(qi=!!B.leading,Ki="maxWait"in B,Ct=Ki?Br(ka(B.maxWait)||0,f):Ct,dn="trailing"in B?!!B.trailing:dn);function gn(Nr){var za=Re,ho=rt;return Re=rt=t,Xi=Nr,Vt=a.apply(ho,za),Vt}function Ln(Nr){return Xi=Nr,ei=cs(er,f),qi?gn(Nr):Vt}function qn(Nr){var za=Nr-_i,ho=Nr-Xi,au=f-za;return Ki?ni(au,Ct-ho):au}function Fn(Nr){var za=Nr-_i,ho=Nr-Xi;return _i===t||za>=f||za<0||Ki&&ho>=Ct}function er(){var Nr=Qs();if(Fn(Nr))return sr(Nr);ei=cs(er,qn(Nr))}function sr(Nr){return ei=t,dn&&Re?gn(Nr):(Re=rt=t,Vt)}function va(){ei!==t&&Jd(ei),Xi=0,Re=_i=rt=ei=t}function la(){return ei===t?Vt:sr(Qs())}function ya(){var Nr=Qs(),za=Fn(Nr);if(Re=arguments,rt=this,_i=Nr,za){if(ei===t)return Ln(_i);if(Ki)return Jd(ei),ei=cs(er,f),gn(_i)}return ei===t&&(ei=cs(er,f)),Vt}return ya.cancel=va,ya.flush=la,ya}var qx=Kn(function(a,f){return kd(a,1,f)}),Jx=Kn(function(a,f,B){return kd(a,ka(f)||0,B)});function Kx(a){return so(a,ye)}function e0(a,f){if(typeof a!="function"||f!=null&&typeof f!="function")throw new $i(d);var B=function(){var Re=arguments,rt=f?f.apply(this,Re):Re[0],Ct=B.cache;if(Ct.has(rt))return Ct.get(rt);var Vt=a.apply(this,Re);return B.cache=Ct.set(rt,Vt)||Ct,Vt};return B.cache=new(e0.Cache||ao),B}e0.Cache=ao;function t0(a){if(typeof a!="function")throw new $i(d);return function(){var f=arguments;switch(f.length){case 0:return!a.call(this);case 1:return!a.call(this,f[0]);case 2:return!a.call(this,f[0],f[1]);case 3:return!a.call(this,f[0],f[1],f[2])}return!a.apply(this,f)}}function $x(a){return Fc(2,a)}var Qx=Nh(function(a,f){f=f.length==1&&Gn(f[0])?gt(f[0],Cr(Dn())):gt(ea(f,1),Cr(Dn()));var B=f.length;return Kn(function(Re){for(var rt=-1,Ct=ni(Re.length,B);++rt<Ct;)Re[rt]=f[rt].call(this,Re[rt]);return D(a,this,Re)})}),rl=Kn(function(a,f){var B=_(f,Wo(rl));return so(a,x,t,f,B)}),Uc=Kn(function(a,f){var B=_(f,Wo(Uc));return so(a,O,t,f,B)}),ep=lo(function(a,f){return so(a,Q,t,t,t,f)});function tp(a,f){if(typeof a!="function")throw new $i(d);return f=f===t?f:Xn(f),Kn(a,f)}function ip(a,f){if(typeof a!="function")throw new $i(d);return f=f==null?0:Br(Xn(f),0),Kn(function(B){var Re=B[f],rt=So(B,0,f);return Re&&It(rt,Re),D(a,this,rt)})}function np(a,f,B){var Re=!0,rt=!0;if(typeof a!="function")throw new $i(d);return kr(B)&&(Re="leading"in B?!!B.leading:Re,rt="trailing"in B?!!B.trailing:rt),jc(a,f,{leading:Re,maxWait:f,trailing:rt})}function rp(a){return Lc(a,1)}function ap(a,f){return rl(H0(f),a)}function op(){if(!arguments.length)return[];var a=arguments[0];return Gn(a)?a:[a]}function sp(a){return wa(a,p)}function lp(a,f){return f=typeof f=="function"?f:t,wa(a,p,f)}function dp(a){return wa(a,w|p)}function cp(a,f){return f=typeof f=="function"?f:t,wa(a,w|p,f)}function up(a,f){return f==null||Rd(a,f,qr(f))}function Fa(a,f){return a===f||a!==a&&f!==f}var fp=Ys(I0),hp=Ys(function(a,f){return a>=f}),Bo=Bd(function(){return arguments}())?Bd:function(a){return Lr(a)&&hn.call(a,"callee")&&!Ls.call(a,"callee")},Gn=ht.isArray,xp=Ht?Cr(Ht):Sh;function ha(a){return a!=null&&i0(a.length)&&!uo(a)}function Or(a){return Lr(a)&&ha(a)}function pp(a){return a===!0||a===!1||Lr(a)&&oa(a)==kt}var Co=ts||pl,mp=gi?Cr(gi):Ch;function _p(a){return Lr(a)&&a.nodeType===1&&!us(a)}function gp(a){if(a==null)return!0;if(ha(a)&&(Gn(a)||typeof a=="string"||typeof a.splice=="function"||Co(a)||Zo(a)||Bo(a)))return!a.length;var f=ra(a);if(f==N||f==Ye)return!a.size;if(ds(a))return!M0(a).length;for(var B in a)if(hn.call(a,B))return!1;return!0}function vp(a,f){return os(a,f)}function yp(a,f,B){B=typeof B=="function"?B:t;var Re=B?B(a,f):t;return Re===t?os(a,f,t,B):!!Re}function al(a){if(!Lr(a))return!1;var f=oa(a);return f==P||f==me||typeof a.message=="string"&&typeof a.name=="string"&&!us(a)}function bp(a){return typeof a=="number"&&Uo(a)}function uo(a){if(!kr(a))return!1;var f=oa(a);return f==Y||f==Oe||f==Wt||f==J}function Hc(a){return typeof a=="number"&&a==Xn(a)}function i0(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=ui}function kr(a){var f=typeof a;return a!=null&&(f=="object"||f=="function")}function Lr(a){return a!=null&&typeof a=="object"}var Vc=Hi?Cr(Hi):Ph;function Sp(a,f){return a===f||A0(a,f,q0(f))}function Cp(a,f,B){return B=typeof B=="function"?B:t,A0(a,f,q0(f),B)}function Tp(a){return Gc(a)&&a!=+a}function Pp(a){if(l2(a))throw new $t(l);return Ld(a)}function wp(a){return a===null}function Ep(a){return a==null}function Gc(a){return typeof a=="number"||Lr(a)&&oa(a)==fe}function us(a){if(!Lr(a)||oa(a)!=L)return!1;var f=Ma(a);if(f===null)return!0;var B=hn.call(f,"constructor")&&f.constructor;return typeof B=="function"&&B instanceof B&&wn.call(B)==Pr}var ol=hi?Cr(hi):wh;function Rp(a){return Hc(a)&&a>=-ui&&a<=ui}var Wc=Ai?Cr(Ai):Eh;function n0(a){return typeof a=="string"||!Gn(a)&&Lr(a)&&oa(a)==et}function ga(a){return typeof a=="symbol"||Lr(a)&&oa(a)==R}var Zo=fi?Cr(fi):Rh;function kp(a){return a===t}function Ip(a){return Lr(a)&&ra(a)==G}function Dp(a){return Lr(a)&&oa(a)==ge}var Ap=Ys(B0),Mp=Ys(function(a,f){return a<=f});function Zc(a){if(!a)return[];if(ha(a))return n0(a)?it(a):fa(a);if(io&&a[io])return Fi(a[io]());var f=ra(a),B=f==N?Pn:f==Ye?U:Yo;return B(a)}function fo(a){if(!a)return a===0?a:0;if(a=ka(a),a===wi||a===-wi){var f=a<0?-1:1;return f*di}return a===a?a:0}function Xn(a){var f=fo(a),B=f%1;return f===f?B?f-B:f:0}function Yc(a){return a?Io(Xn(a),0,$e):0}function ka(a){if(typeof a=="number")return a;if(ga(a))return zi;if(kr(a)){var f=typeof a.valueOf=="function"?a.valueOf():a;a=kr(f)?f+"":f}if(typeof a!="string")return a===0?a:+a;a=Wr(a);var B=ft.test(a);return B||Ft.test(a)?Ae(a.slice(2),B?2:8):Ue.test(a)?zi:+a}function Xc(a){return Xa(a,xa(a))}function Bp(a){return a?Io(Xn(a),-ui,ui):a===0?a:0}function xr(a){return a==null?"":_a(a)}var Lp=Vo(function(a,f){if(ds(f)||ha(f)){Xa(f,qr(f),a);return}for(var B in f)hn.call(f,B)&&ns(a,B,f[B])}),qc=Vo(function(a,f){Xa(f,xa(f),a)}),r0=Vo(function(a,f,B,Re){Xa(f,xa(f),a,Re)}),Fp=Vo(function(a,f,B,Re){Xa(f,qr(f),a,Re)}),zp=lo(E0);function Op(a,f){var B=Ho(a);return f==null?B:Ed(B,f)}var Np=Kn(function(a,f){a=Ti(a);var B=-1,Re=f.length,rt=Re>2?f[2]:t;for(rt&&sa(f[0],f[1],rt)&&(Re=1);++B<Re;)for(var Ct=f[B],Vt=xa(Ct),ei=-1,_i=Vt.length;++ei<_i;){var Xi=Vt[ei],qi=a[Xi];(qi===t||Fa(qi,mn[Xi])&&!hn.call(a,Xi))&&(a[Xi]=Ct[Xi])}return a}),jp=Kn(function(a){return a.push(t,fc),D(Jc,t,a)});function Up(a,f){return On(a,Dn(f,3),Ya)}function Hp(a,f){return On(a,Dn(f,3),k0)}function Vp(a,f){return a==null?a:R0(a,Dn(f,3),xa)}function Gp(a,f){return a==null?a:Ad(a,Dn(f,3),xa)}function Wp(a,f){return a&&Ya(a,Dn(f,3))}function Zp(a,f){return a&&k0(a,Dn(f,3))}function Yp(a){return a==null?[]:Ns(a,qr(a))}function Xp(a){return a==null?[]:Ns(a,xa(a))}function sl(a,f,B){var Re=a==null?t:Do(a,f);return Re===t?B:Re}function qp(a,f){return a!=null&&pc(a,f,gh)}function ll(a,f){return a!=null&&pc(a,f,vh)}var Jp=sc(function(a,f,B){f!=null&&typeof f.toString!="function"&&(f=ur.call(f)),a[f]=B},cl(pa)),Kp=sc(function(a,f,B){f!=null&&typeof f.toString!="function"&&(f=ur.call(f)),hn.call(a,f)?a[f].push(B):a[f]=[B]},Dn),$p=Kn(as);function qr(a){return ha(a)?Pd(a):M0(a)}function xa(a){return ha(a)?Pd(a,!0):kh(a)}function Qp(a,f){var B={};return f=Dn(f,3),Ya(a,function(Re,rt,Ct){oo(B,f(Re,rt,Ct),Re)}),B}function em(a,f){var B={};return f=Dn(f,3),Ya(a,function(Re,rt,Ct){oo(B,rt,f(Re,rt,Ct))}),B}var tm=Vo(function(a,f,B){js(a,f,B)}),Jc=Vo(function(a,f,B,Re){js(a,f,B,Re)}),im=lo(function(a,f){var B={};if(a==null)return B;var Re=!1;f=gt(f,function(Ct){return Ct=bo(Ct,a),Re||(Re=Ct.length>1),Ct}),Xa(a,Y0(a),B),Re&&(B=wa(B,w|g|p,Jh));for(var rt=f.length;rt--;)N0(B,f[rt]);return B});function nm(a,f){return Kc(a,t0(Dn(f)))}var rm=lo(function(a,f){return a==null?{}:Dh(a,f)});function Kc(a,f){if(a==null)return{};var B=gt(Y0(a),function(Re){return[Re]});return f=Dn(f),Hd(a,B,function(Re,rt){return f(Re,rt[0])})}function am(a,f,B){f=bo(f,a);var Re=-1,rt=f.length;for(rt||(rt=1,a=t);++Re<rt;){var Ct=a==null?t:a[qa(f[Re])];Ct===t&&(Re=rt,Ct=B),a=uo(Ct)?Ct.call(a):Ct}return a}function om(a,f,B){return a==null?a:ss(a,f,B)}function sm(a,f,B,Re){return Re=typeof Re=="function"?Re:t,a==null?a:ss(a,f,B,Re)}var $c=cc(qr),Qc=cc(xa);function lm(a,f,B){var Re=Gn(a),rt=Re||Co(a)||Zo(a);if(f=Dn(f,4),B==null){var Ct=a&&a.constructor;rt?B=Re?new Ct:[]:kr(a)?B=uo(Ct)?Ho(Ma(a)):{}:B={}}return(rt?k:Ya)(a,function(Vt,ei,_i){return f(B,Vt,ei,_i)}),B}function dm(a,f){return a==null?!0:N0(a,f)}function cm(a,f,B){return a==null?a:Yd(a,f,H0(B))}function um(a,f,B,Re){return Re=typeof Re=="function"?Re:t,a==null?a:Yd(a,f,H0(B),Re)}function Yo(a){return a==null?[]:Zr(a,qr(a))}function fm(a){return a==null?[]:Zr(a,xa(a))}function hm(a,f,B){return B===t&&(B=f,f=t),B!==t&&(B=ka(B),B=B===B?B:0),f!==t&&(f=ka(f),f=f===f?f:0),Io(ka(a),f,B)}function xm(a,f,B){return f=fo(f),B===t?(B=f,f=0):B=fo(B),a=ka(a),yh(a,f,B)}function pm(a,f,B){if(B&&typeof B!="boolean"&&sa(a,f,B)&&(f=B=t),B===t&&(typeof f=="boolean"?(B=f,f=t):typeof a=="boolean"&&(B=a,a=t)),a===t&&f===t?(a=0,f=1):(a=fo(a),f===t?(f=a,a=0):f=fo(f)),a>f){var Re=a;a=f,f=Re}if(B||a%1||f%1){var rt=Ei();return ni(a+rt*(f-a+Ce("1e-"+((rt+"").length-1))),f)}return F0(a,f)}var mm=Go(function(a,f,B){return f=f.toLowerCase(),a+(B?eu(f):f)});function eu(a){return dl(xr(a).toLowerCase())}function tu(a){return a=xr(a),a&&a.replace(nt,Pe).replace(ir,"")}function _m(a,f,B){a=xr(a),f=_a(f);var Re=a.length;B=B===t?Re:Io(Xn(B),0,Re);var rt=B;return B-=f.length,B>=0&&a.slice(B,rt)==f}function gm(a){return a=xr(a),a&&Et.test(a)?a.replace(Dt,Fe):a}function vm(a){return a=xr(a),a&&ti.test(a)?a.replace(Ii,"\\$&"):a}var ym=Go(function(a,f,B){return a+(B?"-":"")+f.toLowerCase()}),bm=Go(function(a,f,B){return a+(B?" ":"")+f.toLowerCase()}),Sm=rc("toLowerCase");function Cm(a,f,B){a=xr(a),f=Xn(f);var Re=f?Le(a):0;if(!f||Re>=f)return a;var rt=(f-Re)/2;return Zs(jo(rt),B)+a+Zs(_o(rt),B)}function Tm(a,f,B){a=xr(a),f=Xn(f);var Re=f?Le(a):0;return f&&Re<f?a+Zs(f-Re,B):a}function Pm(a,f,B){a=xr(a),f=Xn(f);var Re=f?Le(a):0;return f&&Re<f?Zs(f-Re,B)+a:a}function wm(a,f,B){return B||f==null?f=0:f&&(f=+f),Ri(xr(a).replace(Vi,""),f||0)}function Em(a,f,B){return(B?sa(a,f,B):f===t)?f=1:f=Xn(f),z0(xr(a),f)}function Rm(){var a=arguments,f=xr(a[0]);return a.length<3?f:f.replace(a[1],a[2])}var km=Go(function(a,f,B){return a+(B?"_":"")+f.toLowerCase()});function Im(a,f,B){return B&&typeof B!="number"&&sa(a,f,B)&&(f=B=t),B=B===t?$e:B>>>0,B?(a=xr(a),a&&(typeof f=="string"||f!=null&&!ol(f))&&(f=_a(f),!f&&Yt(a))?So(it(a),0,B):a.split(f,B)):[]}var Dm=Go(function(a,f,B){return a+(B?" ":"")+dl(f)});function Am(a,f,B){return a=xr(a),B=B==null?0:Io(Xn(B),0,a.length),f=_a(f),a.slice(B,B+f.length)==f}function Mm(a,f,B){var Re=xt.templateSettings;B&&sa(a,f,B)&&(f=t),a=xr(a),f=r0({},f,Re,uc);var rt=r0({},f.imports,Re.imports,uc),Ct=qr(rt),Vt=Zr(rt,Ct),ei,_i,Xi=0,qi=f.interpolate||Zt,Ki="__p += '",dn=rn((f.escape||Zt).source+"|"+qi.source+"|"+(qi===Xt?_e:Zt).source+"|"+(f.evaluate||Zt).source+"|$","g"),gn="//# sourceURL="+(hn.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ge+"]")+`
`;a.replace(dn,function(Fn,er,sr,va,la,ya){return sr||(sr=va),Ki+=a.slice(Xi,ya).replace(bi,tt),er&&(ei=!0,Ki+=`' +
__e(`+er+`) +
'`),la&&(_i=!0,Ki+=`';
`+la+`;
__p += '`),sr&&(Ki+=`' +
((__t = (`+sr+`)) == null ? '' : __t) +
'`),Xi=ya+Fn.length,Fn}),Ki+=`';
`;var Ln=hn.call(f,"variable")&&f.variable;if(!Ln)Ki=`with (obj) {
`+Ki+`
}
`;else if(S.test(Ln))throw new $t(c);Ki=(_i?Ki.replace(Bi,""):Ki).replace(yt,"$1").replace(wt,"$1;"),Ki="function("+(Ln||"obj")+`) {
`+(Ln?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ei?", __e = _.escape":"")+(_i?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ki+`return __p
}`;var qn=nu(function(){return ii(Ct,gn+"return "+Ki).apply(t,Vt)});if(qn.source=Ki,al(qn))throw qn;return qn}function Bm(a){return xr(a).toLowerCase()}function Lm(a){return xr(a).toUpperCase()}function Fm(a,f,B){if(a=xr(a),a&&(B||f===t))return Wr(a);if(!a||!(f=_a(f)))return a;var Re=it(a),rt=it(f),Ct=Tr(Re,rt),Vt=Yr(Re,rt)+1;return So(Re,Ct,Vt).join("")}function zm(a,f,B){if(a=xr(a),a&&(B||f===t))return a.slice(0,ut(a)+1);if(!a||!(f=_a(f)))return a;var Re=it(a),rt=Yr(Re,it(f))+1;return So(Re,0,rt).join("")}function Om(a,f,B){if(a=xr(a),a&&(B||f===t))return a.replace(Vi,"");if(!a||!(f=_a(f)))return a;var Re=it(a),rt=Tr(Re,it(f));return So(Re,rt).join("")}function Nm(a,f){var B=se,Re=Ze;if(kr(f)){var rt="separator"in f?f.separator:rt;B="length"in f?Xn(f.length):B,Re="omission"in f?_a(f.omission):Re}a=xr(a);var Ct=a.length;if(Yt(a)){var Vt=it(a);Ct=Vt.length}if(B>=Ct)return a;var ei=B-Le(Re);if(ei<1)return Re;var _i=Vt?So(Vt,0,ei).join(""):a.slice(0,ei);if(rt===t)return _i+Re;if(Vt&&(ei+=_i.length-ei),ol(rt)){if(a.slice(ei).search(rt)){var Xi,qi=_i;for(rt.global||(rt=rn(rt.source,xr(Me.exec(rt))+"g")),rt.lastIndex=0;Xi=rt.exec(qi);)var Ki=Xi.index;_i=_i.slice(0,Ki===t?ei:Ki)}}else if(a.indexOf(_a(rt),ei)!=ei){var dn=_i.lastIndexOf(rt);dn>-1&&(_i=_i.slice(0,dn))}return _i+Re}function jm(a){return a=xr(a),a&&St.test(a)?a.replace(pt,Rt):a}var Um=Go(function(a,f,B){return a+(B?" ":"")+f.toUpperCase()}),dl=rc("toUpperCase");function iu(a,f,B){return a=xr(a),f=B?t:f,f===t?ci(a)?Di(a):In(a):a.match(f)||[]}var nu=Kn(function(a,f){try{return D(a,t,f)}catch(B){return al(B)?B:new $t(B)}}),Hm=lo(function(a,f){return k(f,function(B){B=qa(B),oo(a,B,nl(a[B],a))}),a});function Vm(a){var f=a==null?0:a.length,B=Dn();return a=f?gt(a,function(Re){if(typeof Re[1]!="function")throw new $i(d);return[B(Re[0]),Re[1]]}):[],Kn(function(Re){for(var rt=-1;++rt<f;){var Ct=a[rt];if(D(Ct[0],this,Re))return D(Ct[1],this,Re)}})}function Gm(a){return ph(wa(a,w))}function cl(a){return function(){return a}}function Wm(a,f){return a==null||a!==a?f:a}var Zm=oc(),Ym=oc(!0);function pa(a){return a}function ul(a){return Fd(typeof a=="function"?a:wa(a,w))}function Xm(a){return Od(wa(a,w))}function qm(a,f){return Nd(a,wa(f,w))}var Jm=Kn(function(a,f){return function(B){return as(B,a,f)}}),Km=Kn(function(a,f){return function(B){return as(a,B,f)}});function fl(a,f,B){var Re=qr(f),rt=Ns(f,Re);B==null&&!(kr(f)&&(rt.length||!Re.length))&&(B=f,f=a,a=this,rt=Ns(f,qr(f)));var Ct=!(kr(B)&&"chain"in B)||!!B.chain,Vt=uo(a);return k(rt,function(ei){var _i=f[ei];a[ei]=_i,Vt&&(a.prototype[ei]=function(){var Xi=this.__chain__;if(Ct||Xi){var qi=a(this.__wrapped__),Ki=qi.__actions__=fa(this.__actions__);return Ki.push({func:_i,args:arguments,thisArg:a}),qi.__chain__=Xi,qi}return _i.apply(a,It([this.value()],arguments))})}),a}function $m(){return H._===this&&(H._=eo),this}function hl(){}function Qm(a){return a=Xn(a),Kn(function(f){return jd(f,a)})}var e_=G0(gt),t_=G0(ve),i_=G0(Ji);function ru(a){return K0(a)?Tn(qa(a)):Ah(a)}function n_(a){return function(f){return a==null?t:Do(a,f)}}var r_=lc(),a_=lc(!0);function xl(){return[]}function pl(){return!1}function o_(){return{}}function s_(){return""}function l_(){return!0}function d_(a,f){if(a=Xn(a),a<1||a>ui)return[];var B=$e,Re=ni(a,$e);f=Dn(f),a-=$e;for(var rt=Aa(Re,f);++B<a;)f(B);return rt}function c_(a){return Gn(a)?gt(a,qa):ga(a)?[a]:fa(Tc(xr(a)))}function u_(a){var f=++nr;return xr(a)+f}var f_=Ws(function(a,f){return a+f},0),h_=W0("ceil"),x_=Ws(function(a,f){return a/f},1),p_=W0("floor");function m_(a){return a&&a.length?Os(a,pa,I0):t}function __(a,f){return a&&a.length?Os(a,Dn(f,2),I0):t}function g_(a){return Sr(a,pa)}function v_(a,f){return Sr(a,Dn(f,2))}function y_(a){return a&&a.length?Os(a,pa,B0):t}function b_(a,f){return a&&a.length?Os(a,Dn(f,2),B0):t}var S_=Ws(function(a,f){return a*f},1),C_=W0("round"),T_=Ws(function(a,f){return a-f},0);function P_(a){return a&&a.length?hr(a,pa):0}function w_(a,f){return a&&a.length?hr(a,Dn(f,2)):0}return xt.after=Xx,xt.ary=Lc,xt.assign=Lp,xt.assignIn=qc,xt.assignInWith=r0,xt.assignWith=Fp,xt.at=zp,xt.before=Fc,xt.bind=nl,xt.bindAll=Hm,xt.bindKey=zc,xt.castArray=op,xt.chain=Ac,xt.chunk=p2,xt.compact=m2,xt.concat=_2,xt.cond=Vm,xt.conforms=Gm,xt.constant=cl,xt.countBy=Px,xt.create=Op,xt.curry=Oc,xt.curryRight=Nc,xt.debounce=jc,xt.defaults=Np,xt.defaultsDeep=jp,xt.defer=qx,xt.delay=Jx,xt.difference=g2,xt.differenceBy=v2,xt.differenceWith=y2,xt.drop=b2,xt.dropRight=S2,xt.dropRightWhile=C2,xt.dropWhile=T2,xt.fill=P2,xt.filter=Ex,xt.flatMap=Ix,xt.flatMapDeep=Dx,xt.flatMapDepth=Ax,xt.flatten=Rc,xt.flattenDeep=w2,xt.flattenDepth=E2,xt.flip=Kx,xt.flow=Zm,xt.flowRight=Ym,xt.fromPairs=R2,xt.functions=Yp,xt.functionsIn=Xp,xt.groupBy=Mx,xt.initial=I2,xt.intersection=D2,xt.intersectionBy=A2,xt.intersectionWith=M2,xt.invert=Jp,xt.invertBy=Kp,xt.invokeMap=Lx,xt.iteratee=ul,xt.keyBy=Fx,xt.keys=qr,xt.keysIn=xa,xt.map=$s,xt.mapKeys=Qp,xt.mapValues=em,xt.matches=Xm,xt.matchesProperty=qm,xt.memoize=e0,xt.merge=tm,xt.mergeWith=Jc,xt.method=Jm,xt.methodOf=Km,xt.mixin=fl,xt.negate=t0,xt.nthArg=Qm,xt.omit=im,xt.omitBy=nm,xt.once=$x,xt.orderBy=zx,xt.over=e_,xt.overArgs=Qx,xt.overEvery=t_,xt.overSome=i_,xt.partial=rl,xt.partialRight=Uc,xt.partition=Ox,xt.pick=rm,xt.pickBy=Kc,xt.property=ru,xt.propertyOf=n_,xt.pull=z2,xt.pullAll=Ic,xt.pullAllBy=O2,xt.pullAllWith=N2,xt.pullAt=j2,xt.range=r_,xt.rangeRight=a_,xt.rearg=ep,xt.reject=Ux,xt.remove=U2,xt.rest=tp,xt.reverse=tl,xt.sampleSize=Vx,xt.set=om,xt.setWith=sm,xt.shuffle=Gx,xt.slice=H2,xt.sortBy=Yx,xt.sortedUniq=q2,xt.sortedUniqBy=J2,xt.split=Im,xt.spread=ip,xt.tail=K2,xt.take=$2,xt.takeRight=Q2,xt.takeRightWhile=ex,xt.takeWhile=tx,xt.tap=mx,xt.throttle=np,xt.thru=Ks,xt.toArray=Zc,xt.toPairs=$c,xt.toPairsIn=Qc,xt.toPath=c_,xt.toPlainObject=Xc,xt.transform=lm,xt.unary=rp,xt.union=ix,xt.unionBy=nx,xt.unionWith=rx,xt.uniq=ax,xt.uniqBy=ox,xt.uniqWith=sx,xt.unset=dm,xt.unzip=il,xt.unzipWith=Dc,xt.update=cm,xt.updateWith=um,xt.values=Yo,xt.valuesIn=fm,xt.without=lx,xt.words=iu,xt.wrap=ap,xt.xor=dx,xt.xorBy=cx,xt.xorWith=ux,xt.zip=fx,xt.zipObject=hx,xt.zipObjectDeep=xx,xt.zipWith=px,xt.entries=$c,xt.entriesIn=Qc,xt.extend=qc,xt.extendWith=r0,fl(xt,xt),xt.add=f_,xt.attempt=nu,xt.camelCase=mm,xt.capitalize=eu,xt.ceil=h_,xt.clamp=hm,xt.clone=sp,xt.cloneDeep=dp,xt.cloneDeepWith=cp,xt.cloneWith=lp,xt.conformsTo=up,xt.deburr=tu,xt.defaultTo=Wm,xt.divide=x_,xt.endsWith=_m,xt.eq=Fa,xt.escape=gm,xt.escapeRegExp=vm,xt.every=wx,xt.find=Rx,xt.findIndex=wc,xt.findKey=Up,xt.findLast=kx,xt.findLastIndex=Ec,xt.findLastKey=Hp,xt.floor=p_,xt.forEach=Mc,xt.forEachRight=Bc,xt.forIn=Vp,xt.forInRight=Gp,xt.forOwn=Wp,xt.forOwnRight=Zp,xt.get=sl,xt.gt=fp,xt.gte=hp,xt.has=qp,xt.hasIn=ll,xt.head=kc,xt.identity=pa,xt.includes=Bx,xt.indexOf=k2,xt.inRange=xm,xt.invoke=$p,xt.isArguments=Bo,xt.isArray=Gn,xt.isArrayBuffer=xp,xt.isArrayLike=ha,xt.isArrayLikeObject=Or,xt.isBoolean=pp,xt.isBuffer=Co,xt.isDate=mp,xt.isElement=_p,xt.isEmpty=gp,xt.isEqual=vp,xt.isEqualWith=yp,xt.isError=al,xt.isFinite=bp,xt.isFunction=uo,xt.isInteger=Hc,xt.isLength=i0,xt.isMap=Vc,xt.isMatch=Sp,xt.isMatchWith=Cp,xt.isNaN=Tp,xt.isNative=Pp,xt.isNil=Ep,xt.isNull=wp,xt.isNumber=Gc,xt.isObject=kr,xt.isObjectLike=Lr,xt.isPlainObject=us,xt.isRegExp=ol,xt.isSafeInteger=Rp,xt.isSet=Wc,xt.isString=n0,xt.isSymbol=ga,xt.isTypedArray=Zo,xt.isUndefined=kp,xt.isWeakMap=Ip,xt.isWeakSet=Dp,xt.join=B2,xt.kebabCase=ym,xt.last=Ra,xt.lastIndexOf=L2,xt.lowerCase=bm,xt.lowerFirst=Sm,xt.lt=Ap,xt.lte=Mp,xt.max=m_,xt.maxBy=__,xt.mean=g_,xt.meanBy=v_,xt.min=y_,xt.minBy=b_,xt.stubArray=xl,xt.stubFalse=pl,xt.stubObject=o_,xt.stubString=s_,xt.stubTrue=l_,xt.multiply=S_,xt.nth=F2,xt.noConflict=$m,xt.noop=hl,xt.now=Qs,xt.pad=Cm,xt.padEnd=Tm,xt.padStart=Pm,xt.parseInt=wm,xt.random=pm,xt.reduce=Nx,xt.reduceRight=jx,xt.repeat=Em,xt.replace=Rm,xt.result=am,xt.round=C_,xt.runInContext=Ot,xt.sample=Hx,xt.size=Wx,xt.snakeCase=km,xt.some=Zx,xt.sortedIndex=V2,xt.sortedIndexBy=G2,xt.sortedIndexOf=W2,xt.sortedLastIndex=Z2,xt.sortedLastIndexBy=Y2,xt.sortedLastIndexOf=X2,xt.startCase=Dm,xt.startsWith=Am,xt.subtract=T_,xt.sum=P_,xt.sumBy=w_,xt.template=Mm,xt.times=d_,xt.toFinite=fo,xt.toInteger=Xn,xt.toLength=Yc,xt.toLower=Bm,xt.toNumber=ka,xt.toSafeInteger=Bp,xt.toString=xr,xt.toUpper=Lm,xt.trim=Fm,xt.trimEnd=zm,xt.trimStart=Om,xt.truncate=Nm,xt.unescape=jm,xt.uniqueId=u_,xt.upperCase=Um,xt.upperFirst=dl,xt.each=Mc,xt.eachRight=Bc,xt.first=kc,fl(xt,function(){var a={};return Ya(xt,function(f,B){hn.call(xt.prototype,B)||(a[B]=f)}),a}(),{chain:!1}),xt.VERSION=n,k(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){xt[a].placeholder=xt}),k(["drop","take"],function(a,f){rr.prototype[a]=function(B){B=B===t?1:Br(Xn(B),0);var Re=this.__filtered__&&!f?new rr(this):this.clone();return Re.__filtered__?Re.__takeCount__=ni(B,Re.__takeCount__):Re.__views__.push({size:ni(B,$e),type:a+(Re.__dir__<0?"Right":"")}),Re},rr.prototype[a+"Right"]=function(B){return this.reverse()[a](B).reverse()}}),k(["filter","map","takeWhile"],function(a,f){var B=f+1,Re=B==Te||B==oi;rr.prototype[a]=function(rt){var Ct=this.clone();return Ct.__iteratees__.push({iteratee:Dn(rt,3),type:B}),Ct.__filtered__=Ct.__filtered__||Re,Ct}}),k(["head","last"],function(a,f){var B="take"+(f?"Right":"");rr.prototype[a]=function(){return this[B](1).value()[0]}}),k(["initial","tail"],function(a,f){var B="drop"+(f?"":"Right");rr.prototype[a]=function(){return this.__filtered__?new rr(this):this[B](1)}}),rr.prototype.compact=function(){return this.filter(pa)},rr.prototype.find=function(a){return this.filter(a).head()},rr.prototype.findLast=function(a){return this.reverse().find(a)},rr.prototype.invokeMap=Kn(function(a,f){return typeof a=="function"?new rr(this):this.map(function(B){return as(B,a,f)})}),rr.prototype.reject=function(a){return this.filter(t0(Dn(a)))},rr.prototype.slice=function(a,f){a=Xn(a);var B=this;return B.__filtered__&&(a>0||f<0)?new rr(B):(a<0?B=B.takeRight(-a):a&&(B=B.drop(a)),f!==t&&(f=Xn(f),B=f<0?B.dropRight(-f):B.take(f-a)),B)},rr.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},rr.prototype.toArray=function(){return this.take($e)},Ya(rr.prototype,function(a,f){var B=/^(?:filter|find|map|reject)|While$/.test(f),Re=/^(?:head|last)$/.test(f),rt=xt[Re?"take"+(f=="last"?"Right":""):f],Ct=Re||/^find/.test(f);rt&&(xt.prototype[f]=function(){var Vt=this.__wrapped__,ei=Re?[1]:arguments,_i=Vt instanceof rr,Xi=ei[0],qi=_i||Gn(Vt),Ki=function(er){var sr=rt.apply(xt,It([er],ei));return Re&&dn?sr[0]:sr};qi&&B&&typeof Xi=="function"&&Xi.length!=1&&(_i=qi=!1);var dn=this.__chain__,gn=!!this.__actions__.length,Ln=Ct&&!dn,qn=_i&&!gn;if(!Ct&&qi){Vt=qn?Vt:new rr(this);var Fn=a.apply(Vt,ei);return Fn.__actions__.push({func:Ks,args:[Ki],thisArg:t}),new Pa(Fn,dn)}return Ln&&qn?a.apply(this,ei):(Fn=this.thru(Ki),Ln?Re?Fn.value()[0]:Fn.value():Fn)})}),k(["pop","push","shift","sort","splice","unshift"],function(a){var f=sn[a],B=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",Re=/^(?:pop|shift)$/.test(a);xt.prototype[a]=function(){var rt=arguments;if(Re&&!this.__chain__){var Ct=this.value();return f.apply(Gn(Ct)?Ct:[],rt)}return this[B](function(Vt){return f.apply(Gn(Vt)?Vt:[],rt)})}}),Ya(rr.prototype,function(a,f){var B=xt[f];if(B){var Re=B.name+"";hn.call(Vn,Re)||(Vn[Re]=[]),Vn[Re].push({name:f,func:B})}}),Vn[Gs(t,ie).name]=[{name:"wrapper",func:t}],rr.prototype.clone=j1,rr.prototype.reverse=U1,rr.prototype.value=H1,xt.prototype.at=_x,xt.prototype.chain=gx,xt.prototype.commit=vx,xt.prototype.next=yx,xt.prototype.plant=Sx,xt.prototype.reverse=Cx,xt.prototype.toJSON=xt.prototype.valueOf=xt.prototype.value=Tx,xt.prototype.first=xt.prototype.head,io&&(xt.prototype[io]=bx),xt},Oi=pi();le?((le.exports=Oi)._=Oi,K._=Oi):H._=Oi}).call(Na)}(vs,vs.exports);var gu=vs.exports,vr=Sl(gu),ys=function(){function Z(m,t){En(this,Z),this.id=t,this.jSPlugin=m,this.state={play:!1,loading:!1,text:""},this.loadingSetText=this.loadingSetText}return Rn(Z,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"setPlayStatus",value:function(t){this.state=Object.assign(this.state,t)}},{key:"loadingStart",value:function(t){var n=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(n),n.innerHTML="@keyframes antRotate {to {transform: rotate(400deg);transform-origin:50% 50%;}} .loading {display: inline-block;z-index: 1000;-webkit-animation: antRotate 1s infinite linear;animation: antRotate 1s infinite linear;}";var o=t,l=document.getElementById(o),d=l.offsetWidth,c=l.offsetHeight,E=0,C=l.offsetLeft;this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"&&(C=0),document.getElementById("".concat(t,"-loading-id-0"))&&document.getElementById("".concat(t,"-loading-id-0")).parentNode.removeChild(document.getElementById("".concat(t,"-loading-id-0"))),console.log("loading-id-0---------------");var y=document.createElement("div");y.setAttribute("id","".concat(t,"-loading-id-0"));var te="position:absolute;outline:none;pointer-events:none;";console.log("this.jSPlugin",this.jSPlugin),te+="width: 100%;background-size: cover; background-repeat:no-repeat;",te+="height: 100%;",te+="top:"+E+";",te+="left:"+C+"px;",y.setAttribute("style",te),y.style.height=c,y.setAttribute("class","loading-container"),l.style.position="relative",this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"&&(l.style.position="absolute"),l.appendChild(y);var w=1,g=document.createElement("div"),p=document.createElement("div");g.setAttribute("class","loading-item"),g.setAttribute("id","".concat(t,"-loading-item-0"));var te="display:inline-flex;pointer-events:none;flex-direction:column;justify-content:center;align-items: center;width:100%;height:"+c+"px;outline:none;vertical-align: top;position:absolute;";te+="left:"+ae(c,d,w,0).left+"px;",te+="top:"+ae(c,d,w,0).top+"px;",g.setAttribute("style",te);function ae(Ve,ue,x,O){var ne=parseInt(O/x,10)*(Ve/x),Q=O%x*(ue/x);return{top:ne,left:Q}}var de=1,ie=document.createElement("div");p.innerHTML="",p.style.color="#fff",ie.setAttribute("class","loading"),ie.setAttribute("id","loading-icon");var we='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="24" height="24"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>';!this.jSPlugin.isMobile&&this.jSPlugin.isCall&&(de=this.jSPlugin.width/1024,we='<svg t="1567069979438" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399" width="'.concat(40*de,'" height="').concat(40*de,'"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>')),ie.innerHTML=we,g.appendChild(ie),g.appendChild(p),y.appendChild(g)}},{key:"loadingStop",value:function(t){var n=document.getElementById("".concat(t,"-loading-item-0"));n&&n.removeChild(document.getElementById("loading-icon"))}},{key:"loadingSetText",value:function(t){var n=this;if(this.loadingClearText(),document.getElementById("".concat(this.id,"-loading-item-0"))){var o=document.getElementById("".concat(this.id,"-loading-item-0")),l=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes[1];if(l||(o.style.height="100%",l=document.createElement("div"),l.innerHTML=t.text,o.appendChild(l)),l.id="".concat(this.id,"-loading-item-txt"),l.innerHTML=t.text,l.style.fontSize="14px",!this.jSPlugin.isMobile&&this.jSPlugin.isCall){var d=this.jSPlugin.width/1024;l.style.fontSize="".concat(28*d,"px"),l.style.marginTop="16px"}if(this.jSPlugin.isCall&&t.type==1){var c=document.getElementById("".concat(this.id,"-loading-item-txt")),E=document.createElement("div");E.style="margin-bottom: 8px;width:24px;height:24px;",E.innerHTML=`<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title></title>
            <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Group">
                    <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>
                    <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                </g>
            </g>
        </svg>`,o.insertBefore(E,c)}if(l.style.color=t.color||"#FFFFFF",this.state.text=t.text,t.delayClear)var C=setTimeout(function(){n.loadingClearText(),clearTimeout(C)},parseInt(t.delayClear))}}},{key:"loadingSetTextWithBtn",value:function(t){var n=this;this.loadingClear(),console.log(this.jSPlugin);var o=!!this.jSPlugin.Theme.call&&this.jSPlugin.Theme.call.themeData||null;(o&&(o.customConfig.bellPoster===0||this.jSPlugin.Theme.call.bellStatus==="onCall")||t.mask)&&document.getElementById("".concat(this.id,"-loading-id-0"))&&(document.getElementById("".concat(this.id,"-loading-id-0")).style.background=t.maskStyle||"rgba(0,0,0,0.7)");var l=document.getElementById("".concat(this.id,"-loading-item-0"));if(l){l.style.height="100%",l.style["pointer-events"]="auto";var d=document.createElement("div");if(d.id="".concat(this.id,"-loading-item-txt"),d.innerHTML=t.text,d.title=t.text,d.style.color=t.color||"#FFFFFF",t.isMobile){var C=this.jSPlugin.width/375,y=14*C;d.style.fontSize=y+"px"}else{var c=this.jSPlugin.width/1024,E=28*c;d.style.fontSize=E+"px"}if(this.jSPlugin.isInspect&&(d.style="text-align: center; color: white; font-size: 14px; white-space: nowrap;overflow: hidden;text-overflow: ellipsis; width: 70%;"),l.appendChild(d),t.type&&t.type==2){var w=8,g=24;if(t.isMobile){var te=this.jSPlugin.width/375;g=24*te}else{var p=this.jSPlugin.width/1024;w=p<1?16*p:16,g=40*p}var ae=document.getElementById("".concat(this.id,"-loading-item-txt")),de=document.createElement("div");de.style="margin-bottom: ".concat(w,"px;width:").concat(g,"px;height:").concat(g,"px;"),de.innerHTML='<svg width="'.concat(g,'px" height="').concat(g,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title></title>
            <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Group">
                    <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>
                    <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                </g>
            </g>
        </svg>`),l.insertBefore(de,ae)}else{var ie=document.createElement("div");if(ie.id="".concat(this.id,"-loading-item-btn-wrap"),ie.innerHTML=`
          <div id="`.concat(this.id,'-loading-item-btn" style="display: ').concat(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"?"none":"block",' ">').concat(t.btnName,`</div>
          <svg id="`).concat(this.id,'-loading-item-btn-svg" style="display: ').concat(this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="map"?"block":"none",` ; margin: 0 auto" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13" xmlns:xlink="http://www.w3.org/1999/xlink">
            <path fill="#fff" d="M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z"></path>
          </svg>
        `),t.isMobile)t.type==1?ie.style="color:white;width:100px;height:30px;border-radius: 10px;background: rgba(255,255,255,0.25);text-align:center;line-height:30px;margin-top:9px;font-size:14px;-webkit-tap-highlight-color: transparent;":ie.style="border: 1px solid rgba(204,204,204,1);color:white;width:80px;height:24px;border-radius: 12px;background: rgba(255,255,255,0.1);text-align:center;line-height:24px;margin-top:20px;font-size:12px;-webkit-tap-highlight-color: transparent;";else{var we=this.jSPlugin.width/1024;ie.style="color:#648FFC;margin-top:16px;cursor: pointer;font-size:".concat(24*we,"px;"),this.jSPlugin.isInspect&&this.jSPlugin.Theme.inspectMode=="video"&&(ie.style="border: 1px solid rgba(255,255,255,1);color:white; cursor: pointer;text-align: center;width:80px;height:32px;border-radius:2px; text-align:center;line-height:32px;margin-top:16px;font-size:14px;-webkit-tap-highlight-color: transparent;")}if(l.appendChild(ie),t.isMobile&&t.type==1){var Ve=document.getElementById("".concat(this.id,"-loading-item-txt")),de=document.createElement("div");de.style="margin-bottom: 8px;width:24px;height:24px;",de.innerHTML=`<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title></title>
              <g id="gantan" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="Group">
                      <polygon id="Path" points="0 0 24.0000001 0 24.0000001 24.0000001 0 24.0000001"></polygon>
                      <path d="M12,2.25000001 C17.2781739,2.25000001 21.5934661,6.44926243 21.746085,11.7237735 L21.746085,11.7237735 L21.75,12 C21.75,17.2781739 17.5507376,21.5934661 12.2762266,21.746085 L12.2762266,21.746085 L12,21.75 C6.72182614,21.75 2.40653397,17.5507376 2.25391507,12.2762266 L2.25391507,12.2762266 L2.25000001,12 C2.25000001,6.72182617 6.44926245,2.40653397 11.7237735,2.25391507 L11.7237735,2.25391507 Z M12,3.75000001 L11.7563186,3.75352261 C7.3032926,3.88243816 3.74992165,7.53391173 3.74992165,11.9891583 L3.74992165,11.9891583 L3.75352261,12.2436814 C3.88243816,16.6967075 7.5339117,20.2500784 11.9891583,20.2500784 L11.9891583,20.2500784 L12.2436814,20.2464774 C16.6967075,20.1175619 20.2500784,16.4660884 20.2500784,12.0108417 L20.2500784,12.0108417 L20.2464774,11.7563186 C20.1175619,7.30329258 16.4660883,3.75000001 12,3.75000001 L12,3.75000001 Z M11.999,15.2500001 L12.1156933,15.25672 C12.6133664,15.3144204 12.999993,15.7366564 12.999993,16.2500001 C12.999993,16.8022157 12.5522116,17.2500001 11.999993,17.2500001 C11.4477844,17.2500001 10.999993,16.8022116 11.0000197,16.2554347 C10.9962666,15.7375014 11.3873731,15.3105316 11.8897485,15.2559043 L11.999,15.2500001 Z M12,6.75000003 C12.3796958,6.75000003 12.693491,7.03215391 12.7431534,7.39822947 L12.75,7.50000003 L12.75,12.5 C12.75,12.9142136 12.4142136,13.25 12,13.25 C11.6203043,13.25 11.3065091,12.9678461 11.2568467,12.6017706 L11.25,12.5 L11.25,7.50000003 C11.25,7.08578647 11.5857865,6.75000003 12,6.75000003 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                  </g>
              </g>
          </svg>`,l.insertBefore(de,Ve)}document.getElementById("".concat(this.id,"-loading-item-btn-wrap"))&&(document.getElementById("".concat(this.id,"-loading-item-btn-wrap")).onclick=function(){n.jSPlugin.play(),n.loadingClear(),n.loadingStart(n.id),n.loadingSetText({text:"视频加载中"})})}this.state.text=t.text,t.delayClear&&setTimeout(function(){n.loadingClearText()},parseInt(t.delayClear))}}},{key:"loadingClearText",value:function(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){var t=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes;t.length>1?t[1].parentNode.removeChild(t[1]):t[0]&&t[0].parentNode.removeChild(t[0])}}},{key:"loadingClear",value:function(){if(document.getElementById("".concat(this.id,"-loading-item-0"))){for(var t=document.getElementById("".concat(this.id,"-loading-item-0")).childNodes,n=t.length-1;n>=0;n--)t[n].parentNode.removeChild(t[n]);document.getElementById("".concat(this.id,"-loading-id-0"))&&(document.getElementById("".concat(this.id,"-loading-id-0")).style.background="none"),document.getElementById("loading-icon")&&document.getElementById("loading-icon").parentNode.removeChild(document.getElementById("loading-icon"))}}},{key:"loadingEnd",value:function(){var t=document.getElementById("".concat(this.id,"-loading-item-0"));if(t){t.parentNode.removeChild(t);var n=document.getElementById("".concat(this.id,"-loading-id-0"));n&&n.children.length===0&&n.parentNode.removeChild(n)}document.getElementById("".concat(this.id,"-loading-item-0")).style.background="none"}}]),Z}(),vu=function(){function Z(m,t){En(this,Z),this.id=t,this.jSPlugin=m,this.timer=null,this.state={play:!1,loading:!1}}return Rn(Z,[{key:"default",value:function(t,n){var o=this,l="msgId",d=n||document.getElementById("".concat(this.id,"-wrap"));document.getElementById("".concat(this.id,"-").concat(l))&&d.removeChild(document.getElementById("".concat(this.id,"-").concat(l)));var c=document.createElement("div");c.id="".concat(this.id,"-").concat(l),c.style="position: absolute;top: 50%;left:calc(50% - ".concat(t.length*14/2,"px);padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px"),c.innerHTML=t,d.appendChild(c),this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){d.removeChild(document.getElementById("".concat(o.id,"-").concat(l)))},2e3)}}]),Z}(),yu=[{moduleCode:"",detailCode:"405984",description:"",solution:"",updateTime:1559564188e3},{moduleCode:"",detailCode:"10035",description:"获取子账户AccessToken异常,子账户不存在或子账户不属于该开发者",solution:"",updateTime:1559551958e3},{moduleCode:"",detailCode:"1052674",description:"获取本地录像失败",solution:"",updateTime:1558579653e3},{moduleCode:"",detailCode:"395547",description:"",solution:"",updateTime:1557367296e3},{moduleCode:"",detailCode:"12",description:"",solution:"",updateTime:1557229476e3},{moduleCode:"",detailCode:"10052",description:"余额不足",solution:"",updateTime:1557121463e3},{moduleCode:"",detailCode:"20108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:1556541725e3},{moduleCode:"",detailCode:"10009",description:"",solution:"",updateTime:1556422452e3},{moduleCode:"",detailCode:"320001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:1556419044e3},{moduleCode:"",detailCode:"120001",description:"通道不存在",solution:"请检查录像机的关联状态是否正常，没有摄像头的通道无法播放",updateTime:155641903e4},{moduleCode:"",detailCode:"320049",description:"",solution:"",updateTime:1556272984e3},{moduleCode:"",detailCode:"380227",description:"",solution:"",updateTime:1556264379e3},{moduleCode:"",detailCode:"10033",description:"policy参数信息异常",solution:"",updateTime:1555922124e3},{moduleCode:"",detailCode:"10065",description:"weakAppKey 不属于accessToken对应的用户",solution:"",updateTime:1555497522e3},{moduleCode:"",detailCode:"100001",description:"",solution:"",updateTime:1555141776e3},{moduleCode:"",detailCode:"395558",description:"",solution:"",updateTime:1554987121e3},{moduleCode:"",detailCode:"70001",description:"智能家居买断用户设备受到限制,建议合理选择pagestart和pageSize",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"170001",description:"",solution:"",updateTime:1554691023e3},{moduleCode:"",detailCode:"1012",description:"重置失败",solution:"",updateTime:1554645841e3},{moduleCode:"",detailCode:"1043",description:"重置失败",solution:"",updateTime:1554645834e3},{moduleCode:"",detailCode:"60060",description:"直播功能未开通",solution:"通道未开通直播功能，请先开通直播",updateTime:1554346018e3},{moduleCode:"",detailCode:"380203",description:"",solution:"",updateTime:1554093666e3},{moduleCode:"",detailCode:"399048",description:"免费版并发数达到上限，请升级企业版使用多并发能力",solution:"升级成为企业版套餐即可取消并发数限制",updateTime:1553839878e3},{moduleCode:"",detailCode:"60007",description:"预置点个数超过最大值",solution:"",updateTime:1553671316e3},{moduleCode:"",detailCode:"1005",description:"",solution:"",updateTime:1553513701e3},{moduleCode:"",detailCode:"20605",description:"其他用户正在认证中",solution:"",updateTime:1552976317e3},{moduleCode:"",detailCode:"90004",description:"当前型号设备暂时不支持AI任务：CS-C3W-3B1WFR-YGL",solution:"",updateTime:1552898525e3},{moduleCode:"",detailCode:"60046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:1552872372e3},{moduleCode:"",detailCode:"3",description:"修改视频清晰度失败!",solution:"",updateTime:1552440229e3},{moduleCode:"",detailCode:"1013",description:"",solution:"",updateTime:1552035069e3},{moduleCode:"",detailCode:"370007",description:"",solution:"",updateTime:1551852327e3},{moduleCode:"",detailCode:"-1",description:"",solution:"",updateTime:1551752889e3},{moduleCode:"",detailCode:"30005",description:"弱账户不存在",solution:"",updateTime:1551422358e3},{moduleCode:"",detailCode:"90006",description:"用户操作AI任务受限",solution:"",updateTime:155107332e4},{moduleCode:"",detailCode:"60203",description:"未开通相关服务",solution:"",updateTime:155062307e4},{moduleCode:"",detailCode:"10002",description:"accessToken过期或异常",solution:"",updateTime:1550300346e3},{moduleCode:"",detailCode:"380339",description:"",solution:"",updateTime:1549889458e3},{moduleCode:"",detailCode:"90002",description:"AI任务设备配置数达到上限：3",solution:"",updateTime:1549071664e3},{moduleCode:"",detailCode:"380008",description:"",solution:"",updateTime:1549005979e3},{moduleCode:"",detailCode:"320227",description:"",solution:"",updateTime:1548739731e3},{moduleCode:"",detailCode:"60059",description:"ezopen地址均不可用",solution:"",updateTime:154839535e4},{moduleCode:"",detailCode:"10005",description:"appKey异常",solution:"",updateTime:1548317858e3},{moduleCode:"",detailCode:"60045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:1548155085e3},{moduleCode:"",detailCode:"60047",description:"码流类型不支持",solution:"",updateTime:1547962108e3},{moduleCode:"",detailCode:"60041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:154796098e4},{moduleCode:"",detailCode:"110029",description:"个人用户接口调用频率超限",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1547606859e3},{moduleCode:"",detailCode:"380355",description:"设备直连推流异常结束",solution:"",updateTime:1547106294e3},{moduleCode:"",detailCode:"320081",description:"",solution:"",updateTime:1547106279e3},{moduleCode:"",detailCode:"60035",description:"购买云存储服务失败",solution:"",updateTime:1547026959e3},{moduleCode:"",detailCode:"90005",description:"设备已存在：C75714141",solution:"",updateTime:1546940622e3},{moduleCode:"",detailCode:"1053445",description:"该时间段没有录像片段",solution:"",updateTime:1546935727e3},{moduleCode:"",detailCode:"90007",description:"设备未加入到AI任务",solution:"",updateTime:1546932948e3},{moduleCode:"",detailCode:"326000",description:"",solution:"",updateTime:1546823143e3},{moduleCode:"",detailCode:"1021",description:"重置失败",solution:"",updateTime:1546781152e3},{moduleCode:"",detailCode:"2001",description:"删除设备失败!",solution:"",updateTime:1546422886e3},{moduleCode:"",detailCode:"380425",description:"",solution:"",updateTime:1546407694e3},{moduleCode:"",detailCode:"120097",description:"",solution:"",updateTime:1546085995e3},{moduleCode:"",detailCode:"10059",description:"requestId已存在",solution:"",updateTime:1545824509e3},{moduleCode:"",detailCode:"1154723",description:"",solution:"",updateTime:1545795209e3},{moduleCode:"",detailCode:"60043",description:"添加的设备超出最大数量",solution:"",updateTime:1545493607e3},{moduleCode:"",detailCode:"1152677",description:"",solution:"",updateTime:1545313404e3},{moduleCode:"",detailCode:"20097",description:"设备添加异常,设备验证码为ABCDEF或设备被N1，R1关联",solution:"",updateTime:1545310795e3},{moduleCode:"",detailCode:"10060",description:"设备不支持该云存储类型",solution:"",updateTime:1545309064e3},{moduleCode:"",detailCode:"20102",description:"无相应邀请信息，无法接受邀请",solution:"",updateTime:1545204966e3},{moduleCode:"",detailCode:"10053",description:"云存储开通中",solution:"",updateTime:1545100293e3},{moduleCode:"",detailCode:"20401",description:"用户云空间信息不存在",solution:"",updateTime:154501788e4},{moduleCode:"",detailCode:"20600",description:"临时密码数已达上限",solution:"",updateTime:1544873457e3},{moduleCode:"",detailCode:"901",description:"",solution:"",updateTime:1544693519e3},{moduleCode:"",detailCode:"60210",description:"图片数据错误",solution:"",updateTime:1544604457e3},{moduleCode:"",detailCode:"10013",description:"您的应用没有权限调用",solution:"",updateTime:1544416237e3},{moduleCode:"",detailCode:"70007",description:"授权码不存在",solution:"",updateTime:1544179533e3},{moduleCode:"",detailCode:"10015",description:"授权地址不存在",solution:"",updateTime:154416324e4},{moduleCode:"",detailCode:"320423",description:"",solution:"",updateTime:1544100685e3},{moduleCode:"",detailCode:"370009",description:"",solution:"",updateTime:1544077151e3},{moduleCode:"",detailCode:"10031",description:"子账户或萤石用户没有权限",solution:"",updateTime:1543990462e3},{moduleCode:"",detailCode:"10055",description:"设备不支持试用云存储服务",solution:"",updateTime:1543986292e3},{moduleCode:"",detailCode:"60042",description:"添加的设备密码错误",solution:"",updateTime:1543710913e3},{moduleCode:"",detailCode:"60082",description:"设备正在响应本次声源定位",solution:"",updateTime:1543647426e3},{moduleCode:"",detailCode:"10056",description:"设备不支持云存储服务转出",solution:"",updateTime:1543558342e3},{moduleCode:"",detailCode:"20104",description:"好友不存在",solution:"",updateTime:1543492403e3},{moduleCode:"",detailCode:"20111",description:"好友不是等待验证状态，无法接受邀请",solution:"",updateTime:1543492365e3},{moduleCode:"",detailCode:"20107",description:"不能添加自己为好友",solution:"",updateTime:1543480986e3},{moduleCode:"",detailCode:"1",description:"设备返回其他错误",solution:"",updateTime:1543459921e3},{moduleCode:"",detailCode:"60084",description:"当前正在关闭隐私遮蔽",solution:"",updateTime:1543456515e3},{moduleCode:"",detailCode:"380255",description:"",solution:"",updateTime:1543411652e3},{moduleCode:"",detailCode:"20015",description:"设备不支持",solution:"",updateTime:1543390936e3},{moduleCode:"",detailCode:"30003",description:"手机验证码错误",solution:"",updateTime:1543389137e3},{moduleCode:"",detailCode:"20615",description:"锁用户已存在",solution:"",updateTime:1543388325e3},{moduleCode:"",detailCode:"60061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:1543372581e3},{moduleCode:"",detailCode:"60020",description:"设备不支持该信令",solution:"",updateTime:1543321636e3},{moduleCode:"",detailCode:"320146",description:"",solution:"",updateTime:1543318472e3},{moduleCode:"",detailCode:"60018",description:"设备升级失败",solution:"",updateTime:1543304928e3},{moduleCode:"",detailCode:"60044",description:"添加的设备网络不可达超时",solution:"",updateTime:1543304102e3},{moduleCode:"",detailCode:"20619",description:"主用户无法删除",solution:"",updateTime:1543290219e3},{moduleCode:"",detailCode:"20608",description:"锁用户不存在",solution:"",updateTime:154328195e4},{moduleCode:"",detailCode:"20609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:1543281601e3},{moduleCode:"",detailCode:"1049954",description:"升级设备失败",solution:"",updateTime:1543279264e3},{moduleCode:"",detailCode:"60009",description:"正在调用预置点",solution:"",updateTime:1543238114e3},{moduleCode:"",detailCode:"1052677",description:"获取本地录像失败",solution:"",updateTime:1543207604e3},{moduleCode:"",detailCode:"327000",description:"",solution:"",updateTime:1543196609e3},{moduleCode:"",detailCode:"20021",description:"设备在线，未被用户添加",solution:"",updateTime:1543193436e3},{moduleCode:"",detailCode:"20202",description:"操作留言信息失败",solution:"",updateTime:1543191562e3},{moduleCode:"",detailCode:"1052678",description:"获取本地录像失败",solution:"",updateTime:1543132218e3},{moduleCode:"",detailCode:"1054723",description:"格式化设备失败",solution:"",updateTime:1543129833e3},{moduleCode:"",detailCode:"20109",description:"对应分享不存在",solution:"",updateTime:1543129111e3},{moduleCode:"",detailCode:"60026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:1543110403e3},{moduleCode:"",detailCode:"60083",description:"当前正在开启隐私遮蔽",solution:"",updateTime:1543071148e3},{moduleCode:"",detailCode:"60001",description:"用户无云台控制权限",solution:"",updateTime:1543059167e3},{moduleCode:"",detailCode:"2003",description:"设备不在线",solution:"",updateTime:1543051046e3},{moduleCode:"",detailCode:"-24",description:"设置设备enable错误",solution:"",updateTime:1543042701e3},{moduleCode:"",detailCode:"10018",description:"",solution:"",updateTime:1543041564e3},{moduleCode:"",detailCode:"20103",description:"好友已存在",solution:"",updateTime:154303843e4},{moduleCode:"",detailCode:"70010",description:"授权异常请重试",solution:"",updateTime:154303559e4},{moduleCode:"",detailCode:"60056",description:"删除设备失败",solution:"",updateTime:1543031275e3},{moduleCode:"",detailCode:"60040",description:"添加的设备不在同一局域网",solution:"",updateTime:154303121e4},{moduleCode:"",detailCode:"60019",description:"加密已开启",solution:"",updateTime:1543029931e3},{moduleCode:"",detailCode:"1054722",description:"格式化设备失败",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"20016",description:"当前设备正在格式化",solution:"",updateTime:1543028537e3},{moduleCode:"",detailCode:"10024",description:"透明通道权限校验不通过",solution:"",updateTime:154302554e4},{moduleCode:"",detailCode:"6002",description:"删除设备失败!",solution:"",updateTime:1543025026e3},{moduleCode:"",detailCode:"1011",description:"验证码错误！",solution:"",updateTime:1543016865e3},{moduleCode:"",detailCode:"60032",description:"卡密已使用",solution:"",updateTime:1543006668e3},{moduleCode:"",detailCode:"10034",description:"子账号已存在",solution:"",updateTime:1542989194e3},{moduleCode:"",detailCode:"20301",description:"根据uuid查询联动信息不存在",solution:"",updateTime:1542988651e3},{moduleCode:"",detailCode:"1041",description:"获取验证码过于频繁",solution:"",updateTime:1542980953e3},{moduleCode:"",detailCode:"10012",description:"该appkey下已绑定重复的phone！",solution:"",updateTime:15429808e5},{moduleCode:"",detailCode:"1008",description:"phone不合法！",solution:"",updateTime:1542979812e3},{moduleCode:"",detailCode:"60023",description:"订阅操作失败",solution:"",updateTime:1542979006e3},{moduleCode:"",detailCode:"5",description:"设备返回其他错误",solution:"",updateTime:1542977828e3},{moduleCode:"",detailCode:"60006",description:"云台当前操作失败",solution:"",updateTime:1542977598e3},{moduleCode:"",detailCode:"131",description:"修改视频清晰度失败!",solution:"",updateTime:1542977246e3},{moduleCode:"",detailCode:"10019",description:"密码错误",solution:"",updateTime:1542976628e3},{moduleCode:"",detailCode:"10004",description:"用户不存在",solution:"",updateTime:1542976268e3},{moduleCode:"",detailCode:"20201",description:"操作报警信息失败",solution:"",updateTime:1542975906e3},{moduleCode:"",detailCode:"20024",description:"设备不在线，已经被别的用户添加",solution:"",updateTime:1542975858e3},{moduleCode:"",detailCode:"60004",description:"设备云台旋转达到左限位",solution:"",updateTime:1542975207e3},{moduleCode:"",detailCode:"1052679",description:"修改视频清晰度失败!",solution:"",updateTime:1542974886e3},{moduleCode:"",detailCode:"20031",description:"请在萤石客户端关闭终端绑定",solution:"",updateTime:1542974756e3},{moduleCode:"",detailCode:"1053825",description:"获取本地录像失败",solution:"",updateTime:1542974692e3},{moduleCode:"",detailCode:"60011",description:"预置点不存在",solution:"",updateTime:1542974414e3},{moduleCode:"",detailCode:"1052936",description:"修改视频清晰度失败!",solution:"",updateTime:154297439e4},{moduleCode:"",detailCode:"1016",description:"",solution:"",updateTime:1542974273e3},{moduleCode:"",detailCode:"10032",description:"子账号不存在",solution:"",updateTime:1542973906e3},{moduleCode:"",detailCode:"20013",description:"设备已被别人添加",solution:"",updateTime:1542973817e3},{moduleCode:"",detailCode:"50000",description:"服务器错误!",solution:"",updateTime:1542973801e3},{moduleCode:"",detailCode:"60010",description:"该预置点已经是当前位置",solution:"",updateTime:15429738e5},{moduleCode:"",detailCode:"60003",description:"设备云台旋转达到下限位",solution:"",updateTime:154297377e4},{moduleCode:"",detailCode:"4",description:"设备返回其他错误",solution:"",updateTime:1542973755e3},{moduleCode:"",detailCode:"60016",description:"加密未开启，无需关闭",solution:"",updateTime:1542973753e3},{moduleCode:"",detailCode:"60002",description:"设备云台旋转达到上限位",solution:"",updateTime:1542973742e3},{moduleCode:"",detailCode:"20023",description:"设备不在线，未被用户添加",solution:"",updateTime:1542973685e3},{moduleCode:"",detailCode:"10008",description:"",solution:"",updateTime:1542973676e3},{moduleCode:"",detailCode:"20010",description:"设备验证码错误",solution:"",updateTime:1542973658e3},{moduleCode:"",detailCode:"60005",description:"设备云台旋转达到右限位",solution:"",updateTime:1542973657e3},{moduleCode:"",detailCode:"20017",description:"设备已经被自己添加",solution:"",updateTime:1542973648e3},{moduleCode:"",detailCode:"20020",description:"设备在线，已经被自己添加",solution:"",updateTime:1542973533e3},{moduleCode:"",detailCode:"20029",description:"设备不在线，已经被自己添加",solution:"",updateTime:154297353e4},{moduleCode:"",detailCode:"10014",description:"APPKEY下对应的第三方userId和phone未绑定！",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"20002",description:"设备不存在",solution:"",updateTime:1542973499e3},{moduleCode:"",detailCode:"10030",description:"appkey和appsecret不匹配",solution:"",updateTime:154297349e4},{moduleCode:"",detailCode:"20022",description:"设备在线，已经被别的用户添加",solution:"",updateTime:1542973486e3},{moduleCode:"",detailCode:"20008",description:"设备响应超时",solution:"",updateTime:1542973484e3},{moduleCode:"",detailCode:"20032",description:"该用户下通道不存在",solution:"",updateTime:1542973481e3},{moduleCode:"",detailCode:"20006",description:"网络异常",solution:"",updateTime:1542973475e3},{moduleCode:"",detailCode:"20014",description:"deviceSerial不合法!",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20007",description:"设备不在线",solution:"",updateTime:1542973454e3},{moduleCode:"",detailCode:"20018",description:"该用户不拥有该设备",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10010",description:"",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"10011",description:"未绑定！",solution:"",updateTime:1542973453e3},{moduleCode:"",detailCode:"20001",description:"通道不存在!",solution:"",updateTime:1542973452e3},{moduleCode:"",detailCode:"10017",description:"appKey不存在",solution:"",updateTime:1542973451e3},{moduleCode:"",detailCode:"400259",description:"",solution:"",updateTime:1542875643e3},{moduleCode:"",detailCode:"400004",description:"",solution:"",updateTime:1542873364e3},{moduleCode:"",detailCode:"3840",description:"",solution:"",updateTime:154186e7},{moduleCode:"",detailCode:"-1017",description:"",solution:"",updateTime:1541733663e3},{moduleCode:"",detailCode:"320025",description:"",solution:"",updateTime:1541078281e3},{moduleCode:"",detailCode:"320024",description:"",solution:"",updateTime:1540801374e3},{moduleCode:"",detailCode:"321002",description:"",solution:"",updateTime:1540631734e3},{moduleCode:"",detailCode:"321000",description:"",solution:"",updateTime:1540609178e3},{moduleCode:"",detailCode:"321022",description:"",solution:"",updateTime:1540548345e3},{moduleCode:"",detailCode:"321016",description:"",solution:"",updateTime:1540287187e3},{moduleCode:"",detailCode:"320023",description:"",solution:"",updateTime:1539825993e3},{moduleCode:"",detailCode:"-1016",description:"",solution:"",updateTime:1539584931e3},{moduleCode:"",detailCode:"8",description:"",solution:"",updateTime:1539391812e3},{moduleCode:"",detailCode:"1075127593",description:"",solution:"",updateTime:1538959251e3},{moduleCode:"",detailCode:"380421",description:"",solution:"",updateTime:1537288465e3},{moduleCode:"",detailCode:"322000",description:"麦克风权限未开启",solution:"",updateTime:1536820136e3},{moduleCode:"",detailCode:"1152678",description:"",solution:"",updateTime:1536738348e3},{moduleCode:"",detailCode:"320047",description:"",solution:"",updateTime:1536664472e3},{moduleCode:"",detailCode:"327006",description:"",solution:"",updateTime:153613612e4},{moduleCode:"",detailCode:"1074807593",description:"",solution:"",updateTime:1536135035e3},{moduleCode:"",detailCode:"320291",description:"",solution:"",updateTime:1536110836e3},{moduleCode:"",detailCode:"320045",description:"",solution:"",updateTime:1535963775e3},{moduleCode:"",detailCode:"370004",description:"",solution:"",updateTime:1535883699e3},{moduleCode:"",detailCode:"1149954",description:"",solution:"",updateTime:1535700674e3},{moduleCode:"",detailCode:"320053",description:"",solution:"",updateTime:1535681079e3},{moduleCode:"",detailCode:"400000",description:"",solution:"",updateTime:1535532332e3},{moduleCode:"",detailCode:"110028",description:"个人版抓图接口日调用次数超出限制",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348756e3},{moduleCode:"",detailCode:"110027",description:"个人版帐号数量超出安全限制，无法调用",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348734e3},{moduleCode:"",detailCode:"110026",description:"设备数量超出个人版限制，当前设备无法操作",solution:"请升级企业版：https://open.ys7.com/price.html",updateTime:1535348588e3},{moduleCode:"",detailCode:"100000",description:"",solution:"",updateTime:1534980008e3},{moduleCode:"",detailCode:"324004",description:"",solution:"",updateTime:1534927762e3},{moduleCode:"",detailCode:"360104",description:"",solution:"",updateTime:1534761006e3},{moduleCode:"",detailCode:"320204",description:"",solution:"",updateTime:1534584221e3},{moduleCode:"",detailCode:"380001",description:"",solution:"",updateTime:1534404715e3},{moduleCode:"",detailCode:"380204",description:"",solution:"",updateTime:1534401682e3},{moduleCode:"",detailCode:"328006",description:"",solution:"",updateTime:1534144407e3},{moduleCode:"",detailCode:"321703",description:"",solution:"",updateTime:1534127274e3},{moduleCode:"",detailCode:"321510",description:"",solution:"",updateTime:1533428892e3},{moduleCode:"",detailCode:"321006",description:"",solution:"",updateTime:1533036916e3},{moduleCode:"",detailCode:"50009",description:"",solution:"",updateTime:1532078548e3},{moduleCode:"",detailCode:"50007",description:"",solution:"",updateTime:153199172e4},{moduleCode:"",detailCode:"50018",description:"",solution:"",updateTime:1531912829e3},{moduleCode:"",detailCode:"380451",description:"",solution:"",updateTime:15316157e5},{moduleCode:"",detailCode:"380336",description:"",solution:"",updateTime:1531231721e3},{moduleCode:"",detailCode:"360020",description:"",solution:"",updateTime:1531117554e3},{moduleCode:"",detailCode:"380418",description:"",solution:"",updateTime:153110707e4},{moduleCode:"",detailCode:"1153445",description:"设备在该时间段内没有录像",solution:"",updateTime:1530944007e3},{moduleCode:"",detailCode:"110007",description:"调用接口总次数达到上限",solution:"请升级企业版，获取更高能力",updateTime:1530935584e3},{moduleCode:"",detailCode:"360019",description:"",solution:"",updateTime:1530869771e3},{moduleCode:"",detailCode:"360100",description:"",solution:"",updateTime:1530786188e3},{moduleCode:"",detailCode:"380042",description:"",solution:"",updateTime:1530775199e3},{moduleCode:"",detailCode:"320355",description:"",solution:"",updateTime:1530716074e3},{moduleCode:"",detailCode:"100003",description:"",solution:"",updateTime:1530232541e3},{moduleCode:"",detailCode:"371026",description:"",solution:"",updateTime:15301926e5},{moduleCode:"",detailCode:"102",description:"",solution:"",updateTime:1529895641e3},{moduleCode:"",detailCode:"380201",description:"",solution:"",updateTime:1529740929e3},{moduleCode:"",detailCode:"320054",description:"",solution:"",updateTime:1529544875e3},{moduleCode:"",detailCode:"500101",description:"",solution:"",updateTime:1529485953e3},{moduleCode:"",detailCode:"321001",description:"",solution:"",updateTime:1529411048e3},{moduleCode:"",detailCode:"321508",description:"",solution:"",updateTime:1529393279e3},{moduleCode:"",detailCode:"405991",description:"",solution:"",updateTime:1529380238e3},{moduleCode:"",detailCode:"380461",description:"",solution:"",updateTime:1529130941e3},{moduleCode:"",detailCode:"-1019",description:"",solution:"",updateTime:1529057245e3},{moduleCode:"",detailCode:"322009",description:"",solution:"",updateTime:1528965717e3},{moduleCode:"",detailCode:"324005",description:"",solution:"",updateTime:1528950153e3},{moduleCode:"",detailCode:"325000",description:"",solution:"",updateTime:1528947143e3},{moduleCode:"",detailCode:"326032",description:"",solution:"",updateTime:1528872971e3},{moduleCode:"",detailCode:"325032",description:"",solution:"",updateTime:1528863189e3},{moduleCode:"",detailCode:"328000",description:"",solution:"",updateTime:1528794505e3},{moduleCode:"",detailCode:"53",description:"",solution:"",updateTime:1528693249e3},{moduleCode:"",detailCode:"-1020",description:"",solution:"",updateTime:152849944e4},{moduleCode:"",detailCode:"329032",description:"",solution:"",updateTime:1528446301e3},{moduleCode:"",detailCode:"-1202",description:"",solution:"",updateTime:152843982e4},{moduleCode:"",detailCode:"2",description:"",solution:"",updateTime:1528434175e3},{moduleCode:"",detailCode:"1152936",description:"",solution:"",updateTime:1528345986e3},{moduleCode:"",detailCode:"328011",description:"",solution:"",updateTime:15283386e5},{moduleCode:"",detailCode:"28",description:"",solution:"",updateTime:152833753e4},{moduleCode:"",detailCode:"320356",description:"",solution:"",updateTime:1528188693e3},{moduleCode:"",detailCode:"320357",description:"",solution:"",updateTime:1528188517e3},{moduleCode:"",detailCode:"405800",description:"",solution:"",updateTime:1528168732e3},{moduleCode:"",detailCode:"405996",description:"",solution:"",updateTime:1528168686e3},{moduleCode:"",detailCode:"380357",description:"",solution:"",updateTime:1528011565e3},{moduleCode:"",detailCode:"328022",description:"",solution:"",updateTime:1527929065e3},{moduleCode:"",detailCode:"380003",description:"",solution:"",updateTime:1527927819e3},{moduleCode:"",detailCode:"50004",description:"",solution:"",updateTime:1527770643e3},{moduleCode:"",detailCode:"50011",description:"",solution:"",updateTime:1527770635e3},{moduleCode:"",detailCode:"370017",description:"",solution:"",updateTime:1527739514e3},{moduleCode:"",detailCode:"327032",description:"",solution:"",updateTime:1527726704e3},{moduleCode:"",detailCode:"324001",description:"",solution:"",updateTime:1527681892e3},{moduleCode:"",detailCode:"405997",description:"",solution:"",updateTime:1527653408e3},{moduleCode:"",detailCode:"405995",description:"",solution:"",updateTime:1527647283e3},{moduleCode:"",detailCode:"1153825",description:"",solution:"",updateTime:1527601747e3},{moduleCode:"",detailCode:"328002",description:"",solution:"",updateTime:1527495292e3},{moduleCode:"",detailCode:"1152679",description:"",solution:"",updateTime:1527486665e3},{moduleCode:"",detailCode:"380356",description:"",solution:"",updateTime:1527125669e3},{moduleCode:"",detailCode:"328032",description:"",solution:"",updateTime:1527069382e3},{moduleCode:"",detailCode:"22",description:"",solution:"",updateTime:1527049826e3},{moduleCode:"",detailCode:"9",description:"",solution:"",updateTime:1527006778e3},{moduleCode:"",detailCode:"89",description:"",solution:"",updateTime:1526622784e3},{moduleCode:"",detailCode:"328016",description:"",solution:"",updateTime:1526452365e3},{moduleCode:"",detailCode:"368005",description:"",solution:"",updateTime:1525921264e3},{moduleCode:"",detailCode:"0",description:"",solution:"",updateTime:1525920242e3},{moduleCode:"",detailCode:"380006",description:"",solution:"",updateTime:1525918868e3},{moduleCode:"",detailCode:"310",description:"",solution:"",updateTime:1525834436e3},{moduleCode:"",detailCode:"360011",description:"",solution:"",updateTime:1525681552e3},{moduleCode:"",detailCode:"170005",description:"",solution:"",updateTime:15254339e5},{moduleCode:"",detailCode:"50023",description:"",solution:"",updateTime:1525403338e3},{moduleCode:"",detailCode:"100131",description:"",solution:"",updateTime:1525229691e3},{moduleCode:"",detailCode:"-1018",description:"",solution:"",updateTime:1525142341e3},{moduleCode:"",detailCode:"362026",description:"",solution:"",updateTime:1524882677e3},{moduleCode:"",detailCode:"368007",description:"",solution:"",updateTime:1524832269e3},{moduleCode:"",detailCode:"54",description:"",solution:"",updateTime:1524793646e3},{moduleCode:"",detailCode:"1154722",description:"",solution:"",updateTime:1524620807e3},{moduleCode:"",detailCode:"320229",description:"",solution:"",updateTime:1524551682e3},{moduleCode:"",detailCode:"360012",description:"",solution:"",updateTime:1524472094e3},{moduleCode:"",detailCode:"380229",description:"",solution:"",updateTime:1524110755e3},{moduleCode:"",detailCode:"360016",description:"",solution:"",updateTime:1523933518e3},{moduleCode:"",detailCode:"-1003",description:"",solution:"",updateTime:1523584804e3},{moduleCode:"",detailCode:"410026",description:"",solution:"",updateTime:152351743e4},{moduleCode:"",detailCode:"360102",description:"TTS初始化失败",solution:"",updateTime:1523503528e3},{moduleCode:"",detailCode:"360013",description:"设备开启了隐私保护",solution:"",updateTime:1523503507e3},{moduleCode:"",detailCode:"360010",description:"设备正在对讲中",solution:"",updateTime:1523503491e3},{moduleCode:"",detailCode:"360007",description:"TTS关闭了与客户端的连接",solution:"",updateTime:1523503475e3},{moduleCode:"",detailCode:"360006",description:"客户端接收发生错误",solution:"",updateTime:1523503457e3},{moduleCode:"",detailCode:"360005",description:"客户端发送的消息错误",solution:"",updateTime:1523503437e3},{moduleCode:"",detailCode:"360004",description:"TTS内部发生错误",solution:"",updateTime:1523503421e3},{moduleCode:"",detailCode:"360003",description:"TTS的设备端发生错误",solution:"",updateTime:1523503397e3},{moduleCode:"",detailCode:"360002",description:"对讲发起超时",solution:"",updateTime:1523503376e3},{moduleCode:"",detailCode:"360001",description:"客户端请求超时",solution:"",updateTime:1523503357e3},{moduleCode:"",detailCode:"320077",description:"",solution:"",updateTime:1523444274e3},{moduleCode:"",detailCode:"370047",description:"",solution:"",updateTime:152344048e4},{moduleCode:"",detailCode:"100002",description:"",solution:"",updateTime:1523413964e3},{moduleCode:"",detailCode:"-1004",description:"",solution:"",updateTime:1523336653e3},{moduleCode:"",detailCode:"380000",description:"",solution:"",updateTime:1523180856e3},{moduleCode:"",detailCode:"380213",description:"",solution:"",updateTime:1523180623e3},{moduleCode:"",detailCode:"380101",description:"",solution:"",updateTime:1522834231e3},{moduleCode:"",detailCode:"50047",description:"",solution:"",updateTime:1522833243e3},{moduleCode:"",detailCode:"-999",description:"",solution:"",updateTime:1522831034e3},{moduleCode:"",detailCode:"320418",description:"",solution:"",updateTime:1522829072e3},{moduleCode:"",detailCode:"-1009",description:"",solution:"",updateTime:1522746247e3},{moduleCode:"",detailCode:"320209",description:"",solution:"",updateTime:1522744395e3},{moduleCode:"",detailCode:"368006",description:"",solution:"",updateTime:15227443e5},{moduleCode:"",detailCode:"369003",description:"",solution:"",updateTime:1522736355e3},{moduleCode:"",detailCode:"405989",description:"",solution:"",updateTime:1522726571e3},{moduleCode:"",detailCode:"-1012",description:"",solution:"",updateTime:1522726203e3},{moduleCode:"",detailCode:"322016",description:"",solution:"",updateTime:1522722918e3},{moduleCode:"",detailCode:"500103",description:"",solution:"",updateTime:1522655556e3},{moduleCode:"",detailCode:"405999",description:"",solution:"",updateTime:1522654716e3},{moduleCode:"",detailCode:"321032",description:"",solution:"",updateTime:1522647732e3},{moduleCode:"",detailCode:"381101",description:"",solution:"",updateTime:1522392414e3},{moduleCode:"",detailCode:"399999",description:"",solution:"",updateTime:1522379834e3},{moduleCode:"",detailCode:"380103",description:"",solution:"",updateTime:1522312724e3},{moduleCode:"",detailCode:"360014",description:"",solution:"",updateTime:1522304341e3},{moduleCode:"",detailCode:"-1005",description:"",solution:"",updateTime:1522288195e3},{moduleCode:"",detailCode:"100005",description:"",solution:"",updateTime:1522218849e3},{moduleCode:"",detailCode:"100004",description:"",solution:"",updateTime:1522209053e3},{moduleCode:"",detailCode:"106002",description:"",solution:"",updateTime:15222062e5},{moduleCode:"",detailCode:"410030",description:"",solution:"",updateTime:1522162252e3},{moduleCode:"",detailCode:"-1002",description:"",solution:"",updateTime:152215069e4},{moduleCode:"",detailCode:"-1200",description:"",solution:"",updateTime:1522139025e3},{moduleCode:"",detailCode:"-1001",description:"",solution:"",updateTime:1522046436e3},{moduleCode:"",detailCode:"-1011",description:"",solution:"",updateTime:1522045931e3},{moduleCode:"",detailCode:"381102",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"381103",description:"",solution:"",updateTime:1522044953e3},{moduleCode:"",detailCode:"391205",description:"vtdu解析服务器ip失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391206",description:"vtdu描述符select失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391207",description:"vtdu文件描述符不在可读中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391208",description:"vtdu网络发生错误getsockopt",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"391209",description:"vtdu描述符select超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395000",description:"cas回复信令，发现内存已经释放（和设备之间异常断开）",msg:"播放失败请重试",solution:"检查设备网络；刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395400",description:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395402",description:"回放找不到录像文件",msg:"回放找不到录像文件，本地存储请检查存储卡是否接触良好",solution:"检查是否有存储卡并且接触良好",updateTime:1522034841e3},{moduleCode:"",detailCode:"395403",description:"操作码或信令密钥与设备不匹配",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395404",description:"设备不在线",solution:"检查设备网络；重启设备接入萤石云",msg:"设备不在线，请检查设备网络或重启设备接入萤石云",updateTime:1522034841e3},{moduleCode:"",detailCode:"395405",description:"流媒体向设备发送或接受信令超时/cas响应超时",msg:"播放失败，请检查设备网络或重启设备",solution:"检查设备网络；重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395406",description:"token失效",msg:"播放失败请重试或重启设备",solution:"刷新重试或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395407",description:"客户端的URL格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395409",description:"预览开启隐私保护",msg:"播放失败请关闭隐私遮蔽",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395410",description:"设备达到最大连接数",solution:"请升级设备固件版本",updateTime:1522034841e3},{moduleCode:"",detailCode:"395411",description:"token无权限",msg:"播放失败",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395412",description:"session不存在",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395413",description:"验证token的他异常（不具体） ",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395415",description:"设备通道错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395416",description:"设备资源受限",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395451",description:"设备不支持的码流类型",msg:"播放失败请重试或切换设备码流",solution:"刷新重试或者切换到高清模式",updateTime:1522034841e3},{moduleCode:"",detailCode:"395452",description:"设备链接流媒体服务器失败",msg:"播放失败，请检查设备网络或重启设备或重新加载",solution:"检查设备网络，重启设备，刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395454",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395455",description:"设备通道未关联",msg:"播放失败，请检查设备通道是否关联",solution:"检查设备通道是否关联",updateTime:152222018e4},{moduleCode:"",detailCode:"395456",description:"设备通道关联设备不在线",msg:"播放失败，请检查设备通道是否上线",solution:"检查设备通道是否上线",updateTime:152222018e4},{moduleCode:"",detailCode:"395457",description:"客户端不支持端到端加密",msg:"播放失败",solution:"客户端不支持端到端加密",updateTime:152222018e4},{moduleCode:"",detailCode:"395458",description:"设备不支持当前并发ECDH密",msg:"客户端不支持端到端加密",solution:"设备不支持当前并发ECDH密",updateTime:152222018e4},{moduleCode:"",detailCode:"395459",description:"VTDU 处理ECDH 加密失败",msg:"播放失败",solution:"VTDU 处理ECDH 加密失败",updateTime:152222018e4},{moduleCode:"",detailCode:"395460",description:"流媒体中关于设备取流会话不存在",msg:"播放失败请重试",solution:"流媒体中关于设备取流会话不存在",updateTime:152222018e4},{moduleCode:"",detailCode:"395492",description:"设备不支持的命令",msg:"操作失败，设备不支持",solution:"",updateTime:152222018e4},{moduleCode:"",detailCode:"395500",description:"服务器处理失败",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395501",description:"流媒体vtdu达到最大负载，请扩容",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395503",description:"vtm返回分配vtdu失败",msg:"播放失败请重试",solution:"vtdu服务异常，请请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395504",description:"流媒体vtdu达到最大负载",msg:"播放失败请重试",solution:"服务器负载达到上限，请稍后重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395505",description:"vtm ecdh解密失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395506",description:"vtm 返回IPC不支持取流（需要IPC添加NVR后支持）",msg:"播放失败，请绑定NVR使用",solution:"IPC绑定NVR使用",updateTime:1522034841e3},{moduleCode:"",detailCode:"395544",description:"设备返回无视频源",msg:"播放失败，请检查设备接触情况",solution:"设备是否接触良好； 如果一直无法解决，请联系技术支持",updateTime:1522034841e3},{moduleCode:"",detailCode:"395545",description:"视频分享时间已经结束",msg:"视频分享时间已结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395546",description:"vtdu返回达到取流并发路数限制",msg:"并发上限，请升级为企业版",solution:"请升级为企业版，放开并发限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395547",description:"vtdu返回开放平台用户并发限制",msg:"并发上限，请升级为企业版",solution:"请确定开放平台用户预览是否超过用户并发数量限制",updateTime:1522034841e3},{moduleCode:"",detailCode:"395556",description:"ticket校验失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395557",description:"回放服务器等待流头超时",msg:"播放失败请重试",solution:"刷新重试，检测设备网络，重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"395558",description:"查找录像开始时间错误",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395560",description:"群组分享取流二次验证失败",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395561",description:"分享群组用户被锁住",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395562",description:"群组分享用户权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395563",description:"认证服务连接失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395564",description:"认证超时",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395566",description:"不在分享时间内预览",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395567",description:"分享通道被锁定",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395568",description:"未找到认证类型",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395569",description:"认证返回的参数异常",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395600",description:"分享设备不在分享时间内",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395601",description:"群组分享用户没权限",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395602",description:"群组分享权限变更",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395610",description:"接收流头失败",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395620",description:"心跳超时",msg:"播放失败请重试并检查设备网络情况以及设备配置",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"395530",description:"机房故障不可用",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395701",description:"cas信令返回格式错误",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395702",description:"SPGW请求Cas、Status透传超时",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"395703",description:"SPGW请求http不通",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396001",description:"客户端参数出错",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396099",description:"客户端默认错误",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396101",description:"不支持的命令",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396102",description:"设备流头发送失败",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396103",description:"cas/设备返回错误1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396104",description:"cas/设备返回错误-1",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396105",description:"设备返回错误码3",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396106",description:"设备返回错误码4",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396107",description:"设备返回错误码5",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396108",description:"cas信令回应重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396109",description:"视频广场取消分享",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396110",description:"设备信令默认错误",msg:"播放失败请重试",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396501",description:"设备数据链路和实际链路不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396502",description:"设备数据链路重复建立连接",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396503",description:"设备数据链路端口不匹配",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396504",description:"缓存设备数据链路失败(内存块不足)",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396505",description:"设备发送确认头消息重复",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396506",description:"设备数据先于确定头部到达",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396508",description:"设备数据头部长度非法",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396509",description:"索引找不到设备数据管理块",msg:"播放失败请重试",solution:"刷新重试",updateTime:1522034841e3},{moduleCode:"",detailCode:"396510",description:"设备数据链路vtdu内存块协议状态不匹配",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396511",description:"设备数据头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396512",description:"设备数据头部非法(较笼统)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396513",description:"设备数据长度过小",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396514",description:"设备老协议推流头部没有streamkey错误",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396515",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396516",description:"设备老协议索引找不到内存管理块",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396517",description:"设备老协议推流数据非法",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396518",description:"设备数据包过大",msg:"播放失败请重试或重启设备",solution:"刷新重试，或者重启设备",updateTime:1522034841e3},{moduleCode:"",detailCode:"396519",description:"设备推流链路网络不稳定",msg:"播放失败，请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396520",description:"设备推流链路网络不稳定(默认)",msg:"播放失败请重试或重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396700",description:"异常数据包",msg:"播放失败，设备重启",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"396701",description:"回放结束数据包",msg:"回放结束",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397001",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397002",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397003",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397004",description:"与相应服务连接失败",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397005",description:"VTDU连接失败，或VTDU侧断开连接",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397006",description:"vtm断开连接（无需 关注）",msg:"播放失败请重试，请检查设备网络情况以及连接情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"397007",description:"客户端发送缓冲区满（上行带宽太小）",msg:"播放失败，上行带宽过小请检查设备网络情况",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399000",description:"无效包，包过大",msg:" 检查设备重启设备",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399001",description:"地址不合法",msg:"播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"399002",description:"缺少端口",msg:" 播放失败",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"170003",description:"refreshToken不存在",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"170004",description:"refreshToken已过期",solution:"建议用户重新调用logout接口，然后调用openLoginPage接口重新启动登录页面登录",updateTime:1522034841e3},{moduleCode:"",detailCode:"380011",description:"设备隐私保护中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380045",description:"设备直连取流连接数量过大",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380047",description:"设备不支持该命令",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380077",description:"设备正在对讲中",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380102",description:"数据接收异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380205",description:"设备检测入参异常",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380209",description:"网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"380212",description:"设备端网络连接超时",solution:"",updateTime:1522034841e3},{moduleCode:"",detailCode:"101007",description:"手机号未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120503",description:"正在响铃",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390016",description:"vtdu成功响应未携带流头",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101008",description:"手机号码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120504",description:"室内机正在通话",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390017",description:"无数据流，尚未使用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101009",description:"用户名与手机不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120505",description:"设备操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390018",description:"信令消息体PB解析失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101010",description:"获取验证码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120506",description:"非法命令",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390019",description:"信令消息体PB封装失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101011",description:"验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120507",description:"智能锁密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390020",description:"申请系统内存资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101012",description:"验证码失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120508",description:"开关锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390021",description:"vtdu地址尚未获取到",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101013",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120509",description:"开关锁超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390022",description:"客户端尚未支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101014",description:"密码不正确或者appKey不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120510",description:"智能锁设备繁忙",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390023",description:"获取系统socket资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101015",description:"用户被锁住",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120511",description:"远程开锁功能未打开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390024",description:"上层填充的StreamSsnId不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101021",description:"验证参数异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120600",description:"临时密码数已达上限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390025",description:"链接服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101026",description:"邮箱已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120601",description:"添加临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390026",description:"客户端请求未收到服务端应答",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101031",description:"邮箱未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120602",description:"删除临时密码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390027",description:"链路断开",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101032",description:"邮箱不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120603",description:"该临时密码不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390028",description:"没有取流链接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101041",description:"获取验证码过于频繁",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120604",description:"指纹锁射频通信失败,请稍后再试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390029",description:"流成功停止",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101043",description:"手机验证码输入错误超过规定次数",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120605",description:"其他用户正在认证中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390030",description:"客户端防串流校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102000",description:"设备不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120606",description:"验证已启动,请在120s内进行本地验证和调用添加设备接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390031",description:"应用层tcp粘包处理缓冲区满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102001",description:"摄像机不存在",solution:"摄像机未注册到萤石云平台，请仔细检查摄像机的网络配置，确保连接到网络",updateTime:152203484e4},{moduleCode:"",detailCode:"120607",description:"删除用户失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390032",description:"无效状态迁移",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102003",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"120608",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390033",description:"无效客户端状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102004",description:"设备异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120609",description:"设备响应超时,门锁通信故障或者电量不足,请重试.",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390034",description:"向vtm取流流媒体信息请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102007",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120610",description:"获取临时密码列表失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390035",description:"向代理取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"102009",description:"设备请求响应超时异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130001",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390036",description:"向代理保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105000",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130002",description:"手机号码已经注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390037",description:"向vtdu取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105001",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130003",description:"手机验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390038",description:"向vtdu保活取流请求超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"105002",description:"设备验证码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"130004",description:"终端绑定操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391001",description:"vtm地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107001",description:"邀请不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"149999",description:"数据异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391002",description:"vtm生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107002",description:"邀请验证失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"150000",description:"服务器异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391003",description:"vtm设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107003",description:"邀请用户不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160000",description:"设备不支持云台控制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391004",description:"vtm设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107004",description:"云存储连接失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160001",description:"用户无云台控制权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391005",description:"vtm解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"7005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107005",description:"VTDU主动断开连接",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160002",description:"设备云台旋转达到上限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391006",description:"vtm描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107006",description:"不能邀请自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160003",description:"设备云台旋转达到下限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391007",description:"vtm文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"107007",description:"重复邀请",solution:"分享和删除分享必须全部由接口形式操作，如果与萤石客户端混用会造成这个问题，解决办法：在萤石客户端清空所有相关分享数据并重新添加设备，再通过接口操作即可",updateTime:152203484e4},{moduleCode:"",detailCode:"160004",description:"设备云台旋转达到左限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391008",description:"vtm网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110001",description:"参数错误",solution:"参数为空或者格式不对",updateTime:152203484e4},{moduleCode:"",detailCode:"160005",description:"设备云台旋转达到右限位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391009",description:"vtm描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110002",description:"accessToken异常或过期",solution:"accessToken有效期为七天，建议在accessToken即将过期或者出现10002错误码的时候重新获取accessToken",updateTime:152203484e4},{moduleCode:"",detailCode:"160006",description:"云台当前操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391101",description:"proxy地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110004",description:"用户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160007",description:"预置点个数超过最大值",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391102",description:"proxy生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110005",description:"appKey异常",solution:"确认appKey状态，不通过或者冻结状态会返回该错误码",updateTime:152203484e4},{moduleCode:"",detailCode:"160009",description:"正在调用预置点",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391103",description:"proxy设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110006",description:"ip受限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160010",description:"该预置点已经是当前位置",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391104",description:"proxy设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160011",description:"预置点不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391105",description:"proxy解析服务器ip失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110008",description:"签名错误",solution:"①获取签名方式详见apidemo及[旧]API文档 ②注意编码格式为UTF-8",updateTime:152203484e4},{moduleCode:"",detailCode:"160013",description:"设备版本已是最新",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391106",description:"proxy描述符select失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110009",description:"签名参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160014",description:"设备正在升级",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391107",description:"proxy文件描述符不在可读中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110010",description:"签名超时",solution:"请调用同步服务器时间接口进行校时",updateTime:152203484e4},{moduleCode:"",detailCode:"160015",description:"设备正在重启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391108",description:"proxy网络发生错误getsockopt",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110011",description:"未开通萤石云服务",solution:"参照绑定流程",updateTime:152203484e4},{moduleCode:"",detailCode:"160016",description:"加密未开启，无须关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391109",description:"proxy描述符select超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110012",description:"第三方账户与萤石账号已经绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160017",description:"设备抓图失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391201",description:"vtdu地址或端口非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110013",description:"应用没有权限调用此接口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160018",description:"设备升级失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391202",description:"vtdu生成文件描述符失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110014",description:"APPKEY下对应的第三方userId和phone未绑定",solution:"获取AccessToken时所用appKey与SDK所用appKey不一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160019",description:"加密已开启",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"391203",description:"vtdu设置文件描述符非阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110017",description:"appKey不存在",solution:"请填写在官网申请的应用秘钥",updateTime:152203484e4},{moduleCode:"",detailCode:"160020",description:"不支持该命令",solution:"请确认设备是否支持该命令",updateTime:152203484e4},{moduleCode:"",detailCode:"391204",description:"vtdu设置文件描述符阻塞失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110018",description:"AccessToken与Appkey不匹配",solution:"请检查获取accessToken对应的appKey和SDK中设置的appKey是否一致",updateTime:152203484e4},{moduleCode:"",detailCode:"160023",description:"订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110019",description:"密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160024",description:"取消订阅操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110020",description:"请求方法为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160025",description:"客流统计配置失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110021",description:"ticket校验失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160026",description:"设备处于隐私遮蔽状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110022",description:"透传目的地非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160027",description:"设备正在镜像操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110024",description:"无透传权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160028",description:"设备正在键控动作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110025",description:"appKey被禁止使用通明通道",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160029",description:"设备处于语音对讲状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160030",description:"卡密输入错误次数过多，24小时后再输入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160031",description:"卡密信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160032",description:"卡密状态不对或已过期",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160033",description:"卡密非卖品，只能开通对应的绑定设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110030",description:"appKey和appSecret不匹配",solution:"请检查appKey和appSecret是否对应",updateTime:152203484e4},{moduleCode:"",detailCode:"160035",description:"购买云存储服务失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110031",description:"子账户或萤石用户没有权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160040",description:"添加的设备不在同一局域网",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110032",description:"子账户不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160041",description:"添加的设备被其他设备关联或响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110033",description:"子账户未设置授权策略",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160042",description:"添加的设备密码错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110034",description:"子账户已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160043",description:"添加的设备超出最大数量",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110035",description:"获取子账户AccessToken异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160044",description:"添加的设备网络不可达超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110036",description:"子账户被禁用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160045",description:"添加的设备的IP和其他通道的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"110051",description:"无权限进行抓图",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160046",description:"添加的设备的IP和本设备的IP冲突",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160047",description:"码流类型不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120002",description:"设备不存在",solution:"①设备没有注册到萤石云平台，请检查下设备网络参数，确保能正常连接网络②设备序列号不存在",updateTime:152203484e4},{moduleCode:"",detailCode:"160048",description:"带宽超出系统接入带宽",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120003",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160049",description:"IP或者端口不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120004",description:"参数异常，SDK版本过低",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160050",description:"添加的设备版本不支持需要升级才能接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120005",description:"安全认证失败，需进行SDK安全认证",solution:"已去掉安全验证",updateTime:152203484e4},{moduleCode:"",detailCode:"160051",description:"添加的设备不支持接入",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120006",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160052",description:"添加的设备通道号出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120007",description:"设备不在线",solution:"参考服务中心排查方法",updateTime:152203484e4},{moduleCode:"",detailCode:"160053",description:"添加的设备分辨率不支持",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120008",description:"设备响应超时",solution:"设备响应超时，请检测设备网络或重试",updateTime:152203484e4},{moduleCode:"",detailCode:"160054",description:"添加的设备账号被锁定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120009",description:"子账号不能添加设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160055",description:"添加的设备取码流出错",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120010",description:"设备验证码错误",solution:"验证码在设备标签上，六位大写字母，注意大小写",updateTime:152203484e4},{moduleCode:"",detailCode:"160056",description:"删除设备失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120012",description:"设备添加失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160057",description:"删除的设备未关联",solution:"检查IPC与NVR是否有关联关系",updateTime:152203484e4},{moduleCode:"",detailCode:"120013",description:"设备已被别人添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160060",description:"地址未绑定",solution:"请前往官网设置直播",updateTime:152203484e4},{moduleCode:"",detailCode:"120014",description:"设备序列号不正确",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160061",description:"账户流量已超出或未购买，限制开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120015",description:"设备不支持该功能",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160062",description:"该通道直播已开通",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120016",description:"当前设备正在格式化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160063",description:"直播未使用或直播已关闭",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120017",description:"设备已被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160070",description:"设备不能转移给自己",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120018",description:"该用户不拥有该设备",solution:"确认设备是否属于用户",updateTime:152203484e4},{moduleCode:"",detailCode:"160071",description:"设备不能转移，设备与其他设备存在关联关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400001",description:"参数为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120019",description:"设备不支持云存储服务",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160072",description:"设备不能转移，通道被分享给其他用户或者分享到视频广场",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400002",description:"参数错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120020",description:"设备在线，被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160073",description:"云存储转移失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400025",description:"设备不支持对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120021",description:"设备在线，但是未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160080",description:"当前正在声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400029",description:"没有初始化或资源被释放",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120022",description:"设备在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160081",description:"当前正在轨迹巡航",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400030",description:"json解析异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120023",description:"设备不在线，未被用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160082",description:"设备正在响应本次声源定位",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400031",description:"网络异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120024",description:"设备不在线，但是已经被别的用户添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"160083",description:"当前正在开启隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400032",description:"设备信息异常为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120025",description:"重复申请分享",solution:"确认设备是否由添加过该设备且申请过分享的账户下是否还存在分享记录",updateTime:152203484e4},{moduleCode:"",detailCode:"160084",description:"当前正在关闭隐私遮蔽",solution:"设备正在操作隐私遮蔽，无法进行当前操作",updateTime:152203484e4},{moduleCode:"",detailCode:"400034",description:"取流超时",solution:"一般是由于网络状况不好导致，可以尝试下让用户重新播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120026",description:"视频广场不存在该视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"380290",description:"　连接CAS服务器失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400035",description:"设备已加密，需要输入验证码",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120027",description:"视频转码失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361001",description:"对讲服务端排队超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400036",description:"播放验证码错误",solution:"收到此错误码，需要让用户输入验证码后，调用EZPlayer.setPlayKey传入验证码，并重新调用播放函数",updateTime:152203484e4},{moduleCode:"",detailCode:"120028",description:"设备固件升级包不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361002",description:"对讲服务端处理超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400037",description:"surfacehold错误",solution:"请检查是否是播放之前销毁了surface，收到此错误也可以重新建立surface后播放",updateTime:152203484e4},{moduleCode:"",detailCode:"120029",description:"设备不在线，但是已经被自己添加",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361003",description:"设备链接对讲服务器超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400100",description:"未知错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120030",description:"该用户不拥有该视频广场视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361004",description:"服务器内部错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400200",description:"player sdk出错，这种错误一般开发者也是无法解决，不具体分类传出，传一个统一的inner错误码出去",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120031",description:"开启终端绑定，硬件特征码验证失败",solution:"请在萤石客户端关闭终端绑定，参考此步骤",updateTime:152203484e4},{moduleCode:"",detailCode:"361005",description:"解析消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400300",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120032",description:"该用户下通道不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361006",description:"请求重定向--需要向其他服务申请对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400901",description:"设备不在线，可以提示用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120033",description:"无法收藏自己分享的视频",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361007",description:"请求url非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400902",description:"accesstoken异常或失效，需要重新获取accesstoken，并传入到sdk",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120034",description:"该用户下无设备",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361008",description:"token失效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400903",description:"当前账号开启了终端绑定，只允许指定设备登录操作，提示用户登录i.ys7.com解除终端绑定",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120090",description:"用户反馈失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361009",description:"设备验证码或者通信秘钥不匹配",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400904",description:"设备正在对讲中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120095",description:"APP包下载失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361010",description:"设备已经在对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"400905",description:"设备开启了隐私保护，不允许预览、对讲等",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120096",description:"APP包信息删除失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361011",description:"设备10s响应超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120101",description:"视频不支持分享给本人",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361012",description:"设备不在线",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320002",description:"参数无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120102",description:"无相应邀请信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361013",description:"设备开启隐私保护拒绝对讲",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320003",description:"暂不支持此操作",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120103",description:"好友已存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361014",description:"token无权限",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320004",description:"内存溢出",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120104",description:"好友不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361015",description:"设备返回session不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320005",description:"创建CAS session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120105",description:"好友状态错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361016",description:"验证token其他异常错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320006",description:"创建cloud session失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120106",description:"对应群组不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361017",description:"服务端监听设备建立端口超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320007",description:"token失效",solution:"重新设置token后再重试",updateTime:152203484e4},{moduleCode:"",detailCode:"120107",description:"不能添加自己为好友",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361018",description:"设备链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320008",description:"token池里面没有token,请传入token",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120108",description:"当前用户和所添加用户不是好友关系",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361019",description:"对讲服务端不支持的信令消息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320009",description:"传入新的INIT_PARAM并reset(保留，目前未用)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120109",description:"对应分享不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361020",description:"对讲服务端解析对讲请求未携带会话描述能力集",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320010",description:"请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120110",description:"好友群组不属于当前用户",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361021",description:"对讲服务端优先能力集结果为空",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320011",description:"500毫秒后请重试",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120111",description:"好友不是等待验证状态",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361022",description:"cas链路异常",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320012",description:"token池已满",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120112",description:"添加应用下的用户为好友失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361023",description:"对讲服务端分配对讲会话资源失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320013",description:"P2P client超过限制",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120201",description:"操作报警信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"361024",description:"对讲服务端解析信令消息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320014",description:"sdk未初始化",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120202",description:"操作留言信息失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390001",description:"通用错误返回",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320015",description:"超时",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120301",description:"根据UUID查询报警消息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390002",description:"入参为空指针",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320016",description:"正在打洞中",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120302",description:"根据UUID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390003",description:"入参值无效",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320017",description:"没有视频文件头(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120303",description:"根据FID查询图片不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390004",description:"信令消息解析非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320018",description:"解码错误/超时(播放器层面产生和处理此错误)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120305",description:"设备ip解析错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390005",description:"内存资源不足",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320019",description:"取消(保留，用户不用处理)",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120401",description:"用户云空间信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390006",description:"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320020",description:"播放过程中预连接被用户清除预操作信息",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120402",description:"云空间操作失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390007",description:"设备序列号长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320021",description:"流加密码不对",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120403",description:"用户目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390008",description:"取流url长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"320022",description:"未传入播放窗口",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120404",description:"要操作的目标目录不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390009",description:"解析vtm返回vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"100200",description:"操作成功",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120405",description:"要删除的文件信息不存在",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390010",description:"解析vtm返回级联vtdu地址不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101001",description:"用户名不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120406",description:"已开通云存储",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390011",description:"解析vtm返回会话标识长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101002",description:"用户名已被占用",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120407",description:"开通记录失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390012",description:"vtdu返回流头长度不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101003",description:"密码不合法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120500",description:"获取数据错误",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390013",description:"vtdu会话长度非法",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101004",description:"密码为同一字符",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120501",description:"开锁失败",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390014",description:"回调函数未注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"101006",description:"手机号码已经被注册",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"120502",description:"室内机未收到呼叫",solution:"",updateTime:152203484e4},{moduleCode:"",detailCode:"390015",description:"vtdu成功响应未携带会话标识",solution:"",updateTime:152203484e4}],bu="200",Su="操作成功!",Cl={data:yu,code:bu,msg:Su},Cu=function(){function Z(m,t){En(this,Z),this.coreX=m,this.coreY=t,console.log("ErrorCode",Cl)}return Rn(Z,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchErrorInfo",value:function(t){return Cl.data.find(function(n){return n.detailCode.substr(-4)==t})}}]),Z}(),Tu={color:"red",backgroundColor:"red",activeColor:"red",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-0",iconId:"deviceID",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"},{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-header-1",iconId:"deviceName",part:"left",defaultActive:1,isrender:1,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]},Pu={color:"blue",backgroundColor:"blue",activeColor:"blue",btnList:[{btnKey:"ade5d065a113432e8091a1c5bc819c57-934f270c08b14e928bf0c2ae8e1a937d-footer-0",iconId:"play",part:"left",defaultActive:0,isrender:0,themeId:"934f270c08b14e928bf0c2ae8e1a937d"}]},Tl={header:Tu,footer:Pu},wu=function Z(m){this.jsPlugin=m;var t={isMouseDown:!1,isOver:!1,mousePosition:null,oldTime:null,nowTime:m.nowTime||null,moved:null,hoverTime:"2018-12-07 12:00:00",hoverLeft:0,timeTipShow:!1,randomNum:123,timeWidthTbls:[60,1800,3600,86400],timeUnits:["范围: 1分钟; 单位: 秒","范围: 30分钟; 单位: 分钟","范围: 1小时; 单位: 分钟","范围: 1天; 单位: 小时","范围: 3天; 单位: 小时"],drawPen:null,timeSection:[],canvasWidth:null,canvasHeight:null,timeTips:null},n=this;Object.keys(t).forEach(function(o){n[o]=t[o]}),this.options={width:this.canvasWidth,height:48,time:new Date().getTime(),timeSection:[],timeWidth:0},Z.prototype.subTime=function(o){return o<10?"0"+o:o},Z.prototype.tranTime=function(o){var l=o;if(o){var d=new Date(o);l=d.getFullYear()+"/"+(d.getMonth()+1)+"/"+d.getDate()+" "+this.subTime(d.getHours())+":"+this.subTime(d.getMinutes())+":"+this.subTime(d.getSeconds())}return l},Z.prototype.init=function(o){var l=this,d=this.options;return new Promise(function(c,E){o.width&&document.getElementById(o.id).setAttribute("width",parseInt(o.width,10)+"px"),l.randomNum=(Math.random()+"").split(".").join(""),l.timeWidthTblIndex=d.timeWidth;var C=document.querySelector("#".concat(l.jsPlugin.id,"-canvas"));l.drawPen=C.getContext("2d"),l.nowTime=o.nowTime,l.timeSection=d.timeSection||[],l.canvasWidth=C.offsetWidth,l.canvasHeight=C.offsetHeight,l.updata(),document.getElementById("".concat(l.jsPlugin.id,"-canvas")).addEventListener("mousemove",function(y){l.options.readOnly||l.mousemove(y)}),document.getElementById("".concat(l.jsPlugin.id,"-canvas")).addEventListener("mouseover",function(y){l.options.readOnly||l.mouseover(y)}),document.getElementById("".concat(l.jsPlugin.id,"-canvas")).addEventListener("mouseleave",function(y){l.options.readOnly||l.mouseleave(y)}),document.getElementById("".concat(l.jsPlugin.id,"-canvas")).addEventListener("mousedown",function(y){l.options.readOnly||l.mousedown(y)}),document.getElementById("".concat(l.jsPlugin.id,"-canvas")).addEventListener("mouseup",function(y){if(!l.options.readOnly){var w=o.onChange;l.mouseUpFn(y,w)}}),c()})},Z.prototype.setWidth=function(o){var l=this,d=this;o.width&&(document.getElementById(this.jsPlugin.id).style.width=o.width,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.width=o.width,document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.width=o.width,d.canvasWidth=o.width,setTimeout(function(){l.updata({time:d.nowTime||new Date})},500))},Z.prototype.mousemove=function(o){if(this.isMouseDown&&this.isOver){var l=this.mousePosition-o.pageX;if(l===0)return;var d=0;switch(this.timeWidth){case 60:d=1/10;break;case 1800:d=1/20*60;break;case 3600:d=1/20*30*60;break;case 86400:d=1/30*60*60;break}var c=new Date(this.oldTime).getTime()+l*d*1e3;this.updata({time:c}),this.moved=!0}else{var E=parseInt(document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).offsetLeft,10);this.mousePosition=o.pageX-E,this.updata()}},Z.prototype.mousedown=function(o){this.isMouseDown=!0,this.mousePosition=o.pageX,this.oldTime=this.nowTime},Z.prototype.mouseover=function(o){this.isOver=!0},Z.prototype.mouseleave=function(o){this.isOver=!1,this.isMouseDown=!1,this.updata()},Z.prototype.changeSize=function(o){console.log("changeSize",o),this.options.timeWidth=o,this.updata({timeWidth:o})},Z.prototype.mouseUpFn=function(o,l){if(this.isMouseDown&&(this.isMouseDown=!1,this.moved)){this.moved=!1;var d=new Date(this.nowTime).getFullYear()+"/"+(new Date(this.nowTime).getMonth()+1)+"/"+new Date(this.nowTime).getDate()+" "+this.subTime(new Date(this.nowTime).getHours())+":"+this.subTime(new Date(this.nowTime).getMinutes())+":"+this.subTime(new Date(this.nowTime).getSeconds());this.nowTime=new Date(d),this.updata({time:this.nowTime}),this.oldTime=this.nowTime,console.log("nowTime",new Date(this.nowTime),d),l(this.nowTime)}},Z.prototype.readOnly=function(o){console.log("更改为只读"),this.options.readOnly=!0,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="not-allowed"},Z.prototype.unReadOnly=function(o){console.log("更改为只读"),this.options.readOnly=!1,document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.cursor="pointer"},Z.prototype.run=function(o){this.isMouseDown||this.updata(o)},Z.prototype.getTime=function(o){console.log("this",this),console.log("当前时间",new Date(this.nowTime))},Z.prototype.updata=function(o){var l=this;o=o||{},l.nowTime=o.time||l.nowTime,l.timeSection=o.timeSection||l.timeSection,l.timeWidthTblIndex=o.timeWidth||l.timeWidthTblIndex,l.timeWidth=l.timeWidthTbls[o.timeWidth||l.timeWidthTblIndex],l.timeUnit=l.timeUnits[o.timeWidth||l.timeWidthTblIndex],o.timeWidth===0&&(l.timeWidthTblIndex=0,l.timeWidth=l.timeWidthTbls[0],l.timeUnit=l.timeUnits[0]),l.drawPen.fillStyle="#000000",l.drawPen.fillRect(0,0,l.canvasWidth,l.canvasHeight),l.drawScale(),l.drawRecord(),l.drawOtherMsg(),document.getElementById("".concat(this.jsPlugin.id,"-canvas-container"))&&(document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.width=l.options.width+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas-container")).style.height=l.options.height+"px"),document.getElementById("".concat(this.jsPlugin.id,"-canvas"))&&(document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.width=l.options.width+"px",document.getElementById("".concat(this.jsPlugin.id,"-canvas")).style.height=l.options.height+"px")},Z.prototype.drawSolidLine=function(o,l,d,c,E,C){this.drawPen.save(),this.drawPen.strokeStyle=C,this.drawPen.lineWidth=E,this.drawPen.beginPath(),this.drawPen.moveTo(o,l),this.drawPen.lineTo(d,c),this.drawPen.stroke(),this.drawPen.restore()},Z.prototype.drawString=function(o,l,d,c,E){this.drawPen.font="12px serif",this.drawPen.fillStyle="#ffffff",this.drawPen.textAlign=c||"left",this.drawPen.fillText(o,l,d+10)},Z.prototype.drawScale=function(){var o=this,l="rgba(255,255,255)",d=new Date(o.nowTime),c=d.getSeconds(),E=d.getMinutes(),C=d.getHours(),y=d.getDate(),w=0;switch(o.timeWidth){case 60:{var g=parseInt(o.canvasWidth/10);d.setSeconds(d.getSeconds()-parseInt(g/2,10)),y=d.getDate(),C=d.getHours(),E=d.getMinutes(),c=d.getSeconds();for(var p=0;p<g;p++){if(w=c+p,d.setSeconds(w),w%10===0){o.drawSolidLine(p*o.canvasWidth/g,8,p*o.canvasWidth/g,o.canvasHeight/5+8,1,l);var te=this.subTime(d.getHours())+":"+this.subTime(d.getMinutes())+":"+this.subTime(d.getSeconds());o.drawString(te,p*o.canvasWidth/g,o.canvasHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else o.drawSolidLine(p*o.canvasWidth/g,8,p*o.canvasWidth/g,o.canvasHeight/5*.5+8,1,l);d.setDate(y),d.setHours(C),d.setMinutes(E)}break}case 1800:{var ae=new Date(o.nowTime),de=ae.getHours()*3600+ae.getMinutes()*60+ae.getSeconds(),ie=parseInt(de/60),we={position:parseInt(o.canvasWidth/2),time:0,hideString:!0},Ve=Math.ceil(o.canvasWidth/40)+ie,ue=[];ue.push(we);for(var x=0;x<Ve;x++)ue.push({position:we.position+x*20-parseInt(de/3),time:we.time+x*60}),ue.unshift({position:we.position-x*20-parseInt(de/3),time:we.time-x*60});for(var O=0;O<ue.length;O++)if(o.drawSolidLine(ue[O].position,8,ue[O].position,o.canvasHeight/5*(ue[O].time%100===0?1:.5)+8,1,l),ue[O].time%100===0&&!ue[O].hideString){var ne=new Date(ue[O].time*1e3),Q=ne.getUTCHours()<10?"0".concat(ne.getUTCHours()):ne.getUTCHours(),ye=ne.getUTCMinutes()<10?"0".concat(ne.getUTCMinutes()):ne.getUTCMinutes();ne.getUTCSeconds()<10?"0".concat(ne.getUTCSeconds()):ne.getUTCSeconds();var se="".concat(Q,":").concat(ye);o.drawString(se,ue[O].position,o.canvasHeight/5*2,"center","rgba(255,255,255,0.3)")}break}case 3600:{var Ze=new Date(o.nowTime),Qe=Ze.getHours()*3600+Ze.getMinutes()*60+Ze.getSeconds(),M=parseInt(Qe/1800),Te={position:parseInt(o.canvasWidth/2),time:0,hideString:!0},ze=Math.ceil(o.canvasWidth/40)+M,oi=[];oi.push(Te);for(var wi=0;wi<ze;wi++)oi.push({position:Te.position+wi*20-parseInt(Qe/90),time:Te.time+wi*1800}),oi.unshift({position:Te.position-wi*20-parseInt(Qe/90),time:Te.time-wi*1800});for(var ui=0;ui<oi.length;ui++)if(o.drawSolidLine(oi[ui].position,8,oi[ui].position,o.canvasHeight/5*(oi[ui].time%9e3===0?1:.5)+8,1,l),oi[ui].time%9e3===0&&!oi[ui].hideString){var di=new Date(oi[ui].time*1e3),zi=di.getUTCHours()<10?"0".concat(di.getUTCHours()):di.getUTCHours(),$e=di.getUTCMinutes()<10?"0".concat(di.getUTCMinutes()):di.getUTCMinutes();di.getUTCSeconds()<10?"0".concat(di.getUTCSeconds()):di.getUTCSeconds();var st="".concat(zi,":").concat($e);o.drawString(st,oi[ui].position,o.canvasHeight/5*2,"center","rgba(255,255,255,0.3)")}break}case 86400:{var Ke=new Date(o.nowTime),Ne=Ke.getHours()*3600+Ke.getMinutes()*60+Ke.getSeconds(),at=parseInt(Ne/3600),Ut={position:parseFloat(o.canvasWidth/2),time:0,hideString:!0},Wt=Math.ceil(o.canvasWidth/60)+at,kt=[];kt.push(Ut);for(var ee=0;ee<Wt;ee++)kt.push({position:Ut.position+ee*30-Ne/120,time:Ut.time+ee*3600}),kt.unshift({position:Ut.position-ee*30-Ne/120,time:Ut.time-ee*3600});for(var me=0;me<kt.length;me++)if(o.drawSolidLine(kt[me].position,8,kt[me].position,o.canvasHeight/5*(kt[me].time%7200===0?1:.5)+8,1,l),kt[me].time%7200===0&&!kt[me].hideString){var P=new Date(kt[me].time*1e3),Y=P.getUTCHours()<10?"0".concat(P.getUTCHours()):P.getUTCHours(),Oe=P.getUTCMinutes()<10?"0".concat(P.getUTCMinutes()):P.getUTCMinutes();P.getUTCSeconds()<10?"0".concat(P.getUTCSeconds()):P.getUTCSeconds();var N="".concat(Y,":").concat(Oe);o.drawString(N,kt[me].position,o.canvasHeight/5*2,"center","rgba(255,255,255,0.3)")}break}}},Z.prototype.getRecord=function(o,l,d){this.timeSection=o,this.drawRecord()},Z.prototype.drawRecord=function(){for(var o=this.timeSection||[],l=this,d=l.drawPen,c=0;c<o.length;c++){var E=y(o[c].startTime),C=y(o[c].endTime);d.fillStyle="#1890ff80",d.fillRect(E,0,C-E,48)}function y(w){var g=10;switch(l.timeWidth){case 60:g=10;break;case 1800:g=20/60;break;case 3600:g=20/30/60;break;case 86400:g=30/60/60;break}var p=l.canvasWidth/2,te=p+(w-l.nowTime)/1e3*g;return te>l.canvasWidth&&(te=l.canvasWidth),te<=0&&(te=0),te}},Z.prototype.drawOtherMsg=function(){this.drawSolidLine(this.canvasWidth/2,0,this.canvasWidth/2,this.canvasHeight,2,"#1890FF"),this.drawPen.shadowBlur=0,this.isOver&&!this.isMouseDown?(this.mouseTime=this.mousePosition/this.canvasWidth*this.timeWidth*1e3+this.nowTime-this.timeWidth/2*1e3,this.mouseString=this.tranTime(this.mouseTime),this.hoverTime=this.mouseString,this.hoverLeft=this.mousePosition-60,this.timeTipShow=!0):this.timeTipShow=!1}},Eu=function(){function Z(m){if(En(this,Z),this.jSPlugin=m,!document.getElementById("".concat(this.jSPlugin.id,"-audioControls")))return!1;this.currentTimeWidth=0,this.date=new Date,this.datepickerVisible=!1,this.seekTimer=null,this.disabled=!1,this.isSeeking=!1,this.seekFrequency=2e3,this.recList=[],this.lastDate=null,this.nowTime=null,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency),this.recInit()}return Rn(Z,[{key:"recInit",value:function(){var t=this;if(!document.getElementById("".concat(this.jSPlugin.id,"-audioControls")))return!1;this.currentTimeWidth=0;var n=parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).width,10)-100,o=document.createElement("div");o.style="display:inline-block;height:48px;",o.id=this.jSPlugin.id+"-canvas-container";var l=document.createElement("canvas");l.id=this.jSPlugin.id+"-canvas",l.className="time-line-body",l.height="48",l.width=n,l.style="display:inline-block;",l.innerHTML="该浏览器不支持canvas",o.appendChild(l),Oa(o,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")));var d=document.createElement("div");d.className="timeline-controls",d.style="display:flex;width:100px;height:48px;text-align:center;line-height: 48px;vertical-align: top;background: #000000;";var c=`
<div class="timeline-controls-scale" style="display: inline-flex;flex-direction: column;justify-content: center;vertical-align: top;padding: 0 20px;">
  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="`.concat(this.jSPlugin.id,`-timeline-scale-add">
    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
      viewBox="0 0 20 20">
      <title>add</title>
      <g>
        <polygon points="0.1,0.5 15,0.5 15,15.4 0.1,15.4 	" />
      </g>
      <g>
        <path
          fill="#FFFFFF";
          d="M7.6,12.4c-0.3,0-0.5-0.2-0.5-0.5v-8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v8C8.1,12.2,7.9,12.4,7.6,12.4z" />
      </g>
      <g>
        <path
          fill="#FFFFFF";
          d="M11.6,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S11.8,8.4,11.6,8.4z" />
      </g>
    </svg>
  </span>
  <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" id="`).concat(this.jSPlugin.id,`-timeline-scale-sub">
    <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
      viewBox="0 0 20 20">
      <title>reduce</title>
      <g>
        <polygon class="st0" points="1,0.8 15.2,0.8 15.2,15 1,15 	" />
      </g>
      <g>
        <path class="st1"
          fill="#FFFFFF";
          d="M12.1,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S12.4,8.4,12.1,8.4z" />
      </g>
    </svg>
  </span>
</div>
<label for="`).concat(this.jSPlugin.id,`-datepicker">
  <div class="timeline-controls-date">
    <span>
      <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
        viewBox="0 0 20 20">
        <title>ifttt</title>
        <g id="Rectangle">
          <rect x="0.6" y="0.9" class="st0" width="20" height="20" />
        </g>
        <g id="Stroke-1">
          <path fill="#FFFFFF"; class="st1"
            d="M14,7.2c-0.3,0-0.5-0.2-0.5-0.5V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C14.5,7,14.2,7.2,14,7.2z" />
        </g>
        <g id="Stroke-3">
          <path fill="#FFFFFF"; class="st1"
            d="M7.3,7.2C7,7.2,6.8,7,6.8,6.7V3.4c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v3.3C7.8,7,7.6,7.2,7.3,7.2z" />
        </g>
        <g id="Stroke-5">
          <path fill="#FFFFFF"; class="st1"
            d="M18.1,9.7h-15c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h15c0.3,0,0.5,0.2,0.5,0.5S18.4,9.7,18.1,9.7z" />
        </g>
        <g id="Stroke-7">
          <path fill="#FFFFFF"; class="st1" d="M16.5,19.7H4.8c-1.2,0-2.2-1-2.2-2.2V6.7c0-1.2,1-2.2,2.2-2.2h11.7c1.2,0,2.2,1,2.2,2.2v10.8
C18.6,18.8,17.7,19.7,16.5,19.7z M4.8,5.6c-0.6,0-1.2,0.5-1.2,1.2v10.8c0,0.6,0.5,1.2,1.2,1.2h11.7c0.6,0,1.2-0.5,1.2-1.2V6.7
c0-0.6-0.5-1.2-1.2-1.2H4.8z" />
        </g>
        <g id="Stroke-9">
          <path fill="#FFFFFF"; class="st1" d="M10.6,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5s0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7
S11,13.3,10.6,13.3z" />
        </g>
        <g id="Stroke-11">
          <path fill="#FFFFFF"; class="st1" d="M14.8,13.3c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2c0.4,0,0.7,0.3,0.7,0.7
S15.2,13.3,14.8,13.3z M14.8,12.3c-0.2,0-0.3,0.1-0.3,0.3c0,0.2,0.3,0.4,0.5,0.2c0.1-0.1,0.1-0.1,0.1-0.2
C15.1,12.4,15,12.3,14.8,12.3z" />
        </g>
        <g id="Stroke-13">
          <path fill="#FFFFFF"; class="st1" d="M6.5,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7
C7.2,16.3,6.9,16.6,6.5,16.6z" />
        </g>
        <g id="Stroke-15">
          <path fill="#FFFFFF"; class="st1" d="M10.6,16.6c-0.4,0-0.7-0.3-0.7-0.7c0-0.2,0.1-0.4,0.2-0.5c0.1-0.1,0.3-0.2,0.5-0.2h0h0c0.4,0,0.7,0.3,0.7,0.7
C11.4,16.3,11,16.6,10.6,16.6z" />
        </g>
      </svg>
    </span>
  </div>
</label>
<input autocomplete="off" data-toggle="`).concat(this.jSPlugin.id,'-datepicker" id="').concat(this.jSPlugin.id,'-datepicker" name="').concat(this.jSPlugin.id,`-datepicker" style="opacity:0;width:24px;margin-left:-24px;cursor:pointer;" />
`);d.innerHTML=c,Oa(d,o),this.timeLine=new wu(this.jSPlugin);var E=this;this.timeLine.init({id:this.jSPlugin.id+"-canvas",width:n,nowTime:this.nowTime,onChange:function(ae){console.log("time",ae,new Date(ae).Format("yyyyMMddhhmmss"));var de=new Date(ae).Format("yyyyMMddhhmmss");if(console.log("----------------this.jSPlugin.url",t.jSPlugin.url),t.jSPlugin.Theme&&t.jSPlugin.Theme.decoderState.state.recordvideo&&(t.jSPlugin.Theme.setDecoderState({recordvideo:!1}),pn(t.jSPlugin.url).type==="cloud.rec"&&t.jSPlugin.stopSave()),pn(t.jSPlugin.url).type==="cloud.rec")t.isSeeking||E.recList.length>0&&(new Date(ae).valueOf()>=E.lastDate?t.jSPlugin.pluginStatus.loadingSetText({text:"seek回放未找到录像片段",color:"red",delayClear:2e3}):t.unSyncTimeLine().then(function(){t.isSeeking=!0,t.jSPlugin.pluginStatus.loadingStart(t.jSPlugin.id),t.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),t.jSPlugin.pluginStatus.loadingSetText({text:"seek回放中，请稍后..."}),t.jSPlugin.seek(de.substr(8,6),"235959").then(function(){var ue=setInterval(function(){t.jSPlugin.getOSDTime().then(function(x){var O=new Date(ae).valueOf()/1e3;console.log("seek时间同步:",x.data,O,x.data>=O),x.data>=O-2&&(t.isSeeking=!1,t.syncTimeLine(),clearInterval(ue),t.jSPlugin.pluginStatus.loadingStop(t.jSPlugin.id),t.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),t.jSPlugin.pluginStatus.loadingClear())})},1e3)})}));else{var ie=function(){setTimeout(function(){t.disabled=!1},t.seekFrequency)},we=t.jSPlugin.Theme.decoderState.state.play,Ve=function(x){t.disabled=!0,we?t.unSyncTimeLine().then(function(){t.jSPlugin.pause(de).then(function(){console.log("暂停成功"),t.jSPlugin.resume(de).then(function(O){console.log("恢复成功：",O),t.jSPlugin.Theme&&t.jSPlugin.Theme.setDecoderState({play:!0}),t.jSPlugin.Theme&&t.jSPlugin.Theme.decoderState.state.sound&&t.jSPlugin.openSound(),x&&x(),t.syncTimeLine()}).catch(function(O){console.log("恢复失败",O)})}).catch(function(){console.log("暂停失败"),t.jSPlugin.resume(de).then(function(O){console.log("恢复成功"),t.jSPlugin.Theme&&t.jSPlugin.Theme.setDecoderState({play:!0}),x&&x(),t.syncTimeLine()}).catch(function(O){console.log("恢复失败",O)})})}):t.unSyncTimeLine().then(function(){t.jSPlugin.resume().then(function(){t.jSPlugin.pause(de).then(function(){console.log("暂停成功"),t.jSPlugin.resume(de).then(function(O){t.jSPlugin.Theme&&t.jSPlugin.Theme.setDecoderState({play:!0}),t.jSPlugin.Theme&&t.jSPlugin.Theme.decoderState.state.sound&&t.jSPlugin.openSound(),x&&x(),t.syncTimeLine()}).catch(function(O){console.log("恢复失败",O)})}).catch(function(){console.log("暂停失败"),t.jSPlugin.resume(de).then(function(O){t.jSPlugin.Theme&&t.jSPlugin.Theme.setDecoderState({play:!0}),x&&x(),t.syncTimeLine()}).catch(function(O){console.log("恢复失败",O)})})}).catch(function(O){t.jSPlugin.resume(de).then(function(ne){t.jSPlugin.Theme&&t.jSPlugin.Theme.setDecoderState({play:!0}),t.jSPlugin.Theme&&t.jSPlugin.Theme.decoderState.state.sound&&t.jSPlugin.openSound(),x&&x(),t.syncTimeLine()}).catch(function(ne){console.log("恢复失败",ne)})})}),t.jSPlugin.Theme&&t.jSPlugin.Theme.decoderState&&t.jSPlugin.Theme.decoderState.state&&t.jSPlugin.Theme.decoderState.state.zoom&&(t.jSPlugin.Theme.setDecoderState({zoom:!1}),t.jSPlugin.Zoom.stopZoom())};t.disabled?(console.log("操作频繁，等待2秒后执行"),t.seekTimer&&clearTimeout(t.seekTimer),t.seekTimer=setTimeout(function(){Ve(ie)},t.seekFrequency)):Ve(ie)}}}).then(function(){t.syncTimeLine()});var C=this;function y(te){var ae=document.getElementById("".concat(te.id,"-wrap"));po("".concat(te.staticPath,"/rec/datepicker.min.css")),_s("".concat(te.staticPath,"/rec/jquery.min.js"),function(de){_s("".concat(de.staticPath,"/rec/datepicker.js"),function(ie){_s("".concat(ie.staticPath,"/rec/datepicker.zh-CN.js"),function(we){var Ve=ae.getElementsByClassName("datepicker-container")[0];!Ve&&$("#".concat(we.id,"-datepicker")).datepicker&&$("#".concat(we.id,"-datepicker")).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:"zh-CN",date:new Date(ar("begin",we.params.url).replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"))||new Date,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:ae}),Ve=ae.getElementsByClassName("datepicker-container")[0],Ve&&(Ve.style.display="none"),C.datepickerVisible=!1,$("#".concat(we.id,"-datepicker")).on("pick.datepicker",function(ue){console.log("重新选择日期",ue.date,new Date(ue.date).Format("yyyyMMdd"),new Date(document.getElementById("".concat(we.id,"-datepicker")).value).Format("yyyyMMdd")),ue.date>new Date||new Date(ue.date).Format("yyyyMMdd")===new Date(document.getElementById("".concat(we.id,"-datepicker")).value).Format("yyyyMMdd")?ue.preventDefault():(document.getElementById("".concat(we.id,"-datepicker")).value=new Date(ue.date).Format("yyyy-MM-dd"),C.renderRec(ue.date),we.Theme.decoderState&&we.Theme.decoderState.state?we.Theme.decoderState.state.cloudRec?we.changePlayUrl({begin:new Date(ue.date).Format("yyyyMMdd"),type:"cloud.rec"},function(){},!1):we.Theme.decoderState.state.rec?we.changePlayUrl({begin:new Date(ue.date).Format("yyyyMMdd"),type:"rec"},function(){},!1):we.changePlayUrl({begin:new Date(ue.date).Format("yyyyMMdd")},function(){},!1):we.changePlayUrl({begin:new Date(ue.date).Format("yyyyMMdd")},function(){},!1)),Ve&&(Ve.style.display="none"),C.datepickerVisible=!1,we.Theme&&we.Theme.decoderState&&we.Theme.decoderState.state&&we.Theme.decoderState.state.zoom&&(we.Theme.setDecoderState({zoom:!1}),we.Zoom.stopZoom())}),$("#".concat(we.id,"-datepicker")).off("click").on("click",function(ue){console.log("点击日期"),C.datepickerVisible?Ve&&(Ve.style.display="none"):Ve&&(Ve.style.display="inline"),C.datepickerVisible=!C.datepickerVisible})},function(){},ie)},function(){},de)},function(){},te)}y(C.jSPlugin),document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-add")).onclick=function(){t.unSyncTimeLine().then(function(){var te=t.currentTimeWidth;te<3&&t.timeLine.changeSize(++t.currentTimeWidth),t.syncTimeLine()})},document.getElementById("".concat(this.jSPlugin.id,"-timeline-scale-sub")).onclick=function(){t.unSyncTimeLine().then(function(){var te=t.currentTimeWidth;te>0&&t.timeLine.changeSize(--t.currentTimeWidth),t.syncTimeLine()})};var w=ar("begin",this.jSPlugin.url)||new Date().Format("yyyyMMdd");this.renderRec("".concat(w.slice(0,4),"-").concat(w.slice(4,6),"-").concat(w.slice(6,8))),this.observer=new MutationObserver(function(te,ae){});var g={attributes:!0,attributeOldValue:!0,attributeFilter:["style"]},p=document.getElementById("".concat(this.jSPlugin.id));this.observer.observe(p,g)}},{key:"setDatepickerDate",value:function(t){var n=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),o=n.getElementsByClassName("datepicker-container")[0];if(o){var l=o,d=l.parentNode;d.removeChild(l),document.getElementById("".concat(this.jSPlugin.id,"-datepicker")).value=t.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3"),$("#".concat(this.jSPlugin.id,"-datepicker")).datepicker({autoShow:!1,autoHide:!0,autoPick:!0,language:"zh-CN",defaultDate:t,format:"yyyy-mm-dd",endDate:new Date,inline:!0,container:document.getElementById("".concat(this.jSPlugin.id,"-wrap"))})}}},{key:"datepickerHide",value:function(){var t=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),n=t.getElementsByClassName("datepicker-container")[0];t&&(n.style.display="none"),this.datepickerVisible=!1}},{key:"datepickerShow",value:function(){var t=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),n=t.getElementsByClassName("datepicker-container")[0];t&&(n.style.display="inline"),this.datepickerVisible=!0}},{key:"recAutoSize",value:function(t){var n=this;document.getElementById("".concat(this.jSPlugin.id,"-canvas"))&&this.unSyncTimeLine().then(function(){var o=parseInt(getComputedStyle(document.getElementById(n.jSPlugin.id)).width,10)-100;o!==parseInt(document.getElementById("".concat(n.jSPlugin.id,"-canvas")).width)&&(document.getElementById("".concat(n.jSPlugin.id,"-canvas")).width=o,n.timeLine.init({id:"".concat(n.jSPlugin.id,"-canvas"),width:o,nowTime:n.nowTime,onChange:function(d){console.log("time",d,new Date(d).Format("yyyyMMddhhmmss"));var c=new Date(d).Format("yyyyMMddhhmmss");n.jSPlugin.changePlayUrl({begin:c},function(){},!1)}}).then(function(){var l=new Date(new Date(n.date).Format("yyyy-MM-dd 00:00:00").replace(/-/g,"/")).getTime(),d=new Date(new Date(n.date).Format("yyyy-MM-dd 23:59:59").replace(/-/g,"/")).getTime();n.timeLine.setWidth({id:"".concat(n.jSPlugin.id,"-canvas"),width:o}),n.timeLine.getRecord(n.recList,l,d),setTimeout(function(){n.syncTimeLine()},100),t&&t()}))})}},{key:"syncTimeLine",value:function(){var t=this;this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer);var n=this;this.jSPlugin.recTimer=setInterval(function(){var o=n.jSPlugin.getOSDTime();o.then(function(l){var d=l.data;if(d===-1)console.log("获取播放时间错误");else if(d>0){var c=new Date(d>1e12?d:d*1e3);t.nowTime=c,n.timeLine.run({time:c})}}).catch(function(l){var d=n.jSPlugin.Theme.decoderState.state.pauseDate;n.timeLine.run({time:n.timeLine.nowTime||d})})},1e3)}},{key:"unSyncTimeLine",value:function(){var t=this;return new Promise(function(n,o){t.jSPlugin.recTimer&&(clearInterval(t.jSPlugin.recTimer),t.jSPlugin.recTimer=null),n()})}},{key:"renderRec",value:function(t){var n=this;this.date=t;var o=this,l=new Date(new Date(t).Format("yyyy-MM-dd 00:00:00").replace(/-/g,"/")).getTime(),d=new Date(new Date(t).Format("yyyy-MM-dd 23:59:59").replace(/-/g,"/")).getTime();this.timeLine.getRecord([],l,d),console.log("-----------233---------this.jSPlugin.url",this.jSPlugin.url);var c={accessToken:this.jSPlugin.accessToken,recType:pn(this.jSPlugin.url).type==="cloud.rec"?1:2,deviceSerial:pn(this.jSPlugin.url).deviceSerial,channelNo:pn(this.jSPlugin.url).channelNo,startTime:l,endTime:d,version:"2.0"},E=function(w){if(w.data&&w.data.files&&w.data.files.length>0){var g=w.data.files,p=new Date().getTime(),te=w.data.isAll;if(o.recList=g,o.lastDate=g[g.length-1].endTime,te)n.timeLine.getRecord(g,l,d);else{var ae=function de(){function ie(we){we.data&&we.data.files&&we.data.files.length>0?we.data.isAll==!1?(we.data.files&&(g=g.concat(we.data.files),o.recList=g,o.lastDate=g[g.length-1].endTime),p=we.data.nextFileTime>0?we.data.nextFileTime:new Date().getTime(),de()):(console.log("云存储执行渲染片段"),o.timeLine.getRecord(g,l,d)):o.timeLine.getRecord(g,l,d)}c.startTime=p,Ca(this.jSPlugin.env.domain+"/api/lapp/video/by/time","POST",c,"",ie)};ae()}n.timeLine.run({time:new Date(l)})}else w.data&&w.data.length>0&&(console.log("获取本地录像片段成功",w),o.recList=w.data,o.lastDate=w.data[w.data.length-1].endTime,o.timeLine.getRecord(w.data,l,d),o.timeLine.run({time:new Date(l)}))},C=this.jSPlugin.env.domain+"/api/lapp/video/by/time";Ca(C,"POST",c,"",E)}}]),Z}(),Ia=function(m){console.log("执行TimeLine - params",m),this.state={id:m.id,start:"00:00:00",end:"24:00:00",current:0,timelag:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:!1};var t=this;this.setState=function(n){Object.keys(n).forEach(function(o){t.state[o]=n[o],o==="scrollTop"&&document.getElementById("time-line-item").parentNode.scrollTo(0,n[o]),o==="current"&&(document.getElementById("time-line-current").innerHTML=n[o])})},this.setDisabled=function(n){this.setState({disabled:n}),document.getElementById("time-line-item").parentNode.style.overflowY=n?"hidden":"scroll"},this.timeToSecond=function(n){var o=n.split(":"),l=Number(o[0]),d=Number(o[1]),c=Number(o[2]);return l*60*60+d*60+(c||0)},this.minuteToTime=function(n){var o=Math.floor(n/60),l=n%60;return(o>9?o:"0"+o)+":"+(l>9?l:"0"+l)},this.timeToMinute=function(n){var o=n.split(":"),l=Number(o[0]),d=Number(o[1]);return l*60+d},this.getPlayParam=m.getPlayParam,this.checkIsAppleDevice=function(){var n=navigator.userAgent,o=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),l=n.indexOf("iPad")>-1,d=n.indexOf("iPhone")>-1||n.indexOf("Mac")>-1;return!!(o||l||d)},this.checkIsHarmonyOS=function(){var n=navigator.userAgent;return n.indexOf("ohos")>-1},this.checkIsHarmonyOS()?(document.getElementById("time-line-item").parentNode.addEventListener("touchstart",function(){if(t.state.disabled)return!1;m.ontouchstart()},!1),document.getElementById("time-line-item").parentNode.addEventListener("touchmove",function(){if(t.state.disabled)return!1;m.ontouchmove()},!1),document.getElementById("time-line-item").parentNode.addEventListener("touchend",function(){if(t.state.disabled)return!1;var n,o=new Promise(function(l,d){var c=-1;n=setInterval(function(){var E=document.getElementById("time-line-item").parentNode.scrollTop;E!==c?(console.log("scolling",E,c),c=E):(console.log("scoll stop",E,c),clearInterval(n),l(E))},100)});o.then(function(l){console.log("scollPromise: then",l,t),t.rectTopTotime(l),console.log("页面滚动实际高度",l,t.state),t.getPlayParam({current:t.state.current})}),m.ontouchend()},!1)):(document.getElementById("time-line-item").parentNode.ontouchstart=function(){if(t.state.disabled)return!1;m.ontouchstart()},document.getElementById("time-line-item").parentNode.ontouchmove=function(){if(t.state.disabled)return!1;m.ontouchmove()},document.getElementById("time-line-item").parentNode.ontouchend=function(){if(t.state.disabled)return!1;var n,o=new Promise(function(l,d){var c=-1;n=setInterval(function(){var E=document.getElementById("time-line-item").parentNode.scrollTop;E!==c?(console.log("scolling",E,c),c=E):(console.log("scoll stop",E,c),clearInterval(n),l(E))},100)});o.then(function(l){console.log("scollPromise: then",l,t),t.rectTopTotime(l),console.log("页面滚动实际高度",l,t.state),t.getPlayParam({current:t.state.current})}),m.ontouchend()}),this.matchTimeDot()};Ia.prototype.changeScale=function(Z){this.setState({timelag:Z}),this.matchTimeDot()},Ia.prototype.setDateLine=function(Z,m){Z.length>0?(typeof m>"u"&&(m=Z.length-1),this.setState({availTimeLine:Z,start:Z[m].st,end:Z[m].et,current:Z[m].st}),console.log("this.state",this.state),this.matchRecTimeDot(),this.primaryOffsetH()):(this.setState({availTimeLine:[]}),console.log("this.state",this.state),this.matchRecTimeDot())},Ia.prototype.matchTimeDot=function(){var Z=this.state,m=Z.start,t=Z.end,n=Z.timelag;Z.availTimeLine,console.log("start",m,"end",t);var o=[],l=this.timeToMinute(t);l=Math.floor(l/n)*n;for(var d=l;d>=0;){var c=0,E=0,C=[];d==l&&(c=70),d==0&&(E=230);var y=this.minuteToTime(d);o.push({id:d,current:y,label:"a"+d,marginTop:c,marginBottom:E,recArr:C}),d=d-n}this.setState({timeArr:o}),this.renderDateLine()},Ia.prototype.matchRecTimeDot=function(){var Z=this.state,m=Z.start,t=Z.end,n=Z.timelag,o=Z.availTimeLine,l=Z.timeArr;console.log("start",m,"end",t);var d=[],c=o.length;if(c===0)for(var E=0;E<l.length;E++)l[E].recArr=[];else{for(var C=0;C<l.length;C++)l[C].recArr=[];for(var y=0;y<c;y++){var w=o[y],g=this.timeToSecond(w.st),p=this.timeToSecond(w.et),te=void 0,ae=void 0,de=0,ie=0;te=Math.floor(g/(n*60))*n,de=(g-te*60)/n,ae=Math.floor(p/(n*60))*n,ie=(p-ae*60)/n,d[y]={st:te,et:ae,stAvailPercent:de,etAvailPercent:ie};for(var E=0;E<l.length;E++)if(l[E].id==te&&l[E].id==ae){var we=ie-de,Ve=60-ie;l[E].recArr.push({height:we,top:Ve})}else l[E].id==te?l[E].recArr.push({height:60-de,top:0}):l[E].id==ae?l[E].recArr.push({height:ie,top:60-ie}):l[E].id>te&&l[E].id<ae&&l[E].recArr.push({height:60,top:0})}}console.log("availArr: ",d),this.setState({timeArr:l}),console.log("timeArr:",this.state),this.renderDateLine()},Ia.prototype.renderDateLine=function(){var Z=this.state,m=Z.id,t=Z.timeArr;console.log("id,timeArr",m,t);var n=document.getElementById("time-line-item");n.innerHTML="",t.forEach(function(o,l){var d=document.createElement("div");d.setAttribute("class","time-item"),d.style="margin-top: ".concat(o.marginTop,"px; margin-bottom: ").concat(o.marginBottom,"px; border-right-color: ").concat(o.borderColor,";");var c=document.createElement("div");c.setAttribute("class","scale");var E='<div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale"></div><div class="scale" style="width:10px"></div>';o.recArr.forEach(function(C,y){E+='<div class="item-unavail" style="height: '.concat(C.height,"px;background-color:#A8B9ED; top: ").concat(C.top,'px"></div>')}),E+="<div id=".concat(o.label,' style="position: relative; top: 51px; left: 40%"> ').concat(o.current,"</div>"),d.innerHTML=E,n.appendChild(d)})},Ia.prototype.primaryOffsetH=function(){var Z=this.state,m=Z.start,t=Z.timelag,n=Z.timeArr,o=n[0].current,l=this.timeToSecond(o),d=this.timeToSecond(m),c=l-d,E=Math.ceil(c/t)+60;this.setState({scrollTop:E}),console.log("起始偏移量",E)},Ia.prototype.currentOffsetH=function(){var Z=this.state,m=Z.current,t=Z.timelag,n=Z.timeArr,o=n[0].current,l=this.timeToSecond(o),d=this.timeToSecond(m),c=l-d,E=Math.ceil(c/t)+60;this.setState({scrollTop:E})},Ia.prototype.rectTopTotime=function(Z){var m=this.state.timelag,t=Math.floor(Z/60),n=Z-t*60,o,l;if(console.log("index：",t,"offsetH:",n),n==0)o=this.state.timeArr[t-1].current,l=0;else{var d=this.state.timeArr[t].current,c=this.timeToMinute(d),E=60-n,C=E*m,y=Math.floor(C/60)+c,w=Math.floor(C/60)*60;l=Math.ceil(C-w),o=this.minuteToTime(y)}this.setState({current:o+":"+(l>9?l:"0"+l),scrollTop:Z})},Ia.prototype.stepScrollTimeLine=function(Z){this.setState({current:Z}),this.currentOffsetH()},Ia.prototype.secondCountDown=function(Z){var m=this.state.current,t=m.split(":"),n=Number(t[0]),o=Number(t[1]),l=Number(t[2]),d=n*60*60+o*60+l+1,c=Math.floor(d/3600),E=Math.floor((d-c*3600)/60),C=d-c*3600-E*60;this.setState({current:(c>9?c:"0"+c)+":"+(E>9?E:"0"+E)+":"+(C>9?C:"0"+C)})};var Ru=Ia;Date.prototype.Format=function(Z){var m={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(Z)&&(Z=Z.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var t in m)new RegExp("("+t+")").test(Z)&&(Z=Z.replace(RegExp.$1,RegExp.$1.length==1?m[t]:("00"+m[t]).substr((""+m[t]).length)));return Z};function Pl(Z){var m=new Date(Z),t=m.getHours(),n=m.getMinutes(),o=m.getSeconds();return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)+":"+(o>9?o:"0"+o)}var ku=function(){function Z(m,t,n){var o=this;En(this,Z),this.changeRecSpeed=t,this.resetMobileZoomStatus=n,this.isMobile=!0,this.jSPlugin=m,this.date=new Date().Format("yyyy-MM-dd"),this.begin=(new Date().Format("yyyy-MM-dd")+" 00:00:00").replace(/-/g,"/"),this.end=(new Date().Format("yyyy-MM-dd")+" 23:59:59").replace(/-/g,"/"),this.initBegin=null,this.initEnd=null,this.type=pn(this.jSPlugin.url).type,this.operating=!1,this.seekTimer=null,this.disabled=!1,this.seekFrequency=2e3,this.recList=[],this.isSeeking=!1,this.jSPlugin.params&&this.jSPlugin.params.seekFrequency&&(this.seekFrequency=this.jSPlugin.params.seekFrequency);var l=document.createElement("style");if(l.innerHTML=`
    body{
      padding: 0;
      margin: 0;
    }
    .time-line-container {
      text-align: left;
      height: 300px;
      /* outline: 1px solid red; */
      /* background: gray; */
      position: relative;
      /* padding-top: 60px; */
      margin-top: 20px;
    }

    .time-line-container .time-line-item-container {
      display: inline-block;
      /* height: 400px; */
      width: 30%;
      /* background: indianred; */
      overflow-y: scroll;
      overflow-x: hidden;
      /* padding-top: 60px; */
      height: 300px;
      box-sizing: border-box;
      white-space: nowrap;
      position: relative;
    }

    .time-line-container .time-line-item-container::-webkit-scrollbar {
      width: 0px;
      /*滚动条宽度*/
      height: 0px;
      /*滚动条高度*/
    }

    .time-line-item .time-item {
      position: relative;
      box-sizing: border-box;
      height: 60px;
      font-size: 12px;
      color: rgb(150, 150, 150);
      border-right: 6px solid;
      border-right-color: #ddd;
    }

    .time-line-item .time-item .scale {
      width: 6px;
      height: 9px;
      border-bottom: 1px solid #ccc;
      float: right;
      clear: both;
    }

    .time-line-item .time-item .item-unavail {
      width: 6px;
      position: absolute;
      left: 100%;
      background-color: #ddd;
    }

    .time-line-container .current-time {
      position: absolute;
      left: 0;
      top: 40px;
      height: 29px;
      /* line-height: 58px; */
      border-bottom: 1px solid #648FFC;
      width: 60%;
      margin-left: 26%;
    }

    .time-line-container .current-time .current-time-bg {
      position: relative;
      top: 15px;
      width: 100px;
      height: 29px;
      line-height: 29px;
      left: -70px;
      font-size: 12px;
      color: #2C2C2C;
    }

    .time-line-container .current-time .current-time-bg::before {
      content: '';
      display: inline-block;
      width: 6px;
      height: 6px;
      border-radius: 100%;
      background: #648FFC;
      top: 11px;
      position: absolute;
      right: 30px;
    }

    .date-switch-container {
      height: 40px;
      position: relative;
      text-align: center;
      margin: 20px 10px;
    }

    .date-switch-container .current-date {
      line-height: 40px;
      height: 22px;
      font-size: 16px;
      color: #2C2C2C;
      text-align: center;
      font-weight: bold;
    }

    .date-container {
      width: 40px;
      height: 40px;
      position: absolute;
      right: 0;
      top: 0;
    }

    .rec-type-container {
      display: flex;
      justify-content: space-between;
    }

    .rec-type-container .rec-type-text {
      padding: 0 15px;
      font-size: 12px;
      color: #2C2C2C;
    }

    .rec-type-container .rec-type-switch {
      padding: 0 20px;
    }

    .date-container input {
      position: absolute;
      opacity: 0;
      display: inline-block;
      width: 40px;
      height: 40px;
      z-index: 10;
      left: 0;
    }

    .date-container label {
      position: absolute;
      left: 0;
      top: 0;
      /* display: none; */
      z-index: 0;
    }

    .date-icon {
      display: inline-block;
      width: 40px;
      height: 40px;
      background: url('https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png') no-repeat 100% 100%;
    }
    .select-container {
      padding: 10px;
      display: flex;
      justify-content: space-between;
    }

    .advice {
      height: 24px;
      width: 70px;
      display: flex;
      justify-content: space-between;
      line-height: 24px;
      background: #F8F8F8;
      border-radius: 8px;
    }

    .advice span {
      width: 40px;
      display: inline-block;
    }

    input[type="checkbox"]:not(:checked)+.advice span:first-child {
      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);
      border-radius: 8px;
      text-align: center;

    }

    input[type="checkbox"]:checked+.advice span:last-child {
      box-shadow: 0px 2px 5px 0px rgb(23 45 101 / 20%);
      border-radius: 8px;
      text-align: center;
    }

    input[type="checkbox"]:not(:checked)+.advice span:first-child svg {
      fill: #648FFC !important;
    }

    input[type="checkbox"]:checked+.advice span:last-child svg {
      fill: #648FFC !important;
    }`,document.getElementsByTagName("head")[0].appendChild(l),ar("begin",this.jSPlugin.url)){var d=ar("begin",this.jSPlugin.url);this.date=d.slice(0,4)+"/"+d.slice(4,6)+"/"+d.slice(6,8),this.begin=this.date+" ".concat(d.slice(8,10)||"00",":").concat(d.slice(10,12)||"00",":").concat(d.slice(12,14)||"00"),this.end=this.date+" 23:59:59",this.initBegin=this.begin}if(ar("end",this.jSPlugin.url)){var c=ar("end",this.jSPlugin.url);this.end=this.date+" ".concat(c.slice(8,10)||"23",":").concat(c.slice(10,12)||"59",":").concat(c.slice(12,14)||"59"),this.initEnd=this.end}var E=document.createElement("div");E.id="date-switch-container-wrap",E.className="date-switch-container-wrap",E.style="",E.innerHTML=`
      <div class="date-switch-container">
      <div class="current-date" id="current-date">今日录像</div>
      <div class="date-container">
        <label for="date">
          <div class="date-icon"></div>
        </label>
        <input type="date" name="date" id="date" value="`.concat(this.date.replace(/\//g,"-")||new Date().Format("yyyy-MM-dd"),`" />
      </div>
    </div>
        `),Oa(E,document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var C=document.createElement("div");C.id="rec-type-container-wrap",C.className="rec-type-container-wrap",C.style="",C.innerHTML=`
    <div class="rec-type-container">
    <div class="rec-type-text">共<span id="recCount">0</span>个录像</div>
    <div class="rec-type-switch">
      <label>
        <input type="checkbox" name="type" id="cloudType" value="1" hidden />
        <label for="cloudType" class="advice">
          <span>
          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">
            <path class="st0" d="M12.6,5c-2.3,0.1-4.3,1.4-5.3,3.3L7.2,8.6c-2.4,0.5-4.1,2.5-4.1,4.9c0,2.8,2.4,5,5.2,5h9.9
            c2.4,0,4.3-1.9,4.3-4.2l0-0.2c-0.1-2-1.6-3.5-3.5-3.9l-0.1,0l0-0.2c-0.4-2.8-3-5-6.1-5L12.6,5z"/>
          </svg>
        </span>
        <span>
          <svg fill="#CCCCCC" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="2 0 20 20">
            <path id="形状结合" class="st0" d="M14.3,4c0.6,0,1.2,0.2,1.7,0.7l0,0L18.3,7C18.7,7.4,19,8,19,8.6l0,0v9c0,1.3-1.1,2.3-2.4,2.3
	l0,0H8.4C7.1,20,6,19,6,17.7l0,0V6.3C6,5,7.1,4,8.4,4l0,0H14.3z M9.7,7.2C9.3,7.2,8.9,7.6,8.9,8l0,0v2.5l0,0.1
	c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C10.4,7.5,10,7.2,9.7,7.2z M12.2,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0v2.5
	l0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C12.9,7.5,12.5,7.2,12.2,7.2z M14.7,7.2c-0.4,0-0.8,0.3-0.8,0.8l0,0
	v2.5l0,0.1c0,0.4,0.4,0.6,0.7,0.6c0.4,0,0.8-0.3,0.8-0.8l0,0V8l0-0.1C15.4,7.5,15,7.2,14.7,7.2z"/>
          </svg>
        </span>
        </label>
      </label>
    </div>
  </div>
        `,Oa(C,E);var y=document.createElement("div");y.id="mobile-rec-wrap",y.className="mobileRec-wrap",y.style="",y.innerHTML=`
    <div class="time-line-container">
    <div class="current-time">
      <div class="current-time-bg" id="time-line-current">00:00:00</div>
    </div>
    <div class="time-line-item-container">
      <div class="time-line-item" id="time-line-item">
      </div>
    </div>
    </div>
      `,Oa(y,C);var w=function(de){var ie=o;console.log("子组件传值到父组件",de,de.current);var we=de.current,Ve=new Date(o.date).Format("yyyyMMdd").substr(0,8)+(de.current?we.replace(/:/g,""):de.current.replace(/:/g,""));if(o.type==="cloud.rec")o.isSeeking||ie.recList.length>0&&(new Date("".concat(o.date," ").concat(de.current)).valueOf()>=ie.lastDate?(o.jSPlugin.pluginStatus.loadingSetText({text:"seek回放未找到录像片段",color:"red",delayClear:2e3}),o.syncTimeLine()):o.unSyncTimeLine().then(function(){o.isSeeking=!0,o.jSPlugin.pluginStatus.loadingStart(o.jSPlugin.id),o.jSPlugin.pluginStatus.setPlayStatus({loading:!0}),o.jSPlugin.pluginStatus.loadingSetText({text:"seek回放中，请稍后..."}),o.jSPlugin.seek(Ve.substr(8,6),"235959").then(function(){var ne=setInterval(function(){o.jSPlugin.getOSDTime().then(function(Q){console.log("seek时间同步:",new Date(Q.data*1e3).Format("yyyyMMddhhmmss"),Ve,new Date(Q.data*1e3).Format("yyyyMMddhhmmss")>=Ve),new Date(Q.data*1e3).Format("yyyyMMddhhmmss")>=Ve&&(o.isSeeking=!1,o.syncTimeLine(),clearInterval(ne),o.jSPlugin.pluginStatus.loadingStop(o.jSPlugin.id),o.jSPlugin.pluginStatus.setPlayStatus({loading:!1}),o.jSPlugin.pluginStatus.loadingClear())})},1e3)})}));else{var ue=function(){setTimeout(function(){o.disabled=!1},o.seekFrequency)},x=o.jSPlugin.Theme.decoderState.state.play,O=function(Q){o.disabled=!0,x?o.unSyncTimeLine().then(function(){o.jSPlugin.pause(Ve).then(function(){console.log("暂停成功"),o.jSPlugin.resume(Ve).then(function(ye){console.log("恢复成功"),o.syncTimeLine(),Q&&Q()})}).catch(function(){console.log("暂停失败"),o.jSPlugin.resume(Ve).then(function(ye){console.log("恢复成功"),o.syncTimeLine(),Q&&Q()})})}):o.unSyncTimeLine().then(function(){o.jSPlugin.resume(Ve).then(function(ye){console.log("恢复成功"),o.syncTimeLine(),Q&&Q()})})};o.disabled?(console.log("操作频繁，等待2秒后执行"),o.seekTimer&&clearTimeout(o.seekTimer),o.seekTimer=setTimeout(function(){O(ue)},o.seekFrequency)):O(ue)}},g=function(){o.operating=!0,o.unSyncTimeLine()},p=function(){o.operating==!1&&(o.operating=!0,o.unSyncTimeLine())},te=function(){o.operating=!1};this.TimeLineOBJ=new Ru({id:"time-line-item",getPlayParam:w,ontouchstart:g,ontouchmove:p,ontouchend:te}),this.fetchDeviceRec(),document.getElementById("date").addEventListener("change",function(ae){console.log("日期变化",ae.target.value);var de=ae.target.value,ie=parseInt(new Date(de).Format("yyyy/MM/dd").replace(/\//g,"")),we=new Date,Ve=parseInt(we.Format("yyyy/MM/dd").replace(/\//g,""));if(ie>Ve){document.getElementById("date").value=new Date(o.date.replace(/\//g,"-")||we.Format("yyyy-MM-dd")).Format("yyyy-MM-dd");return}o.date=new Date(de).Format("yyyy/MM/dd"),o.begin=o.date+" 00:00:00",o.end=o.date+" 23:59:59",o.jSPlugin.changePlayUrl({type:o.type,begin:"".concat(new Date(o.date).Format("yyyyMMdd"),"000000")}).then(function(ue){setTimeout(function(){var x=document.getElementById("date");x&&(x.value=de)},0)}),o.changeRecSpeed(1),o.resetMobileZoomStatus()}),document.getElementById("cloudType").checked=this.type==="rec",document.getElementById("cloudType").addEventListener("change",function(ae){var de=ae.target.checked?2:1;o.type=ae.target.checked?"rec":"cloud.rec",console.log("recType",de),o.jSPlugin.changePlayUrl({type:o.type,begin:"".concat(new Date(o.date).Format("yyyyMMdd"),"000000")}).then(function(){console.log("切换类型成功"),o.syncTimeLine(),o.changeRecSpeed(1),o.resetMobileZoomStatus()},function(ie){console.log("err",ie)}).catch(function(ie){console.log(ie)})}),this.syncTimeLine()}return Rn(Z,[{key:"fetchDeviceRec",value:function(){var t=this,n=function(c){var E=c.length;document.getElementById("recCount").innerHTML=E;for(var C=[],y=E-1;y>=0;y--){var w=c[y],g=Pl(w.endTime),p=Pl(w.startTime);C.push({st:p,et:g})}t.TimeLineOBJ.setDateLine(C)},o=new FormData,l=this;o.append("deviceSerial",pn(this.jSPlugin.url).deviceSerial),o.append("channelNo",pn(this.jSPlugin.url).channelNo),o.append("accessToken",this.jSPlugin.accessToken),o.append("recType",this.type==="cloud.rec"?1:2),o.append("startTime",new Date(this.begin).getTime()),o.append("endTime",new Date(this.end).getTime()),fetch(this.jSPlugin.env.domain+"/api/lapp/video/by/time",{method:"POST",body:o}).then(function(d){return d.json()}).then(function(d){if(d.code==200&&d.data){var c=[];c=d.data,l.recList=c,l.lastDate=c[c.length-1].endTime,n(c)}else n([])})}},{key:"syncTimeLine",value:function(){var t=this,n=function(d){var c=new Date(d),E=c.getHours(),C=c.getMinutes(),y=c.getSeconds();return(E>9?E:"0"+E)+":"+(C>9?C:"0"+C)+":"+(y>9?y:"0"+y)};this.jSPlugin.recTimer&&clearInterval(this.jSPlugin.recTimer);var o=this;this.jSPlugin.recTimer=setInterval(function(){if(t.operating)return console.log("操作中"),!1;t.jSPlugin.getOSDTime().then(function(l){l.data>0&&o.TimeLineOBJ.stepScrollTimeLine(n(l.data*1e3)),o.lastDate&&(l.data>1e12?l.data:l.data*1e3)>=o.lastDate&&o.jSPlugin.pluginStatus.loadingSetText({text:"回放结束",color:"red"})}).catch(function(l){console.log("err:-----",l),console.log("未找到当前获取播放时间，等待中...")})},1e3)}},{key:"unSyncTimeLine",value:function(){var t=this;return new Promise(function(n,o){t.jSPlugin.recTimer&&clearInterval(t.jSPlugin.recTimer),n()})}}]),Z}(),Iu=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStart"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStart"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStart"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStart"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStart"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStart"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStart"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStart"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStart"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStart"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStart"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStart"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStart"},{code:60002,msg:"设备已旋转到上限位",desc:"",text:"设备云台旋转达到上限位",type:"ptzStart"},{code:60003,msg:"设备已旋转到下限位",desc:"",text:"设备云台旋转达到下限位",type:"ptzStart"},{code:60004,msg:"设备已旋转到左限位",desc:"",text:"设备云台旋转达到左限位",type:"ptzStart"},{code:60005,msg:"设备已旋转到右限位",desc:"",text:"设备云台旋转达到右限位",type:"ptzStart"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStart"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStart"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStart"}],Du=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"ptzStop"},{code:10001,msg:"操作失败",desc:"参数为空或格式不正确",text:"参数错误",type:"ptzStop"},{code:10002,msg:"账号异常，操作失败",desc:"重新获取accessToken",text:"accessToken异常或过期",type:"ptzStop"},{code:10005,msg:"账号异常，操作失败",desc:"appKey被冻结",text:"appKey异常",type:"ptzStop"},{code:20002,msg:"设备不存在，请检查设备连接情况",desc:"",text:"设备不存在",type:"ptzStop"},{code:20006,msg:"操作失败，请检查设备网络情况",desc:"检查设备网络状况，稍后再试",text:"网络异常",type:"ptzStop"},{code:20007,msg:"操作失败，请检查设备在线情况",desc:"检查设备是否在线",text:"设备不在线",type:"ptzStop"},{code:20008,msg:"操作过于频繁，稍后再试",desc:"操作过于频繁，稍后再试",text:"设备响应超时",type:"ptzStop"},{code:20014,msg:"操作失败",desc:"",text:"deviceSerial不合法",type:"ptzStop"},{code:20032,msg:"通道不存在请检查设备连接情况",desc:"该用户下通道不存在",text:"该用户下通道不存在",type:"ptzStop"},{code:49999,msg:"操作失败，请重试",desc:"接口调用异常",text:"数据异常",type:"ptzStop"},{code:6e4,msg:"操作失败，设备不支持该操作",desc:"",text:"设备不支持云台控制",type:"ptzStop"},{code:60001,msg:"操作失败，用户无权限",desc:"",text:"用户无云台控制权限",type:"ptzStop"},{code:60006,msg:"操作失败，请重试",desc:"稍候再试",text:"云台当前操作失败",type:"ptzStop"},{code:60009,msg:"设备正在操作中",desc:"",text:"正在调用预置点",type:"ptzStop"},{code:60020,msg:"操作失败",desc:"确认设备是否支持该操作",text:"不支持该命令",type:"ptzStop"}],Au=[{code:200,msg:"",desc:"请求成功",text:"操作成功",type:"talk"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"talk"},{code:10002,msg:"账号异常，操作失败",desc:"",text:"accessToken异常或过期",type:"talk"},{code:10031,msg:"账号异常，操作失败",desc:"",text:"子账户或萤石用户没有权限",type:"talk"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"talk"},{code:60059,msg:"播放失败",desc:"",text:"ezopen地址均不可用",type:"talk"}],Mu=[{code:200,msg:"",desc:"",text:"操作成功",type:"time"},{code:10001,msg:"播放失败",desc:"参数为空或格式不正确",text:"参数错误",type:"time"},{code:10002,msg:"账号异常，播放失败",desc:"",text:"accessToken异常或过期",type:"time"},{code:10004,msg:"账号异常，播放失败",desc:"",text:"用户不存在",type:"time"},{code:10005,msg:"账号异常，播放失败",desc:"",text:"appKey异常",type:"time"},{code:10011,msg:"播放失败",desc:"设备对应用户未注册至应用下",text:"未开通萤石服务",type:"time"},{code:10013,msg:"账号异常，播放失败",desc:"",text:"非开发者账号无权限调用",type:"time"},{code:10030,msg:"播放失败",desc:"",text:"appkey和appsecret不匹配",type:"time"},{code:20002,msg:"设备不存在请检查设备连接情况",desc:"设备序列号输入有误或者设备未被添加或者通道异常",text:"设备不存在",type:"time"},{code:20014,msg:"播放失败",desc:"",text:"deviceSerial不合法",type:"time"},{code:20032,msg:"设备不存在请检查设备连接情况",desc:"",text:"该用户下通道不存在",type:"time"},{code:60024,msg:"播放失败请重试",desc:"",text:"取消订阅操作失败",type:"time"},{code:49999,msg:"播放失败请重试",desc:"",text:"操作异常",type:"time"}],s0={ptzStart:Iu,ptzStop:Du,talk:Au,time:Mu},wl=function(){function Z(m,t){En(this,Z),this.coreX=m,this.coreY=t,console.log("uikitCode",s0)}return Rn(Z,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"matchInfo",value:function(t,n){if(s0[n]){var o={};return s0[n].map(function(l){l.code==t&&(o=l)}),o}else return{code:500,msg:"未知错误",desc:"未知的错误码，或错误码类型有误",text:"",type:n}}}]),Z}(),Bu=function(){function Z(m){var t=this;if(En(this,Z),this.jSPlugin=m,this.codeHandler=new wl,this.pluginStatus=new ys(this,this.jSPlugin.id),this.showPtz=!1,console.log("云台初始化"),document.getElementById(this.jSPlugin.id+"-ez-ptz-item"))return!1;var n=document.createElement("div");n.id=this.jSPlugin.id+"-ez-ptz-item",n.className="ez-ptz-wrap",n.style="display:none";var o=document.createElement("style");o.innerHTML=`
    .ez-ptz-container {
      position: relative;
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.80);
      box-shadow: 0px 0px 33px 4px rgb(0 0 0 / 15%);
      border: 1px solid rgba(255, 255, 255, 0.80);
      border-radius: 100%;
      cursor: pointer;
      overflow: hidden;
      user-select: none;
    }
    .ez-ptz-container .ez-ptz-icon.top {
      width: 0;
      height: 0;
      border-left: 3px solid transparent;
      border-right: 3px solid transparent;
      border-bottom: 6px solid #333333;
      position: absolute;
      display: inline-block;
      left: calc(50% - 3px);
      top: 2px;
    }

    .ez-ptz-container .ez-ptz-icon.top.active {
      border-bottom-color: #1890FF;
    }

    .ez-ptz-container .ez-ptz-icon.bottom {
      width: 0;
      height: 0;
      border-left: 3px solid transparent;
      border-right: 3px solid transparent;
      border-top: 6px solid #333333;
      position: absolute;
      display: inline-block;
      left: calc(50% - 3px);
      bottom: 2px;
    }

    .ez-ptz-container .ez-ptz-icon.bottom.active {
      border-top-color: #1890FF;
    }

    .ez-ptz-container .ez-ptz-icon.right {
      width: 0;
      height: 0;
      border-top: 3px solid transparent;
      border-bottom: 3px solid transparent;
      border-left: 6px solid #333333;
      position: absolute;
      display: inline-block;
      top: calc(50% - 3px);
      right: 2px;
    }

    .ez-ptz-container .ez-ptz-icon.right.active {
      border-left-color: #1890FF;
    }

    .ez-ptz-container .ez-ptz-icon.left {
      width: 0;
      height: 0;
      border-top: 3px solid transparent;
      border-bottom: 3px solid transparent;
      border-right: 6px solid #333333;
      position: absolute;
      display: inline-block;
      top: calc(50% - 3px);
      left: 2px;
    }

    .ez-ptz-container .ez-ptz-icon.left.active {
      border-right-color: #1890FF;
    }

    .ez-ptz-container .ez-ptz-main.center {
      width: 23px;
      height: 23px;
      background: #1890FF;
      border-radius: 100%;
      top: calc(50% - 12.3px);
      left: calc(50% - 12.3px);
      position: absolute;
    }

    .ez-ptz-wrap {
      position: absolute;
      right: 20px;
      top: calc(50% - 50px);
      width: 100px;
      height: 100px;
      z-index: 999;
    }

    .ez-ptz-close {
      position: absolute;
      color: #FFFFFF;
      top: 0;
      right: 0px;
    }`,document.getElementsByTagName("head")[0].appendChild(o),n.innerHTML=`
      <div class="ez-ptz-container" id="`.concat(this.jSPlugin.id,`-ez-ptz-container" style="position: relative;width: 80px;height: 80px;background: rgba(255, 255, 255, 0.80);box-shadow: 0px 0px 33px 4px rgba(0, 0, 0, 0.15);border: 1px solid rgba(255, 255, 255, 0.80);border-radius: 100%;cursor: pointer;overflow: hidden;user-select: none;">
        <div class="ez-ptz-main center"></div>
        <div class="ez-ptz-icon top active"></div>
        <div class="ez-ptz-icon left active"></div>
        <div class="ez-ptz-icon bottom active"></div>
        <div class="ez-ptz-icon right active"></div>
      `),document.getElementById("".concat(m.id,"-wrap")).appendChild(n),document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmousedown=function(l){l.preventDefault(),console.log("触摸开始"),t._handlePtzTouch(l,"start")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).onmouseup=function(l){l.preventDefault(),console.log("触摸结束"),t._handlePtzTouch(l,"stop")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchstart=function(l){l.preventDefault(),console.log("触摸开始"),t._handlePtzTouch(l,"start")},document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).ontouchend=function(l){l.preventDefault(),console.log("触摸结束",l),t._handlePtzTouch(l,"stop")}}return Rn(Z,[{key:"show",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: inline-block"),this.showPtz=!0,this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("openPtz",{eventType:"openPtz",code:0,target:this,msg:"开启云台"})}},{key:"hide",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-item")).style="display: none"),this.showPtz=!1,this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("closePtz",{eventType:"closePtz",code:0,target:this,msg:"关闭云台"})}},{key:"_handlePtzTouch",value:function(t,n){var o=this,l=document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).getBoundingClientRect(),d=l.left+41,c=l.top+41,E=t.x||t.changedTouches[0].clientX,C=t.y||t.changedTouches[0].clientY,y=E-d,w=C-c,g=0,p=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";if(Math.abs(y)>Math.abs(w)?y>0?g=3:g=2:w>0?g=1:g=0,/^rotate\(90/.test(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.transform))switch(g){case 0:g=2;break;case 1:g=3;break;case 2:g=1;break;case 3:g=0;break}document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(g===0?180:g===1?0:g===2?90:270,"deg, #1d8dd8 0%, rgba(100,143,252,0.00) 30%)"),n==="stop"&&(p=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",document.getElementById("".concat(this.jSPlugin.id,"-ez-ptz-container")).style="");var te=new FormData;te.append("deviceSerial",pn(this.jSPlugin.url).deviceSerial),te.append("channelNo",pn(this.jSPlugin.url).channelNo),te.append("speed",1),te.append("direction",g),te.append("accessToken",this.jSPlugin.accessToken),fetch(p,{method:"POST",body:te}).then(function(ae){return ae.json()}).then(function(ae){ae.code==200||(console.log(ae.code,o.codeHandler.matchInfo(ae.code,n==="start"?"ptzStart":"ptzStop")),o.pluginStatus.loadingSetText({text:o.codeHandler.matchInfo(ae.code,n==="start"?"ptzStart":"ptzStop").msg,color:"red",delayClear:2e3}),(ae.code==60005||ae.code==60002||ae.code==60003||ae.code==60004)&&(document.getElementById("".concat(o.jSPlugin.id,"-ez-ptz-container")).style="background-image:linear-gradient(".concat(g===0?180:g===1?0:g===2?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 30%)")))}).catch(function(ae){console.log("云台调用异常",ae)})}}]),Z}();function bs(Z){throw new Error('Could not dynamically require "'+Z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Lu={exports:{}};(function(Z,m){(function(t){Z.exports=t()})(function(){return function(){function t(n,o,l){function d(C,y){if(!o[C]){if(!n[C]){var w=typeof bs=="function"&&bs;if(!y&&w)return w(C,!0);if(c)return c(C,!0);var g=new Error("Cannot find module '"+C+"'");throw g.code="MODULE_NOT_FOUND",g}var p=o[C]={exports:{}};n[C][0].call(p.exports,function(te){var ae=n[C][1][te];return d(ae||te)},p,p.exports,t,n,o,l)}return o[C].exports}for(var c=typeof bs=="function"&&bs,E=0;E<l.length;E++)d(l[E]);return d}return t}()({1:[function(t,n,o){var l=t("./adapter_factory.js"),d=(0,l.adapterFactory)({window});window.adapter=d,n.exports=d},{"./adapter_factory.js":2}],2:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.adapterFactory=we;var l=t("./utils"),d=ie(l),c=t("./chrome/chrome_shim"),E=ie(c),C=t("./edge/edge_shim"),y=ie(C),w=t("./firefox/firefox_shim"),g=ie(w),p=t("./safari/safari_shim"),te=ie(p),ae=t("./common_shim"),de=ie(ae);function ie(Ve){if(Ve&&Ve.__esModule)return Ve;var ue={};if(Ve!=null)for(var x in Ve)Object.prototype.hasOwnProperty.call(Ve,x)&&(ue[x]=Ve[x]);return ue.default=Ve,ue}function we(){var Ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ue=Ve.window,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},O=d.log,ne=d.detectBrowser(ue),Q={browserDetails:ne,commonShim:de,extractVersion:d.extractVersion,disableLog:d.disableLog,disableWarnings:d.disableWarnings};switch(ne.browser){case"chrome":if(!E||!E.shimPeerConnection||!x.shimChrome)return O("Chrome shim is not included in this adapter release."),Q;O("adapter.js shimming chrome."),Q.browserShim=E,E.shimGetUserMedia(ue),E.shimMediaStream(ue),E.shimPeerConnection(ue),E.shimOnTrack(ue),E.shimAddTrackRemoveTrack(ue),E.shimGetSendersWithDtmf(ue),E.shimGetStats(ue),E.shimSenderReceiverGetStats(ue),E.fixNegotiationNeeded(ue),de.shimRTCIceCandidate(ue),de.shimConnectionState(ue),de.shimMaxMessageSize(ue),de.shimSendThrowTypeError(ue),de.removeAllowExtmapMixed(ue);break;case"firefox":if(!g||!g.shimPeerConnection||!x.shimFirefox)return O("Firefox shim is not included in this adapter release."),Q;O("adapter.js shimming firefox."),Q.browserShim=g,g.shimGetUserMedia(ue),g.shimPeerConnection(ue),g.shimOnTrack(ue),g.shimRemoveStream(ue),g.shimSenderGetStats(ue),g.shimReceiverGetStats(ue),g.shimRTCDataChannel(ue),g.shimAddTransceiver(ue),g.shimCreateOffer(ue),g.shimCreateAnswer(ue),de.shimRTCIceCandidate(ue),de.shimConnectionState(ue),de.shimMaxMessageSize(ue),de.shimSendThrowTypeError(ue);break;case"edge":if(!y||!y.shimPeerConnection||!x.shimEdge)return O("MS edge shim is not included in this adapter release."),Q;O("adapter.js shimming edge."),Q.browserShim=y,y.shimGetUserMedia(ue),y.shimGetDisplayMedia(ue),y.shimPeerConnection(ue),y.shimReplaceTrack(ue),de.shimMaxMessageSize(ue),de.shimSendThrowTypeError(ue);break;case"safari":if(!te||!x.shimSafari)return O("Safari shim is not included in this adapter release."),Q;O("adapter.js shimming safari."),Q.browserShim=te,te.shimRTCIceServerUrls(ue),te.shimCreateOfferLegacy(ue),te.shimCallbacksAPI(ue),te.shimLocalStreamsAPI(ue),te.shimRemoteStreamsAPI(ue),te.shimTrackEventTransceiver(ue),te.shimGetUserMedia(ue),de.shimRTCIceCandidate(ue),de.shimMaxMessageSize(ue),de.shimSendThrowTypeError(ue),de.removeAllowExtmapMixed(ue);break;default:O("Unsupported browser!");break}return Q}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetDisplayMedia=o.shimGetUserMedia=void 0;var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(x){return Ni(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":Ni(x)},d=t("./getusermedia");Object.defineProperty(o,"shimGetUserMedia",{enumerable:!0,get:function(){return d.shimGetUserMedia}});var c=t("./getdisplaymedia");Object.defineProperty(o,"shimGetDisplayMedia",{enumerable:!0,get:function(){return c.shimGetDisplayMedia}}),o.shimMediaStream=g,o.shimOnTrack=p,o.shimGetSendersWithDtmf=te,o.shimGetStats=ae,o.shimSenderReceiverGetStats=de,o.shimAddTrackRemoveTrackWithNative=ie,o.shimAddTrackRemoveTrack=we,o.shimPeerConnection=Ve,o.fixNegotiationNeeded=ue;var E=t("../utils.js"),C=y(E);function y(x){if(x&&x.__esModule)return x;var O={};if(x!=null)for(var ne in x)Object.prototype.hasOwnProperty.call(x,ne)&&(O[ne]=x[ne]);return O.default=x,O}function w(x,O,ne){return O in x?Object.defineProperty(x,O,{value:ne,enumerable:!0,configurable:!0,writable:!0}):x[O]=ne,x}function g(x){x.MediaStream=x.MediaStream||x.webkitMediaStream}function p(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection&&!("ontrack"in x.RTCPeerConnection.prototype)){Object.defineProperty(x.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(Q){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=Q)},enumerable:!0,configurable:!0});var O=x.RTCPeerConnection.prototype.setRemoteDescription;x.RTCPeerConnection.prototype.setRemoteDescription=function(){var Q=this;return this._ontrackpoly||(this._ontrackpoly=function(ye){ye.stream.addEventListener("addtrack",function(se){var Ze=void 0;x.RTCPeerConnection.prototype.getReceivers?Ze=Q.getReceivers().find(function(M){return M.track&&M.track.id===se.track.id}):Ze={track:se.track};var Qe=new Event("track");Qe.track=se.track,Qe.receiver=Ze,Qe.transceiver={receiver:Ze},Qe.streams=[ye.stream],Q.dispatchEvent(Qe)}),ye.stream.getTracks().forEach(function(se){var Ze=void 0;x.RTCPeerConnection.prototype.getReceivers?Ze=Q.getReceivers().find(function(M){return M.track&&M.track.id===se.id}):Ze={track:se};var Qe=new Event("track");Qe.track=se,Qe.receiver=Ze,Qe.transceiver={receiver:Ze},Qe.streams=[ye.stream],Q.dispatchEvent(Qe)})},this.addEventListener("addstream",this._ontrackpoly)),O.apply(this,arguments)}}else C.wrapPeerConnectionEvent(x,"track",function(ne){return ne.transceiver||Object.defineProperty(ne,"transceiver",{value:{receiver:ne.receiver}}),ne})}function te(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection&&!("getSenders"in x.RTCPeerConnection.prototype)&&"createDTMFSender"in x.RTCPeerConnection.prototype){var O=function(M,Te){return{track:Te,get dtmf(){return this._dtmf===void 0&&(Te.kind==="audio"?this._dtmf=M.createDTMFSender(Te):this._dtmf=null),this._dtmf},_pc:M}};if(!x.RTCPeerConnection.prototype.getSenders){x.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var ne=x.RTCPeerConnection.prototype.addTrack;x.RTCPeerConnection.prototype.addTrack=function(M,Te){var ze=ne.apply(this,arguments);return ze||(ze=O(this,M),this._senders.push(ze)),ze};var Q=x.RTCPeerConnection.prototype.removeTrack;x.RTCPeerConnection.prototype.removeTrack=function(M){Q.apply(this,arguments);var Te=this._senders.indexOf(M);Te!==-1&&this._senders.splice(Te,1)}}var ye=x.RTCPeerConnection.prototype.addStream;x.RTCPeerConnection.prototype.addStream=function(M){var Te=this;this._senders=this._senders||[],ye.apply(this,[M]),M.getTracks().forEach(function(ze){Te._senders.push(O(Te,ze))})};var se=x.RTCPeerConnection.prototype.removeStream;x.RTCPeerConnection.prototype.removeStream=function(M){var Te=this;this._senders=this._senders||[],se.apply(this,[M]),M.getTracks().forEach(function(ze){var oi=Te._senders.find(function(wi){return wi.track===ze});oi&&Te._senders.splice(Te._senders.indexOf(oi),1)})}}else if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection&&"getSenders"in x.RTCPeerConnection.prototype&&"createDTMFSender"in x.RTCPeerConnection.prototype&&x.RTCRtpSender&&!("dtmf"in x.RTCRtpSender.prototype)){var Ze=x.RTCPeerConnection.prototype.getSenders;x.RTCPeerConnection.prototype.getSenders=function(){var M=this,Te=Ze.apply(this,[]);return Te.forEach(function(ze){return ze._pc=M}),Te},Object.defineProperty(x.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function ae(x){if(x.RTCPeerConnection){var O=x.RTCPeerConnection.prototype.getStats;x.RTCPeerConnection.prototype.getStats=function(){var Q=this,ye=Array.prototype.slice.call(arguments),se=ye[0],Ze=ye[1],Qe=ye[2];if(arguments.length>0&&typeof se=="function")return O.apply(this,arguments);if(O.length===0&&(arguments.length===0||typeof se!="function"))return O.apply(this,[]);var M=function(wi){var ui={},di=wi.result();return di.forEach(function(zi){var $e={id:zi.id,timestamp:zi.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[zi.type]||zi.type};zi.names().forEach(function(st){$e[st]=zi.stat(st)}),ui[$e.id]=$e}),ui},Te=function(wi){return new Map(Object.keys(wi).map(function(ui){return[ui,wi[ui]]}))};if(arguments.length>=2){var ze=function(wi){Ze(Te(M(wi)))};return O.apply(this,[ze,se])}return new Promise(function(oi,wi){O.apply(Q,[function(ui){oi(Te(M(ui)))},wi])}).then(Ze,Qe)}}}function de(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection&&x.RTCRtpSender&&x.RTCRtpReceiver){if(!("getStats"in x.RTCRtpSender.prototype)){var O=x.RTCPeerConnection.prototype.getSenders;O&&(x.RTCPeerConnection.prototype.getSenders=function(){var Ze=this,Qe=O.apply(this,[]);return Qe.forEach(function(M){return M._pc=Ze}),Qe});var ne=x.RTCPeerConnection.prototype.addTrack;ne&&(x.RTCPeerConnection.prototype.addTrack=function(){var Ze=ne.apply(this,arguments);return Ze._pc=this,Ze}),x.RTCRtpSender.prototype.getStats=function(){var Ze=this;return this._pc.getStats().then(function(Qe){return C.filterStats(Qe,Ze.track,!0)})}}if(!("getStats"in x.RTCRtpReceiver.prototype)){var Q=x.RTCPeerConnection.prototype.getReceivers;Q&&(x.RTCPeerConnection.prototype.getReceivers=function(){var Ze=this,Qe=Q.apply(this,[]);return Qe.forEach(function(M){return M._pc=Ze}),Qe}),C.wrapPeerConnectionEvent(x,"track",function(se){return se.receiver._pc=se.srcElement,se}),x.RTCRtpReceiver.prototype.getStats=function(){var Ze=this;return this._pc.getStats().then(function(Qe){return C.filterStats(Qe,Ze.track,!1)})}}if("getStats"in x.RTCRtpSender.prototype&&"getStats"in x.RTCRtpReceiver.prototype){var ye=x.RTCPeerConnection.prototype.getStats;x.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof x.MediaStreamTrack){var Ze=arguments[0],Qe=void 0,M=void 0,Te=void 0;return this.getSenders().forEach(function(ze){ze.track===Ze&&(Qe?Te=!0:Qe=ze)}),this.getReceivers().forEach(function(ze){return ze.track===Ze&&(M?Te=!0:M=ze),ze.track===Ze}),Te||Qe&&M?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):Qe?Qe.getStats():M?M.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return ye.apply(this,arguments)}}}}function ie(x){x.RTCPeerConnection.prototype.getLocalStreams=function(){var Ze=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(Qe){return Ze._shimmedLocalStreams[Qe][0]})};var O=x.RTCPeerConnection.prototype.addTrack;x.RTCPeerConnection.prototype.addTrack=function(Ze,Qe){if(!Qe)return O.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var M=O.apply(this,arguments);return this._shimmedLocalStreams[Qe.id]?this._shimmedLocalStreams[Qe.id].indexOf(M)===-1&&this._shimmedLocalStreams[Qe.id].push(M):this._shimmedLocalStreams[Qe.id]=[Qe,M],M};var ne=x.RTCPeerConnection.prototype.addStream;x.RTCPeerConnection.prototype.addStream=function(Ze){var Qe=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},Ze.getTracks().forEach(function(ze){var oi=Qe.getSenders().find(function(wi){return wi.track===ze});if(oi)throw new DOMException("Track already exists.","InvalidAccessError")});var M=this.getSenders();ne.apply(this,arguments);var Te=this.getSenders().filter(function(ze){return M.indexOf(ze)===-1});this._shimmedLocalStreams[Ze.id]=[Ze].concat(Te)};var Q=x.RTCPeerConnection.prototype.removeStream;x.RTCPeerConnection.prototype.removeStream=function(Ze){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[Ze.id],Q.apply(this,arguments)};var ye=x.RTCPeerConnection.prototype.removeTrack;x.RTCPeerConnection.prototype.removeTrack=function(Ze){var Qe=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Ze&&Object.keys(this._shimmedLocalStreams).forEach(function(M){var Te=Qe._shimmedLocalStreams[M].indexOf(Ze);Te!==-1&&Qe._shimmedLocalStreams[M].splice(Te,1),Qe._shimmedLocalStreams[M].length===1&&delete Qe._shimmedLocalStreams[M]}),ye.apply(this,arguments)}}function we(x){if(!x.RTCPeerConnection)return;var O=C.detectBrowser(x);if(x.RTCPeerConnection.prototype.addTrack&&O.version>=65)return ie(x);var ne=x.RTCPeerConnection.prototype.getLocalStreams;x.RTCPeerConnection.prototype.getLocalStreams=function(){var ze=this,oi=ne.apply(this);return this._reverseStreams=this._reverseStreams||{},oi.map(function(wi){return ze._reverseStreams[wi.id]})};var Q=x.RTCPeerConnection.prototype.addStream;x.RTCPeerConnection.prototype.addStream=function(ze){var oi=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ze.getTracks().forEach(function(ui){var di=oi.getSenders().find(function(zi){return zi.track===ui});if(di)throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[ze.id]){var wi=new x.MediaStream(ze.getTracks());this._streams[ze.id]=wi,this._reverseStreams[wi.id]=ze,ze=wi}Q.apply(this,[ze])};var ye=x.RTCPeerConnection.prototype.removeStream;x.RTCPeerConnection.prototype.removeStream=function(ze){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ye.apply(this,[this._streams[ze.id]||ze]),delete this._reverseStreams[this._streams[ze.id]?this._streams[ze.id].id:ze.id],delete this._streams[ze.id]},x.RTCPeerConnection.prototype.addTrack=function(ze,oi){var wi=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var ui=[].slice.call(arguments,1);if(ui.length!==1||!ui[0].getTracks().find(function(st){return st===ze}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var di=this.getSenders().find(function(st){return st.track===ze});if(di)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var zi=this._streams[oi.id];if(zi)zi.addTrack(ze),Promise.resolve().then(function(){wi.dispatchEvent(new Event("negotiationneeded"))});else{var $e=new x.MediaStream([ze]);this._streams[oi.id]=$e,this._reverseStreams[$e.id]=oi,this.addStream($e)}return this.getSenders().find(function(st){return st.track===ze})};function se(Te,ze){var oi=ze.sdp;return Object.keys(Te._reverseStreams||[]).forEach(function(wi){var ui=Te._reverseStreams[wi],di=Te._streams[ui.id];oi=oi.replace(new RegExp(di.id,"g"),ui.id)}),new RTCSessionDescription({type:ze.type,sdp:oi})}function Ze(Te,ze){var oi=ze.sdp;return Object.keys(Te._reverseStreams||[]).forEach(function(wi){var ui=Te._reverseStreams[wi],di=Te._streams[ui.id];oi=oi.replace(new RegExp(ui.id,"g"),di.id)}),new RTCSessionDescription({type:ze.type,sdp:oi})}["createOffer","createAnswer"].forEach(function(Te){var ze=x.RTCPeerConnection.prototype[Te],oi=w({},Te,function(){var wi=this,ui=arguments,di=arguments.length&&typeof arguments[0]=="function";return di?ze.apply(this,[function(zi){var $e=se(wi,zi);ui[0].apply(null,[$e])},function(zi){ui[1]&&ui[1].apply(null,zi)},arguments[2]]):ze.apply(this,arguments).then(function(zi){return se(wi,zi)})});x.RTCPeerConnection.prototype[Te]=oi[Te]});var Qe=x.RTCPeerConnection.prototype.setLocalDescription;x.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?Qe.apply(this,arguments):(arguments[0]=Ze(this,arguments[0]),Qe.apply(this,arguments))};var M=Object.getOwnPropertyDescriptor(x.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(x.RTCPeerConnection.prototype,"localDescription",{get:function(){var ze=M.get.apply(this);return ze.type===""?ze:se(this,ze)}}),x.RTCPeerConnection.prototype.removeTrack=function(ze){var oi=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!ze._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var wi=ze._pc===this;if(!wi)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var ui=void 0;Object.keys(this._streams).forEach(function(di){var zi=oi._streams[di].getTracks().find(function($e){return ze.track===$e});zi&&(ui=oi._streams[di])}),ui&&(ui.getTracks().length===1?this.removeStream(this._reverseStreams[ui.id]):ui.removeTrack(ze.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ve(x){var O=C.detectBrowser(x);if(!x.RTCPeerConnection&&x.webkitRTCPeerConnection&&(x.RTCPeerConnection=x.webkitRTCPeerConnection),!!x.RTCPeerConnection){O.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(Q){var ye=x.RTCPeerConnection.prototype[Q],se=w({},Q,function(){return arguments[0]=new(Q==="addIceCandidate"?x.RTCIceCandidate:x.RTCSessionDescription)(arguments[0]),ye.apply(this,arguments)});x.RTCPeerConnection.prototype[Q]=se[Q]});var ne=x.RTCPeerConnection.prototype.addIceCandidate;x.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?O.version<78&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():ne.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function ue(x){C.wrapPeerConnectionEvent(x,"negotiationneeded",function(O){var ne=O.target;if(ne.signalingState==="stable")return O})}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetDisplayMedia=l;function l(d,c){if(!(d.navigator.mediaDevices&&"getDisplayMedia"in d.navigator.mediaDevices)&&d.navigator.mediaDevices){if(typeof c!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}d.navigator.mediaDevices.getDisplayMedia=function(C){return c(C).then(function(y){var w=C.video&&C.video.width,g=C.video&&C.video.height,p=C.video&&C.video.frameRate;return C.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:y,maxFrameRate:p||3}},w&&(C.video.mandatory.maxWidth=w),g&&(C.video.mandatory.maxHeight=g),d.navigator.mediaDevices.getUserMedia(C)})}}}},{}],5:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(w){return Ni(w)}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":Ni(w)};o.shimGetUserMedia=y;var d=t("../utils.js"),c=E(d);function E(w){if(w&&w.__esModule)return w;var g={};if(w!=null)for(var p in w)Object.prototype.hasOwnProperty.call(w,p)&&(g[p]=w[p]);return g.default=w,g}var C=c.log;function y(w){var g=w&&w.navigator;if(g.mediaDevices){var p=c.detectBrowser(w),te=function(ue){if((typeof ue>"u"?"undefined":l(ue))!=="object"||ue.mandatory||ue.optional)return ue;var x={};return Object.keys(ue).forEach(function(O){if(!(O==="require"||O==="advanced"||O==="mediaSource")){var ne=l(ue[O])==="object"?ue[O]:{ideal:ue[O]};ne.exact!==void 0&&typeof ne.exact=="number"&&(ne.min=ne.max=ne.exact);var Q=function(Ze,Qe){return Ze?Ze+Qe.charAt(0).toUpperCase()+Qe.slice(1):Qe==="deviceId"?"sourceId":Qe};if(ne.ideal!==void 0){x.optional=x.optional||[];var ye={};typeof ne.ideal=="number"?(ye[Q("min",O)]=ne.ideal,x.optional.push(ye),ye={},ye[Q("max",O)]=ne.ideal,x.optional.push(ye)):(ye[Q("",O)]=ne.ideal,x.optional.push(ye))}ne.exact!==void 0&&typeof ne.exact!="number"?(x.mandatory=x.mandatory||{},x.mandatory[Q("",O)]=ne.exact):["min","max"].forEach(function(se){ne[se]!==void 0&&(x.mandatory=x.mandatory||{},x.mandatory[Q(se,O)]=ne[se])})}}),ue.advanced&&(x.optional=(x.optional||[]).concat(ue.advanced)),x},ae=function(ue,x){if(p.version>=61)return x(ue);if(ue=JSON.parse(JSON.stringify(ue)),ue&&l(ue.audio)==="object"){var O=function(Ze,Qe,M){Qe in Ze&&!(M in Ze)&&(Ze[M]=Ze[Qe],delete Ze[Qe])};ue=JSON.parse(JSON.stringify(ue)),O(ue.audio,"autoGainControl","googAutoGainControl"),O(ue.audio,"noiseSuppression","googNoiseSuppression"),ue.audio=te(ue.audio)}if(ue&&l(ue.video)==="object"){var ne=ue.video.facingMode;ne=ne&&((typeof ne>"u"?"undefined":l(ne))==="object"?ne:{ideal:ne});var Q=p.version<66;if(ne&&(ne.exact==="user"||ne.exact==="environment"||ne.ideal==="user"||ne.ideal==="environment")&&!(g.mediaDevices.getSupportedConstraints&&g.mediaDevices.getSupportedConstraints().facingMode&&!Q)){delete ue.video.facingMode;var ye=void 0;if(ne.exact==="environment"||ne.ideal==="environment"?ye=["back","rear"]:(ne.exact==="user"||ne.ideal==="user")&&(ye=["front"]),ye)return g.mediaDevices.enumerateDevices().then(function(se){se=se.filter(function(Qe){return Qe.kind==="videoinput"});var Ze=se.find(function(Qe){return ye.some(function(M){return Qe.label.toLowerCase().includes(M)})});return!Ze&&se.length&&ye.includes("back")&&(Ze=se[se.length-1]),Ze&&(ue.video.deviceId=ne.exact?{exact:Ze.deviceId}:{ideal:Ze.deviceId}),ue.video=te(ue.video),C("chrome: "+JSON.stringify(ue)),x(ue)})}ue.video=te(ue.video)}return C("chrome: "+JSON.stringify(ue)),x(ue)},de=function(ue){return p.version>=64?ue:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[ue.name]||ue.name,message:ue.message,constraint:ue.constraint||ue.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},ie=function(ue,x,O){ae(ue,function(ne){g.webkitGetUserMedia(ne,x,function(Q){O&&O(de(Q))})})};if(g.getUserMedia=ie.bind(g),g.mediaDevices.getUserMedia){var we=g.mediaDevices.getUserMedia.bind(g.mediaDevices);g.mediaDevices.getUserMedia=function(Ve){return ae(Ve,function(ue){return we(ue).then(function(x){if(ue.audio&&!x.getAudioTracks().length||ue.video&&!x.getVideoTracks().length)throw x.getTracks().forEach(function(O){O.stop()}),new DOMException("","NotFoundError");return x},function(x){return Promise.reject(de(x))})})}}}}},{"../utils.js":15}],6:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(ie){return Ni(ie)}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":Ni(ie)};o.shimRTCIceCandidate=g,o.shimMaxMessageSize=p,o.shimSendThrowTypeError=te,o.shimConnectionState=ae,o.removeAllowExtmapMixed=de;var d=t("sdp"),c=w(d),E=t("./utils"),C=y(E);function y(ie){if(ie&&ie.__esModule)return ie;var we={};if(ie!=null)for(var Ve in ie)Object.prototype.hasOwnProperty.call(ie,Ve)&&(we[Ve]=ie[Ve]);return we.default=ie,we}function w(ie){return ie&&ie.__esModule?ie:{default:ie}}function g(ie){if(!(!ie.RTCIceCandidate||ie.RTCIceCandidate&&"foundation"in ie.RTCIceCandidate.prototype)){var we=ie.RTCIceCandidate;ie.RTCIceCandidate=function(ue){if((typeof ue>"u"?"undefined":l(ue))==="object"&&ue.candidate&&ue.candidate.indexOf("a=")===0&&(ue=JSON.parse(JSON.stringify(ue)),ue.candidate=ue.candidate.substr(2)),ue.candidate&&ue.candidate.length){var x=new we(ue),O=c.default.parseCandidate(ue.candidate),ne=Object.assign(x,O);return ne.toJSON=function(){return{candidate:ne.candidate,sdpMid:ne.sdpMid,sdpMLineIndex:ne.sdpMLineIndex,usernameFragment:ne.usernameFragment}},ne}return new we(ue)},ie.RTCIceCandidate.prototype=we.prototype,C.wrapPeerConnectionEvent(ie,"icecandidate",function(Ve){return Ve.candidate&&Object.defineProperty(Ve,"candidate",{value:new ie.RTCIceCandidate(Ve.candidate),writable:"false"}),Ve})}}function p(ie){if(ie.RTCPeerConnection){var we=C.detectBrowser(ie);"sctp"in ie.RTCPeerConnection.prototype||Object.defineProperty(ie.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp}});var Ve=function(ye){if(!ye||!ye.sdp)return!1;var se=c.default.splitSections(ye.sdp);return se.shift(),se.some(function(Ze){var Qe=c.default.parseMLine(Ze);return Qe&&Qe.kind==="application"&&Qe.protocol.indexOf("SCTP")!==-1})},ue=function(ye){var se=ye.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(se===null||se.length<2)return-1;var Ze=parseInt(se[1],10);return Ze!==Ze?-1:Ze},x=function(ye){var se=65536;return we.browser==="firefox"&&(we.version<57?ye===-1?se=16384:se=2147483637:we.version<60?se=we.version===57?65535:65536:se=2147483637),se},O=function(ye,se){var Ze=65536;we.browser==="firefox"&&we.version===57&&(Ze=65535);var Qe=c.default.matchPrefix(ye.sdp,"a=max-message-size:");return Qe.length>0?Ze=parseInt(Qe[0].substr(19),10):we.browser==="firefox"&&se!==-1&&(Ze=2147483637),Ze},ne=ie.RTCPeerConnection.prototype.setRemoteDescription;ie.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,we.browser==="chrome"&&we.version>=76){var ye=this.getConfiguration(),se=ye.sdpSemantics;se==="plan-b"&&Object.defineProperty(this,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(Ve(arguments[0])){var Ze=ue(arguments[0]),Qe=x(Ze),M=O(arguments[0],Ze),Te=void 0;Qe===0&&M===0?Te=Number.POSITIVE_INFINITY:Qe===0||M===0?Te=Math.max(Qe,M):Te=Math.min(Qe,M);var ze={};Object.defineProperty(ze,"maxMessageSize",{get:function(){return Te}}),this._sctp=ze}return ne.apply(this,arguments)}}}function te(ie){if(!(ie.RTCPeerConnection&&"createDataChannel"in ie.RTCPeerConnection.prototype))return;function we(ue,x){var O=ue.send;ue.send=function(){var Q=arguments[0],ye=Q.length||Q.size||Q.byteLength;if(ue.readyState==="open"&&x.sctp&&ye>x.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+x.sctp.maxMessageSize+" bytes)");return O.apply(ue,arguments)}}var Ve=ie.RTCPeerConnection.prototype.createDataChannel;ie.RTCPeerConnection.prototype.createDataChannel=function(){var x=Ve.apply(this,arguments);return we(x,this),x},C.wrapPeerConnectionEvent(ie,"datachannel",function(ue){return we(ue.channel,ue.target),ue})}function ae(ie){if(!(!ie.RTCPeerConnection||"connectionState"in ie.RTCPeerConnection.prototype)){var we=ie.RTCPeerConnection.prototype;Object.defineProperty(we,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(we,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(ue){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),ue&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=ue)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(Ve){var ue=we[Ve];we[Ve]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(x){var O=x.target;if(O._lastConnectionState!==O.connectionState){O._lastConnectionState=O.connectionState;var ne=new Event("connectionstatechange",x);O.dispatchEvent(ne)}return x},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),ue.apply(this,arguments)}})}}function de(ie){if(ie.RTCPeerConnection){var we=C.detectBrowser(ie);if(!(we.browser==="chrome"&&we.version>=71)){var Ve=ie.RTCPeerConnection.prototype.setRemoteDescription;ie.RTCPeerConnection.prototype.setRemoteDescription=function(x){return x&&x.sdp&&x.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(x.sdp=x.sdp.split(`
`).filter(function(O){return O.trim()!=="a=extmap-allow-mixed"}).join(`
`)),Ve.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetDisplayMedia=o.shimGetUserMedia=void 0;var l=t("./getusermedia");Object.defineProperty(o,"shimGetUserMedia",{enumerable:!0,get:function(){return l.shimGetUserMedia}});var d=t("./getdisplaymedia");Object.defineProperty(o,"shimGetDisplayMedia",{enumerable:!0,get:function(){return d.shimGetDisplayMedia}}),o.shimPeerConnection=te,o.shimReplaceTrack=ae;var c=t("../utils"),E=p(c),C=t("./filtericeservers"),y=t("rtcpeerconnection-shim"),w=g(y);function g(de){return de&&de.__esModule?de:{default:de}}function p(de){if(de&&de.__esModule)return de;var ie={};if(de!=null)for(var we in de)Object.prototype.hasOwnProperty.call(de,we)&&(ie[we]=de[we]);return ie.default=de,ie}function te(de){var ie=E.detectBrowser(de);if(de.RTCIceGatherer&&(de.RTCIceCandidate||(de.RTCIceCandidate=function(x){return x}),de.RTCSessionDescription||(de.RTCSessionDescription=function(x){return x}),ie.version<15025)){var we=Object.getOwnPropertyDescriptor(de.MediaStreamTrack.prototype,"enabled");Object.defineProperty(de.MediaStreamTrack.prototype,"enabled",{set:function(x){we.set.call(this,x);var O=new Event("enabled");O.enabled=x,this.dispatchEvent(O)}})}de.RTCRtpSender&&!("dtmf"in de.RTCRtpSender.prototype)&&Object.defineProperty(de.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new de.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),de.RTCDtmfSender&&!de.RTCDTMFSender&&(de.RTCDTMFSender=de.RTCDtmfSender);var Ve=(0,w.default)(de,ie.version);de.RTCPeerConnection=function(x){return x&&x.iceServers&&(x.iceServers=(0,C.filterIceServers)(x.iceServers,ie.version),E.log("ICE servers after filtering:",x.iceServers)),new Ve(x)},de.RTCPeerConnection.prototype=Ve.prototype}function ae(de){de.RTCRtpSender&&!("replaceTrack"in de.RTCRtpSender.prototype)&&(de.RTCRtpSender.prototype.replaceTrack=de.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.filterIceServers=E;var l=t("../utils"),d=c(l);function c(C){if(C&&C.__esModule)return C;var y={};if(C!=null)for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(y[w]=C[w]);return y.default=C,y}function E(C,y){var w=!1;return C=JSON.parse(JSON.stringify(C)),C.filter(function(g){if(g&&(g.urls||g.url)){var p=g.urls||g.url;g.url&&!g.urls&&d.deprecated("RTCIceServer.url","RTCIceServer.urls");var te=typeof p=="string";return te&&(p=[p]),p=p.filter(function(ae){if(ae.indexOf("stun:")===0)return!1;var de=ae.startsWith("turn")&&!ae.startsWith("turn:[")&&ae.includes("transport=udp");return de&&!w?(w=!0,!0):de&&!w}),delete g.url,g.urls=te?p[0]:p,!!p.length}})}},{"../utils":15}],9:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetDisplayMedia=l;function l(d){"getDisplayMedia"in d.navigator&&d.navigator.mediaDevices&&(d.navigator.mediaDevices&&"getDisplayMedia"in d.navigator.mediaDevices||(d.navigator.mediaDevices.getDisplayMedia=d.navigator.getDisplayMedia.bind(d.navigator)))}},{}],10:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetUserMedia=l;function l(d){var c=d&&d.navigator,E=function(w){return{name:{PermissionDeniedError:"NotAllowedError"}[w.name]||w.name,message:w.message,constraint:w.constraint,toString:function(){return this.name}}},C=c.mediaDevices.getUserMedia.bind(c.mediaDevices);c.mediaDevices.getUserMedia=function(y){return C(y).catch(function(w){return Promise.reject(E(w))})}}},{}],11:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetDisplayMedia=o.shimGetUserMedia=void 0;var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(x){return Ni(x)}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":Ni(x)},d=t("./getusermedia");Object.defineProperty(o,"shimGetUserMedia",{enumerable:!0,get:function(){return d.shimGetUserMedia}});var c=t("./getdisplaymedia");Object.defineProperty(o,"shimGetDisplayMedia",{enumerable:!0,get:function(){return c.shimGetDisplayMedia}}),o.shimOnTrack=g,o.shimPeerConnection=p,o.shimSenderGetStats=te,o.shimReceiverGetStats=ae,o.shimRemoveStream=de,o.shimRTCDataChannel=ie,o.shimAddTransceiver=we,o.shimCreateOffer=Ve,o.shimCreateAnswer=ue;var E=t("../utils"),C=y(E);function y(x){if(x&&x.__esModule)return x;var O={};if(x!=null)for(var ne in x)Object.prototype.hasOwnProperty.call(x,ne)&&(O[ne]=x[ne]);return O.default=x,O}function w(x,O,ne){return O in x?Object.defineProperty(x,O,{value:ne,enumerable:!0,configurable:!0,writable:!0}):x[O]=ne,x}function g(x){(typeof x>"u"?"undefined":l(x))==="object"&&x.RTCTrackEvent&&"receiver"in x.RTCTrackEvent.prototype&&!("transceiver"in x.RTCTrackEvent.prototype)&&Object.defineProperty(x.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function p(x){var O=C.detectBrowser(x);if(!((typeof x>"u"?"undefined":l(x))!=="object"||!(x.RTCPeerConnection||x.mozRTCPeerConnection))){if(!x.RTCPeerConnection&&x.mozRTCPeerConnection&&(x.RTCPeerConnection=x.mozRTCPeerConnection),O.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(se){var Ze=x.RTCPeerConnection.prototype[se],Qe=w({},se,function(){return arguments[0]=new(se==="addIceCandidate"?x.RTCIceCandidate:x.RTCSessionDescription)(arguments[0]),Ze.apply(this,arguments)});x.RTCPeerConnection.prototype[se]=Qe[se]}),O.version<68){var ne=x.RTCPeerConnection.prototype.addIceCandidate;x.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&arguments[0].candidate===""?Promise.resolve():ne.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var Q={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},ye=x.RTCPeerConnection.prototype.getStats;x.RTCPeerConnection.prototype.getStats=function(){var Ze=Array.prototype.slice.call(arguments),Qe=Ze[0],M=Ze[1],Te=Ze[2];return ye.apply(this,[Qe||null]).then(function(ze){if(O.version<53&&!M)try{ze.forEach(function(oi){oi.type=Q[oi.type]||oi.type})}catch(oi){if(oi.name!=="TypeError")throw oi;ze.forEach(function(wi,ui){ze.set(ui,Object.assign({},wi,{type:Q[wi.type]||wi.type}))})}return ze}).then(M,Te)}}}function te(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection&&x.RTCRtpSender&&!(x.RTCRtpSender&&"getStats"in x.RTCRtpSender.prototype)){var O=x.RTCPeerConnection.prototype.getSenders;O&&(x.RTCPeerConnection.prototype.getSenders=function(){var ye=this,se=O.apply(this,[]);return se.forEach(function(Ze){return Ze._pc=ye}),se});var ne=x.RTCPeerConnection.prototype.addTrack;ne&&(x.RTCPeerConnection.prototype.addTrack=function(){var ye=ne.apply(this,arguments);return ye._pc=this,ye}),x.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function ae(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection&&x.RTCRtpSender&&!(x.RTCRtpSender&&"getStats"in x.RTCRtpReceiver.prototype)){var O=x.RTCPeerConnection.prototype.getReceivers;O&&(x.RTCPeerConnection.prototype.getReceivers=function(){var Q=this,ye=O.apply(this,[]);return ye.forEach(function(se){return se._pc=Q}),ye}),C.wrapPeerConnectionEvent(x,"track",function(ne){return ne.receiver._pc=ne.srcElement,ne}),x.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function de(x){!x.RTCPeerConnection||"removeStream"in x.RTCPeerConnection.prototype||(x.RTCPeerConnection.prototype.removeStream=function(ne){var Q=this;C.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(ye){ye.track&&ne.getTracks().includes(ye.track)&&Q.removeTrack(ye)})})}function ie(x){x.DataChannel&&!x.RTCDataChannel&&(x.RTCDataChannel=x.DataChannel)}function we(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection){var O=x.RTCPeerConnection.prototype.addTransceiver;O&&(x.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var Q=arguments[1],ye=Q&&"sendEncodings"in Q;ye&&Q.sendEncodings.forEach(function(M){if("rid"in M){var Te=/^[a-z0-9]{0,16}$/i;if(!Te.test(M.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in M&&!(parseFloat(M.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in M&&!(parseFloat(M.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});var se=O.apply(this,arguments);if(ye){var Ze=se.sender,Qe=Ze.getParameters();"encodings"in Qe||(Qe.encodings=Q.sendEncodings,this.setParametersPromises.push(Ze.setParameters(Qe).catch(function(){})))}return se})}}function Ve(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection){var O=x.RTCPeerConnection.prototype.createOffer;x.RTCPeerConnection.prototype.createOffer=function(){var Q=this,ye=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return O.apply(Q,ye)}).finally(function(){Q.setParametersPromises=[]}):O.apply(this,arguments)}}}function ue(x){if((typeof x>"u"?"undefined":l(x))==="object"&&x.RTCPeerConnection){var O=x.RTCPeerConnection.prototype.createAnswer;x.RTCPeerConnection.prototype.createAnswer=function(){var Q=this,ye=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return O.apply(Q,ye)}).finally(function(){Q.setParametersPromises=[]}):O.apply(this,arguments)}}}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0}),o.shimGetDisplayMedia=l;function l(d,c){d.navigator.mediaDevices&&"getDisplayMedia"in d.navigator.mediaDevices||d.navigator.mediaDevices&&(d.navigator.mediaDevices.getDisplayMedia=function(C){if(!(C&&C.video)){var y=new DOMException("getDisplayMedia without video constraints is undefined");return y.name="NotFoundError",y.code=8,Promise.reject(y)}return C.video===!0?C.video={mediaSource:c}:C.video.mediaSource=c,d.navigator.mediaDevices.getUserMedia(C)})}},{}],13:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(y){return Ni(y)}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":Ni(y)};o.shimGetUserMedia=C;var d=t("../utils"),c=E(d);function E(y){if(y&&y.__esModule)return y;var w={};if(y!=null)for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(w[g]=y[g]);return w.default=y,w}function C(y){var w=c.detectBrowser(y),g=y&&y.navigator,p=y&&y.MediaStreamTrack;if(g.getUserMedia=function(we,Ve,ue){c.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),g.mediaDevices.getUserMedia(we).then(Ve,ue)},!(w.version>55&&"autoGainControl"in g.mediaDevices.getSupportedConstraints())){var te=function(Ve,ue,x){ue in Ve&&!(x in Ve)&&(Ve[x]=Ve[ue],delete Ve[ue])},ae=g.mediaDevices.getUserMedia.bind(g.mediaDevices);if(g.mediaDevices.getUserMedia=function(we){return(typeof we>"u"?"undefined":l(we))==="object"&&l(we.audio)==="object"&&(we=JSON.parse(JSON.stringify(we)),te(we.audio,"autoGainControl","mozAutoGainControl"),te(we.audio,"noiseSuppression","mozNoiseSuppression")),ae(we)},p&&p.prototype.getSettings){var de=p.prototype.getSettings;p.prototype.getSettings=function(){var we=de.apply(this,arguments);return te(we,"mozAutoGainControl","autoGainControl"),te(we,"mozNoiseSuppression","noiseSuppression"),we}}if(p&&p.prototype.applyConstraints){var ie=p.prototype.applyConstraints;p.prototype.applyConstraints=function(we){return this.kind==="audio"&&(typeof we>"u"?"undefined":l(we))==="object"&&(we=JSON.parse(JSON.stringify(we)),te(we,"autoGainControl","mozAutoGainControl"),te(we,"noiseSuppression","mozNoiseSuppression")),ie.apply(this,[we])}}}}},{"../utils":15}],14:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(ie){return Ni(ie)}:function(ie){return ie&&typeof Symbol=="function"&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":Ni(ie)};o.shimLocalStreamsAPI=C,o.shimRemoteStreamsAPI=y,o.shimCallbacksAPI=w,o.shimGetUserMedia=g,o.shimConstraints=p,o.shimRTCIceServerUrls=te,o.shimTrackEventTransceiver=ae,o.shimCreateOfferLegacy=de;var d=t("../utils"),c=E(d);function E(ie){if(ie&&ie.__esModule)return ie;var we={};if(ie!=null)for(var Ve in ie)Object.prototype.hasOwnProperty.call(ie,Ve)&&(we[Ve]=ie[Ve]);return we.default=ie,we}function C(ie){if(!((typeof ie>"u"?"undefined":l(ie))!=="object"||!ie.RTCPeerConnection)){if("getLocalStreams"in ie.RTCPeerConnection.prototype||(ie.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in ie.RTCPeerConnection.prototype)){var we=ie.RTCPeerConnection.prototype.addTrack;ie.RTCPeerConnection.prototype.addStream=function(ue){var x=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(ue)||this._localStreams.push(ue),ue.getAudioTracks().forEach(function(O){return we.call(x,O,ue)}),ue.getVideoTracks().forEach(function(O){return we.call(x,O,ue)})},ie.RTCPeerConnection.prototype.addTrack=function(ue){var x=arguments[1];return x&&(this._localStreams?this._localStreams.includes(x)||this._localStreams.push(x):this._localStreams=[x]),we.apply(this,arguments)}}"removeStream"in ie.RTCPeerConnection.prototype||(ie.RTCPeerConnection.prototype.removeStream=function(ue){var x=this;this._localStreams||(this._localStreams=[]);var O=this._localStreams.indexOf(ue);if(O!==-1){this._localStreams.splice(O,1);var ne=ue.getTracks();this.getSenders().forEach(function(Q){ne.includes(Q.track)&&x.removeTrack(Q)})}})}}function y(ie){if(!((typeof ie>"u"?"undefined":l(ie))!=="object"||!ie.RTCPeerConnection)&&("getRemoteStreams"in ie.RTCPeerConnection.prototype||(ie.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in ie.RTCPeerConnection.prototype))){Object.defineProperty(ie.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(ue){var x=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=ue),this.addEventListener("track",this._onaddstreampoly=function(O){O.streams.forEach(function(ne){if(x._remoteStreams||(x._remoteStreams=[]),!x._remoteStreams.includes(ne)){x._remoteStreams.push(ne);var Q=new Event("addstream");Q.stream=ne,x.dispatchEvent(Q)}})})}});var we=ie.RTCPeerConnection.prototype.setRemoteDescription;ie.RTCPeerConnection.prototype.setRemoteDescription=function(){var ue=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(x){x.streams.forEach(function(O){if(ue._remoteStreams||(ue._remoteStreams=[]),!(ue._remoteStreams.indexOf(O)>=0)){ue._remoteStreams.push(O);var ne=new Event("addstream");ne.stream=O,ue.dispatchEvent(ne)}})}),we.apply(ue,arguments)}}}function w(ie){if(!((typeof ie>"u"?"undefined":l(ie))!=="object"||!ie.RTCPeerConnection)){var we=ie.RTCPeerConnection.prototype,Ve=we.createOffer,ue=we.createAnswer,x=we.setLocalDescription,O=we.setRemoteDescription,ne=we.addIceCandidate;we.createOffer=function(se,Ze){var Qe=arguments.length>=2?arguments[2]:arguments[0],M=Ve.apply(this,[Qe]);return Ze?(M.then(se,Ze),Promise.resolve()):M},we.createAnswer=function(se,Ze){var Qe=arguments.length>=2?arguments[2]:arguments[0],M=ue.apply(this,[Qe]);return Ze?(M.then(se,Ze),Promise.resolve()):M};var Q=function(se,Ze,Qe){var M=x.apply(this,[se]);return Qe?(M.then(Ze,Qe),Promise.resolve()):M};we.setLocalDescription=Q,Q=function(se,Ze,Qe){var M=O.apply(this,[se]);return Qe?(M.then(Ze,Qe),Promise.resolve()):M},we.setRemoteDescription=Q,Q=function(se,Ze,Qe){var M=ne.apply(this,[se]);return Qe?(M.then(Ze,Qe),Promise.resolve()):M},we.addIceCandidate=Q}}function g(ie){var we=ie&&ie.navigator;if(we.mediaDevices&&we.mediaDevices.getUserMedia){var Ve=we.mediaDevices,ue=Ve.getUserMedia.bind(Ve);we.mediaDevices.getUserMedia=function(x){return ue(p(x))}}!we.getUserMedia&&we.mediaDevices&&we.mediaDevices.getUserMedia&&(we.getUserMedia=(function(O,ne,Q){we.mediaDevices.getUserMedia(O).then(ne,Q)}).bind(we))}function p(ie){return ie&&ie.video!==void 0?Object.assign({},ie,{video:c.compactObject(ie.video)}):ie}function te(ie){var we=ie.RTCPeerConnection;ie.RTCPeerConnection=function(ue,x){if(ue&&ue.iceServers){for(var O=[],ne=0;ne<ue.iceServers.length;ne++){var Q=ue.iceServers[ne];!Q.hasOwnProperty("urls")&&Q.hasOwnProperty("url")?(c.deprecated("RTCIceServer.url","RTCIceServer.urls"),Q=JSON.parse(JSON.stringify(Q)),Q.urls=Q.url,delete Q.url,O.push(Q)):O.push(ue.iceServers[ne])}ue.iceServers=O}return new we(ue,x)},ie.RTCPeerConnection.prototype=we.prototype,"generateCertificate"in ie.RTCPeerConnection&&Object.defineProperty(ie.RTCPeerConnection,"generateCertificate",{get:function(){return we.generateCertificate}})}function ae(ie){(typeof ie>"u"?"undefined":l(ie))==="object"&&ie.RTCTrackEvent&&"receiver"in ie.RTCTrackEvent.prototype&&!("transceiver"in ie.RTCTrackEvent.prototype)&&Object.defineProperty(ie.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function de(ie){var we=ie.RTCPeerConnection.prototype.createOffer;ie.RTCPeerConnection.prototype.createOffer=function(ue){if(ue){typeof ue.offerToReceiveAudio<"u"&&(ue.offerToReceiveAudio=!!ue.offerToReceiveAudio);var x=this.getTransceivers().find(function(ne){return ne.receiver.track.kind==="audio"});ue.offerToReceiveAudio===!1&&x?x.direction==="sendrecv"?x.setDirection?x.setDirection("sendonly"):x.direction="sendonly":x.direction==="recvonly"&&(x.setDirection?x.setDirection("inactive"):x.direction="inactive"):ue.offerToReceiveAudio===!0&&!x&&this.addTransceiver("audio"),typeof ue.offerToReceiveVideo<"u"&&(ue.offerToReceiveVideo=!!ue.offerToReceiveVideo);var O=this.getTransceivers().find(function(ne){return ne.receiver.track.kind==="video"});ue.offerToReceiveVideo===!1&&O?O.direction==="sendrecv"?O.setDirection?O.setDirection("sendonly"):O.direction="sendonly":O.direction==="recvonly"&&(O.setDirection?O.setDirection("inactive"):O.direction="inactive"):ue.offerToReceiveVideo===!0&&!O&&this.addTransceiver("video")}return we.apply(this,arguments)}}},{"../utils":15}],15:[function(t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(ue){return Ni(ue)}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":Ni(ue)};o.extractVersion=C,o.wrapPeerConnectionEvent=y,o.disableLog=w,o.disableWarnings=g,o.log=p,o.deprecated=te,o.detectBrowser=ae,o.compactObject=ie,o.walkStats=we,o.filterStats=Ve;function d(ue,x,O){return x in ue?Object.defineProperty(ue,x,{value:O,enumerable:!0,configurable:!0,writable:!0}):ue[x]=O,ue}var c=!0,E=!0;function C(ue,x,O){var ne=ue.match(x);return ne&&ne.length>=O&&parseInt(ne[O],10)}function y(ue,x,O){if(ue.RTCPeerConnection){var ne=ue.RTCPeerConnection.prototype,Q=ne.addEventListener;ne.addEventListener=function(se,Ze){if(se!==x)return Q.apply(this,arguments);var Qe=function(Te){var ze=O(Te);ze&&Ze(ze)};return this._eventMap=this._eventMap||{},this._eventMap[Ze]=Qe,Q.apply(this,[se,Qe])};var ye=ne.removeEventListener;ne.removeEventListener=function(se,Ze){if(se!==x||!this._eventMap||!this._eventMap[Ze])return ye.apply(this,arguments);var Qe=this._eventMap[Ze];return delete this._eventMap[Ze],ye.apply(this,[se,Qe])},Object.defineProperty(ne,"on"+x,{get:function(){return this["_on"+x]},set:function(Ze){this["_on"+x]&&(this.removeEventListener(x,this["_on"+x]),delete this["_on"+x]),Ze&&this.addEventListener(x,this["_on"+x]=Ze)},enumerable:!0,configurable:!0})}}function w(ue){return typeof ue!="boolean"?new Error("Argument type: "+(typeof ue>"u"?"undefined":l(ue))+". Please use a boolean."):(c=ue,ue?"adapter.js logging disabled":"adapter.js logging enabled")}function g(ue){return typeof ue!="boolean"?new Error("Argument type: "+(typeof ue>"u"?"undefined":l(ue))+". Please use a boolean."):(E=!ue,"adapter.js deprecation warnings "+(ue?"disabled":"enabled"))}function p(){if((typeof window>"u"?"undefined":l(window))==="object"){if(c)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function te(ue,x){E&&console.warn(ue+" is deprecated, please use "+x+" instead.")}function ae(ue){var x=ue.navigator,O={browser:null,version:null};if(typeof ue>"u"||!ue.navigator)return O.browser="Not a browser.",O;if(x.mozGetUserMedia)O.browser="firefox",O.version=C(x.userAgent,/Firefox\/(\d+)\./,1);else if(x.webkitGetUserMedia||ue.isSecureContext===!1&&ue.webkitRTCPeerConnection&&!ue.RTCIceGatherer)O.browser="chrome",O.version=C(x.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(x.mediaDevices&&x.userAgent.match(/Edge\/(\d+).(\d+)$/))O.browser="edge",O.version=C(x.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(ue.RTCPeerConnection&&x.userAgent.match(/AppleWebKit\/(\d+)\./))O.browser="safari",O.version=C(x.userAgent,/AppleWebKit\/(\d+)\./,1),O.supportsUnifiedPlan=ue.RTCRtpTransceiver&&"currentDirection"in ue.RTCRtpTransceiver.prototype;else return O.browser="Not a supported browser.",O;return O}function de(ue){return Object.prototype.toString.call(ue)==="[object Object]"}function ie(ue){return de(ue)?Object.keys(ue).reduce(function(x,O){var ne=de(ue[O]),Q=ne?ie(ue[O]):ue[O],ye=ne&&!Object.keys(Q).length;return Q===void 0||ye?x:Object.assign(x,d({},O,Q))},{}):ue}function we(ue,x,O){!x||O.has(x.id)||(O.set(x.id,x),Object.keys(x).forEach(function(ne){ne.endsWith("Id")?we(ue,ue.get(x[ne]),O):ne.endsWith("Ids")&&x[ne].forEach(function(Q){we(ue,ue.get(Q),O)})}))}function Ve(ue,x,O){var ne=O?"outbound-rtp":"inbound-rtp",Q=new Map;if(x===null)return Q;var ye=[];return ue.forEach(function(se){se.type==="track"&&se.trackIdentifier===x.id&&ye.push(se)}),ye.forEach(function(se){ue.forEach(function(Ze){Ze.type===ne&&Ze.trackId===se.id&&we(ue,Ze,Q)})}),Q}},{}],16:[function(t,n,o){var l=t("sdp");function d(p){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[p.type]||p.type}function c(p,te,ae,de,ie){var we=l.writeRtpDescription(p.kind,te);if(we+=l.writeIceParameters(p.iceGatherer.getLocalParameters()),we+=l.writeDtlsParameters(p.dtlsTransport.getLocalParameters(),ae==="offer"?"actpass":ie||"active"),we+="a=mid:"+p.mid+`\r
`,p.rtpSender&&p.rtpReceiver?we+=`a=sendrecv\r
`:p.rtpSender?we+=`a=sendonly\r
`:p.rtpReceiver?we+=`a=recvonly\r
`:we+=`a=inactive\r
`,p.rtpSender){var Ve=p.rtpSender._initialTrackId||p.rtpSender.track.id;p.rtpSender._initialTrackId=Ve;var ue="msid:"+(de?de.id:"-")+" "+Ve+`\r
`;we+="a="+ue,we+="a=ssrc:"+p.sendEncodingParameters[0].ssrc+" "+ue,p.sendEncodingParameters[0].rtx&&(we+="a=ssrc:"+p.sendEncodingParameters[0].rtx.ssrc+" "+ue,we+="a=ssrc-group:FID "+p.sendEncodingParameters[0].ssrc+" "+p.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return we+="a=ssrc:"+p.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+`\r
`,p.rtpSender&&p.sendEncodingParameters[0].rtx&&(we+="a=ssrc:"+p.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+`\r
`),we}function E(p,te){var ae=!1;return p=JSON.parse(JSON.stringify(p)),p.filter(function(de){if(de&&(de.urls||de.url)){var ie=de.urls||de.url;de.url&&!de.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var we=typeof ie=="string";return we&&(ie=[ie]),ie=ie.filter(function(Ve){var ue=Ve.indexOf("turn:")===0&&Ve.indexOf("transport=udp")!==-1&&Ve.indexOf("turn:[")===-1&&!ae;return ue?(ae=!0,!0):Ve.indexOf("stun:")===0&&te>=14393&&Ve.indexOf("?transport=udp")===-1}),delete de.url,de.urls=we?ie[0]:ie,!!ie.length}})}function C(p,te){var ae={codecs:[],headerExtensions:[],fecMechanisms:[]},de=function(Ve,ue){Ve=parseInt(Ve,10);for(var x=0;x<ue.length;x++)if(ue[x].payloadType===Ve||ue[x].preferredPayloadType===Ve)return ue[x]},ie=function(Ve,ue,x,O){var ne=de(Ve.parameters.apt,x),Q=de(ue.parameters.apt,O);return ne&&Q&&ne.name.toLowerCase()===Q.name.toLowerCase()};return p.codecs.forEach(function(we){for(var Ve=0;Ve<te.codecs.length;Ve++){var ue=te.codecs[Ve];if(we.name.toLowerCase()===ue.name.toLowerCase()&&we.clockRate===ue.clockRate){if(we.name.toLowerCase()==="rtx"&&we.parameters&&ue.parameters.apt&&!ie(we,ue,p.codecs,te.codecs))continue;ue=JSON.parse(JSON.stringify(ue)),ue.numChannels=Math.min(we.numChannels,ue.numChannels),ae.codecs.push(ue),ue.rtcpFeedback=ue.rtcpFeedback.filter(function(x){for(var O=0;O<we.rtcpFeedback.length;O++)if(we.rtcpFeedback[O].type===x.type&&we.rtcpFeedback[O].parameter===x.parameter)return!0;return!1});break}}}),p.headerExtensions.forEach(function(we){for(var Ve=0;Ve<te.headerExtensions.length;Ve++){var ue=te.headerExtensions[Ve];if(we.uri===ue.uri){ae.headerExtensions.push(ue);break}}}),ae}function y(p,te,ae){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[te][p].indexOf(ae)!==-1}function w(p,te){var ae=p.getRemoteCandidates().find(function(de){return te.foundation===de.foundation&&te.ip===de.ip&&te.port===de.port&&te.priority===de.priority&&te.protocol===de.protocol&&te.type===de.type});return ae||p.addRemoteCandidate(te),!ae}function g(p,te){var ae=new Error(te);return ae.name=p,ae.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[p],ae}n.exports=function(p,te){function ae(x,O){O.addTrack(x),O.dispatchEvent(new p.MediaStreamTrackEvent("addtrack",{track:x}))}function de(x,O){O.removeTrack(x),O.dispatchEvent(new p.MediaStreamTrackEvent("removetrack",{track:x}))}function ie(x,O,ne,Q){var ye=new Event("track");ye.track=O,ye.receiver=ne,ye.transceiver={receiver:ne},ye.streams=Q,p.setTimeout(function(){x._dispatchEvent("track",ye)})}var we=function(O){var ne=this,Q=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(se){ne[se]=Q[se].bind(Q)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",O=JSON.parse(JSON.stringify(O||{})),this.usingBundle=O.bundlePolicy==="max-bundle",O.rtcpMuxPolicy==="negotiate")throw g("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(O.rtcpMuxPolicy||(O.rtcpMuxPolicy="require"),O.iceTransportPolicy){case"all":case"relay":break;default:O.iceTransportPolicy="all";break}switch(O.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:O.bundlePolicy="balanced";break}if(O.iceServers=E(O.iceServers||[],te),this._iceGatherers=[],O.iceCandidatePoolSize)for(var ye=O.iceCandidatePoolSize;ye>0;ye--)this._iceGatherers.push(new p.RTCIceGatherer({iceServers:O.iceServers,gatherPolicy:O.iceTransportPolicy}));else O.iceCandidatePoolSize=0;this._config=O,this.transceivers=[],this._sdpSessionId=l.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(we.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(we.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),we.prototype.onicecandidate=null,we.prototype.onaddstream=null,we.prototype.ontrack=null,we.prototype.onremovestream=null,we.prototype.onsignalingstatechange=null,we.prototype.oniceconnectionstatechange=null,we.prototype.onconnectionstatechange=null,we.prototype.onicegatheringstatechange=null,we.prototype.onnegotiationneeded=null,we.prototype.ondatachannel=null,we.prototype._dispatchEvent=function(x,O){this._isClosed||(this.dispatchEvent(O),typeof this["on"+x]=="function"&&this["on"+x](O))},we.prototype._emitGatheringStateChange=function(){var x=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",x)},we.prototype.getConfiguration=function(){return this._config},we.prototype.getLocalStreams=function(){return this.localStreams},we.prototype.getRemoteStreams=function(){return this.remoteStreams},we.prototype._createTransceiver=function(x,O){var ne=this.transceivers.length>0,Q={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:x,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&ne)Q.iceTransport=this.transceivers[0].iceTransport,Q.dtlsTransport=this.transceivers[0].dtlsTransport;else{var ye=this._createIceAndDtlsTransports();Q.iceTransport=ye.iceTransport,Q.dtlsTransport=ye.dtlsTransport}return O||this.transceivers.push(Q),Q},we.prototype.addTrack=function(x,O){if(this._isClosed)throw g("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var ne=this.transceivers.find(function(se){return se.track===x});if(ne)throw g("InvalidAccessError","Track already exists.");for(var Q,ye=0;ye<this.transceivers.length;ye++)!this.transceivers[ye].track&&this.transceivers[ye].kind===x.kind&&(Q=this.transceivers[ye]);return Q||(Q=this._createTransceiver(x.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(O)===-1&&this.localStreams.push(O),Q.track=x,Q.stream=O,Q.rtpSender=new p.RTCRtpSender(x,Q.dtlsTransport),Q.rtpSender},we.prototype.addStream=function(x){var O=this;if(te>=15025)x.getTracks().forEach(function(Q){O.addTrack(Q,x)});else{var ne=x.clone();x.getTracks().forEach(function(Q,ye){var se=ne.getTracks()[ye];Q.addEventListener("enabled",function(Ze){se.enabled=Ze.enabled})}),ne.getTracks().forEach(function(Q){O.addTrack(Q,ne)})}},we.prototype.removeTrack=function(x){if(this._isClosed)throw g("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(x instanceof p.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var O=this.transceivers.find(function(ye){return ye.rtpSender===x});if(!O)throw g("InvalidAccessError","Sender was not created by this connection.");var ne=O.stream;O.rtpSender.stop(),O.rtpSender=null,O.track=null,O.stream=null;var Q=this.transceivers.map(function(ye){return ye.stream});Q.indexOf(ne)===-1&&this.localStreams.indexOf(ne)>-1&&this.localStreams.splice(this.localStreams.indexOf(ne),1),this._maybeFireNegotiationNeeded()},we.prototype.removeStream=function(x){var O=this;x.getTracks().forEach(function(ne){var Q=O.getSenders().find(function(ye){return ye.track===ne});Q&&O.removeTrack(Q)})},we.prototype.getSenders=function(){return this.transceivers.filter(function(x){return!!x.rtpSender}).map(function(x){return x.rtpSender})},we.prototype.getReceivers=function(){return this.transceivers.filter(function(x){return!!x.rtpReceiver}).map(function(x){return x.rtpReceiver})},we.prototype._createIceGatherer=function(x,O){var ne=this;if(O&&x>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var Q=new p.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(Q,"state",{value:"new",writable:!0}),this.transceivers[x].bufferedCandidateEvents=[],this.transceivers[x].bufferCandidates=function(ye){var se=!ye.candidate||Object.keys(ye.candidate).length===0;Q.state=se?"completed":"gathering",ne.transceivers[x].bufferedCandidateEvents!==null&&ne.transceivers[x].bufferedCandidateEvents.push(ye)},Q.addEventListener("localcandidate",this.transceivers[x].bufferCandidates),Q},we.prototype._gather=function(x,O){var ne=this,Q=this.transceivers[O].iceGatherer;if(!Q.onlocalcandidate){var ye=this.transceivers[O].bufferedCandidateEvents;this.transceivers[O].bufferedCandidateEvents=null,Q.removeEventListener("localcandidate",this.transceivers[O].bufferCandidates),Q.onlocalcandidate=function(se){if(!(ne.usingBundle&&O>0)){var Ze=new Event("icecandidate");Ze.candidate={sdpMid:x,sdpMLineIndex:O};var Qe=se.candidate,M=!Qe||Object.keys(Qe).length===0;if(M)(Q.state==="new"||Q.state==="gathering")&&(Q.state="completed");else{Q.state==="new"&&(Q.state="gathering"),Qe.component=1,Qe.ufrag=Q.getLocalParameters().usernameFragment;var Te=l.writeCandidate(Qe);Ze.candidate=Object.assign(Ze.candidate,l.parseCandidate(Te)),Ze.candidate.candidate=Te,Ze.candidate.toJSON=function(){return{candidate:Ze.candidate.candidate,sdpMid:Ze.candidate.sdpMid,sdpMLineIndex:Ze.candidate.sdpMLineIndex,usernameFragment:Ze.candidate.usernameFragment}}}var ze=l.getMediaSections(ne._localDescription.sdp);M?ze[Ze.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:ze[Ze.candidate.sdpMLineIndex]+="a="+Ze.candidate.candidate+`\r
`,ne._localDescription.sdp=l.getDescription(ne._localDescription.sdp)+ze.join("");var oi=ne.transceivers.every(function(wi){return wi.iceGatherer&&wi.iceGatherer.state==="completed"});ne.iceGatheringState!=="gathering"&&(ne.iceGatheringState="gathering",ne._emitGatheringStateChange()),M||ne._dispatchEvent("icecandidate",Ze),oi&&(ne._dispatchEvent("icecandidate",new Event("icecandidate")),ne.iceGatheringState="complete",ne._emitGatheringStateChange())}},p.setTimeout(function(){ye.forEach(function(se){Q.onlocalcandidate(se)})},0)}},we.prototype._createIceAndDtlsTransports=function(){var x=this,O=new p.RTCIceTransport(null);O.onicestatechange=function(){x._updateIceConnectionState(),x._updateConnectionState()};var ne=new p.RTCDtlsTransport(O);return ne.ondtlsstatechange=function(){x._updateConnectionState()},ne.onerror=function(){Object.defineProperty(ne,"state",{value:"failed",writable:!0}),x._updateConnectionState()},{iceTransport:O,dtlsTransport:ne}},we.prototype._disposeIceAndDtlsTransports=function(x){var O=this.transceivers[x].iceGatherer;O&&(delete O.onlocalcandidate,delete this.transceivers[x].iceGatherer);var ne=this.transceivers[x].iceTransport;ne&&(delete ne.onicestatechange,delete this.transceivers[x].iceTransport);var Q=this.transceivers[x].dtlsTransport;Q&&(delete Q.ondtlsstatechange,delete Q.onerror,delete this.transceivers[x].dtlsTransport)},we.prototype._transceive=function(x,O,ne){var Q=C(x.localCapabilities,x.remoteCapabilities);O&&x.rtpSender&&(Q.encodings=x.sendEncodingParameters,Q.rtcp={cname:l.localCName,compound:x.rtcpParameters.compound},x.recvEncodingParameters.length&&(Q.rtcp.ssrc=x.recvEncodingParameters[0].ssrc),x.rtpSender.send(Q)),ne&&x.rtpReceiver&&Q.codecs.length>0&&(x.kind==="video"&&x.recvEncodingParameters&&te<15019&&x.recvEncodingParameters.forEach(function(ye){delete ye.rtx}),x.recvEncodingParameters.length?Q.encodings=x.recvEncodingParameters:Q.encodings=[{}],Q.rtcp={compound:x.rtcpParameters.compound},x.rtcpParameters.cname&&(Q.rtcp.cname=x.rtcpParameters.cname),x.sendEncodingParameters.length&&(Q.rtcp.ssrc=x.sendEncodingParameters[0].ssrc),x.rtpReceiver.receive(Q))},we.prototype.setLocalDescription=function(x){var O=this;if(["offer","answer"].indexOf(x.type)===-1)return Promise.reject(g("TypeError",'Unsupported type "'+x.type+'"'));if(!y("setLocalDescription",x.type,O.signalingState)||O._isClosed)return Promise.reject(g("InvalidStateError","Can not set local "+x.type+" in state "+O.signalingState));var ne,Q;if(x.type==="offer")ne=l.splitSections(x.sdp),Q=ne.shift(),ne.forEach(function(se,Ze){var Qe=l.parseRtpParameters(se);O.transceivers[Ze].localCapabilities=Qe}),O.transceivers.forEach(function(se,Ze){O._gather(se.mid,Ze)});else if(x.type==="answer"){ne=l.splitSections(O._remoteDescription.sdp),Q=ne.shift();var ye=l.matchPrefix(Q,"a=ice-lite").length>0;ne.forEach(function(se,Ze){var Qe=O.transceivers[Ze],M=Qe.iceGatherer,Te=Qe.iceTransport,ze=Qe.dtlsTransport,oi=Qe.localCapabilities,wi=Qe.remoteCapabilities,ui=l.isRejected(se)&&l.matchPrefix(se,"a=bundle-only").length===0;if(!ui&&!Qe.rejected){var di=l.getIceParameters(se,Q),zi=l.getDtlsParameters(se,Q);ye&&(zi.role="server"),(!O.usingBundle||Ze===0)&&(O._gather(Qe.mid,Ze),Te.state==="new"&&Te.start(M,di,ye?"controlling":"controlled"),ze.state==="new"&&ze.start(zi));var $e=C(oi,wi);O._transceive(Qe,$e.codecs.length>0,!1)}})}return O._localDescription={type:x.type,sdp:x.sdp},x.type==="offer"?O._updateSignalingState("have-local-offer"):O._updateSignalingState("stable"),Promise.resolve()},we.prototype.setRemoteDescription=function(x){var O=this;if(["offer","answer"].indexOf(x.type)===-1)return Promise.reject(g("TypeError",'Unsupported type "'+x.type+'"'));if(!y("setRemoteDescription",x.type,O.signalingState)||O._isClosed)return Promise.reject(g("InvalidStateError","Can not set remote "+x.type+" in state "+O.signalingState));var ne={};O.remoteStreams.forEach(function(Te){ne[Te.id]=Te});var Q=[],ye=l.splitSections(x.sdp),se=ye.shift(),Ze=l.matchPrefix(se,"a=ice-lite").length>0,Qe=l.matchPrefix(se,"a=group:BUNDLE ").length>0;O.usingBundle=Qe;var M=l.matchPrefix(se,"a=ice-options:")[0];return M?O.canTrickleIceCandidates=M.substr(14).split(" ").indexOf("trickle")>=0:O.canTrickleIceCandidates=!1,ye.forEach(function(Te,ze){var oi=l.splitLines(Te),wi=l.getKind(Te),ui=l.isRejected(Te)&&l.matchPrefix(Te,"a=bundle-only").length===0,di=oi[0].substr(2).split(" ")[2],zi=l.getDirection(Te,se),$e=l.parseMsid(Te),st=l.getMid(Te)||l.generateIdentifier();if(ui||wi==="application"&&(di==="DTLS/SCTP"||di==="UDP/DTLS/SCTP")){O.transceivers[ze]={mid:st,kind:wi,protocol:di,rejected:!0};return}!ui&&O.transceivers[ze]&&O.transceivers[ze].rejected&&(O.transceivers[ze]=O._createTransceiver(wi,!0));var Ke,Ne,at,Ut,Wt,kt,ee,me,P,Y=l.parseRtpParameters(Te),Oe,N;ui||(Oe=l.getIceParameters(Te,se),N=l.getDtlsParameters(Te,se),N.role="client"),ee=l.parseRtpEncodingParameters(Te);var fe=l.parseRtcpParameters(Te),I=l.matchPrefix(Te,"a=end-of-candidates",se).length>0,L=l.matchPrefix(Te,"a=candidate:").map(function(et){return l.parseCandidate(et)}).filter(function(et){return et.component===1});if((x.type==="offer"||x.type==="answer")&&!ui&&Qe&&ze>0&&O.transceivers[ze]&&(O._disposeIceAndDtlsTransports(ze),O.transceivers[ze].iceGatherer=O.transceivers[0].iceGatherer,O.transceivers[ze].iceTransport=O.transceivers[0].iceTransport,O.transceivers[ze].dtlsTransport=O.transceivers[0].dtlsTransport,O.transceivers[ze].rtpSender&&O.transceivers[ze].rtpSender.setTransport(O.transceivers[0].dtlsTransport),O.transceivers[ze].rtpReceiver&&O.transceivers[ze].rtpReceiver.setTransport(O.transceivers[0].dtlsTransport)),x.type==="offer"&&!ui){Ke=O.transceivers[ze]||O._createTransceiver(wi),Ke.mid=st,Ke.iceGatherer||(Ke.iceGatherer=O._createIceGatherer(ze,Qe)),L.length&&Ke.iceTransport.state==="new"&&(I&&(!Qe||ze===0)?Ke.iceTransport.setRemoteCandidates(L):L.forEach(function(et){w(Ke.iceTransport,et)})),me=p.RTCRtpReceiver.getCapabilities(wi),te<15019&&(me.codecs=me.codecs.filter(function(et){return et.name!=="rtx"})),kt=Ke.sendEncodingParameters||[{ssrc:(2*ze+2)*1001}];var re=!1;if(zi==="sendrecv"||zi==="sendonly"){if(re=!Ke.rtpReceiver,Wt=Ke.rtpReceiver||new p.RTCRtpReceiver(Ke.dtlsTransport,wi),re){var J;P=Wt.track,$e&&$e.stream==="-"||($e?(ne[$e.stream]||(ne[$e.stream]=new p.MediaStream,Object.defineProperty(ne[$e.stream],"id",{get:function(){return $e.stream}})),Object.defineProperty(P,"id",{get:function(){return $e.track}}),J=ne[$e.stream]):(ne.default||(ne.default=new p.MediaStream),J=ne.default)),J&&(ae(P,J),Ke.associatedRemoteMediaStreams.push(J)),Q.push([P,Wt,J])}}else Ke.rtpReceiver&&Ke.rtpReceiver.track&&(Ke.associatedRemoteMediaStreams.forEach(function(et){var R=et.getTracks().find(function(He){return He.id===Ke.rtpReceiver.track.id});R&&de(R,et)}),Ke.associatedRemoteMediaStreams=[]);Ke.localCapabilities=me,Ke.remoteCapabilities=Y,Ke.rtpReceiver=Wt,Ke.rtcpParameters=fe,Ke.sendEncodingParameters=kt,Ke.recvEncodingParameters=ee,O._transceive(O.transceivers[ze],!1,re)}else if(x.type==="answer"&&!ui){Ke=O.transceivers[ze],Ne=Ke.iceGatherer,at=Ke.iceTransport,Ut=Ke.dtlsTransport,Wt=Ke.rtpReceiver,kt=Ke.sendEncodingParameters,me=Ke.localCapabilities,O.transceivers[ze].recvEncodingParameters=ee,O.transceivers[ze].remoteCapabilities=Y,O.transceivers[ze].rtcpParameters=fe,L.length&&at.state==="new"&&((Ze||I)&&(!Qe||ze===0)?at.setRemoteCandidates(L):L.forEach(function(et){w(Ke.iceTransport,et)})),(!Qe||ze===0)&&(at.state==="new"&&at.start(Ne,Oe,"controlling"),Ut.state==="new"&&Ut.start(N));var De=C(Ke.localCapabilities,Ke.remoteCapabilities),Ye=De.codecs.filter(function(et){return et.name.toLowerCase()==="rtx"}).length;!Ye&&Ke.sendEncodingParameters[0].rtx&&delete Ke.sendEncodingParameters[0].rtx,O._transceive(Ke,zi==="sendrecv"||zi==="recvonly",zi==="sendrecv"||zi==="sendonly"),Wt&&(zi==="sendrecv"||zi==="sendonly")?(P=Wt.track,$e?(ne[$e.stream]||(ne[$e.stream]=new p.MediaStream),ae(P,ne[$e.stream]),Q.push([P,Wt,ne[$e.stream]])):(ne.default||(ne.default=new p.MediaStream),ae(P,ne.default),Q.push([P,Wt,ne.default]))):delete Ke.rtpReceiver}}),O._dtlsRole===void 0&&(O._dtlsRole=x.type==="offer"?"active":"passive"),O._remoteDescription={type:x.type,sdp:x.sdp},x.type==="offer"?O._updateSignalingState("have-remote-offer"):O._updateSignalingState("stable"),Object.keys(ne).forEach(function(Te){var ze=ne[Te];if(ze.getTracks().length){if(O.remoteStreams.indexOf(ze)===-1){O.remoteStreams.push(ze);var oi=new Event("addstream");oi.stream=ze,p.setTimeout(function(){O._dispatchEvent("addstream",oi)})}Q.forEach(function(wi){var ui=wi[0],di=wi[1];ze.id===wi[2].id&&ie(O,ui,di,[ze])})}}),Q.forEach(function(Te){Te[2]||ie(O,Te[0],Te[1],[])}),p.setTimeout(function(){O&&O.transceivers&&O.transceivers.forEach(function(Te){Te.iceTransport&&Te.iceTransport.state==="new"&&Te.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),Te.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},we.prototype.close=function(){this.transceivers.forEach(function(x){x.iceTransport&&x.iceTransport.stop(),x.dtlsTransport&&x.dtlsTransport.stop(),x.rtpSender&&x.rtpSender.stop(),x.rtpReceiver&&x.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},we.prototype._updateSignalingState=function(x){this.signalingState=x;var O=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",O)},we.prototype._maybeFireNegotiationNeeded=function(){var x=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,p.setTimeout(function(){if(x.needNegotiation){x.needNegotiation=!1;var O=new Event("negotiationneeded");x._dispatchEvent("negotiationneeded",O)}},0))},we.prototype._updateIceConnectionState=function(){var x,O={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Q){Q.iceTransport&&!Q.rejected&&O[Q.iceTransport.state]++}),x="new",O.failed>0?x="failed":O.checking>0?x="checking":O.disconnected>0?x="disconnected":O.new>0?x="new":O.connected>0?x="connected":O.completed>0&&(x="completed"),x!==this.iceConnectionState){this.iceConnectionState=x;var ne=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",ne)}},we.prototype._updateConnectionState=function(){var x,O={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(Q){Q.iceTransport&&Q.dtlsTransport&&!Q.rejected&&(O[Q.iceTransport.state]++,O[Q.dtlsTransport.state]++)}),O.connected+=O.completed,x="new",O.failed>0?x="failed":O.connecting>0?x="connecting":O.disconnected>0?x="disconnected":O.new>0?x="new":O.connected>0&&(x="connected"),x!==this.connectionState){this.connectionState=x;var ne=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",ne)}},we.prototype.createOffer=function(){var x=this;if(x._isClosed)return Promise.reject(g("InvalidStateError","Can not call createOffer after close"));var O=x.transceivers.filter(function(Ze){return Ze.kind==="audio"}).length,ne=x.transceivers.filter(function(Ze){return Ze.kind==="video"}).length,Q=arguments[0];if(Q){if(Q.mandatory||Q.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");Q.offerToReceiveAudio!==void 0&&(Q.offerToReceiveAudio===!0?O=1:Q.offerToReceiveAudio===!1?O=0:O=Q.offerToReceiveAudio),Q.offerToReceiveVideo!==void 0&&(Q.offerToReceiveVideo===!0?ne=1:Q.offerToReceiveVideo===!1?ne=0:ne=Q.offerToReceiveVideo)}for(x.transceivers.forEach(function(Ze){Ze.kind==="audio"?(O--,O<0&&(Ze.wantReceive=!1)):Ze.kind==="video"&&(ne--,ne<0&&(Ze.wantReceive=!1))});O>0||ne>0;)O>0&&(x._createTransceiver("audio"),O--),ne>0&&(x._createTransceiver("video"),ne--);var ye=l.writeSessionBoilerplate(x._sdpSessionId,x._sdpSessionVersion++);x.transceivers.forEach(function(Ze,Qe){var M=Ze.track,Te=Ze.kind,ze=Ze.mid||l.generateIdentifier();Ze.mid=ze,Ze.iceGatherer||(Ze.iceGatherer=x._createIceGatherer(Qe,x.usingBundle));var oi=p.RTCRtpSender.getCapabilities(Te);te<15019&&(oi.codecs=oi.codecs.filter(function(ui){return ui.name!=="rtx"})),oi.codecs.forEach(function(ui){ui.name==="H264"&&ui.parameters["level-asymmetry-allowed"]===void 0&&(ui.parameters["level-asymmetry-allowed"]="1"),Ze.remoteCapabilities&&Ze.remoteCapabilities.codecs&&Ze.remoteCapabilities.codecs.forEach(function(di){ui.name.toLowerCase()===di.name.toLowerCase()&&ui.clockRate===di.clockRate&&(ui.preferredPayloadType=di.payloadType)})}),oi.headerExtensions.forEach(function(ui){var di=Ze.remoteCapabilities&&Ze.remoteCapabilities.headerExtensions||[];di.forEach(function(zi){ui.uri===zi.uri&&(ui.id=zi.id)})});var wi=Ze.sendEncodingParameters||[{ssrc:(2*Qe+1)*1001}];M&&te>=15019&&Te==="video"&&!wi[0].rtx&&(wi[0].rtx={ssrc:wi[0].ssrc+1}),Ze.wantReceive&&(Ze.rtpReceiver=new p.RTCRtpReceiver(Ze.dtlsTransport,Te)),Ze.localCapabilities=oi,Ze.sendEncodingParameters=wi}),x._config.bundlePolicy!=="max-compat"&&(ye+="a=group:BUNDLE "+x.transceivers.map(function(Ze){return Ze.mid}).join(" ")+`\r
`),ye+=`a=ice-options:trickle\r
`,x.transceivers.forEach(function(Ze,Qe){ye+=c(Ze,Ze.localCapabilities,"offer",Ze.stream,x._dtlsRole),ye+=`a=rtcp-rsize\r
`,Ze.iceGatherer&&x.iceGatheringState!=="new"&&(Qe===0||!x.usingBundle)&&(Ze.iceGatherer.getLocalCandidates().forEach(function(M){M.component=1,ye+="a="+l.writeCandidate(M)+`\r
`}),Ze.iceGatherer.state==="completed"&&(ye+=`a=end-of-candidates\r
`))});var se=new p.RTCSessionDescription({type:"offer",sdp:ye});return Promise.resolve(se)},we.prototype.createAnswer=function(){var x=this;if(x._isClosed)return Promise.reject(g("InvalidStateError","Can not call createAnswer after close"));if(!(x.signalingState==="have-remote-offer"||x.signalingState==="have-local-pranswer"))return Promise.reject(g("InvalidStateError","Can not call createAnswer in signalingState "+x.signalingState));var O=l.writeSessionBoilerplate(x._sdpSessionId,x._sdpSessionVersion++);x.usingBundle&&(O+="a=group:BUNDLE "+x.transceivers.map(function(ye){return ye.mid}).join(" ")+`\r
`),O+=`a=ice-options:trickle\r
`;var ne=l.getMediaSections(x._remoteDescription.sdp).length;x.transceivers.forEach(function(ye,se){if(!(se+1>ne)){if(ye.rejected){ye.kind==="application"?ye.protocol==="DTLS/SCTP"?O+=`m=application 0 DTLS/SCTP 5000\r
`:O+="m=application 0 "+ye.protocol+` webrtc-datachannel\r
`:ye.kind==="audio"?O+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:ye.kind==="video"&&(O+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),O+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+ye.mid+`\r
`;return}if(ye.stream){var Ze;ye.kind==="audio"?Ze=ye.stream.getAudioTracks()[0]:ye.kind==="video"&&(Ze=ye.stream.getVideoTracks()[0]),Ze&&te>=15019&&ye.kind==="video"&&!ye.sendEncodingParameters[0].rtx&&(ye.sendEncodingParameters[0].rtx={ssrc:ye.sendEncodingParameters[0].ssrc+1})}var Qe=C(ye.localCapabilities,ye.remoteCapabilities),M=Qe.codecs.filter(function(Te){return Te.name.toLowerCase()==="rtx"}).length;!M&&ye.sendEncodingParameters[0].rtx&&delete ye.sendEncodingParameters[0].rtx,O+=c(ye,Qe,"answer",ye.stream,x._dtlsRole),ye.rtcpParameters&&ye.rtcpParameters.reducedSize&&(O+=`a=rtcp-rsize\r
`)}});var Q=new p.RTCSessionDescription({type:"answer",sdp:O});return Promise.resolve(Q)},we.prototype.addIceCandidate=function(x){var O=this,ne;return x&&!(x.sdpMLineIndex!==void 0||x.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(Q,ye){if(O._remoteDescription)if(!x||x.candidate==="")for(var se=0;se<O.transceivers.length&&!(!O.transceivers[se].rejected&&(O.transceivers[se].iceTransport.addRemoteCandidate({}),ne=l.getMediaSections(O._remoteDescription.sdp),ne[se]+=`a=end-of-candidates\r
`,O._remoteDescription.sdp=l.getDescription(O._remoteDescription.sdp)+ne.join(""),O.usingBundle));se++);else{var Ze=x.sdpMLineIndex;if(x.sdpMid){for(var Qe=0;Qe<O.transceivers.length;Qe++)if(O.transceivers[Qe].mid===x.sdpMid){Ze=Qe;break}}var M=O.transceivers[Ze];if(M){if(M.rejected)return Q();var Te=Object.keys(x.candidate).length>0?l.parseCandidate(x.candidate):{};if(Te.protocol==="tcp"&&(Te.port===0||Te.port===9)||Te.component&&Te.component!==1)return Q();if((Ze===0||Ze>0&&M.iceTransport!==O.transceivers[0].iceTransport)&&!w(M.iceTransport,Te))return ye(g("OperationError","Can not add ICE candidate"));var ze=x.candidate.trim();ze.indexOf("a=")===0&&(ze=ze.substr(2)),ne=l.getMediaSections(O._remoteDescription.sdp),ne[Ze]+="a="+(Te.type?ze:"end-of-candidates")+`\r
`,O._remoteDescription.sdp=l.getDescription(O._remoteDescription.sdp)+ne.join("")}else return ye(g("OperationError","Can not add ICE candidate"))}else return ye(g("InvalidStateError","Can not add ICE candidate without a remote description"));Q()})},we.prototype.getStats=function(x){if(x&&x instanceof p.MediaStreamTrack){var O=null;if(this.transceivers.forEach(function(Q){Q.rtpSender&&Q.rtpSender.track===x?O=Q.rtpSender:Q.rtpReceiver&&Q.rtpReceiver.track===x&&(O=Q.rtpReceiver)}),!O)throw g("InvalidAccessError","Invalid selector.");return O.getStats()}var ne=[];return this.transceivers.forEach(function(Q){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(ye){Q[ye]&&ne.push(Q[ye].getStats())})}),Promise.all(ne).then(function(Q){var ye=new Map;return Q.forEach(function(se){se.forEach(function(Ze){ye.set(Ze.id,Ze)})}),ye})};var Ve=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];Ve.forEach(function(x){var O=p[x];if(O&&O.prototype&&O.prototype.getStats){var ne=O.prototype.getStats;O.prototype.getStats=function(){return ne.apply(this).then(function(Q){var ye=new Map;return Object.keys(Q).forEach(function(se){Q[se].type=d(Q[se]),ye.set(se,Q[se])}),ye})}}});var ue=["createOffer","createAnswer"];return ue.forEach(function(x){var O=we.prototype[x];we.prototype[x]=function(){var ne=arguments;return typeof ne[0]=="function"||typeof ne[1]=="function"?O.apply(this,[arguments[2]]).then(function(Q){typeof ne[0]=="function"&&ne[0].apply(null,[Q])},function(Q){typeof ne[1]=="function"&&ne[1].apply(null,[Q])}):O.apply(this,arguments)}}),ue=["setLocalDescription","setRemoteDescription","addIceCandidate"],ue.forEach(function(x){var O=we.prototype[x];we.prototype[x]=function(){var ne=arguments;return typeof ne[1]=="function"||typeof ne[2]=="function"?O.apply(this,arguments).then(function(){typeof ne[1]=="function"&&ne[1].apply(null)},function(Q){typeof ne[2]=="function"&&ne[2].apply(null,[Q])}):O.apply(this,arguments)}}),["getStats"].forEach(function(x){var O=we.prototype[x];we.prototype[x]=function(){var ne=arguments;return typeof ne[1]=="function"?O.apply(this,arguments).then(function(){typeof ne[1]=="function"&&ne[1].apply(null)}):O.apply(this,arguments)}}),we}},{sdp:17}],17:[function(t,n,o){var l={};l.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},l.localCName=l.generateIdentifier(),l.splitLines=function(d){return d.trim().split(`
`).map(function(c){return c.trim()})},l.splitSections=function(d){var c=d.split(`
m=`);return c.map(function(E,C){return(C>0?"m="+E:E).trim()+`\r
`})},l.getDescription=function(d){var c=l.splitSections(d);return c&&c[0]},l.getMediaSections=function(d){var c=l.splitSections(d);return c.shift(),c},l.matchPrefix=function(d,c){return l.splitLines(d).filter(function(E){return E.indexOf(c)===0})},l.parseCandidate=function(d){var c;d.indexOf("a=candidate:")===0?c=d.substring(12).split(" "):c=d.substring(10).split(" ");for(var E={foundation:c[0],component:parseInt(c[1],10),protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]},C=8;C<c.length;C+=2)switch(c[C]){case"raddr":E.relatedAddress=c[C+1];break;case"rport":E.relatedPort=parseInt(c[C+1],10);break;case"tcptype":E.tcpType=c[C+1];break;case"ufrag":E.ufrag=c[C+1],E.usernameFragment=c[C+1];break;default:E[c[C]]=c[C+1];break}return E},l.writeCandidate=function(d){var c=[];c.push(d.foundation),c.push(d.component),c.push(d.protocol.toUpperCase()),c.push(d.priority),c.push(d.address||d.ip),c.push(d.port);var E=d.type;return c.push("typ"),c.push(E),E!=="host"&&d.relatedAddress&&d.relatedPort&&(c.push("raddr"),c.push(d.relatedAddress),c.push("rport"),c.push(d.relatedPort)),d.tcpType&&d.protocol.toLowerCase()==="tcp"&&(c.push("tcptype"),c.push(d.tcpType)),(d.usernameFragment||d.ufrag)&&(c.push("ufrag"),c.push(d.usernameFragment||d.ufrag)),"candidate:"+c.join(" ")},l.parseIceOptions=function(d){return d.substr(14).split(" ")},l.parseRtpMap=function(d){var c=d.substr(9).split(" "),E={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),E.name=c[0],E.clockRate=parseInt(c[1],10),E.channels=c.length===3?parseInt(c[2],10):1,E.numChannels=E.channels,E},l.writeRtpMap=function(d){var c=d.payloadType;d.preferredPayloadType!==void 0&&(c=d.preferredPayloadType);var E=d.channels||d.numChannels||1;return"a=rtpmap:"+c+" "+d.name+"/"+d.clockRate+(E!==1?"/"+E:"")+`\r
`},l.parseExtmap=function(d){var c=d.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},l.writeExtmap=function(d){return"a=extmap:"+(d.id||d.preferredId)+(d.direction&&d.direction!=="sendrecv"?"/"+d.direction:"")+" "+d.uri+`\r
`},l.parseFmtp=function(d){for(var c={},E,C=d.substr(d.indexOf(" ")+1).split(";"),y=0;y<C.length;y++)E=C[y].trim().split("="),c[E[0].trim()]=E[1];return c},l.writeFmtp=function(d){var c="",E=d.payloadType;if(d.preferredPayloadType!==void 0&&(E=d.preferredPayloadType),d.parameters&&Object.keys(d.parameters).length){var C=[];Object.keys(d.parameters).forEach(function(y){d.parameters[y]?C.push(y+"="+d.parameters[y]):C.push(y)}),c+="a=fmtp:"+E+" "+C.join(";")+`\r
`}return c},l.parseRtcpFb=function(d){var c=d.substr(d.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},l.writeRtcpFb=function(d){var c="",E=d.payloadType;return d.preferredPayloadType!==void 0&&(E=d.preferredPayloadType),d.rtcpFeedback&&d.rtcpFeedback.length&&d.rtcpFeedback.forEach(function(C){c+="a=rtcp-fb:"+E+" "+C.type+(C.parameter&&C.parameter.length?" "+C.parameter:"")+`\r
`}),c},l.parseSsrcMedia=function(d){var c=d.indexOf(" "),E={ssrc:parseInt(d.substr(7,c-7),10)},C=d.indexOf(":",c);return C>-1?(E.attribute=d.substr(c+1,C-c-1),E.value=d.substr(C+1)):E.attribute=d.substr(c+1),E},l.parseSsrcGroup=function(d){var c=d.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(function(E){return parseInt(E,10)})}},l.getMid=function(d){var c=l.matchPrefix(d,"a=mid:")[0];if(c)return c.substr(6)},l.parseFingerprint=function(d){var c=d.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1]}},l.getDtlsParameters=function(d,c){var E=l.matchPrefix(d+c,"a=fingerprint:");return{role:"auto",fingerprints:E.map(l.parseFingerprint)}},l.writeDtlsParameters=function(d,c){var E="a=setup:"+c+`\r
`;return d.fingerprints.forEach(function(C){E+="a=fingerprint:"+C.algorithm+" "+C.value+`\r
`}),E},l.getIceParameters=function(d,c){var E=l.splitLines(d);E=E.concat(l.splitLines(c));var C={usernameFragment:E.filter(function(y){return y.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:E.filter(function(y){return y.indexOf("a=ice-pwd:")===0})[0].substr(10)};return C},l.writeIceParameters=function(d){return"a=ice-ufrag:"+d.usernameFragment+`\r
a=ice-pwd:`+d.password+`\r
`},l.parseRtpParameters=function(d){for(var c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},E=l.splitLines(d),C=E[0].split(" "),y=3;y<C.length;y++){var w=C[y],g=l.matchPrefix(d,"a=rtpmap:"+w+" ")[0];if(g){var p=l.parseRtpMap(g),te=l.matchPrefix(d,"a=fmtp:"+w+" ");switch(p.parameters=te.length?l.parseFmtp(te[0]):{},p.rtcpFeedback=l.matchPrefix(d,"a=rtcp-fb:"+w+" ").map(l.parseRtcpFb),c.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(p.name.toUpperCase());break}}}return l.matchPrefix(d,"a=extmap:").forEach(function(ae){c.headerExtensions.push(l.parseExtmap(ae))}),c},l.writeRtpDescription=function(d,c){var E="";E+="m="+d+" ",E+=c.codecs.length>0?"9":"0",E+=" UDP/TLS/RTP/SAVPF ",E+=c.codecs.map(function(y){return y.preferredPayloadType!==void 0?y.preferredPayloadType:y.payloadType}).join(" ")+`\r
`,E+=`c=IN IP4 0.0.0.0\r
`,E+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,c.codecs.forEach(function(y){E+=l.writeRtpMap(y),E+=l.writeFmtp(y),E+=l.writeRtcpFb(y)});var C=0;return c.codecs.forEach(function(y){y.maxptime>C&&(C=y.maxptime)}),C>0&&(E+="a=maxptime:"+C+`\r
`),E+=`a=rtcp-mux\r
`,c.headerExtensions&&c.headerExtensions.forEach(function(y){E+=l.writeExtmap(y)}),E},l.parseRtpEncodingParameters=function(d){var c=[],E=l.parseRtpParameters(d),C=E.fecMechanisms.indexOf("RED")!==-1,y=E.fecMechanisms.indexOf("ULPFEC")!==-1,w=l.matchPrefix(d,"a=ssrc:").map(function(de){return l.parseSsrcMedia(de)}).filter(function(de){return de.attribute==="cname"}),g=w.length>0&&w[0].ssrc,p,te=l.matchPrefix(d,"a=ssrc-group:FID").map(function(de){var ie=de.substr(17).split(" ");return ie.map(function(we){return parseInt(we,10)})});te.length>0&&te[0].length>1&&te[0][0]===g&&(p=te[0][1]),E.codecs.forEach(function(de){if(de.name.toUpperCase()==="RTX"&&de.parameters.apt){var ie={ssrc:g,codecPayloadType:parseInt(de.parameters.apt,10)};g&&p&&(ie.rtx={ssrc:p}),c.push(ie),C&&(ie=JSON.parse(JSON.stringify(ie)),ie.fec={ssrc:g,mechanism:y?"red+ulpfec":"red"},c.push(ie))}}),c.length===0&&g&&c.push({ssrc:g});var ae=l.matchPrefix(d,"b=");return ae.length&&(ae[0].indexOf("b=TIAS:")===0?ae=parseInt(ae[0].substr(7),10):ae[0].indexOf("b=AS:")===0?ae=parseInt(ae[0].substr(5),10)*1e3*.95-50*40*8:ae=void 0,c.forEach(function(de){de.maxBitrate=ae})),c},l.parseRtcpParameters=function(d){var c={},E=l.matchPrefix(d,"a=ssrc:").map(function(w){return l.parseSsrcMedia(w)}).filter(function(w){return w.attribute==="cname"})[0];E&&(c.cname=E.value,c.ssrc=E.ssrc);var C=l.matchPrefix(d,"a=rtcp-rsize");c.reducedSize=C.length>0,c.compound=C.length===0;var y=l.matchPrefix(d,"a=rtcp-mux");return c.mux=y.length>0,c},l.parseMsid=function(d){var c,E=l.matchPrefix(d,"a=msid:");if(E.length===1)return c=E[0].substr(7).split(" "),{stream:c[0],track:c[1]};var C=l.matchPrefix(d,"a=ssrc:").map(function(y){return l.parseSsrcMedia(y)}).filter(function(y){return y.attribute==="msid"});if(C.length>0)return c=C[0].value.split(" "),{stream:c[0],track:c[1]}},l.parseSctpDescription=function(d){var c=l.parseMLine(d),E=l.matchPrefix(d,"a=max-message-size:"),C;E.length>0&&(C=parseInt(E[0].substr(19),10)),isNaN(C)&&(C=65536);var y=l.matchPrefix(d,"a=sctp-port:");if(y.length>0)return{port:parseInt(y[0].substr(12),10),protocol:c.fmt,maxMessageSize:C};var w=l.matchPrefix(d,"a=sctpmap:");if(w.length>0){var g=l.matchPrefix(d,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:C}}},l.writeSctpDescription=function(d,c){var E=[];return d.protocol!=="DTLS/SCTP"?E=["m="+d.kind+" 9 "+d.protocol+" "+c.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+c.port+`\r
`]:E=["m="+d.kind+" 9 "+d.protocol+" "+c.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+c.port+" "+c.protocol+` 65535\r
`],c.maxMessageSize!==void 0&&E.push("a=max-message-size:"+c.maxMessageSize+`\r
`),E.join("")},l.generateSessionId=function(){return Math.random().toString().substr(2,21)},l.writeSessionBoilerplate=function(d,c,E){var C,y=c!==void 0?c:2;d?C=d:C=l.generateSessionId();var w=E||"thisisadapterortc";return`v=0\r
o=`+w+" "+C+" "+y+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},l.writeMediaSection=function(d,c,E,C){var y=l.writeRtpDescription(d.kind,c);if(y+=l.writeIceParameters(d.iceGatherer.getLocalParameters()),y+=l.writeDtlsParameters(d.dtlsTransport.getLocalParameters(),E==="offer"?"actpass":"active"),y+="a=mid:"+d.mid+`\r
`,d.direction?y+="a="+d.direction+`\r
`:d.rtpSender&&d.rtpReceiver?y+=`a=sendrecv\r
`:d.rtpSender?y+=`a=sendonly\r
`:d.rtpReceiver?y+=`a=recvonly\r
`:y+=`a=inactive\r
`,d.rtpSender){var w="msid:"+C.id+" "+d.rtpSender.track.id+`\r
`;y+="a="+w,y+="a=ssrc:"+d.sendEncodingParameters[0].ssrc+" "+w,d.sendEncodingParameters[0].rtx&&(y+="a=ssrc:"+d.sendEncodingParameters[0].rtx.ssrc+" "+w,y+="a=ssrc-group:FID "+d.sendEncodingParameters[0].ssrc+" "+d.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return y+="a=ssrc:"+d.sendEncodingParameters[0].ssrc+" cname:"+l.localCName+`\r
`,d.rtpSender&&d.sendEncodingParameters[0].rtx&&(y+="a=ssrc:"+d.sendEncodingParameters[0].rtx.ssrc+" cname:"+l.localCName+`\r
`),y},l.getDirection=function(d,c){for(var E=l.splitLines(d),C=0;C<E.length;C++)switch(E[C]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return E[C].substr(2)}return c?l.getDirection(c):"sendrecv"},l.getKind=function(d){var c=l.splitLines(d),E=c[0].split(" ");return E[0].substr(2)},l.isRejected=function(d){return d.split(" ",2)[1]==="0"},l.parseMLine=function(d){var c=l.splitLines(d),E=c[0].substr(2).split(" ");return{kind:E[0],port:parseInt(E[1],10),protocol:E[2],fmt:E.slice(3).join(" ")}},l.parseOLine=function(d){var c=l.matchPrefix(d,"o=")[0],E=c.substr(2).split(" ");return{username:E[0],sessionId:E[1],sessionVersion:parseInt(E[2],10),netType:E[3],addressType:E[4],address:E[5]}},l.isValidSDP=function(d){if(typeof d!="string"||d.length===0)return!1;for(var c=l.splitLines(d),E=0;E<c.length;E++)if(c[E].length<2||c[E].charAt(1)!=="=")return!1;return!0},Ni(n)==="object"&&(n.exports=l)},{}]},{},[1])(1)})})(Lu),Je.sessions={},Je.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var Z=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),m=33;return window.navigator.userAgent.match("Linux")&&(m=35),Z>=26&&Z<=m?!0:Je.extension.isInstalled()}else return!0};var El={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return document.querySelector("#janus-extension-installed")!==null},getScreen:function(m){var t=window.setTimeout(function(){var n=new Error("NavigatorUserMediaError");return n.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',m(n)},1e3);this.cache[t]=m,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var m={};this.cache=m,window.addEventListener("message",function(t){if(t.origin==window.location.origin)if(t.data.type=="janusGotScreen"&&m[t.data.id]){var n=m[t.data.id];if(delete m[t.data.id],t.data.sourceId===""){var o=new Error("NavigatorUserMediaError");o.name="You cancelled the request for permission, giving up...",n(o)}else n(null,t.data.sourceId)}else t.data.type=="janusGetScreenPending"&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))})}};Je.useDefaultDependencies=function(Z){var m=Z&&Z.fetch||fetch,t=Z&&Z.Promise||Promise,n=Z&&Z.WebSocket||WebSocket;return{newWebSocket:function(l,d){return new n(l,d)},extension:Z&&Z.extension||El,isArray:function(l){return Array.isArray(l)},webRTCAdapter:Z&&Z.adapter||window.adapter,httpAPICall:function(l,d){var c={method:d.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};d.verb==="POST"&&(c.headers["Content-Type"]="application/json"),d.withCredentials!==void 0&&(c.credentials=d.withCredentials===!0?"include":d.withCredentials?d.withCredentials:"omit"),d.body!==void 0&&(c.body=JSON.stringify(d.body));var E=m(l,c).catch(function(y){return t.reject({message:"Probably a network error, is the server down?",error:y})});if(d.timeout!==void 0){var C=new t(function(y,w){var g=setTimeout(function(){return clearTimeout(g),w({message:"Request timed out",timeout:d.timeout})},d.timeout)});E=t.race([E,C])}return E.then(function(y){if(y.ok){if(Ni(d.success)===Ni(Je.noop))return y.json().then(function(w){d.success(w)}).catch(function(w){return t.reject({message:"Failed to parse response body",error:w,response:y})})}else return t.reject({message:"API call failed",response:y})}).catch(function(y){Ni(d.error)===Ni(Je.noop)&&d.error(y.message||"<< internal error >>",y)}),E}}},Je.useOldDependencies=function(Z){var m=Z&&Z.jQuery||jQuery,t=Z&&Z.WebSocket||WebSocket;return{newWebSocket:function(o,l){return new t(o,l)},isArray:function(o){return m.isArray(o)},extension:Z&&Z.extension||El,webRTCAdapter:Z&&Z.adapter||adapter,httpAPICall:function(o,l){var d=l.body!==void 0?{contentType:"application/json",data:JSON.stringify(l.body)}:{},c=l.withCredentials!==void 0?{xhrFields:{withCredentials:l.withCredentials}}:{};return m.ajax(m.extend(d,c,{url:o,type:l.verb,cache:!1,dataType:"json",async:l.async,timeout:l.timeout,success:function(C){Ni(l.success)===Ni(Je.noop)&&l.success(C)},error:function(C,y,w){Ni(l.error)===Ni(Je.noop)&&l.error(y,w)}}))}}},Je.noop=function(){},Je.dataChanDefaultLabel="JanusDataChannel",Je.endOfCandidates=null,Je.init=function(Z){if(Z=Z||{},Z.callback=typeof Z.callback=="function"?Z.callback:Je.noop,Je.initDone===!0)Z.callback();else{if((typeof console>"u"||typeof console.log>"u")&&(console={log:function(){}}),Je.trace=Je.noop,Je.debug=Je.noop,Je.vdebug=Je.noop,Je.log=Je.noop,Je.warn=Je.noop,Je.error=Je.noop,Z.debug===!0||Z.debug==="all")Je.trace=console.trace.bind(console),Je.debug=console.debug.bind(console),Je.vdebug=console.debug.bind(console),Je.log=console.log.bind(console),Je.warn=console.warn.bind(console),Je.error=console.error.bind(console);else if(Array.isArray(Z.debug))for(var m in Z.debug){var t=Z.debug[m];switch(t){case"trace":Je.trace=console.trace.bind(console);break;case"debug":Je.debug=console.debug.bind(console);break;case"vdebug":Je.vdebug=console.debug.bind(console);break;case"log":Je.log=console.log.bind(console);break;case"warn":Je.warn=console.warn.bind(console);break;case"error":Je.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+t+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}Je.log("Initializing library");var n=Z.dependencies||Je.useDefaultDependencies();Je.isArray=n.isArray,Je.webRTCAdapter=n.webRTCAdapter,Je.httpAPICall=n.httpAPICall,Je.newWebSocket=n.newWebSocket,Je.extension=n.extension,Je.extension.init(),Je.listDevices=function(y,w){y=typeof y=="function"?y:Je.noop,w==null&&(w={audio:!0,video:!0}),Je.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(w).then(function(g){navigator.mediaDevices.enumerateDevices().then(function(p){Je.debug(p),y(p);try{var te=g.getTracks();for(var ae in te){var de=te[ae];de!=null&&de.stop()}}catch{}})}).catch(function(g){Je.error(g),y([])}):(Je.warn("navigator.mediaDevices unavailable"),y([]))},Je.attachMediaStream=function(y,w){if(Je.webRTCAdapter.browserDetails.browser==="chrome"){var g=Je.webRTCAdapter.browserDetails.version;g>=52?y.srcObject=w:Je.error("Error attaching stream to element")}else y.srcObject=w},Je.reattachMediaStream=function(y,w){if(Je.webRTCAdapter.browserDetails.browser==="chrome"){var g=Je.webRTCAdapter.browserDetails.version;g>=52?y.srcObject=w.srcObject:typeof y.src<"u"?y.src=w.src:Je.error("Error reattaching stream to element")}else y.srcObject=w.srcObject};var o=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,l=o?"pagehide":"beforeunload",d=window["on"+l];if(window.addEventListener(l,function(y){Je.log("Closing window");for(var w in Je.sessions)Je.sessions[w]!==null&&Je.sessions[w]!==void 0&&Je.sessions[w].destroyOnUnload&&(Je.log("Destroying session "+w),Je.sessions[w].destroy({asyncRequest:!1,notifyDestroyed:!1}));d&&typeof d=="function"&&d()}),Je.safariVp8=!1,Je.webRTCAdapter.browserDetails.browser==="safari"&&Je.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var m in RTCRtpSender.getCapabilities("video").codecs){var c=RTCRtpSender.getCapabilities("video").codecs[m];if(c&&c.mimeType&&c.mimeType.toLowerCase()==="video/vp8"){Je.safariVp8=!0;break}}Je.safariVp8?Je.log("This version of Safari supports VP8"):Je.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var E=new RTCPeerConnection({},{});E.createOffer({offerToReceiveVideo:!0}).then(function(y){Je.safariVp8=y.sdp.indexOf("VP8")!==-1,Je.safariVp8?Je.log("This version of Safari supports VP8"):Je.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),E.close(),E=null})}if(Je.unifiedPlan=!1,Je.webRTCAdapter.browserDetails.browser==="firefox"&&Je.webRTCAdapter.browserDetails.version>=59)Je.unifiedPlan=!0;else if(Je.webRTCAdapter.browserDetails.browser==="chrome"&&Je.webRTCAdapter.browserDetails.version<72)Je.unifiedPlan=!1;else if(typeof RTCRtpTransceiver<"u"&&!("currentDirection"in RTCRtpTransceiver.prototype))Je.unifiedPlan=!1;else{var C=new RTCPeerConnection;try{C.addTransceiver("audio"),Je.unifiedPlan=!0}catch{}C.close()}Je.initDone=!0,Z.callback()}},Je.isWebrtcSupported=function(){return window.RTCPeerConnection!==void 0&&window.RTCPeerConnection!==null},Je.isGetUserMediaAvailable=function(){return navigator.mediaDevices!==void 0&&navigator.mediaDevices!==null&&navigator.mediaDevices.getUserMedia!==void 0&&navigator.mediaDevices.getUserMedia!==null},Je.randomString=function(Z){for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<Z;n++){var o=Math.floor(Math.random()*m.length);t+=m.substring(o,o+1)}return t};function Je(Z){if(Je.initDone===void 0)return Z.error("Library not initialized"),{};if(!Je.isWebrtcSupported())return Z.error("WebRTC not supported by this browser"),{};if(Je.log("Library initialized: "+Je.initDone),Z=Z||{},Z.success=typeof Z.success=="function"?Z.success:Je.noop,Z.error=typeof Z.error=="function"?Z.error:Je.noop,Z.destroyed=typeof Z.destroyed=="function"?Z.destroyed:Je.noop,Z.server===null||Z.server===void 0)return Z.error("Invalid server url"),{};var m=!1,t=null,n={},o=null,l=null,d=0,c=Z.server;Je.isArray(c)?(Je.log("Multiple servers provided ("+c.length+"), will use the first that works"),c=null,l=Z.server,Je.debug(l)):c.indexOf("ws")===0?(m=!0,Je.log("Using WebSockets to contact Janus: "+c)):(m=!1,Je.log("Using REST API to contact Janus: "+c));var E=Z.iceServers;E==null&&(E=[{urls:"stun:stun.l.google.com:19302"}]);var C=Z.iceTransportPolicy,y=Z.bundlePolicy,w=Z.ipv6;w==null&&(w=!1);var g=!1;Z.withCredentials!==void 0&&Z.withCredentials!==null&&(g=Z.withCredentials===!0);var p=10;Z.max_poll_events!==void 0&&Z.max_poll_events!==null&&(p=Z.max_poll_events),p<1&&(p=1);var te=null;Z.token!==void 0&&Z.token!==null&&(te=Z.token);var ae=null;Z.apisecret!==void 0&&Z.apisecret!==null&&(ae=Z.apisecret),this.destroyOnUnload=!0,Z.destroyOnUnload!==void 0&&Z.destroyOnUnload!==null&&(this.destroyOnUnload=Z.destroyOnUnload===!0);var de=25e3;Z.keepAlivePeriod!==void 0&&Z.keepAlivePeriod!==null&&(de=Z.keepAlivePeriod),isNaN(de)&&(de=25e3);var ie=6e4;Z.longPollTimeout!==void 0&&Z.longPollTimeout!==null&&(ie=Z.longPollTimeout),isNaN(ie)&&(ie=6e4);function we(R){var He={high:9e5,medium:3e5,low:1e5};return R!=null&&(R.high&&(He.high=R.high),R.medium&&(He.medium=R.medium),R.low&&(He.low=R.low)),He}var Ve=!1,ue=null,x={},O=this,ne=0,Q={};Qe(Z),this.getServer=function(){return c},this.isConnected=function(){return Ve},this.reconnect=function(R){R=R||{},R.success=typeof R.success=="function"?R.success:Je.noop,R.error=typeof R.error=="function"?R.error:Je.noop,R.reconnect=!0,Qe(R)},this.getSessionId=function(){return ue},this.destroy=function(R){M(R)},this.attach=function(R){Te(R)};function ye(){if(ue!=null){if(Je.debug("Long poll..."),!Ve){Je.warn("Is the server down? (connected=false)");return}var R=c+"/"+ue+"?rid="+new Date().getTime();p!=null&&(R=R+"&maxev="+p),te!=null&&(R=R+"&token="+encodeURIComponent(te)),ae!=null&&(R=R+"&apisecret="+encodeURIComponent(ae)),Je.httpAPICall(R,{verb:"GET",withCredentials:g,success:se,timeout:ie,error:function(G,ge){if(Je.error(G+":",ge),ne++,ne>3){Ve=!1,Z.error("Lost connection to the server (is it down?)");return}ye()}})}}function se(R,He){if(ne=0,!m&&ue!==void 0&&ue!==null&&He!==!0&&ye(),!m&&Je.isArray(R)){for(var G=0;G<R.length;G++)se(R[G],!0);return}if(R.rtcgw==="keepalive"){Je.vdebug("Got a keepalive on session "+ue);return}else if(R.rtcgw==="ack"){Je.debug("Got an ack on session "+ue),Je.debug(R);var ge=R.transaction;if(ge!=null){var xe=Q[ge];xe!=null&&xe(R),delete Q[ge]}return}else if(R.rtcgw==="success"){Je.debug("Got a success on session "+ue),Je.debug(R);var ge=R.transaction;if(ge!=null){var xe=Q[ge];xe!=null&&xe(R),delete Q[ge]}return}else if(R.rtcgw==="trickle"){var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var ce=x[ke];if(ce==null){Je.debug("This handle is not attached to this session");return}var X=R.candidate;Je.debug("Got a trickled candidate on session "+ue),Je.debug(X);var Be=ce.webrtcStuff;Be.pc&&Be.remoteSdp?(Je.debug("Adding remote candidate:",X),!X||X.completed===!0?Be.pc.addIceCandidate(Je.endOfCandidates):Be.pc.addIceCandidate(X)):(Je.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),Be.candidates||(Be.candidates=[]),Be.candidates.push(X),Je.debug(Be.candidates))}else if(R.rtcgw==="webrtcup"){Je.debug("Got a webrtcup event on session "+ue),Je.debug(R);var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var ce=x[ke];if(ce==null){Je.debug("This handle is not attached to this session");return}ce.webrtcState(!0);return}else if(R.rtcgw==="hangup"){Je.debug("Got a hangup event on session "+ue),Je.debug(R);var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var ce=x[ke];if(ce==null){Je.debug("This handle is not attached to this session");return}ce.webrtcState(!1,R.reason),ce.hangup()}else if(R.rtcgw==="detached"){Je.debug("Got a detached event on session "+ue),Je.debug(R);var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var ce=x[ke];if(ce==null)return;ce.detached=!0,ce.ondetached(),ce.detach()}else if(R.rtcgw==="media"){Je.debug("Got a media event on session "+ue),Je.debug(R);var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var ce=x[ke];if(ce==null){Je.debug("This handle is not attached to this session");return}ce.mediaState(R.type,R.receiving)}else if(R.rtcgw==="slowlink"){Je.debug("Got a slowlink event on session "+ue),Je.debug(R);var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var ce=x[ke];if(ce==null){Je.debug("This handle is not attached to this session");return}ce.slowLink(R.uplink,R.lost)}else if(R.rtcgw==="error"){Je.error("Ooops: "+R.error.code+" "+R.error.reason),Je.debug(R);var ge=R.transaction;if(ge!=null){var xe=Q[ge];xe!=null&&xe(R),delete Q[ge]}return}else if(R.rtcgw==="event"){Je.debug("Got a plugin event on session "+ue),Je.debug(R);var ke=R.sender;if(ke==null){Je.warn("Missing sender...");return}var lt=R.plugindata;if(lt==null){Je.warn("Missing plugindata...");return}Je.debug("  -- Event is coming from "+ke+" ("+lt.plugin+")");var dt=lt.data;Je.debug(dt);var ce=x[ke];if(ce==null){Je.warn("This handle is not attached to this session");return}var Lt=R.jsep;Lt!=null&&(Je.debug("Handling SDP as well..."),Je.debug(Lt));var qt=ce.onmessage;qt!=null?(Je.debug("Notifying application..."),qt(dt,Lt)):Je.debug("No provided notification callback")}else if(R.rtcgw==="timeout"){Je.error("Timeout on session "+ue),Je.debug(R),m&&t.close(3504,"Gateway timeout");return}else Je.warn("Unknown message/event  '"+R.rtcgw+"' on session "+ue),Je.debug(R)}function Ze(){if(!(c===null||!m||!Ve)){o=setTimeout(Ze,de);var R={rtcgw:"keepalive",session_id:ue,transaction:Je.randomString(12)};te!=null&&(R.token=te),ae!=null&&(R.apisecret=ae),t.send(JSON.stringify(R))}}function Qe(R){var He=Je.randomString(12),G={rtcgw:"create",transaction:He,token:window.EZUIKit.opt.stream,device:window.EZUIKit.opt.deviceSerial,channel:window.EZUIKit.opt.channelNo};if(R.reconnect&&(Ve=!1,G.rtcgw="claim",G.session_id=ue,t&&(t.onopen=null,t.onerror=null,t.onclose=null,o&&(clearTimeout(o),o=null))),te!=null&&(G.token=te),ae!=null&&(G.apisecret=ae),c===null&&Je.isArray(l)&&(c=l[d],c.indexOf("ws")===0?(m=!0,Je.log("Server #"+(d+1)+": trying WebSockets to contact Janus ("+c+")")):(m=!1,Je.log("Server #"+(d+1)+": trying REST API to contact Janus ("+c+")"))),m){t=Je.newWebSocket(c,"rtcgw-protocol"),n={error:function(){if(Je.error("Error connecting to the Janus WebSockets server... "+c),Je.isArray(l)&&!R.reconnect){if(d++,d==l.length){R.error("Error connecting to any of the provided Janus servers: Is the server down?");return}c=null,setTimeout(function(){Qe(R)},200);return}R.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){Q[He]=function(ke){if(Je.debug(ke),ke.rtcgw!=="success"){Je.error("Ooops: "+ke.error.code+" "+ke.error.reason),R.error(ke.error.reason);return}o=setTimeout(Ze,de),Ve=!0,ue=ke.session_id?ke.session_id:ke.data.id,R.reconnect?Je.log("Claimed session: "+ue):Je.log("Created session: "+ue),Je.sessions[ue]=O,R.success()},t.send(JSON.stringify(G))},message:function(ke){se(JSON.parse(ke.data))},close:function(){c===null||!Ve||(Ve=!1,Z.error("Lost connection to the server (is it down?)"))}};for(var ge in n)t.addEventListener(ge,n[ge]);return}Je.httpAPICall(c,{verb:"POST",withCredentials:g,body:G,success:function(ke){if(Je.debug(ke),ke.rtcgw!=="success"){Je.error("Ooops: "+ke.error.code+" "+ke.error.reason),R.error(ke.error.reason);return}Ve=!0,ue=ke.session_id?ke.session_id:ke.data.id,R.reconnect?Je.log("Claimed session: "+ue):Je.log("Created session: "+ue),Je.sessions[ue]=O,ye(),R.success()},error:function(ke,ce){if(Je.error(ke+":",ce),Je.isArray(l)&&!R.reconnect){if(d++,d==l.length){R.error("Error connecting to any of the provided Janus servers: Is the server down?");return}c=null,setTimeout(function(){Qe(R)},200);return}ce===""?R.error(ke+": Is the server down?"):R.error(ke+": "+ce)}})}function M(R){R=R||{},R.success=typeof R.success=="function"?R.success:Je.noop;var He=!0;R.asyncRequest!==void 0&&R.asyncRequest!==null&&(He=R.asyncRequest===!0);var G=!0;R.notifyDestroyed!==void 0&&R.notifyDestroyed!==null&&(G=R.notifyDestroyed===!0);var ge=!1;if(R.cleanupHandles!==void 0&&R.cleanupHandles!==null&&(ge=R.cleanupHandles===!0),Je.log("Destroying session "+ue+" (async="+He+")"),!Ve){Je.warn("Is the server down? (connected=false)"),R.success();return}if(ue==null){Je.warn("No session to destroy"),R.success(),G&&Z.destroyed();return}if(ge)for(var xe in x)zi(xe,{noRequest:!0});var ke={rtcgw:"destroy",transaction:Je.randomString(12)};if(te!=null&&(ke.token=te),ae!=null&&(ke.apisecret=ae),m){ke.session_id=ue;var ce=function(){for(var dt in n)t.removeEventListener(dt,n[dt]);t.removeEventListener("message",X),t.removeEventListener("error",Be),o&&clearTimeout(o),t.close()},X=function(dt){var Lt=JSON.parse(dt.data);Lt.session_id==ke.session_id&&Lt.transaction==ke.transaction&&(ce(),R.success(),G&&Z.destroyed())},Be=function(dt){ce(),R.error("Failed to destroy the server: Is the server down?"),G&&Z.destroyed()};t.addEventListener("message",X),t.addEventListener("error",Be),t.send(JSON.stringify(ke));return}Je.httpAPICall(c+"/"+ue,{verb:"POST",async:He,withCredentials:g,body:ke,success:function(dt){Je.log("Destroyed session:"),Je.debug(dt),ue=null,Ve=!1,dt.rtcgw!=="success"&&Je.error("Ooops: "+dt.error.code+" "+dt.error.reason),R.success(),G&&Z.destroyed()},error:function(dt,Lt){Je.error(dt+":",Lt),ue=null,Ve=!1,R.success(),G&&Z.destroyed()}})}function Te(R){if(R=R||{},R.success=typeof R.success=="function"?R.success:Je.noop,R.error=typeof R.error=="function"?R.error:Je.noop,R.consentDialog=typeof R.consentDialog=="function"?R.consentDialog:Je.noop,R.iceState=typeof R.iceState=="function"?R.iceState:Je.noop,R.mediaState=typeof R.mediaState=="function"?R.mediaState:Je.noop,R.webrtcState=typeof R.webrtcState=="function"?R.webrtcState:Je.noop,R.slowLink=typeof R.slowLink=="function"?R.slowLink:Je.noop,R.onmessage=typeof R.onmessage=="function"?R.onmessage:Je.noop,R.onlocalstream=typeof R.onlocalstream=="function"?R.onlocalstream:Je.noop,R.onremotestream=typeof R.onremotestream=="function"?R.onremotestream:Je.noop,R.ondata=typeof R.ondata=="function"?R.ondata:Je.noop,R.ondataopen=typeof R.ondataopen=="function"?R.ondataopen:Je.noop,R.oncleanup=typeof R.oncleanup=="function"?R.oncleanup:Je.noop,R.ondetached=typeof R.ondetached=="function"?R.ondetached:Je.noop,!Ve){Je.warn("Is the server down? (connected=false)"),R.error("Is the server down? (connected=false)");return}var He=R.plugin;if(He==null){Je.error("Invalid plugin"),R.error("Invalid plugin");return}var G=R.opaqueId,ge=R.token?R.token:te,xe=Je.randomString(12),ke={rtcgw:"attach",plugin:He,opaque_id:G,transaction:xe};if(ge!=null&&(ke.token=ge),ae!=null&&(ke.apisecret=ae),m){Q[xe]=function(ce){if(Je.debug(ce),ce.rtcgw!=="success"){Je.error("Ooops: "+ce.error.code+" "+ce.error.reason),R.error("Ooops: "+ce.error.code+" "+ce.error.reason);return}var X=ce.data.id;Je.log("Created handle: "+X);var Be={session:O,plugin:He,id:X,token:ge,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return X},getPlugin:function(){return He},getVolume:function(){return Wt(X,!0)},getRemoteVolume:function(){return Wt(X,!0)},getLocalVolume:function(){return Wt(X,!1)},isAudioMuted:function(){return kt(X,!1)},muteAudio:function(){return ee(X,!1,!0)},unmuteAudio:function(){return ee(X,!1,!1)},isVideoMuted:function(){return kt(X,!0)},muteVideo:function(){return ee(X,!0,!0)},unmuteVideo:function(){return ee(X,!0,!1)},getBitrate:function(){return me(X)},send:function(dt){ze(X,dt)},data:function(dt){ui(X,dt)},dtmf:function(dt){di(X,dt)},consentDialog:R.consentDialog,iceState:R.iceState,mediaState:R.mediaState,webrtcState:R.webrtcState,slowLink:R.slowLink,onmessage:R.onmessage,createOffer:function(dt){st(X,!0,dt)},createAnswer:function(dt){st(X,!1,dt)},handleRemoteJsep:function(dt){Ke(X,dt)},onlocalstream:R.onlocalstream,onremotestream:R.onremotestream,ondata:R.ondata,ondataopen:R.ondataopen,oncleanup:R.oncleanup,ondetached:R.ondetached,hangup:function(dt){Y(X,dt===!0)},detach:function(dt){zi(X,dt)}};x[X]=Be,R.success(Be)},ke.session_id=ue,t.send(JSON.stringify(ke));return}Je.httpAPICall(c+"/"+ue,{verb:"POST",withCredentials:g,body:ke,success:function(X){if(Je.debug(X),X.rtcgw!=="success"){Je.error("Ooops: "+X.error.code+" "+X.error.reason),R.error("Ooops: "+X.error.code+" "+X.error.reason);return}var Be=X.data.id;Je.log("Created handle: "+Be);var lt={session:O,plugin:He,id:Be,token:ge,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return Be},getPlugin:function(){return He},getVolume:function(){return Wt(Be,!0)},getRemoteVolume:function(){return Wt(Be,!0)},getLocalVolume:function(){return Wt(Be,!1)},isAudioMuted:function(){return kt(Be,!1)},muteAudio:function(){return ee(Be,!1,!0)},unmuteAudio:function(){return ee(Be,!1,!1)},isVideoMuted:function(){return kt(Be,!0)},muteVideo:function(){return ee(Be,!0,!0)},unmuteVideo:function(){return ee(Be,!0,!1)},getBitrate:function(){return me(Be)},send:function(Lt){ze(Be,Lt)},data:function(Lt){ui(Be,Lt)},dtmf:function(Lt){di(Be,Lt)},consentDialog:R.consentDialog,iceState:R.iceState,mediaState:R.mediaState,webrtcState:R.webrtcState,slowLink:R.slowLink,onmessage:R.onmessage,createOffer:function(Lt){st(Be,!0,Lt)},createAnswer:function(Lt){st(Be,!1,Lt)},handleRemoteJsep:function(Lt){Ke(Be,Lt)},onlocalstream:R.onlocalstream,onremotestream:R.onremotestream,ondata:R.ondata,ondataopen:R.ondataopen,oncleanup:R.oncleanup,ondetached:R.ondetached,hangup:function(Lt){Y(Be,Lt===!0)},detach:function(Lt){zi(Be,Lt)}};x[Be]=lt,R.success(lt)},error:function(X,Be){Je.error(X+":",Be)}})}function ze(R,He){if(He=He||{},He.success=typeof He.success=="function"?He.success:Je.noop,He.error=typeof He.error=="function"?He.error:Je.noop,!Ve){Je.warn("Is the server down? (connected=false)"),He.error("Is the server down? (connected=false)");return}var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0){Je.warn("Invalid handle"),He.error("Invalid handle");return}var ge=He.message,xe=He.jsep,ke=Je.randomString(12),ce={rtcgw:"message",body:ge,transaction:ke};if(G.token!==null&&G.token!==void 0&&(ce.token=G.token),ae!=null&&(ce.apisecret=ae),xe!=null&&(ce.jsep=xe),Je.debug("Sending message to plugin (handle="+R+"):"),Je.debug(ce),m){ce.session_id=ue,ce.handle_id=R,Q[ke]=function(X){if(Je.debug("Message sent!"),Je.debug(X),X.rtcgw==="success"){var Be=X.plugindata;if(Be==null){Je.warn("Request succeeded, but missing plugindata..."),He.success();return}Je.log("Synchronous transaction successful ("+Be.plugin+")");var lt=Be.data;Je.debug(lt),He.success(lt);return}else if(X.rtcgw!=="ack"){X.error!==void 0&&X.error!==null?(Je.error("Ooops: "+X.error.code+" "+X.error.reason),He.error(X.error.code+" "+X.error.reason)):(Je.error("Unknown error"),He.error("Unknown error"));return}He.success()},t.send(JSON.stringify(ce));return}Je.httpAPICall(c+"/"+ue+"/"+R,{verb:"POST",withCredentials:g,body:ce,success:function(Be){if(Je.debug("Message sent!"),Je.debug(Be),Be.rtcgw==="success"){var lt=Be.plugindata;if(lt==null){Je.warn("Request succeeded, but missing plugindata..."),He.success();return}Je.log("Synchronous transaction successful ("+lt.plugin+")");var dt=lt.data;Je.debug(dt),He.success(dt);return}else if(Be.rtcgw!=="ack"){Be.error!==void 0&&Be.error!==null?(Je.error("Ooops: "+Be.error.code+" "+Be.error.reason),He.error(Be.error.code+" "+Be.error.reason)):(Je.error("Unknown error"),He.error("Unknown error"));return}He.success()},error:function(Be,lt){Je.error(Be+":",lt),He.error(Be+": "+lt)}})}function oi(R,He){if(!Ve){Je.warn("Is the server down? (connected=false)");return}var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0){Je.warn("Invalid handle");return}var ge={rtcgw:"trickle",candidate:He,transaction:Je.randomString(12)};if(G.token!==null&&G.token!==void 0&&(ge.token=G.token),ae!=null&&(ge.apisecret=ae),Je.vdebug("Sending trickle candidate (handle="+R+"):"),Je.vdebug(ge),m){ge.session_id=ue,ge.handle_id=R,t.send(JSON.stringify(ge));return}Je.httpAPICall(c+"/"+ue+"/"+R,{verb:"POST",withCredentials:g,body:ge,success:function(ke){if(Je.vdebug("Candidate sent!"),Je.vdebug(ke),ke.rtcgw!=="ack"){Je.error("Ooops: "+ke.error.code+" "+ke.error.reason);return}},error:function(ke,ce){Je.error(ke+":",ce)}})}function wi(R,He,G,ge){var xe=x[R];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0){Je.warn("Invalid handle");return}var ke=xe.webrtcStuff,ce=function(dt){Je.log("Received message on data channel:",dt);var Lt=dt.target.label;xe.ondata(dt.data,Lt)},X=function(dt){Je.log("Received state change on data channel:",dt);var Lt=dt.target.label,qt=ke.dataChannel[Lt]?ke.dataChannel[Lt].readyState:"null";if(Je.log("State change on <"+Lt+"> data channel: "+qt),qt==="open"){if(ke.dataChannel[Lt].pending&&ke.dataChannel[Lt].pending.length>0){Je.log("Sending pending messages on <"+Lt+">:",ke.dataChannel[Lt].pending.length);for(var Si in ke.dataChannel[Lt].pending){var he=ke.dataChannel[Lt].pending[Si];Je.log("Sending string on data channel <"+Lt+">: "+he),ke.dataChannel[Lt].send(he)}ke.dataChannel[Lt].pending=[]}xe.ondataopen(Lt)}},Be=function(dt){Je.error("Got error on data channel:",dt)};G?ke.dataChannel[He]=G:ke.dataChannel[He]=ke.pc.createDataChannel(He,{ordered:!1}),ke.dataChannel[He].onmessage=ce,ke.dataChannel[He].onopen=X,ke.dataChannel[He].onclose=X,ke.dataChannel[He].onerror=Be,ke.dataChannel[He].pending=[],ge&&ke.dataChannel[He].pending.push(ge)}function ui(R,He){He=He||{},He.success=typeof He.success=="function"?He.success:Je.noop,He.error=typeof He.error=="function"?He.error:Je.noop;var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0){Je.warn("Invalid handle"),He.error("Invalid handle");return}var ge=G.webrtcStuff,xe=He.text;if(xe==null){Je.warn("Invalid text"),He.error("Invalid text");return}var ke=He.label?He.label:Je.dataChanDefaultLabel;if(!ge.dataChannel[ke]){wi(R,ke,!1,xe),He.success();return}if(ge.dataChannel[ke].readyState!=="open"){ge.dataChannel[ke].pending.push(xe),He.success();return}Je.log("Sending string on data channel <"+ke+">: "+xe),ge.dataChannel[ke].send(xe),He.success()}function di(R,He){He=He||{},He.success=typeof He.success=="function"?He.success:Je.noop,He.error=typeof He.error=="function"?He.error:Je.noop;var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0){Je.warn("Invalid handle"),He.error("Invalid handle");return}var ge=G.webrtcStuff;if(ge.dtmfSender===null||ge.dtmfSender===void 0){if(ge.pc!==void 0&&ge.pc!==null){var xe=ge.pc.getSenders(),ke=xe.find(function(dt){return dt.track&&dt.track.kind==="audio"});if(!ke){Je.warn("Invalid DTMF configuration (no audio track)"),He.error("Invalid DTMF configuration (no audio track)");return}ge.dtmfSender=ke.dtmf,ge.dtmfSender&&(Je.log("Created DTMF Sender"),ge.dtmfSender.ontonechange=function(dt){Je.debug("Sent DTMF tone: "+dt.tone)})}if(ge.dtmfSender===null||ge.dtmfSender===void 0){Je.warn("Invalid DTMF configuration"),He.error("Invalid DTMF configuration");return}}var ce=He.dtmf;if(ce==null){Je.warn("Invalid DTMF parameters"),He.error("Invalid DTMF parameters");return}var X=ce.tones;if(X==null){Je.warn("Invalid DTMF string"),He.error("Invalid DTMF string");return}var Be=ce.duration;Be==null&&(Be=500);var lt=ce.gap;lt==null&&(lt=50),Je.debug("Sending DTMF string "+X+" (duration "+Be+"ms, gap "+lt+"ms)"),ge.dtmfSender.insertDTMF(X,Be,lt),He.success()}function zi(R,He){He=He||{},He.success=typeof He.success=="function"?He.success:Je.noop,He.error=typeof He.error=="function"?He.error:Je.noop;var G=!0;He.asyncRequest!==void 0&&He.asyncRequest!==null&&(G=He.asyncRequest===!0);var ge=!0;He.noRequest!==void 0&&He.noRequest!==null&&(ge=He.noRequest===!0),Je.log("Destroying handle "+R+" (async="+G+")"),Y(R);var xe=x[R];if(xe==null||xe.detached){delete x[R],He.success();return}if(ge){delete x[R],He.success();return}if(!Ve){Je.warn("Is the server down? (connected=false)"),He.error("Is the server down? (connected=false)");return}var ke={rtcgw:"detach",transaction:Je.randomString(12)};if(xe.token!==null&&xe.token!==void 0&&(ke.token=xe.token),ae!=null&&(ke.apisecret=ae),m){ke.session_id=ue,ke.handle_id=R,t.send(JSON.stringify(ke)),delete x[R],He.success();return}Je.httpAPICall(c+"/"+ue+"/"+R,{verb:"POST",async:G,withCredentials:g,body:ke,success:function(X){Je.log("Destroyed handle:"),Je.debug(X),X.rtcgw!=="success"&&Je.error("Ooops: "+X.error.code+" "+X.error.reason),delete x[R],He.success()},error:function(X,Be){Je.error(X+":",Be),delete x[R],He.success()}})}function $e(R,He,G,ge,xe){var ke=x[R];if(ke==null||ke.webrtcStuff===null||ke.webrtcStuff===void 0){Je.warn("Invalid handle"),ge.error("Invalid handle");return}var ce=ke.webrtcStuff;Je.debug("streamsDone:",xe),xe&&(Je.debug("  -- Audio tracks:",xe.getAudioTracks()),Je.debug("  -- Video tracks:",xe.getVideoTracks()));var X=!1;if(!ce.myStream||!G.update||ce.streamExternal)ce.myStream=xe,X=!0;else{if((!G.update&&N(G)||G.update&&(G.addAudio||G.replaceAudio))&&xe.getAudioTracks()&&xe.getAudioTracks().length)if(ce.myStream.addTrack(xe.getAudioTracks()[0]),Je.unifiedPlan){Je.log((G.replaceAudio?"Replacing":"Adding")+" audio track:",xe.getAudioTracks()[0]);var Be=null,lt=ce.pc.getTransceivers();if(lt&&lt.length>0)for(var dt in lt){var Lt=lt[dt];if(Lt.sender&&Lt.sender.track&&Lt.sender.track.kind==="audio"||Lt.receiver&&Lt.receiver.track&&Lt.receiver.track.kind==="audio"){Be=Lt;break}}Be&&Be.sender?Be.sender.replaceTrack(xe.getAudioTracks()[0]):ce.pc.addTrack(xe.getAudioTracks()[0],xe)}else Je.log((G.replaceAudio?"Replacing":"Adding")+" audio track:",xe.getAudioTracks()[0]),ce.pc.addTrack(xe.getAudioTracks()[0],xe);if((!G.update&&L(G)||G.update&&(G.addVideo||G.replaceVideo))&&xe.getVideoTracks()&&xe.getVideoTracks().length)if(ce.myStream.addTrack(xe.getVideoTracks()[0]),Je.unifiedPlan){Je.log((G.replaceVideo?"Replacing":"Adding")+" video track:",xe.getVideoTracks()[0]);var qt=null,lt=ce.pc.getTransceivers();if(lt&&lt.length>0)for(var dt in lt){var Lt=lt[dt];if(Lt.sender&&Lt.sender.track&&Lt.sender.track.kind==="video"||Lt.receiver&&Lt.receiver.track&&Lt.receiver.track.kind==="video"){qt=Lt;break}}qt&&qt.sender?qt.sender.replaceTrack(xe.getVideoTracks()[0]):ce.pc.addTrack(xe.getVideoTracks()[0],xe)}else Je.log((G.replaceVideo?"Replacing":"Adding")+" video track:",xe.getVideoTracks()[0]),ce.pc.addTrack(xe.getVideoTracks()[0],xe)}if(!ce.pc){var Si={iceServers:E,iceTransportPolicy:C,bundlePolicy:y};Je.webRTCAdapter.browserDetails.browser==="chrome"&&(Si.sdpSemantics=Je.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var he={optional:[{DtlsSrtpKeyAgreement:!0}]};if(w===!0&&he.optional.push({googIPv6:!0}),ge.rtcConstraints&&Ni(ge.rtcConstraints)==="object"){Je.debug("Adding custom PeerConnection constraints:",ge.rtcConstraints);for(var dt in ge.rtcConstraints)he.optional.push(ge.rtcConstraints[dt])}Je.webRTCAdapter.browserDetails.browser==="edge"&&(Si.bundlePolicy="max-bundle"),Je.log("Creating PeerConnection"),Je.debug(he),ce.pc=new RTCPeerConnection(Si,he),Je.debug(ce.pc),ce.pc.getStats&&(ce.volume={},ce.bitrate.value="0 kbits/sec"),Je.log("Preparing local SDP and gathering candidates (trickle="+ce.trickle+")"),ce.pc.oniceconnectionstatechange=function(yt){ce.pc&&ke.iceState(ce.pc.iceConnectionState)},ce.pc.onicecandidate=function(yt){if(yt.candidate==null||Je.webRTCAdapter.browserDetails.browser==="edge"&&yt.candidate.candidate.indexOf("endOfCandidates")>0)Je.log("End of candidates."),ce.iceDone=!0,ce.trickle===!0?oi(R,{completed:!0}):Ut(R,ge);else{var wt={candidate:yt.candidate.candidate,sdpMid:yt.candidate.sdpMid,sdpMLineIndex:yt.candidate.sdpMLineIndex};ce.trickle===!0&&oi(R,wt)}},ce.pc.ontrack=function(yt){Je.log("Handling Remote Track"),Je.debug(yt),yt.streams&&(ce.remoteStream=yt.streams[0],ke.onremotestream(ce.remoteStream),!yt.track.onended&&(Je.log("Adding onended callback to track:",yt.track),yt.track.onended=function(wt){Je.log("Remote track muted/removed:",wt),ce.remoteStream&&(ce.remoteStream.removeTrack(wt.target),ke.onremotestream(ce.remoteStream))},yt.track.onmute=yt.track.onended,yt.track.onunmute=function(wt){Je.log("Remote track flowing again:",wt);try{ce.remoteStream.addTrack(wt.target),ke.onremotestream(ce.remoteStream)}catch(pt){Je.error(pt)}}))}}if(X&&xe!==null&&xe!==void 0){Je.log("Adding local stream");var Bi=ge.simulcast2===!0;xe.getTracks().forEach(function(yt){if(Je.log("Adding local track:",yt),!Bi)ce.pc.addTrack(yt,xe);else if(yt.kind==="audio")ce.pc.addTrack(yt,xe);else{Je.log("Enabling rid-based simulcasting:",yt);var wt=we(ge.simulcastMaxBitrates);ce.pc.addTransceiver(yt,{direction:"sendrecv",streams:[xe],sendEncodings:[{rid:"h",active:!0,maxBitrate:wt.high},{rid:"m",active:!0,maxBitrate:wt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:wt.low,scaleResolutionDownBy:4}]})}})}Ye(G)&&!ce.dataChannel[Je.dataChanDefaultLabel]&&(Je.log("Creating data channel"),wi(R,Je.dataChanDefaultLabel,!1),ce.pc.ondatachannel=function(yt){Je.log("Data channel created by Janus:",yt),wi(R,yt.channel.label,yt.channel)}),ce.myStream&&ke.onlocalstream(ce.myStream),He==null?Ne(R,G,ge):ce.pc.setRemoteDescription(He).then(function(){if(Je.log("Remote description accepted!"),ce.remoteSdp=He.sdp,ce.candidates&&ce.candidates.length>0){for(var yt=0;yt<ce.candidates.length;yt++){var wt=ce.candidates[yt];Je.debug("Adding remote candidate:",wt),!wt||wt.completed===!0?ce.pc.addIceCandidate(Je.endOfCandidates):ce.pc.addIceCandidate(wt)}ce.candidates=[]}at(R,G,ge)},ge.error)}function st(R,He,G){G=G||{},G.success=typeof G.success=="function"?G.success:Je.noop,G.error=typeof G.error=="function"?G.error:P;var ge=G.jsep;if(He&&ge){Je.error("Provided a JSEP to a createOffer"),G.error("Provided a JSEP to a createOffer");return}else if(!He&&(!ge||!ge.type||!ge.sdp)){Je.error("A valid JSEP is required for createAnswer"),G.error("A valid JSEP is required for createAnswer");return}G.media=G.media||{audio:!0,video:!0};var xe=G.media,ke=x[R];if(ke==null||ke.webrtcStuff===null||ke.webrtcStuff===void 0){Je.warn("Invalid handle"),G.error("Invalid handle");return}var ce=ke.webrtcStuff;if(ce.trickle=et(G.trickle),ce.pc===void 0||ce.pc===null)xe.update=!1,xe.keepAudio=!1,xe.keepVideo=!1;else if(ce.pc!==void 0&&ce.pc!==null){if(Je.log("Updating existing media session"),xe.update=!0,G.stream!==null&&G.stream!==void 0)G.stream!==ce.myStream&&Je.log("Renegotiation involves a new external stream");else{if(xe.addAudio){if(xe.keepAudio=!1,xe.replaceAudio=!1,xe.removeAudio=!1,xe.audioSend=!0,ce.myStream&&ce.myStream.getAudioTracks()&&ce.myStream.getAudioTracks().length){Je.error("Can't add audio stream, there already is one"),G.error("Can't add audio stream, there already is one");return}}else xe.removeAudio?(xe.keepAudio=!1,xe.replaceAudio=!1,xe.addAudio=!1,xe.audioSend=!1):xe.replaceAudio&&(xe.keepAudio=!1,xe.addAudio=!1,xe.removeAudio=!1,xe.audioSend=!0);if(ce.myStream===null||ce.myStream===void 0?(xe.replaceAudio&&(xe.keepAudio=!1,xe.replaceAudio=!1,xe.addAudio=!0,xe.audioSend=!0),N(xe)&&(xe.keepAudio=!1,xe.addAudio=!0)):ce.myStream.getAudioTracks()===null||ce.myStream.getAudioTracks()===void 0||ce.myStream.getAudioTracks().length===0?(xe.replaceAudio&&(xe.keepAudio=!1,xe.replaceAudio=!1,xe.addAudio=!0,xe.audioSend=!0),N(xe)&&(xe.keepVideo=!1,xe.addAudio=!0)):N(xe)&&!xe.removeAudio&&!xe.replaceAudio&&(xe.keepAudio=!0),xe.addVideo){if(xe.keepVideo=!1,xe.replaceVideo=!1,xe.removeVideo=!1,xe.videoSend=!0,ce.myStream&&ce.myStream.getVideoTracks()&&ce.myStream.getVideoTracks().length){Je.error("Can't add video stream, there already is one"),G.error("Can't add video stream, there already is one");return}}else xe.removeVideo?(xe.keepVideo=!1,xe.replaceVideo=!1,xe.addVideo=!1,xe.videoSend=!1):xe.replaceVideo&&(xe.keepVideo=!1,xe.addVideo=!1,xe.removeVideo=!1,xe.videoSend=!0);ce.myStream===null||ce.myStream===void 0||ce.myStream.getVideoTracks()===null||ce.myStream.getVideoTracks()===void 0||ce.myStream.getVideoTracks().length===0?(xe.replaceVideo&&(xe.keepVideo=!1,xe.replaceVideo=!1,xe.addVideo=!0,xe.videoSend=!0),L(xe)&&(xe.keepVideo=!1,xe.addVideo=!0)):L(xe)&&!xe.removeVideo&&!xe.replaceVideo&&(xe.keepVideo=!0),xe.addData&&(xe.data=!0)}if(N(xe)&&xe.keepAudio&&L(xe)&&xe.keepVideo){ke.consentDialog(!1),$e(R,ge,xe,G,ce.myStream);return}}if(xe.update&&!ce.streamExternal){if(xe.removeAudio||xe.replaceAudio){if(ce.myStream&&ce.myStream.getAudioTracks()&&ce.myStream.getAudioTracks().length){var X=ce.myStream.getAudioTracks()[0];Je.log("Removing audio track:",X),ce.myStream.removeTrack(X);try{X.stop()}catch{}}if(ce.pc.getSenders()&&ce.pc.getSenders().length){var Be=!0;if(xe.replaceAudio&&Je.unifiedPlan&&(Be=!1),Be)for(var lt in ce.pc.getSenders()){var X=ce.pc.getSenders()[lt];X&&X.track&&X.track.kind==="audio"&&(Je.log("Removing audio sender:",X),ce.pc.removeTrack(X))}}}if(xe.removeVideo||xe.replaceVideo){if(ce.myStream&&ce.myStream.getVideoTracks()&&ce.myStream.getVideoTracks().length){var X=ce.myStream.getVideoTracks()[0];Je.log("Removing video track:",X),ce.myStream.removeTrack(X);try{X.stop()}catch{}}if(ce.pc.getSenders()&&ce.pc.getSenders().length){var dt=!0;if(xe.replaceVideo&&Je.unifiedPlan&&(dt=!1),dt)for(var lt in ce.pc.getSenders()){var X=ce.pc.getSenders()[lt];X&&X.track&&X.track.kind==="video"&&(Je.log("Removing video sender:",X),ce.pc.removeTrack(X))}}}}if(G.stream!==null&&G.stream!==void 0){var Lt=G.stream;if(Je.log("MediaStream provided by the application"),Je.debug(Lt),xe.update&&ce.myStream&&ce.myStream!==G.stream&&!ce.streamExternal){try{var qt=ce.myStream.getTracks();for(var Si in qt){var he=qt[Si];Je.log(he),he!=null&&he.stop()}}catch{}ce.myStream=null}ce.streamExternal=!0,ke.consentDialog(!1),$e(R,ge,xe,G,Lt);return}if(N(xe)||L(xe)){if(!Je.isGetUserMediaAvailable()){G.error("getUserMedia not available");return}var Bi={mandatory:{},optional:[]};ke.consentDialog(!0);var yt=N(xe);yt===!0&&xe!=null&&xe!=null&&Ni(xe.audio)==="object"&&(yt=xe.audio);var wt=L(xe);if(wt===!0&&xe!=null&&xe!=null){var pt=G.simulcast===!0,Dt=G.simulcast2===!0;if((pt||Dt)&&!ge&&(xe.video===void 0||xe.video===!1)&&(xe.video="hires"),xe.video&&xe.video!="screen"&&xe.video!="window")if(Ni(xe.video)==="object")wt=xe.video;else{var St=0,Et=0;xe.video==="lowres"?(Et=240,St=320):xe.video==="lowres-16:9"?(Et=180,St=320):xe.video==="hires"||xe.video==="hires-16:9"||xe.video==="hdres"?(Et=720,St=1280):xe.video==="fhdres"?(Et=1080,St=1920):xe.video==="4kres"?(Et=2160,St=3840):xe.video==="stdres"?(Et=480,St=640):xe.video==="stdres-16:9"?(Et=360,St=640):(Je.log("Default video setting is stdres 4:3"),Et=480,St=640),Je.log("Adding media constraint:",xe.video),wt={height:{ideal:Et},width:{ideal:St}},Je.log("Adding video constraint:",wt)}else if(xe.video==="screen"||xe.video==="window"){var jt=function(Ii,ti){ke.consentDialog(!1),Ii?G.error(Ii):$e(R,ge,xe,G,ti)},_t=function(Ii,ti,Vi){Je.log("Adding media constraint (screen capture)"),Je.debug(Ii),navigator.mediaDevices.getUserMedia(Ii).then(function(Jt){Vi?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(At){Jt.addTrack(At.getAudioTracks()[0]),ti(null,Jt)}):ti(null,Jt)}).catch(function(Jt){ke.consentDialog(!1),ti(Jt)})};if(xe.screenshareFrameRate||(xe.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){navigator.mediaDevices.getDisplayMedia({video:!0}).then(function(Pi){ke.consentDialog(!1),N(xe)&&!xe.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(Ii){Pi.addTrack(Ii.getAudioTracks()[0]),$e(R,ge,xe,G,Pi)}):$e(R,ge,xe,G,Pi)},function(Pi){ke.consentDialog(!1),G.error(Pi)});return}if(Je.webRTCAdapter.browserDetails.browser==="chrome"){var Xt=Je.webRTCAdapter.browserDetails.version,ot=33;window.navigator.userAgent.match("Linux")&&(ot=35),Xt>=26&&Xt<=ot?(Bi={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:xe.screenshareFrameRate,maxFrameRate:xe.screenshareFrameRate,chromeMediaSource:"screen"}},audio:N(xe)&&!xe.keepAudio},_t(Bi,jt)):Je.extension.getScreen(function(Pi,Ii){if(Pi)return ke.consentDialog(!1),G.error(Pi);Bi={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:xe.screenshareFrameRate,maxFrameRate:xe.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},Bi.video.mandatory.chromeMediaSourceId=Ii,_t(Bi,jt,N(xe)&&!xe.keepAudio)})}else if(Je.webRTCAdapter.browserDetails.browser==="firefox")if(Je.webRTCAdapter.browserDetails.version>=33)Bi={video:{mozMediaSource:xe.video,mediaSource:xe.video},audio:N(xe)&&!xe.keepAudio},_t(Bi,function(Pi,Ii){if(jt(Pi,Ii),!Pi)var ti=Ii.currentTime,Vi=window.setInterval(function(){Ii||window.clearInterval(Vi),Ii.currentTime==ti&&(window.clearInterval(Vi),Ii.onended&&Ii.onended()),ti=Ii.currentTime},500)});else{var mi=new Error("NavigatorUserMediaError");mi.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",ke.consentDialog(!1),G.error(mi);return}return}}(xe==null||xe.video!=="screen")&&navigator.mediaDevices.enumerateDevices().then(function(Pi){var Ii=Pi.some(function(be){return be.kind==="audioinput"}),ti=De(xe)||Pi.some(function(be){return be.kind==="videoinput"}),Vi=N(xe),Jt=L(xe),At=fe(xe),j=re(xe);if(Vi||Jt||At||j){var T=Vi?Ii:!1,F=Jt?ti:!1;if(!T&&!F)return ke.consentDialog(!1),G.error("No capture device found"),!1;if(!T&&At)return ke.consentDialog(!1),G.error("Audio capture is required, but no capture device found"),!1;if(!F&&j)return ke.consentDialog(!1),G.error("Video capture is required, but no capture device found"),!1}var S={audio:Ii&&!xe.keepAudio?yt:!1,video:ti&&!xe.keepVideo?wt:!1};Je.debug("getUserMedia constraints",S),!S.audio&&!S.video?(ke.consentDialog(!1),$e(R,ge,xe,G,Lt)):navigator.mediaDevices.getUserMedia(S).then(function(be){ke.consentDialog(!1),$e(R,ge,xe,G,be)}).catch(function(be){ke.consentDialog(!1),G.error({code:be.code,name:be.name,message:be.message})})}).catch(function(Pi){ke.consentDialog(!1),G.error("enumerateDevices error",Pi)})}else $e(R,ge,xe,G)}function Ke(R,He){He=He||{},He.success=typeof He.success=="function"?He.success:Je.noop,He.error=typeof He.error=="function"?He.error:P;var G=He.jsep,ge=x[R];if(ge==null||ge.webrtcStuff===null||ge.webrtcStuff===void 0){Je.warn("Invalid handle"),He.error("Invalid handle");return}var xe=ge.webrtcStuff;if(G!=null){if(xe.pc===null){Je.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),He.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");return}xe.pc.setRemoteDescription(G).then(function(){if(Je.log("Remote description accepted!"),xe.remoteSdp=G.sdp,xe.candidates&&xe.candidates.length>0){for(var ke=0;ke<xe.candidates.length;ke++){var ce=xe.candidates[ke];Je.debug("Adding remote candidate:",ce),!ce||ce.completed===!0?xe.pc.addIceCandidate(Je.endOfCandidates):xe.pc.addIceCandidate(ce)}xe.candidates=[]}He.success()},He.error)}else He.error("Invalid JSEP")}function Ne(R,He,G){G=G||{},G.success=typeof G.success=="function"?G.success:Je.noop,G.error=typeof G.error=="function"?G.error:Je.noop,G.customizeSdp=typeof G.customizeSdp=="function"?G.customizeSdp:Je.noop;var ge=x[R];if(ge==null||ge.webrtcStuff===null||ge.webrtcStuff===void 0){Je.warn("Invalid handle"),G.error("Invalid handle");return}var xe=ge.webrtcStuff,ke=G.simulcast===!0;ke?Je.log("Creating offer (iceDone="+xe.iceDone+", simulcast="+ke+")"):Je.log("Creating offer (iceDone="+xe.iceDone+")");var ce={};if(Je.unifiedPlan){var X=null,Be=null,lt=xe.pc.getTransceivers();if(lt&&lt.length>0)for(var dt in lt){var Lt=lt[dt];if(Lt.sender&&Lt.sender.track&&Lt.sender.track.kind==="audio"||Lt.receiver&&Lt.receiver.track&&Lt.receiver.track.kind==="audio"){X||(X=Lt);continue}if(Lt.sender&&Lt.sender.track&&Lt.sender.track.kind==="video"||Lt.receiver&&Lt.receiver.track&&Lt.receiver.track.kind==="video"){Be||(Be=Lt);continue}}var qt=N(He),Si=I(He);!qt&&!Si?He.removeAudio&&X&&(X.setDirection?X.setDirection("inactive"):X.direction="inactive",Je.log("Setting audio transceiver to inactive:",X)):qt&&Si?X&&(X.setDirection?X.setDirection("sendrecv"):X.direction="sendrecv",Je.log("Setting audio transceiver to sendrecv:",X)):qt&&!Si?X&&(X.setDirection?X.setDirection("sendonly"):X.direction="sendonly",Je.log("Setting audio transceiver to sendonly:",X)):!qt&&Si&&(X?(X.setDirection?X.setDirection("recvonly"):X.direction="recvonly",Je.log("Setting audio transceiver to recvonly:",X)):(X=xe.pc.addTransceiver("audio",{direction:"recvonly"}),Je.log("Adding recvonly audio transceiver:",X)));var he=L(He),Bi=J(He);!he&&!Bi?He.removeVideo&&Be&&(Be.setDirection?Be.setDirection("inactive"):Be.direction="inactive",Je.log("Setting video transceiver to inactive:",Be)):he&&Bi?Be&&(Be.setDirection?Be.setDirection("sendrecv"):Be.direction="sendrecv",Je.log("Setting video transceiver to sendrecv:",Be)):he&&!Bi?Be&&(Be.setDirection?Be.setDirection("sendonly"):Be.direction="sendonly",Je.log("Setting video transceiver to sendonly:",Be)):!he&&Bi&&(Be?(Be.setDirection?Be.setDirection("recvonly"):Be.direction="recvonly",Je.log("Setting video transceiver to recvonly:",Be)):(Be=xe.pc.addTransceiver("video",{direction:"recvonly"}),Je.log("Adding recvonly video transceiver:",Be)))}else ce.offerToReceiveAudio=I(He),ce.offerToReceiveVideo=J(He);var yt=G.iceRestart===!0;yt&&(ce.iceRestart=!0),Je.debug(ce);var wt=L(He);if(wt&&ke&&Je.webRTCAdapter.browserDetails.browser==="firefox"){Je.log("Enabling Simulcasting for Firefox (RID)");var pt=xe.pc.getSenders().find(function(Et){return Et.track.kind=="video"});if(pt){var Dt=pt.getParameters();Dt||(Dt={});var St=we(G.simulcastMaxBitrates);Dt.encodings=[{rid:"h",active:!0,maxBitrate:St.high},{rid:"m",active:!0,maxBitrate:St.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:St.low,scaleResolutionDownBy:4}],pt.setParameters(Dt)}}xe.pc.createOffer(ce).then(function(Et){Je.debug(Et);var jt={type:Et.type,sdp:Et.sdp};if(G.customizeSdp(jt),Et.sdp=jt.sdp,Je.log("Setting local description"),wt&&ke&&(Je.webRTCAdapter.browserDetails.browser==="chrome"||Je.webRTCAdapter.browserDetails.browser==="safari"?(Je.log("Enabling Simulcasting for Chrome (SDP munging)"),Et.sdp=Oe(Et.sdp)):Je.webRTCAdapter.browserDetails.browser!=="firefox"&&Je.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),xe.mySdp=Et.sdp,xe.pc.setLocalDescription(Et).catch(G.error),xe.mediaConstraints=ce,!xe.iceDone&&!xe.trickle){Je.log("Waiting for all candidates...");return}Je.log("Offer ready"),Je.debug(G),G.success(Et)},G.error)}function at(R,He,G){G=G||{},G.success=typeof G.success=="function"?G.success:Je.noop,G.error=typeof G.error=="function"?G.error:Je.noop,G.customizeSdp=typeof G.customizeSdp=="function"?G.customizeSdp:Je.noop;var ge=x[R];if(ge==null||ge.webrtcStuff===null||ge.webrtcStuff===void 0){Je.warn("Invalid handle"),G.error("Invalid handle");return}var xe=ge.webrtcStuff,ke=G.simulcast===!0;ke?Je.log("Creating answer (iceDone="+xe.iceDone+", simulcast="+ke+")"):Je.log("Creating answer (iceDone="+xe.iceDone+")");var ce=null;if(Je.unifiedPlan){ce={};var X=null,Be=null,lt=xe.pc.getTransceivers();if(lt&&lt.length>0)for(var dt in lt){var Lt=lt[dt];if(Lt.sender&&Lt.sender.track&&Lt.sender.track.kind==="audio"||Lt.receiver&&Lt.receiver.track&&Lt.receiver.track.kind==="audio"){X||(X=Lt);continue}if(Lt.sender&&Lt.sender.track&&Lt.sender.track.kind==="video"||Lt.receiver&&Lt.receiver.track&&Lt.receiver.track.kind==="video"){Be||(Be=Lt);continue}}var qt=N(He),Si=I(He);if(!qt&&!Si){if(He.removeAudio&&X)try{X.setDirection?X.setDirection("inactive"):X.direction="inactive",Je.log("Setting audio transceiver to inactive:",X)}catch(St){Je.error(St)}}else if(qt&&Si){if(X)try{X.setDirection?X.setDirection("sendrecv"):X.direction="sendrecv",Je.log("Setting audio transceiver to sendrecv:",X)}catch(St){Je.error(St)}}else if(qt&&!Si)try{X&&(X.setDirection?X.setDirection("sendonly"):X.direction="sendonly",Je.log("Setting audio transceiver to sendonly:",X))}catch(St){Je.error(St)}else if(!qt&&Si)if(X)try{X.setDirection?X.setDirection("recvonly"):X.direction="recvonly",Je.log("Setting audio transceiver to recvonly:",X)}catch(St){Je.error(St)}else X=xe.pc.addTransceiver("audio",{direction:"recvonly"}),Je.log("Adding recvonly audio transceiver:",X);var he=L(He),Bi=J(He);if(!he&&!Bi){if(He.removeVideo&&Be)try{Be.setDirection?Be.setDirection("inactive"):Be.direction="inactive",Je.log("Setting video transceiver to inactive:",Be)}catch(St){Je.error(St)}}else if(he&&Bi){if(Be)try{Be.setDirection?Be.setDirection("sendrecv"):Be.direction="sendrecv",Je.log("Setting video transceiver to sendrecv:",Be)}catch(St){Je.error(St)}}else if(he&&!Bi){if(Be)try{Be.setDirection?Be.setDirection("sendonly"):Be.direction="sendonly",Je.log("Setting video transceiver to sendonly:",Be)}catch(St){Je.error(St)}}else if(!he&&Bi)if(Be)try{Be.setDirection?Be.setDirection("recvonly"):Be.direction="recvonly",Je.log("Setting video transceiver to recvonly:",Be)}catch(St){Je.error(St)}else Be=xe.pc.addTransceiver("video",{direction:"recvonly"}),Je.log("Adding recvonly video transceiver:",Be)}else Je.webRTCAdapter.browserDetails.browser=="firefox"||Je.webRTCAdapter.browserDetails.browser=="edge"?ce={offerToReceiveAudio:I(He),offerToReceiveVideo:J(He)}:ce={mandatory:{OfferToReceiveAudio:I(He),OfferToReceiveVideo:J(He)}};Je.debug(ce);var yt=L(He);if(yt&&ke&&Je.webRTCAdapter.browserDetails.browser==="firefox"){Je.log("Enabling Simulcasting for Firefox (RID)");var wt=xe.pc.getSenders()[1];Je.log(wt);var pt=wt.getParameters();Je.log(pt);var Dt=we(G.simulcastMaxBitrates);wt.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:Dt.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:Dt.medium},{rid:"low",active:!0,priority:"low",maxBitrate:Dt.low}]})}xe.pc.createAnswer(ce).then(function(St){Je.debug(St);var Et={type:St.type,sdp:St.sdp};if(G.customizeSdp(Et),St.sdp=Et.sdp,Je.log("Setting local description"),yt&&ke&&(Je.webRTCAdapter.browserDetails.browser==="chrome"?Je.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):Je.webRTCAdapter.browserDetails.browser!=="firefox"&&Je.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),xe.mySdp=St.sdp,xe.pc.setLocalDescription(St).catch(G.error),xe.mediaConstraints=ce,!xe.iceDone&&!xe.trickle){Je.log("Waiting for all candidates...");return}G.success(St)},G.error)}function Ut(R,He){He=He||{},He.success=typeof He.success=="function"?He.success:Je.noop,He.error=typeof He.error=="function"?He.error:Je.noop;var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0){Je.warn("Invalid handle, not sending anything");return}var ge=G.webrtcStuff;if(Je.log("Sending offer/answer SDP..."),ge.mySdp===null||ge.mySdp===void 0){Je.warn("Local SDP instance is invalid, not sending anything...");return}ge.mySdp={type:ge.pc.localDescription.type,sdp:ge.pc.localDescription.sdp},ge.trickle===!1&&(ge.mySdp.trickle=!1),Je.debug(He),ge.sdpSent=!0,He.success(ge.mySdp)}function Wt(R,He){var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0)return Je.warn("Invalid handle"),0;var ge=He?"remote":"local",xe=G.webrtcStuff;return xe.volume[ge]||(xe.volume[ge]={value:0}),xe.pc.getStats&&Je.webRTCAdapter.browserDetails.browser==="chrome"?He&&(xe.remoteStream===null||xe.remoteStream===void 0)?(Je.warn("Remote stream unavailable"),0):!He&&(xe.myStream===null||xe.myStream===void 0)?(Je.warn("Local stream unavailable"),0):xe.volume[ge].timer===null||xe.volume[ge].timer===void 0?(Je.log("Starting "+ge+" volume monitor"),xe.volume[ge].timer=setInterval(function(){xe.pc.getStats(function(ke){for(var ce=ke.result(),X=0;X<ce.length;X++){var Be=ce[X];Be.type=="ssrc"&&(He&&Be.stat("audioOutputLevel")?xe.volume[ge].value=parseInt(Be.stat("audioOutputLevel")):!He&&Be.stat("audioInputLevel")&&(xe.volume[ge].value=parseInt(Be.stat("audioInputLevel"))))}})},200),0):xe.volume[ge].value:(Je.warn("Getting the "+ge+" volume unsupported by browser"),0)}function kt(R,He){var G=x[R];if(G==null||G.webrtcStuff===null||G.webrtcStuff===void 0)return Je.warn("Invalid handle"),!0;var ge=G.webrtcStuff;return ge.pc===null||ge.pc===void 0?(Je.warn("Invalid PeerConnection"),!0):ge.myStream===void 0||ge.myStream===null?(Je.warn("Invalid local MediaStream"),!0):He?ge.myStream.getVideoTracks()===null||ge.myStream.getVideoTracks()===void 0||ge.myStream.getVideoTracks().length===0?(Je.warn("No video track"),!0):!ge.myStream.getVideoTracks()[0].enabled:ge.myStream.getAudioTracks()===null||ge.myStream.getAudioTracks()===void 0||ge.myStream.getAudioTracks().length===0?(Je.warn("No audio track"),!0):!ge.myStream.getAudioTracks()[0].enabled}function ee(R,He,G){var ge=x[R];if(ge==null||ge.webrtcStuff===null||ge.webrtcStuff===void 0)return Je.warn("Invalid handle"),!1;var xe=ge.webrtcStuff;return xe.pc===null||xe.pc===void 0?(Je.warn("Invalid PeerConnection"),!1):xe.myStream===void 0||xe.myStream===null?(Je.warn("Invalid local MediaStream"),!1):He?xe.myStream.getVideoTracks()===null||xe.myStream.getVideoTracks()===void 0||xe.myStream.getVideoTracks().length===0?(Je.warn("No video track"),!1):(xe.myStream.getVideoTracks()[0].enabled=!G,!0):xe.myStream.getAudioTracks()===null||xe.myStream.getAudioTracks()===void 0||xe.myStream.getAudioTracks().length===0?(Je.warn("No audio track"),!1):(xe.myStream.getAudioTracks()[0].enabled=!G,!0)}function me(R){var He=x[R];if(He==null||He.webrtcStuff===null||He.webrtcStuff===void 0)return Je.warn("Invalid handle"),"Invalid handle";var G=He.webrtcStuff;return G.pc===null||G.pc===void 0?"Invalid PeerConnection":G.pc.getStats?G.bitrate.timer===null||G.bitrate.timer===void 0?(Je.log("Starting bitrate timer (via getStats)"),G.bitrate.timer=setInterval(function(){G.pc.getStats().then(function(ge){ge.forEach(function(xe){if(xe){var ke=!1;if(((xe.mediaType==="video"||xe.id.toLowerCase().indexOf("video")>-1)&&xe.type==="inbound-rtp"&&xe.id.indexOf("rtcp")<0||xe.type=="ssrc"&&xe.bytesReceived&&(xe.googCodecName==="VP8"||xe.googCodecName===""))&&(ke=!0),ke)if(G.bitrate.bsnow=xe.bytesReceived,G.bitrate.tsnow=xe.timestamp,G.bitrate.bsbefore===null||G.bitrate.tsbefore===null)G.bitrate.bsbefore=G.bitrate.bsnow,G.bitrate.tsbefore=G.bitrate.tsnow;else{var ce=G.bitrate.tsnow-G.bitrate.tsbefore;Je.webRTCAdapter.browserDetails.browser=="safari"&&(ce=ce/1e3);var X=Math.round((G.bitrate.bsnow-G.bitrate.bsbefore)*8/ce);Je.webRTCAdapter.browserDetails.browser==="safari"&&(X=parseInt(X/1e3)),G.bitrate.value=X+" kbits/sec",G.bitrate.bsbefore=G.bitrate.bsnow,G.bitrate.tsbefore=G.bitrate.tsnow}}})})},1e3),"0 kbits/sec"):G.bitrate.value:(Je.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function P(R){Je.error("WebRTC error:",R)}function Y(R,He){Je.log("Cleaning WebRTC stuff");var G=x[R];if(G!=null){var ge=G.webrtcStuff;if(ge!=null){if(He===!0){var xe={rtcgw:"hangup",transaction:Je.randomString(12)};G.token!==null&&G.token!==void 0&&(xe.token=G.token),ae!=null&&(xe.apisecret=ae),Je.debug("Sending hangup request (handle="+R+"):"),Je.debug(xe),m?(xe.session_id=ue,xe.handle_id=R,t.send(JSON.stringify(xe))):Je.httpAPICall(c+"/"+ue+"/"+R,{verb:"POST",withCredentials:g,body:xe})}ge.remoteStream=null,ge.volume&&(ge.volume.local&&ge.volume.local.timer&&clearInterval(ge.volume.local.timer),ge.volume.remote&&ge.volume.remote.timer&&clearInterval(ge.volume.remote.timer)),ge.volume={},ge.bitrate.timer&&clearInterval(ge.bitrate.timer),ge.bitrate.timer=null,ge.bitrate.bsnow=null,ge.bitrate.bsbefore=null,ge.bitrate.tsnow=null,ge.bitrate.tsbefore=null,ge.bitrate.value=null;try{if(!ge.streamExternal&&ge.myStream!==null&&ge.myStream!==void 0){Je.log("Stopping local stream tracks");var ke=ge.myStream.getTracks();for(var ce in ke){var X=ke[ce];Je.log(X),X!=null&&X.stop()}}}catch{}ge.streamExternal=!1,ge.myStream=null;try{ge.pc.close()}catch{}ge.pc=null,ge.candidates=null,ge.mySdp=null,ge.remoteSdp=null,ge.iceDone=!1,ge.dataChannel={},ge.dtmfSender=null}G.oncleanup()}}function Oe(R){for(var He=R.split(`\r
`),G=!1,ge=[-1],xe=[-1],ke=null,ce=null,X=null,Be=null,lt=-1,dt=0;dt<He.length;dt++){var Lt=He[dt].match(/m=(\w+) */);if(Lt){var qt=Lt[1];if(qt==="video")if(ge[0]<0)G=!0;else{lt=dt;break}else if(ge[0]>-1){lt=dt;break}continue}if(G){var Si=He[dt].match(/a=ssrc-group:FID (\d+) (\d+)/);if(Si){ge[0]=Si[1],xe[0]=Si[2],He.splice(dt,1),dt--;continue}if(ge[0]){var he=He[dt].match("a=ssrc:"+ge[0]+" cname:(.+)");if(he&&(ke=he[1]),he=He[dt].match("a=ssrc:"+ge[0]+" msid:(.+)"),he&&(ce=he[1]),he=He[dt].match("a=ssrc:"+ge[0]+" mslabel:(.+)"),he&&(X=he[1]),he=He[dt].match("a=ssrc:"+ge[0]+" label:(.+)"),he&&(Be=he[1]),He[dt].indexOf("a=ssrc:"+xe[0])===0){He.splice(dt,1),dt--;continue}if(He[dt].indexOf("a=ssrc:"+ge[0])===0){He.splice(dt,1),dt--;continue}}if(He[dt].length==0){He.splice(dt,1),dt--;continue}}}if(ge[0]<0){lt=-1,G=!1;for(var dt=0;dt<He.length;dt++){var Lt=He[dt].match(/m=(\w+) */);if(Lt){var qt=Lt[1];if(qt==="video")if(ge[0]<0)G=!0;else{lt=dt;break}else if(ge[0]>-1){lt=dt;break}continue}if(G){if(ge[0]<0){var Bi=He[dt].match(/a=ssrc:(\d+)/);if(Bi){ge[0]=Bi[1],He.splice(dt,1),dt--;continue}}else{var he=He[dt].match("a=ssrc:"+ge[0]+" cname:(.+)");if(he&&(ke=he[1]),he=He[dt].match("a=ssrc:"+ge[0]+" msid:(.+)"),he&&(ce=he[1]),he=He[dt].match("a=ssrc:"+ge[0]+" mslabel:(.+)"),he&&(X=he[1]),he=He[dt].match("a=ssrc:"+ge[0]+" label:(.+)"),he&&(Be=he[1]),He[dt].indexOf("a=ssrc:"+xe[0])===0){He.splice(dt,1),dt--;continue}if(He[dt].indexOf("a=ssrc:"+ge[0])===0){He.splice(dt,1),dt--;continue}}if(He[dt].length==0){He.splice(dt,1),dt--;continue}}}}if(ge[0]<0)return Je.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),R;lt<0&&(lt=He.length),ge[1]=Math.floor(Math.random()*4294967295),ge[2]=Math.floor(Math.random()*4294967295),xe[1]=Math.floor(Math.random()*4294967295),xe[2]=Math.floor(Math.random()*4294967295);for(var dt=0;dt<ge.length;dt++)ke&&(He.splice(lt,0,"a=ssrc:"+ge[dt]+" cname:"+ke),lt++),ce&&(He.splice(lt,0,"a=ssrc:"+ge[dt]+" msid:"+ce),lt++),X&&(He.splice(lt,0,"a=ssrc:"+ge[dt]+" mslabel:"+X),lt++),Be&&(He.splice(lt,0,"a=ssrc:"+ge[dt]+" label:"+Be),lt++),ke&&(He.splice(lt,0,"a=ssrc:"+xe[dt]+" cname:"+ke),lt++),ce&&(He.splice(lt,0,"a=ssrc:"+xe[dt]+" msid:"+ce),lt++),X&&(He.splice(lt,0,"a=ssrc:"+xe[dt]+" mslabel:"+X),lt++),Be&&(He.splice(lt,0,"a=ssrc:"+xe[dt]+" label:"+Be),lt++);return He.splice(lt,0,"a=ssrc-group:FID "+ge[2]+" "+xe[2]),He.splice(lt,0,"a=ssrc-group:FID "+ge[1]+" "+xe[1]),He.splice(lt,0,"a=ssrc-group:FID "+ge[0]+" "+xe[0]),He.splice(lt,0,"a=ssrc-group:SIM "+ge[0]+" "+ge[1]+" "+ge[2]),R=He.join(`\r
`),R.endsWith(`\r
`)||(R+=`\r
`),R}function N(R){return Je.debug("isAudioSendEnabled:",R),R==null?!0:R.audio===!1?!1:R.audioSend===void 0||R.audioSend===null?!0:R.audioSend===!0}function fe(R){return Je.debug("isAudioSendRequired:",R),R==null||R.audio===!1||R.audioSend===!1||R.failIfNoAudio===void 0||R.failIfNoAudio===null?!1:R.failIfNoAudio===!0}function I(R){return Je.debug("isAudioRecvEnabled:",R),R==null?!0:R.audio===!1?!1:R.audioRecv===void 0||R.audioRecv===null?!0:R.audioRecv===!0}function L(R){return Je.debug("isVideoSendEnabled:",R),R==null?!0:R.video===!1?!1:R.videoSend===void 0||R.videoSend===null?!0:R.videoSend===!0}function re(R){return Je.debug("isVideoSendRequired:",R),R==null||R.video===!1||R.videoSend===!1||R.failIfNoVideo===void 0||R.failIfNoVideo===null?!1:R.failIfNoVideo===!0}function J(R){return Je.debug("isVideoRecvEnabled:",R),R==null?!0:R.video===!1?!1:R.videoRecv===void 0||R.videoRecv===null?!0:R.videoRecv===!0}function De(R){if(Je.debug("isScreenSendEnabled:",R),R==null||Ni(R.video)!=="object"||Ni(R.video.mandatory)!=="object")return!1;var He=R.video.mandatory;return He.chromeMediaSource?He.chromeMediaSource==="desktop"||He.chromeMediaSource==="screen":He.mozMediaSource?He.mozMediaSource==="window"||He.mozMediaSource==="screen":He.mediaSource?He.mediaSource==="window"||He.mediaSource==="screen":!1}function Ye(R){return Je.debug("isDataEnabled:",R),Je.webRTCAdapter.browserDetails.browser=="edge"?(Je.warn("Edge doesn't support data channels yet"),!1):R==null?!1:R.data===!0}function et(R){return Je.debug("isTrickleEnabled:",R),R==null?!0:R===!0}}window.Janus_Talk=Je;var yr=window.Janus_Talk,Ss=null,Ja=null,Fu="tts-"+Janus_Talk.randomString(12),ja=null;yr.init({debug:"all",callback:function(){window.stopTalk=function(){Ss.destroy()},window.startTalk=function(){if(!yr.isWebrtcSupported()){bootbox.alert("No WebRTC support... ");return}Ss=new yr({server:window.EZUIKit.opt.rtcUrl,success:function(){Ss.attach({plugin:"rtcgw.plugin.tts",opaqueId:Fu,success:function(n){Ja=n,yr.log("Plugin attached! ("+Ja.getPlugin()+", id="+Ja.getId()+")");var o=window.EZUIKit.opt.talkLink;console.log("ttsUlr",o);var l={request:"start",url:o,codec:"opus",dir:"sendrecv",audio_debug:1,url_version:"1"};window.EZUIKit.opt.talkType==="gb28181"&&(l.devProto="gb28181"),yr.debug("Trying a createOffer too (audio/video sendrecv)"),Ja.createOffer({media:{audio:!0,video:!1,data:!1},simulcast:!1,simulcast2:!1,success:function(c){yr.debug("Got SDP!"),yr.debug(c),Ja.send({message:l,jsep:c}),typeof window.EZUIKit.handleTalkSuccess<"u"&&window.EZUIKit.handleTalkSuccess()},error:function(c){yr.error("WebRTC error:",c),typeof window.EZUIKit.handleTalkError<"u"&&window.EZUIKit.handleTalkError(c)}})},error:function(n){console.error("  -- Error attaching plugin...",n),bootbox.alert("Error attaching plugin... "+n),window.EZUIKit.handleTalkError!=="undefined"&&window.EZUIKit.handleTalkError(n)},consentDialog:function(n){yr.debug("Consent dialog should be "+(n?"on":"off")+" now")},iceState:function(n){yr.log("ICE state changed to "+n)},mediaState:function(n,o){yr.log("Janus "+(o?"started":"stopped")+" receiving our "+n)},webrtcState:function(n){yr.log("Janus says our WebRTC PeerConnection is "+(n?"up":"down")+" now")},slowLink:function(n,o){yr.warn("Janus reports problems "+(n?"sending":"receiving")+" packets on this PeerConnection ("+o+" lost packets)")},onmessage:function(n,o){yr.debug(" ::: Got a message :::"),yr.debug(n),o!=null&&(yr.debug("Handling SDP as well..."),yr.debug(o),Ja.handleRemoteJsep({jsep:o}));var l=n.result;if(l!=null){if(l==="done"){bootbox.alert("The TTS Test is over"),ja!=null&&ja.stop(),ja=null;return}l==="msg"&&typeof window.EZUIKit.handleTalkMessage<"u"&&window.EZUIKit.handleTalkMessage(n);var d=l.status;d==="slow_link"&&toastr.warning("Janus apparently missed many packets we sent, maybe we should reduce the bitrate","Packet loss?",{timeOut:2e3})}},onlocalstream:function(n){yr.debug(" ::: Got a local stream :::"),yr.debug(n),yr.attachMediaStream(document.getElementById("myaudio"),n),Ja.webrtcStuff.pc.iceConnectionState!=="completed"&&Ja.webrtcStuff.pc.iceConnectionState!=="connected"&&(ja==null?document.getElementById("audioright"):ja.spin());var o=n.getAudioTracks();o==null||o.length},onremotestream:function(n){yr.debug(" ::: Got a remote stream :::"),yr.debug(n),yr.attachMediaStream(document.getElementById("peeraudio"),n);var o=n.getAudioTracks();o==null||o.length===0||document.getElementById("peeraudio").play()},ondataopen:function(n){yr.log("The DataChannel is available!")},ondata:function(n){yr.debug("We got data from the DataChannel! "+n)},oncleanup:function(){yr.log(" ::: Got a cleanup notification :::"),ja!=null&&ja.stop(),ja=null}})},error:function(t){yr.error(t),window.EZUIKit.handleTalkError!=="undefined"&&window.EZUIKit.handleTalkError(t)},destroyed:function(){}})}}}),window.janus=Ss,window.tts=Ja;var Cs=function(){function Z(m){var t=this;En(this,Z),this.jSPlugin=m,this.codeHandler=new wl,this.pluginStatus=new ys(this,this.jSPlugin.params.id),this.talkChannelNo=m.talkChannelNo;var n=document.createElement("div");n.id="audioleft";var o=document.createElement("div");o.id="audioright",o.style="display:none;";var l=document.createElement("audio");l.id="myaudio",l.muted=!0,l.setAttribute("autoplay",!0),l.setAttribute("controls",!0),n.appendChild(l),n.style="display:none;";var d=document.createElement("audio");d.id="peeraudio",d.setAttribute("autoplay",!0),d.setAttribute("controls",!0),o.appendChild(d),window.EZUIKit.handleTalkError=function(c){console.log("talk err",c),typeof t.jSPlugin.handleTalkError<"u"&&t.jSPlugin.handleTalkError(c)},window.EZUIKit.handleTalkSuccess=function(c){console.log("talk success",c),typeof t.jSPlugin.handleTalkSuccess<"u"&&t.jSPlugin.handleTalkSuccess(c)},window.EZUIKit.opt={rtcUrl:"",talkLink:"",ttsUrl:"",stream:"",deviceSerial:pn(this.jSPlugin.url).deviceSerial,channelNo:pn(this.jSPlugin.url).channelNo},document.body.appendChild(n),document.body.appendChild(o)}return Rn(Z,[{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"startTalk",value:function(t){var n=this;if(this.jSPlugin.capacity&&this.jSPlugin.capacity.support_talk&&!(this.jSPlugin.capacity&&(this.jSPlugin.capacity.support_talk==="3"||this.jSPlugin.capacity.support_talk==="1")))return typeof this.jSPlugin.params.handleError=="function"&&(this.pluginStatus.loadingSetText({text:"设备不支持对讲",color:"red",delayClear:2e3}),this.jSPlugin.params.handleError({msg:"设备不支持对讲",retcode:-1e3,id:this.jSPlugin.params.id,type:"handleError"})),console.log("设备不支持对讲"),!1;var o=new FormData;o.append("accessToken",this.jSPlugin.accessToken),o.append("deviceSerial",pn(this.jSPlugin.url).deviceSerial),o.append("channelNo",this.talkChannelNo||"0"),fetch(this.jSPlugin.env.domain+"/api/lapp/live/talk/url",{method:"POST",body:o}).then(function(l){return l.json()}).then(function(l){if(l.code==200){var d=l.data;if(d){var c=d.rtcUrl;c.indexOf("ws")===-1&&(c=c.replace("https","wss").replace("rtcgw","rtcgw-ws")),window.EZUIKit.opt.rtcUrl=c,window.EZUIKit.opt.ttsUrl="tts://"+d.ttsUrl,d.ttsUrl.indexOf("gb28181")>-1&&d.ttsUrl.indexOf("8664")>-1&&(window.EZUIKit.opt.ttsUrl=window.EZUIKit.opt.ttsUrl.replace("8664","8665")),window.EZUIKit.opt.deviceSerial=pn(n.jSPlugin.url).deviceSerial,window.EZUIKit.opt.channelNo=n.talkChannelNo||"0";var E="talk?dev="+window.EZUIKit.opt.deviceSerial+"&chann="+window.EZUIKit.opt.channelNo+"&encodetype=2";window.EZUIKit.opt.talkLink=window.EZUIKit.opt.ttsUrl.split("?")[0]+"/"+E,d.ttsUrl.indexOf("gb28181")>-1&&(window.EZUIKit.opt.talkType="gb28181"),t&&t(d.ttsUrl.indexOf("gb28181")>-1||window.EZUIKit.opt.deviceSerial.indexOf(":")!==-1),window.EZUIKit.opt.stream=d.stream,window.startTalk(),n.jSPlugin.eventEmitter&&n.jSPlugin.eventEmitter.emit("startTalk",{eventType:"startTalk",code:0,target:n,msg:"开启对讲"})}}else console.log(l.code,n.codeHandler.matchInfo(l.code,"talk")),n.pluginStatus.loadingSetText({text:n.codeHandler.matchInfo(l.code,"talk").msg||l.msg,color:"red",delayClear:2e3}),n.jSPlugin.eventEmitter&&n.jSPlugin.eventEmitter.emit("startTalk",{eventType:"startTalk",code:-1,target:n,msg:n.codeHandler.matchInfo(l.code,"talk").msg||l.msg}),typeof n.jSPlugin.params.handleError=="function"&&n.jSPlugin.params.handleError({msg:l.msg,retcode:l.code,id:n.jSPlugin.params.id,type:"handleError"})}).catch(function(l){console.log("err",l)})}},{key:"stopTalk",value:function(){window.stopTalk(),this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("stopTalk",{eventType:"stopTalk",code:0,target:this,msg:"结束对讲"}),document.getElementById("myaudio")&&document.getElementById("myaudio").srcObject&&document.getElementById("myaudio").srcObject.getTracks()[0].stop()}},{key:"changeTalkChannelNo",value:function(t){window.EZUIKit.opt&&window.EZUIKit.opt.channelNo&&(this.talkChannelNo=t,window.EZUIKit.opt.channelNo=t)}}]),Z}(),zu=function(){function Z(m){var t=this;En(this,Z),this.jSPlugin=m;var n=document.createElement("style");n.innerHTML=`
    body{
      padding: 0;
      margin: 0;
    }
    #mobile-ez-ptz-container {
      display: inline-block;
      width: 375px;
      text-align: center;
    }
    .live-ptz-title{
      height: 25px;
      font-size: 18px;
      color: #2c2c2c;
      text-align: center;
      font-weight: 700;
      margin: 24px 0 12px;
    }
    .live-ptz-intro {
      margin-bottom: 24px;
      color: #aaaaaa;
    }
    .mobile-ez-ptz-wrap {
      background-image: linear-gradient(180deg, #f6f8ff 0%, #ededed6b 50%)
    }
    #mobile-ez-ptz-container .mobile-ez-ptz-container {
      position: relative;
      width: 260px;
      height: 260px;
      background: rgba(255, 255, 255, 0.80);
      border: 1px solid rgba(255, 255, 255, 0.80);
      border-radius: 100%;
      cursor: pointer;
      overflow: hidden;
      margin: auto;
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top {
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-bottom: 6px solid #aaaaaa;
      position: absolute;
      display: inline-block;
      left: calc(50% - 6px);
      top: 10px;
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.top.active {
      border-bottom-color: #1890FF;
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom {
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 6px solid #aaaaaa;
      position: absolute;
      display: inline-block;
      left: calc(50% - 6px);
      bottom: 10px;
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.bottom.active {
      border-top-color: #1890FF;

    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right {
      width: 0;
      height: 0;
      border-top: 6px solid transparent;
      border-bottom: 6px solid transparent;
      border-left: 6px solid #aaaaaa;
      position: absolute;
      display: inline-block;
      top: calc(50% - 6px);
      right: 10px;
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.right.active {
      border-left-color: #1890FF;

    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left {
      width: 0;
      height: 0;
      border-top: 6px solid transparent;
      border-bottom: 6px solid transparent;
      border-right: 6px solid #aaaaaa;
      position: absolute;
      display: inline-block;
      top: calc(50% - 6px);
      left: 10px;
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .mobile-ez-ptz-icon.left.active {
      border-right-color: #1890FF;

    }

    #mobile-ez-ptz-container .mobile-ez-ptz-container .ez-ptz-main.center {
      width: 52px;
      height: 52px;
      background: #FFFFFF;
      border: 2px solid #eee;
      border-radius: 100%;
      top: calc(50% - 26px);
      left: calc(50% - 26px);
      position: absolute;
      /* box-shadow: 0px -39px 40px 6px #1890ff; */
    }

    #mobile-ez-ptz-container .mobile-ez-ptz-wrap {
      display: inline-block;
      padding: 24px 24px;
      border-radius: 100%;
      overflow: hidden;
    }

    #mobile-ez-ptz-container .ez-ptz-close {
      position: absolute;
      color: #FFFFFF;
      top: 0;
      right: 0px;
    }`,document.getElementsByTagName("head")[0].appendChild(n);var o=document.createElement("div");o.className="mobile-ez-ptz-container",o.id="mobile-ez-ptz-container",o.style="display:inline-block;width: ".concat(this.jSPlugin.width,"px;text-align:center;");var l=document.createElement("div");l.className="live-ptz-title",l.id="live-ptz-title",l.innerHTML="云台控制",document.getElementById("live-ptz-title")||o.appendChild(l);var d=document.createElement("div");d.className="live-ptz-intro",d.id="live-ptz-intro",d.innerHTML="请通过操控云台来调整摄像机视角",document.getElementById("live-ptz-intro")||o.appendChild(d);var c=document.createElement("div");c.id="mobile-ez-ptz-item",c.className="mobile-ez-ptz-wrap",c.innerHTML=`
    <div class="mobile-ez-ptz-container" id="mobile-ez-ptz-container">
      <div class="ez-ptz-main center"></div>
      <div class="mobile-ez-ptz-icon top default"></div>
      <div class="mobile-ez-ptz-icon left default"></div>
      <div class="mobile-ez-ptz-icon bottom default"></div>
      <div class="mobile-ez-ptz-icon right default"></div>
    </div>
      `,document.getElementById("mobile-ez-ptz-item")||o.appendChild(c),Oa(o,document.getElementById("".concat(this.jSPlugin.id,"-wrap"))),document.getElementById("mobile-ez-ptz-item").ontouchstart=function(E){E.preventDefault(),console.log("触摸开始"),t._handlePtzTouch(E,"start")},document.getElementById("mobile-ez-ptz-item").ontouchend=function(E){E.preventDefault(),console.log("触摸结束",E),t._handlePtzTouch(E,"stop")},document.getElementById("mobile-ez-ptz-item").onmousedown=function(E){E.preventDefault(),console.log("触摸开始"),t._handlePtzTouch(E,"start")},document.getElementById("mobile-ez-ptz-item").onmouseup=function(E){E.preventDefault(),console.log("触摸结束",E),t._handlePtzTouch(E,"stop")}}return Rn(Z,[{key:"show",value:function(){document.getElementById("mobile-ez-ptz-item").style="display: inline-block"}},{key:"hide",value:function(){document.getElementById("mobile-ez-ptz-item").style="display: none"}},{key:"_handlePtzTouch",value:function(t,n){var o=document.getElementById("mobile-ez-ptz-item").getBoundingClientRect(),l=o.left+130,d=o.top+130,c=t.x||t.changedTouches[0].clientX,E=t.y||t.changedTouches[0].clientY,C=c-l,y=E-d,w=0,g=this.jSPlugin.env.domain+"/api/lapp/device/ptz/start";Math.abs(C)>Math.abs(y)?C>0?(w=3,document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("default","active")):(w=2,document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("default","active")):y>0?(w=1,document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("default","active")):(w=0,document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("default","active")),document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(w===0?180:w===1?0:w===2?90:270,"deg, #c0ddf1 0%, rgba(100,143,252,0.00) 50%)"),n==="stop"&&(g=this.jSPlugin.env.domain+"/api/lapp/device/ptz/stop",document.getElementById("mobile-ez-ptz-item").style="",document.getElementsByClassName("mobile-ez-ptz-icon")[3].className=document.getElementsByClassName("mobile-ez-ptz-icon")[3].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[1].className=document.getElementsByClassName("mobile-ez-ptz-icon")[1].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[2].className=document.getElementsByClassName("mobile-ez-ptz-icon")[2].className.replace("active","default"),document.getElementsByClassName("mobile-ez-ptz-icon")[0].className=document.getElementsByClassName("mobile-ez-ptz-icon")[0].className.replace("active","default"));var p=new FormData;p.append("deviceSerial",pn(this.jSPlugin.url).deviceSerial),p.append("channelNo",pn(this.jSPlugin.url).channelNo),p.append("speed",1),p.append("direction",w),p.append("accessToken",this.jSPlugin.accessToken),fetch(g,{method:"POST",body:p}).then(function(te){return te.json()}).then(function(te){te.code==200||(te.code==60005||te.code==60002||te.code==60003||te.code==60004)&&(document.getElementById("mobile-ez-ptz-item").style="background-image:linear-gradient(".concat(w===0?180:w===1?0:w===2?90:270,"deg, #f45656 0%, rgba(100,143,252,0.00) 50%)"))}).catch(function(te){console.log("云台调用异常",te)})}}]),Z}(),Ou=0,Nu="成功",ju={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]},footer:{color:"#FFFFFF",backgroundColor:"rgb(0 0 0 / 0%)",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-0",iconId:"play",part:"left",defaultActive:1,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-1",iconId:"capturePicture",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-2",iconId:"sound",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-3",iconId:"pantile",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-4",iconId:"recordvideo",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-5",iconId:"talk",part:"left",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-6",iconId:"hd",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-7",iconId:"webExpend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-footer-8",iconId:"expend",part:"right",defaultActive:0,isrender:0,themeId:"f7896c8942c9476fb439370dd974f1c0"}]}},Uu={retcode:Ou,msg:Nu,data:ju},Hu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Rl={data:Hu},Vu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},kl={data:Vu},Gu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Il={data:Gu},Wu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-0",iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-1",iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-2",iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-f7896c8942c9476fb439370dd974f1c0-header-3",iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:1},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Dl={data:Wu},Zu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}},Al={data:Zu},Yu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Ml={data:Yu},Xu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:1},{iconId:"deviceName",part:"left",defaultActive:0,isrender:1},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:1},{iconId:"rec",part:"right",defaultActive:0,isrender:1}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:1},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:1},{iconId:"sound",part:"left",defaultActive:1,isrender:1},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:1},{iconId:"zoom",part:"left",defaultActive:0,isrender:1},{iconId:"speed",part:"right",defaultActive:0,isrender:1},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:1},{iconId:"expend",part:"right",defaultActive:0,isrender:1}]}},Bl={data:Xu},qu={header:{color:"#FFFFFF",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{iconId:"deviceID",part:"left",defaultActive:0,isrender:0},{iconId:"deviceName",part:"left",defaultActive:0,isrender:0},{iconId:"cloudRec",part:"right",defaultActive:0,isrender:0},{iconId:"rec",part:"right",defaultActive:0,isrender:0}]},footer:{color:"#FFFFFF",backgroundColor:"#00000080",activeColor:"#1890FF",btnList:[{iconId:"play",part:"left",defaultActive:1,isrender:0},{iconId:"capturePicture",part:"left",defaultActive:0,isrender:0},{iconId:"sound",part:"left",defaultActive:1,isrender:0},{iconId:"pantile",part:"left",defaultActive:0,isrender:0},{iconId:"recordvideo",part:"left",defaultActive:0,isrender:0},{iconId:"talk",part:"left",defaultActive:0,isrender:0},{iconId:"zoom",part:"left",defaultActive:0,isrender:0},{iconId:"speed",part:"right",defaultActive:0,isrender:0},{iconId:"hd",part:"right",defaultActive:0,isrender:0},{iconId:"webExpend",part:"right",defaultActive:0,isrender:0},{iconId:"expend",part:"right",defaultActive:0,isrender:0}]}},Ll={data:qu},Fl=[{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcLive",themeIntro:"PC直播全量版",themeName:"PC直播全量版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Il.data.header,footer:Il.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"security",themeIntro:"PC直播安防版",themeName:"PC直播安防版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Dl.data.header,footer:Dl.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"voice",themeIntro:"PC直播语音版",themeName:"PC直播语音版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Ml.data.header,footer:Ml.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"simple",themeIntro:"PC直播极简版",themeName:"PC直播极简版",themeType:"webLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"",header:Al.data.header,footer:Al.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"pcRec",themeIntro:"PC回放全量版",themeName:"PC回放全量版",themeType:"webRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_DmANlElAAA-xyivSaw030.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Bl.data.header,footer:Bl.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileLive",themeIntro:"Mobile直播全量版",themeName:"Mobile直播全量版",themeType:"mobileLive",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:Rl.data.header,footer:Rl.data.footer},{autoFocus:5,createTime:"2021-06-14T08:04:37.000Z",themeId:"mobileRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",header:kl.data.header,footer:kl.data.footer},{autoFocus:0,createTime:"2021-06-14T08:04:37.000Z",themeId:"miniRec",themeIntro:"Mobile回放全量版",themeName:"Mobile回放全量版",themeType:"mobileRec",updateTime:"2021-06-14T08:04:37.000Z",label:"官方",labelPic:"https://resource.eziot.com/group1/M00/00/8A/CtwQEmLr_GmAL5IhAABZs1vUK0s564.png",poster:"",header:Ll.data.header,footer:Ll.data.footer}],$o=function(){function Z(m){var t=this;En(this,Z),this.jSPlugin=m,this.enableZoom=!1,this.videoWidth=1920,this.videoHeight=1080,this.currentScale=1,this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080},this.clientRect=document.getElementById(m.id).getBoundingClientRect(),this.DOM=document.getElementById(m.id),this.isFullScreen=!1;var n=document.createElement("div");n.id="".concat(m.id,"-zoom-container"),n.style=`position: absolute;
    display:none;
    left: 12px;
    bottom: `.concat(m.isMobile?"48px":"80px",`;
    zoom: `).concat(m.isMobile?"0.8":"1");var o=`
    <div
    style="display: inline-flex;justify-content: space-between;flex-direction: column;width: 36px;height: 160px;background:rgba(0,0,0,0.60);border-radius: 2px;align-items: center;">
    <div id="`.concat(this.jSPlugin.id,`-scale-value" style="font-size: 12px;color:#FFFFFF;margin:10px 0;">2.0X</div>
    <div style="width: 20px;height: 20px;margin-bottom:4px;" id="`).concat(this.jSPlugin.id,`-addScale">
      <?xml version="1.0" encoding="utf-8"?>
      <svg version="1.1" fill="#FFFFFF" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
         viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">
      <title>放大</title>
      <g id="矩形">
        <rect class="st0" width="20" height="20" fill="none"/>
      </g>
      <g id="形状结合">
        <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5
          s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>
      </g>
      <g id="路径-4">
        <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>
      </g>
      <g id="路径-4备份">
        <path class="st2" d="M10,13.2c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C10.6,12.9,10.3,13.2,10,13.2z"/>
      </g>
      </svg>
    </div>
    <div style="
    position: relative;
    width: 2px;
    height: 64px;
    border-radius: 2px;
    background: rgba(255,255,255,0.75);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;">
    <div class="scale-body-line-dot" id="`).concat(this.jSPlugin.id,`-scale-body-line-dot" style="width: 6px;
      height: 6px;
      background: #FFFFFF;
      border-radius: 100%;
      position: absolute;
      border: 1px solid #407AFF;"></div>
      <div id="`).concat(this.jSPlugin.id,`-line-dot" style="width: 2px;
      height: 0%;
      border-radius: 2px;
      background: #407AFF;
      bottom: 0;"></div>
    </div>
    <div style="width: 20px;height: 20px;margin: 4px 0 10px;" id="`).concat(this.jSPlugin.id,`-subScale">
      <?xml version="1.0" encoding="utf-8"?>
      <svg fill="#FFFFFF" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 20 20" style="enable-background:new 0 0 20 20;" xml:space="preserve">
        <title>缩小</title>
        <g id="矩形">
          <rect class="st0" width="20" height="20" fill="none"/>
        </g>
        <g id="形状结合">
          <path class="st1" d="M10,3.8c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2S3.8,13.5,3.8,10S6.5,3.8,10,3.8z M10,5c-2.8,0-5,2.2-5,5
            s2.2,5,5,5s5-2.2,5-5S12.8,5,10,5z"/>
        </g>
        <g id="路径-4">
          <path class="st2" d="M12.5,10.7h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S12.8,10.7,12.5,10.7z"/>
        </g>
      </svg>
    </div>
  </div>
    `);n.innerHTML=o,document.getElementById("".concat(m.id,"-audioControls-left")).parentNode.appendChild(n),document.getElementById("".concat(m.id,"-addScale")).onclick=function(){t.addScale()},document.getElementById("".concat(m.id,"-subScale")).onclick=function(){t.subScale()}}return Rn(Z,[{key:"onMouseDown",value:function(t){var n=this.enableZoom;if(!n)return!1;this.moveX=t.clientX,this.moveY=t.clientY}},{key:"onMouseUp",value:function(t){var n=this.currentPosition,o=this.enableZoom;if(!o)return!1;n.left=n.left-(t.clientX-this.moveX),n.top=n.top-(t.clientY-this.moveY),this.doScale()}},{key:"onTouchstart",value:function(t){var n=this.enableZoom;if(!n||this.jSPlugin.use3DZoom||this.currentScale===1)return!1;var o=this.jSPlugin.beforeMobileZoomVerify();if(!o)return!1;if(!this.inited){var l=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=l.width,this.videoHeight=l.height,this.currentPosition.left=0,this.currentPosition.top=0,this.isFullScreen?(this.currentPosition.right=l.height,this.currentPosition.bottom=l.width):(this.currentPosition.right=l.width,this.currentPosition.bottom=l.height),this.inited=!0}var d=t.touches,c=d[0];if(c){var E={clientX:0,clientY:0};this.isFullScreen?(E.clientX=c.clientY,E.clientY=this.videoHeight-c.clientX):(E.clientX=c.clientX,E.clientY=c.clientY),this.point1=E}}},{key:"onTouchend",value:function(t){var n=this,o=this.currentPosition,l=this.enableZoom;if(!l)return!1;var d=t.changedTouches,c=d[0];this.isFullScreen?(o.top=o.top-(c.clientY-this.point1.clientX),o.left=o.left-(this.videoHeight-c.clientX-this.point1.clientY)):(o.left=o.left-(c.clientX-n.point1.clientX),o.top=o.top-(c.clientY-n.point1.clientY)),n.doScale()}},{key:"renderDot",value:function(){var t=this.currentScale;document.getElementById("".concat(this.jSPlugin.id,"-scale-value"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-value")).innerHTML="".concat(t,".0X")),document.getElementById("".concat(this.jSPlugin.id,"-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-line-dot")).style.height="".concat((t-1)/7*100,"%")),document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot"))&&(document.getElementById("".concat(this.jSPlugin.id,"-scale-body-line-dot")).style.bottom="calc(".concat((t-1)/7*100,"% - 3px)"))}},{key:"getTopMostElement",value:function(t,n,o){var l=t?t.getBoundingClientRect():null,d=n?n.getBoundingClientRect():null,c=o?o.getBoundingClientRect():null;if(!l&&!d&&!c)return null;if(!l)return d.top<c.top?n:o;if(!d)return l.top<c.top?t:o;if(!c)return l.top<d.top?t:n;var E=[l.top,d.top,c.top],C=Math.max.apply(Math,E);return l.top===C?t:d.top===C?n:o}},{key:"handleFullscreen",value:function(t,n,o){this.isFullScreen=t,this.clientRect={width:n,height:o}}},{key:"startZoom",value:function(){var t=this,n=this.jSPlugin.jSPlugin._JSPlayM4_GetFrameInfo(0);this.videoWidth=n.width||this.jSPlugin.width,this.videoHeight=n.height||this.jSPlugin.height,this.currentPosition.left=0,this.currentPosition.top=0,this.isFullScreen?(this.currentPosition.right=n.height,this.currentPosition.bottom=n.width,this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(this.videoWidth,0,0,this.videoHeight,!1)):(this.currentPosition.right=n.width,this.currentPosition.bottom=n.height,this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1)),this.currentScale=1,document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="block");try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1),this.jSPlugin.jSPlugin.bEZoom=!0,this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("startZoom",{eventType:"startZoom",code:0,target:this,msg:"开启电子放大"})}catch(o){console.log(o),this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("startZoom",{eventType:"startZoom",code:-1,target:this,msg:o||"开启电子放大失败"})}this.renderDot(),this.enableZoom=!0,this.jSPlugin.isMobile?(document.getElementById("".concat(this.jSPlugin.id,"canvas0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("touchstart",function(o){return t.onTouchstart(o)}),document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("touchend",function(o){return t.onTouchend(o)})),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("touchstart",function(o){return t.onTouchstart(o)}),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("touchend",function(o){return t.onTouchend(o)})),document.getElementById("".concat(this.jSPlugin.id,"-player"))&&(document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("touchstart",function(o){return t.onTouchstart(o)}),document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("touchend",function(o){return t.onTouchend(o)}))):(document.getElementById("".concat(this.jSPlugin.id,"canvas0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("mousedown",function(o){return t.onMouseDown(o)}),document.getElementById("".concat(this.jSPlugin.id,"canvas0")).addEventListener("mouseup",function(o){return t.onMouseUp(o)})),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0"))&&(document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mousedown",function(o){return t.onMouseDown(o)}),document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).addEventListener("mouseup",function(o){return t.onMouseUp(o)})),document.getElementById("".concat(this.jSPlugin.id,"-player"))&&(document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mousedown",function(o){return t.onMouseDown(o)}),document.getElementById("".concat(this.jSPlugin.id,"-player")).addEventListener("mouseup",function(o){return t.onMouseUp(o)})))}},{key:"stopZoom",value:function(){this.currentScale=1;try{this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1),this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("stopZoom",{eventType:"stopZoom",code:0,target:this,msg:"关闭电子放大"})}catch(t){console.log(t),this.jSPlugin.eventEmitter&&this.jSPlugin.eventEmitter.emit("stopZoom",{eventType:"stopZoom",code:-1,target:this,msg:t||"关闭电子放大失败"})}document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-zoom-container")).style.display="none"),this.renderDot(),this.enableZoom=!1}},{key:"doScale",value:function(){var t=this.currentPosition,n=this.currentScale;this.isFullScreen?(t.left=t.left+.5*(t.right-t.left)-.5*(this.videoWidth/(n*2)),t.left<0?t.left=0:t.left>this.videoWidth-this.videoWidth/(n*2)&&(t.left=this.videoWidth-this.videoWidth/(n*2)),t.right=t.left+this.videoWidth/(n*2),t.top=t.top+.5*(t.bottom-t.top)-.5*(this.videoHeight/(n*2)),t.top<0?t.top=0:t.top>this.videoHeight-this.videoHeight/(n*2)&&(t.top=this.videoHeight-this.videoHeight/(n*2)),t.bottom=t.top+this.videoHeight/(n*2)):(t.left=t.left+t.xPercent*(t.right-t.left)-.5*(this.videoWidth/n),t.left<0?t.left=0:t.left>this.videoWidth-this.videoWidth/n&&(t.left=this.videoWidth-this.videoWidth/n),t.right=t.left+this.videoWidth/n,t.top=t.top+t.yPercent*(t.bottom-t.top)-.5*(this.videoHeight/n),t.top<0?t.top=0:t.top>this.videoHeight-this.videoHeight/n&&(t.top=this.videoHeight-this.videoHeight/n),t.bottom=t.top+this.videoHeight/n),t.left=parseInt(t.left,10),t.right=parseInt(t.right,10),t.top=parseInt(t.top,10),t.bottom=parseInt(t.bottom,10);try{this.isFullScreen?this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(t.top,t.bottom,t.left,t.right,n!=1,!0):t.left<t.right&&t.top<t.bottom&&t.bottom<=this.videoHeight&&t.right<=this.videoWidth&&this.jSPlugin.jSPlugin._JSPlayM4_SetDisplayRegion(t.left,t.right,t.top,t.bottom,n!=1)}catch(o){console.log(o)}this.renderDot()}},{key:"addScale",value:function(){var t=this.currentScale,n=this.currentPosition;if(t>=8)return console.log("达到最大倍率了"),this.jSPlugin.Message&&this.jSPlugin.Message.default("已经放大到最大倍数8.0X",document.getElementById("".concat(this.jSPlugin.id))),!1;this.currentScale++,n.xPercent=.5,n.yPercent=.5,this.doScale()}},{key:"subScale",value:function(){var t=this.currentScale,n=this.currentPosition;if(t<=1)return console.log("达到最小倍率了"),!1;this.currentScale--,n.xPercent=.5,n.yPercent=.5,this.doScale()}}]),Z}(),Da=function(m){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GET",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},E="";c=Object.assign(c,d);var C=new Headers;Object.keys(c).map(function(g){C.append(g,c[g])}),c=C,Object.keys(Object.assign({},n)).forEach(function(g){var p=n[g];typeof n[g]=="string"&&(p=n[g].replace("%","%25")),!(typeof n[g]>"u")&&(E+="&".concat(g,"=").concat(encodeURIComponent(p)))}),E.length>0&&(E=["GET","PUT","DELETE"].indexOf(t.toUpperCase())!==-1?"?".concat(E.slice(1)):E.slice(1));var y=m+(["GET","PUT","DELETE"].indexOf(t.toUpperCase())!==-1?E:""),w={headers:c,method:t};t==="POST"&&(w.body=E),t==="POST"&&d&&d["Content-Type"]==="application/json"&&(w.body=JSON.stringify(n)),t==="GET"&&(y.indexOf("?")===-1?y+="?_r=".concat(Math.random()):y+="&_r=".concat(Math.random())),fetch(y,w).then(function(g){var p=g.headers.get("content-type");return p&&p.indexOf("application/json")!==-1?g.json():g.text()}).then(function(g){o&&o(g)}).catch(function(g){l&&l(g)})},zl=function(m,t,n,o,l,d){return`
<svg  id="`.concat(m,'-hdSelect-icon" class="theme-icon-item-icon ').concat(t,`-btn" data-type='hd' style="display: `).concat(["hd","0"].includes(d.level)?"flex":"none",'"  fill="').concat(n,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(o>l?48:32,'" height="').concat(o>l?48:32,`" viewBox="-6 -6 32 32">
    <path d="M17.4,16.5H3.1c-0.8,0-1.4-0.6-1.4-1.4V5.4c0-0.9,0.7-1.6,1.6-1.6h14.1c0.8,0,1.4,0.6,1.4,1.4v9.8 C18.8,15.9,18.2,16.5,17.4,16.5z M3.3,5C3.1,5,2.9,5.2,2.9,5.4v9.7c0,0.2,0.1,0.3,0.3,0.3h14.3c0.2,0,0.3-0.1,0.3-0.3V5.3 c0-0.2-0.1-0.3-0.3-0.3H3.3z" />
    <path d="M13.3,13.6h-1.6c-0.4,0-0.7-0.3-0.7-0.7V7.4c0-0.4,0.3-0.7,0.7-0.7h1.6c1.2,0,2.2,1,2.2,2.2v2.4 C15.6,12.6,14.6,13.6,13.3,13.6z M12.2,12.5h1.1c0.6,0,1.1-0.5,1.1-1.1V9c0-0.6-0.5-1.1-1.1-1.1h-1.1V12.5z" />
    <path d="M5.5,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3C5,7,5.2,6.8,5.5,6.8S6.1,7,6.1,7.3v5.7C6.1,13.4,5.8,13.6,5.5,13.6z" />
    <path d="M9.2,13.6c-0.3,0-0.6-0.2-0.6-0.6V7.3c0-0.3,0.2-0.6,0.6-0.6S9.8,7,9.8,7.3v5.7C9.8,13.4,9.5,13.6,9.2,13.6z" />
    <rect x="5.6" y="9.6" width="3.6" height="1.1" />
</svg>
`)},Ol=function(m,t,n,o,l,d){return`
<svg id="`.concat(m,'-sdSelect-icon" class="theme-icon-item-icon ').concat(t,`-btn" data-type='sd' style="display: `).concat(["sd","1"].includes(d.level)?"flex":"none",'"  fill="').concat(n,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(o>l?48:32,'" height="').concat(o>l?48:32,`" viewBox="-6 -8 40 44">
    <path d="M24.1,23.8h-20c-1.1,0-1.9-0.9-1.9-1.9V8.4c0-1.2,1-2.2,2.1-2.2h19.7c1.1,0,1.9,0.9,1.9,1.9v13.8
        C26,23,25.1,23.8,24.1,23.8z M4.3,7.7C4,7.7,3.7,8,3.7,8.4v13.5c0,0.2,0.2,0.4,0.4,0.4h20c0.2,0,0.4-0.2,0.4-0.4V8.2
        c0-0.2-0.2-0.4-0.4-0.4H4.3z"/>
    <path d="M18.4,19.8h-2.2c-0.5,0-0.9-0.4-0.9-0.9v-7.8c0-0.5,0.4-0.9,0.9-0.9h2.2c1.7,0,3.1,1.4,3.1,3.1v3.3
    C21.5,18.4,20.1,19.8,18.4,19.8z M16.7,18.3h1.6c0.9,0,1.6-0.7,1.6-1.6v-3.3c0-0.9-0.7-1.6-1.6-1.6h-1.6V18.3z"/>
    <path d="M10.5,19.8c1.2,0,2.1-0.3,2.7-0.9c0.6-0.6,0.9-1.3,0.9-2.1c0-0.8-0.3-1.4-0.9-1.8c-0.4-0.2-1.1-0.5-2.2-0.8
        l0,0l-1-0.2c-0.4-0.1-0.8-0.2-1-0.4c-0.4-0.2-0.6-0.5-0.6-0.9c0-0.4,0.1-0.6,0.4-0.9s0.7-0.3,1.3-0.3c0.8,0,1.4,0.2,1.8,0.6
        c0.2,0.3,0.3,0.6,0.4,0.9l0,0h1.4c0-0.6-0.2-1.1-0.5-1.6c-0.6-0.8-1.6-1.2-2.9-1.2c-1,0-1.8,0.3-2.4,0.8c-0.6,0.5-0.9,1.2-0.9,2
        c0,0.7,0.3,1.3,1,1.7c0.4,0.2,0.9,0.4,1.7,0.6l0,0l1.2,0.3c0.6,0.2,1.1,0.3,1.3,0.4c0.3,0.2,0.5,0.5,0.5,0.9c0,0.5-0.2,0.9-0.6,1.1
        s-0.9,0.4-1.5,0.4c-0.9,0-1.6-0.2-2-0.7c-0.2-0.3-0.3-0.6-0.4-1.1l0,0H6.8c0,0.9,0.3,1.6,0.9,2.2C8.2,19.5,9.2,19.8,10.5,19.8z"/>
    <defs>
    <filter id="Adobe_OpacityMaskFilter" filterUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5">
        <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>
    </filter>
    </defs>
    <mask maskUnits="userSpaceOnUse" x="15.2" y="10.3" width="6.2" height="9.5" id="mask-2_2_">
    <g class="st2">
        <path id="path-1_2_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4
        v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>
    </g>
    </mask>
    <defs>
    <filter id="Adobe_OpacityMaskFilter_1_" filterUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5">
        <feColorMatrix  type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0"/>
    </filter>
    </defs>
    <mask maskUnits="userSpaceOnUse" x="6.8" y="10.3" width="7.3" height="9.5" id="mask-2_3_">
    <g class="st5">
        <path id="path-1_3_" class="st3" d="M24.1,23.1h-20c-0.6,0-1.2-0.5-1.2-1.2V8.2C2.9,7.5,3.5,7,4.1,7h19.7c0.8,0,1.4,0.6,1.4,1.4
        v13.5C25.2,22.6,24.7,23.1,24.1,23.1z"/>
    </g>
    </mask>
</svg>
`)},Nl=[{name:"高清",level:"0",streamType:1,icon:zl},{name:"标清",level:"1",streamType:1,icon:Ol}],Ju=[{name:"高清",level:"hd",streamType:1,icon:zl},{name:"标清",level:"sd",streamType:2,icon:Ol}],Ts=function(m,t,n,o){var l=function(C){console.log(C),C.meta&&n(C)},d=function(C){console.log(C),o(C)},c="".concat(m.env.domain,"/api/service/media/template/getDetail?accessToken=").concat(m.accessToken,"&id=").concat(t);fetch(c,{method:"GET"}).then(function(E){return E.json()}).then(function(E){console.log("get theme data",E),l(E)}).catch(function(E){d(E)})},Ku=function(m,t,n,o,l){return new Promise(function(d,c){Ca("".concat(m,"/api/lapp/device/ptz/mirror"),"POST",{accessToken:t,deviceSerial:n,channelNo:o,command:l},"",d)})},$u=function(m,t,n,o){var l="".concat(m,"/api/service/device/capacity/video/quality?accessToken=").concat(t,"&deviceSerial=").concat(n,"&channelNo=").concat(o);return fetch(l,{method:"GET"}).then(function(d){return d.json()}).then(function(d){if(d.meta&&d.meta.code===200&&d.data&&d.data.length>0){var c=d.data.find(function(E){return E.streamTypeIn===2});if(c)return Ju}return Nl}).catch(function(){return Nl})},jl=function(m){var t="";return Object.keys(m).map(function(n,o){t+="".concat(n,":").concat(m[n]).concat(o<Object.keys(m).length-1?";":"")}),t},Wn=500,Qu=function(){function Z(m){var t=this;if(En(this,Z),this.jSPlugin=m,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.recordTimer=null,this.nextRate=1,this.showHD=!1,this.themeInited=!1,this.decoderState={state:{isEditing:!1,play:!1,pauseDate:null,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,zoom:!1,pantile:!1,hd:{},hdList:[],speed:!1,expend:!1,webExpend:!1,cloudRec:pn(m.url).type==="cloud.rec",rec:pn(m.url).type==="rec",type:pn(m.url).type}},this.allowZoom=!this.jSPlugin.use3DZoom,this.zoomDisable=!1,this.pluginStatus=new ys(this,this.jSPlugin.params.id),this.inited=!1,this.isMobile=Ko(),typeof m.isMobile<"u"&&(this.isMobile=m.isMobile),this.pauseTime=null,this.themeData=Uu.data,this.deviceQ,this.jSPlugin.themeId)switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":case"miniRec":var n=vr.find(Fl,function(o){return o.themeId===t.jSPlugin.themeId});n&&(this.themeData=n),this.initThemeData();break;case"themeData":this.themeData=this.jSPlugin.params.themeData,this.initThemeData();break;default:this.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new Cs(this.jSPlugin)),po("".concat(this.jSPlugin.staticPath,"/speed/speed.css")),po("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}return Rn(Z,[{key:"fetchThemeData",value:function(t){var n=this,o=function(c){c.meta.code==0&&c.data&&(n.themeData=c.data,c.data.header&&(n.themeData.header=c.data.header,n.themeData.header.btnList=n.themeData.header.btnList.sort(function(E,C){return E.btnKey.split("-")[3]-C.btnKey.split("-")[3]})),c.data.footer&&(n.themeData.footer=c.data.footer,n.themeData.footer.btnList=n.themeData.footer.btnList.sort(function(E,C){return E.btnKey.split("-")[3]-C.btnKey.split("-")[3]})),n.initThemeData(),n.renderThemeData())},l=function(){n.renderThemeData()};Ts(this.jSPlugin,t,o,l)}},{key:"changeTheme",value:function(t){var n=this;if(typeof t=="string")switch(this.jSPlugin.themeId=t,this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"security":case"voice":case"simple":case"miniRec":var o=vr.find(Fl,function(l){return l.themeId===n.jSPlugin.themeId});o&&(this.themeData=o),this.initThemeData();break;default:this.fetchThemeData(t);break}else Ni(t)==="object"&&(this.themeData=t,this.initThemeData(),this.decoderState.state.isEditing&&this.editStart());this.jSPlugin&&this.jSPlugin.handleThemeChange&&this.jSPlugin.handleThemeChange(t)}},{key:"renderThemeData",value:function(){var t=this,n=this.themeData,o=n.header,l=n.footer;if(this.isNeedRenderHeader&&o&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=o.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=o.color.replace("-diy",""),o.btnList.map(function(C,y){C.isrender&&t.setDecoderState(ln({},C.iconId,t.decoderState.state[C.iconId]))})),this.isNeedRenderFooter&&l)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=l.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=l.color.replace("-diy",""),l.btnList.map(function(C,y){if(C.isrender&&t.setDecoderState(ln({},C.iconId,t.decoderState.state[C.iconId])),C.iconId==="play"&&C.defaultActive&&!t.themeInited)var w=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(w),t.jSPlugin.play(),t.themeInited=!0)},50)}),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",function(){document.getElementById("".concat(t.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),t.startAutoFocus()})),this.setDecoderState({cloudRec:pn(this.jSPlugin.url).type==="cloud.rec",rec:pn(this.jSPlugin.url).type==="rec",type:pn(this.jSPlugin.url).type});else if(!this.themeInited)var d=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(d),t.jSPlugin.play(),t.themeInited=!0)},50);var c=vr.findIndex(this.themeData.footer.btnList,function(C){return C.iconId==="zoom"&&C.isrender>0})>=0;c&&(this.isMobile&&!this.jSPlugin.use3DZoom&&(this.jSPlugin.beforeMobileZoomVerify=function(){var C=t.decoderState.state.play;return!!C}),this.jSPlugin.Zoom=new $o(this.jSPlugin));var E=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(E),t.jSPlugin.reSize(t.jSPlugin.params.width,t.jSPlugin.params.height))},50)}},{key:"setDecoderState",value:function(t){var n=this,o=this.themeData,l=o.header,d=o.footer;Object.keys(t).map(function(c,E){var C="#FFFFFF",y="#FFFFFF",w=l.btnList.findIndex(function(g){return g.iconId===c});switch(w===-1?(C=d.color.replace("-diy",""),y=d.activeColor.replace("-diy","")):(C=l.color.replace("-diy",""),y=d.activeColor.replace("-diy","")),c){case"play":t[c]?document.getElementById("".concat(n.jSPlugin.id,"-play"))&&(document.getElementById("".concat(n.jSPlugin.id,"-play-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-play-content")).children[0].children[1].style="display:none",document.getElementById("".concat(n.jSPlugin.id,"-play")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-play-content")).childNodes[0].children[0].style.fill=t[c]?y:C):document.getElementById("".concat(n.jSPlugin.id,"-play"))&&(document.getElementById("".concat(n.jSPlugin.id,"-play-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-play-content")).children[0].children[0].style="display:none",document.getElementById("".concat(n.jSPlugin.id,"-play")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-play-content")).childNodes[0].children[1].style.fill=t[c]?y:C);break;case"sound":document.getElementById("".concat(n.jSPlugin.id,"-sound"))&&(t[c]?(document.getElementById("".concat(n.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none",document.getElementById("".concat(n.jSPlugin.id,"-sound")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=t[c]?y:C):(document.getElementById("".concat(n.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none",document.getElementById("".concat(n.jSPlugin.id,"-sound")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-sound-content")).childNodes[0].children[0].style.fill=t[c]?y:C));break;case"recordvideo":document.getElementById("".concat(n.jSPlugin.id,"-recordvideo"))&&(document.getElementById("".concat(n.jSPlugin.id,"-recordvideo")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-recordvideo-content")).childNodes[0].style.fill=t[c]?y:C,t[c]?n.countTime("add",0):n.countTime("destroy",0));break;case"talk":document.getElementById("".concat(n.jSPlugin.id,"-talk"))&&(document.getElementById("".concat(n.jSPlugin.id,"-talk")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=t[c]?y:C);break;case"zoom":document.getElementById("".concat(n.jSPlugin.id,"-zoom"))&&(document.getElementById("".concat(n.jSPlugin.id,"-zoom")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-zoom-content")).childNodes[1].style.fill=t[c]?y:C);break;case"pantile":document.getElementById("".concat(n.jSPlugin.id,"-pantile"))&&(document.getElementById("".concat(n.jSPlugin.id,"-pantile")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-pantile-content")).childNodes[0].style.fill=t[c]?y:C);break;case"webExpend":t[c]?(document.getElementById("".concat(n.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:none"),document.getElementById("".concat(n.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-expend")).className="disabled")):(document.getElementById("".concat(n.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-webExpend-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-webExpend-content")).children[0].children[1].style="display:none"),document.getElementById("".concat(n.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-expend")).className="")),document.getElementById("".concat(n.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-webExpend")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[0].style.fill=t[c]?y:C,document.getElementById("".concat(n.jSPlugin.id,"-webExpend-content")).childNodes[0].childNodes[1].style.fill=t[c]?y:C);break;case"capturePicture":document.getElementById("".concat(n.jSPlugin.id,"-capturePicture"))&&(document.getElementById("".concat(n.jSPlugin.id,"-capturePicture")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-capturePicture-content")).childNodes[0].style.fill=t[c]?y:C);break;case"expend":t[c]?(document.getElementById("".concat(n.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:none"),document.getElementById("".concat(n.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-webExpend")).className="disabled")):(document.getElementById("".concat(n.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-expend-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(n.jSPlugin.id,"-expend-content")).children[0].children[1].style="display:none"),document.getElementById("".concat(n.jSPlugin.id,"-webExpend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-webExpend")).className="")),document.getElementById("".concat(n.jSPlugin.id,"-expend"))&&(document.getElementById("".concat(n.jSPlugin.id,"-expend")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[0].style.fill=t[c]?y:C,document.getElementById("".concat(n.jSPlugin.id,"-expend-content")).childNodes[0].childNodes[1].style.fill=t[c]?y:C);break;case"hd":break;case"speed":document.getElementById("".concat(n.jSPlugin.id,"-speed"))&&(document.getElementById("".concat(n.jSPlugin.id,"-speed-content")).children[1].children[0].style.color=t[c]?y:C,document.getElementById("".concat(n.jSPlugin.id,"-speed-content")).children[1].children[0].style.borderColor=t[c]?y:C),document.getElementById("".concat(n.jSPlugin.id,"-select-mask"))&&(n.isMobile&&t[c]?document.getElementById("".concat(n.jSPlugin.id,"-select-mask")).style.display="block":document.getElementById("".concat(n.jSPlugin.id,"-select-mask")).style.display="none");break;case"cloudRec":document.getElementById("".concat(n.jSPlugin.id,"-cloudRec"))&&(console.log("document.getElementById(`${this.jSPlugin.id}-cloudRec-content`)",document.getElementById("".concat(n.jSPlugin.id,"-cloudRec"))),document.getElementById("".concat(n.jSPlugin.id,"-cloudRec")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=t[c]?y:C),document.getElementById("".concat(n.jSPlugin.id,"-rec"))&&(document.getElementById("".concat(n.jSPlugin.id,"-rec")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=t[c]?C:y);break;case"rec":document.getElementById("".concat(n.jSPlugin.id,"-cloudRec"))&&(document.getElementById("".concat(n.jSPlugin.id,"-cloudRec")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-cloudRec-content")).children[0].children[0].style.fill=t[c]?C:y),document.getElementById("".concat(n.jSPlugin.id,"-rec"))&&(document.getElementById("".concat(n.jSPlugin.id,"-rec")).className=t[c]?"active":"",document.getElementById("".concat(n.jSPlugin.id,"-rec-content")).children[0].children[0].style.fill=t[c]?y:C);break}n.decoderState.state=Object.assign(n.decoderState.state,t)})}},{key:"startAutoFocus",value:function(){var t=this,n=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout(function(){document.getElementById("".concat(t.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.pointerEvents="none")},n*1e3)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer)}},{key:"hideFooter",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="none")}},{key:"showFooter",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.display="block")}},{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"renderFooter",value:function(t,n){var o=this,l=this.matchBtn(t),d=document.createElement("div");d.className="theme-icon-item",d.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(l.id,'-content" title="').concat(l.title,'" style="height:').concat(this.jSPlugin.width>Wn?48:32,'px;display: flex;align-items: center;position:relative;">')).concat(l.domString,"</div>")+"</span>",d.onclick=function(y){if(o.decoderState.state.isEditing)return!1;l.onclick(y)},l.onmouseenter&&(d.onmouseenter=function(y){if(o.decoderState.state.isEditing)return!1;l.onmouseenter(y)}),l.onmouseleave&&(d.onmouseleave=function(y){if(o.decoderState.state.isEditing)return!1;l.onmouseleave(y)});var c=document.createElement("span");c.className="icon-move left",c.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'-left" title="左移" style="position: absolute;top: calc(50% - 10px);left: -4px;"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080;"><path d="M7.4,10V5.3c0-0.3-0.3-0.6-0.6-0.6c-0.1,0-0.3,0.1-0.4,0.2L3.7,7.4c-0.2,0.2-0.3,0.6,0,0.8 c0,0,0,0,0.1,0.1l2.7,2.2c0.2,0.2,0.6,0.2,0.8-0.1C7.3,10.3,7.4,10.2,7.4,10z"></path></svg></span>'),c.onclick=function(){o.editIcon(l.id,"left","footer")},d.appendChild(c);var E=document.createElement("span");E.className="icon-move right",E.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'-right" class="ezuikit-theme-icon" title="右移" style="position: absolute;top: calc(50% - 10px);left: calc(100% - 8px);"><svg fill="#ffffff" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="24" viewBox="0 0 10 15" style="background:#00000080"><path d="M3.4,5.2v4.7c0,0.3,0.3,0.6,0.6,0.6c0.1,0,0.3-0.1,0.4-0.2l2.7-2.5c0.2-0.2,0.3-0.6,0-0.8 c0,0,0,0-0.1-0.1L4.4,4.8C4.1,4.6,3.8,4.6,3.6,4.9C3.5,5,3.4,5.1,3.4,5.2z"></path></svg></span>'),E.onclick=function(){o.editIcon(l.id,"right","footer")},d.appendChild(E);var C=document.createElement("span");C.className="icon-move close",C.innerHTML='<span id="'.concat(l.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -10px;right: -10px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span>',C.onclick=function(){o.editIcon(l.id,"delete","footer")},d.appendChild(C),n==="left"?document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[0].appendChild(d):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).childNodes[1].appendChild(d)}},{key:"editIcon",value:function(t,n,o){console.log("编辑组件",t,n,o);var l=this.themeData;console.log("themeData",this.themeData);var d=this.themeData[o].btnList,c=vr.findIndex(d,function(p){return p.iconId===t}),E=d[c];switch(n){case"delete":if(t==="rec"){if(vr.findIndex(d,function(p){return p.iconId==="cloudRec"&&p.isrender==1})===-1)return this.jSPlugin.Message&&this.jSPlugin.Message.default("必须选中一种存储介质"),!1}else if(t==="cloudRec"&&vr.findIndex(d,function(p){return p.iconId==="rec"&&p.isrender==1})===-1)return this.jSPlugin.Message&&this.jSPlugin.Message.default("必须选中一种存储介质"),!1;d[c].isrender=0;break;case"right":for(var C=-1,y=c+1;y<d.length;y++)if(d[y].part===d[c].part&&d[y].isrender==1){C=y;break}C!==-1&&(d[c]=d[C],d[C]=E);break;case"left":for(var w=-1,g=c-1;g>=0;g--)if(d[g].part===d[c].part&&d[g].isrender==1){w=g;break}w!==-1&&(d[c]=d[w],d[w]=E);break}l[o].btnList=d,this.changeTheme(l)}},{key:"renderHeader",value:function(t,n){var o=this,l=this.matchBtn(t),d=document.createElement("div");d.className="theme-icon-item",d.style="max-width:50%;",d.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'" style="position:relative;";>')+'<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'-content" title="').concat(l.title,'" style="display:inline-block;height:').concat(this.width>Wn?48:32,'px;">')).concat(l.domString,"</span>")+'<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'-remove" title="移除" style="position: absolute;top: -6px;left: 38px;display: none;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span></span>',d.onclick=function(E){if(o.decoderState.state.isEditing)return!1;l.onclick(E)};var c=document.createElement("span");c.className="icon-move close",c.innerHTML='<span id="'.concat(l.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -6px;">')+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><circle style="fill-rule:evenodd;clip-rule:evenodd;fill-opacity:0.8011;" cx="7.5" cy="7.6" r="7" /><rect x="3.9" y="3.5" class="st1" style="fill:none;" width="8.1" height="8.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="5" x2="10" y2="10.1" /><line style="fill:none;stroke:#ffffff;stroke-width:0.5833;stroke-linecap:round;" x1="4.9" y1="10.1" x2="10" y2="5" /></svg></span>',c.onclick=function(){o.editIcon(l.id,"delete","header")},d.appendChild(c),n==="left"?document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(d):document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[1].appendChild(d)}},{key:"countTime",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var l=document.createElement("div");l.id=this.jSPlugin.id+"time-area",l.className="time-area",l.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(l)}if(this.countTimer&&clearInterval(this.countTimer),t==="add"){var d=n;document.getElementById(o.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval(function(){++d,document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML=c(d)},1e3)}else t==="destroy"&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(o.jSPlugin.id+"time-area")&&(document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(o.jSPlugin.id+"time-area").style.display="none"));function c(E){var C=parseInt(E),y=0,w=0,g="00",p="00",te="00";return C>59&&(y=parseInt(C/60),C=parseInt(C%60),y>59&&(w=parseInt(y/60),y=parseInt(y%60))),g=parseInt(C)>9?parseInt(C):"0"+parseInt(C),p=parseInt(y)>9?parseInt(y):"0"+parseInt(y),te=parseInt(w)>9?parseInt(w):"0"+parseInt(w),w>0?te+":"+p+":"+g:y>0?p+":"+g:"00:"+g}}},{key:"setDisabled",value:function(t){var n=this.decoderState.state.sound,o=t?"cursor: not-allowed; fill: gray; color: gray":"cursor: default";document.getElementById(n?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon"))!=null&&document.getElementById(n?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon")).setAttribute("style",t?"cursor: not-allowed;fill: gray":"cursor: default"),document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-recordvideo-icon")).setAttribute("style",o),document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-capturePicture-icon")).setAttribute("style",o),document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",o),this.allowZoom||document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-zoom-icon")).setAttribute("style",o),document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-pantile-icon")).setAttribute("style",o);var l=document.getElementsByClassName("".concat(this.jSPlugin.id,"-select-quality-btn"));if(l.length)for(var d=0;d<l.length;d++)t?(l[d].style.cursor="not-allowed",l[d].style.fill="gray",l[d].style.color="gray"):(l[d].style.cursor="default",l[d].style.fill="",l[d].style.color="");document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).setAttribute("style",document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).getAttribute("style")+";"+(t?"cursor: not-allowed;color: gray;border-color: gray;":"cursor: default;color: #ffffff;border-color: #ffffff;")),this.zoomDisable=this.jSPlugin.use3DZoom&&t}},{key:"matchBtn",value:function(t){var n=this,o=this.themeData,l=o.header,d=o.footer,c={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},E=l.btnList.findIndex(function(w){return w.iconId===t});switch(E===-1?(c.color=d.color,c.backgroundColor=d.backgroundColor,c.activeColor=d.activeColor):(c.color=l.color,c.backgroundColor=l.backgroundColor,c.activeColor=l.activeColor),t){case"play":c.title="播放/结束播放",c.id=t,c.domString='<div style="height: 100%">'+'<svg id="'.concat(this.jSPlugin.id+"-play-icon",'" class="theme-icon-item-icon" style="display:none" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'"  fill="').concat(c.color,`" viewBox="-6 -6 32 32">
            <path id="Stroke-1" class="st1" d="M10.5,1.7c-4.9,0-8.8,4-8.8,8.8s4,8.8,8.8,8.8s8.8-4,8.8-8.8S15.4,1.7,10.5,1.7z M10.5,2.7
              c4.3,0,7.8,3.5,7.8,7.8s-3.5,7.8-7.8,7.8s-7.8-3.5-7.8-7.8S6.2,2.7,10.5,2.7z"/>
            <path class="st2" d="M8.7,8C9,8,9.3,8.3,9.3,8.6v3.8C9.3,12.7,9,13,8.7,13C8.3,13,8,12.7,8,12.4V8.6C8,8.3,8.3,8,8.7,8z"/>
            <path id="Rectangle-Copy-10" class="st2" d="M12.8,8c0.3,0,0.6,0.3,0.6,0.6v3.8c0,0.3-0.3,0.6-0.6,0.6c-0.3,0-0.6-0.3-0.6-0.6V8.6
              C12.2,8.3,12.5,8,12.8,8z"/>
          </svg>`)+'<svg id="'.concat(this.jSPlugin.id+"-stop-icon",'" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M13,9.8L10.1,8C9.9,7.9,9.7,7.9,9.5,7.9c-0.6,0-1,0.4-1,1v3.7c0,0.2,0.1,0.4,0.2,0.5c0.3,0.5,0.9,0.6,1.4,0.3 l2.9-1.8c0.1-0.1,0.2-0.2,0.3-0.3C13.6,10.7,13.4,10.1,13,9.8z" /><path d="M10.5,1.9c-4.9,0-8.8,4-8.8,8.8c0,4.9,4,8.8,8.8,8.8s8.8-4,8.8-8.8C19.4,5.8,15.4,1.9,10.5,1.9z M10.5,18.5 c-4.3,0-7.8-3.5-7.8-7.8s3.5-7.8,7.8-7.8c4.3,0,7.8,3.5,7.8,7.8S14.9,18.5,10.5,18.5z" /></svg></div>',c.onclick=function(){var w=n.decoderState.state,g=w.play,p=w.isEditing,te=w.rec,ae=w.cloudRec,de=w.recordvideo,ie=w.pantile;if(p)return!1;n.jSPlugin.recTimer&&clearInterval(n.jSPlugin.recTimer),g?(te||ae?(n.Rec&&n.Rec.unSyncTimeLine(),n.jSPlugin.pause().then(function(){n.setDecoderState({play:!g}),n.setDisabled(g)})):(n.jSPlugin.stop().then(function(){n.setDecoderState({play:!g}),n.setDisabled(g)}),n.jSPlugin.Zoom.stopZoom(),n.jSPlugin.close3DZoom()),de&&n.setDecoderState({recordvideo:!1})):(te||ae?(n.Rec&&n.Rec.syncTimeLine(),n.jSPlugin.resume().then(function(){n.setDecoderState({play:!g}),n.setDisabled(g)})):n.jSPlugin.play().then(function(){n.setDecoderState({play:!g}),n.setDisabled(g)}),n.jSPlugin.use3DZoom&&n.resetMobileZoomStatus()),n.jSPlugin.use3DZoom?(n.setDecoderState({zoom:!1}),n.allowZoom=!1):n.allowZoom=te||ae,ie&&n.Ptz&&(n.Ptz.hide(),n.setDecoderState({pantile:!1})),document.getElementById("".concat(n.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.display="none")};break;case"sound":c.title="声音",c.id=t,c.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,`" viewBox="-6 -6 32 32">
            <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>
            <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>
            <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>
            <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>
            </svg>`)+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" fill="').concat(c.color,`" viewBox="-6 -6 32 32">
              <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7
                c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>
              <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3
                c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>
              <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8
                C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0
                L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>
              <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4
                c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4
                c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>
            </svg>`)+"</span>",c.onclick=function(){var w=n.decoderState.state,g=w.play,p=w.sound,te=w.talk,ae=w.pantile;g&&!te&&(p?(n.jSPlugin.closeSound(),n.setDecoderState({sound:!1})):(n.jSPlugin.openSound(),n.setDecoderState({sound:!0})),ae&&n.Ptz&&(n.Ptz.hide(),n.setDecoderState({pantile:!1})))};break;case"recordvideo":c.title="录屏",c.id=t,c.domString='<svg id="'.concat(this.jSPlugin.id,'-recordvideo-icon" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M11.6,5.3H4.7c-1.4,0-2.5,1.1-2.5,2.5v5.9c0,1.4,1.1,2.5,2.5,2.5h6.9c1.4,0,2.5-1.1,2.5-2.5V7.7 C14.1,6.4,13,5.3,11.6,5.3z M4.7,6.3h6.9c0.8,0,1.5,0.7,1.5,1.5v5.9c0,0.8-0.7,1.5-1.5,1.5H4.7c-0.8,0-1.5-0.7-1.5-1.5V7.7 C3.3,6.9,3.9,6.3,4.7,6.3z" /><path d="M16.6,6.7c0.9-0.8,2.3-0.1,2.4,1l0,0.1v5.7c0,1.2-1.3,1.9-2.3,1.2l-0.1-0.1L13.3,12 c-0.2-0.2-0.2-0.5-0.1-0.7c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.7c0.3,0.2,0.7,0.1,0.8-0.3l0-0.1V7.8c0-0.4-0.4-0.6-0.7-0.4 l-0.1,0l-3.3,2.7c-0.2,0.2-0.5,0.1-0.7-0.1c-0.2-0.2-0.1-0.5,0-0.6l0.1-0.1L16.6,6.7z" /></svg>',c.onclick=function(){var w=n.decoderState.state,g=w.play,p=w.recordvideo;g&&(p?(n.jSPlugin.stopSave(),n.setDecoderState({recordvideo:!1})):(n.jSPlugin.startSave("".concat(new Date().getTime())),n.setDecoderState({recordvideo:!0})))};break;case"capturePicture":c.title="截图",c.id=t,c.domString='<svg id="'.concat(this.jSPlugin.id,'-capturePicture-icon" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.8,7.7c-2,0-3.7,1.6-3.7,3.7S8.7,15,10.8,15c2,0,3.7-1.6,3.7-3.7S12.8,7.7,10.8,7.7z M10.8,8.7c1.5,0,2.7,1.2,2.7,2.7S12.2,14,10.8,14c-1.5,0-2.7-1.2-2.7-2.7S9.3,8.7,10.8,8.7z" /><path d="M8.6,3.7l-0.1,0C8,3.7,7.7,4,7.5,4.3l-1,1.7l-1.3,0C4,6.1,3.1,7,3.1,8.2v7.1 c0,1.2,0.9,2.1,2.1,2.1h11.1c1.2,0,2.1-0.9,2.1-2.1V8.2l0-0.1c-0.1-1.1-1-1.9-2.1-1.9l-1.3,0l-1.1-1.8c-0.2-0.4-0.7-0.6-1.1-0.6H8.6 z M8.6,4.7h4.2c0.1,0,0.2,0.1,0.3,0.1l1.2,2c0.1,0.2,0.3,0.2,0.4,0.2h1.6c0.6,0,1.1,0.5,1.1,1.1v7.1c0,0.6-0.5,1.1-1.1,1.1H5.1 c-0.6,0-1.1-0.5-1.1-1.1V8.2c0-0.6,0.5-1.1,1.1-1.1h1.6c0.2,0,0.3-0.1,0.4-0.2l1.2-2C8.4,4.7,8.5,4.7,8.6,4.7z" /></svg>',c.onclick=function(){var w=n.decoderState.state.play;w?n.jSPlugin.capturePicture("".concat(new Date().getTime())):console.log("视频未播放，无法截图")};break;case"talk":c.title="对讲",c.id=t,c.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6	C13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" /><path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" /><path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" /><path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" /></svg>',c.onclick=function(){var w=n.decoderState.state,g=w.talk,p=w.sound,te=w.play,ae=w.pantile;if(te){if(g){console.log("结束对讲"),n.setDecoderState({talk:!1}),n.jSPlugin.Talk.stopTalk();var de=vr.findIndex(n.themeData.footer.btnList,function(ie){return ie.iconId==="sound"&&ie.isrender===1&&ie.defaultActive===1})>-1;n.themeData&&de&&(n.jSPlugin.openSound(),n.setDecoderState({sound:!0}))}else console.log("开始对讲"),n.setDecoderState({talk:!0}),n.jSPlugin.Talk.startTalk(function(ie){p&&!ie&&(n.jSPlugin.closeSound(),n.setDecoderState({sound:!1}))});ae&&n.Ptz&&(n.Ptz.hide(),n.setDecoderState({pantile:!1}))}};break;case"zoom":c.title=this.jSPlugin.use3DZoom?"3D定位":"电子放大",c.id=t,c.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-zoom-icon" class="theme-icon-item-icon" fill="').concat(c.color,`" version="1.1" id="图层_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="`).concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,`" viewBox="5 -6 5 32" style="enable-background:new 0 0 20 20.1;" xml:space="preserve">
              <path class="st1" d="M8.8,2.6c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2s-6.2-2.8-6.2-6.2S5.3,2.6,8.8,2.6z M8.8,3.9
                c-2.8,0-5,2.2-5,5s2.2,5,5,5s5-2.2,5-5S11.5,3.9,8.8,3.9z M12.7,12.7l3.9,3.9"/>
              <path class="st2" d="M11.2,9.5h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S11.6,9.5,11.2,9.5z"/>
              <path class="st2" d="M8.7,12c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C9.3,11.8,9.1,12,8.7,12z"/>
              <path class="st2" d="M16.9,17.6c-0.1,0-0.3-0.1-0.4-0.2l-3.9-3.9c-0.2-0.2-0.2-0.6,0-0.8s0.6-0.2,0.8,0l3.9,3.9
                c0.2,0.2,0.2,0.6,0,0.8C17.2,17.5,17,17.6,16.9,17.6z"/>
          </svg>`),c.onclick=function(){var w=n.decoderState.state,g=w.zoom,p=w.play,te=w.rec,ae=w.cloudRec;if(w.pantile,n.jSPlugin.use3DZoom){if(!p)return!1;g?n.jSPlugin.close3DZoom():n.jSPlugin.enable3DZoom()}else{if(n.zoomDisable||!te&&!ae&&!p)return!1;g?(console.log("结束电子放大"),n.jSPlugin.Zoom.stopZoom()):(console.log("开始电子放大"),n.jSPlugin.Zoom.startZoom())}n.setDecoderState({zoom:!g})};break;case"pantile":c.title="云台控制",c.id=t,c.domString='<svg id="'.concat(this.jSPlugin.id,'-pantile-icon" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.2,7.8c1.6,0,2.9,1.3,2.9,2.9s-1.3,2.9-2.9,2.9s-2.9-1.3-2.9-2.9S8.5,7.8,10.2,7.8z M10.2,8.8c-1.1,0-1.9,0.9-1.9,1.9s0.9,1.9,1.9,1.9s1.9-0.9,1.9-1.9S11.2,8.8,10.2,8.8z" /><path d="M8.8,3.5c0.7-0.6,1.8-0.6,2.5-0.1l0.1,0.1l1.4,1.1c0.2,0.2,0.3,0.5,0.1,0.7 c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1,0l-1.4-1.1C10.5,3.9,10,3.9,9.6,4.2L9.4,4.3L8,5.4C7.8,5.5,7.5,5.5,7.3,5.3c-0.2-0.2-0.1-0.5,0-0.6 l0.1-0.1L8.8,3.5z" /><path d="M2.5,12.3c-0.6-0.7-0.6-1.8-0.1-2.5l0.1-0.1l1.1-1.4c0.2-0.2,0.5-0.3,0.7-0.1 c0.2,0.2,0.2,0.4,0.1,0.6l0,0.1l-1.1,1.4C3,10.6,3,11.1,3.2,11.5l0.1,0.1L4.4,13c0.2,0.2,0.1,0.5-0.1,0.7c-0.2,0.2-0.5,0.1-0.6,0 l-0.1-0.1L2.5,12.3z" /><path d="M17.7,12.3c0.6-0.7,0.6-1.8,0.1-2.5l-0.1-0.1l-1.1-1.4c-0.2-0.2-0.5-0.3-0.7-0.1 c-0.2,0.2-0.2,0.4-0.1,0.6l0,0.1l1.1,1.4c0.3,0.4,0.3,0.9,0.1,1.3l-0.1,0.1L15.8,13c-0.2,0.2-0.1,0.5,0.1,0.7c0.2,0.2,0.5,0.1,0.6,0 l0.1-0.1L17.7,12.3z" /><path d="M8.8,18.2c0.7,0.6,1.8,0.6,2.5,0.1l0.1-0.1l1.4-1.1c0.2-0.2,0.3-0.5,0.1-0.7 c-0.2-0.2-0.4-0.2-0.6-0.1l-0.1,0l-1.4,1.1c-0.4,0.3-0.9,0.3-1.3,0.1l-0.1-0.1L8,16.3c-0.2-0.2-0.5-0.1-0.7,0.1 c-0.2,0.2-0.1,0.5,0,0.6l0.1,0.1L8.8,18.2z" /></svg>',c.onclick=function(){var w=n.decoderState.state,g=w.play,p=w.pantile,te=w.expend;if(g)if(p)console.log("隐藏云台"),n.Ptz.hide(),n.setDecoderState({pantile:!1});else{if(console.log("显示云台"),n.isMobile&&!te)return console.log("移动端，非全屏状态不展示云台"),!1;n.Ptz.show(),n.setDecoderState({pantile:!0})}};break;case"expend":c.title="全局全屏",c.id=t,c.domString='<span><svg id="'.concat(this.jSPlugin.id,'-expend-icon" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,4.1,6.9,4.1H5.2 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.9,7.4,3.7,7.6,3.4,7.6z" /><path d="M6.9,18.1H5.2c-1.2,0-2.2-1-2.2-2.2v-1.8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8c0,0.7,0.6,1.2,1.2,1.2 h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,18.1,6.9,18.1z" /><path d="M15.7,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.9,17.1,16.9,18.1,15.7,18.1z" /><path d="M17.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-0.7-0.6-1.3-1.2-1.3h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8 c1.2,0,2.2,1,2.2,2.3v1.8C17.9,7.4,17.7,7.6,17.4,7.6z" /></svg>'+'<svg class="theme-icon-item-icon" style="display:none" width="'.concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" fill="').concat(c.color,`" viewBox="-6 -6 32 32">
            <path class="st1" d="M5.7,8.1H3.9c-0.3,0-0.6-0.2-0.6-0.6S3.6,7,3.9,7h1.9c0.7,0,1.3-0.6,1.3-1.3V3.8c0-0.3,0.2-0.6,0.6-0.6
              s0.6,0.2,0.6,0.6v1.9C8.2,7,7.1,8.1,5.7,8.1z"/>
            <path class="st1" d="M7.6,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-0.7-0.6-1.3-1.3-1.3H3.9c-0.3,0-0.6-0.2-0.6-0.6s0.2-0.6,0.6-0.6h1.9
              c1.3,0,2.4,1.1,2.4,2.4v1.9C8.2,17.5,7.9,17.7,7.6,17.7z"/>
            <path class="st1" d="M13.4,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.6,0.2,0.6,0.6S17.5,14,17.2,14
              h-1.9c-0.7,0-1.3,0.6-1.3,1.3v1.9C14,17.5,13.8,17.7,13.4,17.7z"/>
            <path class="st1" d="M17.2,8.1h-1.9c-1.3,0-2.4-1.1-2.4-2.4V3.8c0-0.3,0.2-0.6,0.6-0.6S14,3.5,14,3.8v1.9C14,6.4,14.6,7,15.3,7h1.9
              c0.3,0,0.6,0.2,0.6,0.6S17.5,8.1,17.2,8.1z"/>
          </svg>
          </span>`),c.onclick=function(){var w=n.decoderState.state;w.webExpend;var g=w.expend,p=w.zoom,te=w.pantile;if(g)if(n.isMobile){var ae=parseInt(getComputedStyle(document.getElementById("".concat(n.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(n.jSPlugin.id)).height,10);document.getElementById("".concat(n.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(n.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-32px"),document.getElementById("".concat(n.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(n.jSPlugin.id,"-headControl")).style.position="relative"),fu(document.getElementById("".concat(n.jSPlugin.id,"-wrap")),n.jSPlugin.width,n.jSPlugin.height+ae),n.jSPlugin.jSPlugin.JS_Resize(n.jSPlugin.width,n.jSPlugin.height),te&&n.Ptz&&(n.Ptz.hide(),n.setDecoderState({pantile:!1})),n.jSPlugin.fullScreenWidth=n.jSPlugin.width,n.jSPlugin.fullScreenHeight=n.jSPlugin.height;var x=n.jSPlugin.Zoom.currentScale;n.jSPlugin.Zoom&&n.jSPlugin.Zoom.handleFullscreen&&n.jSPlugin.Zoom.handleFullscreen(!g,n.jSPlugin.width,n.jSPlugin.height),n.jSPlugin.Zoom.stopZoom(),p&&setTimeout(function(){n.jSPlugin.Zoom.startZoom(),n.jSPlugin.Zoom.currentScale=x,n.jSPlugin.Zoom.doScale(x)},200)}else{console.log("取消全局全屏");var O=gs();O.then(function(ne){console.log("取消全屏",ne,n.jSPlugin),n.jSPlugin.jSPlugin.JS_Resize(n.jSPlugin.width,n.jSPlugin.height)})}else if(console.log("执行全局全屏"),n.isMobile){var ae=parseInt(getComputedStyle(document.getElementById("".concat(n.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(n.jSPlugin.id)).height,10);yl(document.getElementById("".concat(n.jSPlugin.id,"-wrap")));var de=document.documentElement.clientWidth,ie=document.documentElement.clientHeight;document.getElementById("".concat(n.jSPlugin.id)).style["backface-visibility"]="hidden",n.jSPlugin.jSPlugin.JS_Resize(ie,de-ae,!0),n.jSPlugin.fullScreenWidth=ie,n.jSPlugin.fullScreenHeight=de-ae;var we=n.jSPlugin.Zoom.currentScale;n.jSPlugin.Zoom&&n.jSPlugin.Zoom.handleFullscreen&&n.jSPlugin.Zoom.handleFullscreen(!g,ie,de-ae),n.jSPlugin.Zoom.stopZoom(),p&&setTimeout(function(){n.jSPlugin.Zoom.startZoom(),n.jSPlugin.Zoom.currentScale=we,n.jSPlugin.Zoom.doScale(we)},200)}else{var de=window.screen.width,ie=window.screen.height,Ve=n,ue=Jo(document.getElementById("".concat(n.jSPlugin.id)));ue.then(function(ye){n.jSPlugin.jSPlugin.JS_Resize(de,ie),n.jSPlugin.fullScreenWidth=de,n.jSPlugin.fullScreenHeight=ie}).catch(function(ye){console.log(ye)}),n.jSPlugin.close3DZoom(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(ye){window.addEventListener(ye,function(Ze){var Qe=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;return Qe?(Ve.jSPlugin.jSPlugin.JS_Resize(de,ie),Ve.jSPlugin.fullScreenWidth=de,Ve.jSPlugin.fullScreenHeight=ie):Ve.jSPlugin.jSPlugin.JS_Resize(Ve.jSPlugin.width,Ve.jSPlugin.height),Qe})})}n.setDecoderState({expend:!g})};break;case"webExpend":c.title="网页全屏",c.id=t,c.domString='<span><svg id="'.concat(this.jSPlugin.id,'-webExpend-icon" class="theme-icon-item-icon" fill="').concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M3.1,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S6.8,4.1,6.6,4.1H4.8 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.6,7.4,3.3,7.6,3.1,7.6z" /><path d="M15.3,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.6,17.1,16.6,18.1,15.3,18.1z" /><circle class="st2" cx="10.2" cy="10.4" r="1.1"/></svg>'+'<svg class="theme-icon-item-icon" fill="'.concat(c.color,'" style="display:none;" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,`" viewBox="-6 -6 32 32">
          <path class="st1" d="M5.4,8.1H3.5C3.2,8.1,3,7.9,3,7.6s0.2-0.5,0.5-0.5h1.9c0.8,0,1.4-0.6,1.4-1.4V3.8c0-0.3,0.2-0.5,0.5-0.5
            s0.5,0.2,0.5,0.5v1.9C7.7,7,6.7,8.1,5.4,8.1z"/>
          <path class="st1" d="M13.1,17.7c-0.3,0-0.5-0.2-0.5-0.5v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.5,0.2,0.5,0.5s-0.2,0.5-0.5,0.5H15
            c-0.8,0-1.4,0.6-1.4,1.4v1.9C13.6,17.4,13.4,17.7,13.1,17.7z"/>
            <circle class="st2" cx="10.2" cy="10.4" r="1.1"/>
          `)+"</svg></span>",c.onclick=function(){var w=n.decoderState.state,g=w.webExpend,p=w.expend,te=w.zoom;if(p)return console.log("正在全局全屏"),!1;if(n.jSPlugin.recTimer&&clearInterval(n.jSPlugin.recTimer),g){console.log("取消网页全屏");var x=gs();x.then(function(O){n.jSPlugin.jSPlugin.JS_Resize(n.jSPlugin.width,n.jSPlugin.height)})}else{console.log("执行网页全屏");var ae=0,de=0,ie=window.screen.width,we=window.screen.height,Ve=n,ue=Jo(document.getElementById("".concat(n.jSPlugin.id,"-wrap")));ue.then(function(O){document.getElementById("".concat(n.jSPlugin.id,"-canvas-container"))&&(ae=parseInt(window.getComputedStyle(document.getElementById("".concat(n.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(n.jSPlugin.id,"-headControl"))&&(de=parseInt(window.getComputedStyle(document.getElementById("".concat(n.jSPlugin.id,"-headControl"))).height,10)),n.jSPlugin.jSPlugin.JS_Resize(ie,we-ae-de),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(ne){window.addEventListener(ne,function(ye){var se=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;return se?(document.getElementById("".concat(Ve.jSPlugin.id,"-loading-item-0"))&&(document.getElementById("".concat(Ve.jSPlugin.id,"-loading-item-0")).style.height=window.screen.height-parseInt(window.getComputedStyle(document.getElementById("".concat(Ve.jSPlugin.id,"-headControl"))).height,10)+"px"),Ve.jSPlugin.jSPlugin.JS_Resize(ie,we-ae-de)):(document.getElementById("".concat(Ve.jSPlugin.id,"-loading-item-0"))&&(document.getElementById("".concat(Ve.jSPlugin.id,"-loading-item-0")).style.height=Ve.jSPlugin.height+parseInt(window.getComputedStyle(document.getElementById("".concat(Ve.jSPlugin.id,"-headControl"))).height,10)+"px"),Ve.jSPlugin.jSPlugin.JS_Resize(Ve.jSPlugin.width,Ve.jSPlugin.height),p&&(Ve.setDecoderState({expend:!1}),te&&Ve.jSPlugin.use3DZoom&&Ve.jSPlugin.enable3DZoom())),document.getElementById("".concat(Ve.jSPlugin.id,"-canvas-container"))&&(ae=parseInt(window.getComputedStyle(document.getElementById("".concat(Ve.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(Ve.jSPlugin.id,"-headControl"))&&(de=parseInt(window.getComputedStyle(document.getElementById("".concat(Ve.jSPlugin.id,"-headControl"))).height,10)),se})})}).catch(function(O){console.log(O)})}n.setDecoderState({webExpend:!g})};break;case"hd":var C="".concat(this.jSPlugin.id,"-select-quality"),y="".concat(C,"-item");return c.title="画面清晰度",c.id=t,c.domString='<ul id="'.concat(this.jSPlugin.id,'-hdSelect" class="hd speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;bottom: calc(constant(safe-area-inset-bottom) + ').concat(this.isMobile?"80px":"50px",") !important;bottom: calc(env(safe-area-inset-bottom) + ").concat(this.isMobile?"80px":"50px",`) !important;">
          <!-- 由接口返回生成 -->  
        </ul><span id="`).concat(this.jSPlugin.id,`-hdSelect-icon-warp">
           <!-- 由接口返回生成 -->
          </span>`),c.onclick=function(w){var g=n.decoderState.state,p=g.hd,te=g.expend,ae=g.recordvideo,de=g.play,ie=g.hdList,we=g.zoom,Ve=g.pantile;if(w.stopPropagation(),de){var ue=w.target.id,x=w.target.getAttribute("data-type");if(ue.indexOf(C)===0){if(p.type+""!==x){var O=ie.find(function(ye){return ye.level+""===x});if(O&&(O.streamType!==p.streamType||O.level+""!=p.level+"")){n.jSPlugin.changeVideoLevel(O),n.setDecoderState({hd:O}),we&&n.jSPlugin.Zoom.stopZoom();var ne=document.getElementById("".concat(n.jSPlugin.id,"-hdSelect-icon")),Q=document.getElementById("".concat(n.jSPlugin.id,"-sdSelect-icon"));ne&&(ne.style.display=["hd","0"].includes(O.level)?"block":"none"),Q&&(Q.style.display=["sd","1"].includes(O.level)?"block":"none")}}n.resetMobileZoomStatus(),ae&&n.setDecoderState({recordvideo:!1})}n.showHD=!n.showHD,document.getElementById("".concat(n.jSPlugin.id,"-hdSelect"))&&(document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.display=document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.display==="none"?"block":"none",n.isMobile&&(document.getElementById("".concat(n.jSPlugin.id,"-select-hd-mask")).style.display=document.getElementById("".concat(n.jSPlugin.id,"-select-hd-mask")).style.display==="none"?"block":"none"),n.themeData.autoFocus>0&&(document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.display==="none"?n.startAutoFocus():n.stopAutoFocus())),n.isMobile&&te&&n.showHD?document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).className="hd speed-select mobile expend":document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).className=n.isMobile?"hd speed-select mobile":"speed-select",n.isMobile&&(te?(document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.bottom="env(safe-area-inset-bottom)",document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.bottom="constant(safe-area-inset-bottom)"):(document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.bottom="calc(constant(safe-area-inset-bottom) + 80px)",document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")).style.bottom="calc(env(safe-area-inset-bottom) + 80px)")),Ve&&n.Ptz&&(n.Ptz.hide(),n.setDecoderState({pantile:!1}))}},$u(this.jSPlugin.env.domain,this.jSPlugin.accessToken,this.jSPlugin.deviceSerial,this.jSPlugin.channelNo).then(function(w){var g=w;n.setDecoderState({hdList:g});var p=n.jSPlugin.url.indexOf("hd.live")>-1?g[0]:g[1];n.setDecoderState({hd:p});var te=document.getElementById("".concat(n.jSPlugin.id,"-hdSelect")),ae=document.getElementById("".concat(n.jSPlugin.id,"-hdSelect-icon-warp"));te&&(te.innerHTML=`
            `.concat(ba(g).reverse().map(function(de){if(de.name&&de.level!=null)return'<li class="selectOption default '.concat(y,'" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;" name="option" data-type="').concat(de.level,'" id="').concat(C,"_").concat(de.level,'">').concat(de.name,"</li>")}).join(""),`
            <li class="selectOption cancel" style="`).concat(n.isMobile?"":"display:none;",'" name="option" id="').concat(n.jSPlugin.id,`-select-speed">取消</li>
          `)),ae&&(Ni(n.decoderState.state.hd)==="object"&&typeof n.decoderState.state.hd.icon=="function"?ae.innerHTML=`
              `.concat(g.map(function(de){if(de.name&&typeof de.icon=="function")return de.icon(n.jSPlugin.id,C,c.color,n.jSPlugin.width,Wn,n.decoderState.state.hd)}).join(""),`
              <span class='speed-select-mask' style="display:none" id="`).concat(n.jSPlugin.id,`-select-hd-mask"></span>
            `):Ni(n.decoderState.state.hd)==="object"&&typeof n.decoderState.state.hd.name=="string"&&$(ae).prepend('<div class="theme-icon-item-icon '.concat(C,'-btn" data-type="').concat(n.decoderState.state.hd.level,'" style="width: ').concat(n.jSPlugin.width>Wn?48:32,'px">').concat(n.decoderState.state.hd.name,"</div>")))}),c;case"speed":c.title="回放倍速",c.id=t,c.domString='<ul id="'.concat(this.jSPlugin.id,'-speedSelect" class="speed speed-select ').concat(this.isMobile?"mobile":"",'" style="display:none;bottom: calc(constant(safe-area-inset-bottom) + ').concat(this.isMobile?"80px":"50px",") !important;bottom: calc(env(safe-area-inset-bottom) + ").concat(this.isMobile?"80px":"50px",') !important;">')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed4">4倍</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed2">2倍</li>')+'<li class="selectOption active" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed1">1倍（正常播放）</li>')+'<li class="selectOption default" style="height: 45px;text-align: center;line-height: 45px;list-style: none;cursor: pointer;font-size: 13px;" name="option" id="'.concat(this.jSPlugin.id,'-select-speed05">0.5倍</li>')+'<li class="selectOption cancel" style="'.concat(this.isMobile?"":"display:none;",'" name="option" id="').concat(this.jSPlugin.id,'-select-speed">取消</li>')+"</ul>"+`<span>
          <div style="font-size: 12px;
          vertical-align: bottom;
          display: inline-flex;
          padding: 0px 7px;
          width: 48px;
          line-height: 24px;
          justify-content: center;
          border: 1px solid `.concat(c.color,`;
          text-align: center;border-radius: 12.5px;"
          id="`).concat(this.jSPlugin.id,`-speed-text"
          >`).concat(this.nextRate===1?"倍速":"".concat(this.nextRate,"倍").replace("3","0.5"),`</div>
                `)+`<span class='speed-select-mask' style="display:none" id="`.concat(this.jSPlugin.id,'-select-mask"></span>')+"</span>",c.onclick=function(w){var g=n.decoderState.state,p=g.speed,te=g.expend,ae=g.play;if(w.stopPropagation(),!ae)return!1;if(!p&&n.isMobile&&(document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).className=te?"speed speed-select mobile expend":"speed speed-select mobile"),n.isMobile&&(te?(document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.bottom="constant(safe-area-inset-bottom)",document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.bottom="env(safe-area-inset-bottom)"):(document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.bottom="calc(constant(safe-area-inset-bottom) + 80px)",document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.bottom="calc(env(safe-area-inset-bottom) + 80px)")),n.nextRate=1,w.target.id)switch(w.target.id){case"".concat(n.jSPlugin.id,"-select-speed1"):console.log("倍速1"),n.nextRate=1,n.jSPlugin.jSPlugin.JS_Speed(n.nextRate),n.changeRecSpeed(1),n.jSPlugin.speed=1,n.setDecoderState({speed:!p});break;case"".concat(n.jSPlugin.id,"-select-speed2"):console.log("倍速2"),n.nextRate=2,n.jSPlugin.jSPlugin.JS_Speed(n.nextRate),n.changeRecSpeed(2),n.jSPlugin.speed=2,n.setDecoderState({speed:!p});break;case"".concat(n.jSPlugin.id,"-select-speed4"):console.log("倍速4"),n.nextRate=4,n.jSPlugin.jSPlugin.JS_Speed(n.nextRate),n.changeRecSpeed(4),n.jSPlugin.speed=4,n.setDecoderState({speed:!p});break;case"".concat(n.jSPlugin.id,"-select-speed05"):console.log("倍速05"),n.nextRate=3,n.jSPlugin.jSPlugin.JS_Speed(n.nextRate),n.changeRecSpeed(.5),n.jSPlugin.speed=.5,n.setDecoderState({speed:!p});break;default:n.isMobile?n.setDecoderState({speed:!p}):n.setDecoderState({speed:!0});break}n.isMobile&&w.target.id==="".concat(n.jSPlugin.id,"-speed-text")?document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.display="block":document.getElementById("".concat(n.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.display=document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.display==="none"?"block":"none"),n.setDecoderState({speed:!p}),n.themeData.autoFocus>0&&(document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).style.display==="none"?n.startAutoFocus():n.stopAutoFocus())};break;case"deviceName":c.title="设备名称",c.id=t,c.domString="<span>设备名称</span>",c.onclick=function(){};break;case"deviceID":c.title="设备序列号",c.id=t,c.domString="<span>设备序列号</span>",c.onclick=function(){};break;case"cloudRec":c.title="云存储回放",c.id=t,c.domString=`
        <span>
          <svg class="theme-icon-item-icon" fill="`.concat(c.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,`" viewBox="-10 0 40 15">
	<path d="M9.5,13.1c-0.3,0-0.5-0.2-0.5-0.5V8.8c0-0.3,0.2-0.5,0.5-0.5S10,8.5,10,8.8v3.8C10,12.8,9.8,13.1,9.5,13.1z"/>
	<path d="M7.6,10.6c-0.1,0-0.3-0.1-0.4-0.2C7,10.2,7,9.9,7.3,9.7l1.9-1.7c0.2-0.2,0.5-0.2,0.7,0l1.8,1.7
		c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.5,0.2-0.7,0L9.5,9.1l-1.6,1.4C7.8,10.6,7.7,10.6,7.6,10.6z"/>
	<path d="M13.2,15.7H5.6c-2.1-0.1-3.8-1.8-3.8-3.9c0-1.8,1.3-3.4,3-3.8c0.4-2.2,2.3-3.9,4.6-3.9c2.3,0,4.2,1.7,4.6,3.8
		c1.8,0.4,3.1,1.9,3.1,3.8C17.1,13.9,15.4,15.7,13.2,15.7z M5.6,14.7h7.6c1.6,0,2.9-1.3,2.9-2.9c0-1.5-1.1-2.7-2.6-2.9l-0.4,0l0-0.4
		c-0.2-1.9-1.7-3.3-3.6-3.3C7.5,5.1,6,6.6,5.8,8.5l0,0.4l-0.4,0c-1.4,0.2-2.5,1.4-2.5,2.9C2.8,13.3,4.1,14.6,5.6,14.7z"/>
          </svg>
        </span>
        `),c.onclick=function(){console.log("点击云回放"),n.setDecoderState({type:"cloud.rec",cloudRec:!0,rec:!1}),n.jSPlugin.changePlayUrl({type:"cloud.rec"},function(){var w=ar("begin",n.jSPlugin.url)||new Date().Format("yyyyMMdd");n.Rec.renderRec("".concat(w.slice(0,4),"-").concat(w.slice(4,6),"-").concat(w.slice(6,8)));var g=n.decoderState.state.zoom;g&&(n.setDecoderState({zoom:!1}),n.jSPlugin.Zoom.stopZoom(),n.jSPlugin.close3DZoom())},!1)};break;case"rec":c.title="本地存储",c.id=t,c.domString=`
        <span>
        <svg class="theme-icon-item-icon" fill=`.concat(c.color,' version="1.1" xmlns="http://www.w3.org/2000/svg"  width="').concat(this.jSPlugin.width>Wn?48:32,'" height="').concat(this.jSPlugin.width>Wn?48:32,`" viewBox="0 0 40 15">
          <path d="M13,16.3H5.5c-1.1,0-2-0.9-2-2V3.8c0-1.1,0.9-2,2-2h5.4c0.5,0,1,0.2,1.4,0.6l2.1,2.1C14.8,4.8,15,5.3,15,5.9
  v8.4C15,15.4,14.1,16.3,13,16.3z M5.5,2.8c-0.6,0-1,0.4-1,1v10.5c0,0.6,0.4,1,1,1H13c0.6,0,1-0.4,1-1V5.9c0-0.3-0.1-0.5-0.3-0.7
  L11.6,3c-0.2-0.2-0.4-0.3-0.7-0.3H5.5z"/>
<path d="M6.3,7.3C6,7.3,5.8,7,5.8,6.8V4.5C5.8,4.2,6,4,6.3,4s0.5,0.2,0.5,0.5v2.2C6.8,7,6.6,7.3,6.3,7.3z"/>
<path d="M8.5,7.3C8.3,7.3,8,7,8,6.8V4.5C8,4.2,8.3,4,8.5,4S9,4.2,9,4.5v2.2C9,7,8.8,7.3,8.5,7.3z"/>
<path d="M10.8,7.3c-0.3,0-0.5-0.2-0.5-0.5V4.5c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v2.2C11.3,7,11.1,7.3,10.8,7.3z"
  />
        </svg>
      </span>
        `),c.onclick=function(){console.log("点击本地回放"),n.setDecoderState({type:"rec",cloudRec:!1,rec:!0}),n.jSPlugin.changePlayUrl({type:"rec"},function(){console.log("---------本地回放");var w=ar("begin",n.jSPlugin.url)||new Date().Format("yyyyMMdd");n.Rec.renderRec("".concat(w.slice(0,4),"-").concat(w.slice(4,6),"-").concat(w.slice(6,8)));var g=n.decoderState.state.zoom;g&&(n.setDecoderState({zoom:!1}),n.jSPlugin.Zoom.stopZoom(),n.jSPlugin.close3DZoom())},!1)};break}return c}},{key:"changeRecSpeed",value:function(t){var n=this,o=function(c){if(console.log("setLiActive",c),!document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")))return!1;document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[0].className=document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[0].className.replace("active","default"),document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[1].className=document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[1].className.replace("active","default"),document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[2].className=document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[2].className.replace("active","default"),document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[3].className=document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[3].className.replace("active","default"),document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[c].className=document.getElementById("".concat(n.jSPlugin.id,"-speedSelect")).childNodes[c].className.replace("default","active")},l="1";switch(t){case 1:o(2),l="倍速";break;case 2:o(1),l="".concat(t,"倍");break;case 4:o(0),l="".concat(t,"倍");break;case .5:o(3),l="".concat(t,"倍");break;default:o(2),l="".concat(t,"倍");break}document.getElementById("".concat(this.jSPlugin.id,"-speed-text"))&&(document.getElementById("".concat(this.jSPlugin.id,"-speed-text")).innerHTML=l)}},{key:"initThemeData",value:function(){var t=this,n=this.themeData,o=n.header,l=n.footer,d=this.jSPlugin.id;if(this.header=Tl.header,this.footer=Tl.footer,this.isNeedRenderHeader=vr.findIndex(o.btnList,function(x){return x.isrender>0})>=0&&this.jSPlugin.id!="miniRec",this.isMobile&&(this.isNeedRenderHeader=vr.findIndex(o.btnList,function(x){return x.isrender>0&&x.iconId==="deviceID"||x.isrender>0&&x.iconId==="deviceName"})>=0&&this.jSPlugin.id!="miniRec"),this.isNeedRenderFooter=vr.findIndex(l.btnList,function(x){return x.isrender>0})>=0&&this.jSPlugin.id!="miniRec",console.log("miniRec："+this.jSPlugin.themeId),this.isNeedRenderTimeLine=vr.findIndex(o.btnList,function(x){return x.iconId==="cloudRec"&&x.isrender===1||x.iconId==="rec"&&x.isrender===1})>=0&&!this.jSPlugin.disabledTimeLine&&this.jSPlugin.id!="miniRec",["date-switch-container-wrap","rec-type-container-wrap","mobile-rec-wrap","mobile-ez-ptz-container"].forEach(function(x,O){document.getElementById(x)&&document.getElementById(x).parentElement.removeChild(document.getElementById(x))}),this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var c=document.createElement("div");c.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),c.setAttribute("class","header-controls"),c.innerHTML="<div id='".concat(this.jSPlugin.id,`-headControl-left' class="header-controls-left" style='display:flex;width:calc(100% - 100px);overflow:hidden;'></div><div id='`).concat(this.jSPlugin.id,`-headControl-right' class="header-controls-right" style='display:flex;'></div>`);var E={height:this.jSPlugin.width>Wn?"48px":"32px","line-height":this.jSPlugin.width>Wn?"48px":"32px",display:"flex","justify-content":"space-between",top:0,"z-index":1,background:"#000000",color:"#FFFFFF",width:"100%"};c.style=jl(E),document.getElementById("".concat(d,"-wrap")).insertBefore(c,document.getElementById(d));var C=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(C)},50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(this.jSPlugin.width>Wn?48:32,"px"),document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML='<div id="'.concat(this.jSPlugin.id,`-audioControls"  class="footer-controls" style='display:flex;justify-content: space-between;height: `).concat(this.jSPlugin.width>Wn?48:32,"px;width:100%;'><div id='").concat(this.jSPlugin.id,`-audioControls-left' class="footer-controls-left" style='display:flex'></div><div id='`).concat(this.jSPlugin.id,`-audioControls-right' class="footer-controls-right" style='display:flex'></div></div>`));else{var y=document.createElement("div");y.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),y.setAttribute("class","ez-iframe-footer-container");var w={"min-height":this.jSPlugin.width>Wn?"48px":"32px","max-height":this.jSPlugin.width>Wn?"96px":"80px",position:"relative","margin-top":this.jSPlugin.width>Wn?"-48px":"-32px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%"};y.style=jl(w),y.innerHTML='<div id="'.concat(this.jSPlugin.id,`-audioControls" class="footer-controls" style='display:flex;height:`).concat(this.jSPlugin.width>Wn?48:32,"px;justify-content: space-between;width:100%;z-index:999;position: relative;'><div id='").concat(this.jSPlugin.id,`-audioControls-left' class="footer-controls-left" style='display:flex;'></div><div id='`).concat(this.jSPlugin.id,`-audioControls-right' class="footer-controls-right" style='display:flex'></div></div>`),Oa(y,document.getElementById(d))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))){document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=o.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=o.color;var g=qo(o.btnList),p;try{for(g.s();!(p=g.n()).done;){var te=p.value;if(te.isrender)try{this.renderHeader(te.iconId,te.part)}catch{}}}catch(x){g.e(x)}finally{g.f()}}if(this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))){document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=l.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=l.color;var ae=qo(l.btnList),de;try{for(ae.s();!(de=ae.n()).done;){var ie=de.value;if(ie.isrender)try{this.renderFooter(ie.iconId,ie.part)}catch{}}}catch(x){ae.e(x)}finally{ae.f()}}if(console.log("this.isNeedRenderTimeLine:"+this.isNeedRenderTimeLine),this.isNeedRenderTimeLine)if(this.isMobile)document.getElementById("".concat(this.jSPlugin.id,"-headControl-right"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).style.display="none"),this.Rec=new ku(this.jSPlugin,this.changeRecSpeed,this.resetMobileZoomStatus);else{this.Rec?(this.Rec.unSyncTimeLine(),this.Rec.recInit()):(this.jSPlugin.decoderState=this.decoderState,this.jSPlugin.setDecoderState=this.setDecoderState,this.Rec=new Eu(this.jSPlugin));var we=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(we)},50)}var Ve=vr.findIndex(this.themeData.footer.btnList,function(x){return x.iconId==="pantile"&&x.isrender===1})>=0&&!this.jSPlugin.disabledPTZ;if(Ve&&(this.isMobile&&(this.MobilePtz=new zu(this.jSPlugin)),this.Ptz=new Bu(this.jSPlugin)),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(x){var O=t;window.addEventListener(x,function(ne){var Q=O.decoderState.state,ye=Q.expend;Q.webExpend;var se=Q.zoom,Ze=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;O.jSPlugin.Theme.Rec&&setTimeout(function(){O.jSPlugin.Theme.Rec.recAutoSize(function(){if(O.jSPlugin.Zoom.currentScale>1){var Qe=O.jSPlugin.Zoom.currentScale;O.jSPlugin.Zoom.stopZoom(),setTimeout(function(){O.jSPlugin.Zoom.startZoom(),O.jSPlugin.Zoom.currentScale=Qe,O.jSPlugin.Zoom.doScale(Qe)},200)}})},100),Ze||(ye&&se&&O.jSPlugin.use3DZoom&&O.jSPlugin.enable3DZoom(),O.setDecoderState({webExpend:!1,expend:!1})),document.getElementById("".concat(O.jSPlugin.id,"-hdSelect"))&&(document.getElementById("".concat(O.jSPlugin.id,"-hdSelect")).style.display="none"),document.getElementById("".concat(O.jSPlugin.id,"-speedSelect"))&&(document.getElementById("".concat(O.jSPlugin.id,"-speedSelect")).style.display="none"),O.isMobile&&(document.getElementById("".concat(O.jSPlugin.id,"-select-hd-mask"))&&(document.getElementById("".concat(O.jSPlugin.id,"-select-hd-mask")).style.display="none"),document.getElementById("".concat(O.jSPlugin.id,"-select-mask"))&&(document.getElementById("".concat(O.jSPlugin.id,"-select-mask")).style.display="none")),O.themeData.autoFocus>0&&O.startAutoFocus()})}),this.themeData.poster){this.jSPlugin.poster=this.themeData.poster;var ue=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(ue),t.jSPlugin.setPoster(t.themeData.poster))},50)}this.inited=!0,this.getDeviceInfo(),this.renderThemeData()}},{key:"resetMobileZoomStatus",value:function(){if(this.isMobile){var t=document.getElementById("".concat(this.jSPlugin.id,"-zoom-container"));t&&t.style&&t.style.display!="none"&&(console.log("结束电子放大"),t.style.display="none"),this.jSPlugin.jSPlugin.Zoom&&this.jSPlugin.jSPlugin.Zoom.resetZoom()}}},{key:"getDeviceInfo",value:function(t){var n=this,o=function(d){d.code==200&&d.data&&(t&&t(d),document.getElementById("".concat(n.jSPlugin.id,"-deviceName-content"))&&(document.getElementById("".concat(n.jSPlugin.id,"-deviceName-content")).style.maxWidth="100%",document.getElementById("".concat(n.jSPlugin.id,"-deviceName-content")).style.overflow="hidden",document.getElementById("".concat(n.jSPlugin.id,"-deviceName-content")).style.textOverflow="ellipsis",document.getElementById("".concat(n.jSPlugin.id,"-deviceName-content")).style.whiteSpace="nowrap",document.getElementById("".concat(n.jSPlugin.id,"-deviceName-content")).innerHTML=d.data.deviceName),document.getElementById("".concat(n.jSPlugin.id,"-deviceID-content"))&&(document.getElementById("".concat(n.jSPlugin.id,"-deviceID-content")).style.maxWidth="100%",document.getElementById("".concat(n.jSPlugin.id,"-deviceID-content")).style.overflow="hidden",document.getElementById("".concat(n.jSPlugin.id,"-deviceID-content")).style.textOverflow="ellipsis",document.getElementById("".concat(n.jSPlugin.id,"-deviceID-content")).style.whiteSpace="nowrap",document.getElementById("".concat(n.jSPlugin.id,"-deviceID-content")).innerHTML=pn(n.jSPlugin.url).deviceSerial))};Ca(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:pn(this.jSPlugin.url).deviceSerial},"",o)}},{key:"editStart",value:function(t){var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));o&&o.setAttribute("class","header-controls themeEditing"),n&&n.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(t){var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));o&&o.setAttribute("class","header-controls"),n&&n.setAttribute("class","footer-controls"),this.setDecoderState({isEditing:!1})}},{key:"webExpend",value:function(){var t=this,n=this.decoderState.state;n.webExpend;var o=n.expend,l=n.play;if(!l)return!1;if(o)return console.log("正在全局全屏"),!1;console.log("执行网页全屏");var d=0,c=0,E=Jo(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));E.then(function(C){console.log("全屏promise",window.screen.width),document.getElementById("".concat(t.jSPlugin.id,"-canvas-container"))&&(d=parseInt(window.getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-canvas-container"))).height,10)),document.getElementById("".concat(t.jSPlugin.id,"-headControl"))&&(c=parseInt(window.getComputedStyle(document.getElementById("".concat(t.jSPlugin.id,"-headControl"))).height,10)),console.log("this.jSPlugin.JS_Resiz",d,c,document.body.clientWidth),t.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height-d-c)}).catch(function(C){console.log(C)})}},{key:"expend",value:function(){var t=this,n=this.decoderState.state,o=n.webExpend;n.expend;var l=n.play;if(n.pantile,!l)return!1;if(o)return console.log("正在网站全屏"),!1;if(console.log("执行全局全屏"),this.isMobile){var d=parseInt(getComputedStyle(document.getElementById("".concat(this.jSPlugin.id,"-wrap"))).height,10)-parseInt(getComputedStyle(document.getElementById(this.jSPlugin.id)).height,10);yl(document.getElementById("".concat(this.jSPlugin.id,"-wrap")));var c=document.documentElement.clientWidth,E=document.documentElement.clientHeight;document.getElementById("".concat(this.jSPlugin.id)).style["backface-visibility"]="hidden",this.jSPlugin.jSPlugin.JS_Resize(E,c-d)}else{var C=Jo(document.getElementById("".concat(this.jSPlugin.id)));C.then(function(y){t.jSPlugin.jSPlugin.JS_Resize(window.screen.width,window.screen.height)}).catch(function(y){console.log(y)})}}},{key:"disabledFECBtn",value:function(){var t=["".concat(this.jSPlugin.id,"-capturePicture"),"".concat(this.jSPlugin.id,"-capturePicture-content"),"".concat(this.jSPlugin.id,"-capturePicture-icon"),"".concat(this.jSPlugin.id,"-recordvideo"),"".concat(this.jSPlugin.id,"-recordvideo-content"),"".concat(this.jSPlugin.id,"-recordvideo-icon"),"".concat(this.jSPlugin.id,"-zoom"),"".concat(this.jSPlugin.id,"-zoom-content"),"".concat(this.jSPlugin.id,"-zoom-icon")],n=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));if(this.jSPlugin.use3DZoom?this.jSPlugin.close3DZoom():this.jSPlugin.Zoom.stopZoom(),this.setDecoderState({zoom:!1}),n){var o=qo(t),l;try{for(o.s();!(l=o.n()).done;){var d=l.value,c=n.querySelector("#".concat(d));c&&(c.style.display="none")}}catch(E){o.e(E)}finally{o.f()}}}},{key:"resumeFECBtn",value:function(){var t=["".concat(this.jSPlugin.id,"-capturePicture"),"".concat(this.jSPlugin.id,"-capturePicture-content"),"".concat(this.jSPlugin.id,"-capturePicture-icon"),"".concat(this.jSPlugin.id,"-recordvideo"),"".concat(this.jSPlugin.id,"-recordvideo-content"),"".concat(this.jSPlugin.id,"-recordvideo-icon"),"".concat(this.jSPlugin.id,"-zoom"),"".concat(this.jSPlugin.id,"-zoom-content"),"".concat(this.jSPlugin.id,"-zoom-icon")],n=document.getElementById("".concat(this.jSPlugin.id,"-wrap"));if(n){var o=qo(t),l;try{for(o.s();!(l=o.n()).done;){var d=l.value,c=n.querySelector("#".concat(d));c&&(c.style.display="")}}catch(E){o.e(E)}finally{o.f()}}}}]),Z}(),Ka=function(){function Z(m,t){En(this,Z),this.jSPlugin=m,this.isMobile=t,this.timer=null,this.initToastCustom()}return Rn(Z,[{key:"initToastCustom",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom"))?document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom")).style.display="none":this.randerToast()}},{key:"randerToast",value:function(){var t=this.jSPlugin.width,n=1;this.isMobile?n=t/375||1:n=t/1024||1;var o=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),l=document.createElement("div");l.style="display:none;position:absolute;top:0;width: 100%;align-items: center;justify-content: center;",l.id="".concat(this.jSPlugin.id,"-wrap-Toast-custom"),this.isMobile?l.innerHTML='<div id="'.concat(this.jSPlugin.id,`-wrap-Toast-custom-content" 
            style="padding: `).concat(12*n,"px ").concat(20*n,"px;font-size: ").concat(16*n,"px;line-height:").concat(16*n,"px;border-radius: ").concat(8*n,"px;margin-top: ").concat(667*n*.53,`px;
            background-color: rgba(0,0,0,0.8);color:rgba(255,255,255,0.90);box-sizing: border-box;z-index: 999;">
            </div>
            `):l.innerHTML='<div id="'.concat(this.jSPlugin.id,`-wrap-Toast-custom-content" 
            style="padding: `).concat(20*n,"px ").concat(32*n,"px;font-size: ").concat(24*n,"px;line-height:").concat(24*n,"px;border-radius: ").concat(12*n,"px;margin-top: ").concat(36*n,`px;
            background-color: rgba(0,0,0,0.7);color:rgba(255,255,255,0.90);box-sizing: border-box;z-index: 999;">
            </div>
            `),o.insertBefore(l,document.getElementById(this.jSPlugin.id))}},{key:"initToastContent",value:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2e3;console.log("content----------------",t),this.timer=null,document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom"))?(document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-wrap-Toast-custom-content")).innerText=t||"",this.timer=setTimeout(function(){document.getElementById("".concat(n.jSPlugin.id,"-wrap"))&&document.getElementById("".concat(n.jSPlugin.id,"-wrap-Toast-custom"))&&document.getElementById("".concat(n.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(n.jSPlugin.id,"-wrap-Toast-custom")))},o)):(this.randerToast(),this.initToastContent(t))}}]),Z}(),Ul=function(m,t,n){var o=function(C){console.log(C),t(C)},l=function(C){console.log(C),n(C)},d=new FormData;d.append("deviceSerial",pn(m.url).deviceSerial),d.append("cmd","open"),m.accessToken;var c="".concat(m.env.domain,"/api/v3/device/acs/remote/door?accessToken=").concat(m.accessToken);fetch(c,{method:"POST",body:d}).then(function(E){return E.json()}).then(function(E){console.log("get theme data",E),o(E)}).catch(function(E){l(E)})},Hl=function(m,t,n){var o=function(y){console.log(y),t(y)},l=function(y){console.log(y),n(y)},d={accessToken:m.accessToken,pageStart:0,pageSize:4,default:!0,voiceName:"轻应用语音文件"},c={"Content-Type":"application/x-www-form-urlencoded"},E="".concat(m.env.domain,"/api/lapp/voice/query");Da(E,"POST",d,o,l,c)},Vl=function(m,t,n,o){var l=function(y){console.log(y),n(y)},d=function(y){console.log(y),o(y)},c="".concat(m.env.domain,"/api/lapp/voice/send"),E=new FormData;E.append("deviceSerial",pn(m.url).deviceSerial),E.append("accessToken",m.accessToken),E.append("channelNo",pn(m.url).channelNo||1),E.append("fileUrl",t),fetch(c,{method:"POST",body:E}).then(function(C){return C.json()}).then(function(C){l(C)}).catch(function(C){d(C)})},ef=function(){function Z(m,t){En(this,Z),this.jSPlugin=m,this.videoWidth=m.width,this.switchFooter=t,this.sendLoadingStats=!1,this.toastCustom=new Ka(m,!1),this.quickReplyList=["你好，请将快递放在门口","你好，稍等","你好，请将快递放入小区快递柜","你好，请将外卖放在门口"],this.initQuickReply()}return Rn(Z,[{key:"initQuickReply",value:function(){document.getElementById("pc-quickReply-back")||this.renderQuickReply(),document.getElementById("pc-quickReply-back-item-0")||this.getQuickReplyList()}},{key:"renderQuickReply",value:function(){var t=this,n=this.videoWidth/1024||1,o=document.createElement("div");o.style="width:100%;",o.innerHTML=`<div style="width:100%;display:flex;flex-direction:row;align-items: center;">
        <div id="pc-quickReply-back" style="display: flex;align-items: center;margin: 0 `.concat(8*n,"px 0 ").concat(16*n,`px;cursor: pointer;">
            <div style="height: `).concat(32*n,`px;">
                <svg width="`).concat(32*n,'px" height="').concat(32*n,`px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <title>返回</title>
                    <defs>
                        <filter id="filter-1">
                            <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix>
                        </filter>
                    </defs>
                    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="快速回复loading" transform="translate(-16.000000, -497.000000)">
                            <g id="返回" transform="translate(0.000000, 425.000000)" filter="url(#filter-1)">
                                <g transform="translate(16.000000, 72.000000)">
                                    <rect id="Rectangle" x="0" y="0" width="32" height="32"></rect>
                                    <path d="M12.5,7.5 C13.2988404,7.5 13.9518304,8.12445998 13.9974537,8.91186361 L14,9 L14,21.5 L26.5,21.5 C27.2988404,21.5 27.9518304,22.12446 27.9974537,22.9118636 L28,23 C28,23.7988404 27.37554,24.4518304 26.5881364,24.4974537 L26.5,24.5 L12.5,24.5 C11.7011596,24.5 11.0481696,23.87554 11.0025463,23.0881364 L11,23 L11,9 C11,8.17157288 11.6715729,7.5 12.5,7.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" transform="translate(19.500000, 16.000000) rotate(45.000000) translate(-19.500000, -16.000000) "></path>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg>
            </div>
            <span style="font-size: `).concat(24*n,`px;">返回</span>
        </div>
        <div id="pc-quickReply-content" style="display: block;width:calc(100% - `).concat(160*n,"px);margin: 0 ").concat(24*n,`px;"></div>
        <div id="pc-quickReply-loading" style="display: none;width:calc(100% - `).concat(160*n,"px);margin: 0 ").concat(24*n,`px;"></div>
        <div id="pc-quickReply-loaderror" style="display: none;width:calc(100% - `).concat(160*n,"px);margin: 0 ").concat(24*n,`px;"></div>
    </div>`),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).appendChild(o),document.getElementById("pc-quickReply-back").onclick=function(){t.switchFooter("onBell")}}},{key:"matchQuickReplyBtn",value:function(){var t=this,n=this.videoWidth/1024||1,o=document.getElementById("pc-quickReply-content");this.quickReplyList&&this.quickReplyList.length>0&&this.quickReplyList.forEach(function(l,d){var c=document.createElement("div");c.id="pc-quickReply-back-item-".concat(d),c.style="margin: ".concat(8*n,"px 0 ").concat(8*n,"px ").concat(8*n,`px;cursor: pointer;
            padding: 0 `).concat(20*n,"px;min-height: ").concat(64*n,"px;width:calc(50% - ").concat(16*n,`px);
            display: inline-block;background: rgba(0,0,0,0.70);border-radius: 8px;text-align: center;
            box-sizing: border-box;font-size:`).concat(24*n,"px;color: rgba(255,255,255,0.90);"),c.innerHTML='<div id="pc-quickReply-back-item-box-'.concat(d,`">
            <span id="pc-quickReply-name-`).concat(d,'" style="line-height: ').concat(64*n,'px;">').concat(l.voiceName,`</span>
            </div>`),c.onclick=function(){t.sendLoadingStats||(console.log("item:"+l),t.sendQuickReply(l,d))},o.appendChild(c)})}},{key:"setBtnCheckLoading",value:function(t,n){var o=this.videoWidth/1024||1;if(n>-1){document.getElementById("pc-quickReply-back-item-".concat(n));var l=document.getElementById("pc-quickReply-back-item-box-".concat(n)),d=document.getElementById("pc-quickReply-name-".concat(n));if(t==1){var c=document.getElementById("pc-quickReply-icon-loading-".concat(n));c&&d&&l.removeChild(c)}else if(d){var E=document.createElement("span");E.id="pc-quickReply-icon-loading-".concat(n),E.style="vertical-align: middle;margin-right:".concat(16*o,"px;"),E.innerHTML='<svg width="'.concat(30*o,'" height="').concat(30*o,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>'),l.insertBefore(E,d)}}}},{key:"getQuickReplyList",value:function(){var t=this;console.log("getQuickReplyList"),this.madeLoadingDom(0);var n=function(d){if(d&&d.code==200){var c=d.data||[],E=[];d.data.forEach(function(C,y){E=C.voiceName.split("_"),c[y].voiceName=E[1]}),t.quickReplyList=c,setTimeout(function(){t.madeLoadingDom(2)},500)}else t.madeLoadingDom(1)},o=function(d){console.log(d),t.madeLoadingDom(1)};Hl(this.jSPlugin,n,o)}},{key:"madeLoadingDom",value:function(t){var n=this,o=this.videoWidth/1024||1;if(t==0){if(document.getElementById("pc-quickReply-content").style.display="none",document.getElementById("pc-quickReply-loaderror").style.display="none",document.getElementById("pc-quickReply-loading").style.display="block",!document.getElementById("pc-quickReply-loading-box")){var l=document.createElement("div");l.id="pc-quickReply-loading-box",l.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;",l.innerHTML='<div class="" style="heigth:'.concat(40*o,`px">
                <svg width="`).concat(40*o,'" height="').concat(40*o,`" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#ffffff" p-id="2400"></path></svg>
            </div>
            <div style="font-size: `).concat(28*o,"px;margin-top:").concat(10*o,"px;line-height:").concat(36*o,'px;">加载中…</div>'),document.getElementById("pc-quickReply-loading").appendChild(l)}}else if(t==1){if(document.getElementById("pc-quickReply-content").style.display="none",document.getElementById("pc-quickReply-loading").style.display="none",document.getElementById("pc-quickReply-loaderror").style.display="block",!document.getElementById("pc-quickReply-loaderror-box")){var d=document.createElement("div");d.id="pc-quickReply-loaderror-box",d.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;",d.innerHTML='<div style="font-size: '.concat(28*o,`px;color: rgba(255,255,255,0.90);">快速回复加载失败</div>
            <div id="pc-quickReply-loaderror-reload" style="font-size: `).concat(24*o,"px;margin-top:").concat(16*o,'px;color: rgba(100,143,252,0.90);cursor: pointer;">重新加载</div>'),document.getElementById("pc-quickReply-loaderror").appendChild(d),document.getElementById("pc-quickReply-loaderror-reload").onclick=function(){n.getQuickReplyList()}}}else document.getElementById("pc-quickReply-loading").style.display="none",document.getElementById("pc-quickReply-loaderror").style.display="none",document.getElementById("pc-quickReply-content").style.display="block",this.matchQuickReplyBtn()}},{key:"sendQuickReply",value:function(t,n){var o=this;this.sendLoadingStats=!0,this.setBtnCheckLoading(0,n);var l=function(E){o.sendLoadingStats=!1,o.setBtnCheckLoading(1,n),E&&E.code==200?o.toastCustom.initToastContent("快捷回复成功"):o.toastCustom.initToastContent("快捷回复失败，请重试"),o.switchFooter("onBell")},d=function(E){console.log(E),o.sendLoadingStats=!1,o.setBtnCheckLoading(1,n),o.toastCustom.initToastContent("快捷回复失败，请重试"),o.switchFooter("onBell")};Vl(this.jSPlugin,t.fileUrl,l,d)}}]),Z}(),tf=function(){function Z(m,t){En(this,Z),this.jSPlugin=m,this.videoWidth=m.width,this.switchFooter=t,this.toastCustom=new Ka(m,!1),this.lockStatus=!1,this.initRemoteUnlock()}return Rn(Z,[{key:"initRemoteUnlock",value:function(){document.getElementById("pc-remoteUnlock-back")?this.madeSlideEvent():this.renderRemoteUnlock()}},{key:"renderRemoteUnlock",value:function(){var t=this,n=this.videoWidth/1024||1,o=document.createElement("div");o.style="width:100%;",o.id="pc-remoteUnlock-box",o.innerHTML=`<div style="width:100%;display:flex;flex-direction:row;align-items: center;">
        <div id="pc-remoteUnlock-back" style="display: flex;align-items: center;margin: 0 `.concat(8*n,"px 0 ").concat(16*n,`px;cursor: pointer;">
            <div style="height: `).concat(32*n,`px;">
                <svg width="`).concat(32*n,'px" height="').concat(32*n,`px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <title>返回</title>
                    <defs>
                        <filter id="filter-1">
                            <feColorMatrix in="SourceGraphic" type="matrix" values="0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 0 1.000000 0 0 0 1.000000 0"></feColorMatrix>
                        </filter>
                    </defs>
                    <g id="控件" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="快速回复loading" transform="translate(-16.000000, -497.000000)">
                            <g id="返回" transform="translate(0.000000, 425.000000)" filter="url(#filter-1)">
                                <g transform="translate(16.000000, 72.000000)">
                                    <rect id="Rectangle" x="0" y="0" width="32" height="32"></rect>
                                    <path d="M12.5,7.5 C13.2988404,7.5 13.9518304,8.12445998 13.9974537,8.91186361 L14,9 L14,21.5 L26.5,21.5 C27.2988404,21.5 27.9518304,22.12446 27.9974537,22.9118636 L28,23 C28,23.7988404 27.37554,24.4518304 26.5881364,24.4974537 L26.5,24.5 L12.5,24.5 C11.7011596,24.5 11.0481696,23.87554 11.0025463,23.0881364 L11,23 L11,9 C11,8.17157288 11.6715729,7.5 12.5,7.5 Z" id="Path" fill="#FFFFFF" fill-rule="nonzero" transform="translate(19.500000, 16.000000) rotate(45.000000) translate(-19.500000, -16.000000) "></path>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg>
            </div>
            <span style="font-size: `).concat(24*n,`px;user-select: none;">返回</span>
        </div>
        <div id="pc-remoteUnlock-content" style="display: block;width:calc(100% - `).concat(160*n,"px);margin: 0 ").concat(24*n,`px;"></div>
    </div>`),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).appendChild(o),document.getElementById("pc-remoteUnlock-back").onclick=function(){t.goback()},this.renderRemoteUnlockSlide()}},{key:"renderRemoteUnlockSlide",value:function(){var t=this.videoWidth/1024||1,n=document.getElementById("pc-remoteUnlock-content"),o=document.createElement("div");o.id="pc-remoteUnlock-content-slide",o.style="width: 100%;display: flex;justify-content: center;cursor: pointer;",o.innerHTML='<div id="pc-remoteUnlock-slide-box" style="width: '.concat(400*t,"px;line-height: ").concat(80*t,"px;height: ").concat(80*t,"px;border: 1px solid rgba(255,255,255,1);border-radius: ").concat(40*t,`px;position: relative;text-align: center;">
        <div id="pc-remoteUnlock-slide-bgColor" style="border-radius: `).concat(40*t,"px;width: ").concat(64*t,"px;height: ").concat(80*t,`px;position: absolute;left: 0;top: 0;"></div>
        <div id="pc-remoteUnlock-slide-tips" style="height: `).concat(80*t,"px;line-height: ").concat(80*t,"px;font-size: ").concat(24*t,"px;border-radius: ").concat(40*t,`px;position: absolute;text-align: center;user-select: none;color: rgba(255,255,255,0.90);width: 100%;">右滑开锁</div>
        <div id="pc-remoteUnlock-slide-ball" style="top: `).concat(8*t,"px;left: ").concat(8*t,"px;width: ").concat(64*t,"px;height: ").concat(64*t,`px;background: #598FFF;position: absolute;text-align: center;border-radius:50%;display: flex;align-items: center;justify-content: center;">
            <svg id="slide-ball-start" style="display: inline;" width="`).concat(36*t,'px" height="').concat(36*t,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title></title>
                <g id="icon/箭头向右" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="24" height="24"></rect>
                    <path d="M14.2841136,6.3689007 L19.9432338,12.0287579 L14.2863796,17.6856122 L12.8580239,16.2572565 L16.114,12.9999007 L4.00000001,13 L4.00000001,11 L16.058,10.9999007 L12.8557579,7.79725638 L14.2841136,6.3689007 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                </g>
            </svg>
            <svg id="slide-ball-end"  style="display: none;" width="`).concat(36*t,'" height="').concat(36*t,`" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#598FFF" p-id="2400"></path></svg>
            
        </div>
    </div>`),n.appendChild(o),this.madeSlideEvent()}},{key:"getOffsetLeft",value:function(t){var n=0;do n+=t.offsetLeft,t=t.parentNode;while(t.parentNode);return n}},{key:"madeSlideEvent",value:function(){var t=this.videoWidth/1024||1,n=document.getElementById("".concat(this.jSPlugin.id)),o=this.getOffsetLeft(n),l=document.getElementById("pc-remoteUnlock-slide-box"),d=document.getElementById("pc-remoteUnlock-slide-bgColor"),c=document.getElementById("pc-remoteUnlock-slide-tips"),E=document.getElementById("pc-remoteUnlock-slide-ball"),C=this;function y(){C.lockStatus||(C.lockStatus=!0,document.getElementById("slide-ball-start").style.display="none",document.getElementById("slide-ball-end").style.display="inline",d.style.width=l.clientWidth+"px",d.style.backgroundColor="#598FFF",l.style.border="0",E.style.backgroundColor="#ffffff",c.textContent="正在开锁",E.onmousedown=null,document.onmousemove=null,C.sendRemoteUnlockApi())}E.onmousedown=function(g){var g=g||window.event,p=g.offsetX;E.style.transition="",d.style.transition="",document.onmouseup=function(){console.log("--------------onmouseup"),C.lockStatus||(d.style.width="0px",E.style.left=8*t+"px",E.style.transition="left 0.6s linear",d.style.transition="width 0.6s linear"),document.onmouseup=null,document.onmousemove=null},document.onmousemove=function(ae){var ae=ae||window.event;console.log("videoDom",o);var de=ae.pageX-l.offsetLeft-p-o,ie=l.clientWidth-E.clientWidth-8*t;de<=0&&(de=0),de>=ie&&(de=ie),E.style.left=de+"px",de==ie&&!C.lockStatus&&y()}}}},{key:"resetRemoteUnlockSlide",value:function(){var t=document.getElementById("pc-remoteUnlock-box"),n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock"));t&&n&&n.removeChild(t)}},{key:"sendRemoteUnlockApi",value:function(){var t=this;console.log("下发远程开锁");var n=function(d){d&&d.code==200?t.toastCustom.initToastContent("开锁成功"):t.toastCustom.initToastContent("开锁失败，请重试"),t.goback()},o=function(d){console.log(d),t.toastCustom.initToastContent("开锁失败，请重试"),t.goback()};Ul(this.jSPlugin,n,o)}},{key:"goback",value:function(){this.switchFooter("onCall"),this.resetRemoteUnlockSlide()}}]),Z}(),nf={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0},header:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000 linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)",activeColor:"#1890FF",autoFocus:0,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"ringStatus",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"callStatus",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#ffffff",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]}},footer:{onBell:{color:"#ffffff",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"quickReply",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"rejection",part:"left",defaultActive:0,isrender:1,color:"#2C2C2C",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"answer",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-3",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000080",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"mute",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"hangUp",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]}}},rf={data:nf},Gl=function(m){var t="";return Object.keys(m).map(function(n,o){t+="".concat(n,":").concat(m[n]).concat(o<Object.keys(m).length-1?";":"")}),t},af=function(){function Z(m,t,n,o){var l=this;En(this,Z),ln(this,"autoPlayRing",function(){console.log("autoPlayRing");var d=document.getElementById("bellring-audio");d&&(d.muted=!1,d.src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3",d.paused&&d.play()),window.removeEventListener("click",l.autoPlayRing)}),ln(this,"muteCommon",function(d){var c=l.decoderState.state,E=c.talk,C=c.sound;E?(console.log("结束对讲"),l.setDecoderState({talk:!1,mute:!0},d.backgroundColor),l.jSPlugin.Talk.stopTalk(),C||l.jSPlugin.openSound(),l.setDecoderState({sound:!0})):(l.setDecoderState({talk:!1,mute:!0},d.backgroundColor),C||l.jSPlugin.openSound(),l.setDecoderState({sound:!0}))}),ln(this,"switchCallStatus",function(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,E=l.themeData,C=E.header,y=E.footer,w=null;if(d=="onCall"){console.log("接听"),l.bellStatus="onCall",l.switchFooter("onCall"),y[l.bellStatus].btnList.map(function(p,te){p.isrender&&l.renderFooter(p.iconId,p),p.iconId=="mute"&&(w=p)}),C[l.bellStatus].btnList.map(function(p,te){p.isrender&&l.renderHeader(p.iconId,p)});var g=document.getElementById("".concat(l.jSPlugin.id,"-header-onBell"));g&&g.parentElement.removeChild(g),l.themeData.customConfig.bellPoster==1&&document.getElementById("bellring-icon")&&document.getElementById("".concat(l.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),l.themeData.customConfig.defaultMicro==0&&w?l.muteCommon(w):l.setDecoderState({mute:!1},w.backgroundColor),l.removeBellRing()}else console.log("响铃"),l.bellStatus="onBell",l.jSPlugin.Theme.changeTheme(l.themeData,c)}),this.jSPlugin=m,this.videoWidth=m.width,this.videoHeight=m.height,this.themeData=t,this.setDecoderState=n,this.decoderState=o,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.bellStatus="onBell",this.recordTimer=null,this.nextRate=1,this.themeInited=!1,this.inited=!1,this.activeThemeStatus=!0,this.activeThemeStatusTxt="模板未激活",this.toastCustom=new Ka(m,!1)}return Rn(Z,[{key:"initBellRing",value:function(){var t=this,n=this.decoderState.state,o=n.play,l=n.isEditing;n.rejection;var d=this.videoWidth,c=d/1024;this.maxBellTime=this.themeData.customConfig.maxBellTime*1e3;var E=document.getElementById("bellring"),C=document.getElementById("bellring-audio");if(!E&&!C){if(this.jSPlugin.isNeedBellRing){var y=document.createElement("div");y.id="bellring",y.innerHTML=`<div>
          <audio id="bellring-audio" loop autoplay>
            <source src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3" type="audio/mpeg">
          </audio>
          </div>`,document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(y)}if(this.themeData.customConfig.bellPoster==1&&!l){var w=(this.videoHeight-180*c)/2,g=document.createElement("div");g.id="bellring-icon",g.style=`position: absolute;pointer-events: none;background: none;width: 100%;
          position: absolute;top: `.concat(w,"px;display: flex;align-items: center;justify-content: center;"),g.innerHTML='<div style="width: '.concat(180*c,"px;height: ").concat(180*c,`px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.2);border-radius: 50%;">
            <div style="width: `).concat(100*c,"px;height: ").concat(100*c,`px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.3);border-radius: 50%;">
              <svg width="`).concat(40*c,'px" height="').concat(40*c,`px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <title>icon/响铃</title>
                  <g id="icon/响铃" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <polygon id="Path" points="0 0 40.0000002 0 40.0000002 40.0000002 0 40.0000002"></polygon>
                      <path d="M20.0000001,4.25000002 C22.0363461,4.25000002 23.698175,5.84879552 23.8000507,7.8591997 L23.8050001,8.05500003 L23.805316,8.99953253 C27.1874196,9.97041766 29.6921839,13.0354462 29.80936,16.723731 L29.80936,16.723731 L29.8133335,16.9800001 L29.8133335,21.6416668 C29.8133335,22.3259481 30.0858837,22.9835569 30.5703302,23.4680033 L30.5703302,23.4680033 L31.6386635,24.5363367 C32.338953,25.2366262 32.760721,26.1675592 32.8273086,27.1785295 L32.8273086,27.1785295 L32.8350001,27.4233334 C32.8350001,29.577547 31.0892137,31.3233335 28.9350001,31.3233335 L28.9350001,31.3233335 L24.5666667,31.323 L24.5650266,31.3951531 C24.4527075,33.8194458 22.4520933,35.7500001 20.0000001,35.7500001 C17.5482065,35.7500001 15.5473098,33.8197367 15.4349743,31.3967059 L15.4326667,31.323 L11.0666667,31.3233335 C9.06159524,31.3233335 7.39851917,29.8069287 7.18810198,27.8229374 L7.17194359,27.6230185 L7.1666667,27.4233334 C7.1666667,26.3411154 7.59733134,25.3020086 8.36300328,24.5363367 L8.36300328,24.5363367 L9.43133662,23.4680033 C9.91578309,22.9835569 10.1883334,22.3259481 10.1883334,21.6416668 L10.1883334,21.6416668 L10.1883334,16.9800001 C10.1883334,13.1909619 12.7263704,9.99530436 16.1948593,8.99965364 L16.1950001,8.05500003 C16.1950001,5.95360729 17.8979654,4.25000002 20.0000001,4.25000002 Z M23.0656667,31.323 L16.9336667,31.323 L16.9352114,31.3619281 C17.0285826,32.9723844 18.3649772,34.2500001 20.0000001,34.2500001 C21.6352227,34.2500001 22.9714318,32.9721919 23.0647896,31.3604131 L23.0656667,31.323 Z M21.5116668,10.1783334 L18.4900001,10.1783334 C14.7336124,10.1783334 11.6883334,13.2231481 11.6883334,16.9800001 L11.6883334,16.9800001 L11.6883334,21.6416668 C11.6883334,22.7238848 11.2576687,23.7629916 10.4919968,24.5286635 L10.4919968,24.5286635 L9.42366346,25.5969969 C8.93921698,26.0814433 8.6666667,26.7390521 8.66637526,27.402427 L8.66637526,27.402427 L8.67048222,27.560237 C8.74130967,28.8268108 9.79171396,29.8233335 11.0666667,29.8233335 L11.0666667,29.8233335 L23.7906939,29.8222289 C23.8004164,29.8218553 23.8101862,29.8216668 23.8200001,29.8216668 L23.8486667,29.823 L28.9350001,29.8233335 C30.2055455,29.8233335 31.2450456,28.8367727 31.329826,27.609522 L31.3354106,27.4481422 L31.3293607,27.2529336 C31.2880301,26.6292837 31.0210852,26.0400787 30.5780034,25.5969969 L30.5780034,25.5969969 L29.50967,24.5286635 C28.7439981,23.7629916 28.3133335,22.7238848 28.3133335,21.6416668 L28.3133335,21.6416668 L28.3134279,16.9919039 L28.3098332,16.759466 C28.1934023,13.0970787 25.1864454,10.1783334 21.5116668,10.1783334 L21.5116668,10.1783334 Z M20.0000001,5.75000002 C18.7795808,5.75000002 17.7813801,6.69770708 17.7003155,7.89717688 L17.6950001,8.05500003 L17.6952875,8.7158769 C17.9568453,8.69103758 18.2219393,8.67833337 18.4900001,8.67833337 L18.4900001,8.67833337 L21.5116668,8.67833337 C21.7792577,8.67833337 22.0439466,8.69101238 22.3051575,8.71580951 L22.3050001,8.05500003 C22.3050001,6.7819079 21.273481,5.75000002 20.0000001,5.75000002 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                  </g>
              </svg>
            </div>
          </div>`),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(g),o&&this.bellStatus=="onBell"&&this.jSPlugin.pause()}else document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"));setTimeout(function(){var p=t.decoderState.state,te=p.isEditing,ae=p.rejection;t.bellStatus=="onBell"&&!ae&&(t.removeBellRing(),te||t.answerOvertime())},this.maxBellTime)}}},{key:"removeBellRing",value:function(){document.getElementById("bellring")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring")),document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}},{key:"matchBtn",value:function(t,n){var o=this,l=this.themeData,d=l.header,c=l.footer,E=this.decoderState.state,C=E.mute,y=E.rejection,w={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},g=d[this.bellStatus].btnList.findIndex(function(ae){return ae.iconId===t});g===-1?(w.color=c[this.bellStatus].color,w.backgroundColor=c[this.bellStatus].backgroundColor,w.activeColor=c[this.bellStatus].activeColor):(w.color=d[this.bellStatus].color,w.backgroundColor=d[this.bellStatus].backgroundColor,w.activeColor=d[this.bellStatus].activeColor);var p=this.videoWidth/6;this.videoWidth;var te=this.videoWidth/1024||1;switch(t){case"ringStatus":return w.title=this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,w.id=t,w.domString='<span id="header-onBell-ringStatus" style="color:'.concat(n.color||"#FFFFFF",";font-size: ").concat(32*te,'px;display: block;text-align: left;font-weight: 500;" >').concat(this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,"</span>"),w.onclick=function(){},w;case"deviceCategory":return w.title="设备名称",w.id=t,w.domString=`<span id="header-onBell-deviceCategory" 
          style="
          color:`.concat(n.color||"#FFFFFF",`;
          font-size: `).concat(24*te,`px;
          padding-top: `).concat(16*te,`px;
          display: block;
          max-width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          text-align: left;
          ">`).concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),w.onclick=function(){},w;case"callStatus":return w.title="通话中",w.id=t,w.domString='<span id="header-onCall-ringStatus" style="color:'.concat(n.color||"#FFFFFF",";font-size: ").concat(32*te,'px;display: block;text-align: left;" >通话中</span>'),w.onclick=function(){},w;case"deviceCategory":return w.title="设备名称",w.id=t,w.domString=`<span id="header-onCall-deviceCategory"
           style="color:`.concat(n.color||"#FFFFFF",`;
           font-size: `).concat(24*te,`px;
           padding-top: `).concat(16*te,`px;
           display: block;
           max-width: 100%;
           overflow: hidden;
           text-overflow: ellipsis;
           white-space: nowrap;
           text-align: left;
           ">`).concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),w.onclick=function(){},w;case"rejection":return w.title="拒绝",w.id=t,w.domString='<div style="width: '.concat(p*.7,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width:`).concat(p*.5,"px;height: ").concat(p*.5,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(p*.3,'px" height="').concat(p*.3,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>拒绝</title>
                        <g id="icon/拒绝" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(p*.1,`px;user-select: none;">拒绝</div>
            </div>`),w.onclick=function(){var ae=o.decoderState.state,de=ae.play,ie=ae.isEditing,we=ae.rejection;if(ie||we)return!1;console.log("拒绝"),de&&o.jSPlugin.stop(),o.removeBellRing(),o.setDecoderState({play:!1,rejection:!0}),o.rejectionStatusDispose(),typeof o.jSPlugin.hangUpCallback=="function"&&o.jSPlugin.hangUpCallback("rejection")},w;case"quickReply":return w.title="快捷回复",w.id=t,w.domString='<div style="width: '.concat(p*.7,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width: `).concat(p*.5,"px;height: ").concat(p*.5,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(p*.3,'px" height="').concat(p*.3,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>快捷回复</title>
                        <g id="icon/web快捷回复" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M17.4723401,6.00464509 C24.1317208,5.8200623 29.613145,11.1601938 29.613145,17.806299 C29.613145,19.5506656 29.2343807,21.2437888 28.5133012,22.7904909 L28.638,22.51 L29.9802796,28.9334997 C30.0980856,29.4978889 29.6719785,30.0050773 29.131395,30.0271186 L29.0218792,30.0249315 L28.9025577,30.0074816 L22.488349,28.6446207 L22.3501503,28.7067675 C21.0679643,29.242563 19.6940914,29.5480927 18.2793303,29.6038407 L18.2793303,29.6038407 L17.8062986,29.6131454 C11.1610025,29.6131454 5.820073,24.1313212 6.00464384,17.4723718 C6.17540866,11.3038211 11.3038207,6.17540904 17.4723401,6.00464509 Z M17.8062986,16.2974446 C16.9707372,16.2974446 16.2926003,16.9755814 16.2926003,17.8111428 C16.2926003,18.6467043 16.9707372,19.3248411 17.8062986,19.3248411 C18.64186,19.3248411 19.3199969,18.6467043 19.3199969,17.8111428 C19.3199969,16.9755814 18.64186,16.2974446 17.8062986,16.2974446 Z M12.9624642,16.2974446 C12.1269027,16.2974446 11.4487659,16.9755814 11.4487659,17.8111428 C11.4487659,18.6467043 12.1269027,19.3248411 12.9624642,19.3248411 C13.7980256,19.3248411 14.4761624,18.6467043 14.4761624,17.8111428 C14.4761624,16.9755814 13.7980256,16.2974446 12.9624642,16.2974446 Z M22.650133,16.2974446 C21.8145716,16.2974446 21.1364348,16.9755814 21.1364348,17.8111428 C21.1364348,18.6467043 21.8145716,19.3248411 22.650133,19.3248411 C23.4856945,19.3248411 24.1638313,18.6467043 24.1638313,17.8111428 C24.1638313,16.9755814 23.4856945,16.2974446 22.650133,16.2974446 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(p*.1,`px;user-select: none;">快捷回复</div>
            </div>`),w.onclick=function(){var ae=o.decoderState.state.rejection;if(ae)return!1;console.log("快捷回复"),o.switchFooter("quickReply"),o.quickReplyEle=new ef(o.jSPlugin,o.switchFooter)},w;case"answer":return w.title="接听",w.id=t,w.domString='<div style="width: '.concat(p*.7,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width: `).concat(p*.5,"px;height: ").concat(p*.5,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(p*.3,'px" height="').concat(p*.3,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>接听</title>
                        <g id="icon/接听" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M15.7728281,19.6822968 C13.2528132,17.165123 10.8435994,14.2473605 11.9999084,13.0938925 C13.6505608,11.4432401 15.0881341,10.4261428 12.1646895,6.78675259 C9.23840386,3.14452132 7.28659974,5.94011849 5.68708632,7.53963191 C3.84324225,9.38631703 5.59049048,16.2645088 12.3891328,23.0659922 C19.1877751,29.8646345 26.0688079,31.6147238 27.9154931,29.7680386 C29.5150065,28.1685252 32.3106036,26.2195622 28.6712134,23.2932765 C25.0318232,20.3669909 24.0147259,21.8045642 22.3640735,23.4580576 C21.2077645,24.6086845 18.2928431,22.1994707 15.7728281,19.6822968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.727936, 17.728157) rotate(-360.000000) translate(-17.727936, -17.728157) "></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(p*.1,`px;user-select: none;">接听</div>
            </div>`),w.onclick=function(){var ae=o.decoderState.state,de=ae.play,ie=ae.isEditing,we=ae.talk,Ve=ae.sound,ue=ae.rejection;if(ie||ue)return!1;console.log("接听"),o.jSPlugin.pluginStatus.loadingClear(),de||(o.jSPlugin.pluginStatus.loadingStart(o.jSPlugin.id),o.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"}),o.jSPlugin.play(),o.setDecoderState({play:!de})),!we&&o.themeData.customConfig.defaultMicro==1&&(o.setDecoderState({talk:!0,mute:!1}),Ve&&o.jSPlugin.closeSound(),o.jSPlugin.Talk.startTalk()),o.setDecoderState({sound:!1}),o.bellStatus="onCall",o.switchFooter("onCall"),c[o.bellStatus].btnList.map(function(ne,Q){ne.isrender&&o.renderFooter(ne.iconId,ne)}),d[o.bellStatus].btnList.map(function(ne,Q){ne.isrender&&o.renderHeader(ne.iconId,ne)});var x=document.getElementById("".concat(o.jSPlugin.id,"-header-onBell"));x&&x.parentElement.removeChild(x),o.themeData.customConfig.bellPoster==1&&(document.getElementById("bellring-icon")&&document.getElementById("".concat(o.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),o.jSPlugin.setPoster("")),o.themeData.customConfig.defaultMicro==0&&(o.muteCommon(n),o.jSPlugin.openSound(),o.setDecoderState({sound:!0})),o.removeBellRing(),o.maxTalkTime=o.themeData.customConfig.maxTalkTime*1e3*60;var O=o;setTimeout(function(){we&&(console.log("结束对讲"),O.setDecoderState({talk:!1}),O.jSPlugin.Talk.stopTalk()),de&&(O.jSPlugin.stop(),O.setDecoderState({play:!de})),o.rejectionStatusDispose(),o.remoteUnlockEle&&o.remoteUnlockEle.goback(),typeof o.jSPlugin.hangUpCallback=="function"&&o.jSPlugin.hangUpCallback("hangUp")},o.maxTalkTime)},w;case"remoteUnlock":return w.title="远程开锁",w.id=t,w.domString='<div style="width: '.concat(p*.7,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width: `).concat(p*.5,"px;height: ").concat(p*.5,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(p*.3,'px" height="').concat(p*.3,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>开锁</title>
                        <g id="icon/开锁" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M18,4 C21.3137085,4 24,6.6862915 24,10 L24,10 L24,19.787 L29.5,19.7875 C30.0522847,19.7875 30.5,20.2352153 30.5,20.7875 C30.5,21.3397847 30.0522847,21.7875 29.5,21.7875 L24,21.787 L24,26 C24,29.2383969 21.4344251,31.8775718 18.2249383,31.9958615 L18,32 C14.6862915,32 12,29.3137085 12,26 L12,26 L12,10 C12,6.6862915 14.6862915,4 18,4 Z M18,6 C15.790861,6 14,7.790861 14,10 L14,10 L14,26 C14,28.209139 15.790861,30 18,30 C20.209139,30 22,28.209139 22,26 L22,26 L22,21.787 L18.5,21.7875 C17.9477153,21.7875 17.5,21.3397847 17.5,20.7875 C17.5,20.2352153 17.9477153,19.7875 18.5,19.7875 L22,19.787 L22,10 C22,7.85780461 20.3160315,6.10892112 18.1996403,6.00489531 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(p*.1,`px;user-select: none;">远程开锁</div>
            </div>`),w.onclick=function(){var ae=o.decoderState.state,de=ae.isEditing,ie=ae.rejection;if(de||o.bellStatus=="onBell"||ie)return!1;console.log("远程开锁"),o.switchFooter("remoteUnlock"),o.remoteUnlockEle=new tf(o.jSPlugin,o.switchFooter)},w;case"mute":return w.title="静音",w.id=t,w.domString='<div style="width: '.concat(p*.7,`px;display: flex;flex-direction: column;align-items: center;">
                <div id="`).concat(this.jSPlugin.id,'-icon-mute" style="width: ').concat(p*.5,"px;height: ").concat(p*.5,"px;border-radius: 50%;border: 1px solid ").concat(y?"#CCCCCC":n.backgroundColor,";background: ").concat(y&&C?"#cccccc":"#ffffff",`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(p*.3,'px" height="').concat(p*.3,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>静音</title>
                        <g id="icon/静音" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path id="icon-mute-path" d="M29.2988305,7.56559704 C29.8540627,8.1086468 29.8980234,8.97727504 29.4240597,9.57172938 L29.3223594,9.6867869 L22.585,16.574 L22.5859243,26.0592702 C22.5859243,26.9500521 21.8638029,27.6721735 20.973021,27.6721735 C20.6007147,27.6721735 20.2398727,27.5433734 19.9517149,27.3076254 L15.583,23.733 L10.4341733,28.9987008 C9.85492024,29.5909486 8.9052312,29.6014828 8.31298346,29.0222298 C7.75775121,28.47918 7.71379057,27.6105518 8.18775419,27.0160974 L8.28945454,26.9010399 L27.1776406,7.58912597 C27.7568937,6.99687823 28.7065827,6.98634397 29.2988305,7.56559704 Z M22.2503608,7.16816759 C22.4679282,7.45036017 22.5859243,7.79665625 22.5859243,8.15298221 L22.585,9.899 L10.778,21.971 L9.47580645,21.9713498 C7.69424274,21.9713498 6.25,20.5271071 6.25,18.7455434 L6.25,15.65293 C6.25,13.8713663 7.69424274,12.4271235 9.47580645,12.4271235 L12.787,12.427 L19.9882064,6.87564241 C20.6936617,6.33174431 21.7064627,6.46271229 22.2503608,7.16816759 Z" id="形状结合" fill="`).concat(C?"#ffffff":y?"#cccccc":n.backgroundColor,`"></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(p*.1,`px;user-select: none;">静音</div>
            </div>`),w.onclick=function(){var ae=o.decoderState.state,de=ae.talk,ie=ae.sound;ae.play;var we=ae.rejection;if(we)return!1;console.log("静音"),de?(console.log("结束对讲"),o.setDecoderState({talk:!1,mute:!0},n.backgroundColor),o.jSPlugin.Talk.stopTalk(),o.jSPlugin.openSound(),o.setDecoderState({sound:!0})):(console.log("开始对讲"),o.setDecoderState({talk:!0,mute:!1},n.backgroundColor),ie&&(o.jSPlugin.closeSound(),o.setDecoderState({sound:!1})),o.jSPlugin.Talk.startTalk())},w;case"hangUp":return w.title="挂断",w.id=t,w.domString='<div style="width: '.concat(p*.7,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width:`).concat(p*.5,"px;height: ").concat(p*.5,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(p*.3,'px" height="').concat(p*.3,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>挂断</title>
                        <g id="icon/挂断" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(p*.1,`px;">挂断</div>
            </div>`),w.onclick=function(){var ae=o.decoderState.state,de=ae.talk,ie=ae.play,we=ae.sound,Ve=ae.rejection;if(Ve)return!1;de&&(console.log("结束对讲"),o.setDecoderState({talk:!1}),o.jSPlugin.Talk.stopTalk()),ie&&(o.jSPlugin.stop(),o.setDecoderState({play:!ie})),we&&(o.jSPlugin.closeSound(),o.setDecoderState({sound:!1})),(ie||de)&&(console.log("挂断"),o.removeBellRing(),o.rejectionStatusDispose(),typeof o.jSPlugin.hangUpCallback=="function"&&o.jSPlugin.hangUpCallback("hangUp"))},w;default:return w}}},{key:"answerOvertime",value:function(){this.toastCustom.initToastContent("应答超时");var t=this.decoderState.state.play;console.log("应答超时"),t&&this.jSPlugin.stop(),this.setDecoderState({play:!1,rejection:!0}),this.rejectionStatusDispose(),this.switchFooter("onBell"),typeof this.jSPlugin.hangUpCallback=="function"&&this.jSPlugin.hangUpCallback("rejection")}},{key:"rejectionStatusDispose",value:function(){var t=this,n=this.themeData.footer,o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),l=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),d=document.getElementById("header-".concat(this.bellStatus,"-ringStatus"));this.bellStatus=="onBell"?(o.innerHTML="",o.style.color="#ffffff"):(l.innerHTML="",l.style.color="#ffffff"),console.log("rejectionStatusDispose"),this.setDecoderState({rejection:!0}),n[this.bellStatus].btnList.map(function(c,E){c.isrender&&t.renderFooter(c.iconId,c)}),d.innerText="通话已结束",this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:!1,type:2})}},{key:"userNoDevice",value:function(){var t=this;this.removeBellRing(),this.setDecoderState({rejection:!0});var n=this.themeData.footer,o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),l=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));this.bellStatus=="onBell"?(o.innerHTML="",o.style.color="#ffffff"):(l.innerHTML="",l.style.color="#ffffff"),console.log("userNoDevice"),this.setDecoderState({rejection:!0}),n[this.bellStatus].btnList.map(function(d,c){d.isrender&&t.renderFooter(d.iconId,d)}),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:!1,type:2})}},{key:"renderHeader",value:function(t,n){var o=this,l=this.videoWidth/1024||1,d=this.matchBtn(t,n);if(document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content"))){var c=document.createElement("span");c.innerHTML="".concat(d.domString),document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content")).appendChild(c)}else{var E=document.createElement("div");E.id="".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus),E.style="max-width:50%;position:relative;",E.innerHTML='<span id="'.concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,'-content" style="display:inline-block;height:auto;padding-top: ').concat(32*l,`px;";>
        `).concat(d.domString,`
      </span>`),E.onclick=function(C){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onclick(C)},document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(E)}}},{key:"renderFooter",value:function(t,n){var o=this,l=this.decoderState.state.mute;if(console.log("-------------renderFooter"),t=="remoteUnlock"&&this.jSPlugin.capacity&&(!this.jSPlugin.capacity.support_unlock||this.jSPlugin.capacity.support_unlock==0))return!1;var d=this.matchBtn(t,n),c=this.videoWidth/6,E=document.createElement("div");E.className="theme-icon-item",this.jSPlugin.isWebConsole?E.style="padding:0 ".concat(c*.1,"px;"):E.style="padding:0 ".concat(c*.1,"px;cursor: pointer;"),E.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(d.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(d.id,'-content" title="').concat(d.title,'" style="display: flex;align-items: center;position:relative;">')).concat(d.domString,"</div>")+"</span>",E.onclick=function(p){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onclick(p)},d.onmouseenter&&(E.onmouseenter=function(p){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onmouseenter(p)}),d.onmouseleave&&(E.onmouseleave=function(p){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onmouseleave(p)});var C=this.videoWidth/597,y=document.createElement("span");y.className="icon-move left",y.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(d.id,'-left" title="左移" style="display: inline-block;border-radius: 2px;overflow: hidden;position: absolute;top: calc(50% - ').concat(35*C,"px); width: ").concat(10*C,"px; height: ").concat(40*C,`px;cursor: pointer;">
        <svg width="100%" height="100%" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title></title>
              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="H5呼叫模板" transform="translate(-614.000000, -5024.000000)">
                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">
                          <g id="编组-9" transform="translate(23.000000, 522.000000)">
                              <g id="编组" transform="translate(170.000000, 0.000000)">
                                  <g id="箭头左" transform="translate(0.000000, 18.000000)">
                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>
                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(1.000000, 15.000000)" fill="#FFFFFF">
                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                  </g>
              </g>
          </svg>
        </span>`),y.onclick=function(){o.editIcon(d.id,"left","footer")},E.appendChild(y);var w=document.createElement("span");if(w.className="icon-move right",w.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(d.id,'-right" class="ezuikit-theme-icon" title="右移" style="display: inline-block;border-radius: 2px;overflow: hidden;position: absolute;top: calc(50% - ').concat(35*C,"px);left: ").concat(20*C+c*.5,"px; width: ").concat(10*C,"px; height: ").concat(40*C,`px;cursor: pointer;">
        <svg width="100%" height="100%" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title></title>
              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="H5呼叫模板" transform="translate(-684.000000, -5024.000000)">
                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">
                          <g id="编组-9" transform="translate(23.000000, 522.000000)">
                              <g id="编组" transform="translate(170.000000, 0.000000)">
                                  <g id="箭头右" transform="translate(70.000000, 18.000000)">
                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>
                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(5.500000, 20.000000) scale(-1, 1) translate(-5.500000, -20.000000) translate(2.000000, 15.000000)" fill="#FFFFFF">
                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                  </g>
              </g>
          </svg>
        </span>`),w.onclick=function(){o.editIcon(d.id,"right","footer")},E.appendChild(w),!(t=="answer"||t=="rejection"||t=="hangUp")){var g=document.createElement("span");g.className="icon-move close",g.innerHTML='<span id="'.concat(d.id,'-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: ').concat(-15*C-1,"px;left: ").concat(20*C+c*.5-4.5*C,`px;cursor: pointer;">
            <svg width="`).concat(18*C,'" height="').concat(18*C,`" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <title></title>
                  <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <g id="H5呼叫模板" transform="translate(-680.000000, -5006.000000)">
                          <g id="编组-28" transform="translate(421.000000, 4484.000000)">
                              <g id="编组-9" transform="translate(23.000000, 522.000000)">
                                  <g id="编组" transform="translate(170.000000, 0.000000)">
                                      <g id="关闭1" transform="translate(66.000000, 0.000000)">
                                          <rect id="矩形" fill-rule="nonzero" x="0" y="0" width="18" height="18"></rect>
                                          <path d="M9,1.125 C4.65117188,1.125 1.125,4.65117188 1.125,9 C1.125,13.3488281 4.65117188,16.875 9,16.875 C13.3488281,16.875 16.875,13.3488281 16.875,9 C16.875,4.65117188 13.3488281,1.125 9,1.125 Z M11.9074219,11.9917969 L10.7472656,11.9865234 L9,9.90351562 L7.25449219,11.9847656 L6.09257813,11.9900391 C6.01523438,11.9900391 5.95195313,11.9285156 5.95195313,11.8494141 C5.95195313,11.8160156 5.96425781,11.784375 5.98535156,11.7580078 L8.27226563,9.03339844 L5.98535156,6.31054687 C5.96425781,6.28417969 5.95195313,6.25253906 5.95195313,6.21914062 C5.95195313,6.14179687 6.01523438,6.07851562 6.09257813,6.07851562 L7.25449219,6.08378906 L9,8.16679687 L10.7455078,6.08554688 L11.9056641,6.08027344 C11.9830078,6.08027344 12.0462891,6.14179687 12.0462891,6.22089844 C12.0462891,6.25429687 12.0339844,6.2859375 12.0128906,6.31230469 L9.72949219,9.03515625 L12.0146484,11.7597656 C12.0357422,11.7861328 12.0480469,11.8177734 12.0480469,11.8511719 C12.0480469,11.9285156 11.9847656,11.9917969 11.9074219,11.9917969 Z" id="形状" fill="#595959"></path>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                  </g>
              </svg>
          </span>`),g.onclick=function(){o.editIcon(d.id,"delete","footer")},E.appendChild(g)}this.bellStatus=="onCall"?document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).appendChild(E):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(E),this.decoderState.state.isEditing&&t=="mute"&&this.bellStatus=="onCall"&&(this.themeData.customConfig.defaultMicro==0&&!l?this.setDecoderState({mute:!0},n.backgroundColor):this.setDecoderState({mute:!1},n.backgroundColor))}},{key:"switchFooter",value:function(t){var n={};switch(this.themeData&&(n=this.themeData.footer),t){case"onBell":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).style.display="none"),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"))?document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display=="none"&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex"):document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex";break;case"onCall":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="flex",this.themeData&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=n[this.bellStatus].color);break;case"quickReply":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReply")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none";break;case"remoteUnlock":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-remoteUnlock")).style.display="flex";break}}},{key:"initThemeData",value:function(){var t=this;console.log("-------------initThemeData");var n=this.decoderState.state.isEditing,o=this.themeData,l=o.header,d=o.footer,c=this.jSPlugin.id,E=this.videoWidth,C=E/1024;if(this.isNeedRenderHeader=vr.findIndex(l[this.bellStatus].btnList,function(we){return we.isrender>0})>=0,this.isNeedRenderFooter=vr.findIndex(d[this.bellStatus].btnList,function(we){return we.isrender>0})>=0,this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width: calc(100% - 100px);padding-left: 3%;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var y=document.createElement("div");y.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),y.setAttribute("class","header-controls"),y.innerHTML="<div id='".concat(this.jSPlugin.id,`-headControl-left' class="header-controls-left" style='display:flex;width:calc(100% - 100px);overflow:hidden;padding-left: 3%;'></div><div id='`).concat(this.jSPlugin.id,`-headControl-right' class="header-controls-right" style='display:flex;'></div>`),console.log(this.jSPlugin.height);var w=this.jSPlugin.height*.2+"px",g={height:w,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",position:"relative","margin-bottom":"-"+w,"align-items":"center",background:"transparent linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)"};y.style=Gl(g),document.getElementById("".concat(c,"-wrap")).insertBefore(y,document.getElementById(c));var p=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(p)},50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));var te=this.jSPlugin.height*.3;if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(te,"px"),this.bellStatus=="onCall"?document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML=`
              <div id="`.concat(this.jSPlugin.id,`-audioControls"  class="footer-controls" style='display:none;justify-content: space-around;padding: 0 4%;width:100%;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-onCall" class="footer-controls" style='display:flex;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-quickReply" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-remoteUnlock" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              `):document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML=`
              <div id="`.concat(this.jSPlugin.id,`-audioControls"  class="footer-controls" style='display:flex;justify-content: space-around;padding: 0 4%;width:100%;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-onCall" class="footer-controls" style='display:none;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-quickReply" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-remoteUnlock" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              `));else{var ae=document.createElement("div");ae.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),ae.setAttribute("class","ez-iframe-footer-container");var de={"min-height":te+"px","max-height":te+"px",position:"relative","margin-top":"-"+te+"px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","background-image":"linear-gradient(180deg, rgba(0,0,0,0.00) 0%, rgba(0,0,0,0.60) 100%)","font-size":24*C+"px"};ae.style=Gl(de),ae.innerHTML=`
            <div id="`.concat(this.jSPlugin.id,`-audioControls" class="footer-controls" style='display:flex;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls-onCall" class="footer-controls" style='display:none;justify-content: space-around;padding: 0 4%;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls-quickReply" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls-remoteUnlock" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
            `),Oa(ae,document.getElementById(c))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=l[this.bellStatus].backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=l[this.bellStatus].color,l[this.bellStatus].btnList.map(function(we,Ve){we.isrender&&t.renderHeader(we.iconId,we)})),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=d[this.bellStatus].backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=d[this.bellStatus].color,d[this.bellStatus].btnList.map(function(we,Ve){we.isrender&&t.renderFooter(we.iconId,we)})),this.themeData.customConfig.bellPoster==1&&!n){this.jSPlugin.poster="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg";var ie=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(ie),t.jSPlugin.setPoster(t.jSPlugin.poster))},50)}this.activeThemeStatus&&(this.initBellRing(),window.addEventListener("click",this.autoPlayRing)),this.inited=!0,this.getCallDeviceInfo()}},{key:"renderThemeData",value:function(){var t=this,n=this.decoderState.state.isEditing,o=this.themeData,l=o.header,d=o.footer;if(this.isNeedRenderHeader&&l&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=l[this.bellStatus].backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=l[this.bellStatus].color.replace("-diy",""),l[this.bellStatus].btnList.map(function(C,y){C.isrender&&t.setDecoderState(ln({},C.iconId,t.decoderState.state[C.iconId]))})),this.isNeedRenderFooter&&d)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=d[this.bellStatus].backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=d[this.bellStatus].color.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=d[this.bellStatus].color.replace("-diy",""),d[this.bellStatus].btnList.map(function(C,y){if(C.isrender&&t.setDecoderState(ln({},C.iconId,t.decoderState.state[C.iconId])),y==0&&!t.themeInited&&t.activeThemeStatus)var w=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(w),t.themeData.customConfig.bellPoster==1&&!n?t.jSPlugin.pluginStatus.loadingClear():t.jSPlugin.play(),t.themeInited=!0)},50)}),this.jSPlugin.url.indexOf("hd.live")!==-1&&this.setDecoderState({hd:!0}),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",function(){t.stopAutoFocus()})),this.setDecoderState({cloudRec:pn(this.jSPlugin.url).type==="cloud.rec",rec:pn(this.jSPlugin.url).type==="rec",type:pn(this.jSPlugin.url).type});else if(!this.themeInited&&this.activeThemeStatus)var c=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(c),t.themeData&&t.themeData.customConfig&&t.themeData.customConfig.bellPoster==1&&!n?t.jSPlugin.pluginStatus.loadingClear():t.jSPlugin.play(),t.themeInited=!0)},50);var E=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(E),t.jSPlugin.reSize(t.jSPlugin.params.width,t.jSPlugin.params.height))},50)}},{key:"setThemeData",value:function(t,n){this.themeData=t,n=="onCall"&&(this.bellStatus="onCall")}},{key:"startAutoFocus",value:function(){var t=this,n=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout(function(){document.getElementById("".concat(t.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.pointerEvents="none")},n*1e3)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.startAutoFocus()}},{key:"editIcon",value:function(t,n,o){console.log("编辑组件",t,n,o);var l=this.themeData;console.log("themeData",this.themeData);var d=this.themeData[o][this.bellStatus].btnList,c=vr.findIndex(d,function(p){return p.iconId===t}),E=d[c];switch(n){case"delete":d[c].isrender=0;break;case"right":for(var C=-1,y=c+1;y<d.length;y++)if(d[y].part===d[c].part&&d[y].isrender==1){C=y;break}C!==-1&&(d[c]=d[C],d[C]=E);break;case"left":for(var w=-1,g=c-1;g>=0;g--)if(d[g].part===d[c].part&&d[g].isrender==1){w=g;break}w!==-1&&(d[c]=d[w],d[w]=E);break}console.log("new btnList",d),l[o][this.bellStatus].btnList=d,this.jSPlugin.Theme.changeTheme(l)}},{key:"countTime",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var l=document.createElement("div");l.id=this.jSPlugin.id+"time-area",l.className="time-area",l.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(l)}if(this.countTimer&&clearInterval(this.countTimer),t==="add"){var d=n;document.getElementById(o.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval(function(){++d,document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML=c(d)},1e3)}else t==="destroy"&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(o.jSPlugin.id+"time-area")&&(document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(o.jSPlugin.id+"time-area").style.display="none"));function c(E){var C=parseInt(E),y=0,w=0,g="00",p="00",te="00";return C>59&&(y=parseInt(C/60),C=parseInt(C%60),y>59&&(w=parseInt(y/60),y=parseInt(y%60))),g=parseInt(C)>9?parseInt(C):"0"+parseInt(C),p=parseInt(y)>9?parseInt(y):"0"+parseInt(y),te=parseInt(w)>9?parseInt(w):"0"+parseInt(w),w>0?te+":"+p+":"+g:y>0?p+":"+g:"00:"+g}}},{key:"editStart",value:function(t){console.log("----------editStart2");var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));document.getElementById("".concat(this.jSPlugin.id,"-headControl")),n&&n.setAttribute("class","footer-controls themeEditing"),o&&o.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(t){console.log("----------editEnd2");var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-headControl")),l=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));o&&o.setAttribute("class","header-controls"),n&&n.setAttribute("class","footer-controls"),l&&l.setAttribute("class","footer-controls")}},{key:"fetchThemeData",value:function(t){var n=this,o=function(c){c.meta.code==0&&c.data?(n.activeThemeStatus=!0,n.themeData=c.data,c.data.header&&(n.themeData.header=c.data.header,n.themeData.header[n.bellStatus].btnList=n.themeData.header[n.bellStatus].btnList.sort(function(E,C){return E.btnKey.split("-")[3]-C.btnKey.split("-")[3]})),c.data.footer&&(n.themeData.footer=c.data.footer,n.themeData.footer[n.bellStatus].btnList=n.themeData.footer[n.bellStatus].btnList.sort(function(E,C){return E.btnKey.split("-")[3]-C.btnKey.split("-")[3]})),n.jSPlugin.capacity?(n.initThemeData(),n.renderThemeData()):setTimeout(function(){n.initThemeData(),n.renderThemeData()},300)):(n.activeThemeStatus=!1,n.jSPlugin.pluginStatus.loadingClear(),n.setDecoderState({rejection:!0}),c.meta.code=="111021"?(n.jSPlugin.pluginStatus.loadingSetText({text:"无效的模板id",color:"#fff"}),n.activeThemeStatusTxt="无效的模板id"):c.meta.code=="111023"?(n.jSPlugin.pluginStatus.loadingSetText({text:"您的试用特权已到期，需前往轻应用控制台购买后使用。",color:"#fff"}),n.activeThemeStatusTxt="试用特权已到期"):(n.jSPlugin.pluginStatus.loadingSetText({text:"模板未激活，请先在开放平台轻应用控制台购买模板",color:"#fff"}),n.activeThemeStatusTxt="模板未激活"),n.themeData=rf.data,n.initThemeData(),n.renderThemeData())},l=function(){n.renderThemeData()};Ts(this.jSPlugin,t,o,l)}},{key:"getCallDeviceInfo",value:function(){var t=this;this.videoWidth/1024;var n=this,o=function(d){d.code==200&&d.data&&(console.log("---------getCallDeviceInfo"),t.deviceInfoData=d.data,d.data.isEncrypt&&setTimeout(function(){console.log("---------------------视频已加密"),n.jSPlugin.pluginStatus&&n.jSPlugin.pluginStatus.loadingClear(),n.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})},50),document.getElementById("header-".concat(t.bellStatus,"-deviceCategory"))&&(document.getElementById("header-".concat(t.bellStatus,"-deviceCategory")).innerText=""+d.data.deviceName)),d.code==20018&&!t.jSPlugin.isWebConsole&&t.userNoDevice()};Ca(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:pn(this.jSPlugin.url).deviceSerial},"",o)}},{key:"setHeaderText",value:function(t){var n=this.videoWidth/1024||1;document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content"))&&(document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(32*n,'px;display: block">').concat(t,'</span><span style="font-size: ').concat(24*n,"px;padding-top: ").concat(16*n,'px;display: block;">').concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"","</span>"))}}]),Z}(),Wl=function(){function Z(m,t){En(this,Z),this.jSPlugin=m,this.heightPop=t||366,this.initPopupCustom()}return Rn(Z,[{key:"initPopupCustom",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom"))?document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom")).style.display="flex":this.randerPopup()}},{key:"randerPopup",value:function(){var t=this,n=document.documentElement.clientWidth,o=n/375||1,l=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(l),l.innerHTML="@keyframes slideContentUp {0%   {bottom: -".concat(366*o,`px;}
        25%  {bottom: -`).concat(244*o,`px;}
        50%  {bottom: -`).concat(122*o,`px;}
        100% {bottom:0;}} .open-popup{animation:slideContentUp 0.3s 1 linear; -webkit-animation: slideContentUp 0.3s 1 linear;}`);var d=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),c=document.createElement("div");c.style="display:flex;",c.id="".concat(this.jSPlugin.id,"-wrap-popup-custom"),c.innerHTML='<div id="'.concat(this.jSPlugin.id,`-wrap-popup-custom-mask" style="height:100%;width:100%;position:fixed;top:0;left:0;z-index:9998;background-color: rgba(0,0,0,0.75);overflow:hidden;">
        </div>
        <div id="`).concat(this.jSPlugin.id,'-wrap-popup-board" class="open-popup" style="bottom:0;height: ').concat(this.heightPop*o,`px;position:fixed;left: 0; width: 100%;background-color:#ffffff;z-index: 9999;border-radius: 16px 16px 0px 0px;">
            <div style="margin-top: `).concat(20*o,"px;padding: 0 ").concat(15*o,`px;width: 100%;display:flex;flex-direction: row;align-items: center;">
                <div id="`).concat(this.jSPlugin.id,`-popup-board-close">
                    <svg width="`).concat(24*o,'px" height="').concat(24*o,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>icon/close</title>
                        <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g id="common/Close/Dark">
                                <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
                                <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>
                            </g>
                        </g>
                    </svg>
                </div>
                <div id="popup-board-title-content" style="width: `).concat(180*o,"px;font-size: ").concat(18*o,"px;margin-left: ").concat(59*o,`px;font-family: PingFangSC-Medium;color: #2C2C2C;font-weight: 500;text-align: center;"></div>
            </div>
            <div id="`).concat(this.jSPlugin.id,'-popup-board-content" style="width:100%;padding: 0 ').concat(15*o,"px;height: ").concat((this.heightPop-48)*o,`px;box-sizing: border-box;display: flex;align-items: center;justify-content: center;flex-direction: column;"></div>
        </div>
        `),d.appendChild(c),document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom-mask")).onclick=function(){t.closePopupCustom()},document.getElementById("".concat(this.jSPlugin.id,"-popup-board-close")).onclick=function(){t.closePopupCustom()}}},{key:"closePopupCustom",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};t();var n=document.getElementById("".concat(this.jSPlugin.id,"-wrap")),o=document.getElementById("".concat(this.jSPlugin.id,"-wrap-popup-custom"));n&&o&&n.removeChild(o)}},{key:"initPopupContent",value:function(t,n){document.getElementById("popup-board-title-content").innerText=t||"",n&&document.getElementById("".concat(this.jSPlugin.id,"-popup-board-content")).appendChild(n)}}]),Z}(),of=function(){function Z(m,t,n){En(this,Z),this.jSPlugin=m,this.videoWidth=n,this.switchFooter=t,this.toastCustom=new Ka(m,!0),this.sendLoadingStats=!1,this.quickReplyList=["你好，请将快递放在门口","你好，稍等","你好，请将快递放入小区快递柜","你好，请将外卖放在门口"],this.popupCustom=new Wl(m,366),document.getElementById("mobile-quickReply-list")||(this.popupCustom.initPopupContent("快捷回复",this.renderQuickReply()),this.initQuickReply())}return Rn(Z,[{key:"initQuickReply",value:function(){document.getElementById("mobile-quickReply-list-item-0")||this.getQuickReplyList()}},{key:"renderQuickReply",value:function(){document.documentElement.clientWidth;var t=document.createElement("div");return t.style="width:100%;",t.id="mobile-quickReply-list",t.innerHTML=`<div id="mobile-quickReply-content" style="display: block;width:100%;margin-bottom: 36px;"></div>
    <div id="mobile-quickReply-loading" style="display: none;width:100%;"></div>
    <div id="mobile-quickReply-loaderror" style="display: none;width:100%;"></div>`,t}},{key:"matchQuickReplyBtn",value:function(){var t=this,n=this.videoWidth/375||1,o=document.getElementById("mobile-quickReply-content");this.quickReplyList&&this.quickReplyList.length>0&&this.quickReplyList.forEach(function(l,d){var c=document.createElement("div");c.id="mobile-quickReply-list-item-".concat(d),c.style="margin: ".concat(14*n,`px 0;
            padding: `).concat(12*n,"px ").concat(15*n,"px;min-height: ").concat(50*n,`px;width:100%;
            background: #ffffff;border-radius: `).concat(25*n,`px;display: flex;align-items: center;
            box-sizing: border-box;font-size:`).concat(16*n,"px;color: #2c2c2c;"),c.innerHTML=`
            <svg id="mobile-quickReply-icon-`.concat(d,'" width="').concat(24*n,'px" height="').concat(24*n,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <title>icon/快捷回复播放</title>
                    <g id="icon/快捷回复播放" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
                        <path d="M18.9877488,4.36609064 C21.024173,6.11256041 22.2495,8.93566941 22.2495,12.0024 C22.2495,15.066006 21.0272636,17.8857191 18.9943957,19.6331539 C18.6802816,19.9031635 18.2067557,19.8674098 17.9367461,19.5532957 C17.6667365,19.2391816 17.7024902,18.7656557 18.0166043,18.4956461 C19.708691,17.0411437 20.7495,14.6399857 20.7495,12.0024 C20.7495,9.36223947 19.7060688,6.95821183 18.0112512,5.50470936 C17.6968304,5.23505702 17.6605383,4.76157212 17.9301906,4.44715124 C18.199843,4.13273036 18.6733279,4.09643829 18.9877488,4.36609064 Z M12.2442357,5.87579772 L12.2496,6.0179 L12.2496,17.9819 C12.2496,19.4241617 10.6173522,20.2281184 9.48072691,19.4058312 L9.36879527,19.318145 L5.5996,16.1243865 L3.4996,16.1249 C2.581479,16.1249 1.8284129,15.4182283 1.75540159,14.518493 L1.7496,14.3749 L1.7496,9.6249 C1.7496,8.70699712 2.45696726,7.95373471 3.35611134,7.88070323 L3.4996,7.8749 L5.5996,7.8743865 L9.36863059,4.68279453 C10.4692948,3.74976994 12.1377395,4.4768074 12.2442357,5.87579772 Z M10.3952894,5.79039368 L10.338321,5.82721597 L6.35932099,9.19721597 C6.33078024,9.2209397 6.30781291,9.23786997 6.28390041,9.25347262 L6.35932099,9.19721597 C6.32908972,9.22282023 6.29742069,9.24561685 6.26463127,9.26563212 C6.24087088,9.28012218 6.21634729,9.29327785 6.19105714,9.30506452 C6.18413632,9.30829747 6.1773583,9.31133066 6.1705483,9.31425704 C6.10964585,9.34044144 6.04445985,9.35881628 5.97637056,9.36805338 C5.95756973,9.37054904 5.94148484,9.37214804 5.92538001,9.37322799 L5.8746,9.3749 L3.4996,9.3749 C3.38149734,9.3749 3.28218291,9.45734262 3.25621762,9.56766695 L3.2496,9.6249 L3.2496,14.3749 C3.2496,14.4934644 3.33170357,14.592449 3.44222164,14.6183106 L3.4996,14.6249 L5.8746,14.6249 L5.92192315,14.6263483 C5.93923255,14.627429 5.95652113,14.629109 5.97375563,14.6313909 L5.8746,14.6249 C5.9789469,14.6249 6.0783167,14.6462095 6.168595,14.6847142 C6.18010037,14.6895946 6.19235048,14.695194 6.2044823,14.7011451 C6.22547728,14.7114805 6.24528995,14.7223727 6.26453263,14.7341072 C6.266314,14.735195 6.26795143,14.7362034 6.26958602,14.7372187 L6.28086895,14.7443598 C6.30587317,14.7605037 6.32985559,14.7780945 6.3526978,14.7970136 L6.35940473,14.802655 L10.3380567,18.1733603 C10.4825575,18.2956302 10.695338,18.2179271 10.7408386,18.0492187 L10.7496,17.9819 L10.7496,6.0179 C10.7496,5.82820058 10.5532313,5.71607381 10.3952894,5.79039368 Z M15.9361636,7.38657032 C17.3580982,8.28109203 18.2498,10.0509458 18.2498,12.0044 C18.2498,13.9607796 17.3563865,15.7307985 15.9326223,16.6154437 C15.5807928,16.8340503 15.1183629,16.7260519 14.8997563,16.3742223 C14.6811497,16.0223928 14.7891481,15.5599629 15.1409777,15.3413563 C16.1036696,14.7431949 16.7498,13.4630899 16.7498,12.0044 C16.7498,10.5466827 16.103548,9.26399865 15.1374364,8.65622968 C14.7868297,8.43566726 14.6814079,7.97264316 14.9019703,7.62203641 C15.1225327,7.27142966 15.5855568,7.1660079 15.9361636,7.38657032 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>
                    </g>
                </svg>
            <span id="mobile-quickReply-name-`).concat(d,'" style="padding-left: 5px;">').concat(l.voiceName,"</span>"),c.onclick=function(){console.log("item:"+l),t.sendLoadingStats||(t.setBtnCheckStatus(d),t.sendQuickReply(l))},o.appendChild(c)})}},{key:"setBtnCheckStatus",value:function(t){var n=this,o="";this.quickReplyList.forEach(function(l,d){o=document.getElementById("mobile-quickReply-list-item-".concat(d)),d==t?(o.style.background="#F4F6FC",o.style.color="#648FFC",n.setBtnCheckLoding(0,d)):(o.style.background="#ffffff",o.style.color="#2c2c2c")})}},{key:"setBtnCheckLoding",value:function(t,n){console.log(n);var o=this.videoWidth/375||1;if(n>-1){var l=document.getElementById("mobile-quickReply-list-item-".concat(n)),d=document.getElementById("mobile-quickReply-name-".concat(n)),c=document.getElementById("mobile-quickReply-icon-".concat(n));if(t==1){var E=document.getElementById("mobile-quickReply-icon-loading-".concat(n));if(E&&d){var C=document.createElement("span");C.id="mobile-quickReply-icon-".concat(n),C.style="height:".concat(24*o,"px;"),C.innerHTML=`
                <svg width="`.concat(24*o,'px" height="').concat(24*o,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <title>icon/快捷回复播放</title>
                    <g id="icon/快捷回复播放" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
                        <path d="M18.9877488,4.36609064 C21.024173,6.11256041 22.2495,8.93566941 22.2495,12.0024 C22.2495,15.066006 21.0272636,17.8857191 18.9943957,19.6331539 C18.6802816,19.9031635 18.2067557,19.8674098 17.9367461,19.5532957 C17.6667365,19.2391816 17.7024902,18.7656557 18.0166043,18.4956461 C19.708691,17.0411437 20.7495,14.6399857 20.7495,12.0024 C20.7495,9.36223947 19.7060688,6.95821183 18.0112512,5.50470936 C17.6968304,5.23505702 17.6605383,4.76157212 17.9301906,4.44715124 C18.199843,4.13273036 18.6733279,4.09643829 18.9877488,4.36609064 Z M12.2442357,5.87579772 L12.2496,6.0179 L12.2496,17.9819 C12.2496,19.4241617 10.6173522,20.2281184 9.48072691,19.4058312 L9.36879527,19.318145 L5.5996,16.1243865 L3.4996,16.1249 C2.581479,16.1249 1.8284129,15.4182283 1.75540159,14.518493 L1.7496,14.3749 L1.7496,9.6249 C1.7496,8.70699712 2.45696726,7.95373471 3.35611134,7.88070323 L3.4996,7.8749 L5.5996,7.8743865 L9.36863059,4.68279453 C10.4692948,3.74976994 12.1377395,4.4768074 12.2442357,5.87579772 Z M10.3952894,5.79039368 L10.338321,5.82721597 L6.35932099,9.19721597 C6.33078024,9.2209397 6.30781291,9.23786997 6.28390041,9.25347262 L6.35932099,9.19721597 C6.32908972,9.22282023 6.29742069,9.24561685 6.26463127,9.26563212 C6.24087088,9.28012218 6.21634729,9.29327785 6.19105714,9.30506452 C6.18413632,9.30829747 6.1773583,9.31133066 6.1705483,9.31425704 C6.10964585,9.34044144 6.04445985,9.35881628 5.97637056,9.36805338 C5.95756973,9.37054904 5.94148484,9.37214804 5.92538001,9.37322799 L5.8746,9.3749 L3.4996,9.3749 C3.38149734,9.3749 3.28218291,9.45734262 3.25621762,9.56766695 L3.2496,9.6249 L3.2496,14.3749 C3.2496,14.4934644 3.33170357,14.592449 3.44222164,14.6183106 L3.4996,14.6249 L5.8746,14.6249 L5.92192315,14.6263483 C5.93923255,14.627429 5.95652113,14.629109 5.97375563,14.6313909 L5.8746,14.6249 C5.9789469,14.6249 6.0783167,14.6462095 6.168595,14.6847142 C6.18010037,14.6895946 6.19235048,14.695194 6.2044823,14.7011451 C6.22547728,14.7114805 6.24528995,14.7223727 6.26453263,14.7341072 C6.266314,14.735195 6.26795143,14.7362034 6.26958602,14.7372187 L6.28086895,14.7443598 C6.30587317,14.7605037 6.32985559,14.7780945 6.3526978,14.7970136 L6.35940473,14.802655 L10.3380567,18.1733603 C10.4825575,18.2956302 10.695338,18.2179271 10.7408386,18.0492187 L10.7496,17.9819 L10.7496,6.0179 C10.7496,5.82820058 10.5532313,5.71607381 10.3952894,5.79039368 Z M15.9361636,7.38657032 C17.3580982,8.28109203 18.2498,10.0509458 18.2498,12.0044 C18.2498,13.9607796 17.3563865,15.7307985 15.9326223,16.6154437 C15.5807928,16.8340503 15.1183629,16.7260519 14.8997563,16.3742223 C14.6811497,16.0223928 14.7891481,15.5599629 15.1409777,15.3413563 C16.1036696,14.7431949 16.7498,13.4630899 16.7498,12.0044 C16.7498,10.5466827 16.103548,9.26399865 15.1374364,8.65622968 C14.7868297,8.43566726 14.6814079,7.97264316 14.9019703,7.62203641 C15.1225327,7.27142966 15.5855568,7.1660079 15.9361636,7.38657032 Z" id="形状结合" fill="#2C2C2C" fill-rule="nonzero"></path>
                    </g>
                </svg>
                `),l.insertBefore(C,d)}}else if(c&&d){l.removeChild(c);var y=document.createElement("span");y.id="mobile-quickReply-icon-loading-".concat(n),y.style="height:".concat(20*o,"px;width: ").concat(24*o,"px;"),y.innerHTML='<svg width="'.concat(20*o,'" height="').concat(20*o,'" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#666666" p-id="2400"></path></svg>'),l.insertBefore(y,d)}}}},{key:"getQuickReplyList",value:function(){var t=this;console.log("getQuickReplyList"),this.madeLoadingDom(0);var n=function(d){if(d&&d.code==200){var c=d.data||[],E=[];d.data.forEach(function(C,y){E=C.voiceName.split("_"),c[y].voiceName=E[1]}),t.quickReplyList=c,setTimeout(function(){t.madeLoadingDom(2)},500)}else t.madeLoadingDom(1)},o=function(d){console.log(d),t.madeLoadingDom(1)};Hl(this.jSPlugin,n,o)}},{key:"madeLoadingDom",value:function(t){var n=this,o=this.videoWidth/375||1;if(t==0){if(document.getElementById("mobile-quickReply-content").style.display="none",document.getElementById("mobile-quickReply-loaderror").style.display="none",document.getElementById("mobile-quickReply-loading").style.display="block",!document.getElementById("mobile-quickReply-loading-box")){var l=document.createElement("div");l.id="mobile-quickReply-loading-box",l.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: row;",l.innerHTML='<div class="" style="heigth:'.concat(20*o,`px">
                <svg width="`).concat(20*o,'" height="').concat(20*o,`" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#666666" p-id="2400"></path></svg>   
            </div>
            <div style="font-size: `).concat(16*o,"px;margin-left:",10,'px;color:#666666;">正在加载，请稍候</div>'),document.getElementById("mobile-quickReply-loading").appendChild(l)}}else if(t==1){if(document.getElementById("mobile-quickReply-content").style.display="none",document.getElementById("mobile-quickReply-loading").style.display="none",document.getElementById("mobile-quickReply-loaderror").style.display="block",!document.getElementById("mobile-quickReply-loaderror-box")){var d=document.createElement("div");d.id="mobile-quickReply-loaderror-box",d.style="width: 100%;display: flex;align-items: center;justify-content: center;flex-direction: column;",d.innerHTML=`<div style="">
                <img style="width:`.concat(186*o,"px;height:").concat(120*o,`px;" src="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPZ34KAAStrAAA0pZ5cGTw167.png" />
            </div>
            <div style="font-size: `).concat(16*o,`px;color: #666666;">
                <span>加载失败 </span>
                <span id="mobile-quickReply-loaderror-reload" 
                style="color: #648FFC;-webkit-tap-highlight-color: transparent;">点击重试</span>
            </div>`),document.getElementById("mobile-quickReply-loaderror").appendChild(d),document.getElementById("mobile-quickReply-loaderror-reload").onclick=function(){n.getQuickReplyList()}}}else document.getElementById("mobile-quickReply-loading").style.display="none",document.getElementById("mobile-quickReply-loaderror").style.display="none",document.getElementById("mobile-quickReply-content").style.display="block",this.matchQuickReplyBtn()}},{key:"sendQuickReply",value:function(t){var n=this;this.sendLoadingStats=!0;var o=function(c){n.sendLoadingStats=!1,c&&c.code==200?n.toastCustom.initToastContent("快捷回复成功"):n.toastCustom.initToastContent("快捷回复失败，请重试"),n.popupCustom.closePopupCustom()},l=function(c){console.log(c),n.sendLoadingStats=!1,n.toastCustom.initToastContent("快捷回复失败，请重试"),n.popupCustom.closePopupCustom()};Vl(this.jSPlugin,t.fileUrl,o,l)}},{key:"closeQuickReplyEle",value:function(){this.popupCustom.closePopupCustom()}}]),Z}(),sf=function(){function Z(m,t,n){En(this,Z),this.jSPlugin=m,this.videoWidth=n,this.switchFooter=t,this.toastCustom=new Ka(m,!0),this.lockStatus=!1,this.popupCustom=new Wl(m,265),this.popupCustom.initPopupContent("远程开锁",this.renderRemoteUnlock()),this.renderRemoteUnlockSlide()}return Rn(Z,[{key:"initRemoteUnlock",value:function(){document.getElementById("mobile-remoteUnlock-content")?this.madeSlideEvent():this.renderRemoteUnlock()}},{key:"renderRemoteUnlock",value:function(){var t=this.videoWidth/1024||1,n=document.createElement("div");return n.style="width:100%;",n.id="mobile-remoteUnlock-box",n.innerHTML=`<div style="width:100%;display:flex;flex-direction:row;align-items: center;">
        <div id="mobile-remoteUnlock-content" style="display: block;width:calc(100% - `.concat(160*t,"px);margin: 0 ").concat(24*t,`px;"></div>
    </div>`),n}},{key:"renderRemoteUnlockSlide",value:function(){var t=this.videoWidth/375||1,n=document.getElementById("mobile-remoteUnlock-content"),o=document.createElement("div");o.id="mobile-remoteUnlock-content-slide",o.style="width: 100%;display: flex;justify-content: center;padding: 0 ".concat(15*t,"px"),o.innerHTML='<div id="mobile-remoteUnlock-slide-box" style="width: 100%;line-height: '.concat(60*t,"px;height: ").concat(60*t,"px;border: 1px solid rgba(100,143,252,1);border-radius: ").concat(30*t,`px;position: relative;text-align: center;">
        <div id="mobile-remoteUnlock-slide-bgColor" style="border-radius: `).concat(30*t,"px;width: ").concat(44*t,"px;height: ").concat(60*t,`px;position: absolute;left: 0;top: 0;"></div>
        <div id="mobile-remoteUnlock-slide-tips" style="height: `).concat(60*t,"px;line-height: ").concat(60*t,"px;font-size: ").concat(14*t,"px;border-radius: ").concat(30*t,`px;position: absolute;text-align: center;user-select: none;color: #666666;width: 100%;">右滑开锁</div>
        <div id="mobile-remoteUnlock-slide-ball" style="top: `).concat(8*t,"px;left: ").concat(8*t,"px;width: ").concat(44*t,"px;height: ").concat(44*t,`px;background: #598FFF;position: absolute;text-align: center;border-radius:50%;display:flex;align-items: center;justify-content: center;">
            <svg id="slide-ball-start" style="display: inline;" width="`).concat(24*t,'px" height="').concat(24*t,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title>icon/箭头向右</title>
                <g id="icon/箭头向右" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect id="矩形" fill="#000000" fill-rule="nonzero" opacity="0" x="0" y="0" width="24" height="24"></rect>
                    <path d="M14.2841136,6.3689007 L19.9432338,12.0287579 L14.2863796,17.6856122 L12.8580239,16.2572565 L16.114,12.9999007 L4.00000001,13 L4.00000001,11 L16.058,10.9999007 L12.8557579,7.79725638 L14.2841136,6.3689007 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                </g>
            </svg>
            <svg id="slide-ball-end" style="display: none;" width="`).concat(20*t,'" height="').concat(20*t,`" t="1567069979438" class="loading" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2399"><path d="M538.5344 266.4448a133.12 133.12 0 1 1 133.12-133.12 133.4272 133.4272 0 0 1-133.12 133.12zM255.0144 372.1984a121.6768 121.6768 0 1 1 121.6768-121.6768 121.856 121.856 0 0 1-121.6768 121.6768zM134.72 647.424a107.3664 107.3664 0 1 1 107.3664-107.264A107.52 107.52 0 0 1 134.72 647.424z m120.32 272.4608a90.9824 90.9824 0 1 1 90.9824-90.9824A91.1616 91.1616 0 0 1 255.04 919.8848zM538.5344 1024a79.36 79.36 0 1 1 79.36-79.36 79.36 79.36 0 0 1-79.36 79.36z m287.6928-134.144a64.1792 64.1792 0 1 1 64.1792-64.1792 64.3584 64.3584 0 0 1-64.1792 64.1792z m117.76-296.704a52.6336 52.6336 0 1 1 52.6592-52.6336 52.608 52.608 0 0 1-52.6336 52.6336z m-158.72-338.7136a40.96 40.96 0 1 1 12.0064 28.8512 40.5248 40.5248 0 0 1-12.0064-28.8512z" fill="#648ffc" p-id="2400"></path></svg>
        </div>
    </div>`),n.appendChild(o),this.madeSlideEvent()}},{key:"madeSlideEvent",value:function(){var t=this.videoWidth/375||1,n=document.getElementById("mobile-remoteUnlock-slide-box"),o=document.getElementById("mobile-remoteUnlock-slide-bgColor"),l=document.getElementById("mobile-remoteUnlock-slide-tips"),d=document.getElementById("mobile-remoteUnlock-slide-ball"),c=this;function E(){c.lockStatus=!0,document.getElementById("slide-ball-start").style.display="none",document.getElementById("slide-ball-end").style.display="inline",o.style.width=n.clientWidth+"px",o.style.backgroundColor="#598FFF",n.style.border="0",d.style.backgroundColor="#ffffff",l.textContent="正在开锁",l.style.color="#ffffff",d.ontouchstart=null,c.sendRemoteUnlockApi()}d.ontouchstart=function(y){console.log("ontouchstart");var y=y||window.event,w=y.touches[0].pageX;d.style.transition="",o.style.transition="",document.ontouchmove=function(p){var p=p||window.event,te=p.touches[0].pageX-n.offsetLeft-w,ae=n.clientWidth-d.clientWidth-8*t;te<=0&&(te=0),te>=ae&&(te=ae),d.style.left=te+"px",te==ae&&!c.lockStatus&&E()},document.ontouchend=function(){c.lockStatus||(o.style.width="0px",d.style.left=8*t+"px",d.style.transition="left 0.6s linear",o.style.transition="width 0.6s linear"),document.ontouchend=null,document.ontouchmove=null}}}},{key:"resetRemoteUnlockSlide",value:function(){var t=this.videoWidth/1024||1;this.lockStatus=!1;var n=document.getElementById("mobile-remoteUnlock-slide-box"),o=document.getElementById("mobile-remoteUnlock-slide-bgColor"),l=document.getElementById("mobile-remoteUnlock-slide-tips"),d=document.getElementById("mobile-remoteUnlock-slide-ball");o.style.width="0px",d.style.left=8*t+"px",l.textContent="右滑开锁",l.style.color="#666666",document.getElementById("slide-ball-start").style.display="inline",document.getElementById("slide-ball-end").style.display="none",o.style.backgroundColor="#FFFFFF",n.style.border="1px solid rgba(255,255,255,1)",d.style.backgroundColor="#598FFF"}},{key:"sendRemoteUnlockApi",value:function(){var t=this;console.log("下发远程开锁");var n=function(d){d&&d.code==200?t.toastCustom.initToastContent("开锁成功"):t.toastCustom.initToastContent("开锁失败，请重试"),t.popupCustom.closePopupCustom()},o=function(d){console.log(d),t.toastCustom.initToastContent("开锁失败，请重试"),t.popupCustom.closePopupCustom()};Ul(this.jSPlugin,n,o)}},{key:"closeRemoteUnlock",value:function(){this.popupCustom.closePopupCustom()}}]),Z}(),lf={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0},header:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000 linear-gradient(180deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.00) 100%)",activeColor:"#1890FF",autoFocus:0,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"ringStatus",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-0",iconId:"callStatus",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-header-1",iconId:"deviceCategory",part:"left",defaultActive:0,isrender:1,color:"#2c2c2c",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793"}]}},footer:{onBell:{color:"#2c2c2c",backgroundColor:"#00000000",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"quickReply",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"rejection",part:"left",defaultActive:0,isrender:1,color:"#2C2C2C",themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"answer",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-3",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]},onCall:{color:"#2c2c2c",backgroundColor:"#00000080",activeColor:"#1890FF",autoFocus:5,btnList:[{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-0",iconId:"mute",part:"left",defaultActive:1,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-1",iconId:"hangUp",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"},{btnKey:"c1cbc1d4e86d49a0981f54beea95280a-4412dc7a9f7b471a9a3e9a8fb625c793-footer-2",iconId:"remoteUnlock",part:"left",defaultActive:0,isrender:1,themeId:"4412dc7a9f7b471a9a3e9a8fb625c793",backgroundColor:"#cccccc"}]}}},df={data:lf},Zl=function(m){var t="";return Object.keys(m).map(function(n,o){t+="".concat(n,":").concat(m[n]).concat(o<Object.keys(m).length-1?";":"")}),t},cf=function(){function Z(m,t,n,o){var l=this;En(this,Z),ln(this,"switchCallStatus",function(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,E=l.themeData,C=E.header,y=E.footer,w=null;if(d=="onCall"){console.log("接听"),l.bellStatus="onCall",l.switchFooter("onCall"),y[l.bellStatus].btnList.map(function(p,te){p.isrender&&l.renderFooter(p.iconId,p),p.iconId=="mute"&&(w=p)}),C[l.bellStatus].btnList.map(function(p,te){p.isrender&&l.renderHeader(p.iconId,p)});var g=document.getElementById("".concat(l.jSPlugin.id,"-header-onBell"));g&&g.parentElement.removeChild(g),l.themeData.customConfig.bellPoster==1&&document.getElementById("bellring-icon")&&document.getElementById("".concat(l.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),l.themeData.customConfig.defaultMicro==0&&w?l.muteCommon(w):l.setDecoderState({mute:!1},w.backgroundColor),l.removeBellRing(),l.miniRecCloseClick()}else console.log("响铃"),l.bellStatus="onBell",l.jSPlugin.Theme.changeTheme(l.themeData,c)}),ln(this,"muteCommon",function(d){var c=l.decoderState.state,E=c.talk,C=c.sound;E?(console.log("结束对讲"),l.setDecoderState({talk:!1,mute:!0},d.backgroundColor),l.jSPlugin.Talk.stopTalk(),C||l.jSPlugin.openSound(),l.setDecoderState({sound:!0})):(l.setDecoderState({talk:!1,mute:!0},d.backgroundColor),C||l.jSPlugin.openSound(),l.setDecoderState({sound:!0}))}),ln(this,"autoPlayRing",function(){console.log("autoPlayRing");var d=document.getElementById("bellring-audio");d&&(d.muted=!1,d.src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3",d.paused&&d.play());var c=l.checkIsAppleDevice()||!1;c?window.removeEventListener("touchstart",l.autoPlayRing):window.removeEventListener("click",l.autoPlayRing)}),this.jSPlugin=m,this.videoWidth=m.width,this.videoHeight=m.height,this.themeData=t,this.setDecoderState=n,this.decoderState=o,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.autoFocus=0,this.autoFocusTimer=null,this.bellStatus="onBell",this.recordTimer=null,this.nextRate=1,this.themeInited=!1,this.inited=!1,this.miniRecStatus="rec",this.activeThemeStatus=!0,this.activeThemeStatusTxt="模板未激活",this.miniRecNum=0,this.toastCustom=new Ka(m,!0)}return Rn(Z,[{key:"initBellRing",value:function(){var t=this,n=this.decoderState.state,o=n.play,l=n.isEditing,d=this.videoWidth,c=d/375;this.maxBellTime=this.themeData.customConfig.maxBellTime*1e3;var E=document.getElementById("bellring"),C=document.getElementById("bellring-audio");if(!E&&!C){if(this.jSPlugin.isNeedBellRing){var y=document.createElement("div");y.id="bellring",y.innerHTML=`<div>
          <audio id="bellring-audio" loop autoplay>
            <source src="https://resource.eziot.com/group2/M00/00/8F/CtwQFmPbWnOAGuT5AAHZihhCJEM230.mp3" type="audio/mpeg">
          </audio>
          </div>`,document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(y)}if(this.themeData.customConfig.bellPoster==1&&!l){var w=d*1.8,g=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(g=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+w*.1+6);var p=g+(this.videoHeight-130*c)/2,te=document.createElement("div");te.id="bellring-icon",te.style=`position: absolute;pointer-events: none;background: none;width: 100%;
          position: absolute;top: `.concat(p,"px;display: flex;align-items: center;justify-content: center;"),te.innerHTML='<div style="width: '.concat(130*c,"px;height: ").concat(130*c,`px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.2);border-radius: 50%;">
            <div style="width: `).concat(80*c,"px;height: ").concat(80*c,`px;display: flex;align-items: center;justify-content: center;border: 1px solid rgba(255,255,255,0.3);border-radius: 50%;">
              <svg width="`).concat(40*c,'px" height="').concat(40*c,`px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <title>icon/响铃</title>
                  <g id="icon/响铃" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                      <polygon id="Path" points="0 0 40.0000002 0 40.0000002 40.0000002 0 40.0000002"></polygon>
                      <path d="M20.0000001,4.25000002 C22.0363461,4.25000002 23.698175,5.84879552 23.8000507,7.8591997 L23.8050001,8.05500003 L23.805316,8.99953253 C27.1874196,9.97041766 29.6921839,13.0354462 29.80936,16.723731 L29.80936,16.723731 L29.8133335,16.9800001 L29.8133335,21.6416668 C29.8133335,22.3259481 30.0858837,22.9835569 30.5703302,23.4680033 L30.5703302,23.4680033 L31.6386635,24.5363367 C32.338953,25.2366262 32.760721,26.1675592 32.8273086,27.1785295 L32.8273086,27.1785295 L32.8350001,27.4233334 C32.8350001,29.577547 31.0892137,31.3233335 28.9350001,31.3233335 L28.9350001,31.3233335 L24.5666667,31.323 L24.5650266,31.3951531 C24.4527075,33.8194458 22.4520933,35.7500001 20.0000001,35.7500001 C17.5482065,35.7500001 15.5473098,33.8197367 15.4349743,31.3967059 L15.4326667,31.323 L11.0666667,31.3233335 C9.06159524,31.3233335 7.39851917,29.8069287 7.18810198,27.8229374 L7.17194359,27.6230185 L7.1666667,27.4233334 C7.1666667,26.3411154 7.59733134,25.3020086 8.36300328,24.5363367 L8.36300328,24.5363367 L9.43133662,23.4680033 C9.91578309,22.9835569 10.1883334,22.3259481 10.1883334,21.6416668 L10.1883334,21.6416668 L10.1883334,16.9800001 C10.1883334,13.1909619 12.7263704,9.99530436 16.1948593,8.99965364 L16.1950001,8.05500003 C16.1950001,5.95360729 17.8979654,4.25000002 20.0000001,4.25000002 Z M23.0656667,31.323 L16.9336667,31.323 L16.9352114,31.3619281 C17.0285826,32.9723844 18.3649772,34.2500001 20.0000001,34.2500001 C21.6352227,34.2500001 22.9714318,32.9721919 23.0647896,31.3604131 L23.0656667,31.323 Z M21.5116668,10.1783334 L18.4900001,10.1783334 C14.7336124,10.1783334 11.6883334,13.2231481 11.6883334,16.9800001 L11.6883334,16.9800001 L11.6883334,21.6416668 C11.6883334,22.7238848 11.2576687,23.7629916 10.4919968,24.5286635 L10.4919968,24.5286635 L9.42366346,25.5969969 C8.93921698,26.0814433 8.6666667,26.7390521 8.66637526,27.402427 L8.66637526,27.402427 L8.67048222,27.560237 C8.74130967,28.8268108 9.79171396,29.8233335 11.0666667,29.8233335 L11.0666667,29.8233335 L23.7906939,29.8222289 C23.8004164,29.8218553 23.8101862,29.8216668 23.8200001,29.8216668 L23.8486667,29.823 L28.9350001,29.8233335 C30.2055455,29.8233335 31.2450456,28.8367727 31.329826,27.609522 L31.3354106,27.4481422 L31.3293607,27.2529336 C31.2880301,26.6292837 31.0210852,26.0400787 30.5780034,25.5969969 L30.5780034,25.5969969 L29.50967,24.5286635 C28.7439981,23.7629916 28.3133335,22.7238848 28.3133335,21.6416668 L28.3133335,21.6416668 L28.3134279,16.9919039 L28.3098332,16.759466 C28.1934023,13.0970787 25.1864454,10.1783334 21.5116668,10.1783334 L21.5116668,10.1783334 Z M20.0000001,5.75000002 C18.7795808,5.75000002 17.7813801,6.69770708 17.7003155,7.89717688 L17.6950001,8.05500003 L17.6952875,8.7158769 C17.9568453,8.69103758 18.2219393,8.67833337 18.4900001,8.67833337 L18.4900001,8.67833337 L21.5116668,8.67833337 C21.7792577,8.67833337 22.0439466,8.69101238 22.3051575,8.71580951 L22.3050001,8.05500003 C22.3050001,6.7819079 21.273481,5.75000002 20.0000001,5.75000002 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                  </g>
              </svg>
            </div>
          </div>`),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(te),o&&this.bellStatus=="onBell"&&this.jSPlugin.pause()}else document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"));setTimeout(function(){var ae=t.decoderState.state,de=ae.isEditing,ie=ae.rejection;t.bellStatus=="onBell"&&!ie&&(t.removeBellRing(),de||t.answerOvertime())},this.maxBellTime)}}},{key:"removeBellRing",value:function(){document.getElementById("bellring")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring")),document.getElementById("bellring-icon")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon"))}},{key:"getMiniCallTimeUrl",value:function(){if(console.log("--------------getMiniCallTimeUrl"),this.jSPlugin.url.indexOf("hd.live")!==-1?this.recUrl=this.jSPlugin.url.replace("hd.live","rec"):this.recUrl=this.jSPlugin.url.replace("live","rec"),this.jSPlugin.callTime){var t=parseInt(this.jSPlugin.callTime),n=t+5*1e3,o=t-10*1e3,l=new Date(o).Format("yyyyMMddhhmmss"),d=new Date(n).Format("yyyyMMddhhmmss");this.recUrl="".concat(this.recUrl,"?begin=").concat(l,"&end=").concat(d),console.log("recurl="+this.recUrl)}}},{key:"initMiniRec",value:function(){var t=this,n=this,o=this.videoWidth,l=o/375,d=o*1.8,c=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(c=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+d*.1+6);var E=c+this.videoHeight+10*l;if(console.log(c),document.getElementById("miniRecbox"))document.getElementById("miniRecbox")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox")),document.getElementById("miniClose")&&document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose")),this.initMiniRec();else{var C=document.createElement("div");C.id="miniRecbox",C.style="-webkit-border-radius: 8px;border-radius: 8px;overflow: hidden;position: absolute;top: ".concat(E,"px;right: ").concat(9*l,"px;"),C.innerHTML='<div id="miniRec"></div>',document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(C),this.getMiniCallTimeUrl();var y={domain:"https://open.ys7.com"};this.miniRecPlayer=new id({id:"miniRec",width:160*l,height:90*l,template:"miniRec",url:this.recUrl,accessToken:this.jSPlugin.accessToken,handleError:function(p){console.log("小窗口handleError------------",p),p&&p.retcode==6701?(t.miniRecNum=t.miniRecNum+1,console.log("小窗口miniRecNum-----------------",t.miniRecNum),t.miniRecNum<5?n.miniRecPlayer.changePlayUrl({type:"miniRec"}):(console.log("小窗口------------------已播放5次，关闭小窗口"),n.miniRecCloseClick())):(console.log("小窗口------------------播放失败，关闭小窗口"),n.miniRecCloseClick())},env:this.jSPlugin.env||y});var w=document.createElement("div");w.id="miniClose",w.style="position: absolute;top: ".concat(E+8,"px;right: ").concat(16*l,"px;"),w.innerHTML='<div id="miniClose-btn" style="width: '.concat(24*l,"px;height: ").concat(24*l,`px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: rgba(0,0,0,0.1);">
          <svg width="`).concat(24*l,'px" height="').concat(24*l,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>close</title>
              <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="common/Close/Dark">
                      <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
                      <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#fff" fill-rule="nonzero"></path>
                  </g>
              </g>
          </svg>
        </div>`),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(w),document.getElementById("miniClose-btn").onclick=function(){n.miniRecCloseClick()}}}},{key:"initMiniImageRec",value:function(){console.log("initMiniImageRec");var t=this.videoWidth,n=t/375,o=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(o=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+26);var l=o+this.videoHeight+10*n;if(document.getElementById("miniRecbox"))document.getElementById("miniRecbox").style.top=l+"px",document.getElementById("miniClose").style.top=l+8+"px";else{var d=document.createElement("div");d.id="miniRecbox",d.style=`-webkit-border-radius: 8px;border-radius: 8px;overflow: hidden;position: absolute;
        top: `.concat(l,`px;
        right: `).concat(9*n,`px;
        user-select: none;
        `),d.innerHTML='<div id="miniRec" style="width: '.concat(160*n,"px;height: ").concat(90*n,`px;display: flex;align-items: center;justify-content: center;">
          <embed id="miniRec-embed" style="z-index: 3;position: absolute;width: `).concat(160*n,"px;height: ").concat(90*n,`px;" type="image/svg+xml" src="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg" />
          <div style="color: #FFFFFF;font-size: 12px;z-index: 4;">示意小窗位置</div>
        </div>`),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(d);var c=document.createElement("div");c.id="miniClose",c.style="z-index: 4;position: absolute;top: ".concat(l+8,"px;right: ").concat(16*n,"px;"),c.innerHTML='<div id="miniClose-btn" style="width: '.concat(24*n,"px;height: ").concat(24*n,`px;display: flex;align-items: center;justify-content: center;border-radius: 50%;">
          <svg width="`).concat(24*n,'px" height="').concat(24*n,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>close</title>
              <g id="icon/close" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="common/Close/Dark">
                      <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
                      <path d="M18.1871843,5.81281566 C18.4556698,6.08130112 18.4780436,6.50270075 18.2543057,6.7966719 L18.1871843,6.87347584 L13.0611458,12.0001458 L18.1871843,17.1265242 C18.4800776,17.4194174 18.4800776,17.8942911 18.1871843,18.1871843 C17.9186989,18.4556698 17.4972993,18.4780436 17.2033281,18.2543057 L17.1265242,18.1871843 L12.0001458,13.0611458 L6.87347584,18.1871843 C6.58058262,18.4800776 6.10570888,18.4800776 5.81281566,18.1871843 C5.54433021,17.9186989 5.52195643,17.4972993 5.7456943,17.2033281 L5.81281566,17.1265242 L10.9391458,12.0001458 L5.81281566,6.87347584 C5.51992245,6.58058262 5.51992245,6.10570888 5.81281566,5.81281566 C6.08130112,5.54433021 6.50270075,5.52195643 6.7966719,5.7456943 L6.87347584,5.81281566 L12.0001458,10.9391458 L17.1265242,5.81281566 C17.4194174,5.51992245 17.8942911,5.51992245 18.1871843,5.81281566 Z" id="形状结合" fill="#fff" fill-rule="nonzero"></path>
                  </g>
              </g>
          </svg>
        </div>`),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(c),document.getElementById("miniClose-btn").onclick=function(){}}}},{key:"miniRecCloseClick",value:function(){document.getElementById("miniRecbox")&&(console.log("---------------------miniRecCloseClick"),this.miniRecStatus=="rec"&&(this.miniRecPlayer&&this.miniRecPlayer.stop(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose")),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox"))))}},{key:"miniRecSwitchClick",value:function(){console.log("---------------小窗口切换");var t=this.decoderState.state.isEditing,n=this.videoWidth,o=n/375,l=n*1.8,d=6;document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(d=document.getElementById("".concat(this.jSPlugin.id,"-headControl")).offsetHeight+l*.1+6),console.log("headerHeight-------",d);var c=d+this.videoHeight+10*o;if(console.log("videoTop-------",c),this.miniRecStatus=="rec"){this.miniRecStatus="live",t?(document.getElementById("miniRec-embed").style.width=this.jSPlugin.width+"px",document.getElementById("miniRec-embed").style.height=this.jSPlugin.height+"px",document.getElementById("miniRec").style.width=this.jSPlugin.width+"px",document.getElementById("miniRec").style.height=this.jSPlugin.height+"px"):this.miniRecPlayer.reSize(this.jSPlugin.width,this.jSPlugin.height),this.jSPlugin.reSize(160*o,90*o);var E=this.videoHeight+10*o,C=l*.2-90*o-10*o;document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.width=this.videoWidth+"px",document.getElementById("".concat(this.jSPlugin.id)).style.marginTop=E+"px",document.getElementById("".concat(this.jSPlugin.id)).style.marginLeft=n-160*o-9+"px",document.getElementById("".concat(this.jSPlugin.id)).style.overflow="hidden",document.getElementById("".concat(this.jSPlugin.id)).style.borderRadius="8px",document.getElementById("miniRecbox").style.top=d+"px",document.getElementById("miniRecbox").style.left="0",document.getElementById("miniRecbox").style.right="0",document.getElementById("miniRecbox").style.borderRadius="0px",document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop=C+"px"}else console.log(this.jSPlugin.width),this.miniRecStatus="rec",t?(document.getElementById("miniRec-embed").style.width=160*o+"px",document.getElementById("miniRec-embed").style.height=90*o+"px",document.getElementById("miniRec").style.width=160*o+"px",document.getElementById("miniRec").style.height=90*o+"px"):this.miniRecPlayer.reSize(160*o,90*o),this.jSPlugin.reSize(this.videoWidth,this.videoHeight),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).style.width=this.videoWidth+ +"px",document.getElementById("".concat(this.jSPlugin.id)).style.marginTop="0",document.getElementById("".concat(this.jSPlugin.id)).style.marginLeft="0",document.getElementById("".concat(this.jSPlugin.id)).style.overflow="hidden",document.getElementById("".concat(this.jSPlugin.id)).style.borderRadius="0px",document.getElementById("miniRecbox").style.top=c+"px",document.getElementById("miniRecbox").style.right="9px",document.getElementById("miniRecbox").style.left="auto",document.getElementById("miniRecbox").style.borderRadius="8px",document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop=l*.2+"px"}},{key:"matchBtn",value:function(t,n){var o=this,l=this.themeData,d=l.header,c=l.footer,E=this.decoderState.state,C=E.mute,y=E.rejection;document.documentElement.clientHeight;var w=this.videoWidth,g=w/375,p=this.videoWidth/375||1,te={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},ae=d[this.bellStatus].btnList.findIndex(function(ie){return ie.iconId===t});ae===-1?(te.color=c[this.bellStatus].color,te.backgroundColor=c[this.bellStatus].backgroundColor,te.activeColor=c[this.bellStatus].activeColor):(te.color=d[this.bellStatus].color,te.backgroundColor=d[this.bellStatus].backgroundColor,te.activeColor=d[this.bellStatus].activeColor);var de=this.videoWidth/4;switch(t){case"ringStatus":return te.title=this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,te.id=t,te.domString='<span id="header-onBell-ringStatus" style="color:'.concat(n.color||"#2C2C2C",";font-size: ").concat(24*p,'px;display: block;font-weight: 600;" >').concat(this.activeThemeStatus?"有人按门铃":this.activeThemeStatusTxt,"</span>"),te.onclick=function(){},te;case"deviceCategory":return te.title="设备名称",te.id=t,te.domString=`<span id="header-onBell-deviceCategory" 
          style="color:`.concat(n.color||"#2C2C2C",`;
          font-size: `).concat(14*p,`px;
          padding-top: `).concat(5*p,`px;
          display: block;
          max-width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          ">`).concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),te.onclick=function(){},te;case"callStatus":return te.title="通话中",te.id=t,te.domString='<span id="header-onCall-ringStatus" style="color:'.concat(n.color||"#2C2C2C",";font-size: ").concat(24*p,'px;display: block;font-weight: 600;" >通话中</span>'),te.onclick=function(){},te;case"deviceCategory":return te.title="设备名称",te.id=t,te.domString=`<span id="header-onCall-deviceCategory" 
          style="color:`.concat(n.color||"#2C2C2C",`;
          font-size: `).concat(14*p,`px;
          padding-top: `).concat(5*p,`px;
          display: block;
          max-width: 100%;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          ">`).concat(this.deviceInfoData&&this.deviceInfoData.deviceName||"设备名称","</span>"),te.onclick=function(){},te;case"rejection":return te.title="拒绝",te.id=t,te.domString='<div style="width: '.concat(de*.66,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width:`).concat(de*.66,"px;height: ").concat(de*.66,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(de*.4,'px" height="').concat(de*.4,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>拒绝</title>
                        <g id="icon/拒绝" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(de*.1,`px;user-select: none;">拒绝</div>
            </div>`),te.onclick=function(){var ie=o,we=o.decoderState.state,Ve=we.play,ue=we.isEditing,x=we.rejection;if(ue||x)return!1;console.log("拒绝"),Ve&&o.jSPlugin.stop(),o.removeBellRing(),o.setDecoderState({play:!1,rejection:!0}),ie.miniRecCloseClick(),o.rejectionStatusDispose(),typeof o.jSPlugin.hangUpCallback=="function"&&o.jSPlugin.hangUpCallback("rejection")},te;case"quickReply":return te.title="快捷回复",te.id=t,te.domString='<div id="'.concat(this.jSPlugin.id,'-btn-quickReply" style="width: ').concat(126*g,"px;height: ").concat(40*g,"px;color:").concat(y?"rgba(44,44,44,0.5)":te.color,`;background: #F8F8F8;border-radius: 20px;display: flex;flex-direction: row;align-items: center;justify-content: center;-webkit-tap-highlight-color:transparent;">
                <div>
                  <svg width="`).concat(24*g,'px" height="').concat(24*g,`px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                      <title>快捷回复</title>
                      <g id="icon/H5快捷回复" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                          <rect id="Rectangle" x="0" y="0" width="24" height="24"></rect>
                          <path d="M10.7238197,2.25008794 C16.2230834,2.09766093 20.7496,6.50749909 20.7496,11.9958 C20.7496,13.4362841 20.4368194,14.8344518 19.8413577,16.1117061 L19.9440524,15.8792521 L21.0527769,21.184554 C21.1496277,21.6485507 20.8013031,22.0657304 20.3577211,22.0873894 L20.2613374,22.0858497 L20.1628027,22.0714397 L14.866,20.946 L14.7518767,20.9973203 C13.6930577,21.439776 12.5585243,21.69208 11.3902258,21.7381162 L11.3902258,21.7381162 L10.9996,21.7458 C5.51196728,21.7458 1.10147008,17.2189531 1.25388722,11.7200456 C1.39490345,6.62610538 5.62990538,2.39110345 10.7238197,2.25008794 Z M11.0183931,3.74628651 L10.7653544,3.74951278 C6.46729462,3.86849655 2.87229655,7.46349462 2.75331206,11.7615803 C2.62431432,16.4155628 6.35610614,20.2458 10.9996,20.2458 C12.2165433,20.2458 13.3936843,19.9831552 14.4692454,19.4827855 C14.6166569,19.4142071 14.7823612,19.395387 14.9413973,19.4291603 L14.9413973,19.4291603 L19.349,20.365 L18.4274231,15.948046 C18.4026128,15.8291836 18.4071487,15.7066932 18.4398273,15.5909727 L18.4398273,15.5909727 L18.4818423,15.4778939 C18.9851908,14.3982208 19.2496,13.216279 19.2496,11.9958 C19.2496,7.35166383 15.4197191,3.62050444 10.7653544,3.74951278 Z M10.9996,10.7498 C11.6896,10.7498 12.2496,11.3098 12.2496,11.9998 C12.2496,12.6898 11.6896,13.2498 10.9996,13.2498 C10.3096,13.2498 9.7496,12.6898 9.7496,11.9998 C9.7496,11.3098 10.3096,10.7498 10.9996,10.7498 Z M6.9996,10.7498 C7.6896,10.7498 8.2496,11.3098 8.2496,11.9998 C8.2496,12.6898 7.6896,13.2498 6.9996,13.2498 C6.3096,13.2498 5.7496,12.6898 5.7496,11.9998 C5.7496,11.3098 6.3096,10.7498 6.9996,10.7498 Z M14.9996,10.7498 C15.6896,10.7498 16.2496,11.3098 16.2496,11.9998 C16.2496,12.6898 15.6896,13.2498 14.9996,13.2498 C14.3096,13.2498 13.7496,12.6898 13.7496,11.9998 C13.7496,11.3098 14.3096,10.7498 14.9996,10.7498 Z" id="形状结合" fill="`).concat(y?"rgba(44,44,44,0.5)":"#2c2c2c",`" fill-rule="nonzero"></path>
                      </g>
                  </svg>
                </div>
                <div style="margin-left: 5px;user-select: none;font-size:14px">快捷回复<div>
            </div>`),te.onclick=function(){var ie=o.decoderState.state,we=ie.isEditing,Ve=ie.rejection;if(we||Ve)return!1;console.log("快捷回复"),o.switchFooter("quickReply"),o.quickReplyEle=new of(o.jSPlugin,o.switchFooter,o.videoWidth)},te;case"answer":return te.title="接听",te.id=t,te.domString='<div style="width: '.concat(de*.66,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width: `).concat(de*.66,"px;height: ").concat(de*.66,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(de*.4,'px" height="').concat(de*.4,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>接听</title>
                        <g id="icon/接听" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M15.7728281,19.6822968 C13.2528132,17.165123 10.8435994,14.2473605 11.9999084,13.0938925 C13.6505608,11.4432401 15.0881341,10.4261428 12.1646895,6.78675259 C9.23840386,3.14452132 7.28659974,5.94011849 5.68708632,7.53963191 C3.84324225,9.38631703 5.59049048,16.2645088 12.3891328,23.0659922 C19.1877751,29.8646345 26.0688079,31.6147238 27.9154931,29.7680386 C29.5150065,28.1685252 32.3106036,26.2195622 28.6712134,23.2932765 C25.0318232,20.3669909 24.0147259,21.8045642 22.3640735,23.4580576 C21.2077645,24.6086845 18.2928431,22.1994707 15.7728281,19.6822968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.727936, 17.728157) rotate(-360.000000) translate(-17.727936, -17.728157) "></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(de*.1,`px;user-select: none;">接听</div>
            </div>`),te.onclick=function(){var ie=o.decoderState.state,we=ie.play,Ve=ie.isEditing,ue=ie.talk,x=ie.sound,O=ie.rejection;if(Ve||O)return!1;console.log("接听"),o.jSPlugin.pluginStatus.loadingClear(),o.bellStatus="onCall",o.switchFooter("onCall"),c[o.bellStatus].btnList.map(function(ye,se){ye.isrender&&o.renderFooter(ye.iconId,ye)}),d[o.bellStatus].btnList.map(function(ye,se){ye.isrender&&o.renderHeader(ye.iconId,ye)});var ne=document.getElementById("".concat(o.jSPlugin.id,"-header-onBell"));ne&&ne.parentElement.removeChild(ne),o.themeData.customConfig.bellPoster==1&&(document.getElementById("bellring-icon")&&document.getElementById("".concat(o.jSPlugin.id,"-wrap")).removeChild(document.getElementById("bellring-icon")),o.jSPlugin.setPoster("")),o.removeBellRing(),o.miniRecCloseClick(),we||(o.jSPlugin.pluginStatus.loadingStart(o.jSPlugin.id),o.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"}),o.jSPlugin.play(),o.setDecoderState({play:!we})),!ue&&o.themeData.customConfig.defaultMicro==1&&(o.setDecoderState({talk:!0,mute:!1}),x&&o.jSPlugin.closeSound(),o.jSPlugin.Talk.startTalk()),o.setDecoderState({sound:!1}),o.themeData.customConfig.defaultMicro==0&&(o.muteCommon(n),o.jSPlugin.openSound(),o.setDecoderState({sound:!0})),o.maxTalkTime=o.themeData.customConfig.maxTalkTime*1e3*60;var Q=o;setTimeout(function(){ue&&(console.log("结束对讲"),Q.setDecoderState({talk:!1}),Q.jSPlugin.Talk.stopTalk()),we&&(Q.jSPlugin.stop(),Q.setDecoderState({play:!we})),o.rejectionStatusDispose(),o.remoteUnlockEle&&o.remoteUnlockEle.closeRemoteUnlock(),typeof o.jSPlugin.hangUpCallback=="function"&&o.jSPlugin.hangUpCallback("hangUp")},o.maxTalkTime)},te;case"remoteUnlock":return te.title="远程开锁",te.id=t,te.domString='<div style="width: '.concat(de*.66,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width: `).concat(de*.66,"px;height: ").concat(de*.66,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(de*.4,'px" height="').concat(de*.4,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>开锁</title>
                        <g id="icon/开锁" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M18,4 C21.3137085,4 24,6.6862915 24,10 L24,10 L24,19.787 L29.5,19.7875 C30.0522847,19.7875 30.5,20.2352153 30.5,20.7875 C30.5,21.3397847 30.0522847,21.7875 29.5,21.7875 L24,21.787 L24,26 C24,29.2383969 21.4344251,31.8775718 18.2249383,31.9958615 L18,32 C14.6862915,32 12,29.3137085 12,26 L12,26 L12,10 C12,6.6862915 14.6862915,4 18,4 Z M18,6 C15.790861,6 14,7.790861 14,10 L14,10 L14,26 C14,28.209139 15.790861,30 18,30 C20.209139,30 22,28.209139 22,26 L22,26 L22,21.787 L18.5,21.7875 C17.9477153,21.7875 17.5,21.3397847 17.5,20.7875 C17.5,20.2352153 17.9477153,19.7875 18.5,19.7875 L22,19.787 L22,10 C22,7.85780461 20.3160315,6.10892112 18.1996403,6.00489531 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(de*.1,`px;user-select: none;">远程开锁</div>
            </div>`),te.onclick=function(){var ie=o.decoderState.state,we=ie.isEditing;ie.play;var Ve=ie.rejection;if(we||o.bellStatus=="onBell"||Ve)return!1;console.log("远程开锁"),o.switchFooter("remoteUnlock"),o.remoteUnlockEle=new sf(o.jSPlugin,o.switchFooter,o.videoWidth)},te;case"mute":return te.title="静音",te.id=t,te.domString='<div style="width: '.concat(de*.66,`px;display: flex;flex-direction: column;align-items: center;">
                <div id="`).concat(this.jSPlugin.id,'-icon-mute" style="width: ').concat(de*.66,"px;height: ").concat(de*.66,"px;border-radius: 50%;border: 1px solid ").concat(y?"#cccccc":n.backgroundColor,";background: ").concat(y&&C?"#cccccc":"#ffffff",`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(de*.4,'px" height="').concat(de*.4,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>icon/静音</title>
                        <g id="icon/静音" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path id="icon-mute-path" d="M29.2988305,7.56559704 C29.8540627,8.1086468 29.8980234,8.97727504 29.4240597,9.57172938 L29.3223594,9.6867869 L22.585,16.574 L22.5859243,26.0592702 C22.5859243,26.9500521 21.8638029,27.6721735 20.973021,27.6721735 C20.6007147,27.6721735 20.2398727,27.5433734 19.9517149,27.3076254 L15.583,23.733 L10.4341733,28.9987008 C9.85492024,29.5909486 8.9052312,29.6014828 8.31298346,29.0222298 C7.75775121,28.47918 7.71379057,27.6105518 8.18775419,27.0160974 L8.28945454,26.9010399 L27.1776406,7.58912597 C27.7568937,6.99687823 28.7065827,6.98634397 29.2988305,7.56559704 Z M22.2503608,7.16816759 C22.4679282,7.45036017 22.5859243,7.79665625 22.5859243,8.15298221 L22.585,9.899 L10.778,21.971 L9.47580645,21.9713498 C7.69424274,21.9713498 6.25,20.5271071 6.25,18.7455434 L6.25,15.65293 C6.25,13.8713663 7.69424274,12.4271235 9.47580645,12.4271235 L12.787,12.427 L19.9882064,6.87564241 C20.6936617,6.33174431 21.7064627,6.46271229 22.2503608,7.16816759 Z" id="形状结合" fill="`).concat(C?"#ffffff":y?"#cccccc":n.backgroundColor,`"></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(de*.1,`px;user-select: none;">静音</div>
            </div>`),te.onclick=function(){var ie=o.decoderState.state,we=ie.talk,Ve=ie.sound;ie.play;var ue=ie.rejection;if(ue)return!1;console.log("静音"),we?(console.log("结束对讲"),o.setDecoderState({talk:!1,mute:!0},n.backgroundColor),o.jSPlugin.Talk.stopTalk(),o.jSPlugin.openSound(),o.setDecoderState({sound:!0})):(console.log("开始对讲"),o.setDecoderState({talk:!0,mute:!1},n.backgroundColor),Ve&&(o.jSPlugin.closeSound(),o.setDecoderState({sound:!1})),o.jSPlugin.Talk.startTalk())},te;case"hangUp":return te.title="挂断",te.id=t,te.domString='<div style="width: '.concat(de*.66,`px;display: flex;flex-direction: column;align-items: center;">
                <div style="width:`).concat(de*.66,"px;height: ").concat(de*.66,"px;border-radius: 50%;background: ").concat(y?"#CCCCCC":n.backgroundColor,`;display: flex;align-items: center;justify-content: center;" >
                    <svg width="`).concat(de*.4,'px" height="').concat(de*.4,`px" viewBox="0 0 36 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <title>挂断</title>
                        <g id="icon/挂断" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <rect id="Rectangle" x="0" y="0" width="36" height="36"></rect>
                            <path d="M16.0428281,19.9522968 C13.5228132,17.435123 11.1135994,14.5173605 12.2699084,13.3638925 C13.9205608,11.7132401 15.3581341,10.6961428 12.4346895,7.05675259 C9.50840386,3.41452132 7.55659974,6.21011849 5.95708632,7.80963191 C4.11324225,9.65631703 5.86049048,16.5345088 12.6591328,23.3359922 C19.4577751,30.1346345 26.3388079,31.8847238 28.1854931,30.0380386 C29.7850065,28.4385252 32.5806036,26.4895622 28.9412134,23.5632765 C25.3018232,20.6369909 24.2847259,22.0745642 22.6340735,23.7280576 C21.4777645,24.8786845 18.5628431,22.4694707 16.0428281,19.9522968 Z" id="路径" fill="#FFFFFF" fill-rule="nonzero" transform="translate(17.997936, 17.998157) rotate(135.000000) translate(-17.997936, -17.998157) "></path>
                        </g>
                    </svg>
                </div>
                <div style="margin-top: `).concat(de*.1,`px;user-select: none;">挂断</div>
            </div>`),te.onclick=function(){var ie=o,we=o.decoderState.state,Ve=we.talk,ue=we.play,x=we.rejection;if(x)return!1;Ve&&(console.log("结束对讲"),o.setDecoderState({talk:!1}),o.jSPlugin.Talk.stopTalk()),ue&&(o.jSPlugin.stop(),o.setDecoderState({play:!ue})),(ue||Ve)&&(ie.miniRecCloseClick(),console.log("挂断"),o.rejectionStatusDispose(),typeof o.jSPlugin.hangUpCallback=="function"&&o.jSPlugin.hangUpCallback("hangUp"))},te;default:return te}}},{key:"answerOvertime",value:function(){this.toastCustom.initToastContent("应答超时");var t=this.decoderState.state.play;console.log("应答超时"),t&&this.jSPlugin.stop(),this.setDecoderState({play:!1,rejection:!0}),this.miniRecCloseClick(),this.rejectionStatusDispose(),this.quickReplyEle&&this.quickReplyEle.closeQuickReplyEle(),typeof this.jSPlugin.hangUpCallback=="function"&&this.jSPlugin.hangUpCallback("rejection")}},{key:"rejectionStatusDispose",value:function(){var t=this,n=this.themeData.footer,o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),l=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),d=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")),c=document.getElementById("header-".concat(this.bellStatus,"-ringStatus"));this.bellStatus=="onBell"?(o.innerHTML="",d.innerHTML="",o.style.color="#2C2C2C"):(l.innerHTML="",l.style.color="#2C2C2C"),console.log("rejectionStatusDispose"),this.setDecoderState({rejection:!0}),n[this.bellStatus].btnList.map(function(E,C){E.isrender&&t.renderFooter(E.iconId,E)}),c.innerText="通话已结束",this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:!0,type:2})}},{key:"userNoDevice",value:function(){var t=this;this.removeBellRing(),this.setDecoderState({rejection:!0});var n=this.themeData.footer,o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),l=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),d=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn"));this.bellStatus=="onBell"?(o.innerHTML="",d.innerHTML="",o.style.color="#2C2C2C"):(l.innerHTML="",l.style.color="#2C2C2C"),console.log("userNoDevice"),this.setDecoderState({rejection:!0}),n[this.bellStatus].btnList.map(function(c,E){c.isrender&&t.renderFooter(c.iconId,c)}),this.jSPlugin.pluginStatus.loadingClear(),this.jSPlugin.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:!0,type:2})}},{key:"renderHeader",value:function(t,n){var o=this,l=this.matchBtn(t,n);if(document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content"))){var d=document.createElement("span");d.innerHTML="".concat(l.domString),document.getElementById("".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,"-content")).appendChild(d)}else{var c=document.createElement("div");c.id="".concat(this.jSPlugin.id,"-header-").concat(this.bellStatus),c.style="max-width:50%;position:relative;",c.innerHTML='<span id="'.concat(this.jSPlugin.id,"-header-").concat(this.bellStatus,`-content" style="display:inline-block;height:auto;";>
            `).concat(l.domString,`
          </span>`),c.onclick=function(E){if(o.decoderState.state.isEditing)return!1;l.onclick(E)},document.getElementById("".concat(this.jSPlugin.id,"-headControl")).childNodes[0].appendChild(c)}}},{key:"renderFooter",value:function(t,n){var o=this,l=this.decoderState.state.mute;if(t=="remoteUnlock"&&this.jSPlugin.capacity&&(!this.jSPlugin.capacity.support_unlock||this.jSPlugin.capacity.support_unlock==0))return!1;var d=this.matchBtn(t,n),c=this.videoWidth/4,E=document.createElement("div");if(E.className="theme-icon-item",d.id!=="quickReply"&&(E.style="width:".concat(c*.66,"px;padding:0 ").concat(c*.12,"px;box-sizing: content-box;-webkit-tap-highlight-color:transparent;")),E.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(d.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(d.id,'-content" title="').concat(d.title,'" style="display: flex;align-items: center;position:relative;">')).concat(d.domString,"</div>")+"</span>",E.onclick=function(g){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onclick(g)},d.onmouseenter&&(E.onmouseenter=function(g){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onmouseenter(g)}),d.onmouseleave&&(E.onmouseleave=function(g){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;d.onmouseleave(g)}),t!="quickReply"){var C=document.createElement("span");C.className="icon-move left",C.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(d.id,`-left" title="左移" style="height: 40px;position: absolute;top: calc(50% - 33px);left: 1px;display: inline-block;border-radius: 2px;overflow: hidden;cursor: pointer;">
          <svg width="10px" height="40px" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title></title>
              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="H5呼叫模板" transform="translate(-614.000000, -5024.000000)">
                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">
                          <g id="编组-9" transform="translate(23.000000, 522.000000)">
                              <g id="编组" transform="translate(170.000000, 0.000000)">
                                  <g id="箭头左" transform="translate(0.000000, 18.000000)">
                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>
                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(1.000000, 15.000000)" fill="#FFFFFF">
                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                  </g>
              </g>
          </svg>
          </span>`),C.onclick=function(){o.editIcon(d.id,"left","footer")},E.appendChild(C);var y=document.createElement("span");y.className="icon-move right",y.innerHTML='<span id="'.concat(this.jSPlugin.id,"-").concat(d.id,`-right" class="ezuikit-theme-icon" title="右移" style="height: 40px;position: absolute;top: calc(50% - 33px);left: calc(100% - 11px);display: inline-block;border-radius: 2px;overflow: hidden;cursor: pointer;">
          <svg width="10px" height="40px" viewBox="0 0 10 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title></title>
              <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <g id="H5呼叫模板" transform="translate(-684.000000, -5024.000000)">
                      <g id="编组-28" transform="translate(421.000000, 4484.000000)">
                          <g id="编组-9" transform="translate(23.000000, 522.000000)">
                              <g id="编组" transform="translate(170.000000, 0.000000)">
                                  <g id="箭头右" transform="translate(70.000000, 18.000000)">
                                      <rect id="矩形" fill="#595959" x="0" y="0" width="10" height="40" rx="2"></rect>
                                      <g id="1.通用/2.Icon图标/Common/Fill/Left" transform="translate(5.500000, 20.000000) scale(-1, 1) translate(-5.500000, -20.000000) translate(2.000000, 15.000000)" fill="#FFFFFF">
                                          <path d="M3.88411064,2.46093277 L7.81658983,7.1799078 C7.99337187,7.39204625 7.96470984,7.7073286 7.75257139,7.88411064 C7.66271389,7.95899189 7.54944745,8 7.43247919,8 L-0.432479194,8 C-0.708621569,8 -0.932479194,7.77614237 -0.932479194,7.5 C-0.932479194,7.38303175 -0.891471084,7.2697653 -0.816589833,7.1799078 L3.11588936,2.46093277 C3.2926714,2.24879432 3.60795375,2.22013229 3.8200922,2.39691433 C3.84332373,2.41627394 3.86475103,2.43770124 3.88411064,2.46093277 Z" id="三角形" transform="translate(3.500000, 5.000000) scale(-1, -1) rotate(-270.000000) translate(-3.500000, -5.000000) "></path>
                                      </g>
                                  </g>
                              </g>
                          </g>
                      </g>
                  </g>
              </g>
          </svg>
          </span>`),y.onclick=function(){o.editIcon(d.id,"right","footer")},E.appendChild(y)}if(!(t=="answer"||t=="rejection"||t=="hangUp")){var w=document.createElement("span");w.className="icon-move close",w.innerHTML='<span id="'.concat(d.id,`-remove" class="ezuikit-theme-icon" title="移除" style="position: absolute;top: -6px;right: -2px;cursor: pointer;">
            <svg width="16px" height="16px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <title></title>
                <g id="呼叫模板-控制台" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="H5呼叫模板" transform="translate(-680.000000, -5006.000000)">
                        <g id="编组-28" transform="translate(421.000000, 4484.000000)">
                            <g id="编组-9" transform="translate(23.000000, 522.000000)">
                                <g id="编组" transform="translate(170.000000, 0.000000)">
                                    <g id="关闭1" transform="translate(66.000000, 0.000000)">
                                        <rect id="矩形" fill-rule="nonzero" x="0" y="0" width="18" height="18"></rect>
                                        <path d="M9,1.125 C4.65117188,1.125 1.125,4.65117188 1.125,9 C1.125,13.3488281 4.65117188,16.875 9,16.875 C13.3488281,16.875 16.875,13.3488281 16.875,9 C16.875,4.65117188 13.3488281,1.125 9,1.125 Z M11.9074219,11.9917969 L10.7472656,11.9865234 L9,9.90351562 L7.25449219,11.9847656 L6.09257813,11.9900391 C6.01523438,11.9900391 5.95195313,11.9285156 5.95195313,11.8494141 C5.95195313,11.8160156 5.96425781,11.784375 5.98535156,11.7580078 L8.27226563,9.03339844 L5.98535156,6.31054687 C5.96425781,6.28417969 5.95195313,6.25253906 5.95195313,6.21914062 C5.95195313,6.14179687 6.01523438,6.07851562 6.09257813,6.07851562 L7.25449219,6.08378906 L9,8.16679687 L10.7455078,6.08554688 L11.9056641,6.08027344 C11.9830078,6.08027344 12.0462891,6.14179687 12.0462891,6.22089844 C12.0462891,6.25429687 12.0339844,6.2859375 12.0128906,6.31230469 L9.72949219,9.03515625 L12.0146484,11.7597656 C12.0357422,11.7861328 12.0480469,11.8177734 12.0480469,11.8511719 C12.0480469,11.9285156 11.9847656,11.9917969 11.9074219,11.9917969 Z" id="形状" fill="#595959"></path>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </svg>
          </span>`),w.onclick=function(){o.editIcon(d.id,"delete","footer")},E.appendChild(w)}this.bellStatus=="onCall"?document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).appendChild(E):(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(E),d.id==="quickReply"&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).appendChild(E)),this.decoderState.state.isEditing&&t=="mute"&&this.bellStatus=="onCall"&&(this.themeData.customConfig.defaultMicro==0&&!l?this.setDecoderState({mute:!0},n.backgroundColor):this.setDecoderState({mute:!1},n.backgroundColor))}},{key:"switchFooter",value:function(t){var n=this.themeData.footer;switch(t){case"onBell":document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"))?document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display=="none"&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="flex"):(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-quickReplyBtn")).style.display="flex",document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="flex");break;case"onCall":document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-btn-quickReply")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.display="flex",this.themeData&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=n[this.bellStatus].color);break}}},{key:"initThemeData",value:function(){var t=this;console.log("-------------initThemeData");var n=this.themeData,o=n.header,l=n.footer,d=this.decoderState.state.isEditing,c=this.videoWidth,E=c/375,C=c*1.8,y=this.jSPlugin.id;if(this.isNeedRenderHeader=vr.findIndex(o[this.bellStatus].btnList,function(Ve){return Ve.isrender>0})>=0,this.isNeedRenderFooter=vr.findIndex(l[this.bellStatus].btnList,function(Ve){return Ve.isrender>0})>=0,this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;width:100%;overflow:hidden;justify-content: center;'></div>");else{var w,g=document.createElement("div");g.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),g.setAttribute("class","header-controls"),g.innerHTML="<div id='".concat(this.jSPlugin.id,`-headControl-left' class="header-controls-left" style='display:flex;width:100%;overflow:hidden;justify-content: center;'></div>`),console.log(this.jSPlugin.height),this.jSPlugin.height*.2+"";var p=(w={display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:"100%",position:"relative","margin-bottom":C*.1+"px","align-items":"center","text-align":"center","font-size":"24ox"},ln(w,"color","#2c2c2c"),ln(w,"margin-top","6px"),w);g.style=Zl(p),document.getElementById("".concat(y,"-wrap")).insertBefore(g,document.getElementById(y));var te=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(te)},50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));if(this.jSPlugin.height*.3,this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="".concat(C*.2,"px"),this.bellStatus=="onCall"?document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML=`
              <div id="`.concat(this.jSPlugin.id,`-audioControls-quickReplyBtn" class="footer-controls" style='min-height: `).concat(40*E,"px;margin-bottom: ").concat(40*E,`px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls" class="footer-controls" style='display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-onCall" class="footer-controls" style='display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-quickReply" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-remoteUnlock" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              `):document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).innerHTML=`
              <div id="`.concat(this.jSPlugin.id,`-audioControls-quickReplyBtn" class="footer-controls" style='min-height: `).concat(40*E,"px;margin-bottom: ").concat(40*E,`px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls" class="footer-controls" style='display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-onCall" class="footer-controls" style='display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-quickReply" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              <div id="`).concat(this.jSPlugin.id,`-audioControls-remoteUnlock" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
              `));else{var ae=document.createElement("div");ae.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),ae.setAttribute("class","ez-iframe-footer-container");var de={position:"relative","margin-top":C*.2+"px",display:"flex","flex-wrap":"wrap","justify-content":"space-between","z-index":999,top:0,color:"#FFFFFF",width:"100%","align-items":"center","font-size":"12px"};ae.style=Zl(de),ae.innerHTML=`
            <div id="`.concat(this.jSPlugin.id,`-audioControls-quickReplyBtn" class="footer-controls" style='min-height: `).concat(40*E,"px;margin-bottom: ").concat(40*E,`px;display:flex;justify-content: center;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls" class="footer-controls" style='display:flex;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls-onCall" class="footer-controls" style='display:none;justify-content: space-around;padding: 0 8%;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls-quickReply" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
            <div id="`).concat(this.jSPlugin.id,`-audioControls-remoteUnlock" class="footer-controls" style='display:none;justify-content: center;width:100%;z-index:999;position: relative;'></div>
            `),Oa(ae,document.getElementById(y))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));if(this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&o[this.bellStatus].btnList.map(function(Ve,ue){Ve.isrender&&t.renderHeader(Ve.iconId,Ve)}),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=l[this.bellStatus].backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=l[this.bellStatus].color,l[this.bellStatus].btnList.map(function(Ve,ue){Ve.isrender&&t.renderFooter(Ve.iconId,Ve)})),this.themeData.customConfig.bellPoster==1&&!d){this.jSPlugin.poster="https://resource.eziot.com/group1/M00/00/B8/CtwQEmPbGh2AVJB-ABDcYtyw5gk899.svg";var ie=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(ie),t.jSPlugin.setPoster(t.jSPlugin.poster))},50)}else this.jSPlugin.setPoster("");if(this.activeThemeStatus){this.initBellRing();var we=this.checkIsAppleDevice()||!1;we?window.addEventListener("touchstart",this.autoPlayRing):window.addEventListener("click",this.autoPlayRing)}this.inited=!0,this.getCallDeviceInfo()}},{key:"checkIsAppleDevice",value:function(){var t=navigator.userAgent,n=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),o=t.indexOf("iPad")>-1,l=t.indexOf("iPhone")>-1||t.indexOf("Mac")>-1;return!!(n||o||l)}},{key:"renderThemeData",value:function(){var t=this,n=this.themeData,o=n.header,l=n.footer,d=this.decoderState.state.isEditing;if(this.isNeedRenderHeader&&o&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=o[this.bellStatus].color.replace("-diy",""),o[this.bellStatus].btnList.map(function(C,y){C.isrender&&t.setDecoderState(ln({},C.iconId,t.decoderState.state[C.iconId]))})),this.isNeedRenderFooter&&l)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=l[this.bellStatus].backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=l[this.bellStatus].color.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")).style.color=l[this.bellStatus].color.replace("-diy",""),l[this.bellStatus].btnList.map(function(C,y){if(C.isrender&&t.setDecoderState(ln({},C.iconId,t.decoderState.state[C.iconId])),console.log("-------------activeThemeStatus"),y==0&&!t.themeInited&&t.activeThemeStatus)var w=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(w),t.themeData.customConfig.bellPoster==1&&!d?t.jSPlugin.pluginStatus.loadingClear():t.jSPlugin.play(),t.themeInited=!0)},50)}),this.jSPlugin.url.indexOf("hd.live")!==-1&&this.setDecoderState({hd:!0}),this.themeData.autoFocus>0&&(this.autoFocus=parseInt(this.themeData.autoFocus),this.startAutoFocus(),document.getElementById("".concat(this.jSPlugin.id,"-wrap")).addEventListener("click",function(){t.stopAutoFocus()})),this.setDecoderState({cloudRec:pn(this.jSPlugin.url).type==="cloud.rec",rec:pn(this.jSPlugin.url).type==="rec",type:pn(this.jSPlugin.url).type});else if(!this.themeInited&&this.activeThemeStatus)var c=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(c),t.themeData&&t.themeData.customConfig&&t.themeData.customConfig.bellPoster==1&&!d?t.jSPlugin.pluginStatus.loadingClear():t.jSPlugin.play(),t.themeInited=!0)},50);var E=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(E),t.jSPlugin.reSize(t.jSPlugin.params.width,t.jSPlugin.params.height))},50);!d&&!this.jSPlugin.isWebConsole?setTimeout(function(){t.bellStatus=="onBell"&&t.jSPlugin.capacity&&t.jSPlugin.capacity.support_doorcall_playback==1&&(console.log("小窗口initMiniRec-------------设备能力集成功"),t.themeData.customConfig.miniWinRec==1&&(console.log("小窗口initMiniRec---------------画中画设置已开启"),(!t.deviceInfoData||t.deviceInfoData&&!t.deviceInfoData.isEncrypt)&&(console.log("小窗口initMiniRec---------------设备未加密"),t.miniRecNum=0,t.initMiniRec())))},1e3):this.themeData.customConfig.miniWinRec==1?this.initMiniImageRec():this.miniRecCloseClick()}},{key:"setThemeData",value:function(t,n){this.themeData=t,n=="onCall"&&(this.bellStatus="onCall")}},{key:"startAutoFocus",value:function(){var t=this,n=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout(function(){document.getElementById("".concat(t.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.pointerEvents="none")},n*1e3)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.startAutoFocus()}},{key:"editIcon",value:function(t,n,o){console.log("编辑组件",t,n,o);var l=this.themeData;console.log("themeData",this.themeData);var d=this.themeData[o][this.bellStatus].btnList,c=vr.findIndex(d,function(p){return p.iconId===t}),E=d[c];switch(n){case"delete":d[c].isrender=0;break;case"right":for(var C=-1,y=c+1;y<d.length;y++)if(d[y].part===d[c].part&&d[y].isrender==1){C=y;break}C!==-1&&(d[c]=d[C],d[C]=E);break;case"left":for(var w=-1,g=c-1;g>=0;g--)if(d[g].part===d[c].part&&d[g].isrender==1){w=g;break}w!==-1&&(d[c]=d[w],d[w]=E);break}console.log("new btnList",d),l[o][this.bellStatus].btnList=d,this.jSPlugin.Theme.changeTheme(l)}},{key:"countTime",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var l=document.createElement("div");l.id=this.jSPlugin.id+"time-area",l.className="time-area",l.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(l)}if(this.countTimer&&clearInterval(this.countTimer),t==="add"){var d=n;document.getElementById(o.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval(function(){++d,document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML=c(d)},1e3)}else t==="destroy"&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(o.jSPlugin.id+"time-area")&&(document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(o.jSPlugin.id+"time-area").style.display="none"));function c(E){var C=parseInt(E),y=0,w=0,g="00",p="00",te="00";return C>59&&(y=parseInt(C/60),C=parseInt(C%60),y>59&&(w=parseInt(y/60),y=parseInt(y%60))),g=parseInt(C)>9?parseInt(C):"0"+parseInt(C),p=parseInt(y)>9?parseInt(y):"0"+parseInt(y),te=parseInt(w)>9?parseInt(w):"0"+parseInt(w),w>0?te+":"+p+":"+g:y>0?p+":"+g:"00:"+g}}},{key:"editStart",value:function(t){console.log("----------editStart1");var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));document.getElementById("".concat(this.jSPlugin.id,"-headControl")),n&&n.setAttribute("class","footer-controls themeEditing"),o&&o.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(t){console.log("----------editEnd1");var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-headControl")),l=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall"));o&&o.setAttribute("class","header-controls"),n&&n.setAttribute("class","footer-controls"),l&&l.setAttribute("class","footer-controls")}},{key:"fetchThemeData",value:function(t){var n=this;switch(this.jSPlugin.themeId){case"pcLive":case"pcRec":case"mobileLive":case"mobileRec":case"miniRec":break;default:var o=function(c){c.meta.code==0&&c.data?(n.activeThemeStatus=!0,n.themeData=c.data,c.data.header&&(n.themeData.header=c.data.header,n.themeData.header[n.bellStatus].btnList=n.themeData.header[n.bellStatus].btnList.sort(function(E,C){return E.btnKey.split("-")[3]-C.btnKey.split("-")[3]})),c.data.footer&&(n.themeData.footer=c.data.footer,n.themeData.footer[n.bellStatus].btnList=n.themeData.footer[n.bellStatus].btnList.sort(function(E,C){return E.btnKey.split("-")[3]-C.btnKey.split("-")[3]})),n.jSPlugin.capacity?(n.initThemeData(),n.renderThemeData()):setTimeout(function(){n.initThemeData(),n.renderThemeData()},300)):(n.activeThemeStatus=!1,n.jSPlugin.pluginStatus.loadingClear(),n.setDecoderState({rejection:!0}),c.meta.code=="111021"?(n.jSPlugin.pluginStatus.loadingSetText({text:"无效的模板id",color:"#fff",type:1}),n.activeThemeStatusTxt="无效的模板id"):c.meta.code=="111023"?(n.jSPlugin.pluginStatus.loadingSetText({text:"您的试用特权已到期，需前往轻应用控制台购买后使用。",color:"#fff",type:1}),n.activeThemeStatusTxt="试用特权已到期"):(n.jSPlugin.pluginStatus.loadingSetText({text:"模板未激活，请先在开放平台轻应用控制台购买模板",color:"#fff",type:1}),n.activeThemeStatusTxt="模板未激活"),n.themeData=df.data,n.initThemeData(),n.renderThemeData())},l=function(){n.renderThemeData()};Ts(this.jSPlugin,t,o,l);break}}},{key:"getCallDeviceInfo",value:function(){var t=this;this.videoWidth/375;var n=function(l){l.code==200&&l.data&&(t.deviceInfoData=l.data,console.log("------------getDeviceInfo"),l.data.isEncrypt&&(console.log("小窗口miniRecCloseClick------------设备已加密"),t.miniRecCloseClick(),setTimeout(function(){t.jSPlugin.pluginStatus.loadingClear(),t.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})},50)),document.getElementById("header-".concat(t.bellStatus,"-deviceCategory"))&&(document.getElementById("header-".concat(t.bellStatus,"-deviceCategory")).innerText=""+l.data.deviceName)),l.code==20018&&!t.jSPlugin.isWebConsole&&t.userNoDevice()};Ca(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:pn(this.jSPlugin.url).deviceSerial},"",n)}},{key:"setHeaderText",value:function(t){console.log("setHeaderText");var n=this.videoWidth/375||1;document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content"))&&(document.getElementById("".concat(this.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(24*n,'px;display: block">').concat(t,'</span><span style="font-size: ').concat(14*n,"px;padding-top: ").concat(5*n,'px;display: block;">').concat(this.deviceInfoData&&this.deviceInfoData.category||"","</span>"))}}]),Z}(),uf=function(){function Z(m){if(En(this,Z),this.jSPlugin=m,this.videoWidth=m.width,this.autoFocus=0,this.autoFocusTimer=null,this.decoderState={state:{isEditing:!1,play:!1,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,mute:!1,rejection:!1,cloudRec:pn(m.url).type==="cloud.rec",rec:pn(m.url).type==="rec",type:pn(m.url).type}},console.log("matchEzopenUrl(jSPlugin.url)",pn(m.url),this.decoderState.state),this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),typeof m.isMobile<"u"&&(this.isMobile=m.isMobile),this.themeData={},this.jSPlugin.themeId=="themeData"&&(this.themeData=this.jSPlugin.params.themeData),this.jSPlugin.themeId)switch(this.isMobile?this.call=new cf(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState):this.call=new af(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState),this.jSPlugin.themeId){case"themeData":this.themeData=this.jSPlugin.params.themeData,this.call.initThemeData(),this.call.renderThemeData();break;default:this.call.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new Cs(this.jSPlugin)),po("".concat(this.jSPlugin.staticPath,"/speed/speed.css")),po("".concat(this.jSPlugin.staticPath,"/css/theme.css"))}return Rn(Z,[{key:"changeTheme",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"onBell";if(typeof t=="string")switch(this.jSPlugin.themeId=t,this.jSPlugin.themeId){case"pcLive":case"mobileCall":case"webCall":this.call.initThemeData(),this.call.renderThemeData();break;default:this.call.fetchThemeData(t);break}else Ni(t)==="object"&&(this.themeData=t,this.call.setThemeData(t,o),this.call.initThemeData(),this.call.renderThemeData(),this.decoderState.state.isEditing&&n&&this.call.editStart());this.jSPlugin&&this.jSPlugin.handleThemeChange&&this.jSPlugin.handleThemeChange(t)}},{key:"setDecoderState",value:function(t,n){var o=this,l=this.themeData;l.header,l.footer,Object.keys(t).map(function(d){switch(d){case"mute":document.getElementById("".concat(o.jSPlugin.id,"-icon-mute"))&&(console.log("mute"),t[d]?(document.getElementById("".concat(o.jSPlugin.id,"-icon-mute")).style.background=n,document.getElementById("".concat(o.jSPlugin.id,"-icon-mute")).style.border=" 1px solid ".concat(n),document.getElementById("icon-mute-path").style.fill="#ffffff"):(document.getElementById("".concat(o.jSPlugin.id,"-icon-mute")).style.background="#ffffff",document.getElementById("".concat(o.jSPlugin.id,"-icon-mute")).style.border="1px solid ".concat(n),document.getElementById("icon-mute-path").style.fill=n));break}o.decoderState.state=Object.assign(o.decoderState.state,t)})}},{key:"startAutoFocus",value:function(){var t=this,n=this.autoFocus;this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.autoFocusTimer=setTimeout(function(){document.getElementById("".concat(t.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.opacity=0,document.getElementById("".concat(t.jSPlugin.id,"-audioControls")).style.pointerEvents="none")},n*1e3)}},{key:"stopAutoFocus",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.opacity=1,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.pointerEvents="all"),this.autoFocusTimer&&clearTimeout(this.autoFocusTimer),this.startAutoFocus()}},{key:"toString",value:function(){return"".concat(this.coreX,"-").concat(this.coreY)}},{key:"editIcon",value:function(t,n,o){console.log("编辑组件",t,n,o);var l=this.themeData;console.log("themeData",this.themeData);var d=this.themeData[o].btnList,c=vr.findIndex(d,function(p){return p.iconId===t}),E=d[c];switch(n){case"delete":if(t==="rec"){if(vr.findIndex(d,function(p){return p.iconId==="cloudRec"&&p.isrender==1})===-1)return this.jSPlugin.Message&&this.jSPlugin.Message.default("必须选中一种存储介质"),!1}else if(t==="cloudRec"&&vr.findIndex(d,function(p){return p.iconId==="rec"&&p.isrender==1})===-1)return this.jSPlugin.Message&&this.jSPlugin.Message.default("必须选中一种存储介质"),!1;d[c].isrender=0;break;case"right":for(var C=-1,y=c+1;y<d.length;y++)if(d[y].part===d[c].part&&d[y].isrender==1){C=y;break}C!==-1&&(d[c]=d[C],d[C]=E);break;case"left":for(var w=-1,g=c-1;g>=0;g--)if(d[g].part===d[c].part&&d[g].isrender==1){w=g;break}w!==-1&&(d[c]=d[w],d[w]=E);break}console.log("new btnList",d),l[o].btnList=d,this.changeTheme(l)}},{key:"countTime",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this;if(!document.getElementById(this.jSPlugin.id+"time-area")){var l=document.createElement("div");l.id=this.jSPlugin.id+"time-area",l.className="time-area",l.innerHTML='<span class="dot"></span><span class="value">00:00</span>',document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).appendChild(l)}if(this.countTimer&&clearInterval(this.countTimer),t==="add"){var d=n;document.getElementById(o.jSPlugin.id+"time-area").style.display="flex",this.countTimer=setInterval(function(){++d,document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML=c(d)},1e3)}else t==="destroy"&&(this.countTimer&&clearInterval(this.countTimer),this.countTimer=void 0,document.getElementById(o.jSPlugin.id+"time-area")&&(document.getElementById(o.jSPlugin.id+"time-area").children[1].innerHTML="00:00",document.getElementById(o.jSPlugin.id+"time-area").style.display="none"));function c(E){var C=parseInt(E),y=0,w=0,g="00",p="00",te="00";return C>59&&(y=parseInt(C/60),C=parseInt(C%60),y>59&&(w=parseInt(y/60),y=parseInt(y%60))),g=parseInt(C)>9?parseInt(C):"0"+parseInt(C),p=parseInt(y)>9?parseInt(y):"0"+parseInt(y),te=parseInt(w)>9?parseInt(w):"0"+parseInt(w),w>0?te+":"+p+":"+g:y>0?p+":"+g:"00:"+g}}},{key:"editStart",value:function(t){var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-audioControls-onCall")),l=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));l&&l.setAttribute("class","header-controls themeEditing"),n&&n.setAttribute("class","footer-controls themeEditing"),o&&o.setAttribute("class","footer-controls themeEditing"),this.setDecoderState({isEditing:!0})}},{key:"editEnd",value:function(t){var n=document.getElementById("".concat(this.jSPlugin.id,"-audioControls")),o=document.getElementById("".concat(this.jSPlugin.id,"-headControl"));o&&o.setAttribute("class","header-controls"),n&&n.setAttribute("class","footer-controls"),this.setDecoderState({isEditing:!1})}},{key:"setDisabled",value:function(t){}},{key:"getDeviceInfo",value:function(){var t=this,n=this.videoWidth/1024||1,o=function(d){d.code==200&&d.data&&(d.data.isEncrypt&&setTimeout(function(){t.jSPlugin.pluginStatus.loadingClear(),t.jSPlugin.pluginStatus.loadingSetText({text:"视频已加密",color:"#fff"})},50),document.getElementById("".concat(t.jSPlugin.id,"-deviceCategory-content"))&&(document.getElementById("".concat(t.jSPlugin.id,"-deviceCategory-content")).style.maxWidth="100%",document.getElementById("".concat(t.jSPlugin.id,"-deviceCategory-content")).style.overflow="hidden",document.getElementById("".concat(t.jSPlugin.id,"-deviceCategory-content")).style.textOverflow="ellipsis",document.getElementById("".concat(t.jSPlugin.id,"-deviceCategory-content")).style.whiteSpace="nowrap",document.getElementById("".concat(t.jSPlugin.id,"-deviceCategory-content")).innerHTML='<span style="font-size: '.concat(32*n,'px;display: block">有人按门铃</span><span style="font-size: ').concat(24*n,"px;padding-top: ").concat(16*n,'px;display: block;">').concat(d.data.category,"</span>")))};Ca(this.jSPlugin.env.domain+"/api/lapp/device/info","POST",{accessToken:this.jSPlugin.accessToken,deviceSerial:pn(this.jSPlugin.url).deviceSerial},"",o)}}]),Z}(),ff=function(){function Z(m){En(this,Z),this.jSPlugin=m;var t=window["EZUIKIT_TIMER_INTERVAL_".concat(m.id)];t&&Object.keys(t).length>0&&this.resetTimer(),window["EZUIKIT_TIMER_INTERVAL_".concat(m.id)]={}}return Rn(Z,[{key:"createInterval",value:function(t,n,o){var l=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];l[t]=setInterval(n,o)}},{key:"clearTimer",value:function(t){var n=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];n[t]&&(clearInterval(n[t]),delete n[t])}},{key:"resetTimer",value:function(){var t=window["EZUIKIT_TIMER_INTERVAL_".concat(this.jSPlugin.id)];for(var n in t)clearInterval(t[n]),delete t[n]}}]),Z}(),hf=Rn(function Z(m){var t=this;En(this,Z),ln(this,"initMap",function(){var n=t,o=t.videoWidth,l=t.videoHeight;if(document.getElementById("".concat(t.jSPlugin.id,"-miniRecbox")))document.getElementById("".concat(t.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(t.jSPlugin.id,"-miniRecbox"))),t.initMap();else{var d=document.createElement("div");d.id="".concat(t.jSPlugin.id,"-miniRecbox"),d.style=";position: absolute; bottom:96px;right:".concat(t.jSPlugin.inspectVideoWidth,"px;"),d.innerHTML='<div  id="'.concat(t.jSPlugin.id,`-mapbox" style="
        width: `).concat(o*.3333,`px;
        height: `).concat(l*.3333,`px;
      "></div>`),document.getElementById("".concat(t.jSPlugin.id,"-wrap")).insertBefore(d,document.getElementById("".concat(t.jSPlugin.id,"-ez-iframe-footer-container"))),n.map=n.loadMap("".concat(t.jSPlugin.id,"-mapbox"))}return n.map}),ln(this,"loadMap",function(n){var o=new BMapGL.Map(n);return o.centerAndZoom(new BMapGL.Point(116.297611,40.047363),15),o.enableScrollWheelZoom(!0),o}),ln(this,"createCircle",function(n,o,l,d){var c=new BMapGL.Point(n,o),E=new BMapGL.Marker(c,{title:d});if(t.map.addOverlay(E),l!=0){var C=new BMapGL.Circle(new BMapGL.Point(n,o),l,{strokeColor:"#ff4d4f",strokeWeight:4,strokeOpacity:1,strokeStyle:"dashed",fillOpacity:0});t.map.addOverlay(C)}}),ln(this,"createInspectPoints",function(n){n.map(function(o){t.createCircle(o.longitude,o.latitude,o.radius,o.inspectPointName)})}),ln(this,"createPolygon",function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#407AFF",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"solid",d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:4,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"407AFF",C=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,y=[],w=n.split(";");w.map(function(g){var p=g.split(",");y.push(new BMapGL.Point(p[0],p[1]))}),t.inspectRange=new BMapGL.Polygon(y,{strokeColor:o,strokeWeight:d,strokeOpacity:c,strokeStyle:l,fillOpacity:C,fillColor:E}),t.map.addOverlay(t.inspectRange)}),ln(this,"createTrack",function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"#18C796",d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"solid",c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4,E=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1,C=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:0,w=arguments.length>8&&arguments[8]!==void 0?arguments[8]:500,g=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,p=arguments.length>10&&arguments[10]!==void 0?arguments[10]:!1,te=[];if(n.map(function(we){var Ve=!1;t.currentTrack.length>0&&t.currentTrack.map(function(ue){ue.longitude===we.longitude&&ue.latitude===we.latitude&&ue.reportTime===we.reportTime&&(Ve=!0)}),Ve||(te.length==0&&t.currentTrack.length>0&&te.push(new BMapGL.Point(t.currentTrack[t.currentTrack.length-1].longitude,t.currentTrack[t.currentTrack.length-1].latitude)),te.push(new BMapGL.Point(we.longitude,we.latitude)))}),te.length!=0){var ae=new BMapGL.Polyline(te,{strokeColor:l,strokeWeight:c,strokeOpacity:E,strokeStyle:d,fillOpacity:C});if(o?(t.map.addOverlay(ae),t.map.centerAndZoom(te[te.length-1],15)):(t.trackAni=new BMapGLLib.TrackAnimation(t.map,ae,{overallView:p,tilt:y,duration:w,delay:g}),t.trackAni.start()),t.currentTrack=n,t.currentTrack.length>0&&t.currentTrack.length>0){var de=new BMapGL.Point(t.currentTrack[0].longitude,t.currentTrack[0].latitude);if(t.startPoint=new BMapGL.Marker(de,{icon:new BMapGL.Icon("".concat(t.jSPlugin.staticPath,"/imgs/start.png"),new BMapGL.Size(32,47)),offset:new BMapGL.Size(0,-17)}),t.map.addOverlay(t.startPoint),t.currentTrack.length==1)return;var ie=new BMapGL.Point(t.currentTrack[t.currentTrack.length-1].longitude,t.currentTrack[t.currentTrack.length-1].latitude);t.endPoint&&t.map.removeOverlay(t.endPoint),setTimeout(function(){t.endPoint=new BMapGL.Marker(ie,{icon:new BMapGL.Icon("".concat(t.jSPlugin.staticPath,"/imgs/end.png"),new BMapGL.Size(30,30))}),t.map.addOverlay(t.endPoint)},o?0:w)}}}),ln(this,"centerToTrack",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;t.currentTrack.length>0&&(t.currentTrack.length==1?t.map.centerAndZoom(new BMapGL.Point(t.currentTrack[0].longitude,t.currentTrack[0].latitude),n):t.map.centerAndZoom(new BMapGL.Point(t.currentTrack[t.currentTrack.length-1].longitude,t.currentTrack[t.currentTrack.length-1].latitude),n))}),this.jSPlugin=m,this.videoWidth=m.width,this.videoHeight=m.height,this.toastCustom=new Ka(m,!1),this.currentTrack=[],this.startPoint=null,this.endPoint=null,this.trackAni=null,this.inspectRange=null,this.map=this.initMap()}),xf=Rn(function Z(m){var t=this;En(this,Z),ln(this,"init",function(){var n=t;if(t.videoWidth+290,t.videoHeight+170,document.getElementById("".concat(t.jSPlugin.id,"-inspect-global-box")))document.getElementById("".concat(t.jSPlugin.id,"-inspect-global-box"))&&document.getElementById("".concat(t.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(t.jSPlugin.id,"-inspect-global-box"))),n.init();else{var o=document.createElement("div");o.id="".concat(t.jSPlugin.id,"-inspect-global-box"),o.style=";position: absolute; left:0; top: 0; width: 100%; height: 100%; z-index: 10000; background: #fff;",o.innerHTML='<div id="'.concat(t.jSPlugin.id,`-inspect-loading-box" style="
        overflow: auto;
        box-sizing: border-box;
        font-size: 14px;
        color: #595959;
        line-height: 24px;
        font-weight: bold;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
      ">
      <div>
      <div style="text-align:center;"><div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div></div>
      <div style="color: #595959; font-size:14px; font-weight: 400; text-align: center;">加载中…</div>
      </div></div>
      `),document.getElementById("".concat(t.jSPlugin.id,"-wrap")).appendChild(o)}}),ln(this,"deviceErrorInfo",function(n,o){var l={tips:"",refreshBtn:"",refreshShow:!1},d=Object.assign(l,n);if(document.getElementById("".concat(t.jSPlugin.id,"-no-inspect-box")))document.getElementById("".concat(t.jSPlugin.id,"-no-inspect-box"))&&document.getElementById("".concat(t.jSPlugin.id,"-inspect-global-box")).removeChild(document.getElementById("".concat(t.jSPlugin.id,"-no-inspect-box"))),t.deviceErrorInfo(n,o);else{t.videoHeight+170;var c=document.createElement("div");c.id="".concat(t.jSPlugin.id,"-no-inspect-box"),c.style="width:100%;height:100%; background: #ffffff; display: flex; justify-content: center; align-items: center",c.innerHTML=`<div style="
        overflow: auto;
        box-sizing: border-box;
        font-size: 14px;
        color: #595959;
        text-align: center;
      ">
      <div style="text-align:center; height: 21px;">
      <svg t="1689074472491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7172" xmlns:xlink="http://www.w3.org/1999/xlink" width="21" height="21"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z" fill="#FF4D4F" p-id="7173"></path></svg>
      </div>
      <div style="color: #595959; font-size:14px; margin: 5px 0 16px;font-weight: 400; text-align: center;">`.concat(d.tips,`</div>
      <button id="`).concat(t.jSPlugin.id,'-inspect-device-status-refresh" style="display: ').concat(d.refreshShow?"block":"none",';  width: 80px; margin: 0 auto;" type="button" class="ezuikit-btn ezuikit-btn-primary"><span>').concat(d.refreshBtn,`</span></button>
      </div>
      `),document.getElementById("".concat(t.jSPlugin.id,"-inspect-global-box")).appendChild(c),document.getElementById("".concat(t.jSPlugin.id,"-inspect-device-status-refresh")).addEventListener("click",function(){o&&o()})}}),ln(this,"globalContainerToggle",function(n,o){document.getElementById(n)&&(document.getElementById(n).style.display=o?"flex":"none")}),this.jSPlugin=m,this.videoWidth=m.width,this.videoHeight=m.height,this.toastCustom=new Ka(m,!1),this.init()}),Jr=function(){function Z(m){En(this,Z),this.timer=null;var t={wrapNode:document.body,time:2e3,content:"",type:"info",center:!1,top:8};this.params=gr(gr({},t),m),this.init()}return Rn(Z,[{key:"init",value:function(){var t=this;this.timer=null;var n=this.params,o=n.wrapNode,l=n.content,d=n.time,c=n.type,E=n.center,C=n.top;this.wrapNode=o;var y=document.createElement("div");y.setAttribute("class","ezuikit-message"),E?y.setAttribute("style","top: 50%; transform: translateY(-50%);"):y.setAttribute("style","top: ".concat(C||0,"px;")),this.wrapNode.appendChild(y),this.initMessageContent(c,l,y),d!==0&&(this.timer=setTimeout(function(){t.wrapNode.removeChild(y)},d||2e3))}},{key:"initMessageContent",value:function(t,n,o){var l=document.createElement("div");l.setAttribute("class","ezuikit-message-notice"),l.innerHTML=`
			<div class="ezuikit-message-notice-content">
				<div class="ezuikit-message-custom-content ezuikit-message-`.concat(t,`">
					<span role="img" aria-label="check-circle" class="ezdicon ezdicon-check-circle">
						`).concat(t==="warning"?'<svg fill="currentColor" t="1691567271942" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z"></path></svg>':"",`
						`).concat(t==="info"?'<svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>':"",`
						`).concat(t==="error"?'<svg fill="currentColor" t="1691567308585" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m165.376 618.24l-65.92-0.32L512 563.392l-99.328 118.4-66.048 0.32a7.936 7.936 0 0 1-8-8c0-1.92 0.64-3.712 1.92-5.184L470.528 513.92 340.48 359.04a8 8 0 0 1 6.08-13.184l66.112 0.256L512 464.576l99.328-118.4 65.92-0.256c4.48 0 8.064 3.456 8.064 8a8.32 8.32 0 0 1-1.92 5.12l-129.92 154.944 130.048 155.008a8 8 0 0 1-6.08 13.184z"></path></svg>':"",`
						`).concat(t==="success"?'<svg fill="currentColor" viewBox="64 64 896 896" focusable="false" data-icon="check-circle" width="1em" height="1em" aria-hidden="true"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"></path></svg>':"",`
					</span>
					<span>`).concat(n,`</span>
				</div>
			</div>
			`),o.appendChild(l)}}]),Z}(),Yl=function(){function Z(m){En(this,Z);var t={id:"",width:"100%",height:"100%",preview:!0,showIcon:!0,src:"",alt:"",fallback:"https://img.ys7.com/group32/M00/81/9D/CtxIA2HnrGyADm_jAAAFfWjIDJs811.png"};this.params=gr(gr({},t),m),this.id=Math.random().toString(36).substr(2),this.init()}return Rn(Z,[{key:"init",value:function(){var t=this.params,n=t.id,o=t.width,l=t.height,d=t.preview;if(document.getElementById(n)){var c=document.createElement("div");c.setAttribute("class","ezuikit-image"),c.setAttribute("style","width:".concat(o,";height:").concat(l,";")),document.getElementById(n).appendChild(c),this.initImage(c),d&&this.initPreview(c)}}},{key:"previewImg",value:function(){var t=this.params,n=t.src,o=t.alt,l=t.fallback,d=document.createElement("div");d.setAttribute("id",this.id+"-preview"),d.setAttribute("class","ezuikit-image-preview"),d.innerHTML=`
			<div class="ezuikit-image-preview-mask"></div>
			<div class="ezuikit-image-preview-img-wrapper">
				<div class="ezuikit-image-preview-operations" id="`.concat(this.id,`-ezuikit-image-preview-operations">
					<div class="ezuikit-image-preview-operations-operation">
						<span role="img" aria-label="close" class="anticon anticon-close ezuikit-image-preview-operations-icon">
							<svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg>
						</span>
					</div>
				</div>
				<div class="ezuikit-image-preview-wrap">
					<div class="ezuikit-image-preview-img-main"></div>
				</div>
			</div>
			`);var c=document.createElement("img");c.setAttribute("class","ezuikit-image-preview-img"),c.setAttribute("alt",o),c.setAttribute("src",n),c.addEventListener("error",function(){c.setAttribute("src",l)}),document.body.appendChild(d),d.querySelector(".ezuikit-image-preview-img-main").appendChild(c),document.getElementById(this.id+"-ezuikit-image-preview-operations").addEventListener("click",function(){document.body.removeChild(d)})}},{key:"initImage",value:function(t){var n=this.params,o=n.src,l=n.alt,d=n.fallback,c=document.createElement("img");c.setAttribute("class","ezuikit-image-img"),c.setAttribute("alt",l),c.setAttribute("src",o),c.addEventListener("error",function(){c.setAttribute("src",d)}),t.appendChild(c)}},{key:"initPreview",value:function(t){var n=this,o=this.params.showIcon,l=document.createElement("div");l.setAttribute("class","ezuikit-image-mask"),o&&(l.innerHTML=`
				<div class="ezuikit-image-mask-info">
					<span class="ezuikit-image-anticon-eye">
						<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em"  aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>
						预览
					</span>
				</div>
				`),t.appendChild(l),t.onclick=function(){n.previewImg()}}}]),Z}(),pf=function(){function Z(m){En(this,Z);var t={id:"",parentNodeId:"",title:"",content:"",placement:"top",cancelText:"取消",arrowPointAtCenter:!1,okText:"确定",onCancel:function(){},onConfirm:function(){}};this.params=gr(gr({},t),m),this.initState=!1,this.init(m)}return Rn(Z,[{key:"init",value:function(){var t=this,n=this.params,o=n.id,l=n.content,d=n.placement,c=n.title,E=document.getElementById(o);if(E){var C=document.createElement("div");if(C.setAttribute("id",o+"-popover"),C.setAttribute("class","ezuikit-popover"),C.setAttribute("style","display:none;"),C.innerHTML=`
					<div class="ezuikit-popover-arrow">
						<span class="ezuikit-popover-arrow-content"></span>
					</div>
					<div class="ezuikit-popover-inner">
						`.concat(c?'<div class="ezuikit-popover-title">'.concat(c,"</div>"):"",`
						<div class="ezuikit-popover-inner-content">`).concat(l,`</div>
					</div>
				`),!document.getElementById(o+"-popover")){var y=document.body;this.params.parentNodeId&&(y=document.getElementById(this.params.parentNodeId)),y.appendChild(C),this.renderPopover(C,E,d)}document.body.addEventListener("click",function(w){t.addEventListenerFn(w)})}}},{key:"addEventListenerFn",value:function(t){var n=this.params.id,o=document.getElementById(n),l=document.getElementById(n+"-popover");o&&!(t.target===o||o.contains(t.target))&&l&&!(t.target===l||l.contains(t.target))&&this.hidePopover()}},{key:"hidePopover",value:function(){var t=this.params.id,n=document.getElementById(t+"-popover");n&&document.body.removeChild(n)}},{key:"renderPopover",value:function(t,n,o,l,d){t.style.display="block";var c=n.getBoundingClientRect(),E=c.top,C=c.left,y=c.width,w=c.height,g=t.getBoundingClientRect(),p=g.width,te=g.height;l&&(p=l),d&&(te=d);var ae=document.body;this.params.parentNodeId&&(ae=document.getElementById(this.params.parentNodeId));var de=this.params.arrowPointAtCenter,ie=0,we=0,Ve=t.getElementsByClassName("ezuikit-popover-arrow")[0],ue=Ve.getBoundingClientRect(),x=ue.width,O=ue.height;if(de){var ne=0,Q=0;switch(o){case"top":ne=p/2,Q=te;break;case"bottom":ne=p/2,Q=0;break;case"left":ne=p,Q=te/2;break;case"right":ne=0,Q=te/2;break;case"topLeft":ne=(y-x)/2,Q=te;break;case"topRight":ne=p-(y+x)/2,Q=te;break;case"bottomLeft":ne=(y-x)/2,Q=0;break;case"bottomRight":ne=p-(y+x)/2,Q=0;break;case"leftTop":ne=p,Q=(w-O)/2;break;case"leftBottom":ne=p,Q=te-(w+O)/2;break;case"rightTop":ne=0,Q=(w-10)/2;break;case"rightBottom":ne=0,Q=te-(w+O)/2;break;default:ne=p/2,Q=te;break}Ve.style.left=ne+"px",Ve.style.top=Q+"px"}switch(o){case"top":ie=-(te+O),we=(y-p)/2,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-top");break;case"bottom":ie=w-O/2,we=(y-p)/2,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottom");break;case"left":ie=(w-te)/2,we=-(p+x/2),t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-left");break;case"right":ie=(w-te)/2,we=y-x/2,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-right");break;case"topLeft":ie=-(te+O),we=0,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-topLeft");break;case"topRight":ie=-(te+O),we=y-p,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-topRight");break;case"bottomLeft":ie=w-O/2,we=0,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottomLeft");break;case"bottomRight":ie=w-O/2,we=y-p,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-bottomRight");break;case"leftTop":ie=0,we=-(p+x/2),t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-leftTop");break;case"leftBottom":ie=w-te,we=-(p+x/2),t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-leftBottom");break;case"rightTop":ie=0,we=y-x/2,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-rightTop");break;case"rightBottom":ie=w-te,we=y-x/2,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-rightBottom");break;default:ie=-te,we=(y-p)/2,t.setAttribute("class","ezuikit-popover ezuikit-popover-placement-top");break}var ye=document.documentElement.scrollTop||document.body.scrollTop,se=document.documentElement.scrollLeft||document.body.scrollLeft;t.style.top=E+ye+ie+"px",t.style.left=C+se+we+"px";var Ze=t.getBoundingClientRect(),Qe=ae===document.body?{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}:ae.getBoundingClientRect(),M=o;Ze.left<Qe.left&&(M=M.replace("Right","Left"),M=M.replace("right","left")),Ze.right>Qe.right&&(M=M.replace("Left","Right"),M=M.replace("left","right")),Ze.top<Qe.top&&(M=M.replace("Top","Bottom"),M=M.replace("top","bottom")),Ze.bottom>Qe.bottom&&(M=M.replace("Bottom","Top"),M=M.replace("bottom","top")),M!==o&&this.renderPopover(t,n,M,p,te)}}]),Z}(),l0=function(){function Z(m){En(this,Z);var t={id:"",content:"",placement:"top",cancelText:"取消",arrowPointAtCenter:!1,okText:"确定",onCancel:function(){},onConfirm:function(){}};this.params=gr(gr({},t),m),this.PopconfirmDom=null,this.init(m)}return Rn(Z,[{key:"init",value:function(){var t=this,n=this.params,o=n.content,l=n.cancelText,d=n.okText,c=n.onCancel,E=n.onConfirm,C=document.createElement("div");C.innerHTML=`
      <div class="ezuikit-confirm">
        <div class="ezuikit-confirm-content">
					<span class="ezuikit-confirm-icon">
          	<svg fill="currentColor" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24" height="24"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z"></path></svg>
          </span>
					<span class="ezuikit-confirm-content-label">`.concat(o,`</span>
        </div>
        <div class="ezuikit-popover-buttons"></div>
      </div>
      `);var y=document.createElement("button");y.className="ezuikit-btn ezuikit-cancel-btn",y.innerText=l;var w=document.createElement("button");return w.className="ezuikit-btn ezuikit-ok-btn ezuikit-btn-primary",w.innerText=d,C.querySelector(".ezuikit-popover-buttons").appendChild(y),C.querySelector(".ezuikit-popover-buttons").appendChild(w),this.PopconfirmDom=new pf(gr(gr({},this.params),{},{content:C.innerHTML})),document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-cancel-btn")&&(document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-cancel-btn").onclick=function(){c?c():t.hide()}),document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-ok-btn")&&(document.getElementById("".concat(this.params.id,"-popover")).querySelector(".ezuikit-ok-btn").onclick=function(){E?E():t.hide()}),this.PopconfirmDom}},{key:"hide",value:function(){this.PopconfirmDom.hidePopover()}}]),Z}(),Xl=function(){function Z(m){En(this,Z);var t={id:"",width:"100%",height:"100%",preview:!0,poster:"",fallback:"https://img.ys7.com/group32/M00/81/9D/CtxIA2HnrGyADm_jAAAFfWjIDJs811.png",src:""};this.params=gr(gr({},t),m),this.id=Math.random().toString(36).substr(2),this.init()}return Rn(Z,[{key:"init",value:function(){var t=this.params,n=t.id,o=t.width,l=t.height,d=t.preview;if(document.getElementById(n)){var c=document.createElement("div");c.setAttribute("class","ezuikit-video"),c.setAttribute("style","width:".concat(o,";height:").concat(l,";")),document.getElementById(n).appendChild(c),this.initVideo(c),d&&this.initPreview(c)}}},{key:"previewVideo",value:function(){var t=this.params.src,n=document.createElement("div");n.setAttribute("id",this.id+"-preview"),n.setAttribute("class","ezuikit-image-video"),n.innerHTML=`
			<div class="ezuikit-video-preview-mask"></div>
			<div class="ezuikit-video-preview-img-wrapper">
				<div class="ezuikit-video-preview-operations" id="`.concat(this.id,`-ezuikit-video-preview-operations">
					<div class="ezuikit-video-preview-operations-operation">
						<span role="img" aria-label="close" class="anticon anticon-close ezuikit-video-preview-operations-icon">
							<svg viewBox="64 64 896 896" focusable="false" data-icon="close" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"></path></svg>
						</span>
					</div>
				</div>
				<div class="ezuikit-video-preview-wrap">
					<div class="ezuikit-video-preview-img-wrapper">
						<video
							class="ezuikit-video-preview-img custom-controls"
							src="`).concat(t,`"
							autoplay 
							controls 
							controlslist="nodownload noremoteplayback noplaybackrate"
							disablePictureInPicture
							disableRemotePlayback
						/>
					</div>
				</div>
			</div>
			`),document.body.appendChild(n),document.getElementById(this.id+"-ezuikit-video-preview-operations").addEventListener("click",function(){document.body.removeChild(n)})}},{key:"initVideo",value:function(t){var n=this.params,o=n.poster,l=n.fallback,d=document.createElement("img");d.setAttribute("class","ezuikit-video-img"),d.setAttribute("src",o),d.addEventListener("error",function(){d.setAttribute("src",l)}),t.appendChild(d)}},{key:"initPreview",value:function(t){var n=this,o=document.createElement("div");o.setAttribute("class","ezuikit-video-mask"),o.innerHTML=`
			<div class="ezuikit-video-mask-info">
				<span class="ezuikit-video-anticon-eye">
					<svg width="28" height="28" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 28 28" style="enable-background:new 0 0 28 28;" xml:space="preserve">
					<circle cx="14" cy="14" r="14" style="opacity:0.7;fill-rule:evenodd;clip-rule:evenodd;enable-background:new;"/>
					<path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M18.3,15.2l-5.3,3.3c-0.7,0.4-1.6,0.2-2.1-0.5c-0.1-0.2-0.2-0.5-0.2-0.8v-6.6
						c0-0.8,0.7-1.5,1.5-1.5c0.3,0,0.6,0.1,0.8,0.2l5.3,3.3c0.7,0.4,0.9,1.4,0.5,2.1C18.6,14.9,18.4,15,18.3,15.2z"/>
					</svg>
				</span>
			</div>
			`,t.appendChild(o),t.onclick=function(){n.previewVideo()}}}]),Z}(),mf=function(m,t,n){var o=function(y){t&&t(y)},l=function(y){n&&n(y)},d={accessToken:m.accessToken,deviceSerial:pn(m.url).deviceSerial},c={"Content-Type":"application/x-www-form-urlencoded"},E="".concat(m.env.domain,"/api/service/devicekit/bodycamera/inspect/detail/latest");Da(E,"GET",d,o,l,c)},ql=function(m,t,n,o){var l=function(w){n&&n(w)},d=function(w){o&&o(w)},c={accessToken:m.accessToken,inspectRecordId:t,page:0},E={"Content-Type":"application/x-www-form-urlencoded"},C="".concat(m.env.domain,"/api/service/devicekit/bodycamera/device/trace");Da(C,"GET",c,l,d,E)},_f=function(m,t,n){var o=function(y){t&&t(y)},l=function(y){n&&n(y)},d={accessToken:m.accessToken,deviceSerial:pn(m.url).deviceSerial},c={"Content-Type":"application/x-www-form-urlencoded"},E="".concat(m.env.domain,"/api/service/devicekit/bodycamera");Da(E,"GET",d,o,l,c)},gf=function(m,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:30,l=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,c=function(p){l&&l(p)},E=function(p){d&&d(p)},C={accessToken:m.accessToken,inspectRecordId:t,pageStart:n,pageSize:o},y={"Content-Type":"application/x-www-form-urlencoded"},w="".concat(m.env.domain,"/api/service/devicekit/bodycamera/inspect/event/page");Da(w,"GET",C,c,E,y)},Jl=function(m,t,n,o){var l=function(w){n&&n(w)},d=function(w){o&&o(w)},c={accessToken:m.accessToken,deviceSerial:pn(m.url).deviceSerial,validateCode:pn(m.url).validCode,channelNo:pn(m.url).channelNo,evidenceFileType:t},E={"Content-Type":"application/x-www-form-urlencoded"},C="".concat(m.env.domain,"/api/service/devicekit/common/file/evidence");Da(C,"POST",c,l,d,E)},vf=function(m,t,n,o){var l=function(w){n&&n(w)},d=function(w){o&&o(w)},c={accessToken:m.accessToken,taskId:t},E={"Content-Type":"application/x-www-form-urlencoded"},C="".concat(m.env.domain,"/api/v3/open/cloud/video/frame/stop");Da(C,"POST",c,l,d,E)},Kl=function(m,t,n,o){var l=function(w){n&&n(w)},d=function(w){o&&o(w)},c={accessToken:m.accessToken,taskId:t},E={"Content-Type":"application/x-www-form-urlencoded"},C="".concat(m.env.domain,"/api/service/devicekit/opencloud/task/info");Da(C,"GET",c,l,d,E)},yf=function(m,t,n,o){var l={accessToken:m.accessToken,inspectRecordId:"",eventType:"",evidenceFileId:"",eventTime:"",eventBeginTime:"",eventEndTime:"",depositaryOfficer:"",eventRemark:"",evidenceFileType:""},d=function(g){n&&n(g)},c=function(g){o&&o(g)},E=Object.assign(l,t),C={"Content-Type":"application/x-www-form-urlencoded"},y="".concat(m.env.domain,"/api/service/devicekit/bodycamera/inspect/event");Da(y,"POST",E,d,c,C)},bf=function(m,t,n,o){var l={accessToken:m.accessToken,inspectRecordId:"",inspectEventId:"",eventType:"",eventRemark:""},d=function(g){n&&n(g)},c=function(g){o&&o(g)},E=Object.assign(l,t),C={"Content-Type":"application/x-www-form-urlencoded"},y="".concat(m.env.domain,"/api/service/devicekit/bodycamera/inspect/event/update");Da(y,"POST",E,d,c,C)},Sf=function(m,t,n,o){var l={accessToken:m.accessToken,inspectEventId:""},d=function(g){n&&n(g)},c=function(g){o&&o(g)},E=Object.assign(l,t),C={"Content-Type":"application/x-www-form-urlencoded"},y="".concat(m.env.domain,"/api/service/devicekit/bodycamera/inspect/event/delete");Da(y,"POST",E,d,c,C)};function Cf(Z){var m=parseInt(Z%864e5/36e5),t=parseInt(Z%(1e3*60*60)/(1e3*60)),n=parseInt(Z%(1e3*60)/1e3);return(m<10?"0".concat(m):m)+":"+(t<10?"0".concat(t):t)+":"+(n<10?"0".concat(n):n)}var d0=function(){function Z(m){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){};En(this,Z),this.jSPlugin=m,this.currentEventInfo=t,this.inspectInfo=m.Theme.inspect.inspectInfo,this.type=o,this.timer=n,this.startTime=1e3,this.videoRecordingStatus=!0,this.saveSuccessCallback=l,this.init()}return Rn(Z,[{key:"init",value:function(){this.renderEventDetail(),this.eventDetailDomEvent()}},{key:"show",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-wrap")).setAttribute("class","inspect-event-detail-wrap show")}},{key:"hide",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-wrap")).setAttribute("class","inspect-event-detail-wrap"),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-box")).innerHTML=""}},{key:"validationEventTag",value:function(){var t=document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).value;return t.length==0?(document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).style.display="block",document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).innerHTML="请输入事件标签",document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).setAttribute("class","ezuikit-input input-has-error"),!1):(document.getElementById("".concat(this.jSPlugin.id,"-event-tag-error")).style.display="none",document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).setAttribute("class","ezuikit-input"),!0)}},{key:"renderVideo",value:function(t,n,o){var l=this;if(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML="",t===1||t===2){if(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML=`
      <div class="video-stroage-exceptional-status-tips-wrap" style="background:url(`.concat(this.jSPlugin.staticPath,`/imgs/bg.svg) no-repeat 100%/cover">
        <div class="video-stroage-exceptional-status-icon">
        <div type="default" class="ezuikit-spin ezuikit-spin-sm ezuikit-spin-spinning ezuikit-spin-dot-white"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>
        </div>
        <span class="video-stroage-exceptional-status-tips">视频正在存储中…</span>
      </div>
     `),this.type!==1){var d=this.currentEventInfo.evidenceId;this.timer.clearTimer("videoRecordingStatusTimer"),this.timer.createInterval("videoRecordingStatusTimer",function(){Kl(l.jSPlugin,d,function(c){if(c.meta&&c.meta.code===200){var E=c.data,C=E.taskStatus,y=E.fileUrl,w=E.videoCoverPic,g=w||"".concat(l.jSPlugin.staticPath,"/imgs/bg.svg");l.renderVideo(C,g,y)}})},1e3)}}else t===4||t===5||t===6||t===7?(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview")).innerHTML=`
        <div class="video-stroage-exceptional-status-tips-wrap video-stroage-exceptional-status-tips-error" style="background:url(`.concat(this.jSPlugin.staticPath,`/imgs/bg.svg) no-repeat 100%/cover">
          <div class="video-stroage-exceptional-status-icon">
            <svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>
          </div>
          <span class="video-stroage-exceptional-status-tips">视频存储失败</span>
        </div>
       `),this.timer.clearTimer("videoRecordingStatusTimer")):(t===0||t===3)&&(new Xl({id:"".concat(this.jSPlugin.id,"-inspectEventDetail-videoPreview"),poster:n,fallback:"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"),src:o}),this.timer.clearTimer("videoRecordingStatusTimer"))}},{key:"renderEventDetail",value:function(){var t=this,n=this.currentEventInfo,o=n.evidenceFileType,l=n.fileUrl,d=n.taskStatus,c=n.videoCoverPic,E=document.createElement("div");E.setAttribute("class","inspectEventDetail");var C="";if(o===1?C=c||"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"):C=l||"".concat(this.jSPlugin.staticPath,"/imgs/bg.svg"),E.innerHTML=`
      <div class="inspectEventDetail-header">
        <div class="inspectEventDetail-back" id="`.concat(this.jSPlugin.id,`-inspectEventDetail-back">
          <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M605.888 137.344a6.4 6.4 0 0 1 1.472 4.032l0.64 70.784a6.4 6.4 0 0 1-2.368 5.056L281.6 480H876.8v64H279.744l325.376 264a6.4 6.4 0 0 1 2.368 4.928l0.128 69.632a6.4 6.4 0 0 1-10.432 4.992l-422.016-342.4a42.24 42.24 0 0 1-7.04-57.344l3.264-3.904 3.776-3.456 421.76-344a6.4 6.4 0 0 1 8.96 0.896z"></path></svg>
        </div>
        <div class="inspectEventDetail-type">`).concat(this.type===1?"编辑":"").concat(o===0?"图片存证":"视频存证",`</div>
      </div>
      <div class="inspectEventDetail-content" style="
        height: `).concat(document.getElementById("".concat(this.jSPlugin.id,"-wrap")).clientHeight-58-158,`px;
        overflow: auto;
      ">
        `).concat(o===0?`<div class="inspectEventDetail-content-img-box">
            <p class="inspectEventDetail-content-img-tips" style="display: `.concat(this.type==1?"none":"blcok",`;">图片已取证，请填写存证信息：</p>
            <div class="inspectEventDetail-content-img-detail" id="`).concat(this.jSPlugin.id,`-inspectEventDetail-picUrl"></div>
          </div>`):`<div class="inspectEventDetail-content-video-box">
            <div
              id="`.concat(this.jSPlugin.id,`-inspectEventDetail-content-video-timer"
              class="inspectEventDetail-content-video-timer"
              style="display: `).concat(this.type==1?"none":"flex",`;"
            >
              <div class="video-recording-time-wrap">
                <svg fill="currentColor" width="10" height="10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 10" style="enable-background:new 0 0 10 10;" xml:space="preserve"><circle class="st0" cx="5" cy="5" r="3"/><path class="st1" d="M5,10c-2.8,0-5-2.2-5-5c0-2.8,2.2-5,5-5s5,2.2,5,5C10,7.8,7.8,10,5,10z M5,0.5c-2.5,0-4.5,2-4.5,4.5c0,2.5,2,4.5,4.5,4.5s4.5-2,4.5-4.5C9.5,2.5,7.5,0.5,5,0.5z"/></svg>
                <div id="`).concat(this.jSPlugin.id,`-video-recording-time" class="video-recording-time">00:00:00</div>
              </div>
              <button id="`).concat(this.jSPlugin.id,`-video-recording-stop-btn" class="inspectEventDetail-stop-btn ezuikit-btn">
              <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>
              停止录制
              </button>
            </div>
            <div id="`).concat(this.jSPlugin.id,'-inspectEventDetail-content-video-info" class="inspectEventDetail-content-video-info" style="display: ').concat(this.type==1?"block":"none",`;">
              <p class="inspectEventDetail-content-video-tips" style="display: `).concat(this.type==1?"none":"blcok",`;">视频已取证：</p>
              <div class="inspectEventDetail-content-video-detail" id="`).concat(this.jSPlugin.id,`-inspectEventDetail-videoPreview"></div>
            </div>
          </div>`),`
        <div class="inspectEventDetail-content-info">
          <div class="inspectEventDetail-content-info-item">
            <div class="inspectEventDetail-content-info-item-title">事件时间：</div>
            <div id="`).concat(this.jSPlugin.id,`-inspectEventDetail-content-info-time" class="inspectEventDetail-content-info-item-value"></div>
          </div>
          <div class="inspectEventDetail-content-info-item">
            <div class="inspectEventDetail-content-info-item-title">存证人员：</div>
            <div class="inspectEventDetail-content-info-item-value">
              `).concat(this.type===1?this.currentEventInfo.depositaryOfficer?this.currentEventInfo.depositaryOfficer==="null"?"-":this.currentEventInfo.depositaryOfficer:"-":this.inspectInfo.inspectPerson?this.inspectInfo.inspectPerson==="null"?"-":this.inspectInfo.inspectPerson:"-",`
            </div>
          </div>
          <div class="inspectEventDetail-content-info-item">
            <div class="inspectEventDetail-content-info-item-title inspectEventDetail-content-info-item-title-required">事件标签：</div>
            <div class="ezuikit-form-item-control-input">
              <div class="ezuikit-form-item-control-input-content">
                <input
                  id="`).concat(this.jSPlugin.id,`-event-tag"
                  maxlength="32"
                  type="text"
                  autocomplete="off"
                  id="control-ref_note"
                  class="ezuikit-input"
                  placeholder="请输入事件标签"
                  value="`).concat(this.type===1&&this.currentEventInfo.eventType||"",`"
                />
              </div>
              <div class="ezuikit-form-item-explain ezuikit-form-item-explain-connected">
                <div id="`).concat(this.jSPlugin.id,`-event-tag-error" class="ezuikit-form-item-explain-error" style="display: none">请输入事件标签</div>
              </div>
            </div>
          </div>
          <div class="inspectEventDetail-content-info-item">
            <div class="inspectEventDetail-content-info-item-title">事件备注：</div>
            <div class="ezuikit-input-textarea ezuikit-input-textarea-show-count" data-count="`).concat(this.type===1&&this.currentEventInfo.eventRemark?this.currentEventInfo.eventRemark.length:0,` / 100">
              <textarea
              id="`).concat(this.jSPlugin.id,`-event-remark"
              maxlength="100"
              class="ezuikit-input"
              maxlength="100"
              placeholder="请输入事件备注"
              autocomplete="off"
              >`).concat(this.type===1&&this.currentEventInfo.eventRemark||"",`</textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="inspectEventDetail-footer">
        <button id="`).concat(this.jSPlugin.id,`-event-cancel" class="inspectEventDetail-footer-btn ezuikit-btn">取消</button>
        <button id="`).concat(this.jSPlugin.id,`-event-ok" class="inspectEventDetail-footer-btn ezuikit-btn ezuikit-btn-primary">保存</button>
      </div>
    `),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-detail-box")).appendChild(E),this.type===1?document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(o===1?this.currentEventInfo.eventBeginTime+" ~ "+this.currentEventInfo.eventEndTime:this.currentEventInfo.eventTime):(document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(new Date().Format("yyyy-MM-dd hh:mm:ss")).concat(o===1?" ~ -":""),o===1&&document.getElementById("".concat(this.jSPlugin.id,"-video-recording-time"))&&this.videoRecordingStatus&&(this.type===0&&document.getElementById("".concat(this.jSPlugin.id,"-event-ok")).setAttribute("disabled","disabled"),this.timer.createInterval("videoRecordingTimer",function(){t.startTime&&(document.getElementById("".concat(t.jSPlugin.id,"-video-recording-time")).innerHTML=Cf(t.startTime)),t.startTime+=1e3,t.startTime>t.jSPlugin.inspectRecordingDuration&&(document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).click(),t.timer&&t.timer.clearTimer("videoRecordingTimer"))},1e3))),o===1){var y=this.currentEventInfo&&this.currentEventInfo.fileUrl;this.renderVideo(d,C,y)}else new Yl({id:"".concat(this.jSPlugin.id,"-inspectEventDetail-picUrl"),src:C,fallback:"".concat(this.jSPlugin.staticPath,"/imgs/fallback.svg"),showIcon:!1});this.show()}},{key:"eventDetailDomEvent",value:function(){var t=this,n=this.currentEventInfo,o=n.evidenceFileType,l=n.evidenceId;document.getElementById("".concat(this.jSPlugin.id,"-event-cancel")).addEventListener("click",function(d){t.cancelPopover=new l0({id:"".concat(t.jSPlugin.id,"-event-cancel"),content:"确定要取消吗？".concat(t.type===1?"取消后编辑的内容将不会保存。":"取消后对应存证也将删除。"),placement:"topRight",arrowPointAtCenter:!0,onCancel:function(){t.cancelPopover.hide()},onConfirm:function(){o===1&&(t.videoRecordingStatus&&t.type===0&&(t.timer&&t.timer.clearTimer("videoRecordingTimer"),t.startTime=1e3,document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).click()),t.timer.clearTimer("videoRecordingStatusTimer")),t.cancelPopover.hide(),t.hide()}})}),document.getElementById("".concat(this.jSPlugin.id,"-event-ok")).addEventListener("click",function(){var d=t.validationEventTag();if(d){var c=t.currentEventInfo,E=c.evidenceFileType,C=c.evidenceId,y=t.inspectInfo,w=y.inspectRecordId,g=y.inspectPerson,p=document.getElementById("".concat(t.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML,te={inspectRecordId:w,depositaryOfficer:g,evidenceFileId:C,evidenceFileType:E,eventType:document.getElementById("".concat(t.jSPlugin.id,"-event-tag")).value,eventRemark:document.getElementById("".concat(t.jSPlugin.id,"-event-remark")).value};E===1&&(te.eventBeginTime=p.split("~")[0].trim(),te.eventEndTime=p.split("~")[1].trim(),t.timer.clearTimer("videoRecordingStatusTimer")),E===0&&(te.eventTime=p),t.type===1&&(te.inspectEventId=t.currentEventInfo.inspectEventId,delete te.depositaryOfficer,delete te.eventTime,delete te.eventBeginTime,delete te.eventEndTime,delete te.evidenceFileId,delete te.evidenceFileType,bf(t.jSPlugin,te,function(ae){ae.meta&&ae.meta.code===200?(t.hide(),t.saveSuccessCallback&&t.saveSuccessCallback({eventType:te.eventType,eventRemark:te.eventRemark})):new Jr({type:"error",content:"保存失败，".concat(ae.meta&&ae.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40})},function(){new Jr({type:"error",content:"保存失败，请稍后重试！",wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40})})),t.type===0&&yf(t.jSPlugin,te,function(ae){ae.meta&&ae.meta.code===200?(t.hide(),t.saveSuccessCallback&&t.saveSuccessCallback()):new Jr({type:"error",content:"保存失败，".concat(ae.meta&&ae.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40})},function(){new Jr({type:"error",content:"保存失败，请稍后重试！",wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40})})}}),document.getElementById("".concat(this.jSPlugin.id,"-inspectEventDetail-back")).addEventListener("click",function(){t.backPopover=new l0({id:"".concat(t.jSPlugin.id,"-inspectEventDetail-back"),content:"确定要返回吗？".concat(t.type===1?"返回后编辑的内容将不会保存。":"返回后对应存证也将删除。"),placement:"bottomRight",arrowPointAtCenter:!0,onCancel:function(){t.backPopover.hide()},onConfirm:function(){o===1&&(t.videoRecordingStatus&&t.type===0&&(t.timer&&t.timer.clearTimer("videoRecordingTimer"),t.startTime=1e3,document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).click()),t.timer.clearTimer("videoRecordingStatusTimer")),t.backPopover.hide(),t.hide()}})}),document.getElementById("".concat(this.jSPlugin.id,"-video-recording-stop-btn"))&&document.getElementById("".concat(this.jSPlugin.id,"-video-recording-stop-btn")).addEventListener("click",function(){document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn ezuikit-btn-loading"),document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block",vf(t.jSPlugin,l,function(d){document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn"))&&(document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn"),document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="none"),d.meta&&d.meta.code===200?Kl(t.jSPlugin,l,function(c){if(c.meta&&c.meta.code===200){var E=c.data,C=E.taskStatus,y=E.fileUrl,w=E.videoCoverPic;t.timer&&t.timer.clearTimer("videoRecordingTimer");var g=w||"".concat(t.jSPlugin.staticPath,"/imgs/bg.svg");t.renderVideo(C,g,y),document.getElementById("".concat(t.jSPlugin.id,"-inspectEventDetail-content-video-info")).style.display="block",document.getElementById("".concat(t.jSPlugin.id,"-inspectEventDetail-content-video-timer")).style.display="none";var p=document.getElementById("".concat(t.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML;document.getElementById("".concat(t.jSPlugin.id,"-inspectEventDetail-content-info-time")).innerHTML="".concat(p.split("~")[0]," ~ ").concat(new Date().Format("yyyy-MM-dd hh:mm:ss")),t.videoRecordingStatus=!1,document.getElementById("".concat(t.jSPlugin.id,"-event-ok")).removeAttribute("disabled")}}):new Jr({type:"error",content:"停止录制失败，请稍后重试！",wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40})},function(){document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn"))&&(document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).setAttribute("class","inspectEventDetail-stop-btn ezuikit-btn"),document.getElementById("".concat(t.jSPlugin.id,"-video-recording-stop-btn")).querySelector(".ezuikit-btn-loading-icon").style.display="none"),new Jr({type:"error",content:"停止录制失败，请稍后重试！",wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40})})}),document.getElementById("".concat(this.jSPlugin.id,"-event-tag")).addEventListener("input",function(){t.validationEventTag()}),document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("input",function(d){var c=d.target.value;d.target.parentNode.setAttribute("data-count","".concat(c.length," / 100"))}),document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("focus",function(d){d.target.parentNode.setAttribute("class","ezuikit-input-textarea ezuikit-input-textarea-show-count ezuikit-input-textarea-focus")}),document.getElementById("".concat(this.jSPlugin.id,"-event-remark")).addEventListener("blur",function(d){d.target.parentNode.setAttribute("class","ezuikit-input-textarea ezuikit-input-textarea-show-count")})}}]),Z}(),Tf=function(){function Z(m,t,n){var o=this;En(this,Z),ln(this,"hideDelEConfirm",function(){for(var l=0;l<o.delEConfirmList.length;l++)o.delEConfirmList[l].hide()}),ln(this,"initRender",function(){var l=o;if(document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")))document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box"))&&document.getElementById("".concat(o.jSPlugin.id,"-wrap")).removeChild(document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box"))),l.initRender();else{var d=document.createElement("div");d.id="".concat(o.jSPlugin.id,"-inspect-event-box"),d.setAttribute("class","inspect-event-box");var c=0;document.getElementById("".concat(o.jSPlugin.id,"-inspectInfoControl"))&&(c=document.getElementById("".concat(o.jSPlugin.id,"-inspectInfoControl")).clientHeight),d.style="background: #fff;position: absolute;right: 0;bottom: 0; top:".concat(c,"px;"),d.innerHTML=`
      <div id="`.concat(o.jSPlugin.id,`-inspect-event-list-box" style="
        width: 290px;
        height: 100%;
        overflow: hidden;
        padding: 0;
        box-sizing: border-box;
      ">
        <h1 style="
          font-size: 16px;
          color: #262626;
          line-height: 24px;
          font-weight: bold;
          margin: 16px 16px 0;
        ">巡检事件</h1>
        <div id="`).concat(o.jSPlugin.id,`-inspect-event-btn-wrap" style="
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 16px 16px;
        ">
          <div>
            <button
              id="`).concat(o.jSPlugin.id,`-inspect-event-img"
              style="min-width: 88px; margin: 0 auto;"
              type="button"
              class="ezuikit-btn ezuikit-btn-primary"
            >
            <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>
            图片存证
            </button>
            <button
              id="`).concat(o.jSPlugin.id,`-inspect-event-video"
              style="min-width: 88px; margin: 0 auto;"
              type="button"
              class="ezuikit-btn ezuikit-btn-primary"
            >
            <span style="display:none" class="ezuikit-btn-loading-icon" style=""><span role="img" aria-label="loading" class="anticon anticon-loading anticon-spin"><svg viewBox="0 0 1024 1024" focusable="false" data-icon="loading" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"></path></svg></span></span>
            视频存证</button>
          </div>
          <div id="`).concat(o.jSPlugin.id,`-inspect-event-list-refresh" style="
            width: 17px;
            height: 32px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
          ">
            <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13" xmlns:xlink="http://www.w3.org/1999/xlink">
              <path fill="currentColor" d="M960 416V192l-73.056 73.056a447.712 447.712 0 0 0-373.6-201.088C265.92 63.968 65.312 264.544 65.312 512S265.92 960.032 513.344 960.032a448.064 448.064 0 0 0 415.232-279.488 38.368 38.368 0 1 0-71.136-28.896 371.36 371.36 0 0 1-344.096 231.584C308.32 883.232 142.112 717.024 142.112 512S308.32 140.768 513.344 140.768c132.448 0 251.936 70.08 318.016 179.84L736 416h224z"></path>
            </svg>
          </div>
        </div>
        <div
          id="`).concat(o.jSPlugin.id,`-inspect-loading"
          class="inspect-loading"
          style="
            height: calc(100% - 104px);
            position: absolute; bottom: 0; right: 0;background: #fff; bottom: 0; right: 0; z-index: 99; width: 100%; align-items: center; justify-content: center;
            display: `).concat(o.listLoading?"flex":"none",`
          ">
          <div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>
        </div>
        <div id="`).concat(o.jSPlugin.id,`-inspect-event-list-nodata-wrap" style="
          display: none;
          height: calc(100% - 104px);
          text-align: center;overflow: auto;
        "> 
          <img style="width: 85px;height: 85px; margin: 120px auto 0;" src="`).concat(o.jSPlugin.staticPath,`/imgs/empty.png" />
          <p style="font-size: 14px;color: #595959;text-align: center;line-height: 22px;margin: 0;">暂无事件</p>
        </div>
        <div class="inspect-event-list-wrap" id="`).concat(o.jSPlugin.id,`-inspect-event-list-wrap"
          style="display: none; height: calc(100% - 104px); overflow-x: hidden; overflow-y: auto; padding-top: 4px; box-sizing: border-box; ">
          <div id="`).concat(o.jSPlugin.id,`-inspect-event-list-wrap-main"></div>
          <div id="`).concat(o.jSPlugin.id,`-inspect-event-list-more-loading" style="display: none;align-items: center;justify-content: center;" class="inspect-event-list-more-loading">
            <div type="default" class="ezuikit-spin ezuikit-spin-spinning"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>
          </div>
        </div>
      </div>
      <div id="`).concat(o.jSPlugin.id,`-inspect-event-detail-wrap" class="inspect-event-detail-wrap" style="
        height: 100%;
      ">
        <h1 style="
          font-size: 16px;
          color: #262626;
          line-height: 24px;
          font-weight: bold;
          margin: 16px 16px 0;
        ">巡检事件</h1>
        <div id="`).concat(o.jSPlugin.id,`-inspect-event-detail-box"></div>
      </div>
      `),document.getElementById("".concat(o.jSPlugin.id,"-wrap")).appendChild(d),o.jSPlugin.Theme.decoderState.state.play?o.enableEvidenceBtn():o.disableEvidenceBtn(),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).onclick=function(){o.listLoading||o.startEvidence||(o.startEvidence=!0,o.hideDelEConfirm(),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary ezuikit-btn-loading"),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block",Jl(o.jSPlugin,0,function(E){o.startEvidence=!1,document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="none",E.meta&&E.meta.code===200?new d0(o.jSPlugin,E.data,o.timer,0,function(){o.initEvent(),new Jr({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})}):new Jr({type:"error",content:"图片存证失败，".concat(E.meta&&E.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})},function(){o.startEvidence=!1,document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-img")).querySelector(".ezuikit-btn-loading-icon").style.display="none",new Jr({type:"error",content:"图片存证失败，请稍后重试！",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})}))},document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).onclick=function(){o.listLoading||o.startEvidence||(o.startEvidence=!0,o.hideDelEConfirm(),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary ezuikit-btn-loading"),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="inline-block",Jl(o.jSPlugin,1,function(E){o.startEvidence=!1,document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="none",E.meta&&E.meta.code===200?new d0(o.jSPlugin,E.data,o.timer,0,function(){o.initEvent(),new Jr({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})}):new Jr({type:"error",content:"视频存证失败，".concat(E.meta&&E.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})},function(){o.startEvidence=!1,document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).setAttribute("class","ezuikit-btn ezuikit-btn-primary"),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-video")).querySelector(".ezuikit-btn-loading-icon").style.display="none",new Jr({type:"error",content:"视频存证失败，请稍后重试！",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})}))},document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-refresh")).onclick=function(){o.listLoading||o.startEvidence||(o.hideDelEConfirm(),document.getElementById("".concat(o.jSPlugin.id,"-inspect-loading")).style.display="block",document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-wrap")).style.display="none",document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="none",l.initEvent())}}}),ln(this,"renderList",function(l){document.getElementById("".concat(o.jSPlugin.id,"-inspect-loading")).style.display="none";var d=l.data||[];if(d.length>0){document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-wrap")).style.display="block",document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="none";for(var c=function(){var y=document.createElement("div");y.setAttribute("class","inspect-event-item");var w="",g=d[E];y.setAttribute("id","".concat(o.jSPlugin.id,"-inspect-event-item-").concat(g.inspectEventId)),y.innerHTML=w,document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-wrap-main")).appendChild(y);var p=document.createElement("div");p.setAttribute("class","inspect-event-item-header-wrap");var te;g.evidenceFileType==1&&(te="".concat(g.eventBeginTime.split(" ")[1],"~").concat(g.eventEndTime.split(" ")[1])),g.evidenceFileType==0&&(te="".concat(g.eventTime.split(" ")[1]));var ae="";g.evidenceFileType===1&&(g.taskStatus===1||g.taskStatus===2?ae="storage":g.taskStatus===4||g.taskStatus===5||g.taskStatus===6||g.taskStatus===7?ae="storage-error":(g.taskStatus===0||g.taskStatus===3)&&(ae="storage-success")),p.innerHTML=`
        <div class="inspect-event-item-header `.concat(ae,`">
        <div class="inspect-event-item-header-left">
          <span class="inspect-event-item-status-wrap">
            <span class="inspect-event-item-status"></span>
          </span>
          <svg fill="currentColor" style="display: `).concat(g.evidenceFileType===1?"block":"none",`" width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	          viewBox="0 0 14 12" style="enable-background:new 0 0 14 12;" xml:space="preserve">
            <path d="M1,12c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1h12c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H1z M1,11h1.6l0-3.5H1V11z
            M10.5,1h-7v10h7V1z M13,7.5h-1.6l0,3.5H13V7.5z M6.1,4.2l2.3,1.2c0.4,0.2,0.4,0.6,0,0.8L8.1,6.3l-2,1c-0.2,0.1-0.4,0-0.4-0.2V4.4
            C5.7,4.2,5.9,4.1,6.1,4.2z M13,6.6V4.9h-1.6v1.8H13z M1,6.6h1.6V4.9H1V6.6z M13,4V1h-1.6l0,3H13z M2.6,1H1v3h1.6L2.6,1z"/>
          </svg>
          <svg fill="currentColor" style="display: `).concat(g.evidenceFileType===1?"none":"block",`" width="16" height="16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewBox="0 0 14 12" style="enable-background:new 0 0 14 12;" xml:space="preserve">
            <path class="st0" d="M13,0c0.6,0,1,0.4,1,1v10c0,0.6-0.4,1-1,1H1c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1H13z M10.4,6.2L5.6,9.8L3.8,8
            L1,10v1h12V9L10.4,6.2z M13,1H1v7.8l2.9-2.1l1.8,1.8l4.9-3.6L13,7.5V1z M5.5,2C6.3,2,7,2.7,7,3.5S6.3,5,5.5,5S4,4.3,4,3.5
            S4.7,2,5.5,2z M5.5,3C5.2,3,5,3.2,5,3.5S5.2,4,5.5,4S6,3.8,6,3.5S5.8,3,5.5,3z"/>
          </svg>
          <span class="inspect-event-item-time">`).concat(te||"-",`</span>
        </div>
        <div class="inspect-event-item-header-right">
          <span class="inspect-event-item-header-toggle">
          <svg fill="currentColor" class="inspect-event-item-header-toggle-up" style="display: none;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M218.496 645.312l46.464 44.032 247.616-261.568 246.4 261.504 46.528-43.904-292.8-310.72z"></path></svg>  
          <svg fill="currentColor" class="inspect-event-item-header-toggle-down"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M218.496 378.688l46.464-44.032 247.616 261.568 246.4-261.504 46.528 43.904-292.8 310.72z"></path></svg>
          </span>
        </div>
        </div>
        `),y.appendChild(p),p.onclick=function(x){var O=p.querySelector(".inspect-event-item-header-toggle-up").style.display;O==="none"?(p.querySelector(".inspect-event-item-header-toggle-up").style.display="block",p.querySelector(".inspect-event-item-header-toggle-down").style.display="none",y.querySelector(".inspect-event-item-body").style.display="block"):(p.querySelector(".inspect-event-item-header-toggle-up").style.display="none",p.querySelector(".inspect-event-item-header-toggle-down").style.display="block",y.querySelector(".inspect-event-item-body").style.display="none")};var de=document.createElement("div");de.setAttribute("class","inspect-event-item-body"),de.style.display="none";var ie=(g.evidenceFileType===1?g.videoCoverPic:g.fileUrl)||"".concat(o.jSPlugin.staticPath,"/imgs/bg.svg");de.innerHTML=`
        <div class="inspect-event-item-img" id="`.concat(o.jSPlugin.id,"-inspect-view-").concat(g.inspectEventId,`"></div>
        <div class="inspect-event-item-body-info">
          <div class="inspect-event-item-body-info-tag">
            <span class="inspect-event-item-body-info-tag-label" title="`).concat(g.eventType,'">').concat(g.eventType,`</span>
          </div>
        </div>
        `),y.appendChild(de),g.evidenceFileType==1&&(g.taskStatus===1||g.taskStatus===2?document.getElementById("".concat(o.jSPlugin.id,"-inspect-view-").concat(g.inspectEventId)).innerHTML=`
              <div class="video-stroage-exceptional-status-tips-wrap" style="background:url(`.concat(o.jSPlugin.staticPath,`/imgs/bg.svg) no-repeat 100%/cover">
                <div class="video-stroage-exceptional-status-icon">
                <div type="default" class="ezuikit-spin ezuikit-spin-sm ezuikit-spin-spinning ezuikit-spin-dot-white"><span class="ezuikit-spin-dot ezuikit-spin-dot-spin ezuikit-spin-dot-default"><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i><i class="ezuikit-spin-dot-item"></i></span></div>
                </div>
                <span class="video-stroage-exceptional-status-tips">视频正在存储中…</span>
              </div>
            `):g.taskStatus===4?document.getElementById("".concat(o.jSPlugin.id,"-inspect-view-").concat(g.inspectEventId)).innerHTML=`
            <div class="video-stroage-exceptional-status-tips-wrap video-stroage-exceptional-status-tips-error" style="background:url(`.concat(o.jSPlugin.staticPath,`/imgs/bg.svg) no-repeat 100%/cover">
              <div class="video-stroage-exceptional-status-icon">
                <svg fill="currentColor" t="1691567317943" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m32 664a8 8 0 0 1-8 8h-48a8 8 0 0 1-8-8v-272c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272zM512 384a48 48 0 1 1 0-96A48 48 0 0 1 512 384z"></path></svg>
              </div>
              <span class="video-stroage-exceptional-status-tips">视频存储失败</span>
            </div>
            `):(g.taskStatus===0||g.taskStatus===3)&&new Xl({id:"".concat(o.jSPlugin.id,"-inspect-view-").concat(g.inspectEventId),src:g.fileUrl,poster:ie,fallback:"".concat(o.jSPlugin.staticPath,"/imgs/bg.svg")})),g.evidenceFileType==0&&new Yl({id:"".concat(o.jSPlugin.id,"-inspect-view-").concat(g.inspectEventId),src:ie,fallback:"".concat(o.jSPlugin.staticPath,"/imgs/bg.svg"),showIcon:!1});var we=document.createElement("div");we.setAttribute("class","inspect-event-item-body-info-opr");var Ve=document.createElement("span");Ve.setAttribute("class","inspect-event-item-body-info-opr-icon"),Ve.innerHTML=`
          <svg fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M612.992 121.984a64 64 0 0 1 90.496 0l153.92 153.92a64 64 0 0 1 0 90.496l-435.2 435.2a96 96 0 0 1-23.04 17.024l525.312-0.128v64H175.808v-2.304a64 64 0 0 1-66.496-77.632l43.776-199.296a96 96 0 0 1 25.92-47.296zM523.072 302.4l-298.88 298.88a32 32 0 0 0-8.576 15.744l-43.776 199.296 190.848-51.712a32 32 0 0 0 14.272-8.256l300.032-300.032-153.92-153.92z m135.168-135.168L568.32 257.088l153.92 153.984 89.92-89.92-153.92-153.92z"></path></svg>
        `,we.appendChild(Ve);var ue=document.createElement("span");ue.setAttribute("class","inspect-event-item-body-info-opr-icon"),ue.id="".concat(o.jSPlugin.id,"-inspect-event-del-").concat(g.inspectEventId),ue.innerHTML=` 
          <svg fill="currentColor" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><path d="M128 320V256h767.872v64H832v512a64 64 0 0 1-64 64H256a64 64 0 0 1-64-64V320H128z m640 0H256v512h512V320zM464 432v256h-64v-256h64z m160 0v256h-64v-256h64zM704 128v64H320V128h384z"></path></svg>
        `,we.appendChild(ue),Ve.onclick=function(x){o.startEvidence||new d0(o.jSPlugin,g,o.timer,1,function(O){new Jr({type:"success",content:"保存成功",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40}),g=Object.assign(g,O),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-item-").concat(g.inspectEventId)).querySelector(".inspect-event-item-body-info-tag-label").innerHTML=g.eventType,document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-item-").concat(g.inspectEventId)).querySelector(".inspect-event-item-body-info-tag-label").setAttribute("title",g.eventType)})},ue.onclick=function(x){o.startEvidence||(o.delE=new l0({id:"".concat(o.jSPlugin.id,"-inspect-event-del-").concat(g.inspectEventId),content:"确定要删除该事件吗？",placement:"topRight",arrowPointAtCenter:!0,onCancel:function(){o.delE.hide()},onConfirm:function(){Sf(o.jSPlugin,{inspectEventId:g.inspectEventId},function(ne){ne.meta&&ne.meta.code===200?(o.delE.hide(),o.initEvent(),setTimeout(function(){new Jr({type:"success",content:"删除成功",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})},10)):new Jr({type:"error",content:"删除失败，".concat(ne.meta&&ne.meta.message||"请稍后重试！"),wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})},function(){new Jr({type:"error",content:"删除失败，请稍后重试！",wrapNode:document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-box")),top:40})})}}),o.delEConfirmList.push(o.delE))},y.querySelector(".inspect-event-item-body-info").appendChild(we),document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-wrap")).onscroll=function(x){var O=x.target;o.hideDelEConfirm(),O.scrollTop+O.offsetHeight>=O.scrollHeight-48&&!o.listLoading&&(l.start+1)*l.size<l.total&&o.initEvent(l.start+1)}},E=0;E<d.length;E++)c()}else document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-wrap")).style.display="none",document.getElementById("".concat(o.jSPlugin.id,"-inspect-event-list-nodata-wrap")).style.display="block"}),this.jSPlugin=m,this.videoWidth=m.width,this.inspectRecordId=t,this.timer=n,this.listLoading=!1,this.startEvidence=!1,this.delEConfirmList=[],this.videoHeight=document.getElementById("".concat(m.id,"-wrap")).clientHeight-document.getElementById("".concat(m.id,"-inspectInfoControl")).clientHeight||m.height,this.initEvent()}return Rn(Z,[{key:"initEvent",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30,l=this;l.listLoading=!0,n===0?l.initRender(n):document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="flex";var d=function(E){new Jr({type:"error",content:E.meta&&E.meta.message||"列表获取失败，请稍后重试！",wrapNode:document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-box")),top:40}),l.renderList({})};gf(l.jSPlugin,l.inspectRecordId,n,o,function(c){l.listLoading=!1,document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="none",c.meta&&c.meta.code===200?l.renderList(c.data||{}):d(c)},function(c){l.listLoading=!1,document.getElementById("".concat(t.jSPlugin.id,"-inspect-event-list-more-loading")).style.display="none",d(c)})}},{key:"disableEvidenceBtn",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-img")).setAttribute("disabled","disabled"),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-video")).setAttribute("disabled","disabled")}},{key:"enableEvidenceBtn",value:function(){document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-img")).removeAttribute("disabled"),document.getElementById("".concat(this.jSPlugin.id,"-inspect-event-video")).removeAttribute("disabled")}}]),Z}(),Pf=function(){function Z(m,t,n,o,l){var d=this;En(this,Z),ln(this,"createLocationControl",function(){var c=d;function E(){this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT,this.defaultOffset=new BMapGL.Size(40,105)}return E.prototype=new BMapGL.Control,E.prototype.initialize=function(C){var y=document.createElement("div");return y.style.cssText="width: 26px;height: 26px;display: flex;align-items: center;justify-content: center; box-shadow: 1px 2px 1px rgb(0 0 0 / 15%); background: #fff; cursor: pointer;",y.id="".concat(c.jSPlugin.id,"-location-btn"),y.innerHTML=`<svg fill="#3385ff" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M510.976716 128.626761c-211.205756 0-382.401119 171.195363-382.401119 382.401119s171.195363 382.401119 382.401119 382.401119S893.377836 722.131308 893.377836 510.925552 722.182472 128.626761 510.976716 128.626761zM736.508444 736.45728c-29.265914 29.265914-63.443589 52.289797-101.407415 68.355351-29.265914 12.381733-59.964425 20.158689-91.481563 23.433197L543.619466 704.019187l-63.443589 0 0 124.431298c-32.233437-3.069851-63.443589-10.949136-93.323474-23.535525-37.963825-16.065554-72.039173-39.089437-101.407415-68.355351-29.265914-29.265914-52.289797-63.443589-68.355351-101.407415-12.381733-29.265914-20.158689-59.964425-23.433197-91.481563l126.273209 0 0-63.443589L193.554112 480.227041c3.069851-32.233437 10.949136-63.443589 23.535525-93.323474 16.065554-37.963825 39.089437-72.039173 68.355351-101.407415 29.265914-29.265914 63.443589-52.289797 101.407415-68.355351 29.879884-12.58639 61.090037-20.465674 93.323474-23.535525l0 125.863895 63.443589 0L543.619466 193.707605c31.517138 3.172179 62.215649 11.051464 91.481563 23.433197 37.963825 16.065554 72.039173 39.089437 101.407415 68.355351 29.265914 29.265914 52.289797 63.443589 68.355351 101.407415 12.58639 29.879884 20.465674 61.090037 23.535525 93.323474L703.251724 480.227041l0 63.443589 125.045268 0c-3.172179 31.517138-11.051464 62.215649-23.433197 91.481563C788.798241 673.01369 765.876686 707.089038 736.508444 736.45728z" p-id="1506"></path><path d="M516.093135 415.248526c-56.280604 0-100.793445 43.489557-100.793445 99.770161s44.512841 101.816728 100.793445 101.816728S616.886579 571.29929 616.886579 515.018687 572.373738 415.248526 516.093135 415.248526z" p-id="1507"></path>
      </svg>`,y.onclick=function(w){setTimeout(function(){c.inspectMapWin.centerToTrack(18)},100)},C.getContainer().appendChild(y),y},new E}),ln(this,"initSwithcBtn",function(){var c=document.createElement("div");c.id="".concat(d.jSPlugin.id,"-miniSwitch"),c.style="cursor: pointer;position: absolute; bottom: 106px; right: ".concat(d.jSPlugin.inspectVideoWidth+10,"px; z-index: 999;"),c.innerHTML="<div id='".concat(d.jSPlugin.id,`-miniSwitch-btn' style="width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: rgba(0,0,0,0.70);">
      <svg width="20px" height="20px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>大小窗切换</title>
          <g id="icon/大小窗切换" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <rect id="矩形" x="0" y="0" width="24" height="24"></rect>
              <path d="M16,3.25 C17.5187831,3.25 18.75,4.48121694 18.75,6 L18.75,6 L18.75,6.644 L19.095177,6.64456257 C20.6299163,6.64456257 21.9388658,7.64624846 22.0337198,8.99291851 L22.0392202,9.14979714 L22.0392202,17.639328 C22.0392202,19.0115638 20.7871129,20.0640733 19.2712041,20.1401546 L19.095177,20.1445626 L8.48326347,20.1445626 C6.94852423,20.1445626 5.63957467,19.1428767 5.54472071,17.7962066 L5.53922025,17.639328 L5.539,16.75 L5,16.75 C3.53746816,16.75 2.34159572,15.6082954 2.25501879,14.1675223 L2.25,14 L2.25,6 C2.25,4.48121694 3.48121694,3.25 5,3.25 L5,3.25 Z M18.75,14 C18.75,15.5187831 17.5187831,16.75 16,16.75 L16,16.75 L7.039,16.75 L7.03922025,17.639328 C7.03922025,18.1209822 7.57916546,18.5830417 8.33031492,18.6389177 L8.48326347,18.6445626 L19.095177,18.6445626 C19.873026,18.6445626 20.4615868,18.2126064 20.5321184,17.735283 L20.5392202,17.639328 L20.5392202,9.14979714 C20.5392202,8.66814298 19.999275,8.20608342 19.2481256,8.15020744 L19.095177,8.14456257 L18.75,8.144 Z M16,4.75 L5,4.75 C4.30964406,4.75 3.75,5.30964406 3.75,6 L3.75,6 L3.75,14 C3.75,14.6903559 4.30964406,15.25 5,15.25 L5,15.25 L16,15.25 C16.6903559,15.25 17.25,14.6903559 17.25,14 L17.25,14 L17.25,8.144 L17.2422027,8.14456257 L17.2422027,6.64456257 L17.25,6.644 L17.25,6 C17.25,5.35279131 16.7581253,4.8204661 16.1278052,4.75645361 L16,4.75 Z" id="形状结合" fill="#FFFFFF" fill-rule="nonzero"></path>
          </g>
      </svg>
    </div>`),document.getElementById("".concat(d.jSPlugin.id,"-wrap")).appendChild(c),document.getElementById("".concat(d.jSPlugin.id,"-miniSwitch-btn")).onclick=function(){vr.throttle(function(){return d.miniRecSwitchClick()},1e3)()}}),ln(this,"initMiniWinToggleBtn",function(){var c=d.videoWidth,E=d.videoHeight,C=c*.3333,y=E*.3333,w=document.createElement("div");w.id="".concat(d.jSPlugin.id,"-miniToggle"),w.style="cursor: pointer;position: absolute; bottom: ".concat(y/2+96-30,"px; right: ").concat(d.jSPlugin.inspectVideoWidth+C,"px; z-index: 999; height:60px; box-sizing: border-box; padding-top: 20px; text-align: center; width:20px; overflow: hidden; background: #000000; border-radius: 2px 0px 0px 2px; opacity: 0.7;"),w.innerHTML="<div id='".concat(d.jSPlugin.id,`-miniToggle-btn'>
    <svg id="`).concat(d.jSPlugin.id,`-min-win-close-icon" style="display: inline-block" width="20px" height="20px" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10867" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M378.688 217.856l-44.032 46.464 261.568 247.616-261.504 246.4 43.904 46.528 310.72-292.8z" fill="#ffffff" p-id="10868"></path>
      </svg>
    <svg id="`).concat(d.jSPlugin.id,`-min-win-open-icon" style="display: none" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10671" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20">
        <path d="M645.312 217.856l44.032 46.464-261.568 247.616 261.504 246.4-43.904 46.528-310.72-292.8z" fill="#ffffff" p-id="10672"></path>
      </svg>
    </div>`),document.getElementById("".concat(d.jSPlugin.id,"-wrap")).appendChild(w),document.getElementById("".concat(d.jSPlugin.id,"-miniToggle")).onclick=function(){d.miniWinToggleClick()}}),ln(this,"init",function(){d.initSwithcBtn(),d.initMiniWinToggleBtn()}),ln(this,"setStyleListByIds",function(c){c.map(function(E){var C=document.getElementById(E.id);C&&Object.keys(E.styleList).map(function(y){C.style[y]=E.styleList[y]})})}),this.jSPlugin=m,this.inspectMode=t,this.inspectMapWin=n,this.changeInspectMode=o,this.videoWidth=m.width,this.videoHeight=m.height,this.minWinStatus="open",this.decoderState=l,this.ZoomControl=new BMapGL.ZoomControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT,offset:new BMapGL.Size(40,50)}),this.LocationControl=this.createLocationControl(),this.NavigationControl3D=new BMapGL.NavigationControl3D({anchor:BMAP_ANCHOR_BOTTOM_LEFT,offset:new BMapGL.Size(28,105)}),this.init()}return Rn(Z,[{key:"miniWinToggleClick",value:function(){var t=this.jSPlugin.width,n=t*.3333;this.minWinStatus==="open"?(this.setStyleListByIds([{id:this.inspectMode==="video"?"".concat(this.jSPlugin.id,"-mapbox"):"".concat(this.jSPlugin.id),styleList:{width:"0px"}},{id:"".concat(this.jSPlugin.id,"-miniSwitch"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-miniToggle"),styleList:{right:"".concat(this.jSPlugin.inspectVideoWidth,"px")}},{id:"".concat(this.jSPlugin.id,"-min-win-close-icon"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-min-win-open-icon"),styleList:{display:"inline-block"}}]),this.minWinStatus="close"):(this.setStyleListByIds([{id:this.inspectMode==="video"?"".concat(this.jSPlugin.id,"-mapbox"):"".concat(this.jSPlugin.id),styleList:{width:n+"px"}},{id:"".concat(this.jSPlugin.id,"-miniSwitch"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-miniToggle"),styleList:{right:"".concat(this.jSPlugin.inspectVideoWidth+n,"px")}},{id:"".concat(this.jSPlugin.id,"-min-win-close-icon"),styleList:{display:"inline-block"}},{id:"".concat(this.jSPlugin.id,"-min-win-open-icon"),styleList:{display:"none"}}]),this.minWinStatus="open")}},{key:"miniRecSwitchClick",value:function(){var t=this,n=this.jSPlugin.width,o=this.jSPlugin.height,l=n*.3333,d=o*.3333;this.inspectMode==="video"?(this.jSPlugin.Zoom&&this.jSPlugin.Zoom.stopZoom(),this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-mapbox"),styleList:{width:this.jSPlugin.width+"px",height:this.jSPlugin.height+"px",marginBottom:"-40px"}},{id:"".concat(this.jSPlugin.id,"-ez-iframe-footer-container"),styleList:{top:this.jSPlugin.height+"px"}},{id:"".concat(this.jSPlugin.id),styleList:{position:"absolute",zIndex:"100",bottom:"96px",right:"".concat(this.jSPlugin.inspectVideoWidth,"px"),overflow:"hidden"}}]),this.jSPlugin.Theme.inspect.reSizeVideo(l,d),this.inspectMode="map",this.changeInspectMode("map"),this.inspectMapWin.map.addControl(this.NavigationControl3D),this.inspectMapWin.map.addControl(this.LocationControl),this.inspectMapWin.map.addControl(this.ZoomControl),this.inspectMapWin.map.addOverlay(this.inspectMapWin.inspectRange),document.getElementById("".concat(this.jSPlugin.id,"-loading-item-btn-wrap"))&&this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-loading-item-btn"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-svg"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-wrap"),styleList:{border:"none",width:"32px",height:"14px"}}]),setTimeout(function(){t.inspectMapWin.centerToTrack(18)},100)):(this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-mapbox"),styleList:{width:l+"px",height:d+"px",marginBottom:"0"}},{id:"".concat(this.jSPlugin.id,"-ez-iframe-footer-container"),styleList:{top:"0px"}},{id:"".concat(this.jSPlugin.id),styleList:{position:"relative",zIndex:"0",bottom:"0",right:"0"}}]),this.jSPlugin.Theme.inspect.reSizeVideo(this.jSPlugin.width,this.jSPlugin.height),this.inspectMode="video",this.changeInspectMode("video"),this.inspectMapWin.map.removeControl(this.ZoomControl),this.inspectMapWin.map.removeControl(this.NavigationControl3D),this.inspectMapWin.map.removeControl(this.LocationControl),this.inspectMapWin.map.removeOverlay(this.inspectMapWin.inspectRange),document.getElementById("".concat(this.jSPlugin.id,"-loading-item-btn-wrap"))&&this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-loading-item-btn"),styleList:{display:"block"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-svg"),styleList:{display:"none"}},{id:"".concat(this.jSPlugin.id,"-loading-item-btn-wrap"),styleList:{border:"1px solid rgb(255, 255, 255)",width:"80px",height:"32px",color:"#fff","text-align":"center","line-height":"32px","font-size":"14px"}}]),setTimeout(function(){t.inspectMapWin.centerToTrack()},100),this.jSPlugin.Zoom&&this.decoderState.state.play&&this.jSPlugin.Zoom.startZoom()),this.setStyleListByIds([{id:"".concat(this.jSPlugin.id,"-wrap"),styleList:{width:this.jSPlugin.width+this.jSPlugin.inspectVideoWidth+"px",height:this.jSPlugin.height+this.jSPlugin.inspectVideoHeight+"px"}}])}}]),Z}(),wf={customConfig:{defaultMicro:0,defaultPlay:0,maxTalkTime:0,bellPoster:0,maxBellTime:0,inspectInfo:{color:"#000000",backgroundColor:"#ffffff",activeColor:"#1890FF",btnList:[{btnKey:"inspectName",iconId:"inspectName",part:"left",defaultActive:0,isrender:1,color:"#262626"},{btnKey:"inspectBeginTime",iconId:"inspectBeginTime",part:"left",defaultActive:0,isrender:1,color:"#262626"},{btnKey:"inspectPerson",iconId:"inspectPerson",part:"right",defaultActive:0,isrender:1,color:"#262626"}]}},header:{color:"#2c2c2c",backgroundColor:"#000000",activeColor:"#1890FF",btnList:[{btnKey:"deviceName",iconId:"deviceName",part:"left",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"inspectTime",iconId:"inspectTime",part:"left",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"signalType",iconId:"signalType",part:"right",defaultActive:0,isrender:1,color:"#ffffff"},{btnKey:"batteryStatus",iconId:"batteryStatus",part:"right",defaultActive:0,isrender:1,color:"#ffffff"}]},footer:{color:"#ffffff",backgroundColor:"#000000",activeColor:"blue",btnList:[{btnKey:"talk",iconId:"talk",part:"left",defaultActive:1,isrender:1,backgroundColor:"#cccccc"},{btnKey:"sound",iconId:"sound",part:"left",defaultActive:1,isrender:1,backgroundColor:"#cccccc"}]}},$l={data:wf},c0=function(m){var t="";return Object.keys(m).map(function(n,o){t+="".concat(n,":").concat(m[n]).concat(o<Object.keys(m).length-1?";":"")}),t};function Ef(Z){var m=parseInt(Z%864e5/36e5),t=parseInt(Z%(1e3*60*60)/(1e3*60)),n=parseInt(Z%(1e3*60)/1e3);return(m<10?"0".concat(m):m)+":"+(t<10?"0".concat(t):t)+":"+(n<10?"0".concat(n):n)}var Lo=500,Rf=function(){function Z(m,t,n,o,l,d,c){En(this,Z),this.jSPlugin=m,this.videoWidth=m.width,this.videoHeight=m.height,this.themeData=t,this.setDecoderState=n,this.decoderState=o,this.isNeedRenderInspectInfo=!1,this.isNeedRenderHeader=!1,this.isNeedRenderFooter=!1,this.inspectMode=l,this.changeInspectMode=d,this.themeInited=!1,this.inspectRecordId=null,this.inspectInfo={},this.activeThemeStatus=!0,this.activeThemeStatusTxt="模板未激活",this.globalContainer=new xf(this.jSPlugin),this.toastCustom=new Ka(m,!1),this.InspectEvent=null,this.timer=c}return Rn(Z,[{key:"renderSignalType",value:function(t){if(!t)return null;var n,o=t.toUpperCase();return o==="WIFI"?n=`<span><svg t="1688983236732" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path d="M0 352.832l93.12 98.752c231.296-245.44 606.464-245.44 837.76 0L1024 352.832C741.44 53.056 283.008 53.056 0 352.832z m372.352 395.008L512 896l139.648-148.16c-76.8-81.92-202.048-81.92-279.296 0zM186.24 550.4l93.12 98.752c128.448-136.32 336.96-136.32 465.408 0L837.824 550.4c-179.648-190.592-471.488-190.592-651.648 0z" fill="#ffffff" p-id="1530"></path>
      </svg></span>`:n="<span>".concat(t,"</span>"),n}},{key:"renderBatteryStatus",value:function(t){var n;return!t||t==0?null:(n=`
    <div style="
      display: flex;
      align-items: center;
      position: relative;
    ">
      <span style="
        margin-right: 3px; 
        color: `.concat(t<=20?"#FF4D4F":"#FFFFFF",`
      ">`).concat(t,`%</span>
      <div style="
        position: absolute;
        right: 6px;
        height: 8px;
        width: 15px;
      ">
        <div style="
          width: `).concat(t,`%;
          height: 100%;
          background: `).concat(t<=20?"#FF4D4F":"#FFFFFF",`
          "></div>
      </div>
      <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="32" xmlns:xlink="http://www.w3.org/1999/xlink">
        <path fill="`).concat(t<=20?"#FF4D4F":"#FFFFFF",`"  d="M128 213.333333l640 0q52.992 0 90.496 37.504t37.504 90.496q52.992 0 90.496 37.504t37.504 90.496l0 85.333333q0 52.992-37.504 90.496t-90.496 37.504q0 52.992-37.504 90.496t-90.496 37.504l-640 0q-52.992 0-90.496-37.504t-37.504-90.496l0-341.333333q0-52.992 37.504-90.496t90.496-37.504zM768 298.666667l-640 0q-17.664 0-30.165333 12.501333t-12.501333 30.165333l0 341.333333q0 17.664 12.501333 30.165333t30.165333 12.501333l640 0q17.664 0 30.165333-12.501333t12.501333-30.165333l0-341.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333zM896 426.666667l0 170.666667q17.664 0 30.165333-12.501333t12.501333-30.165333l0-85.333333q0-17.664-12.501333-30.165333t-30.165333-12.501333z"></path>
      </svg>
    </div>
    `),n)}},{key:"renderInspectTime",value:function(t){if(!t)return null;var n=t.split(" "),o=n[0].split("-"),l=n[1].split(":"),d=new Date(o[0],o[1]-1,o[2],l[0],l[1],l[2]),c=new Date().getTime()-new Date(d).getTime(),E;return E=`
    <span style="
      display: inline-block;
      width:8px;
      height:8px;
      border-radius: 100%;
      background: #FF4D4F;
      margin-right: 4px;
    "></span>
    `.concat(Ef(c),`
    `),E}},{key:"matchBtn",value:function(t,n){var o=this,l=this.themeData,d=l.customConfig,c=l.header,E=l.footer,C=d.inspectInfo,y={title:"",id:"",domString:"",color:"#FFFFFF",activeColor:"#FFFFFF",onclick:function(){},onmoveleft:function(){},onmoveright:function(){},onremove:function(){}},w=C.btnList.findIndex(function(g){return g.iconId===t});switch(w!==-1?(y.color=C.color,y.backgroundColor=C.backgroundColor,y.activeColor=C.activeColor):(w=c.btnList.findIndex(function(g){return g.iconId===t}),w!==-1?(y.color=c.color,y.backgroundColor=c.backgroundColor,y.activeColor=c.activeColor):(y.color=E.color,y.backgroundColor=E.backgroundColor,y.activeColor=E.activeColor)),t){case"inspectName":return y.title="巡检名称",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-inspectInfo-inspectName" 
        style="
        color:`).concat(n.color||"#262626",`;
        font-size: 18px;
        text-align: left;
        font-weight: bold;
        padding: 0 16px;
        ">巡检名称</span>`),y.onclick=function(){},y;case"inspectBeginTime":return y.title="巡检开始时间",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-inspectInfo-inspectBeginTime" 
        style="
        color:`).concat(n.color||"#FFFFFF",`;
        font-size: 14px;
        text-align: left;
        padding-left: 16px;
        border-left: 1px solid #d9d9d9;
        line-height: 16px;
        margin-top: 1px;
        ">巡检开始时间：-</span>`),y.onclick=function(){},y;case"inspectPerson":return y.title="本地巡检员",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-inspectInfo-inspectPerson" 
        style="
        color:`).concat(n.color||"#FFFFFF",`;
        font-size: 14px;
        display: block;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        text-align: left;
        padding-right: 16px;
        ">本地巡检员：-</span>`),y.onclick=function(){},y;case"deviceName":return y.title="设备名称",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-header-deviceName" 
        style="
        color:`).concat(n.color||"#FFFFFF",`;
        font-size: 16px;
        display: block;
        max-width: `).concat(this.jSPlugin.width*.33,`px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        text-align: left;
        ">设备名称</span>`),y.onclick=function(){},y;case"inspectTime":return y.title="巡检时长",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-header-inspectTime-wrap" 
        style="
        color:`).concat(n.color||"#FFFFFF",`;
        font-size: 14px;
        display: flex;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        text-align: left;
        margin-left: 32px;
        ">巡检时长：<span id="`).concat(this.jSPlugin.id,'-header-inspectTime" style="display: flex; align-items: center;">-</span></span>'),y.onclick=function(){},y;case"signalType":return y.title="信号类型",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-header-signalType" 
        style="
        color:`).concat(n.color||"#FFFFFF",`;
        font-size: 14px;
        display: block;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        text-align: left;
        "></span>`),y.onclick=function(){},y;case"batteryStatus":return y.title="设备电量",y.id=t,y.domString='<span id="'.concat(this.jSPlugin.id,`-header-batteryStatus" 
        style="
        color:`).concat(n.color||"#FFFFFF",`;
        font-size: 14px;
        display: flex;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        text-align: left;
        margin-left: 12px;
        align-items: center;
        "></span>`),y.onclick=function(){},y;case"talk":return y.title="对讲",y.id=t,y.domString="<div></div>"+'<svg id="'.concat(this.jSPlugin.id,'-talk-icon" class="theme-icon-item-icon" fill="').concat(y.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Lo?48:32,'" height="').concat(this.jSPlugin.width>Lo?48:32,'" viewBox="-6 -6 32 32">')+'<path d="M10.1,2.7C8.5,2.7,7.2,4,7.2,5.6v5.2c0,1.6,1.3,2.9,2.9,2.9l0.2,0c1.5-0.1,2.7-1.4,2.7-2.9V5.6	C13,4,11.7,2.7,10.1,2.7z M10.1,3.7c1.1,0,1.9,0.9,1.9,1.9v5.2c0,1-0.8,1.8-1.8,1.9l-0.1,0c-1,0-1.9-0.9-1.9-1.9V5.6 C8.2,4.5,9,3.7,10.1,3.7z" /><path d="M15.1,8.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,3-2.5,5.5-5.5,5.5c-3,0-5.4-2.3-5.5-5.3l0-0.2V9 c0-0.3,0.2-0.5,0.5-0.5c0.2,0,0.4,0.2,0.5,0.4l0,0.1v1.7c0,2.5,2,4.5,4.5,4.5c2.4,0,4.4-1.9,4.5-4.3l0-0.2V9 C14.6,8.7,14.8,8.5,15.1,8.5z" /><path d="M13.5,17.7c0.3,0,0.5,0.2,0.5,0.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-7c-0.3,0-0.5-0.2-0.5-0.5 c0-0.2,0.2-0.4,0.4-0.5l0.1,0H13.5z" /><path d="M10.1,15.2c0.2,0,0.4,0.2,0.5,0.4l0,0.1v2.5c0,0.3-0.2,0.5-0.5,0.5c-0.2,0-0.4-0.2-0.5-0.4l0-0.1 v-2.5C9.6,15.4,9.8,15.2,10.1,15.2z" />'+'</svg><span id="'.concat(this.jSPlugin.id,'-talk-label" style="margin-left: -3px">对讲</span>'),y.onclick=function(){var g=o.decoderState.state,p=g.talk,te=g.sound,ae=g.play;if(ae)if(p){console.log("结束对讲"),o.setDecoderState({talk:!1}),o.jSPlugin.Talk.stopTalk();var de=vr.findIndex(o.themeData.footer.btnList,function(ie){return ie.iconId==="sound"&&ie.isrender===1&&ie.defaultActive===1})>-1;o.themeData&&de&&(o.jSPlugin.openSound(),o.setDecoderState({sound:!0}))}else console.log("开始对讲"),o.setDecoderState({talk:!0}),o.jSPlugin.Talk.startTalk(function(ie){te&&!ie&&(o.jSPlugin.closeSound(),o.setDecoderState({sound:!1}))})},y;case"sound":return y.title="音量",y.id=t,y.domString='<span style="height: 100%">'+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-nosound-icon" style="display:none" fill="').concat(y.color,'" version="1.1" xmlns="http://www.w3.org/2000/svg" width="').concat(this.jSPlugin.width>Lo?48:32,'" height="').concat(this.jSPlugin.width>Lo?48:32,`" viewBox="-6 -7 32 31">
          <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"/>
          <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>
          <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"/>
          <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"/>
          </svg>`)+'<svg class="theme-icon-item-icon" id="'.concat(this.jSPlugin.id,'-sound-icon" style="display:inline-block" width="').concat(this.jSPlugin.width>Lo?48:32,'" height="').concat(this.jSPlugin.width>Lo?48:32,'" fill="').concat(y.color,`" viewBox="-6 -7 32 32">
            <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7
              c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"/>
            <path d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3
              c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"/>
            <path id="Stroke-5" class="st1" d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8
              C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0
              L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"/>
            <path  d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4
              c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4
              c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"/>
          </svg>`)+'</span><span id="'.concat(this.jSPlugin.id,'-sound-label" style="margin-left: -3px; color: ').concat(y.color,'">音量</span>'),y.onclick=function(){var g=o.decoderState.state,p=g.play,te=g.sound,ae=g.talk;p&&!ae&&(te?(o.jSPlugin.closeSound(),o.setDecoderState({sound:!1})):(o.jSPlugin.openSound(),o.setDecoderState({sound:!0})))},y;default:return y}}},{key:"renderInspectInfo",value:function(t,n){var o=this.matchBtn(t,n),l=document.createElement("sapn");l.innerHTML="".concat(o.domString),n.part==="left"?document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl-left")).appendChild(l):document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl-right")).appendChild(l)}},{key:"renderHeader",value:function(t,n){var o=this.matchBtn(t,n),l=document.createElement("span");l.className="".concat(this.jSPlugin.id,"-header-content"),l.style="display: flex; align-items: center; ",l.innerHTML=`
      `.concat(o.domString,`
    `),n.part==="left"?document.getElementById("".concat(this.jSPlugin.id,"-headControl-left")).appendChild(l):document.getElementById("".concat(this.jSPlugin.id,"-headControl-right")).appendChild(l)}},{key:"renderFooter",value:function(t,n){var o=this,l=this.matchBtn(t,n),d=this.videoWidth/6,c=document.createElement("div");c.className="theme-icon-item",this.jSPlugin.isWebConsole?c.style="padding:0 ".concat(d*.1,"px;"):c.style="padding:0 ".concat(d*.1,"px;cursor: pointer;"),c.innerHTML="".concat('<span id="'.concat(this.jSPlugin.id,"-").concat(l.id,'" style="position:relative;">')+'<div id="'.concat(this.jSPlugin.id,"-").concat(l.id,'-content" title="').concat(l.title,'" style="display: flex;align-items: center;position:relative;">')).concat(l.domString,"</div>")+"</span>",c.onclick=function(E){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;l.onclick(E)},l.onmouseenter&&(c.onmouseenter=function(E){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;l.onmouseenter(E)}),l.onmouseleave&&(c.onmouseleave=function(E){if(o.decoderState.state.isEditing||!o.activeThemeStatus)return!1;l.onmouseleave(E)}),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).appendChild(c)}},{key:"initThemeData",value:function(){var t=this,n=this.themeData,o=n.customConfig,l=n.header,d=n.footer,c=o.inspectInfo,E=this.jSPlugin.id;if(this.isNeedRenderInspectInfo=vr.findIndex(c.btnList,function(ue){return ue.isrender>0})>=0,this.isNeedRenderHeader=vr.findIndex(l.btnList,function(ue){return ue.isrender>0})>=0,this.isNeedRenderFooter=vr.findIndex(d.btnList,function(ue){return ue.isrender>0})>=0,this.isNeedRenderInspectInfo)if(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")))document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-inspectInfoControl-left' style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-inspectInfoControl-right' style='display:flex'></div>");else{var C=document.createElement("div");C.setAttribute("id","".concat(this.jSPlugin.id,"-inspectInfoControl")),C.setAttribute("class","inspectInfo-controls"),C.innerHTML="<div id='".concat(this.jSPlugin.id,`-inspectInfoControl-left' class="inspectInfo-controls-left" style='display:flex;overflow:hidden;'></div><div id='`).concat(this.jSPlugin.id,`-inspectInfoControl-right' class="inspectInfo-controls-right" style='display:flex;'></div>`);var y="58px",w={height:y,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#000000",width:"".concat(this.jSPlugin.width+290,"px"),position:"relative","align-items":"center",background:"#ffffff","border-bottom":"1px solid #D9D9D9","box-sizing":"border-box"};C.style=c0(w),document.getElementById("".concat(E,"-wrap")).insertBefore(C,document.getElementById(this.jSPlugin.id));var g=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(g)},50)}else document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")));if(this.isNeedRenderHeader)if(document.getElementById("".concat(this.jSPlugin.id,"-headControl")))document.getElementById("".concat(this.jSPlugin.id,"-headControl")).innerHTML="<div id='".concat(this.jSPlugin.id,"-headControl-left' style='display:flex;'></div><div id='").concat(this.jSPlugin.id,"-headControl-right' style='display:flex'></div>");else{var p=document.createElement("div");p.setAttribute("id","".concat(this.jSPlugin.id,"-headControl")),p.setAttribute("class","header-controls"),p.innerHTML="<div id='".concat(this.jSPlugin.id,`-headControl-left' class="header-controls-left" style='display:flex; max-width: 70%; align-items: center; overflow: hidder;'></div><div id='`).concat(this.jSPlugin.id,`-headControl-right' class="header-controls-right" style='display:flex; align-items: center;'></div>`);var te="56px",ae={height:te,display:"flex","justify-content":"space-between",top:0,"z-index":999,color:"#FFFFFF",width:this.jSPlugin.width+"px",padding:"0 16px","box-sizing":"border-box",position:"relative","align-items":"center",background:"#000000"};p.style=c0(ae),document.getElementById("".concat(E,"-wrap")).insertBefore(p,document.getElementById(E));var de=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&clearInterval(de)},50)}else document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&document.getElementById("".concat(this.jSPlugin.id,"-headControl")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-headControl")));var ie="56px";if(this.isNeedRenderFooter)if(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")))document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.marginTop="-".concat(ie,"px"));else{var we=document.createElement("div");we.setAttribute("id","".concat(this.jSPlugin.id,"-ez-iframe-footer-container")),we.setAttribute("class","ez-iframe-footer-container");var Ve={position:"relative",display:"flex",height:"56px","flex-wrap":"wrap","justify-content":"center","z-index":999,top:0,color:"#FFFFFF",width:this.jSPlugin.width+"px","align-items":"center","background-color":"#000000","font-size":"14px"};we.style=c0(Ve),we.innerHTML=`
          <div id="`.concat(this.jSPlugin.id,`-audioControls" class="footer-controls" style='display:flex;justify-content: center;padding: 0 4%;width:100%;z-index:999;position: relative;'>
            <div id='`).concat(this.jSPlugin.id,`-audioControls-left' class="footer-controls-left" style='display:flex;margin-lefacti'></div><div id='`).concat(this.jSPlugin.id,`-audioControls-right' class="footer-controls-right" style='display:flex'></div>
          </div>
          `),Oa(we,document.getElementById(E))}else document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container"))&&document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).parentElement.removeChild(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")));this.isNeedRenderInspectInfo&&document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.background=c.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.color=c.color,c.btnList.map(function(ue,x){ue.isrender&&t.renderInspectInfo(ue.iconId,ue)})),this.isNeedRenderHeader&&document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=l.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=l.color,l.btnList.map(function(ue,x){ue.isrender&&t.renderHeader(ue.iconId,ue)})),this.isNeedRenderFooter&&document.getElementById("".concat(this.jSPlugin.id,"-audioControls"))&&(document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=d.backgroundColor,document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=d.color,d.btnList.map(function(ue,x){ue.isrender&&t.renderFooter(ue.iconId,ue)})),this.inspectMapWin=new hf(this.jSPlugin),this.inspectSmallWin=new Pf(this.jSPlugin,this.inspectMode,this.inspectMapWin,this.changeInspectMode,this.decoderState)}},{key:"renderThemeData",value:function(){var t=this,n=this.decoderState.state.isEditing,o=this.themeData,l=o.inspectInfo,d=o.header,c=o.footer;if(this.isNeedRenderInspectInfo&&l&&(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.background=l.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.color=l.color.replace("-diy",""),l.btnList.map(function(y,w){y.isrender&&t.setDecoderState(ln({},y.iconId,t.decoderState.state[y.iconId]))})),this.isNeedRenderHeader&&d&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.background=d.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.color=d.color.replace("-diy",""),d.btnList&&d.btnList.map(function(y,w){y.isrender&&t.setDecoderState(ln({},y.iconId,t.decoderState.state[y.iconId]))})),this.isNeedRenderFooter&&c)document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.background=c.backgroundColor.replace("-diy",""),document.getElementById("".concat(this.jSPlugin.id,"-audioControls")).style.color=c.color.replace("-diy",""),c.btnList.map(function(y,w){if(y.isrender&&t.setDecoderState(ln({},y.iconId,t.decoderState.state[y.iconId])),w==0&&!t.themeInited&&t.activeThemeStatus)var g=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(g),t.themeData.customConfig.bellPoster==1&&!n?t.jSPlugin.pluginStatus.loadingClear():t.jSPlugin.play(),t.themeInited=!0)},50)}),this.setDecoderState({cloudRec:pn(this.jSPlugin.url).type==="cloud.rec",rec:pn(this.jSPlugin.url).type==="rec",type:pn(this.jSPlugin.url).type});else if(!this.themeInited&&this.activeThemeStatus)var E=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(E),t.themeData&&t.themeData.customConfig&&t.themeData.customConfig.bellPoster==1&&!n?t.jSPlugin.pluginStatus.loadingClear():t.jSPlugin.play(),t.themeInited=!0)},50);var C=setInterval(function(){window.EZUIKit[t.jSPlugin.id].state.EZUIKitPlayer.init&&(clearInterval(C),t.reSizeVideo(t.videoWidth,t.videoHeight))},50);this.jSPlugin.Zoom||(this.jSPlugin.Zoom=new $o(this.jSPlugin)),this.getInspectDevInfo(this.jSPlugin,!0,!1)}},{key:"getInspectRecord",value:function(){var t=this,n=function(d){if(d.meta.code==200&&d.data){var c=d.data;c.inspectRange&&t.inspectMapWin.createPolygon(c.inspectRange,"#407AFF","dashed",4,1,"#407AFF",.08),c.inspectPoints&&c.inspectPoints.length>0&&t.inspectMapWin.createInspectPoints(c.inspectPoints),t.inspectMode==="video"&&t.inspectMapWin.map.removeOverlay(t.inspectMapWin.inspectRange),document.getElementById("".concat(t.jSPlugin.id,"-inspectInfo-inspectName"))&&c.inspectName&&(document.getElementById("".concat(t.jSPlugin.id,"-inspectInfo-inspectName")).innerText=""+c.inspectName),document.getElementById("".concat(t.jSPlugin.id,"-inspectInfo-inspectBeginTime"))&&c.beginTime&&(document.getElementById("".concat(t.jSPlugin.id,"-inspectInfo-inspectBeginTime")).innerText="巡检开始时间："+c.beginTime),document.getElementById("".concat(t.jSPlugin.id,"-header-inspectTime"))&&t.timer.createInterval("InspectTimer",function(){document.getElementById("".concat(t.jSPlugin.id,"-header-inspectTime")).innerHTML=t.renderInspectTime(c.beginTime)},1e3),document.getElementById("".concat(t.jSPlugin.id,"-inspectInfo-inspectPerson"))&&c.inspectPerson&&(document.getElementById("".concat(t.jSPlugin.id,"-inspectInfo-inspectPerson")).innerText="本地巡检员："+c.inspectPerson),t.inspectInfo=c,c.inspectRecordId&&ql(t.jSPlugin,c.inspectRecordId,function(E){E.meta.code==200&&E.data&&(t.inspectMapWin.createTrack(E.data,!0),t.timer.createInterval("TraceTimer",function(){c.inspectRecordId&&ql(t.jSPlugin,c.inspectRecordId,function(C){C.meta.code==200&&C.data&&t.inspectMapWin.createTrack(C.data,!1)},function(){})},5e3))},function(){}),t.InspectEvent=new Tf(t.jSPlugin,c.inspectRecordId,t.timer)}},o=function(d){};mf(this.jSPlugin,n,o)}},{key:"getInspectDevInfo",value:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=function(C){C.meta&&C.meta.code==200&&C.data?C.data.status===1?(l&&!n.decoderState.state.play&&(n.jSPlugin.pluginStatus.loadingStart(n.jSPlugin.id),n.jSPlugin.pluginStatus.loadingSetText({text:"视频加载中"}),n.jSPlugin.play()),n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-global-box"),!1),document.getElementById("".concat(n.jSPlugin.id,"-header-deviceName"))&&(document.getElementById("".concat(n.jSPlugin.id,"-header-deviceName")).innerText="".concat(C.data.deviceName,"(").concat(C.data.deviceSerial,")"),document.getElementById("".concat(n.jSPlugin.id,"-header-deviceName")).setAttribute("title","".concat(C.data.deviceName,"(").concat(C.data.deviceSerial,")"))),document.getElementById("".concat(n.jSPlugin.id,"-header-signalType"))&&(document.getElementById("".concat(n.jSPlugin.id,"-header-signalType")).innerHTML=n.renderSignalType(C.data.signalType)),document.getElementById("".concat(n.jSPlugin.id,"-header-batteryStatus"))&&(document.getElementById("".concat(n.jSPlugin.id,"-header-batteryStatus")).innerHTML=n.renderBatteryStatus(C.data.batteryStatus)),n.timer.createInterval("InspectDevInfoTimer",function(){n.getInspectDevInfo(t,!1,!1)},3e5),o&&n.getInspectRecord()):(n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-loading-box"),!1),n.jSPlugin.stop(),n.globalContainer.deviceErrorInfo({tips:"当前设备未在巡检中",refreshBtn:"刷新",refreshShow:!0},function(){n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-no-inspect-box"),!1),n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-loading-box"),!0),n.getInspectDevInfo(t,!0,!0)})):(n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-loading-box"),!1),n.jSPlugin.stop(),n.globalContainer.deviceErrorInfo({tips:C.meta.message,refreshShow:!1}))},c=function(){n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-global-box"),!1)};_f(t,d,c)}},{key:"fetchThemeData",value:function(t){var n=this,o=function(c){if(c.meta.code===0&&c.data)n.activeThemeStatus=!0,n.themeData=c.data,n.jSPlugin.capacity?(n.initThemeData(),n.renderThemeData()):setTimeout(function(){n.initThemeData(),n.renderThemeData()},300);else if(n.activeThemeStatus=!1,n.jSPlugin.pluginStatus.loadingClear(),c.meta.code=="111021"){n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-loading-box"),!1),n.jSPlugin.stop(),n.globalContainer.deviceErrorInfo({tips:"无效的模板id",refreshBtn:"刷新",refreshShow:!1}),n.activeThemeStatusTxt="无效的模板id";return}else if(c.meta.code=="111023"){n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-loading-box"),!1),n.jSPlugin.stop(),n.globalContainer.deviceErrorInfo({tips:"您的试用特权已到期，需前往轻应用控制台购买后使用。",refreshBtn:"刷新",refreshShow:!1}),n.activeThemeStatusTxt="试用特权已到期";return}else{n.globalContainer.globalContainerToggle("".concat(n.jSPlugin.id,"-inspect-loading-box"),!1),n.jSPlugin.stop(),n.globalContainer.deviceErrorInfo({tips:"模板未激活，请先在开放平台轻应用控制台购买模板",refreshBtn:"刷新",refreshShow:!1}),n.activeThemeStatusTxt="模板未激活";return}},l=function(){n.themeData=$l.data,n.themeData.header&&(n.themeData.header.btnList=n.themeData.header.btnList.sort(function(c,E){return c.btnKey.split("-")[3]-E.btnKey.split("-")[3]})),n.themeData.footer&&(n.themeData.footer.btnList=n.themeData.footer.btnList.sort(function(c,E){return c.btnKey.split("-")[3]-E.btnKey.split("-")[3]})),n.initThemeData(),n.renderThemeData()};Ts(this.jSPlugin,t,o,l)}},{key:"reSizeVideo",value:function(t,n){if(document.getElementById("".concat(this.jSPlugin.id)).style.width=t+"px",document.getElementById("".concat(this.jSPlugin.id)).style.height=n+"px",this.jSPlugin&&this.jSPlugin.bPlay)this.jSPlugin.JS_Resize(t,n);else{document.getElementById("".concat(this.jSPlugin.id,"-player"))&&(document.getElementById("".concat(this.jSPlugin.id,"-player")).width=t,document.getElementById("".concat(this.jSPlugin.id,"-player")).height=n,document.getElementById("".concat(this.jSPlugin.id,"-player")).style.width=t+"px",document.getElementById("".concat(this.jSPlugin.id,"-player")).style.height=n+"px",document.getElementById("".concat(this.jSPlugin.id,"-container-0")).style.height=n+"px");var o=1;if(document.getElementById("".concat(this.jSPlugin.id,"canvas0"))){var l=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);l&&(o=2),document.getElementById("".concat(this.jSPlugin.id,"canvas0")).style.width=t*o+"px",document.getElementById("".concat(this.jSPlugin.id,"canvas0")).style.height=n*o+"px",document.getElementById("".concat(this.jSPlugin.id,"canvas0")).width=t*o,document.getElementById("".concat(this.jSPlugin.id,"canvas0")).height=n*o,document.getElementById("".concat(this.jSPlugin.id,"canvas0")).parentNode.style.width=t*o+"px",document.getElementById("".concat(this.jSPlugin.id,"canvas0")).parentNode.style.height=n*o+"px",document.getElementById("".concat(this.jSPlugin.id,"canvas_draw0")).height=n*o}}}},{key:"reSize",value:function(t,n){var o=t*.3333,l=n*.3333;document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-inspectInfoControl")).style.width=t+this.jSPlugin.inspectVideoWidth+"px"),document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-headControl")).style.width=t+"px"),document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.width=t+"px"),this.jSPlugin.Theme.inspectMode==="video"?(this.reSizeVideo(t,n),document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.top=0),document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.width=o+"px",document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.height=l+"px"):(document.getElementById("".concat(this.jSPlugin.id,"-headControl"))&&(document.getElementById("".concat(this.jSPlugin.id,"-ez-iframe-footer-container")).style.top=n+"px"),this.reSizeVideo(o,l),document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.width=t+"px",document.getElementById("".concat(this.jSPlugin.id,"-mapbox")).style.height=n+"px"),document.getElementById("".concat(this.jSPlugin.id,"-miniToggle")).style.bottom=l/2+96-30+"px",document.getElementById("".concat(this.jSPlugin.id,"-miniToggle")).style.right=this.jSPlugin.inspectVideoWidth+o+"px"}}]),Z}(),kf=function(){function Z(m){var t=this;if(En(this,Z),ln(this,"changeInspectMode",function(n){t.inspectMode=n}),this.jSPlugin=m,this.videoWidth=m.width,this.videoHeight=m.height,this.inspectMode="video",this.autoFocus=0,this.decoderState={state:{isEditing:!1,play:!1,sound:!1,recordvideo:!1,recordCount:"00:00",talk:!1,mute:!1,rejection:!1,cloudRec:pn(m.url).type==="cloud.rec",rec:pn(m.url).type==="rec",type:pn(m.url).type}},this.isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),typeof m.isMobile<"u"&&(this.isMobile=m.isMobile),this.themeData=$l.data,this.jSPlugin.themeId=="themeData"&&(this.themeData=this.jSPlugin.params.themeData),this.timer||(this.timer=new ff(m)),this.jSPlugin.themeId)switch(this.isMobile||(this.inspect=new Rf(this.jSPlugin,this.themeData,this.setDecoderState,this.decoderState,this.inspectMode,this.changeInspectMode,this.timer)),this.jSPlugin.themeId){case"themeData":this.themeData=this.jSPlugin.params.themeData,this.inspect.initThemeData(),this.inspect.renderThemeData();break;default:this.inspect.fetchThemeData(this.jSPlugin.themeId);break}this.jSPlugin.Talk||(this.jSPlugin.Talk=new Cs(this.jSPlugin)),po("".concat(this.jSPlugin.staticPath,"/css/theme.css")),po("".concat(this.jSPlugin.staticPath,"/css/component.css")),po("".concat(this.jSPlugin.staticPath,"/css/inspectTheme.css"))}return Rn(Z,[{key:"setDecoderState",value:function(t,n){var o=this,l="#FFFFFF",d="#1890FF";Object.keys(t).map(function(c){switch(c){case"talk":document.getElementById("".concat(o.jSPlugin.id,"-talk"))&&(document.getElementById("".concat(o.jSPlugin.id,"-talk")).className=t[c]?"active":"",document.getElementById("".concat(o.jSPlugin.id,"-talk-content")).childNodes[1].style.fill=t[c]?d:l,document.getElementById("".concat(o.jSPlugin.id,"-talk-content")).childNodes[2].style.color=t[c]?d:l);break;case"sound":document.getElementById("".concat(o.jSPlugin.id,"-sound"))&&(t[c]?(document.getElementById("".concat(o.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:inline-block",document.getElementById("".concat(o.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:none",document.getElementById("".concat(o.jSPlugin.id,"-sound")).className=t[c]?"active":"",document.getElementById("".concat(o.jSPlugin.id,"-sound-content")).childNodes[0].children[1].style.fill=t[c]?d:l,document.getElementById("".concat(o.jSPlugin.id,"-sound-label")).style.color=t[c]?d:l):(document.getElementById("".concat(o.jSPlugin.id,"-sound-content")).children[0].children[0].style="display:inline-block",document.getElementById("".concat(o.jSPlugin.id,"-sound-content")).children[0].children[1].style="display:none",document.getElementById("".concat(o.jSPlugin.id,"-sound")).className=t[c]?"active":"",document.getElementById("".concat(o.jSPlugin.id,"-sound-label")).style.color=t[c]?d:l));break}o.decoderState.state=Object.assign(o.decoderState.state,t)})}},{key:"setDisabled",value:function(t){var n=this.decoderState.state,o=n.sound;n.hd,document.getElementById(o?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon"))!=null&&document.getElementById(o?"".concat(this.jSPlugin.id,"-sound-icon"):"".concat(this.jSPlugin.id,"-nosound-icon")).setAttribute("style",t?"cursor: not-allowed;fill: gray":"cursor: default"),document.getElementById("".concat(this.jSPlugin.id,"-sound-label"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-sound-label")).setAttribute("style",t?"cursor: not-allowed; color: gray":"cursor: default"),document.getElementById("".concat(this.jSPlugin.id,"-talk-icon"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-talk-icon")).setAttribute("style",t?"cursor: not-allowed;fill: gray":"cursor: default"),document.getElementById("".concat(this.jSPlugin.id,"-talk-label"))!=null&&document.getElementById("".concat(this.jSPlugin.id,"-talk-label")).setAttribute("style",t?"cursor: not-allowed; color: gray":"cursor: default")}},{key:"inspectEnding",value:function(){var t=document.createElement("div");t.id="".concat(this.jSPlugin.id,"-inspect-ending-box"),t.style="width:100%; position: absolute; z-index: 10000;  top:58px; bottom:0; left:0; background: #ffffff;",t.innerHTML=`<div style="
      overflow: auto;
      box-sizing: border-box;
      font-size: 14px;
      color: #595959;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
    ">
      <div>
        <div style="text-align:center; height: 21px;">
          <svg t="1689074472491" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7172" xmlns:xlink="http://www.w3.org/1999/xlink" width="21" height="21"><path d="M512 64a448 448 0 1 0 0 896A448 448 0 0 0 512 64z m-32 232c0-4.416 3.584-8 8-8h48c4.416 0 8 3.584 8 8v272A8 8 0 0 1 536 576h-48a8 8 0 0 1-8-8v-272zM512 736A48 48 0 1 1 512 640a48 48 0 0 1 0 96z" fill="#FF4D4F" p-id="7173"></path></svg>
        </div>
        <div style="color: #595959; font-size:14px; margin: 5px 0 16px;font-weight: 400; text-align: center;">巡检已结束</div>
      </div>
    </div>
    `,document.getElementById("".concat(this.jSPlugin.id,"-wrap")).appendChild(t),this.jSPlugin.Zoom&&this.jSPlugin.Zoom.stopZoom()}}]),Z}(),If=function(){function Z(){En(this,Z),this.events={}}return Rn(Z,[{key:"on",value:function(t,n){!t||!n||(this.events[t]=this.events[t]||[],this.events[t].push(n))}},{key:"emit",value:function(t,n){t&&this.events[t]&&this.events[t].forEach(function(o){return o(n)})}},{key:"off",value:function(t,n){!t||!n||this.events[t]&&this.events[t].splice(this.events[t].indexOf(n),1)}},{key:"once",value:function(t,n){var o=this;function l(){var d=Array.prototype.slice.call(arguments);n.apply(null,d),o.off(t,l)}this.on(t,l)}},{key:"removeAllListener",value:function(){this.events={}}}]),Z}();(function(Z,m){Ni(xo)==="object"&&Ni(xo.exports)==="object"?xo.exports=Z.document?m(Z,!0):function(t){if(!t.document)throw new Error("EZUIPlayer requires a window with a document");return m(t)}:m(Z)})(typeof window<"u"?window:void 0,function(Z,m){var t;function n(w,g){for(var p=document.getElementsByTagName("head")[0].getElementsByTagName("script"),te=!1,ae=0;ae<p.length;ae++)p[ae].getAttribute("src")==w&&(te=!0,g());if(!te){var de=document.createElement("script");de.setAttribute("src",w),de.onload=g,document.getElementsByTagName("head")[0].appendChild(de)}}function o(w,g){for(var p=document.getElementsByTagName("head")[0].getElementsByTagName("link"),te=!1,ae=0;ae<p.length;ae++)p[ae].getAttribute("href")==w&&(te=!0,g());if(!te){var de=document.createElement("link");de.rel="stylesheet",de.type="text/css",de.href=w,de.onload=g,document.getElementsByTagName("head")[0].appendChild(de)}}function l(w,g,p,te,ae,de){var ie=w,we=new XMLHttpRequest;we.onreadystatechange=function(){if(we.readyState==4&&we.status==200){var x=JSON.parse(we.responseText);ae(x)}},we.open(g,ie,!0);var Ve=new FormData;for(var ue in p)Ve.append(ue,p[ue]);we.send(Ve)}var d={EZUIKitPlayer:void 0,EZUIKitTalk:void 0,opt:{apiDomain:"https://open.ys7.com/api/lapp/live/talk/url",filePath:"https://open.ys7.com/assets/ezuikit_v2.6.4",accessToken:"",url:"",deviceSerial:"",channelNo:"",id:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,videoLoading:!1},state:(t={countTimer:void 0,recodeTime:0,recodeTimer:void 0},ln(t,"recodeTime",0),ln(t,"fetchDefaultList",!1),ln(t,"page",0),ln(t,"pageSize",5),t),handleTalkSuccess:function(){},handleTalkError:function(){}},c="https://open.ys7.com",E=c,C=function(g){var x=this;this.opt={id:g.id,apiDomain:c+"/api/lapp/live/talk/url",filePath:E+"/assets/ezuikit_v2.6.4",decoderVersion:"",accessToken:"",url:"",deviceSerial:"",channelNo:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,fullScreenStatus:0,bSupporDoubleClickFull:!0,videoLoading:!1},this.params=g,g.id&&(this.opt.id=g.id),g.accessToken&&(this.opt.accessToken=g.accessToken),typeof g.audio<"u"&&(this.opt.audio=g.audio),typeof g.decoderVersion<"u"&&(this.opt.decoderVersion=g.decoderVersion),typeof g.env<"u"&&(typeof g.env.domain<"u"&&(c=g.env.domain,this.opt.apiDomain=c+"/api/lapp/live/talk/url"),typeof g.env.filePathDomain<"u"&&(E=g.env.filePathDomain,this.opt.filePathDomain=g.env.filePathDomain)),g.url&&(this.opt.url=g.url,this.opt.deviceSerial=g.url.split("/")[3],this.opt.channelNo=g.url.split("/")[4].split(".")[0]),typeof g.template<"u"&&(this.opt.template=g.template),g.plugin&&(this.opt.plugin=g.plugin),typeof g.autoplay<"u"&&(this.opt.autoplay=g.autoplay?1:0),typeof g.bSupporDoubleClickFull<"u"&&(this.opt.bSupporDoubleClickFull=g.bSupporDoubleClickFull),typeof g.handleTalkSuccess<"u"&&(Z.EZUIKit.handleTalkSuccess=g.handleTalkSuccess),typeof g.handleTalkError<"u"&&(Z.EZUIKit.handleTalkError=g.handleTalkError);var p=this.opt.id,te=document.getElementById(p);te.style.fontSize=0,te.style.overflowY="auto",te.style.position="relative";var ae=document.createElement("iframe");function de(){switch(x.opt.template){case"simple":var ne=c+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+x.opt.url.replace("?","&")+"&autoplay="+x.opt.autoplay+"&audio="+x.opt.audio+"&accessToken="+g.accessToken+"&templete=0&id="+p+"&decoderVersion="+x.opt.decoderVersion,Q="";return typeof g.controls<"u"&&g.controls&&(console.log("typeof",Ni(g.controls)),Q="play,voice,hd,fullScreen",g.controls.length>0&&(Q=g.controls.join(","),ne+="&controls="+Q)),g.websocketParams&&(ne+="&websocketParams="+JSON.stringify(g.websocketParams)),ne;case"standard":return c+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+x.opt.url.replace("?","&")+"&autoplay="+x.opt.autoplay+"&audio="+x.opt.audio+"&accessToken="+g.accessToken+"&templete=1&id="+p+"&decoderVersion="+x.opt.decoderVersion;case"security":return c+"/ezopen/h5/iframe_se?bSupporDoubleClickFull=0&url="+x.opt.url.replace("?","&")+"&autoplay="+x.opt.autoplay+"&audio="+x.opt.audio+"&accessToken="+g.accessToken+"&templete=0&id="+p+"&decoderVersion="+x.opt.decoderVersion;case"theme":return ne=c+"/jssdk/theme.html?url=".concat(g.url,"&accessToken=").concat(g.accessToken,"&id=").concat(p,"&isMobile=").concat(g.isMobile),typeof g.isMobile<"u"&&(ne+="&isMobile="+g.isMobile),typeof g.autoplay<"u"&&(ne+="&autoplay="+g.autoplay),typeof g.domain<"u"&&g.domain=="https://test12open.ys7.com"&&(ne+="&env=test12"),typeof g.env<"u"&&typeof g.env.domain<"u"&&g.env.domain=="https://test12open.ys7.com"&&(ne+="&env=test12"),typeof g.header<"u"&&(ne+="&header="+g.header),ne;default:return c+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+x.opt.url.replace("?","&")+"&autoplay="+x.opt.autoplay+"&audio="+x.opt.audio+"&accessToken="+g.accessToken+"&templete=0&id="+p+"&decoderVersion="+x.opt.decoderVersion}}ae.src=de();var ie=document.getElementById(p).offsetHeight,we=document.getElementById(p).offsetWidth;g.height&&(ie=parseInt(g.height),/\%$/.test(g.height)&&(we=document.getElementById(p).offsetWidth*(parseInt(g.height)/100))),g.width&&(we=parseInt(g.width),/\%$/.test(g.width)&&(we=document.getElementById(p).offsetWidth*(parseInt(g.width)/100))),ae.width=we,ae.height=ie,ae.id="EZUIKitPlayer-"+p,ae.setAttribute("allowfullscreen",!0),ae.setAttribute("allow","autoplay"),ae.setAttribute("frameborder",0),te.appendChild(ae);var Ve=x.opt.filePath+"/js/jquery.js",ue="https://open.ys7.com/assets/layer/layer.js";n(Ve,function(){n(ue,function(){if(ze().headerContainer){var ne=document.createElement("div");ne.setAttribute("class","panel-top");var Q=document.createElement("div");if(Q.setAttribute("class","contros"),ne.appendChild(Q),te.insertBefore(ne,ae),ze().capturePictureModule){var ye=document.createElement("span");ye.innerHTML='<span title="截图"><svg id="capturePicture" title="截图" t="1578882764585" class="icon" viewBox="0 0 1024 1024" version="1.1"  xmlns="http://www.w3.org/2000/svg" p-id="5958" width="24" height="24">  <path    d="M887.296 315.904h-153.6c-51.2 0-68.096-102.4-119.296-102.4H392.704c-34.304 0-51.2 102.4-102.4 102.4h-153.6c-29.696 0-51.2 21.504-51.2 51.2v439.296c0 25.6 21.504 47.104 51.2 47.104h751.104c29.696 0 51.2-21.504 51.2-51.2v-435.2c-0.512-30.208-21.504-51.2-51.712-51.2zM512 768c-115.2 0-204.8-89.6-204.8-200.704s89.6-200.704 204.8-200.704 204.8 89.6 204.8 200.704-93.696 200.704-204.8 200.704z m247.296-354.304c-12.8 0-25.6-12.8-25.6-25.6s12.8-25.6 25.6-25.6 25.6 12.8 25.6 25.6c0 17.408-12.8 25.6-25.6 25.6zM256 264.704c0-8.704-8.704-16.896-16.896-16.896h-51.2c-8.704 0-16.896 8.704-16.896 16.896V281.6H256v-16.896z m256 148.992c-85.504 0-153.6 68.096-153.6 153.6s68.096 153.6 153.6 153.6 153.6-68.096 153.6-153.6-68.096-153.6-153.6-153.6z"    fill="#ffffff" p-id="5959"></path></svg></span>',ye.onclick=function(){x.capturePicture()},Q.appendChild(ye)}if(console.log("matchHeaderOpt().saveModule",ze().saveModule),ze().saveModule){var se=document.createElement("span");se.innerHTML='<span title="开始录像">  <svg id="startSave" t="1578882716693" class="icon" viewBox="0 0 1024 1024" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">    <path      d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"      p-id="3783" fill="#ffffff"></path>  </svg></span>',se.onclick=function(){x.startSave(),document.getElementById("startSave").setAttribute("class","icon hide"),document.getElementById("stopSave").setAttribute("class","icon")},Q.appendChild(se);var Ze=document.createElement("span");Ze.innerHTML='<span title="结束录像"> <svg id="stopSave" t="1578882716693" class="icon hide" viewBox="0 0 1024 1024" version="1.1"   xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">   <path     d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"     p-id="3783" fill="red"></path> </svg> </span>',Ze.onclick=function(){x.stopSave(),document.getElementById("stopSave").setAttribute("class","icon hide"),document.getElementById("startSave").setAttribute("class","icon")},Q.appendChild(Ze)}if(ze().zoomModule){var Qe=document.createElement("span");Qe.innerHTML='<span title="开启电子放大">  <svg id="enableZoom" t="1578882639834" class="icon" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="#ffffff"></path>  </svg></span>',Qe.onclick=function(){x.enableZoom(),document.getElementById("enableZoom").setAttribute("class","icon hide"),document.getElementById("closeZoom").setAttribute("class","icon")},Q.appendChild(Qe);var M=document.createElement("span");M.innerHTML='<span title="关闭电子放大">  <svg id="closeZoom" t="1578882639834" class="icon hide" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="red"></path>  </svg></span>',M.onclick=function(){x.closeZoom(),document.getElementById("closeZoom").setAttribute("class","icon hide"),document.getElementById("enableZoom").setAttribute("class","icon")},Q.appendChild(M)}}function Te(){var re={footerContainer:!1,talkModule:!1,broadcastModule:!1,hdModule:!1,fullScreenModule:!1},J=x.opt.template;switch(J){case"simple":if(g.footer&&g.footer instanceof Array){var De=g.footer;re={footerContainer:!0,talkModule:De.indexOf("talk")!==-1,broadcastModule:De.indexOf("broadcast")!==-1,hdModule:De.indexOf("hd")!==-1,fullScreenModule:De.indexOf("fullScreen")!==-1}}break;case"standard":if(g.footer&&g.footer instanceof Array){var De=g.footer;re={footerContainer:!0,talkModule:De.indexOf("talk")!==-1,broadcastModule:De.indexOf("broadcast")!==-1,hdModule:De.indexOf("hd")!==-1,fullScreenModule:De.indexOf("fullScreen")!==-1}}break;case"security":break;case"voice":re={footerContainer:!0,talkModule:!0,broadcastModule:!0,hdModule:!0,fullScreenModule:!0};break}return re}function ze(){var re={headerContainer:!1,capturePictureModule:!1,saveModule:!1,zoomModule:!1},J=x.opt.template;switch(J){case"simple":if(g.header&&g.header instanceof Array){var De=g.header;re={headerContainer:!0,capturePictureModule:De.indexOf("capturePicture")!==-1,saveModule:De.indexOf("save")!==-1,zoomModule:De.indexOf("zoom")!==-1}}break;case"standard":break;case"security":break;case"voice":re={headerContainer:!0,capturePictureModule:!0,saveModule:!0,zoomModule:!0};break}return re}if(Te().footerContainer||x.opt.plugin.indexOf("talk")!==-1){var oi=x.opt.filePath+"/npm/css/recoder.css",wi=x.opt.filePath+"/npm/js/recoder.js",ui=x.opt.filePath+"/recorder.js";if(o(oi,function(){}),n(wi,function(){n(ui,function(){})}),x.opt.plugin.indexOf("talk")!==-1||Te().talkModule){var di=function(J){if(console.log("data",J),J.code==200){var De=J.data;if(De){var Ye=De.rtcUrl;Ye.indexOf("ws")===-1&&(Ye=Ye.replace("https","wss").replace("rtcgw","rtcgw-ws")),x.opt.rtcUrl=Ye,x.opt.ttsUrl="tts://"+De.ttsUrl;var et="talk://"+x.opt.deviceSerial+":0:"+x.opt.channelNo+":cas.ys7.com:6500";if(x.opt.talkLink=x.opt.ttsUrl+"/"+et,x.opt.stream=De.stream,console.log("_this.opt",x.opt),!x.opt.isReliesReady){var R=x.opt.filePath+"/npm/js/adapeter.js",He=x.opt.filePath+"/npm/js/janus.js",G=x.opt.filePath+"/npm/js/tts.js";console.log("加载jquery.js"),n(R,function(){console.log("加载adapeter.js"),n(He,function(){console.log("加载janus.js"),n(G,function(){console.log("加载tts.js"),x.opt.isReliesReady=!0})})},function(){return!!Z.adapter})}if(!document.getElementById("audioleft")){var ge=document.createElement("div");ge.style.display="none",ge.id="audioleft",document.body.appendChild(ge)}if(!document.getElementById("audioright")){var xe=document.createElement("div");xe.style.display="none",xe.id="audioright",document.body.appendChild(xe)}}}d.opt=x.opt,Z.EZUIKit&&(Z.EZUIKit.opt=x.opt)};l(x.opt.apiDomain,"POST",{accessToken:x.opt.accessToken,deviceSerial:x.opt.deviceSerial,channelNo:x.opt.channelNo},"",di)}if(Te().footerContainer){var zi=function(J,De){if(clearInterval(d.state.countTimer),J==="add"){var Ye=De;d.state.countTimer=setInterval(function(){++Ye,document.getElementById("time-area").innerHTML=et(Ye)},1e3)}else if(J==="sub"){var Ye=De;d.state.countTimer=setInterval(function(){Ye>0?(Ye--,document.getElementById("time-area").innerHTML=et(Ye)):(clearInterval(d.state.countTimer),d.state.countTimer=void 0,console.log("倒计时结束，开启声音"))},1e3)}else J==="destory"&&(clearInterval(d.state.countTimer),d.state.countTimer=void 0,document.getElementById("time-area").innerHTML="00:00");function et(R){var He=parseInt(R),G=0,ge=0,xe="00",ke="00",ce="00";return He>59&&(G=parseInt(He/60),He=parseInt(He%60),G>59&&(ge=parseInt(G/60),G=parseInt(G%60))),xe=parseInt(He)>9?parseInt(He):"0"+parseInt(He),ke=parseInt(G)>9?parseInt(G):"0"+parseInt(G),ce=parseInt(ge)>9?parseInt(ge):"0"+parseInt(ge),ge>0?ce+":"+ke+":"+xe:G>0?ke+":"+xe:"00:"+xe}},$e=document.createElement("div");if($e.setAttribute("class","audio-controls"),te.appendChild($e),Te().hdModule||Te().fullScreenModule){var st=document.createElement("div");if(st.setAttribute("class","contros"),$e.appendChild(st),Te().hdModule){var Ke=document.createElement("span");Ke.setAttribute("id","video-hd"),Ke.innerHTML=x.opt.url.indexOf(".hd")===-1?"标清":"高清",Ke.onclick=function(){if(x.opt.videoLoading)return layer.msg("视频加载中，请稍后"),!1;var re=x.stop();x.opt.videoLoading=!0,re.then(function(J){x.opt.videoLoading=!1,x.opt.url.indexOf(".hd")===-1?(x.opt.url=x.opt.url.replace(".live",".hd.live"),Ke.innerHTML=x.opt.url.indexOf(".hd")===-1?"标清":"高清"):(x.opt.url=x.opt.url.replace(".hd.live",".live"),Ke.innerHTML=x.opt.url.indexOf(".hd")===-1?"标清":"高清"),x.play(x.opt.url)}).catch(function(J){console.log("error",J)})},st.appendChild(Ke)}if(Te().fullScreenModule){var Ne=document.createElement("span");Ne.setAttribute("class","hide"),Ne.setAttribute("id","ezuikit-open-sound"),Ne.setAttribute("title","打开声音"),Ne.setAttribute("style","vertical-align: top;"),Ne.innerHTML='<svg t="1590476263239" class="icon" viewBox="0 0 1178 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2273" width="16" height="16"><path d="M665.6 51.2 665.6 51.2c-10.24-30.72-40.96-51.2-71.68-51.2-5.12 0-15.36 0-20.48 5.12l0 0L358.4 153.6 51.2 209.92l0 0C20.48 220.16 0 250.88 0 281.6 0 286.72 0 291.84 0 307.2l0 0 0 409.6 0 0c0 15.36 0 20.48 0 25.6 0 30.72 20.48 61.44 51.2 71.68l0 0L358.4 870.4l97.28 71.68 107.52 76.8 0 0c5.12 5.12 15.36 5.12 25.6 5.12 40.96 0 76.8-35.84 76.8-76.8 0-10.24 0-10.24 0-25.6l0 0L665.6 51.2zM563.2 870.4l-153.6-102.4-307.2-51.2L102.4 307.2l307.2-51.2 153.6-102.4L563.2 870.4z" p-id="2274" fill="#FF0000"></path><path d="M1049.6 537.6l112.64-112.64c20.48-20.48 20.48-56.32 0-76.8-20.48-20.48-56.32-20.48-76.8 0L972.8 460.8l-112.64-112.64c0 0 0 0 0 0-20.48-20.48-56.32-20.48-76.8 0 0 0 0 0 0 0-20.48 20.48-20.48 56.32 0 76.8l112.64 112.64-112.64 112.64c-20.48 20.48-20.48 56.32 0 76.8 20.48 20.48 56.32 20.48 76.8 0L972.8 614.4l112.64 112.64c20.48 20.48 56.32 20.48 76.8 0s20.48-56.32 0-76.8L1049.6 537.6z" p-id="2275" fill="#FF0000"></path></svg>',Ne.onclick=function(){x.openSound(0),Ne.setAttribute("class","hide"),at.setAttribute("class","")};var at=document.createElement("span");Ne.setAttribute("id","ezuikit-close-sound"),at.setAttribute("class","hide"),at.setAttribute("title","关闭声音"),at.setAttribute("style","vertical-align: top;"),at.innerHTML='<svg t="1590414410633" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20545" width="16" height="16"><path d="M840.533333 98.133333c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733334C883.2 256 938.666667 392.533333 938.666667 533.333333c0 140.8-55.466667 277.333333-157.866667 375.466667-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 21.333333 12.8 29.866667 12.8 8.533333 0 21.333333-4.266667 29.866666-12.8 115.2-110.933333 183.466667-268.8 183.466667-435.2 0-166.4-68.266667-324.266667-183.466667-435.2zM571.733333 12.8c-17.066667-8.533333-34.133333-4.266667-46.933333 8.533333L281.6 256H42.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v426.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h238.933333l243.2 234.666667c8.533333 8.533333 17.066667 12.8 29.866667 12.8 4.266667 0 12.8 0 17.066666-4.266667 17.066667-8.533333 25.6-21.333333 25.6-38.4V51.2c0-17.066667-8.533333-34.133333-25.6-38.4zM512 870.4l-183.466667-179.2c-8.533333-4.266667-17.066667-8.533333-29.866666-8.533333H85.333333V341.333333h213.333334c12.8 0 21.333333-4.266667 29.866666-12.8L512 153.6v716.8z" p-id="20546" fill="#ffffff"></path><path d="M759.466667 349.866667c-12.8-21.333333-38.4-25.6-59.733334-8.533334-21.333333 12.8-25.6 38.4-8.533333 59.733334 21.333333 29.866667 34.133333 76.8 34.133333 123.733333 0 46.933333-12.8 93.866667-34.133333 123.733333-12.8 21.333333-8.533333 46.933333 8.533333 59.733334 8.533333 4.266667 17.066667 8.533333 25.6 8.533333 12.8 0 25.6-4.266667 34.133334-17.066667 34.133333-46.933333 51.2-106.666667 51.2-174.933333 0-68.266667-17.066667-128-51.2-174.933333z" p-id="20547" fill="#ffffff"></path></svg>',at.onclick=function(){x.closeSound(0),Ne.setAttribute("class",""),at.setAttribute("class","hide")},st.appendChild(Ne),st.appendChild(at)}if(x.opt.audio==1?at.setAttribute("class",""):(Ne.setAttribute("class",""),x.closeSound(0)),Te().fullScreenModule){var Ut=document.createElement("span");Ut.setAttribute("title","全屏"),Ut.setAttribute("style","vertical-align: top;"),Ut.innerHTML='<svg id="fullScreen" t="1578020167938" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"> <path d="M348.373333 625.706667l-128 128-64 64v-128a33.28 33.28 0 0 0-35.413333-35.413334A33.493333 33.493333 0 0 0 85.333333 689.706667v213.333333A33.706667 33.706667 0 0 0 120.96 938.666667h213.333333a35.626667 35.626667 0 0 0 0-71.04h-128l64-64 128-128a35.2 35.2 0 0 0-49.92-49.92zM206.293333 156.373333h128a33.28 33.28 0 0 0 35.413334-35.413333A33.493333 33.493333 0 0 0 334.293333 85.333333H113.706667c-7.04 0-14.08 7.04-21.333334 14.293334a26.026667 26.026667 0 0 0-7.04 21.333333v213.333333a33.493333 33.493333 0 0 0 35.626667 35.413334 33.28 33.28 0 0 0 35.413333-35.413334v-128l192 192a35.2 35.2 0 0 0 49.92-49.92zM903.04 85.333333h-213.333333a33.493333 33.493333 0 0 0-35.413334 35.626667 33.28 33.28 0 0 0 35.413334 35.413333h128l-64 64-128 128a35.2 35.2 0 0 0 49.92 49.92l128-128 64-64v128a35.626667 35.626667 0 0 0 71.04 0v-213.333333A33.706667 33.706667 0 0 0 903.04 85.333333zM903.04 654.293333a33.28 33.28 0 0 0-35.413333 35.413334v128l-64-64-128-128a35.2 35.2 0 0 0-49.92 49.92l128 128 64 64h-128a35.626667 35.626667 0 0 0 0 71.04h213.333333A33.706667 33.706667 0 0 0 938.666667 903.04v-213.333333a33.493333 33.493333 0 0 0-35.626667-35.413334z" p-id="5036" fill="#ffffff"></path></svg>',Ut.onclick=function(){x.fullScreen()},st.appendChild(Ut)}}if(Te().talkModule){var Wt=document.createElement("div"),kt=document.createElement("div");Wt.setAttribute("class","ptp-talk off"),Wt.innerHTML='<span title="对讲"><svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1641" width="16" height="16">  <path    d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"    p-id="1642" fill="#ffffff"></path>  <path    d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"    p-id="1643" fill="#ffffff"></path>  <path    d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"    p-id="1644" fill="#ffffff"></path> </svg> </span> <span>开启对讲</span>',Wt.onclick=function(){if(console.log("EZUIKit.state.countTimer",d.state.countTimer),d.state.countTimer)return Z.layer.msg("语音设备正忙，请稍后重试"),!1;zi("add",0),console.log("开始对讲，关闭声音"),x.closeSound(0),console.log(x.opt),x.startTalk(),this.setAttribute("class","ptp-talk off hide"),kt.setAttribute("class","ptp-talk on")},kt.setAttribute("class","ptp-talk on hide"),kt.innerHTML='<span title="对讲"> <svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1641" width="16" height="16">    <path      d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"      p-id="1642" fill="#ff0000"></path>    <path      d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"      p-id="1643" fill="#ff0000"></path>    <path      d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"      p-id="1644" fill="#ff0000"></path>  </svg> </span><span>关闭对讲</span>',kt.onclick=function(){console.log(x.opt),x.stopTalk(),zi("destory",0),x.openSound(0),this.setAttribute("class","ptp-talk on hide"),Wt.setAttribute("class","ptp-talk off")},$e.appendChild(Wt),$e.appendChild(kt)}if(Te().broadcastModule){var ee=function re(J){function De(Ye){console.log("data",Ye),Ye.code==200&&(me(Ye.data,5),d.state.page=Ye.page.page,J==0&&Ye.data.length==0&&!d.state.fetchDefaultList&&(d.state.fetchDefaultList=!0,re(0)))}l(c+"/api/lapp/voice/query","POST",{accessToken:x.opt.accessToken,pageStart:J,pageSize:d.state.pageSize,default:d.state.fetchDefaultList?"true":"false"},"",De)},me=function(J){if(console.log("renderVoliceList",J),J&&J.length>0){for(var De=0;De<J.length;De++){var Ye=document.createElement("li");Ye.innerHTML="<li class='voice-item' id='voice-item-"+De+"' data-time="+(J[De].duration||20)+" data-url="+J[De].fileUrl+">"+(J[De].voiceName.length>10?J[De].voiceName.substr(0,10)+"...":J[De].voiceName)+"</li>",document.getElementsByClassName("voice-list-ul")[0].append(Ye),Ye.onclick=function(et){console.log("点击元素",et.target,et.target.dataset.url);var R=et.target.dataset.url,He=et.target.dataset.time;P(R,He)}}J.length===d.state.pageSize?document.getElementById("voice-list-end").innerHTML="向下滚动加载更多":document.getElementById("voice-list-end").innerHTML="没有更多数据了"}},P=function(J,De){console.log("播放语音",J,De);function Ye(et){console.log("data.data",et.data),et.code==200?zi("sub",parseInt(De)):et.code=="10001"?Z.layer.msg("未找到当前语音"):Z.layer.msg(et.msg||"发送失败，请稍后再试")}l(c+"/api/lapp/voice/send","POST",{accessToken:x.opt.accessToken,deviceSerial:x.opt.deviceSerial,channelNo:x.opt.channelNo,fileUrl:J},"",Ye)},Y=document.createElement("div"),Oe=document.createElement("div");Y.setAttribute("class","broadcast off"),Oe.setAttribute("class","broadcast on hide"),Y.innerHTML=' <span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ffffff" p-id="1127"></path>  </svg></span><span>语音播报</span>',Y.onclick=function(){this.setAttribute("class","broadcast off hide"),Oe.setAttribute("class","broadcast on")},Oe.innerHTML='<div class="pop-hover">  <div class="pop-hover-content">    <div class="vioce-list" id="voice-list">      <ul class="voice-list-ul">      </ul>      <div id="voice-list-end"></div>    </div>    <div id="voice-custom" style="text-align: center;">自定义语音</div>  </div></div><span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ff0000" p-id="1127"></path>  </svg></span><span>语音播报</span>',Oe.onclick=function(){this.setAttribute("class","broadcast on hide"),Y.setAttribute("class","broadcast off")},$e.appendChild(Y),$e.appendChild(Oe),document.getElementById("voice-custom").onclick=function(){console.log("显示自定义语音"),N.setAttribute("class","speak off")},ee(0);var N=document.createElement("div"),fe=document.createElement("div");N.setAttribute("class","speak off hide"),fe.setAttribute("class","speak on hide"),N.setAttribute("id","startSpeak"),fe.setAttribute("id","stopSpeak"),N.innerHTML='<span title="按住说话">  <svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1639" width="16" height="16">    <path      d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"      p-id="1640" fill="#ffffff"></path>  </svg></span><span>按住说话</span>',fe.innerHTML='<span title="按住说话"><svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1639" width="16" height="16">  <path    d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"    p-id="1640" fill="#ff0000"></path></svg></span><span>松开发送</span>',$e.appendChild(N),$e.appendChild(fe),document.getElementById("voice-list").onscroll=function(re){var J=this.scrollHeight;console.log("sum",J,this.scrollTop,document.getElementById("voice-list").clientHeight),J<=this.scrollTop+this.clientHeight&&(console.log("拖动到底，执行加载",d.state.page),ee(++d.state.page))};var I=document.createElement("div");I.setAttribute("class","time-area"),I.setAttribute("id","time-area"),I.innerHTML="00:00",$e.appendChild(I);var L;document.getElementById("startSpeak").onmousedown=function(){if(d.state.countTimer)return Z.layer.msg("语音设备正忙，请稍后重试"),!1;console.log("按住说话"),N.setAttribute("class","speak off hide"),fe.setAttribute("class","speak on"),Ye(),zi("add",0),setTimeout(function(){d.state.recodeTime=0,De()},1e3),d.state.recodeTimer&&clearInterval(d.state.recodeTimer),d.state.recodeTimer=setInterval(function(){d.state.recodeTime>=59?(x.stopTalk(),zi("destory",0),this.setAttribute("class","ptp-talk on hide"),Wt.setAttribute("class","ptp-talk off"),Z.layer.msg("不超过1分钟")):d.state.recodeTime=d.state.recodeTime+1},1e3);var re;function J(et){var R=re.createMediaStreamSource(et);L=new Z.Recorder(R)}function De(){L&&L.record()}function Ye(){console.log("run init");try{Z.AudioContext=Z.AudioContext||Z.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,Z.URL=Z.URL||Z.webkitURL,re=new AudioContext,console.log("Audio context set up."),console.log("navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(et){console.log("err",et),Z.layer.msg("No web audio support in this browser!")}navigator.getUserMedia({audio:!0},J,function(et){console.log("No live audio input: "+et)})}},document.getElementById("stopSpeak").onmouseup=function(){console.log("松开发送"),fe.setAttribute("class","speak on hide"),re();function re(){if(zi("destory",0),d.state.recodeTime<1)return Z.layer.msg("说话时间过短"),clearInterval(d.state.recodeTimer),!1;clearInterval(d.state.recodeTimer),J()}function J(){try{L&&L.stop(),L&&L.exportWAV(function(De){if(console.log("wav_file",De),De.size<1e3)return Z.layer.msg("录音失败，请重试"),d.state.recodeTime=0,!1;zi("sub",d.state.recodeTime+2);var Ye=new FormData;Ye.append("voiceFile",De),Ye.append("accessToken",x.opt.accessToken),Ye.append("deviceSerial",x.opt.deviceSerial),Ye.append("channelNo",x.opt.channelNo);function et(He){console.log("data.data",He.data),He.code==200?zi("sub",d.state.recodeTime+2):He.code=="10001"?Z.layer.msg("未找到当前语音"):Z.layer.msg(He.msg||"发送失败，请稍后再试")}function R(He){console.log("err",He)}l(c+"/api/lapp/voice/sendonce","POST",{voiceFile:De,accessToken:x.opt.accessToken,deviceSerial:x.opt.deviceSerial,channelNo:x.opt.channelNo},"",et,R)}),L&&L.clear()}catch(De){console.log(De)}}}}}}})});var x=this;Z.addEventListener("message",function(ne){ne.origin;var Q=x.opt.id;if(ne.data.type)switch(ne.data.type){case"openSound":Q==ne.data.id&&g.openSoundCallBack&&g.openSoundCallBack(ne.data);break;case"closeSound":Q==ne.data.id&&g.closeSoundCallBack&&g.closeSoundCallBack(ne.data);break;case"capturePicture":Q==ne.data.id&&g.capturePictureCallBack&&g.capturePictureCallBack(ne.data);break;case"startSave":Q==ne.data.id&&g.startSaveCallBack&&g.startSaveCallBack(ne.data);break;case"stopSave":Q==ne.data.id&&g.stopSaveCallBack&&g.stopSaveCallBack(ne.data);break;case"fullScreen":Q==ne.data.id&&g.fullScreenCallBack&&g.fullScreenCallBack(ne.data);break;case"getOSDTime":Q==ne.data.id&&g.getOSDTimeCallBack&&g.getOSDTimeCallBack(ne.data);break;case"handleSuccess":Q==ne.data.id&&g.handleSuccess&&g.handleSuccess(ne.data);break;case"handleError":Q==ne.data.id&&g.handleError&&g.handleError(ne.data);break;case"dblclick":Q==ne.data.id&&x.opt.bSupporDoubleClickFull&&(x.opt.fullScreenStatus===0?x.fullScreen():x.cancelFullScreen());break;case"startTalk":x.startTalk(),x.closeSound();break;case"stopTalk":x.stopTalk(),x.openSound();break;case"clickEventHandle":console.log("event.data",ne.data),g.clickEventHandle&&g.clickEventHandle(ne.data);break;case"removeEventHandle":g.removeEventHandle&&g.removeEventHandle(ne.data);break;case"esc":g.clickEventHandle&&g.clickEventHandle(ne.data);break;case"iframeFullScreen":if(Q==ne.data.id){var ye=function(Ze){var Qe=Ze.requestFullScreen||Ze.webkitRequestFullScreen||Ze.mozRequestFullScreen||Ze.msRequestFullScreen;if(Qe)Qe.call(Ze);else if(typeof Z.ActiveXObject<"u"){var M=new ActiveXObject("WScript.Shell");M!==null&&M.SendKeys("{F11}")}};ye(document.getElementById("EZUIKitPlayer-"+ne.data.id))}break}});function O(ne){x.opt.fullScreenStatus=ne?1:0,g.fullScreenChangeCallBack&&g.fullScreenChangeCallBack({data:ne,id:x.opt.id})}typeof document.fullScreen<"u"?document.addEventListener("fullscreenchange",function(){var ne=document.fullscreen||!1;O(ne)}):typeof document.webkitIsFullScreen<"u"?document.addEventListener("webkitfullscreenchange",function(){var ne=document.webkitIsFullScreen||!1;O(ne)}):typeof document.mozFullScreen<"u"&&document.addEventListener("mozfullscreenchange",function(){var ne=document.mozFullScreen||!1;O(ne)})};C.prototype.play=function(w){var g="EZUIKitPlayer-"+this.opt.id,p=document.getElementById(g).contentWindow;Ni(w)==="object"&&w.url&&(this.opt.url=w.url),Ni(w)==="object"&&w.accessToken&&(this.opt.accessToken=w.accessToken),typeof w=="string"&&(this.opt.url=w),p.postMessage({action:"play",accessToken:this.opt.accessToken,url:this.opt.url},c+"/ezopen/h5/iframe");var te=this;this.opt.videoLoading=!0;var ae=new Promise(function(de,ie){Z.addEventListener("message",function(we){var Ve=te.opt.id;Ve==we.data.id&&we.data.type==="handleSuccess"&&(setTimeout(function(){te.opt.videoLoading=!1},1e3),de(we.data))})});return ae},C.prototype.stop=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("stop",c+"/ezopen/h5/iframe");var p=this,te=new Promise(function(ae,de){Z.addEventListener("message",function(ie){var we=p.opt.id;we==ie.data.id&&ie.data.type==="stop"&&ae(ie.data)})});return te},C.prototype.openSound=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("openSound",c+"/ezopen/h5/iframe");var p=this,te=new Promise(function(ae,de){Z.addEventListener("message",function(ie){var we=p.opt.id;we==ie.data.id&&ie.data.type==="openSound"&&ae(ie.data)})});return te},C.prototype.closeSound=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("closeSound",c+"/ezopen/h5/iframe");var p=this,te=new Promise(function(ae,de){Z.addEventListener("message",function(ie){var we=p.opt.id;we==ie.data.id&&ie.data.type==="closeSound"&&ae(ie.data)})});return te},C.prototype.startSave=function(w){var g="EZUIKitPlayer-"+this.opt.id,p=document.getElementById(g).contentWindow;p.postMessage({action:"startSave",fileName:w||"default"},c+"/ezopen/h5/iframe");var te=this,ae=new Promise(function(de,ie){Z.addEventListener("message",function(we){var Ve=te.opt.id;Ve==we.data.id&&we.data.type==="startSave"&&de(we.data)})});return ae},C.prototype.stopSave=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("stopSave",c+"/ezopen/h5/iframe");var p=this,te=new Promise(function(ae,de){Z.addEventListener("message",function(ie){var we=p.opt.id;we==ie.data.id&&ie.data.type==="stopSave"&&ae(ie.data)})});return te},C.prototype.fullScreen=function(){if(this.opt.fullScreenStatus===1)return!1;var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var p=document.documentElement.clientWidth,te=document.documentElement.clientHeight,ae=document.body;ae=document.getElementById(w);var de="";de+="width:"+te+"px;",de+="height:"+p+"px;",de+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",de+="-webkit-transform-origin: "+p/2+"px "+p/2+"px;",de+="transform-origin: "+p/2+"px "+p/2+"px;",de+="position: fixed;top: 0;left: 0;z-index:10",ae.style.cssText=de,setTimeout(function(){g.postMessage("autoResize",c+"/ezopen/h5/iframe")},500)}else{var ie=function(Ve){var ue=Ve.requestFullScreen||Ve.webkitRequestFullScreen||Ve.mozRequestFullScreen||Ve.msRequestFullScreen;if(ue)ue.call(Ve);else if(typeof Z.ActiveXObject<"u"){var x=new ActiveXObject("WScript.Shell");x!==null&&x.SendKeys("{F11}")}};ie(document.getElementById(w))}this.params.fullScreenCallBack&&this.params.fullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=1},C.prototype.cancelFullScreen=function(){if(this.opt.fullScreenStatus===0)return!1;var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var p=document.getElementById(w).width,te=document.getElementById(w).height,ae=document.body;ae=document.getElementById(w);var de="";de+="width:"+p+"px;",de+="height:"+te+"px;",de+="-webkit-transform: none; transform: none;",de+="-webkit-transform-origin: 0 0;",de+="transform-origin: 0 0;",ae.style.cssText=de,setTimeout(function(){g.postMessage("autoResize",c+"/ezopen/h5/iframe")},500);var ie=w+"cancel-full-screen",we=document.getElementById(ie);we&&document.body.removeChild(we)}else document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen();this.params.cancelFullScreenCallBack&&this.params.cancelFullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=0},C.prototype.capturePicture=function(w,g){var p="EZUIKitPlayer-"+this.opt.id,te=document.getElementById(p).contentWindow;te.postMessage({action:"capturePicture",fileName:w||"default",isUndownload:g},c+"/ezopen/h5/iframe");var ae=this,de=new Promise(function(ie,we){Z.addEventListener("message",function(Ve){var ue=ae.opt.id;ue==Ve.data.id&&Ve.data.type==="capturePicture"&&ie(Ve.data)})});return de},C.prototype.enableZoom=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("enableZoom",c+"/ezopen/h5/iframe")},C.prototype.closeZoom=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("closeZoom",c+"/ezopen/h5/iframe")},C.prototype.getOSDTime=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("getOSDTime",c+"/ezopen/h5/iframe");var p=this,te=new Promise(function(ae,de){Z.addEventListener("message",function(ie){var we=p.opt.id;we==ie.data.id&&ie.data.type==="getOSDTime"&&ae(ie.data)})});return te},C.prototype.autoResize=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("autoResize",c+"/ezopen/h5/iframe")},C.prototype.reSize=function(w,g){var p="EZUIKitPlayer-"+this.opt.id,te=document.getElementById(p).contentWindow,ae=document.getElementById(this.opt.id);ae.style.width=w+"px",ae.style.height=g+"px",document.getElementById(this.opt.id).style.width=w+"px",document.getElementById(this.opt.id).style.height=g+"px";var de=document.getElementById(p);de.setAttribute("width",w),de.setAttribute("height",g),de.style.width=w+"px",de.style.height=g+"px",setTimeout(function(){te.postMessage({action:"autoResize"},c+"/ezopen/h5/iframe")},500)},C.prototype.startTalk=function(){console.log("执行开始对讲"),console.log(this.opt);var w=this;d.opt=this.opt,Z.EZUIKit&&(Z.EZUIKit.opt=this.opt);var g=function(te){if(te.code==200){var ae=te.data;if(ae){var de=ae.rtcUrl;de.indexOf("ws")===-1&&(de=de.replace("https","wss").replace("rtcgw","rtcgw-ws")),w.opt.rtcUrl=de,w.opt.ttsUrl="tts://"+ae.ttsUrl;var ie="talk://"+w.opt.deviceSerial+":0:"+w.opt.channelNo+":cas.ys7.com:6500";w.opt.talkLink=w.opt.ttsUrl+"/"+ie,w.opt.stream=ae.stream,Z.startTalk()}}};l(w.opt.apiDomain,"POST",{accessToken:w.opt.accessToken,deviceSerial:w.opt.deviceSerial,channelNo:w.opt.channelNo},"",g)},C.prototype.stopTalk=function(){console.log("执行结束对讲"),Z.stopTalk()},C.prototype.edit=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage("edit",c+"/ezopen/h5/iframe")},C.prototype.btnReRender=function(w){var g="EZUIKitPlayer-"+this.opt.id,p=document.getElementById(g).contentWindow;p.postMessage({action:"btnReRender",data:w},c+"/ezopen/h5/iframe")},C.prototype.changePlayUrl=function(w){w.deviceSerial&&(this.opt.deviceSerial=w.deviceSerial),w.channelNo&&(this.opt.channelNo=w.channelNo),w.accessToken&&(this.opt.accessToken=w.accessToken);var g="EZUIKitPlayer-"+this.opt.id,p=document.getElementById(g).contentWindow;p.postMessage({action:"changePlayUrl",data:w},c+"/ezopen/h5/iframe")},C.prototype.fetchThemeData=function(){var w="EZUIKitPlayer-"+this.opt.id,g=document.getElementById(w).contentWindow;g.postMessage({action:"fetchThemeData"},c+"/ezopen/h5/iframe")},C.prototype.setThemeData=function(w,g,p){var te="EZUIKitPlayer-"+this.opt.id,ae=document.getElementById(te).contentWindow;ae.postMessage({action:"setThemeData",data:{accessToken:w,header:g,footer:p}},c+"/ezopen/h5/iframe")},d.EZUIKitPlayer=C,Z.EZUIKitV3=d;var y=d;return y});var Df=EZUIKitV3,Af=function(m){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=void 0,l=void 0,d=void 0,c=[];return function(){var y=Mf(t),w=new Date().getTime(),g=!o||w-o>y;o=w;for(var p=arguments.length,te=Array(p),ae=0;ae<p;ae++)te[ae]=arguments[ae];if(g&&n.leading)return n.accumulate?Promise.resolve(m.call(this,[te])).then(function(ie){return ie[0]}):Promise.resolve(m.call.apply(m,[this].concat(te)));if(l?clearTimeout(d):l=Bf(),c.push(te),d=setTimeout(E.bind(this),y),n.accumulate){var de=c.length-1;return l.promise.then(function(ie){return ie[de]})}return l.promise};function E(){var C=l;clearTimeout(d),Promise.resolve(n.accumulate?m.call(this,c):m.apply(this,c[c.length-1])).then(C.resolve,C.reject),c=[],l=null}};function Mf(Z){return typeof Z=="function"?Z():Z}function Bf(){var Z={};return Z.promise=new Promise(function(m,t){Z.resolve=m,Z.reject=t}),Z}var u0=Sl(Af);(function(){var Z;function m($e){var st=0;return function(){return st<$e.length?{done:!1,value:$e[st++]}:{done:!0}}}var t=typeof Object.defineProperties=="function"?Object.defineProperty:function($e,st,Ke){return $e==Array.prototype||$e==Object.prototype||($e[st]=Ke.value),$e};function n($e){$e=[typeof globalThis=="object"&&globalThis,$e,typeof window=="object"&&window,typeof self=="object"&&self,typeof Na=="object"&&Na];for(var st=0;st<$e.length;++st){var Ke=$e[st];if(Ke&&Ke.Math==Math)return Ke}throw Error("Cannot find global object")}var o=n(this);function l($e,st){if(st)e:{var Ke=o;$e=$e.split(".");for(var Ne=0;Ne<$e.length-1;Ne++){var at=$e[Ne];if(!(at in Ke))break e;Ke=Ke[at]}$e=$e[$e.length-1],Ne=Ke[$e],st=st(Ne),st!=Ne&&st!=null&&t(Ke,$e,{configurable:!0,writable:!0,value:st})}}l("Symbol",function($e){function st(Ut){if(this instanceof st)throw new TypeError("Symbol is not a constructor");return new Ke(Ne+(Ut||"")+"_"+at++,Ut)}function Ke(Ut,Wt){this.A=Ut,t(this,"description",{configurable:!0,writable:!0,value:Wt})}if($e)return $e;Ke.prototype.toString=function(){return this.A};var Ne="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",at=0;return st}),l("Symbol.iterator",function($e){if($e)return $e;$e=Symbol("Symbol.iterator");for(var st="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ke=0;Ke<st.length;Ke++){var Ne=o[st[Ke]];typeof Ne=="function"&&typeof Ne.prototype[$e]!="function"&&t(Ne.prototype,$e,{configurable:!0,writable:!0,value:function(){return d(m(this))}})}return $e});function d($e){return $e={next:$e},$e[Symbol.iterator]=function(){return this},$e}function c($e){var st=typeof Symbol<"u"&&Symbol.iterator&&$e[Symbol.iterator];return st?st.call($e):{next:m($e)}}var E;if(typeof Object.setPrototypeOf=="function")E=Object.setPrototypeOf;else{var C;e:{var y={a:!0},w={};try{w.__proto__=y,C=w.a;break e}catch{}C=!1}E=C?function($e,st){if($e.__proto__=st,$e.__proto__!==st)throw new TypeError($e+" is not extensible");return $e}:null}var g=E;function p(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function te($e){if($e.m)throw new TypeError("Generator is already running");$e.m=!0}p.prototype.o=function($e){this.v=$e},p.prototype.s=function($e){this.l={D:$e,F:!0},this.h=this.C||this.u},p.prototype.return=function($e){this.l={return:$e},this.h=this.u};function ae($e,st){return $e.h=3,{value:st}}function de($e){this.g=new p,this.G=$e}de.prototype.o=function($e){return te(this.g),this.g.j?we(this,this.g.j.next,$e,this.g.o):(this.g.o($e),Ve(this))};function ie($e,st){te($e.g);var Ke=$e.g.j;return Ke?we($e,"return"in Ke?Ke.return:function(Ne){return{value:Ne,done:!0}},st,$e.g.return):($e.g.return(st),Ve($e))}de.prototype.s=function($e){return te(this.g),this.g.j?we(this,this.g.j.throw,$e,this.g.o):(this.g.s($e),Ve(this))};function we($e,st,Ke,Ne){try{var at=st.call($e.g.j,Ke);if(!(at instanceof Object))throw new TypeError("Iterator result "+at+" is not an object");if(!at.done)return $e.g.m=!1,at;var Ut=at.value}catch(Wt){return $e.g.j=null,$e.g.s(Wt),Ve($e)}return $e.g.j=null,Ne.call($e.g,Ut),Ve($e)}function Ve($e){for(;$e.g.h;)try{var st=$e.G($e.g);if(st)return $e.g.m=!1,{value:st.value,done:!1}}catch(Ke){$e.g.v=void 0,$e.g.s(Ke)}if($e.g.m=!1,$e.g.l){if(st=$e.g.l,$e.g.l=null,st.F)throw st.D;return{value:st.return,done:!0}}return{value:void 0,done:!0}}function ue($e){this.next=function(st){return $e.o(st)},this.throw=function(st){return $e.s(st)},this.return=function(st){return ie($e,st)},this[Symbol.iterator]=function(){return this}}function x($e,st){return st=new ue(new de(st)),g&&$e.prototype&&g(st,$e.prototype),st}function O($e,st){$e instanceof String&&($e+="");var Ke=0,Ne=!1,at={next:function(){if(!Ne&&Ke<$e.length){var Ut=Ke++;return{value:st(Ut,$e[Ut]),done:!1}}return Ne=!0,{done:!0,value:void 0}}};return at[Symbol.iterator]=function(){return at},at}if(l("Array.prototype.entries",function($e){return $e||function(){return O(this,function(st,Ke){return[st,Ke]})}}),typeof Blob<"u"&&(typeof FormData>"u"||!FormData.prototype.keys)){var ne=function($e,st){for(var Ke=0;Ke<$e.length;Ke++)st($e[Ke])},Q=function($e){return $e.replace(/\r?\n|\r/g,`\r
`)},ye=function($e,st,Ke){return st instanceof Blob?(Ke=Ke!==void 0?Ke+"":typeof st.name=="string"?st.name:"blob",(st.name!==Ke||Object.prototype.toString.call(st)==="[object Blob]")&&(st=new File([st],Ke)),[String($e),st]):[String($e),String(st)]},se=function($e,st){if($e.length<st)throw new TypeError(st+" argument required, but only "+$e.length+" present.")},Ze=typeof globalThis=="object"?globalThis:typeof window=="object"?window:typeof self=="object"?self:this,Qe=Ze.FormData,M=Ze.XMLHttpRequest&&Ze.XMLHttpRequest.prototype.send,Te=Ze.Request&&Ze.fetch,ze=Ze.navigator&&Ze.navigator.sendBeacon,oi=Ze.Element&&Ze.Element.prototype,wi=Ze.Symbol&&Symbol.toStringTag;wi&&(Blob.prototype[wi]||(Blob.prototype[wi]="Blob"),"File"in Ze&&!File.prototype[wi]&&(File.prototype[wi]="File"));try{new File([],"")}catch{Ze.File=function(st,Ke,Ne){return st=new Blob(st,Ne||{}),Object.defineProperties(st,{name:{value:Ke},lastModified:{value:+(Ne&&Ne.lastModified!==void 0?new Date(Ne.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),wi&&Object.defineProperty(st,wi,{value:"File"}),st}}var ui=function($e){return $e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},di=function($e){this.i=[];var st=this;$e&&ne($e.elements,function(Ke){if(Ke.name&&!Ke.disabled&&Ke.type!=="submit"&&Ke.type!=="button"&&!Ke.matches("form fieldset[disabled] *"))if(Ke.type==="file"){var Ne=Ke.files&&Ke.files.length?Ke.files:[new File([],"",{type:"application/octet-stream"})];ne(Ne,function(at){st.append(Ke.name,at)})}else Ke.type==="select-multiple"||Ke.type==="select-one"?ne(Ke.options,function(at){!at.disabled&&at.selected&&st.append(Ke.name,at.value)}):Ke.type==="checkbox"||Ke.type==="radio"?Ke.checked&&st.append(Ke.name,Ke.value):(Ne=Ke.type==="textarea"?Q(Ke.value):Ke.value,st.append(Ke.name,Ne))})};if(Z=di.prototype,Z.append=function($e,st,Ke){se(arguments,2),this.i.push(ye($e,st,Ke))},Z.delete=function($e){se(arguments,1);var st=[];$e=String($e),ne(this.i,function(Ke){Ke[0]!==$e&&st.push(Ke)}),this.i=st},Z.entries=function $e(){var st,Ke=this;return x($e,function(Ne){if(Ne.h==1&&(st=0),Ne.h!=3)return st<Ke.i.length?Ne=ae(Ne,Ke.i[st]):(Ne.h=0,Ne=void 0),Ne;st++,Ne.h=2})},Z.forEach=function($e,st){se(arguments,1);for(var Ke=c(this),Ne=Ke.next();!Ne.done;Ne=Ke.next()){var at=c(Ne.value);Ne=at.next().value,at=at.next().value,$e.call(st,at,Ne,this)}},Z.get=function($e){se(arguments,1);var st=this.i;$e=String($e);for(var Ke=0;Ke<st.length;Ke++)if(st[Ke][0]===$e)return st[Ke][1];return null},Z.getAll=function($e){se(arguments,1);var st=[];return $e=String($e),ne(this.i,function(Ke){Ke[0]===$e&&st.push(Ke[1])}),st},Z.has=function($e){se(arguments,1),$e=String($e);for(var st=0;st<this.i.length;st++)if(this.i[st][0]===$e)return!0;return!1},Z.keys=function $e(){var st=this,Ke,Ne,at,Ut,Wt;return x($e,function(kt){if(kt.h==1&&(Ke=c(st),Ne=Ke.next()),kt.h!=3){if(Ne.done){kt.h=0;return}return at=Ne.value,Ut=c(at),Wt=Ut.next().value,ae(kt,Wt)}Ne=Ke.next(),kt.h=2})},Z.set=function($e,st,Ke){se(arguments,2),$e=String($e);var Ne=[],at=ye($e,st,Ke),Ut=!0;ne(this.i,function(Wt){Wt[0]===$e?Ut&&(Ut=!Ne.push(at)):Ne.push(Wt)}),Ut&&Ne.push(at),this.i=Ne},Z.values=function $e(){var st=this,Ke,Ne,at,Ut,Wt;return x($e,function(kt){if(kt.h==1&&(Ke=c(st),Ne=Ke.next()),kt.h!=3){if(Ne.done){kt.h=0;return}return at=Ne.value,Ut=c(at),Ut.next(),Wt=Ut.next().value,ae(kt,Wt)}Ne=Ke.next(),kt.h=2})},di.prototype._asNative=function(){for(var $e=new Qe,st=c(this),Ke=st.next();!Ke.done;Ke=st.next()){var Ne=c(Ke.value);Ke=Ne.next().value,Ne=Ne.next().value,$e.append(Ke,Ne)}return $e},di.prototype._blob=function(){var $e="----formdata-polyfill-"+Math.random(),st=[],Ke="--"+$e+`\r
Content-Disposition: form-data; name="`;return this.forEach(function(Ne,at){return typeof Ne=="string"?st.push(Ke+ui(Q(at))+(`"\r
\r
`+Q(Ne)+`\r
`)):st.push(Ke+ui(Q(at))+('"; filename="'+ui(Ne.name)+`"\r
Content-Type: `+(Ne.type||"application/octet-stream")+`\r
\r
`),Ne,`\r
`)}),st.push("--"+$e+"--"),new Blob(st,{type:"multipart/form-data; boundary="+$e})},di.prototype[Symbol.iterator]=function(){return this.entries()},di.prototype.toString=function(){return"[object FormData]"},oi&&!oi.matches&&(oi.matches=oi.matchesSelector||oi.mozMatchesSelector||oi.msMatchesSelector||oi.oMatchesSelector||oi.webkitMatchesSelector||function($e){$e=(this.document||this.ownerDocument).querySelectorAll($e);for(var st=$e.length;0<=--st&&$e.item(st)!==this;);return-1<st}),wi&&(di.prototype[wi]="FormData"),M){var zi=Ze.XMLHttpRequest.prototype.setRequestHeader;Ze.XMLHttpRequest.prototype.setRequestHeader=function($e,st){zi.call(this,$e,st),$e.toLowerCase()==="content-type"&&(this.B=!0)},Ze.XMLHttpRequest.prototype.send=function($e){$e instanceof di?($e=$e._blob(),this.B||this.setRequestHeader("Content-Type",$e.type),M.call(this,$e)):M.call(this,$e)}}Te&&(Ze.fetch=function($e,st){return st&&st.body&&st.body instanceof di&&(st.body=st.body._blob()),Te.call(this,$e,st)}),ze&&(Ze.navigator.sendBeacon=function($e,st){return st instanceof di&&(st=st._asNative()),ze.call(this,$e,st)}),Ze.FormData=di}})();var Ps=1,ws=3,Ql=0,Ua=256,ed=768,f0=1536,h0=2304,Lf=[{place:ws,name:"鱼眼不矫正",type:0,correctType:Ql},{place:ws,name:"360°全景",type:1,correctType:ed},{place:ws,name:"4分屏",type:4,correctList:[{correctType:Ua,x:.25,y:.25},{correctType:Ua,x:.75,y:.25},{correctType:Ua,x:.25,y:.75},{correctType:Ua,x:.75,y:.75}],correctType:Ua},{place:ws,name:"柱状",type:5,correctType:f0,viewParam:{x:0,y:0}}],Ff=[{place:Ps,name:"鱼眼不矫正",type:0,correctType:Ql},{place:Ps,name:"360°全景",type:1,correctType:ed},{place:Ps,name:"4分屏",type:2,correctList:[{correctType:Ua,x:.25,y:.25},{correctType:Ua,x:.75,y:.25},{correctType:Ua,x:.25,y:.75},{correctType:Ua,x:.75,y:.75}],correctType:Ua},{place:Ps,name:"广角",type:4,correctType:h0}],zf={exports:{}};(function(Z,m){(function(n,o){Z.exports=o()})(window,function(){return function(t){var n={};function o(l){if(n[l])return n[l].exports;var d=n[l]={i:l,l:!1,exports:{}};return t[l].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=t,o.c=n,o.d=function(l,d,c){o.o(l,d)||Object.defineProperty(l,d,{enumerable:!0,get:c})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,d){if(d&1&&(l=o(l)),d&8||d&4&&Ni(l)==="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),d&2&&typeof l!="string")for(var E in l)o.d(c,E,(function(C){return l[C]}).bind(null,E));return c},o.n=function(l){var d=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(d,"a",d),d},o.o=function(l,d){return Object.prototype.hasOwnProperty.call(l,d)},o.p="",o(o.s=3)}([function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function E(C,y){for(var w=0;w<y.length;w++){var g=y[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(C,g.key,g)}}return function(C,y,w){return y&&E(C.prototype,y),w&&E(C,w),C}}();function d(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}var c=function(){function E(){d(this,E),this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return l(E,[{key:"$",value:function(y){var w=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,g=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(w.test(y)){var p=w.exec(y);return document.getElementById(p[2])}else if(g.test(y)){for(var te=g.exec(y),ae=document.getElementsByTagName("*"),de=[],ie=0,we=ae.length;ie<we;ie++)ae[ie].className.match(new RegExp("(\\s|^)"+te[2]+"(\\s|$)"))&&de.push(ae[ie]);return de}}},{key:"dateFormat",value:function(y,w){var g={"M+":y.getMonth()+1,"d+":y.getDate(),"h+":y.getHours(),"m+":y.getMinutes(),"s+":y.getSeconds(),"q+":Math.floor((y.getMonth()+3)/3),S:y.getMilliseconds()};/(y+)/.test(w)&&(w=w.replace(RegExp.$1,(y.getFullYear()+"").substr(4-RegExp.$1.length)));for(var p in g)new RegExp("("+p+")").test(w)&&(w=w.replace(RegExp.$1,RegExp.$1.length===1?g[p]:("00"+g[p]).substr((""+g[p]).length)));return w}},{key:"downloadFile",value:function(y,w){var g=y;y instanceof Blob||y instanceof File||(g=new Blob([y]));var p=window.URL.createObjectURL(g),te=window.document.createElement("a");te.href=p,te.download=w;var ae=document.createEvent("MouseEvents");ae.initEvent("click",!0,!0),te.dispatchEvent(ae)}},{key:"createxmlDoc",value:function(){for(var y,w=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"],g=0,p=w.length;g<p;g++)try{y=new ActiveXObject(w[g]);break}catch{y=document.implementation.createDocument("","",null);break}return y.async="false",y}},{key:"parseXmlFromStr",value:function(y){if(y===null||y==="")return null;var w=this.createxmlDoc();if(navigator.appName==="Netscape"||navigator.appName==="Opera"){var g=new DOMParser;w=g.parseFromString(y,"text/xml")}else w.loadXML(y);return w}},{key:"encode",value:function(y){var w="",g,p,te,ae,de,ie,we,Ve=0;for(y=this._utf8_encode(y);Ve<y.length;)g=y.charCodeAt(Ve++),p=y.charCodeAt(Ve++),te=y.charCodeAt(Ve++),ae=g>>2,de=(g&3)<<4|p>>4,ie=(p&15)<<2|te>>6,we=te&63,isNaN(p)?ie=we=64:isNaN(te)&&(we=64),w=w+this._keyStr.charAt(ae)+this._keyStr.charAt(de)+this._keyStr.charAt(ie)+this._keyStr.charAt(we);return w}},{key:"decode",value:function(y){var w="",g,p,te,ae,de,ie,we,Ve=0;for(y=y.replace(/[^A-Za-z0-9+/=]/g,"");Ve<y.length;)ae=this._keyStr.indexOf(y.charAt(Ve++)),de=this._keyStr.indexOf(y.charAt(Ve++)),ie=this._keyStr.indexOf(y.charAt(Ve++)),we=this._keyStr.indexOf(y.charAt(Ve++)),g=ae<<2|de>>4,p=(de&15)<<4|ie>>2,te=(ie&3)<<6|we,w=w+String.fromCharCode(g),ie!==64&&(w=w+String.fromCharCode(p)),we!==64&&(w=w+String.fromCharCode(te));return w=this._utf8_decode(w),w}},{key:"_utf8_encode",value:function(y){y=y.replace(/\r\n/g,`
`);for(var w="",g=0;g<y.length;g++){var p=y.charCodeAt(g);p<128?w+=String.fromCharCode(p):p>127&&p<2048?(w+=String.fromCharCode(p>>6|192),w+=String.fromCharCode(p&63|128)):(w+=String.fromCharCode(p>>12|224),w+=String.fromCharCode(p>>6&63|128),w+=String.fromCharCode(p&63|128))}return w}},{key:"_utf8_decode",value:function(y){for(var w="",g=0,p=0,te=0;g<y.length;)if(p=y.charCodeAt(g),p<128)w+=String.fromCharCode(p),g++;else if(p>191&&p<224)te=y.charCodeAt(g+1),w+=String.fromCharCode((p&31)<<6|te&63),g+=2;else{te=y.charCodeAt(g+1);var ae=y.charCodeAt(g+2);w+=String.fromCharCode((p&15)<<12|(te&63)<<6|ae&63),g+=3}return w}},{key:"isFirefox",value:function(){var y=!1,w=navigator.userAgent.toLowerCase(),g="",p=-1;return w.match(/firefox\/([\d.]+)/)&&(g=w.match(/firefox\/([\d.]+)/)[1],p=parseInt(g.split(".")[0],10),p>-1&&(y=!0)),y}},{key:"isSafari",value:function(){var y=!1,w=navigator.userAgent.toLowerCase(),g="",p=-1;return w.match(/version\/([\d.]+).safari./)&&(g=w.match(/version\/([\d.]+).safari./)[1],p=parseInt(g.split(".")[0],10),p>-1&&(y=!0)),y}},{key:"isEdge",value:function(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}},{key:"isIOS",value:function(){var y=navigator.userAgent,w=!!y.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return w}}]),E}();n.oTool=new c},function(t,n,o){var l,d;(function(c,E){Ni(t.exports)==="object"?t.exports=c.document?E(c,!0):function(C){if(!C.document)throw new Error("jQuery requires a window with a document");return E(C)}:E(c)})(typeof window<"u"?window:this,function(c,E){var C=[],y=Object.getPrototypeOf,w=C.slice,g=C.flat?function(D){return C.flat.call(D)}:function(D){return C.concat.apply([],D)},p=C.push,te=C.indexOf,ae={},de=ae.toString,ie=ae.hasOwnProperty,we=ie.toString,Ve=we.call(Object),ue={},x=function(h){return typeof h=="function"&&typeof h.nodeType!="number"&&typeof h.item!="function"},O=function(h){return h!=null&&h===h.window},ne=c.document,Q={type:!0,src:!0,nonce:!0,noModule:!0};function ye(D,h,k){k=k||ne;var V,ve,je=k.createElement("script");if(je.text=D,h)for(V in Q)ve=h[V]||h.getAttribute&&h.getAttribute(V),ve&&je.setAttribute(V,ve);k.head.appendChild(je).parentNode.removeChild(je)}function se(D){return D==null?D+"":Ni(D)==="object"||typeof D=="function"?ae[de.call(D)]||"object":Ni(D)}var Ze="3.7.1",Qe=/HTML$/i,M=function D(h,k){return new D.fn.init(h,k)};M.fn=M.prototype={jquery:Ze,constructor:M,length:0,toArray:function(){return w.call(this)},get:function(h){return h==null?w.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var k=M.merge(this.constructor(),h);return k.prevObject=this,k},each:function(h){return M.each(this,h)},map:function(h){return this.pushStack(M.map(this,function(k,V){return h.call(k,V,k)}))},slice:function(){return this.pushStack(w.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(M.grep(this,function(h,k){return(k+1)%2}))},odd:function(){return this.pushStack(M.grep(this,function(h,k){return k%2}))},eq:function(h){var k=this.length,V=+h+(h<0?k:0);return this.pushStack(V>=0&&V<k?[this[V]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:C.sort,splice:C.splice},M.extend=M.fn.extend=function(){var D,h,k,V,ve,je,We=arguments[0]||{},ct=1,gt=arguments.length,It=!1;for(typeof We=="boolean"&&(It=We,We=arguments[ct]||{},ct++),Ni(We)!=="object"&&!x(We)&&(We={}),ct===gt&&(We=this,ct--);ct<gt;ct++)if((D=arguments[ct])!=null)for(h in D)V=D[h],!(h==="__proto__"||We===V)&&(It&&V&&(M.isPlainObject(V)||(ve=Array.isArray(V)))?(k=We[h],ve&&!Array.isArray(k)?je=[]:!ve&&!M.isPlainObject(k)?je={}:je=k,ve=!1,We[h]=M.extend(It,je,V)):V!==void 0&&(We[h]=V));return We},M.extend({expando:"jQuery"+(Ze+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var k,V;return!h||de.call(h)!=="[object Object]"?!1:(k=y(h),k?(V=ie.call(k,"constructor")&&k.constructor,typeof V=="function"&&we.call(V)===Ve):!0)},isEmptyObject:function(h){var k;for(k in h)return!1;return!0},globalEval:function(h,k,V){ye(h,{nonce:k&&k.nonce},V)},each:function(h,k){var V,ve=0;if(Te(h))for(V=h.length;ve<V&&k.call(h[ve],ve,h[ve])!==!1;ve++);else for(ve in h)if(k.call(h[ve],ve,h[ve])===!1)break;return h},text:function(h){var k,V="",ve=0,je=h.nodeType;if(!je)for(;k=h[ve++];)V+=M.text(k);return je===1||je===11?h.textContent:je===9?h.documentElement.textContent:je===3||je===4?h.nodeValue:V},makeArray:function(h,k){var V=k||[];return h!=null&&(Te(Object(h))?M.merge(V,typeof h=="string"?[h]:h):p.call(V,h)),V},inArray:function(h,k,V){return k==null?-1:te.call(k,h,V)},isXMLDoc:function(h){var k=h&&h.namespaceURI,V=h&&(h.ownerDocument||h).documentElement;return!Qe.test(k||V&&V.nodeName||"HTML")},merge:function(h,k){for(var V=+k.length,ve=0,je=h.length;ve<V;ve++)h[je++]=k[ve];return h.length=je,h},grep:function(h,k,V){for(var ve,je=[],We=0,ct=h.length,gt=!V;We<ct;We++)ve=!k(h[We],We),ve!==gt&&je.push(h[We]);return je},map:function(h,k,V){var ve,je,We=0,ct=[];if(Te(h))for(ve=h.length;We<ve;We++)je=k(h[We],We,V),je!=null&&ct.push(je);else for(We in h)je=k(h[We],We,V),je!=null&&ct.push(je);return g(ct)},guid:1,support:ue}),typeof Symbol=="function"&&(M.fn[Symbol.iterator]=C[Symbol.iterator]),M.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(D,h){ae["[object "+h+"]"]=h.toLowerCase()});function Te(D){var h=!!D&&"length"in D&&D.length,k=se(D);return x(D)||O(D)?!1:k==="array"||h===0||typeof h=="number"&&h>0&&h-1 in D}function ze(D,h){return D.nodeName&&D.nodeName.toLowerCase()===h.toLowerCase()}var oi=C.pop,wi=C.sort,ui=C.splice,di="[\\x20\\t\\r\\n\\f]",zi=new RegExp("^"+di+"+|((?:^|[^\\\\])(?:\\\\.)*)"+di+"+$","g");M.contains=function(D,h){var k=h&&h.parentNode;return D===k||!!(k&&k.nodeType===1&&(D.contains?D.contains(k):D.compareDocumentPosition&&D.compareDocumentPosition(k)&16))};var $e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function st(D,h){return h?D==="\0"?"�":D.slice(0,-1)+"\\"+D.charCodeAt(D.length-1).toString(16)+" ":"\\"+D}M.escapeSelector=function(D){return(D+"").replace($e,st)};var Ke=ne,Ne=p;(function(){var D,h,k,V,ve,je=Ne,We,ct,gt,It,xi,yi=M.expando,Ji=0,ki=0,en=Yt(),In=Yt(),On=Yt(),Qn=Yt(),Er=function(mt,$t){return mt===$t&&(ve=!0),0},$r="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Rr="(?:\\\\[\\da-fA-F]{1,6}"+di+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Sr="\\["+di+"*("+Rr+")(?:"+di+"*([*^$|!~]?=)"+di+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Rr+"))|)"+di+"*\\]",Tn=":("+Rr+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Sr+")*)|.*)\\)|)",ia=new RegExp(di+"+","g"),pr=new RegExp("^"+di+"*,"+di+"*"),_r=new RegExp("^"+di+"*([>+~]|"+di+")"+di+"*"),hr=new RegExp(di+"|>"),Aa=new RegExp(Tn),Qr=new RegExp("^"+Rr+"$"),Wr={ID:new RegExp("^#("+Rr+")"),CLASS:new RegExp("^\\.("+Rr+")"),TAG:new RegExp("^("+Rr+"|[*])"),ATTR:new RegExp("^"+Sr),PSEUDO:new RegExp("^"+Tn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+di+"*(even|odd|(([+-]|)(\\d*)n|)"+di+"*(?:([+-]|)"+di+"*(\\d+)|))"+di+"*\\)|)","i"),bool:new RegExp("^(?:"+$r+")$","i"),needsContext:new RegExp("^"+di+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+di+"*((?:-\\d)?\\d*)"+di+"*\\)|)(?=[^-]|$)","i")},Cr=/^(?:input|select|textarea|button)$/i,Zr=/^h\d$/i,Ur=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Tr=/[+~]/,Yr=new RegExp("\\\\[\\da-fA-F]{1,6}"+di+"?|\\\\([^\\r\\n\\f])","g"),Se=function(mt,$t){var ii="0x"+mt.slice(1)-65536;return $t||(ii<0?String.fromCharCode(ii+65536):String.fromCharCode(ii>>10|55296,ii&1023|56320))},Pe=function(){pe()},Fe=ut(function(ht){return ht.disabled===!0&&ze(ht,"fieldset")},{dir:"parentNode",next:"legend"});function tt(){try{return We.activeElement}catch{}}try{je.apply(C=w.call(Ke.childNodes),Ke.childNodes),C[Ke.childNodes.length].nodeType}catch{je={apply:function($t,ii){Ne.apply($t,w.call(ii))},call:function($t){Ne.apply($t,w.call(arguments,1))}}}function Pt(ht,mt,$t,ii){var Mi,Ti,rn,an,$i,sn,An,mn=mt&&mt.ownerDocument,Mn=mt?mt.nodeType:9;if($t=$t||[],typeof ht!="string"||!ht||Mn!==1&&Mn!==9&&Mn!==11)return $t;if(!ii&&(pe(mt),mt=mt||We,gt)){if(Mn!==11&&($i=Ur.exec(ht)))if(Mi=$i[1]){if(Mn===9)if(rn=mt.getElementById(Mi)){if(rn.id===Mi)return je.call($t,rn),$t}else return $t;else if(mn&&(rn=mn.getElementById(Mi))&&Pt.contains(mt,rn)&&rn.id===Mi)return je.call($t,rn),$t}else{if($i[2])return je.apply($t,mt.getElementsByTagName(ht)),$t;if((Mi=$i[3])&&mt.getElementsByClassName)return je.apply($t,mt.getElementsByClassName(Mi)),$t}if(!Qn[ht+" "]&&(!It||!It.test(ht))){if(An=ht,mn=mt,Mn===1&&(hr.test(ht)||_r.test(ht))){for(mn=Tr.test(ht)&&W(mt.parentNode)||mt,(mn!=mt||!ue.scope)&&((an=mt.getAttribute("id"))?an=M.escapeSelector(an):mt.setAttribute("id",an=yi)),sn=Le(ht),Ti=sn.length;Ti--;)sn[Ti]=(an?"#"+an:":scope")+" "+it(sn[Ti]);An=sn.join(",")}try{return je.apply($t,mn.querySelectorAll(An)),$t}catch{Qn(ht,!0)}finally{an===yi&&mt.removeAttribute("id")}}}return Ci(ht.replace(zi,"$1"),mt,$t,ii)}function Yt(){var ht=[];function mt($t,ii){return ht.push($t+" ")>h.cacheLength&&delete mt[ht.shift()],mt[$t+" "]=ii}return mt}function ci(ht){return ht[yi]=!0,ht}function Fi(ht){var mt=We.createElement("fieldset");try{return!!ht(mt)}catch{return!1}finally{mt.parentNode&&mt.parentNode.removeChild(mt),mt=null}}function Pn(ht){return function(mt){return ze(mt,"input")&&mt.type===ht}}function q(ht){return function(mt){return(ze(mt,"input")||ze(mt,"button"))&&mt.type===ht}}function _(ht){return function(mt){return"form"in mt?mt.parentNode&&mt.disabled===!1?"label"in mt?"label"in mt.parentNode?mt.parentNode.disabled===ht:mt.disabled===ht:mt.isDisabled===ht||mt.isDisabled!==!ht&&Fe(mt)===ht:mt.disabled===ht:"label"in mt?mt.disabled===ht:!1}}function U(ht){return ci(function(mt){return mt=+mt,ci(function($t,ii){for(var Mi,Ti=ht([],$t.length,mt),rn=Ti.length;rn--;)$t[Mi=Ti[rn]]&&($t[Mi]=!(ii[Mi]=$t[Mi]))})})}function W(ht){return ht&&typeof ht.getElementsByTagName<"u"&&ht}function pe(ht){var mt,$t=ht?ht.ownerDocument||ht:Ke;return $t==We||$t.nodeType!==9||!$t.documentElement||(We=$t,ct=We.documentElement,gt=!M.isXMLDoc(We),xi=ct.matches||ct.webkitMatchesSelector||ct.msMatchesSelector,ct.msMatchesSelector&&Ke!=We&&(mt=We.defaultView)&&mt.top!==mt&&mt.addEventListener("unload",Pe),ue.getById=Fi(function(ii){return ct.appendChild(ii).id=M.expando,!We.getElementsByName||!We.getElementsByName(M.expando).length}),ue.disconnectedMatch=Fi(function(ii){return xi.call(ii,"*")}),ue.scope=Fi(function(){return We.querySelectorAll(":scope")}),ue.cssHas=Fi(function(){try{return We.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),ue.getById?(h.filter.ID=function(ii){var Mi=ii.replace(Yr,Se);return function(Ti){return Ti.getAttribute("id")===Mi}},h.find.ID=function(ii,Mi){if(typeof Mi.getElementById<"u"&&gt){var Ti=Mi.getElementById(ii);return Ti?[Ti]:[]}}):(h.filter.ID=function(ii){var Mi=ii.replace(Yr,Se);return function(Ti){var rn=typeof Ti.getAttributeNode<"u"&&Ti.getAttributeNode("id");return rn&&rn.value===Mi}},h.find.ID=function(ii,Mi){if(typeof Mi.getElementById<"u"&&gt){var Ti,rn,an,$i=Mi.getElementById(ii);if($i){if(Ti=$i.getAttributeNode("id"),Ti&&Ti.value===ii)return[$i];for(an=Mi.getElementsByName(ii),rn=0;$i=an[rn++];)if(Ti=$i.getAttributeNode("id"),Ti&&Ti.value===ii)return[$i]}return[]}}),h.find.TAG=function(ii,Mi){return typeof Mi.getElementsByTagName<"u"?Mi.getElementsByTagName(ii):Mi.querySelectorAll(ii)},h.find.CLASS=function(ii,Mi){if(typeof Mi.getElementsByClassName<"u"&&gt)return Mi.getElementsByClassName(ii)},It=[],Fi(function(ii){var Mi;ct.appendChild(ii).innerHTML="<a id='"+yi+"' href='' disabled='disabled'></a><select id='"+yi+"-\r\\' disabled='disabled'><option selected=''></option></select>",ii.querySelectorAll("[selected]").length||It.push("\\["+di+"*(?:value|"+$r+")"),ii.querySelectorAll("[id~="+yi+"-]").length||It.push("~="),ii.querySelectorAll("a#"+yi+"+*").length||It.push(".#.+[+~]"),ii.querySelectorAll(":checked").length||It.push(":checked"),Mi=We.createElement("input"),Mi.setAttribute("type","hidden"),ii.appendChild(Mi).setAttribute("name","D"),ct.appendChild(ii).disabled=!0,ii.querySelectorAll(":disabled").length!==2&&It.push(":enabled",":disabled"),Mi=We.createElement("input"),Mi.setAttribute("name",""),ii.appendChild(Mi),ii.querySelectorAll("[name='']").length||It.push("\\["+di+"*name"+di+"*="+di+`*(?:''|"")`)}),ue.cssHas||It.push(":has"),It=It.length&&new RegExp(It.join("|")),Er=function(Mi,Ti){if(Mi===Ti)return ve=!0,0;var rn=!Mi.compareDocumentPosition-!Ti.compareDocumentPosition;return rn||(rn=(Mi.ownerDocument||Mi)==(Ti.ownerDocument||Ti)?Mi.compareDocumentPosition(Ti):1,rn&1||!ue.sortDetached&&Ti.compareDocumentPosition(Mi)===rn?Mi===We||Mi.ownerDocument==Ke&&Pt.contains(Ke,Mi)?-1:Ti===We||Ti.ownerDocument==Ke&&Pt.contains(Ke,Ti)?1:V?te.call(V,Mi)-te.call(V,Ti):0:rn&4?-1:1)}),We}Pt.matches=function(ht,mt){return Pt(ht,null,null,mt)},Pt.matchesSelector=function(ht,mt){if(pe(ht),gt&&!Qn[mt+" "]&&(!It||!It.test(mt)))try{var $t=xi.call(ht,mt);if($t||ue.disconnectedMatch||ht.document&&ht.document.nodeType!==11)return $t}catch{Qn(mt,!0)}return Pt(mt,We,null,[ht]).length>0},Pt.contains=function(ht,mt){return(ht.ownerDocument||ht)!=We&&pe(ht),M.contains(ht,mt)},Pt.attr=function(ht,mt){(ht.ownerDocument||ht)!=We&&pe(ht);var $t=h.attrHandle[mt.toLowerCase()],ii=$t&&ie.call(h.attrHandle,mt.toLowerCase())?$t(ht,mt,!gt):void 0;return ii!==void 0?ii:ht.getAttribute(mt)},Pt.error=function(ht){throw new Error("Syntax error, unrecognized expression: "+ht)},M.uniqueSort=function(ht){var mt,$t=[],ii=0,Mi=0;if(ve=!ue.sortStable,V=!ue.sortStable&&w.call(ht,0),wi.call(ht,Er),ve){for(;mt=ht[Mi++];)mt===ht[Mi]&&(ii=$t.push(Mi));for(;ii--;)ui.call(ht,$t[ii],1)}return V=null,ht},M.fn.uniqueSort=function(){return this.pushStack(M.uniqueSort(w.apply(this)))},h=M.expr={cacheLength:50,createPseudo:ci,match:Wr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(mt){return mt[1]=mt[1].replace(Yr,Se),mt[3]=(mt[3]||mt[4]||mt[5]||"").replace(Yr,Se),mt[2]==="~="&&(mt[3]=" "+mt[3]+" "),mt.slice(0,4)},CHILD:function(mt){return mt[1]=mt[1].toLowerCase(),mt[1].slice(0,3)==="nth"?(mt[3]||Pt.error(mt[0]),mt[4]=+(mt[4]?mt[5]+(mt[6]||1):2*(mt[3]==="even"||mt[3]==="odd")),mt[5]=+(mt[7]+mt[8]||mt[3]==="odd")):mt[3]&&Pt.error(mt[0]),mt},PSEUDO:function(mt){var $t,ii=!mt[6]&&mt[2];return Wr.CHILD.test(mt[0])?null:(mt[3]?mt[2]=mt[4]||mt[5]||"":ii&&Aa.test(ii)&&($t=Le(ii,!0))&&($t=ii.indexOf(")",ii.length-$t)-ii.length)&&(mt[0]=mt[0].slice(0,$t),mt[2]=ii.slice(0,$t)),mt.slice(0,3))}},filter:{TAG:function(mt){var $t=mt.replace(Yr,Se).toLowerCase();return mt==="*"?function(){return!0}:function(ii){return ze(ii,$t)}},CLASS:function(mt){var $t=en[mt+" "];return $t||($t=new RegExp("(^|"+di+")"+mt+"("+di+"|$)"))&&en(mt,function(ii){return $t.test(typeof ii.className=="string"&&ii.className||typeof ii.getAttribute<"u"&&ii.getAttribute("class")||"")})},ATTR:function(mt,$t,ii){return function(Mi){var Ti=Pt.attr(Mi,mt);return Ti==null?$t==="!=":$t?(Ti+="",$t==="="?Ti===ii:$t==="!="?Ti!==ii:$t==="^="?ii&&Ti.indexOf(ii)===0:$t==="*="?ii&&Ti.indexOf(ii)>-1:$t==="$="?ii&&Ti.slice(-ii.length)===ii:$t==="~="?(" "+Ti.replace(ia," ")+" ").indexOf(ii)>-1:$t==="|="?Ti===ii||Ti.slice(0,ii.length+1)===ii+"-":!1):!0}},CHILD:function(mt,$t,ii,Mi,Ti){var rn=mt.slice(0,3)!=="nth",an=mt.slice(-4)!=="last",$i=$t==="of-type";return Mi===1&&Ti===0?function(sn){return!!sn.parentNode}:function(sn,An,mn){var Mn,wn,hn,nr,cr,ur=rn!==an?"nextSibling":"previousSibling",Pr=sn.parentNode,eo=$i&&sn.nodeName.toLowerCase(),Wa=!mn&&!$i,Mr=!1;if(Pr){if(rn){for(;ur;){for(hn=sn;hn=hn[ur];)if($i?ze(hn,eo):hn.nodeType===1)return!1;cr=ur=mt==="only"&&!cr&&"nextSibling"}return!0}if(cr=[an?Pr.firstChild:Pr.lastChild],an&&Wa){for(wn=Pr[yi]||(Pr[yi]={}),Mn=wn[mt]||[],nr=Mn[0]===Ji&&Mn[1],Mr=nr&&Mn[2],hn=nr&&Pr.childNodes[nr];hn=++nr&&hn&&hn[ur]||(Mr=nr=0)||cr.pop();)if(hn.nodeType===1&&++Mr&&hn===sn){wn[mt]=[Ji,nr,Mr];break}}else if(Wa&&(wn=sn[yi]||(sn[yi]={}),Mn=wn[mt]||[],nr=Mn[0]===Ji&&Mn[1],Mr=nr),Mr===!1)for(;(hn=++nr&&hn&&hn[ur]||(Mr=nr=0)||cr.pop())&&!(($i?ze(hn,eo):hn.nodeType===1)&&++Mr&&(Wa&&(wn=hn[yi]||(hn[yi]={}),wn[mt]=[Ji,Mr]),hn===sn)););return Mr-=Ti,Mr===Mi||Mr%Mi===0&&Mr/Mi>=0}}},PSEUDO:function(mt,$t){var ii,Mi=h.pseudos[mt]||h.setFilters[mt.toLowerCase()]||Pt.error("unsupported pseudo: "+mt);return Mi[yi]?Mi($t):Mi.length>1?(ii=[mt,mt,"",$t],h.setFilters.hasOwnProperty(mt.toLowerCase())?ci(function(Ti,rn){for(var an,$i=Mi(Ti,$t),sn=$i.length;sn--;)an=te.call(Ti,$i[sn]),Ti[an]=!(rn[an]=$i[sn])}):function(Ti){return Mi(Ti,0,ii)}):Mi}},pseudos:{not:ci(function(ht){var mt=[],$t=[],ii=Ot(ht.replace(zi,"$1"));return ii[yi]?ci(function(Mi,Ti,rn,an){for(var $i,sn=ii(Mi,null,an,[]),An=Mi.length;An--;)($i=sn[An])&&(Mi[An]=!(Ti[An]=$i))}):function(Mi,Ti,rn){return mt[0]=Mi,ii(mt,null,rn,$t),mt[0]=null,!$t.pop()}}),has:ci(function(ht){return function(mt){return Pt(ht,mt).length>0}}),contains:ci(function(ht){return ht=ht.replace(Yr,Se),function(mt){return(mt.textContent||M.text(mt)).indexOf(ht)>-1}}),lang:ci(function(ht){return Qr.test(ht||"")||Pt.error("unsupported lang: "+ht),ht=ht.replace(Yr,Se).toLowerCase(),function(mt){var $t;do if($t=gt?mt.lang:mt.getAttribute("xml:lang")||mt.getAttribute("lang"))return $t=$t.toLowerCase(),$t===ht||$t.indexOf(ht+"-")===0;while((mt=mt.parentNode)&&mt.nodeType===1);return!1}}),target:function(mt){var $t=c.location&&c.location.hash;return $t&&$t.slice(1)===mt.id},root:function(mt){return mt===ct},focus:function(mt){return mt===tt()&&We.hasFocus()&&!!(mt.type||mt.href||~mt.tabIndex)},enabled:_(!1),disabled:_(!0),checked:function(mt){return ze(mt,"input")&&!!mt.checked||ze(mt,"option")&&!!mt.selected},selected:function(mt){return mt.parentNode&&mt.parentNode.selectedIndex,mt.selected===!0},empty:function(mt){for(mt=mt.firstChild;mt;mt=mt.nextSibling)if(mt.nodeType<6)return!1;return!0},parent:function(mt){return!h.pseudos.empty(mt)},header:function(mt){return Zr.test(mt.nodeName)},input:function(mt){return Cr.test(mt.nodeName)},button:function(mt){return ze(mt,"input")&&mt.type==="button"||ze(mt,"button")},text:function(mt){var $t;return ze(mt,"input")&&mt.type==="text"&&(($t=mt.getAttribute("type"))==null||$t.toLowerCase()==="text")},first:U(function(){return[0]}),last:U(function(ht,mt){return[mt-1]}),eq:U(function(ht,mt,$t){return[$t<0?$t+mt:$t]}),even:U(function(ht,mt){for(var $t=0;$t<mt;$t+=2)ht.push($t);return ht}),odd:U(function(ht,mt){for(var $t=1;$t<mt;$t+=2)ht.push($t);return ht}),lt:U(function(ht,mt,$t){var ii;for($t<0?ii=$t+mt:$t>mt?ii=mt:ii=$t;--ii>=0;)ht.push(ii);return ht}),gt:U(function(ht,mt,$t){for(var ii=$t<0?$t+mt:$t;++ii<mt;)ht.push(ii);return ht})}},h.pseudos.nth=h.pseudos.eq;for(D in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[D]=Pn(D);for(D in{submit:!0,reset:!0})h.pseudos[D]=q(D);function Ie(){}Ie.prototype=h.filters=h.pseudos,h.setFilters=new Ie;function Le(ht,mt){var $t,ii,Mi,Ti,rn,an,$i,sn=In[ht+" "];if(sn)return mt?0:sn.slice(0);for(rn=ht,an=[],$i=h.preFilter;rn;){(!$t||(ii=pr.exec(rn)))&&(ii&&(rn=rn.slice(ii[0].length)||rn),an.push(Mi=[])),$t=!1,(ii=_r.exec(rn))&&($t=ii.shift(),Mi.push({value:$t,type:ii[0].replace(zi," ")}),rn=rn.slice($t.length));for(Ti in h.filter)(ii=Wr[Ti].exec(rn))&&(!$i[Ti]||(ii=$i[Ti](ii)))&&($t=ii.shift(),Mi.push({value:$t,type:Ti,matches:ii}),rn=rn.slice($t.length));if(!$t)break}return mt?rn.length:rn?Pt.error(ht):In(ht,an).slice(0)}function it(ht){for(var mt=0,$t=ht.length,ii="";mt<$t;mt++)ii+=ht[mt].value;return ii}function ut(ht,mt,$t){var ii=mt.dir,Mi=mt.next,Ti=Mi||ii,rn=$t&&Ti==="parentNode",an=ki++;return mt.first?function($i,sn,An){for(;$i=$i[ii];)if($i.nodeType===1||rn)return ht($i,sn,An);return!1}:function($i,sn,An){var mn,Mn,wn=[Ji,an];if(An){for(;$i=$i[ii];)if(($i.nodeType===1||rn)&&ht($i,sn,An))return!0}else for(;$i=$i[ii];)if($i.nodeType===1||rn)if(Mn=$i[yi]||($i[yi]={}),Mi&&ze($i,Mi))$i=$i[ii]||$i;else{if((mn=Mn[Ti])&&mn[0]===Ji&&mn[1]===an)return wn[2]=mn[2];if(Mn[Ti]=wn,wn[2]=ht($i,sn,An))return!0}return!1}}function Rt(ht){return ht.length>1?function(mt,$t,ii){for(var Mi=ht.length;Mi--;)if(!ht[Mi](mt,$t,ii))return!1;return!0}:ht[0]}function Qt(ht,mt,$t){for(var ii=0,Mi=mt.length;ii<Mi;ii++)Pt(ht,mt[ii],$t);return $t}function vi(ht,mt,$t,ii,Mi){for(var Ti,rn=[],an=0,$i=ht.length,sn=mt!=null;an<$i;an++)(Ti=ht[an])&&(!$t||$t(Ti,ii,Mi))&&(rn.push(Ti),sn&&mt.push(an));return rn}function Di(ht,mt,$t,ii,Mi,Ti){return ii&&!ii[yi]&&(ii=Di(ii)),Mi&&!Mi[yi]&&(Mi=Di(Mi,Ti)),ci(function(rn,an,$i,sn){var An,mn,Mn,wn,hn=[],nr=[],cr=an.length,ur=rn||Qt(mt||"*",$i.nodeType?[$i]:$i,[]),Pr=ht&&(rn||!mt)?vi(ur,hn,ht,$i,sn):ur;if($t?(wn=Mi||(rn?ht:cr||ii)?[]:an,$t(Pr,wn,$i,sn)):wn=Pr,ii)for(An=vi(wn,nr),ii(An,[],$i,sn),mn=An.length;mn--;)(Mn=An[mn])&&(wn[nr[mn]]=!(Pr[nr[mn]]=Mn));if(rn){if(Mi||ht){if(Mi){for(An=[],mn=wn.length;mn--;)(Mn=wn[mn])&&An.push(Pr[mn]=Mn);Mi(null,wn=[],An,sn)}for(mn=wn.length;mn--;)(Mn=wn[mn])&&(An=Mi?te.call(rn,Mn):hn[mn])>-1&&(rn[An]=!(an[An]=Mn))}}else wn=vi(wn===an?wn.splice(cr,wn.length):wn),Mi?Mi(null,an,wn,sn):je.apply(an,wn)})}function pi(ht){for(var mt,$t,ii,Mi=ht.length,Ti=h.relative[ht[0].type],rn=Ti||h.relative[" "],an=Ti?1:0,$i=ut(function(mn){return mn===mt},rn,!0),sn=ut(function(mn){return te.call(mt,mn)>-1},rn,!0),An=[function(mn,Mn,wn){var hn=!Ti&&(wn||Mn!=k)||((mt=Mn).nodeType?$i(mn,Mn,wn):sn(mn,Mn,wn));return mt=null,hn}];an<Mi;an++)if($t=h.relative[ht[an].type])An=[ut(Rt(An),$t)];else{if($t=h.filter[ht[an].type].apply(null,ht[an].matches),$t[yi]){for(ii=++an;ii<Mi&&!h.relative[ht[ii].type];ii++);return Di(an>1&&Rt(An),an>1&&it(ht.slice(0,an-1).concat({value:ht[an-2].type===" "?"*":""})).replace(zi,"$1"),$t,an<ii&&pi(ht.slice(an,ii)),ii<Mi&&pi(ht=ht.slice(ii)),ii<Mi&&it(ht))}An.push($t)}return Rt(An)}function Oi(ht,mt){var $t=mt.length>0,ii=ht.length>0,Mi=function(rn,an,$i,sn,An){var mn,Mn,wn,hn=0,nr="0",cr=rn&&[],ur=[],Pr=k,eo=rn||ii&&h.find.TAG("*",An),Wa=Ji+=Pr==null?1:Math.random()||.1,Mr=eo.length;for(An&&(k=an==We||an||An);nr!==Mr&&(mn=eo[nr])!=null;nr++){if(ii&&mn){for(Mn=0,!an&&mn.ownerDocument!=We&&(pe(mn),$i=!gt);wn=ht[Mn++];)if(wn(mn,an||We,$i)){je.call(sn,mn);break}An&&(Ji=Wa)}$t&&((mn=!wn&&mn)&&hn--,rn&&cr.push(mn))}if(hn+=nr,$t&&nr!==hn){for(Mn=0;wn=mt[Mn++];)wn(cr,ur,an,$i);if(rn){if(hn>0)for(;nr--;)cr[nr]||ur[nr]||(ur[nr]=oi.call(sn));ur=vi(ur)}je.apply(sn,ur),An&&!rn&&ur.length>0&&hn+mt.length>1&&M.uniqueSort(sn)}return An&&(Ji=Wa,k=Pr),cr};return $t?ci(Mi):Mi}function Ot(ht,mt){var $t,ii=[],Mi=[],Ti=On[ht+" "];if(!Ti){for(mt||(mt=Le(ht)),$t=mt.length;$t--;)Ti=pi(mt[$t]),Ti[yi]?ii.push(Ti):Mi.push(Ti);Ti=On(ht,Oi(Mi,ii)),Ti.selector=ht}return Ti}function Ci(ht,mt,$t,ii){var Mi,Ti,rn,an,$i,sn=typeof ht=="function"&&ht,An=!ii&&Le(ht=sn.selector||ht);if($t=$t||[],An.length===1){if(Ti=An[0]=An[0].slice(0),Ti.length>2&&(rn=Ti[0]).type==="ID"&&mt.nodeType===9&&gt&&h.relative[Ti[1].type]){if(mt=(h.find.ID(rn.matches[0].replace(Yr,Se),mt)||[])[0],mt)sn&&(mt=mt.parentNode);else return $t;ht=ht.slice(Ti.shift().value.length)}for(Mi=Wr.needsContext.test(ht)?0:Ti.length;Mi--&&(rn=Ti[Mi],!h.relative[an=rn.type]);)if(($i=h.find[an])&&(ii=$i(rn.matches[0].replace(Yr,Se),Tr.test(Ti[0].type)&&W(mt.parentNode)||mt))){if(Ti.splice(Mi,1),ht=ii.length&&it(Ti),!ht)return je.apply($t,ii),$t;break}}return(sn||Ot(ht,An))(ii,mt,!gt,$t,!mt||Tr.test(ht)&&W(mt.parentNode)||mt),$t}ue.sortStable=yi.split("").sort(Er).join("")===yi,pe(),ue.sortDetached=Fi(function(ht){return ht.compareDocumentPosition(We.createElement("fieldset"))&1}),M.find=Pt,M.expr[":"]=M.expr.pseudos,M.unique=M.uniqueSort,Pt.compile=Ot,Pt.select=Ci,Pt.setDocument=pe,Pt.tokenize=Le,Pt.escape=M.escapeSelector,Pt.getText=M.text,Pt.isXML=M.isXMLDoc,Pt.selectors=M.expr,Pt.support=M.support,Pt.uniqueSort=M.uniqueSort})();var at=function(h,k,V){for(var ve=[],je=V!==void 0;(h=h[k])&&h.nodeType!==9;)if(h.nodeType===1){if(je&&M(h).is(V))break;ve.push(h)}return ve},Ut=function(h,k){for(var V=[];h;h=h.nextSibling)h.nodeType===1&&h!==k&&V.push(h);return V},Wt=M.expr.match.needsContext,kt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ee(D,h,k){return x(h)?M.grep(D,function(V,ve){return!!h.call(V,ve,V)!==k}):h.nodeType?M.grep(D,function(V){return V===h!==k}):typeof h!="string"?M.grep(D,function(V){return te.call(h,V)>-1!==k}):M.filter(h,D,k)}M.filter=function(D,h,k){var V=h[0];return k&&(D=":not("+D+")"),h.length===1&&V.nodeType===1?M.find.matchesSelector(V,D)?[V]:[]:M.find.matches(D,M.grep(h,function(ve){return ve.nodeType===1}))},M.fn.extend({find:function(h){var k,V,ve=this.length,je=this;if(typeof h!="string")return this.pushStack(M(h).filter(function(){for(k=0;k<ve;k++)if(M.contains(je[k],this))return!0}));for(V=this.pushStack([]),k=0;k<ve;k++)M.find(h,je[k],V);return ve>1?M.uniqueSort(V):V},filter:function(h){return this.pushStack(ee(this,h||[],!1))},not:function(h){return this.pushStack(ee(this,h||[],!0))},is:function(h){return!!ee(this,typeof h=="string"&&Wt.test(h)?M(h):h||[],!1).length}});var me,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Y=M.fn.init=function(D,h,k){var V,ve;if(!D)return this;if(k=k||me,typeof D=="string")if(D[0]==="<"&&D[D.length-1]===">"&&D.length>=3?V=[null,D,null]:V=P.exec(D),V&&(V[1]||!h))if(V[1]){if(h=h instanceof M?h[0]:h,M.merge(this,M.parseHTML(V[1],h&&h.nodeType?h.ownerDocument||h:ne,!0)),kt.test(V[1])&&M.isPlainObject(h))for(V in h)x(this[V])?this[V](h[V]):this.attr(V,h[V]);return this}else return ve=ne.getElementById(V[2]),ve&&(this[0]=ve,this.length=1),this;else return!h||h.jquery?(h||k).find(D):this.constructor(h).find(D);else{if(D.nodeType)return this[0]=D,this.length=1,this;if(x(D))return k.ready!==void 0?k.ready(D):D(M)}return M.makeArray(D,this)};Y.prototype=M.fn,me=M(ne);var Oe=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};M.fn.extend({has:function(h){var k=M(h,this),V=k.length;return this.filter(function(){for(var ve=0;ve<V;ve++)if(M.contains(this,k[ve]))return!0})},closest:function(h,k){var V,ve=0,je=this.length,We=[],ct=typeof h!="string"&&M(h);if(!Wt.test(h)){for(;ve<je;ve++)for(V=this[ve];V&&V!==k;V=V.parentNode)if(V.nodeType<11&&(ct?ct.index(V)>-1:V.nodeType===1&&M.find.matchesSelector(V,h))){We.push(V);break}}return this.pushStack(We.length>1?M.uniqueSort(We):We)},index:function(h){return h?typeof h=="string"?te.call(M(h),this[0]):te.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,k){return this.pushStack(M.uniqueSort(M.merge(this.get(),M(h,k))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function fe(D,h){for(;(D=D[h])&&D.nodeType!==1;);return D}M.each({parent:function(h){var k=h.parentNode;return k&&k.nodeType!==11?k:null},parents:function(h){return at(h,"parentNode")},parentsUntil:function(h,k,V){return at(h,"parentNode",V)},next:function(h){return fe(h,"nextSibling")},prev:function(h){return fe(h,"previousSibling")},nextAll:function(h){return at(h,"nextSibling")},prevAll:function(h){return at(h,"previousSibling")},nextUntil:function(h,k,V){return at(h,"nextSibling",V)},prevUntil:function(h,k,V){return at(h,"previousSibling",V)},siblings:function(h){return Ut((h.parentNode||{}).firstChild,h)},children:function(h){return Ut(h.firstChild)},contents:function(h){return h.contentDocument!=null&&y(h.contentDocument)?h.contentDocument:(ze(h,"template")&&(h=h.content||h),M.merge([],h.childNodes))}},function(D,h){M.fn[D]=function(k,V){var ve=M.map(this,h,k);return D.slice(-5)!=="Until"&&(V=k),V&&typeof V=="string"&&(ve=M.filter(V,ve)),this.length>1&&(N[D]||M.uniqueSort(ve),Oe.test(D)&&ve.reverse()),this.pushStack(ve)}});var I=/[^\x20\t\r\n\f]+/g;function L(D){var h={};return M.each(D.match(I)||[],function(k,V){h[V]=!0}),h}M.Callbacks=function(D){D=typeof D=="string"?L(D):M.extend({},D);var h,k,V,ve,je=[],We=[],ct=-1,gt=function(){for(ve=ve||D.once,V=h=!0;We.length;ct=-1)for(k=We.shift();++ct<je.length;)je[ct].apply(k[0],k[1])===!1&&D.stopOnFalse&&(ct=je.length,k=!1);D.memory||(k=!1),h=!1,ve&&(k?je=[]:je="")},It={add:function(){return je&&(k&&!h&&(ct=je.length-1,We.push(k)),function yi(Ji){M.each(Ji,function(ki,en){x(en)?(!D.unique||!It.has(en))&&je.push(en):en&&en.length&&se(en)!=="string"&&yi(en)})}(arguments),k&&!h&&gt()),this},remove:function(){return M.each(arguments,function(yi,Ji){for(var ki;(ki=M.inArray(Ji,je,ki))>-1;)je.splice(ki,1),ki<=ct&&ct--}),this},has:function(yi){return yi?M.inArray(yi,je)>-1:je.length>0},empty:function(){return je&&(je=[]),this},disable:function(){return ve=We=[],je=k="",this},disabled:function(){return!je},lock:function(){return ve=We=[],!k&&!h&&(je=k=""),this},locked:function(){return!!ve},fireWith:function(yi,Ji){return ve||(Ji=Ji||[],Ji=[yi,Ji.slice?Ji.slice():Ji],We.push(Ji),h||gt()),this},fire:function(){return It.fireWith(this,arguments),this},fired:function(){return!!V}};return It};function re(D){return D}function J(D){throw D}function De(D,h,k,V){var ve;try{D&&x(ve=D.promise)?ve.call(D).done(h).fail(k):D&&x(ve=D.then)?ve.call(D,h,k):h.apply(void 0,[D].slice(V))}catch(je){k.apply(void 0,[je])}}M.extend({Deferred:function(h){var k=[["notify","progress",M.Callbacks("memory"),M.Callbacks("memory"),2],["resolve","done",M.Callbacks("once memory"),M.Callbacks("once memory"),0,"resolved"],["reject","fail",M.Callbacks("once memory"),M.Callbacks("once memory"),1,"rejected"]],V="pending",ve={state:function(){return V},always:function(){return je.done(arguments).fail(arguments),this},catch:function(ct){return ve.then(null,ct)},pipe:function(){var ct=arguments;return M.Deferred(function(gt){M.each(k,function(It,xi){var yi=x(ct[xi[4]])&&ct[xi[4]];je[xi[1]](function(){var Ji=yi&&yi.apply(this,arguments);Ji&&x(Ji.promise)?Ji.promise().progress(gt.notify).done(gt.resolve).fail(gt.reject):gt[xi[0]+"With"](this,yi?[Ji]:arguments)})}),ct=null}).promise()},then:function(ct,gt,It){var xi=0;function yi(Ji,ki,en,In){return function(){var On=this,Qn=arguments,Er=function(){var Sr,Tn;if(!(Ji<xi)){if(Sr=en.apply(On,Qn),Sr===ki.promise())throw new TypeError("Thenable self-resolution");Tn=Sr&&(Ni(Sr)==="object"||typeof Sr=="function")&&Sr.then,x(Tn)?In?Tn.call(Sr,yi(xi,ki,re,In),yi(xi,ki,J,In)):(xi++,Tn.call(Sr,yi(xi,ki,re,In),yi(xi,ki,J,In),yi(xi,ki,re,ki.notifyWith))):(en!==re&&(On=void 0,Qn=[Sr]),(In||ki.resolveWith)(On,Qn))}},$r=In?Er:function(){try{Er()}catch(Rr){M.Deferred.exceptionHook&&M.Deferred.exceptionHook(Rr,$r.error),Ji+1>=xi&&(en!==J&&(On=void 0,Qn=[Rr]),ki.rejectWith(On,Qn))}};Ji?$r():(M.Deferred.getErrorHook?$r.error=M.Deferred.getErrorHook():M.Deferred.getStackHook&&($r.error=M.Deferred.getStackHook()),c.setTimeout($r))}}return M.Deferred(function(Ji){k[0][3].add(yi(0,Ji,x(It)?It:re,Ji.notifyWith)),k[1][3].add(yi(0,Ji,x(ct)?ct:re)),k[2][3].add(yi(0,Ji,x(gt)?gt:J))}).promise()},promise:function(ct){return ct!=null?M.extend(ct,ve):ve}},je={};return M.each(k,function(We,ct){var gt=ct[2],It=ct[5];ve[ct[1]]=gt.add,It&&gt.add(function(){V=It},k[3-We][2].disable,k[3-We][3].disable,k[0][2].lock,k[0][3].lock),gt.add(ct[3].fire),je[ct[0]]=function(){return je[ct[0]+"With"](this===je?void 0:this,arguments),this},je[ct[0]+"With"]=gt.fireWith}),ve.promise(je),h&&h.call(je,je),je},when:function(h){var k=arguments.length,V=k,ve=Array(V),je=w.call(arguments),We=M.Deferred(),ct=function(It){return function(xi){ve[It]=this,je[It]=arguments.length>1?w.call(arguments):xi,--k||We.resolveWith(ve,je)}};if(k<=1&&(De(h,We.done(ct(V)).resolve,We.reject,!k),We.state()==="pending"||x(je[V]&&je[V].then)))return We.then();for(;V--;)De(je[V],ct(V),We.reject);return We.promise()}});var Ye=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;M.Deferred.exceptionHook=function(D,h){c.console&&c.console.warn&&D&&Ye.test(D.name)&&c.console.warn("jQuery.Deferred exception: "+D.message,D.stack,h)},M.readyException=function(D){c.setTimeout(function(){throw D})};var et=M.Deferred();M.fn.ready=function(D){return et.then(D).catch(function(h){M.readyException(h)}),this},M.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--M.readyWait:M.isReady)||(M.isReady=!0,!(h!==!0&&--M.readyWait>0)&&et.resolveWith(ne,[M]))}}),M.ready.then=et.then;function R(){ne.removeEventListener("DOMContentLoaded",R),c.removeEventListener("load",R),M.ready()}ne.readyState==="complete"||ne.readyState!=="loading"&&!ne.documentElement.doScroll?c.setTimeout(M.ready):(ne.addEventListener("DOMContentLoaded",R),c.addEventListener("load",R));var He=function D(h,k,V,ve,je,We,ct){var gt=0,It=h.length,xi=V==null;if(se(V)==="object"){je=!0;for(gt in V)D(h,k,gt,V[gt],!0,We,ct)}else if(ve!==void 0&&(je=!0,x(ve)||(ct=!0),xi&&(ct?(k.call(h,ve),k=null):(xi=k,k=function(Ji,ki,en){return xi.call(M(Ji),en)})),k))for(;gt<It;gt++)k(h[gt],V,ct?ve:ve.call(h[gt],gt,k(h[gt],V)));return je?h:xi?k.call(h):It?k(h[0],V):We},G=/^-ms-/,ge=/-([a-z])/g;function xe(D,h){return h.toUpperCase()}function ke(D){return D.replace(G,"ms-").replace(ge,xe)}var ce=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function X(){this.expando=M.expando+X.uid++}X.uid=1,X.prototype={cache:function(h){var k=h[this.expando];return k||(k={},ce(h)&&(h.nodeType?h[this.expando]=k:Object.defineProperty(h,this.expando,{value:k,configurable:!0}))),k},set:function(h,k,V){var ve,je=this.cache(h);if(typeof k=="string")je[ke(k)]=V;else for(ve in k)je[ke(ve)]=k[ve];return je},get:function(h,k){return k===void 0?this.cache(h):h[this.expando]&&h[this.expando][ke(k)]},access:function(h,k,V){return k===void 0||k&&typeof k=="string"&&V===void 0?this.get(h,k):(this.set(h,k,V),V!==void 0?V:k)},remove:function(h,k){var V,ve=h[this.expando];if(ve!==void 0){if(k!==void 0)for(Array.isArray(k)?k=k.map(ke):(k=ke(k),k=k in ve?[k]:k.match(I)||[]),V=k.length;V--;)delete ve[k[V]];(k===void 0||M.isEmptyObject(ve))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var k=h[this.expando];return k!==void 0&&!M.isEmptyObject(k)}};var Be=new X,lt=new X,dt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Lt=/[A-Z]/g;function qt(D){return D==="true"?!0:D==="false"?!1:D==="null"?null:D===+D+""?+D:dt.test(D)?JSON.parse(D):D}function Si(D,h,k){var V;if(k===void 0&&D.nodeType===1)if(V="data-"+h.replace(Lt,"-$&").toLowerCase(),k=D.getAttribute(V),typeof k=="string"){try{k=qt(k)}catch{}lt.set(D,h,k)}else k=void 0;return k}M.extend({hasData:function(h){return lt.hasData(h)||Be.hasData(h)},data:function(h,k,V){return lt.access(h,k,V)},removeData:function(h,k){lt.remove(h,k)},_data:function(h,k,V){return Be.access(h,k,V)},_removeData:function(h,k){Be.remove(h,k)}}),M.fn.extend({data:function(h,k){var V,ve,je,We=this[0],ct=We&&We.attributes;if(h===void 0){if(this.length&&(je=lt.get(We),We.nodeType===1&&!Be.get(We,"hasDataAttrs"))){for(V=ct.length;V--;)ct[V]&&(ve=ct[V].name,ve.indexOf("data-")===0&&(ve=ke(ve.slice(5)),Si(We,ve,je[ve])));Be.set(We,"hasDataAttrs",!0)}return je}return Ni(h)==="object"?this.each(function(){lt.set(this,h)}):He(this,function(gt){var It;if(We&&gt===void 0)return It=lt.get(We,h),It!==void 0||(It=Si(We,h),It!==void 0)?It:void 0;this.each(function(){lt.set(this,h,gt)})},null,k,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){lt.remove(this,h)})}}),M.extend({queue:function(h,k,V){var ve;if(h)return k=(k||"fx")+"queue",ve=Be.get(h,k),V&&(!ve||Array.isArray(V)?ve=Be.access(h,k,M.makeArray(V)):ve.push(V)),ve||[]},dequeue:function(h,k){k=k||"fx";var V=M.queue(h,k),ve=V.length,je=V.shift(),We=M._queueHooks(h,k),ct=function(){M.dequeue(h,k)};je==="inprogress"&&(je=V.shift(),ve--),je&&(k==="fx"&&V.unshift("inprogress"),delete We.stop,je.call(h,ct,We)),!ve&&We&&We.empty.fire()},_queueHooks:function(h,k){var V=k+"queueHooks";return Be.get(h,V)||Be.access(h,V,{empty:M.Callbacks("once memory").add(function(){Be.remove(h,[k+"queue",V])})})}}),M.fn.extend({queue:function(h,k){var V=2;return typeof h!="string"&&(k=h,h="fx",V--),arguments.length<V?M.queue(this[0],h):k===void 0?this:this.each(function(){var ve=M.queue(this,h,k);M._queueHooks(this,h),h==="fx"&&ve[0]!=="inprogress"&&M.dequeue(this,h)})},dequeue:function(h){return this.each(function(){M.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,k){var V,ve=1,je=M.Deferred(),We=this,ct=this.length,gt=function(){--ve||je.resolveWith(We,[We])};for(typeof h!="string"&&(k=h,h=void 0),h=h||"fx";ct--;)V=Be.get(We[ct],h+"queueHooks"),V&&V.empty&&(ve++,V.empty.add(gt));return gt(),je.promise(k)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Bi=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),yt=["Top","Right","Bottom","Left"],wt=ne.documentElement,pt=function(h){return M.contains(h.ownerDocument,h)},Dt={composed:!0};wt.getRootNode&&(pt=function(h){return M.contains(h.ownerDocument,h)||h.getRootNode(Dt)===h.ownerDocument});var St=function(h,k){return h=k||h,h.style.display==="none"||h.style.display===""&&pt(h)&&M.css(h,"display")==="none"};function Et(D,h,k,V){var ve,je,We=20,ct=V?function(){return V.cur()}:function(){return M.css(D,h,"")},gt=ct(),It=k&&k[3]||(M.cssNumber[h]?"":"px"),xi=D.nodeType&&(M.cssNumber[h]||It!=="px"&&+gt)&&Bi.exec(M.css(D,h));if(xi&&xi[3]!==It){for(gt=gt/2,It=It||xi[3],xi=+gt||1;We--;)M.style(D,h,xi+It),(1-je)*(1-(je=ct()/gt||.5))<=0&&(We=0),xi=xi/je;xi=xi*2,M.style(D,h,xi+It),k=k||[]}return k&&(xi=+xi||+gt||0,ve=k[1]?xi+(k[1]+1)*k[2]:+k[2],V&&(V.unit=It,V.start=xi,V.end=ve)),ve}var jt={};function _t(D){var h,k=D.ownerDocument,V=D.nodeName,ve=jt[V];return ve||(h=k.body.appendChild(k.createElement(V)),ve=M.css(h,"display"),h.parentNode.removeChild(h),ve==="none"&&(ve="block"),jt[V]=ve,ve)}function Xt(D,h){for(var k,V,ve=[],je=0,We=D.length;je<We;je++)V=D[je],V.style&&(k=V.style.display,h?(k==="none"&&(ve[je]=Be.get(V,"display")||null,ve[je]||(V.style.display="")),V.style.display===""&&St(V)&&(ve[je]=_t(V))):k!=="none"&&(ve[je]="none",Be.set(V,"display",k)));for(je=0;je<We;je++)ve[je]!=null&&(D[je].style.display=ve[je]);return D}M.fn.extend({show:function(){return Xt(this,!0)},hide:function(){return Xt(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){St(this)?M(this).show():M(this).hide()})}});var ot=/^(?:checkbox|radio)$/i,mi=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Pi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var D=ne.createDocumentFragment(),h=D.appendChild(ne.createElement("div")),k=ne.createElement("input");k.setAttribute("type","radio"),k.setAttribute("checked","checked"),k.setAttribute("name","t"),h.appendChild(k),ue.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,h.innerHTML="<textarea>x</textarea>",ue.noCloneChecked=!!h.cloneNode(!0).lastChild.defaultValue,h.innerHTML="<option></option>",ue.option=!!h.lastChild})();var Ii={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ii.tbody=Ii.tfoot=Ii.colgroup=Ii.caption=Ii.thead,Ii.th=Ii.td,ue.option||(Ii.optgroup=Ii.option=[1,"<select multiple='multiple'>","</select>"]);function ti(D,h){var k;return typeof D.getElementsByTagName<"u"?k=D.getElementsByTagName(h||"*"):typeof D.querySelectorAll<"u"?k=D.querySelectorAll(h||"*"):k=[],h===void 0||h&&ze(D,h)?M.merge([D],k):k}function Vi(D,h){for(var k=0,V=D.length;k<V;k++)Be.set(D[k],"globalEval",!h||Be.get(h[k],"globalEval"))}var Jt=/<|&#?\w+;/;function At(D,h,k,V,ve){for(var je,We,ct,gt,It,xi,yi=h.createDocumentFragment(),Ji=[],ki=0,en=D.length;ki<en;ki++)if(je=D[ki],je||je===0)if(se(je)==="object")M.merge(Ji,je.nodeType?[je]:je);else if(!Jt.test(je))Ji.push(h.createTextNode(je));else{for(We=We||yi.appendChild(h.createElement("div")),ct=(mi.exec(je)||["",""])[1].toLowerCase(),gt=Ii[ct]||Ii._default,We.innerHTML=gt[1]+M.htmlPrefilter(je)+gt[2],xi=gt[0];xi--;)We=We.lastChild;M.merge(Ji,We.childNodes),We=yi.firstChild,We.textContent=""}for(yi.textContent="",ki=0;je=Ji[ki++];){if(V&&M.inArray(je,V)>-1){ve&&ve.push(je);continue}if(It=pt(je),We=ti(yi.appendChild(je),"script"),It&&Vi(We),k)for(xi=0;je=We[xi++];)Pi.test(je.type||"")&&k.push(je)}return yi}var j=/^([^.]*)(?:\.(.+)|)/;function T(){return!0}function F(){return!1}function S(D,h,k,V,ve,je){var We,ct;if(Ni(h)==="object"){typeof k!="string"&&(V=V||k,k=void 0);for(ct in h)S(D,ct,k,V,h[ct],je);return D}if(V==null&&ve==null?(ve=k,V=k=void 0):ve==null&&(typeof k=="string"?(ve=V,V=void 0):(ve=V,V=k,k=void 0)),ve===!1)ve=F;else if(!ve)return D;return je===1&&(We=ve,ve=function(It){return M().off(It),We.apply(this,arguments)},ve.guid=We.guid||(We.guid=M.guid++)),D.each(function(){M.event.add(this,h,ve,V,k)})}M.event={global:{},add:function(h,k,V,ve,je){var We,ct,gt,It,xi,yi,Ji,ki,en,In,On,Qn=Be.get(h);if(ce(h))for(V.handler&&(We=V,V=We.handler,je=We.selector),je&&M.find.matchesSelector(wt,je),V.guid||(V.guid=M.guid++),(It=Qn.events)||(It=Qn.events=Object.create(null)),(ct=Qn.handle)||(ct=Qn.handle=function(Er){return typeof M<"u"&&M.event.triggered!==Er.type?M.event.dispatch.apply(h,arguments):void 0}),k=(k||"").match(I)||[""],xi=k.length;xi--;)gt=j.exec(k[xi])||[],en=On=gt[1],In=(gt[2]||"").split(".").sort(),en&&(Ji=M.event.special[en]||{},en=(je?Ji.delegateType:Ji.bindType)||en,Ji=M.event.special[en]||{},yi=M.extend({type:en,origType:On,data:ve,handler:V,guid:V.guid,selector:je,needsContext:je&&M.expr.match.needsContext.test(je),namespace:In.join(".")},We),(ki=It[en])||(ki=It[en]=[],ki.delegateCount=0,(!Ji.setup||Ji.setup.call(h,ve,In,ct)===!1)&&h.addEventListener&&h.addEventListener(en,ct)),Ji.add&&(Ji.add.call(h,yi),yi.handler.guid||(yi.handler.guid=V.guid)),je?ki.splice(ki.delegateCount++,0,yi):ki.push(yi),M.event.global[en]=!0)},remove:function(h,k,V,ve,je){var We,ct,gt,It,xi,yi,Ji,ki,en,In,On,Qn=Be.hasData(h)&&Be.get(h);if(!(!Qn||!(It=Qn.events))){for(k=(k||"").match(I)||[""],xi=k.length;xi--;){if(gt=j.exec(k[xi])||[],en=On=gt[1],In=(gt[2]||"").split(".").sort(),!en){for(en in It)M.event.remove(h,en+k[xi],V,ve,!0);continue}for(Ji=M.event.special[en]||{},en=(ve?Ji.delegateType:Ji.bindType)||en,ki=It[en]||[],gt=gt[2]&&new RegExp("(^|\\.)"+In.join("\\.(?:.*\\.|)")+"(\\.|$)"),ct=We=ki.length;We--;)yi=ki[We],(je||On===yi.origType)&&(!V||V.guid===yi.guid)&&(!gt||gt.test(yi.namespace))&&(!ve||ve===yi.selector||ve==="**"&&yi.selector)&&(ki.splice(We,1),yi.selector&&ki.delegateCount--,Ji.remove&&Ji.remove.call(h,yi));ct&&!ki.length&&((!Ji.teardown||Ji.teardown.call(h,In,Qn.handle)===!1)&&M.removeEvent(h,en,Qn.handle),delete It[en])}M.isEmptyObject(It)&&Be.remove(h,"handle events")}},dispatch:function(h){var k,V,ve,je,We,ct,gt=new Array(arguments.length),It=M.event.fix(h),xi=(Be.get(this,"events")||Object.create(null))[It.type]||[],yi=M.event.special[It.type]||{};for(gt[0]=It,k=1;k<arguments.length;k++)gt[k]=arguments[k];if(It.delegateTarget=this,!(yi.preDispatch&&yi.preDispatch.call(this,It)===!1)){for(ct=M.event.handlers.call(this,It,xi),k=0;(je=ct[k++])&&!It.isPropagationStopped();)for(It.currentTarget=je.elem,V=0;(We=je.handlers[V++])&&!It.isImmediatePropagationStopped();)(!It.rnamespace||We.namespace===!1||It.rnamespace.test(We.namespace))&&(It.handleObj=We,It.data=We.data,ve=((M.event.special[We.origType]||{}).handle||We.handler).apply(je.elem,gt),ve!==void 0&&(It.result=ve)===!1&&(It.preventDefault(),It.stopPropagation()));return yi.postDispatch&&yi.postDispatch.call(this,It),It.result}},handlers:function(h,k){var V,ve,je,We,ct,gt=[],It=k.delegateCount,xi=h.target;if(It&&xi.nodeType&&!(h.type==="click"&&h.button>=1)){for(;xi!==this;xi=xi.parentNode||this)if(xi.nodeType===1&&!(h.type==="click"&&xi.disabled===!0)){for(We=[],ct={},V=0;V<It;V++)ve=k[V],je=ve.selector+" ",ct[je]===void 0&&(ct[je]=ve.needsContext?M(je,this).index(xi)>-1:M.find(je,this,null,[xi]).length),ct[je]&&We.push(ve);We.length&&gt.push({elem:xi,handlers:We})}}return xi=this,It<k.length&&gt.push({elem:xi,handlers:k.slice(It)}),gt},addProp:function(h,k){Object.defineProperty(M.Event.prototype,h,{enumerable:!0,configurable:!0,get:x(k)?function(){if(this.originalEvent)return k(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(ve){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:ve})}})},fix:function(h){return h[M.expando]?h:new M.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var k=this||h;return ot.test(k.type)&&k.click&&ze(k,"input")&&be(k,"click",!0),!1},trigger:function(h){var k=this||h;return ot.test(k.type)&&k.click&&ze(k,"input")&&be(k,"click"),!0},_default:function(h){var k=h.target;return ot.test(k.type)&&k.click&&ze(k,"input")&&Be.get(k,"click")||ze(k,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function be(D,h,k){if(!k){Be.get(D,h)===void 0&&M.event.add(D,h,T);return}Be.set(D,h,!1),M.event.add(D,h,{namespace:!1,handler:function(ve){var je,We=Be.get(this,h);if(ve.isTrigger&1&&this[h]){if(We)(M.event.special[h]||{}).delegateType&&ve.stopPropagation();else if(We=w.call(arguments),Be.set(this,h,We),this[h](),je=Be.get(this,h),Be.set(this,h,!1),We!==je)return ve.stopImmediatePropagation(),ve.preventDefault(),je}else We&&(Be.set(this,h,M.event.trigger(We[0],We.slice(1),this)),ve.stopPropagation(),ve.isImmediatePropagationStopped=T)}})}M.removeEvent=function(D,h,k){D.removeEventListener&&D.removeEventListener(h,k)},M.Event=function(D,h){if(!(this instanceof M.Event))return new M.Event(D,h);D&&D.type?(this.originalEvent=D,this.type=D.type,this.isDefaultPrevented=D.defaultPrevented||D.defaultPrevented===void 0&&D.returnValue===!1?T:F,this.target=D.target&&D.target.nodeType===3?D.target.parentNode:D.target,this.currentTarget=D.currentTarget,this.relatedTarget=D.relatedTarget):this.type=D,h&&M.extend(this,h),this.timeStamp=D&&D.timeStamp||Date.now(),this[M.expando]=!0},M.Event.prototype={constructor:M.Event,isDefaultPrevented:F,isPropagationStopped:F,isImmediatePropagationStopped:F,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=T,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=T,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=T,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},M.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},M.event.addProp),M.each({focus:"focusin",blur:"focusout"},function(D,h){function k(V){if(ne.documentMode){var ve=Be.get(this,"handle"),je=M.event.fix(V);je.type=V.type==="focusin"?"focus":"blur",je.isSimulated=!0,ve(V),je.target===je.currentTarget&&ve(je)}else M.event.simulate(h,V.target,M.event.fix(V))}M.event.special[D]={setup:function(){var ve;if(be(this,D,!0),ne.documentMode)ve=Be.get(this,h),ve||this.addEventListener(h,k),Be.set(this,h,(ve||0)+1);else return!1},trigger:function(){return be(this,D),!0},teardown:function(){var ve;if(ne.documentMode)ve=Be.get(this,h)-1,ve?Be.set(this,h,ve):(this.removeEventListener(h,k),Be.remove(this,h));else return!1},_default:function(ve){return Be.get(ve.target,D)},delegateType:h},M.event.special[h]={setup:function(){var ve=this.ownerDocument||this.document||this,je=ne.documentMode?this:ve,We=Be.get(je,h);We||(ne.documentMode?this.addEventListener(h,k):ve.addEventListener(D,k,!0)),Be.set(je,h,(We||0)+1)},teardown:function(){var ve=this.ownerDocument||this.document||this,je=ne.documentMode?this:ve,We=Be.get(je,h)-1;We?Be.set(je,h,We):(ne.documentMode?this.removeEventListener(h,k):ve.removeEventListener(D,k,!0),Be.remove(je,h))}}}),M.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(D,h){M.event.special[D]={delegateType:h,bindType:h,handle:function(V){var ve,je=this,We=V.relatedTarget,ct=V.handleObj;return(!We||We!==je&&!M.contains(je,We))&&(V.type=ct.origType,ve=ct.handler.apply(this,arguments),V.type=h),ve}}}),M.fn.extend({on:function(h,k,V,ve){return S(this,h,k,V,ve)},one:function(h,k,V,ve){return S(this,h,k,V,ve,1)},off:function(h,k,V){var ve,je;if(h&&h.preventDefault&&h.handleObj)return ve=h.handleObj,M(h.delegateTarget).off(ve.namespace?ve.origType+"."+ve.namespace:ve.origType,ve.selector,ve.handler),this;if(Ni(h)==="object"){for(je in h)this.off(je,k,h[je]);return this}return(k===!1||typeof k=="function")&&(V=k,k=void 0),V===!1&&(V=F),this.each(function(){M.event.remove(this,h,V,k)})}});var _e=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ft(D,h){return ze(D,"table")&&ze(h.nodeType!==11?h:h.firstChild,"tr")&&M(D).children("tbody")[0]||D}function Gt(D){return D.type=(D.getAttribute("type")!==null)+"/"+D.type,D}function Ft(D){return(D.type||"").slice(0,5)==="true/"?D.type=D.type.slice(5):D.removeAttribute("type"),D}function Ee(D,h){var k,V,ve,je,We,ct,gt;if(h.nodeType===1){if(Be.hasData(D)&&(je=Be.get(D),gt=je.events,gt)){Be.remove(h,"handle events");for(ve in gt)for(k=0,V=gt[ve].length;k<V;k++)M.event.add(h,ve,gt[ve][k])}lt.hasData(D)&&(We=lt.access(D),ct=M.extend({},We),lt.set(h,ct))}}function nt(D,h){var k=h.nodeName.toLowerCase();k==="input"&&ot.test(D.type)?h.checked=D.checked:(k==="input"||k==="textarea")&&(h.defaultValue=D.defaultValue)}function Zt(D,h,k,V){h=g(h);var ve,je,We,ct,gt,It,xi=0,yi=D.length,Ji=yi-1,ki=h[0],en=x(ki);if(en||yi>1&&typeof ki=="string"&&!ue.checkClone&&Me.test(ki))return D.each(function(In){var On=D.eq(In);en&&(h[0]=ki.call(this,In,On.html())),Zt(On,h,k,V)});if(yi&&(ve=At(h,D[0].ownerDocument,!1,D,V),je=ve.firstChild,ve.childNodes.length===1&&(ve=je),je||V)){for(We=M.map(ti(ve,"script"),Gt),ct=We.length;xi<yi;xi++)gt=ve,xi!==Ji&&(gt=M.clone(gt,!0,!0),ct&&M.merge(We,ti(gt,"script"))),k.call(D[xi],gt,xi);if(ct)for(It=We[We.length-1].ownerDocument,M.map(We,Ft),xi=0;xi<ct;xi++)gt=We[xi],Pi.test(gt.type||"")&&!Be.access(gt,"globalEval")&&M.contains(It,gt)&&(gt.src&&(gt.type||"").toLowerCase()!=="module"?M._evalUrl&&!gt.noModule&&M._evalUrl(gt.src,{nonce:gt.nonce||gt.getAttribute("nonce")},It):ye(gt.textContent.replace(Ue,""),gt,It))}return D}function bi(D,h,k){for(var V,ve=h?M.filter(h,D):D,je=0;(V=ve[je])!=null;je++)!k&&V.nodeType===1&&M.cleanData(ti(V)),V.parentNode&&(k&&pt(V)&&Vi(ti(V,"script")),V.parentNode.removeChild(V));return D}M.extend({htmlPrefilter:function(h){return h},clone:function(h,k,V){var ve,je,We,ct,gt=h.cloneNode(!0),It=pt(h);if(!ue.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!M.isXMLDoc(h))for(ct=ti(gt),We=ti(h),ve=0,je=We.length;ve<je;ve++)nt(We[ve],ct[ve]);if(k)if(V)for(We=We||ti(h),ct=ct||ti(gt),ve=0,je=We.length;ve<je;ve++)Ee(We[ve],ct[ve]);else Ee(h,gt);return ct=ti(gt,"script"),ct.length>0&&Vi(ct,!It&&ti(h,"script")),gt},cleanData:function(h){for(var k,V,ve,je=M.event.special,We=0;(V=h[We])!==void 0;We++)if(ce(V)){if(k=V[Be.expando]){if(k.events)for(ve in k.events)je[ve]?M.event.remove(V,ve):M.removeEvent(V,ve,k.handle);V[Be.expando]=void 0}V[lt.expando]&&(V[lt.expando]=void 0)}}}),M.fn.extend({detach:function(h){return bi(this,h,!0)},remove:function(h){return bi(this,h)},text:function(h){return He(this,function(k){return k===void 0?M.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=k)})},null,h,arguments.length)},append:function(){return Zt(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=ft(this,h);k.appendChild(h)}})},prepend:function(){return Zt(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var k=ft(this,h);k.insertBefore(h,k.firstChild)}})},before:function(){return Zt(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return Zt(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,k=0;(h=this[k])!=null;k++)h.nodeType===1&&(M.cleanData(ti(h,!1)),h.textContent="");return this},clone:function(h,k){return h=h??!1,k=k??h,this.map(function(){return M.clone(this,h,k)})},html:function(h){return He(this,function(k){var V=this[0]||{},ve=0,je=this.length;if(k===void 0&&V.nodeType===1)return V.innerHTML;if(typeof k=="string"&&!_e.test(k)&&!Ii[(mi.exec(k)||["",""])[1].toLowerCase()]){k=M.htmlPrefilter(k);try{for(;ve<je;ve++)V=this[ve]||{},V.nodeType===1&&(M.cleanData(ti(V,!1)),V.innerHTML=k);V=0}catch{}}V&&this.empty().append(k)},null,h,arguments.length)},replaceWith:function(){var h=[];return Zt(this,arguments,function(k){var V=this.parentNode;M.inArray(this,h)<0&&(M.cleanData(ti(this)),V&&V.replaceChild(k,this))},h)}}),M.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(D,h){M.fn[D]=function(k){for(var V,ve=[],je=M(k),We=je.length-1,ct=0;ct<=We;ct++)V=ct===We?this:this.clone(!0),M(je[ct])[h](V),p.apply(ve,V.get());return this.pushStack(ve)}});var Kt=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),ri=/^--/,Li=function(h){var k=h.ownerDocument.defaultView;return(!k||!k.opener)&&(k=c),k.getComputedStyle(h)},li=function(h,k,V){var ve,je,We={};for(je in k)We[je]=h.style[je],h.style[je]=k[je];ve=V.call(h);for(je in k)h.style[je]=We[je];return ve},Mt=new RegExp(yt.join("|"),"i");(function(){function D(){if(It){gt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",It.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",wt.appendChild(gt).appendChild(It);var xi=c.getComputedStyle(It);k=xi.top!=="1%",ct=h(xi.marginLeft)===12,It.style.right="60%",je=h(xi.right)===36,V=h(xi.width)===36,It.style.position="absolute",ve=h(It.offsetWidth/3)===12,wt.removeChild(gt),It=null}}function h(xi){return Math.round(parseFloat(xi))}var k,V,ve,je,We,ct,gt=ne.createElement("div"),It=ne.createElement("div");It.style&&(It.style.backgroundClip="content-box",It.cloneNode(!0).style.backgroundClip="",ue.clearCloneStyle=It.style.backgroundClip==="content-box",M.extend(ue,{boxSizingReliable:function(){return D(),V},pixelBoxStyles:function(){return D(),je},pixelPosition:function(){return D(),k},reliableMarginLeft:function(){return D(),ct},scrollboxSize:function(){return D(),ve},reliableTrDimensions:function(){var yi,Ji,ki,en;return We==null&&(yi=ne.createElement("table"),Ji=ne.createElement("tr"),ki=ne.createElement("div"),yi.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Ji.style.cssText="box-sizing:content-box;border:1px solid",Ji.style.height="1px",ki.style.height="9px",ki.style.display="block",wt.appendChild(yi).appendChild(Ji).appendChild(ki),en=c.getComputedStyle(Ji),We=parseInt(en.height,10)+parseInt(en.borderTopWidth,10)+parseInt(en.borderBottomWidth,10)===Ji.offsetHeight,wt.removeChild(yi)),We}}))})();function Nt(D,h,k){var V,ve,je,We,ct=ri.test(h),gt=D.style;return k=k||Li(D),k&&(We=k.getPropertyValue(h)||k[h],ct&&We&&(We=We.replace(zi,"$1")||void 0),We===""&&!pt(D)&&(We=M.style(D,h)),!ue.pixelBoxStyles()&&Kt.test(We)&&Mt.test(h)&&(V=gt.width,ve=gt.minWidth,je=gt.maxWidth,gt.minWidth=gt.maxWidth=gt.width=We,We=k.width,gt.width=V,gt.minWidth=ve,gt.maxWidth=je)),We!==void 0?We+"":We}function ai(D,h){return{get:function(){if(D()){delete this.get;return}return(this.get=h).apply(this,arguments)}}}var ji=["Webkit","Moz","ms"],tn=ne.createElement("div").style,Ui={};function Gi(D){for(var h=D[0].toUpperCase()+D.slice(1),k=ji.length;k--;)if(D=ji[k]+h,D in tn)return D}function nn(D){var h=M.cssProps[D]||Ui[D];return h||(D in tn?D:Ui[D]=Gi(D)||D)}var Zi=/^(none|table(?!-c[ea]).+)/,Yi={position:"absolute",visibility:"hidden",display:"block"},bn={letterSpacing:"0",fontWeight:"400"};function vn(D,h,k){var V=Bi.exec(h);return V?Math.max(0,V[2]-(k||0))+(V[3]||"px"):h}function jn(D,h,k,V,ve,je){var We=h==="width"?1:0,ct=0,gt=0,It=0;if(k===(V?"border":"content"))return 0;for(;We<4;We+=2)k==="margin"&&(It+=M.css(D,k+yt[We],!0,ve)),V?(k==="content"&&(gt-=M.css(D,"padding"+yt[We],!0,ve)),k!=="margin"&&(gt-=M.css(D,"border"+yt[We]+"Width",!0,ve))):(gt+=M.css(D,"padding"+yt[We],!0,ve),k!=="padding"?gt+=M.css(D,"border"+yt[We]+"Width",!0,ve):ct+=M.css(D,"border"+yt[We]+"Width",!0,ve));return!V&&je>=0&&(gt+=Math.max(0,Math.ceil(D["offset"+h[0].toUpperCase()+h.slice(1)]-je-gt-ct-.5))||0),gt+It}function un(D,h,k){var V=Li(D),ve=!ue.boxSizingReliable()||k,je=ve&&M.css(D,"boxSizing",!1,V)==="border-box",We=je,ct=Nt(D,h,V),gt="offset"+h[0].toUpperCase()+h.slice(1);if(Kt.test(ct)){if(!k)return ct;ct="auto"}return(!ue.boxSizingReliable()&&je||!ue.reliableTrDimensions()&&ze(D,"tr")||ct==="auto"||!parseFloat(ct)&&M.css(D,"display",!1,V)==="inline")&&D.getClientRects().length&&(je=M.css(D,"boxSizing",!1,V)==="border-box",We=gt in D,We&&(ct=D[gt])),ct=parseFloat(ct)||0,ct+jn(D,h,k||(je?"border":"content"),We,V,ct)+"px"}M.extend({cssHooks:{opacity:{get:function(h,k){if(k){var V=Nt(h,"opacity");return V===""?"1":V}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,k,V,ve){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var je,We,ct,gt=ke(k),It=ri.test(k),xi=h.style;if(It||(k=nn(gt)),ct=M.cssHooks[k]||M.cssHooks[gt],V!==void 0){if(We=Ni(V),We==="string"&&(je=Bi.exec(V))&&je[1]&&(V=Et(h,k,je),We="number"),V==null||V!==V)return;We==="number"&&!It&&(V+=je&&je[3]||(M.cssNumber[gt]?"":"px")),!ue.clearCloneStyle&&V===""&&k.indexOf("background")===0&&(xi[k]="inherit"),(!ct||!("set"in ct)||(V=ct.set(h,V,ve))!==void 0)&&(It?xi.setProperty(k,V):xi[k]=V)}else return ct&&"get"in ct&&(je=ct.get(h,!1,ve))!==void 0?je:xi[k]}},css:function(h,k,V,ve){var je,We,ct,gt=ke(k),It=ri.test(k);return It||(k=nn(gt)),ct=M.cssHooks[k]||M.cssHooks[gt],ct&&"get"in ct&&(je=ct.get(h,!0,V)),je===void 0&&(je=Nt(h,k,ve)),je==="normal"&&k in bn&&(je=bn[k]),V===""||V?(We=parseFloat(je),V===!0||isFinite(We)?We||0:je):je}}),M.each(["height","width"],function(D,h){M.cssHooks[h]={get:function(V,ve,je){if(ve)return Zi.test(M.css(V,"display"))&&(!V.getClientRects().length||!V.getBoundingClientRect().width)?li(V,Yi,function(){return un(V,h,je)}):un(V,h,je)},set:function(V,ve,je){var We,ct=Li(V),gt=!ue.scrollboxSize()&&ct.position==="absolute",It=gt||je,xi=It&&M.css(V,"boxSizing",!1,ct)==="border-box",yi=je?jn(V,h,je,xi,ct):0;return xi&&gt&&(yi-=Math.ceil(V["offset"+h[0].toUpperCase()+h.slice(1)]-parseFloat(ct[h])-jn(V,h,"border",!1,ct)-.5)),yi&&(We=Bi.exec(ve))&&(We[3]||"px")!=="px"&&(V.style[h]=ve,ve=M.css(V,h)),vn(V,ve,yi)}}}),M.cssHooks.marginLeft=ai(ue.reliableMarginLeft,function(D,h){if(h)return(parseFloat(Nt(D,"marginLeft"))||D.getBoundingClientRect().left-li(D,{marginLeft:0},function(){return D.getBoundingClientRect().left}))+"px"}),M.each({margin:"",padding:"",border:"Width"},function(D,h){M.cssHooks[D+h]={expand:function(V){for(var ve=0,je={},We=typeof V=="string"?V.split(" "):[V];ve<4;ve++)je[D+yt[ve]+h]=We[ve]||We[ve-2]||We[0];return je}},D!=="margin"&&(M.cssHooks[D+h].set=vn)}),M.fn.extend({css:function(h,k){return He(this,function(V,ve,je){var We,ct,gt={},It=0;if(Array.isArray(ve)){for(We=Li(V),ct=ve.length;It<ct;It++)gt[ve[It]]=M.css(V,ve[It],!1,We);return gt}return je!==void 0?M.style(V,ve,je):M.css(V,ve)},h,k,arguments.length>1)}});function Un(D,h,k,V,ve){return new Un.prototype.init(D,h,k,V,ve)}M.Tween=Un,Un.prototype={constructor:Un,init:function(h,k,V,ve,je,We){this.elem=h,this.prop=V,this.easing=je||M.easing._default,this.options=k,this.start=this.now=this.cur(),this.end=ve,this.unit=We||(M.cssNumber[V]?"":"px")},cur:function(){var h=Un.propHooks[this.prop];return h&&h.get?h.get(this):Un.propHooks._default.get(this)},run:function(h){var k,V=Un.propHooks[this.prop];return this.options.duration?this.pos=k=M.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=k=h,this.now=(this.end-this.start)*k+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),V&&V.set?V.set(this):Un.propHooks._default.set(this),this}},Un.prototype.init.prototype=Un.prototype,Un.propHooks={_default:{get:function(h){var k;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(k=M.css(h.elem,h.prop,""),!k||k==="auto"?0:k)},set:function(h){M.fx.step[h.prop]?M.fx.step[h.prop](h):h.elem.nodeType===1&&(M.cssHooks[h.prop]||h.elem.style[nn(h.prop)]!=null)?M.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},Un.propHooks.scrollTop=Un.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},M.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},M.fx=Un.prototype.init,M.fx.step={};var Hn,yn,fn=/^(?:toggle|show|hide)$/,Cn=/queueHooks$/;function wr(){yn&&(ne.hidden===!1&&c.requestAnimationFrame?c.requestAnimationFrame(wr):c.setTimeout(wr,M.fx.interval),M.fx.tick())}function tr(){return c.setTimeout(function(){Hn=void 0}),Hn=Date.now()}function Nn(D,h){var k,V=0,ve={height:D};for(h=h?1:0;V<4;V+=2-h)k=yt[V],ve["margin"+k]=ve["padding"+k]=D;return h&&(ve.opacity=ve.width=D),ve}function lr(D,h,k){for(var V,ve=(_n.tweeners[h]||[]).concat(_n.tweeners["*"]),je=0,We=ve.length;je<We;je++)if(V=ve[je].call(k,h,D))return V}function zr(D,h,k){var V,ve,je,We,ct,gt,It,xi,yi="width"in h||"height"in h,Ji=this,ki={},en=D.style,In=D.nodeType&&St(D),On=Be.get(D,"fxshow");k.queue||(We=M._queueHooks(D,"fx"),We.unqueued==null&&(We.unqueued=0,ct=We.empty.fire,We.empty.fire=function(){We.unqueued||ct()}),We.unqueued++,Ji.always(function(){Ji.always(function(){We.unqueued--,M.queue(D,"fx").length||We.empty.fire()})}));for(V in h)if(ve=h[V],fn.test(ve)){if(delete h[V],je=je||ve==="toggle",ve===(In?"hide":"show"))if(ve==="show"&&On&&On[V]!==void 0)In=!0;else continue;ki[V]=On&&On[V]||M.style(D,V)}if(gt=!M.isEmptyObject(h),!(!gt&&M.isEmptyObject(ki))){yi&&D.nodeType===1&&(k.overflow=[en.overflow,en.overflowX,en.overflowY],It=On&&On.display,It==null&&(It=Be.get(D,"display")),xi=M.css(D,"display"),xi==="none"&&(It?xi=It:(Xt([D],!0),It=D.style.display||It,xi=M.css(D,"display"),Xt([D]))),(xi==="inline"||xi==="inline-block"&&It!=null)&&M.css(D,"float")==="none"&&(gt||(Ji.done(function(){en.display=It}),It==null&&(xi=en.display,It=xi==="none"?"":xi)),en.display="inline-block")),k.overflow&&(en.overflow="hidden",Ji.always(function(){en.overflow=k.overflow[0],en.overflowX=k.overflow[1],en.overflowY=k.overflow[2]})),gt=!1;for(V in ki)gt||(On?"hidden"in On&&(In=On.hidden):On=Be.access(D,"fxshow",{display:It}),je&&(On.hidden=!In),In&&Xt([D],!0),Ji.done(function(){In||Xt([D]),Be.remove(D,"fxshow");for(V in ki)M.style(D,V,ki[V])})),gt=lr(In?On[V]:0,V,Ji),V in On||(On[V]=gt.start,In&&(gt.end=gt.start,gt.start=0))}}function Ir(D,h){var k,V,ve,je,We;for(k in D)if(V=ke(k),ve=h[V],je=D[k],Array.isArray(je)&&(ve=je[1],je=D[k]=je[0]),k!==V&&(D[V]=je,delete D[k]),We=M.cssHooks[V],We&&"expand"in We){je=We.expand(je),delete D[V];for(k in je)k in D||(D[k]=je[k],h[k]=ve)}else h[V]=ve}function _n(D,h,k){var V,ve,je=0,We=_n.prefilters.length,ct=M.Deferred().always(function(){delete gt.elem}),gt=function(){if(ve)return!1;for(var Ji=Hn||tr(),ki=Math.max(0,It.startTime+It.duration-Ji),en=ki/It.duration||0,In=1-en,On=0,Qn=It.tweens.length;On<Qn;On++)It.tweens[On].run(In);return ct.notifyWith(D,[It,In,ki]),In<1&&Qn?ki:(Qn||ct.notifyWith(D,[It,1,0]),ct.resolveWith(D,[It]),!1)},It=ct.promise({elem:D,props:M.extend({},h),opts:M.extend(!0,{specialEasing:{},easing:M.easing._default},k),originalProperties:h,originalOptions:k,startTime:Hn||tr(),duration:k.duration,tweens:[],createTween:function(Ji,ki){var en=M.Tween(D,It.opts,Ji,ki,It.opts.specialEasing[Ji]||It.opts.easing);return It.tweens.push(en),en},stop:function(Ji){var ki=0,en=Ji?It.tweens.length:0;if(ve)return this;for(ve=!0;ki<en;ki++)It.tweens[ki].run(1);return Ji?(ct.notifyWith(D,[It,1,0]),ct.resolveWith(D,[It,Ji])):ct.rejectWith(D,[It,Ji]),this}}),xi=It.props;for(Ir(xi,It.opts.specialEasing);je<We;je++)if(V=_n.prefilters[je].call(It,D,xi,It.opts),V)return x(V.stop)&&(M._queueHooks(It.elem,It.opts.queue).stop=V.stop.bind(V)),V;return M.map(xi,lr,It),x(It.opts.start)&&It.opts.start.call(D,It),It.progress(It.opts.progress).done(It.opts.done,It.opts.complete).fail(It.opts.fail).always(It.opts.always),M.fx.timer(M.extend(gt,{elem:D,anim:It,queue:It.opts.queue})),It}M.Animation=M.extend(_n,{tweeners:{"*":[function(D,h){var k=this.createTween(D,h);return Et(k.elem,D,Bi.exec(h),k),k}]},tweener:function(h,k){x(h)?(k=h,h=["*"]):h=h.match(I);for(var V,ve=0,je=h.length;ve<je;ve++)V=h[ve],_n.tweeners[V]=_n.tweeners[V]||[],_n.tweeners[V].unshift(k)},prefilters:[zr],prefilter:function(h,k){k?_n.prefilters.unshift(h):_n.prefilters.push(h)}}),M.speed=function(D,h,k){var V=D&&Ni(D)==="object"?M.extend({},D):{complete:k||!k&&h||x(D)&&D,duration:D,easing:k&&h||h&&!x(h)&&h};return M.fx.off?V.duration=0:typeof V.duration!="number"&&(V.duration in M.fx.speeds?V.duration=M.fx.speeds[V.duration]:V.duration=M.fx.speeds._default),(V.queue==null||V.queue===!0)&&(V.queue="fx"),V.old=V.complete,V.complete=function(){x(V.old)&&V.old.call(this),V.queue&&M.dequeue(this,V.queue)},V},M.fn.extend({fadeTo:function(h,k,V,ve){return this.filter(St).css("opacity",0).show().end().animate({opacity:k},h,V,ve)},animate:function(h,k,V,ve){var je=M.isEmptyObject(h),We=M.speed(k,V,ve),ct=function(){var It=_n(this,M.extend({},h),We);(je||Be.get(this,"finish"))&&It.stop(!0)};return ct.finish=ct,je||We.queue===!1?this.each(ct):this.queue(We.queue,ct)},stop:function(h,k,V){var ve=function(We){var ct=We.stop;delete We.stop,ct(V)};return typeof h!="string"&&(V=k,k=h,h=void 0),k&&this.queue(h||"fx",[]),this.each(function(){var je=!0,We=h!=null&&h+"queueHooks",ct=M.timers,gt=Be.get(this);if(We)gt[We]&&gt[We].stop&&ve(gt[We]);else for(We in gt)gt[We]&&gt[We].stop&&Cn.test(We)&&ve(gt[We]);for(We=ct.length;We--;)ct[We].elem===this&&(h==null||ct[We].queue===h)&&(ct[We].anim.stop(V),je=!1,ct.splice(We,1));(je||!V)&&M.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var k,V=Be.get(this),ve=V[h+"queue"],je=V[h+"queueHooks"],We=M.timers,ct=ve?ve.length:0;for(V.finish=!0,M.queue(this,h,[]),je&&je.stop&&je.stop.call(this,!0),k=We.length;k--;)We[k].elem===this&&We[k].queue===h&&(We[k].anim.stop(!0),We.splice(k,1));for(k=0;k<ct;k++)ve[k]&&ve[k].finish&&ve[k].finish.call(this);delete V.finish})}}),M.each(["toggle","show","hide"],function(D,h){var k=M.fn[h];M.fn[h]=function(V,ve,je){return V==null||typeof V=="boolean"?k.apply(this,arguments):this.animate(Nn(h,!0),V,ve,je)}}),M.each({slideDown:Nn("show"),slideUp:Nn("hide"),slideToggle:Nn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(D,h){M.fn[D]=function(k,V,ve){return this.animate(h,k,V,ve)}}),M.timers=[],M.fx.tick=function(){var D,h=0,k=M.timers;for(Hn=Date.now();h<k.length;h++)D=k[h],!D()&&k[h]===D&&k.splice(h--,1);k.length||M.fx.stop(),Hn=void 0},M.fx.timer=function(D){M.timers.push(D),M.fx.start()},M.fx.interval=13,M.fx.start=function(){yn||(yn=!0,wr())},M.fx.stop=function(){yn=null},M.fx.speeds={slow:600,fast:200,_default:400},M.fn.delay=function(D,h){return D=M.fx&&M.fx.speeds[D]||D,h=h||"fx",this.queue(h,function(k,V){var ve=c.setTimeout(k,D);V.stop=function(){c.clearTimeout(ve)}})},function(){var D=ne.createElement("input"),h=ne.createElement("select"),k=h.appendChild(ne.createElement("option"));D.type="checkbox",ue.checkOn=D.value!=="",ue.optSelected=k.selected,D=ne.createElement("input"),D.value="t",D.type="radio",ue.radioValue=D.value==="t"}();var fr,Jn=M.expr.attrHandle;M.fn.extend({attr:function(h,k){return He(this,M.attr,h,k,arguments.length>1)},removeAttr:function(h){return this.each(function(){M.removeAttr(this,h)})}}),M.extend({attr:function(h,k,V){var ve,je,We=h.nodeType;if(!(We===3||We===8||We===2)){if(typeof h.getAttribute>"u")return M.prop(h,k,V);if((We!==1||!M.isXMLDoc(h))&&(je=M.attrHooks[k.toLowerCase()]||(M.expr.match.bool.test(k)?fr:void 0)),V!==void 0){if(V===null){M.removeAttr(h,k);return}return je&&"set"in je&&(ve=je.set(h,V,k))!==void 0?ve:(h.setAttribute(k,V+""),V)}return je&&"get"in je&&(ve=je.get(h,k))!==null?ve:(ve=M.find.attr(h,k),ve??void 0)}},attrHooks:{type:{set:function(h,k){if(!ue.radioValue&&k==="radio"&&ze(h,"input")){var V=h.value;return h.setAttribute("type",k),V&&(h.value=V),k}}}},removeAttr:function(h,k){var V,ve=0,je=k&&k.match(I);if(je&&h.nodeType===1)for(;V=je[ve++];)h.removeAttribute(V)}}),fr={set:function(h,k,V){return k===!1?M.removeAttr(h,V):h.setAttribute(V,V),V}},M.each(M.expr.match.bool.source.match(/\w+/g),function(D,h){var k=Jn[h]||M.find.attr;Jn[h]=function(V,ve,je){var We,ct,gt=ve.toLowerCase();return je||(ct=Jn[gt],Jn[gt]=We,We=k(V,ve,je)!=null?gt:null,Jn[gt]=ct),We}});var kn=/^(?:input|select|textarea|button)$/i,mr=/^(?:a|area)$/i;M.fn.extend({prop:function(h,k){return He(this,M.prop,h,k,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[M.propFix[h]||h]})}}),M.extend({prop:function(h,k,V){var ve,je,We=h.nodeType;if(!(We===3||We===8||We===2))return(We!==1||!M.isXMLDoc(h))&&(k=M.propFix[k]||k,je=M.propHooks[k]),V!==void 0?je&&"set"in je&&(ve=je.set(h,V,k))!==void 0?ve:h[k]=V:je&&"get"in je&&(ve=je.get(h,k))!==null?ve:h[k]},propHooks:{tabIndex:{get:function(h){var k=M.find.attr(h,"tabindex");return k?parseInt(k,10):kn.test(h.nodeName)||mr.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ue.optSelected||(M.propHooks.selected={get:function(h){var k=h.parentNode;return k&&k.parentNode&&k.parentNode.selectedIndex,null},set:function(h){var k=h.parentNode;k&&(k.selectedIndex,k.parentNode&&k.parentNode.selectedIndex)}}),M.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){M.propFix[this.toLowerCase()]=this});function Yn(D){var h=D.match(I)||[];return h.join(" ")}function Dr(D){return D.getAttribute&&D.getAttribute("class")||""}function ta(D){return Array.isArray(D)?D:typeof D=="string"?D.match(I)||[]:[]}M.fn.extend({addClass:function(h){var k,V,ve,je,We,ct;return x(h)?this.each(function(gt){M(this).addClass(h.call(this,gt,Dr(this)))}):(k=ta(h),k.length?this.each(function(){if(ve=Dr(this),V=this.nodeType===1&&" "+Yn(ve)+" ",V){for(We=0;We<k.length;We++)je=k[We],V.indexOf(" "+je+" ")<0&&(V+=je+" ");ct=Yn(V),ve!==ct&&this.setAttribute("class",ct)}}):this)},removeClass:function(h){var k,V,ve,je,We,ct;return x(h)?this.each(function(gt){M(this).removeClass(h.call(this,gt,Dr(this)))}):arguments.length?(k=ta(h),k.length?this.each(function(){if(ve=Dr(this),V=this.nodeType===1&&" "+Yn(ve)+" ",V){for(We=0;We<k.length;We++)for(je=k[We];V.indexOf(" "+je+" ")>-1;)V=V.replace(" "+je+" "," ");ct=Yn(V),ve!==ct&&this.setAttribute("class",ct)}}):this):this.attr("class","")},toggleClass:function(h,k){var V,ve,je,We,ct=Ni(h),gt=ct==="string"||Array.isArray(h);return x(h)?this.each(function(It){M(this).toggleClass(h.call(this,It,Dr(this),k),k)}):typeof k=="boolean"&&gt?k?this.addClass(h):this.removeClass(h):(V=ta(h),this.each(function(){if(gt)for(We=M(this),je=0;je<V.length;je++)ve=V[je],We.hasClass(ve)?We.removeClass(ve):We.addClass(ve);else(h===void 0||ct==="boolean")&&(ve=Dr(this),ve&&Be.set(this,"__className__",ve),this.setAttribute&&this.setAttribute("class",ve||h===!1?"":Be.get(this,"__className__")||""))}))},hasClass:function(h){var k,V,ve=0;for(k=" "+h+" ";V=this[ve++];)if(V.nodeType===1&&(" "+Yn(Dr(V))+" ").indexOf(k)>-1)return!0;return!1}});var Vr=/\r/g;M.fn.extend({val:function(h){var k,V,ve,je=this[0];return arguments.length?(ve=x(h),this.each(function(We){var ct;this.nodeType===1&&(ve?ct=h.call(this,We,M(this).val()):ct=h,ct==null?ct="":typeof ct=="number"?ct+="":Array.isArray(ct)&&(ct=M.map(ct,function(gt){return gt==null?"":gt+""})),k=M.valHooks[this.type]||M.valHooks[this.nodeName.toLowerCase()],(!k||!("set"in k)||k.set(this,ct,"value")===void 0)&&(this.value=ct))})):je?(k=M.valHooks[je.type]||M.valHooks[je.nodeName.toLowerCase()],k&&"get"in k&&(V=k.get(je,"value"))!==void 0?V:(V=je.value,typeof V=="string"?V.replace(Vr,""):V??"")):void 0}}),M.extend({valHooks:{option:{get:function(h){var k=M.find.attr(h,"value");return k??Yn(M.text(h))}},select:{get:function(h){var k,V,ve,je=h.options,We=h.selectedIndex,ct=h.type==="select-one",gt=ct?null:[],It=ct?We+1:je.length;for(We<0?ve=It:ve=ct?We:0;ve<It;ve++)if(V=je[ve],(V.selected||ve===We)&&!V.disabled&&(!V.parentNode.disabled||!ze(V.parentNode,"optgroup"))){if(k=M(V).val(),ct)return k;gt.push(k)}return gt},set:function(h,k){for(var V,ve,je=h.options,We=M.makeArray(k),ct=je.length;ct--;)ve=je[ct],(ve.selected=M.inArray(M.valHooks.option.get(ve),We)>-1)&&(V=!0);return V||(h.selectedIndex=-1),We}}}}),M.each(["radio","checkbox"],function(){M.valHooks[this]={set:function(h,k){if(Array.isArray(k))return h.checked=M.inArray(M(h).val(),k)>-1}},ue.checkOn||(M.valHooks[this].get=function(D){return D.getAttribute("value")===null?"on":D.value})});var jr=c.location,ma={guid:Date.now()},ca=/\?/;M.parseXML=function(D){var h,k;if(!D||typeof D!="string")return null;try{h=new c.DOMParser().parseFromString(D,"text/xml")}catch{}return k=h&&h.getElementsByTagName("parsererror")[0],(!h||k)&&M.error("Invalid XML: "+(k?M.map(k.childNodes,function(V){return V.textContent}).join(`
`):D)),h};var Ta=/^(?:focusinfocus|focusoutblur)$/,ir=function(h){h.stopPropagation()};M.extend(M.event,{trigger:function(h,k,V,ve){var je,We,ct,gt,It,xi,yi,Ji,ki=[V||ne],en=ie.call(h,"type")?h.type:h,In=ie.call(h,"namespace")?h.namespace.split("."):[];if(We=Ji=ct=V=V||ne,!(V.nodeType===3||V.nodeType===8)&&!Ta.test(en+M.event.triggered)&&(en.indexOf(".")>-1&&(In=en.split("."),en=In.shift(),In.sort()),It=en.indexOf(":")<0&&"on"+en,h=h[M.expando]?h:new M.Event(en,Ni(h)==="object"&&h),h.isTrigger=ve?2:3,h.namespace=In.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+In.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=V),k=k==null?[h]:M.makeArray(k,[h]),yi=M.event.special[en]||{},!(!ve&&yi.trigger&&yi.trigger.apply(V,k)===!1))){if(!ve&&!yi.noBubble&&!O(V)){for(gt=yi.delegateType||en,Ta.test(gt+en)||(We=We.parentNode);We;We=We.parentNode)ki.push(We),ct=We;ct===(V.ownerDocument||ne)&&ki.push(ct.defaultView||ct.parentWindow||c)}for(je=0;(We=ki[je++])&&!h.isPropagationStopped();)Ji=We,h.type=je>1?gt:yi.bindType||en,xi=(Be.get(We,"events")||Object.create(null))[h.type]&&Be.get(We,"handle"),xi&&xi.apply(We,k),xi=It&&We[It],xi&&xi.apply&&ce(We)&&(h.result=xi.apply(We,k),h.result===!1&&h.preventDefault());return h.type=en,!ve&&!h.isDefaultPrevented()&&(!yi._default||yi._default.apply(ki.pop(),k)===!1)&&ce(V)&&It&&x(V[en])&&!O(V)&&(ct=V[It],ct&&(V[It]=null),M.event.triggered=en,h.isPropagationStopped()&&Ji.addEventListener(en,ir),V[en](),h.isPropagationStopped()&&Ji.removeEventListener(en,ir),M.event.triggered=void 0,ct&&(V[It]=ct)),h.result}},simulate:function(h,k,V){var ve=M.extend(new M.Event,V,{type:h,isSimulated:!0});M.event.trigger(ve,null,k)}}),M.fn.extend({trigger:function(h,k){return this.each(function(){M.event.trigger(h,k,this)})},triggerHandler:function(h,k){var V=this[0];if(V)return M.event.trigger(h,k,V,!0)}});var Tt=/\[\]$/,Gr=/\r?\n/g,Ar=/^(?:submit|button|image|reset|file)$/i,oe=/^(?:input|select|textarea|keygen)/i;function si(D,h,k,V){var ve;if(Array.isArray(h))M.each(h,function(je,We){k||Tt.test(D)?V(D,We):si(D+"["+(Ni(We)==="object"&&We!=null?je:"")+"]",We,k,V)});else if(!k&&se(h)==="object")for(ve in h)si(D+"["+ve+"]",h[ve],k,V);else V(D,h)}M.param=function(D,h){var k,V=[],ve=function(We,ct){var gt=x(ct)?ct():ct;V[V.length]=encodeURIComponent(We)+"="+encodeURIComponent(gt??"")};if(D==null)return"";if(Array.isArray(D)||D.jquery&&!M.isPlainObject(D))M.each(D,function(){ve(this.name,this.value)});else for(k in D)si(k,D[k],h,ve);return V.join("&")},M.fn.extend({serialize:function(){return M.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=M.prop(this,"elements");return h?M.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!M(this).is(":disabled")&&oe.test(this.nodeName)&&!Ar.test(h)&&(this.checked||!ot.test(h))}).map(function(h,k){var V=M(this).val();return V==null?null:Array.isArray(V)?M.map(V,function(ve){return{name:k.name,value:ve.replace(Gr,`\r
`)}}):{name:k.name,value:V.replace(Gr,`\r
`)}}).get()}});var Ge=/%20/g,u=/#.*$/,s=/([?&])_=[^&]*/,e=/^(.*?):[ \t]*([^\r\n]*)$/gm,r=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,b=/^(?:GET|HEAD)$/,A=/^\/\//,Ce={},Ae={},zt="*/".concat("*"),z=ne.createElement("a");z.href=jr.href;function H(D){return function(h,k){typeof h!="string"&&(k=h,h="*");var V,ve=0,je=h.toLowerCase().match(I)||[];if(x(k))for(;V=je[ve++];)V[0]==="+"?(V=V.slice(1)||"*",(D[V]=D[V]||[]).unshift(k)):(D[V]=D[V]||[]).push(k)}}function K(D,h,k,V){var ve={},je=D===Ae;function We(ct){var gt;return ve[ct]=!0,M.each(D[ct]||[],function(It,xi){var yi=xi(h,k,V);if(typeof yi=="string"&&!je&&!ve[yi])return h.dataTypes.unshift(yi),We(yi),!1;if(je)return!(gt=yi)}),gt}return We(h.dataTypes[0])||!ve["*"]&&We("*")}function le(D,h){var k,V,ve=M.ajaxSettings.flatOptions||{};for(k in h)h[k]!==void 0&&((ve[k]?D:V||(V={}))[k]=h[k]);return V&&M.extend(!0,D,V),D}function Xe(D,h,k){for(var V,ve,je,We,ct=D.contents,gt=D.dataTypes;gt[0]==="*";)gt.shift(),V===void 0&&(V=D.mimeType||h.getResponseHeader("Content-Type"));if(V){for(ve in ct)if(ct[ve]&&ct[ve].test(V)){gt.unshift(ve);break}}if(gt[0]in k)je=gt[0];else{for(ve in k){if(!gt[0]||D.converters[ve+" "+gt[0]]){je=ve;break}We||(We=ve)}je=je||We}if(je)return je!==gt[0]&&gt.unshift(je),k[je]}function vt(D,h,k,V){var ve,je,We,ct,gt,It={},xi=D.dataTypes.slice();if(xi[1])for(We in D.converters)It[We.toLowerCase()]=D.converters[We];for(je=xi.shift();je;)if(D.responseFields[je]&&(k[D.responseFields[je]]=h),!gt&&V&&D.dataFilter&&(h=D.dataFilter(h,D.dataType)),gt=je,je=xi.shift(),je){if(je==="*")je=gt;else if(gt!=="*"&&gt!==je){if(We=It[gt+" "+je]||It["* "+je],!We){for(ve in It)if(ct=ve.split(" "),ct[1]===je&&(We=It[gt+" "+ct[0]]||It["* "+ct[0]],We)){We===!0?We=It[ve]:It[ve]!==!0&&(je=ct[0],xi.unshift(ct[1]));break}}if(We!==!0)if(We&&D.throws)h=We(h);else try{h=We(h)}catch(yi){return{state:"parsererror",error:We?yi:"No conversion from "+gt+" to "+je}}}}return{state:"success",data:h}}M.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jr.href,type:"GET",isLocal:r.test(jr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":M.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,k){return k?le(le(h,M.ajaxSettings),k):le(M.ajaxSettings,h)},ajaxPrefilter:H(Ce),ajaxTransport:H(Ae),ajax:function(h,k){Ni(h)==="object"&&(k=h,h=void 0),k=k||{};var V,ve,je,We,ct,gt,It,xi,yi,Ji,ki=M.ajaxSetup({},k),en=ki.context||ki,In=ki.context&&(en.nodeType||en.jquery)?M(en):M.event,On=M.Deferred(),Qn=M.Callbacks("once memory"),Er=ki.statusCode||{},$r={},Rr={},Sr="canceled",Tn={readyState:0,getResponseHeader:function(_r){var hr;if(It){if(!We)for(We={};hr=e.exec(je);)We[hr[1].toLowerCase()+" "]=(We[hr[1].toLowerCase()+" "]||[]).concat(hr[2]);hr=We[_r.toLowerCase()+" "]}return hr==null?null:hr.join(", ")},getAllResponseHeaders:function(){return It?je:null},setRequestHeader:function(_r,hr){return It==null&&(_r=Rr[_r.toLowerCase()]=Rr[_r.toLowerCase()]||_r,$r[_r]=hr),this},overrideMimeType:function(_r){return It==null&&(ki.mimeType=_r),this},statusCode:function(_r){var hr;if(_r)if(It)Tn.always(_r[Tn.status]);else for(hr in _r)Er[hr]=[Er[hr],_r[hr]];return this},abort:function(_r){var hr=_r||Sr;return V&&V.abort(hr),ia(0,hr),this}};if(On.promise(Tn),ki.url=((h||ki.url||jr.href)+"").replace(A,jr.protocol+"//"),ki.type=k.method||k.type||ki.method||ki.type,ki.dataTypes=(ki.dataType||"*").toLowerCase().match(I)||[""],ki.crossDomain==null){gt=ne.createElement("a");try{gt.href=ki.url,gt.href=gt.href,ki.crossDomain=z.protocol+"//"+z.host!=gt.protocol+"//"+gt.host}catch{ki.crossDomain=!0}}if(ki.data&&ki.processData&&typeof ki.data!="string"&&(ki.data=M.param(ki.data,ki.traditional)),K(Ce,ki,k,Tn),It)return Tn;xi=M.event&&ki.global,xi&&M.active++===0&&M.event.trigger("ajaxStart"),ki.type=ki.type.toUpperCase(),ki.hasContent=!b.test(ki.type),ve=ki.url.replace(u,""),ki.hasContent?ki.data&&ki.processData&&(ki.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ki.data=ki.data.replace(Ge,"+")):(Ji=ki.url.slice(ve.length),ki.data&&(ki.processData||typeof ki.data=="string")&&(ve+=(ca.test(ve)?"&":"?")+ki.data,delete ki.data),ki.cache===!1&&(ve=ve.replace(s,"$1"),Ji=(ca.test(ve)?"&":"?")+"_="+ma.guid+++Ji),ki.url=ve+Ji),ki.ifModified&&(M.lastModified[ve]&&Tn.setRequestHeader("If-Modified-Since",M.lastModified[ve]),M.etag[ve]&&Tn.setRequestHeader("If-None-Match",M.etag[ve])),(ki.data&&ki.hasContent&&ki.contentType!==!1||k.contentType)&&Tn.setRequestHeader("Content-Type",ki.contentType),Tn.setRequestHeader("Accept",ki.dataTypes[0]&&ki.accepts[ki.dataTypes[0]]?ki.accepts[ki.dataTypes[0]]+(ki.dataTypes[0]!=="*"?", "+zt+"; q=0.01":""):ki.accepts["*"]);for(yi in ki.headers)Tn.setRequestHeader(yi,ki.headers[yi]);if(ki.beforeSend&&(ki.beforeSend.call(en,Tn,ki)===!1||It))return Tn.abort();if(Sr="abort",Qn.add(ki.complete),Tn.done(ki.success),Tn.fail(ki.error),V=K(Ae,ki,k,Tn),!V)ia(-1,"No Transport");else{if(Tn.readyState=1,xi&&In.trigger("ajaxSend",[Tn,ki]),It)return Tn;ki.async&&ki.timeout>0&&(ct=c.setTimeout(function(){Tn.abort("timeout")},ki.timeout));try{It=!1,V.send($r,ia)}catch(pr){if(It)throw pr;ia(-1,pr)}}function ia(pr,_r,hr,Aa){var Qr,Wr,Cr,Zr,Ur,Tr=_r;It||(It=!0,ct&&c.clearTimeout(ct),V=void 0,je=Aa||"",Tn.readyState=pr>0?4:0,Qr=pr>=200&&pr<300||pr===304,hr&&(Zr=Xe(ki,Tn,hr)),!Qr&&M.inArray("script",ki.dataTypes)>-1&&M.inArray("json",ki.dataTypes)<0&&(ki.converters["text script"]=function(){}),Zr=vt(ki,Zr,Tn,Qr),Qr?(ki.ifModified&&(Ur=Tn.getResponseHeader("Last-Modified"),Ur&&(M.lastModified[ve]=Ur),Ur=Tn.getResponseHeader("etag"),Ur&&(M.etag[ve]=Ur)),pr===204||ki.type==="HEAD"?Tr="nocontent":pr===304?Tr="notmodified":(Tr=Zr.state,Wr=Zr.data,Cr=Zr.error,Qr=!Cr)):(Cr=Tr,(pr||!Tr)&&(Tr="error",pr<0&&(pr=0))),Tn.status=pr,Tn.statusText=(_r||Tr)+"",Qr?On.resolveWith(en,[Wr,Tr,Tn]):On.rejectWith(en,[Tn,Tr,Cr]),Tn.statusCode(Er),Er=void 0,xi&&In.trigger(Qr?"ajaxSuccess":"ajaxError",[Tn,ki,Qr?Wr:Cr]),Qn.fireWith(en,[Tn,Tr]),xi&&(In.trigger("ajaxComplete",[Tn,ki]),--M.active||M.event.trigger("ajaxStop")))}return Tn},getJSON:function(h,k,V){return M.get(h,k,V,"json")},getScript:function(h,k){return M.get(h,void 0,k,"script")}}),M.each(["get","post"],function(D,h){M[h]=function(k,V,ve,je){return x(V)&&(je=je||ve,ve=V,V=void 0),M.ajax(M.extend({url:k,type:h,dataType:je,data:V,success:ve},M.isPlainObject(k)&&k))}}),M.ajaxPrefilter(function(D){var h;for(h in D.headers)h.toLowerCase()==="content-type"&&(D.contentType=D.headers[h]||"")}),M._evalUrl=function(D,h,k){return M.ajax({url:D,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ve){M.globalEval(ve,h,k)}})},M.fn.extend({wrapAll:function(h){var k;return this[0]&&(x(h)&&(h=h.call(this[0])),k=M(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&k.insertBefore(this[0]),k.map(function(){for(var V=this;V.firstElementChild;)V=V.firstElementChild;return V}).append(this)),this},wrapInner:function(h){return x(h)?this.each(function(k){M(this).wrapInner(h.call(this,k))}):this.each(function(){var k=M(this),V=k.contents();V.length?V.wrapAll(h):k.append(h)})},wrap:function(h){var k=x(h);return this.each(function(V){M(this).wrapAll(k?h.call(this,V):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){M(this).replaceWith(this.childNodes)}),this}}),M.expr.pseudos.hidden=function(D){return!M.expr.pseudos.visible(D)},M.expr.pseudos.visible=function(D){return!!(D.offsetWidth||D.offsetHeight||D.getClientRects().length)},M.ajaxSettings.xhr=function(){try{return new c.XMLHttpRequest}catch{}};var bt={0:200,1223:204},Ht=M.ajaxSettings.xhr();ue.cors=!!Ht&&"withCredentials"in Ht,ue.ajax=Ht=!!Ht,M.ajaxTransport(function(D){var h,k;if(ue.cors||Ht&&!D.crossDomain)return{send:function(ve,je){var We,ct=D.xhr();if(ct.open(D.type,D.url,D.async,D.username,D.password),D.xhrFields)for(We in D.xhrFields)ct[We]=D.xhrFields[We];D.mimeType&&ct.overrideMimeType&&ct.overrideMimeType(D.mimeType),!D.crossDomain&&!ve["X-Requested-With"]&&(ve["X-Requested-With"]="XMLHttpRequest");for(We in ve)ct.setRequestHeader(We,ve[We]);h=function(It){return function(){h&&(h=k=ct.onload=ct.onerror=ct.onabort=ct.ontimeout=ct.onreadystatechange=null,It==="abort"?ct.abort():It==="error"?typeof ct.status!="number"?je(0,"error"):je(ct.status,ct.statusText):je(bt[ct.status]||ct.status,ct.statusText,(ct.responseType||"text")!=="text"||typeof ct.responseText!="string"?{binary:ct.response}:{text:ct.responseText},ct.getAllResponseHeaders()))}},ct.onload=h(),k=ct.onerror=ct.ontimeout=h("error"),ct.onabort!==void 0?ct.onabort=k:ct.onreadystatechange=function(){ct.readyState===4&&c.setTimeout(function(){h&&k()})},h=h("abort");try{ct.send(D.hasContent&&D.data||null)}catch(gt){if(h)throw gt}},abort:function(){h&&h()}}}),M.ajaxPrefilter(function(D){D.crossDomain&&(D.contents.script=!1)}),M.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return M.globalEval(h),h}}}),M.ajaxPrefilter("script",function(D){D.cache===void 0&&(D.cache=!1),D.crossDomain&&(D.type="GET")}),M.ajaxTransport("script",function(D){if(D.crossDomain||D.scriptAttrs){var h,k;return{send:function(ve,je){h=M("<script>").attr(D.scriptAttrs||{}).prop({charset:D.scriptCharset,src:D.url}).on("load error",k=function(ct){h.remove(),k=null,ct&&je(ct.type==="error"?404:200,ct.type)}),ne.head.appendChild(h[0])},abort:function(){k&&k()}}}});var gi=[],Hi=/(=)\?(?=&|$)|\?\?/;M.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=gi.pop()||M.expando+"_"+ma.guid++;return this[h]=!0,h}}),M.ajaxPrefilter("json jsonp",function(D,h,k){var V,ve,je,We=D.jsonp!==!1&&(Hi.test(D.url)?"url":typeof D.data=="string"&&(D.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Hi.test(D.data)&&"data");if(We||D.dataTypes[0]==="jsonp")return V=D.jsonpCallback=x(D.jsonpCallback)?D.jsonpCallback():D.jsonpCallback,We?D[We]=D[We].replace(Hi,"$1"+V):D.jsonp!==!1&&(D.url+=(ca.test(D.url)?"&":"?")+D.jsonp+"="+V),D.converters["script json"]=function(){return je||M.error(V+" was not called"),je[0]},D.dataTypes[0]="json",ve=c[V],c[V]=function(){je=arguments},k.always(function(){ve===void 0?M(c).removeProp(V):c[V]=ve,D[V]&&(D.jsonpCallback=h.jsonpCallback,gi.push(V)),je&&x(ve)&&ve(je[0]),je=ve=void 0}),"script"}),ue.createHTMLDocument=function(){var D=ne.implementation.createHTMLDocument("").body;return D.innerHTML="<form></form><form></form>",D.childNodes.length===2}(),M.parseHTML=function(D,h,k){if(typeof D!="string")return[];typeof h=="boolean"&&(k=h,h=!1);var V,ve,je;return h||(ue.createHTMLDocument?(h=ne.implementation.createHTMLDocument(""),V=h.createElement("base"),V.href=ne.location.href,h.head.appendChild(V)):h=ne),ve=kt.exec(D),je=!k&&[],ve?[h.createElement(ve[1])]:(ve=At([D],h,je),je&&je.length&&M(je).remove(),M.merge([],ve.childNodes))},M.fn.load=function(D,h,k){var V,ve,je,We=this,ct=D.indexOf(" ");return ct>-1&&(V=Yn(D.slice(ct)),D=D.slice(0,ct)),x(h)?(k=h,h=void 0):h&&Ni(h)==="object"&&(ve="POST"),We.length>0&&M.ajax({url:D,type:ve||"GET",dataType:"html",data:h}).done(function(gt){je=arguments,We.html(V?M("<div>").append(M.parseHTML(gt)).find(V):gt)}).always(k&&function(gt,It){We.each(function(){k.apply(this,je||[gt.responseText,It,gt])})}),this},M.expr.pseudos.animated=function(D){return M.grep(M.timers,function(h){return D===h.elem}).length},M.offset={setOffset:function(h,k,V){var ve,je,We,ct,gt,It,xi,yi=M.css(h,"position"),Ji=M(h),ki={};yi==="static"&&(h.style.position="relative"),gt=Ji.offset(),We=M.css(h,"top"),It=M.css(h,"left"),xi=(yi==="absolute"||yi==="fixed")&&(We+It).indexOf("auto")>-1,xi?(ve=Ji.position(),ct=ve.top,je=ve.left):(ct=parseFloat(We)||0,je=parseFloat(It)||0),x(k)&&(k=k.call(h,V,M.extend({},gt))),k.top!=null&&(ki.top=k.top-gt.top+ct),k.left!=null&&(ki.left=k.left-gt.left+je),"using"in k?k.using.call(h,ki):Ji.css(ki)}},M.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(je){M.offset.setOffset(this,h,je)});var k,V,ve=this[0];if(ve)return ve.getClientRects().length?(k=ve.getBoundingClientRect(),V=ve.ownerDocument.defaultView,{top:k.top+V.pageYOffset,left:k.left+V.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var h,k,V,ve=this[0],je={top:0,left:0};if(M.css(ve,"position")==="fixed")k=ve.getBoundingClientRect();else{for(k=this.offset(),V=ve.ownerDocument,h=ve.offsetParent||V.documentElement;h&&(h===V.body||h===V.documentElement)&&M.css(h,"position")==="static";)h=h.parentNode;h&&h!==ve&&h.nodeType===1&&(je=M(h).offset(),je.top+=M.css(h,"borderTopWidth",!0),je.left+=M.css(h,"borderLeftWidth",!0))}return{top:k.top-je.top-M.css(ve,"marginTop",!0),left:k.left-je.left-M.css(ve,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&M.css(h,"position")==="static";)h=h.offsetParent;return h||wt})}}),M.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(D,h){var k=h==="pageYOffset";M.fn[D]=function(V){return He(this,function(ve,je,We){var ct;if(O(ve)?ct=ve:ve.nodeType===9&&(ct=ve.defaultView),We===void 0)return ct?ct[h]:ve[je];ct?ct.scrollTo(k?ct.pageXOffset:We,k?We:ct.pageYOffset):ve[je]=We},D,V,arguments.length)}}),M.each(["top","left"],function(D,h){M.cssHooks[h]=ai(ue.pixelPosition,function(k,V){if(V)return V=Nt(k,h),Kt.test(V)?M(k).position()[h]+"px":V})}),M.each({Height:"height",Width:"width"},function(D,h){M.each({padding:"inner"+D,content:h,"":"outer"+D},function(k,V){M.fn[V]=function(ve,je){var We=arguments.length&&(k||typeof ve!="boolean"),ct=k||(ve===!0||je===!0?"margin":"border");return He(this,function(gt,It,xi){var yi;return O(gt)?V.indexOf("outer")===0?gt["inner"+D]:gt.document.documentElement["client"+D]:gt.nodeType===9?(yi=gt.documentElement,Math.max(gt.body["scroll"+D],yi["scroll"+D],gt.body["offset"+D],yi["offset"+D],yi["client"+D])):xi===void 0?M.css(gt,It,ct):M.style(gt,It,xi,ct)},h,We?ve:void 0,We)}})}),M.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(D,h){M.fn[h]=function(k){return this.on(h,k)}}),M.fn.extend({bind:function(h,k,V){return this.on(h,null,k,V)},unbind:function(h,k){return this.off(h,null,k)},delegate:function(h,k,V,ve){return this.on(k,h,V,ve)},undelegate:function(h,k,V){return arguments.length===1?this.off(h,"**"):this.off(k,h||"**",V)},hover:function(h,k){return this.on("mouseenter",h).on("mouseleave",k||h)}}),M.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(D,h){M.fn[h]=function(k,V){return arguments.length>0?this.on(h,null,k,V):this.trigger(h)}});var hi=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;M.proxy=function(D,h){var k,V,ve;if(typeof h=="string"&&(k=D[h],h=D,D=k),!!x(D))return V=w.call(arguments,2),ve=function(){return D.apply(h||this,V.concat(w.call(arguments)))},ve.guid=D.guid=D.guid||M.guid++,ve},M.holdReady=function(D){D?M.readyWait++:M.ready(!0)},M.isArray=Array.isArray,M.parseJSON=JSON.parse,M.nodeName=ze,M.isFunction=x,M.isWindow=O,M.camelCase=ke,M.type=se,M.now=Date.now,M.isNumeric=function(D){var h=M.type(D);return(h==="number"||h==="string")&&!isNaN(D-parseFloat(D))},M.trim=function(D){return D==null?"":(D+"").replace(hi,"$1")},l=[],d=(function(){return M}).apply(n,l),d!==void 0&&(t.exports=d);var Ai=c.jQuery,fi=c.$;return M.noConflict=function(D){return c.$===M&&(c.$=fi),D&&c.jQuery===M&&(c.jQuery=Ai),M},typeof E>"u"&&(c.jQuery=c.$=M),M})},function(t,n,o){o.r(n),o.d(n,"v1",function(){return ue}),o.d(n,"v3",function(){return at}),o.d(n,"v4",function(){return Wt}),o.d(n,"v5",function(){return Oe}),o.d(n,"NIL",function(){return N}),o.d(n,"version",function(){return I}),o.d(n,"validate",function(){return y}),o.d(n,"stringify",function(){return te}),o.d(n,"parse",function(){return O});var l,d=new Uint8Array(16);function c(){if(!l&&(l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(d)}var E=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function C(L){return typeof L=="string"&&E.test(L)}for(var y=C,w=[],g=0;g<256;++g)w.push((g+256).toString(16).substr(1));function p(L){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,J=(w[L[re+0]]+w[L[re+1]]+w[L[re+2]]+w[L[re+3]]+"-"+w[L[re+4]]+w[L[re+5]]+"-"+w[L[re+6]]+w[L[re+7]]+"-"+w[L[re+8]]+w[L[re+9]]+"-"+w[L[re+10]]+w[L[re+11]]+w[L[re+12]]+w[L[re+13]]+w[L[re+14]]+w[L[re+15]]).toLowerCase();if(!y(J))throw TypeError("Stringified UUID is invalid");return J}var te=p,ae,de,ie=0,we=0;function Ve(L,re,J){var De=re&&J||0,Ye=re||new Array(16);L=L||{};var et=L.node||ae,R=L.clockseq!==void 0?L.clockseq:de;if(et==null||R==null){var He=L.random||(L.rng||c)();et==null&&(et=ae=[He[0]|1,He[1],He[2],He[3],He[4],He[5]]),R==null&&(R=de=(He[6]<<8|He[7])&16383)}var G=L.msecs!==void 0?L.msecs:Date.now(),ge=L.nsecs!==void 0?L.nsecs:we+1,xe=G-ie+(ge-we)/1e4;if(xe<0&&L.clockseq===void 0&&(R=R+1&16383),(xe<0||G>ie)&&L.nsecs===void 0&&(ge=0),ge>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ie=G,we=ge,de=R,G+=122192928e5;var ke=((G&268435455)*1e4+ge)%4294967296;Ye[De++]=ke>>>24&255,Ye[De++]=ke>>>16&255,Ye[De++]=ke>>>8&255,Ye[De++]=ke&255;var ce=G/4294967296*1e4&268435455;Ye[De++]=ce>>>8&255,Ye[De++]=ce&255,Ye[De++]=ce>>>24&15|16,Ye[De++]=ce>>>16&255,Ye[De++]=R>>>8|128,Ye[De++]=R&255;for(var X=0;X<6;++X)Ye[De+X]=et[X];return re||te(Ye)}var ue=Ve;function x(L){if(!y(L))throw TypeError("Invalid UUID");var re,J=new Uint8Array(16);return J[0]=(re=parseInt(L.slice(0,8),16))>>>24,J[1]=re>>>16&255,J[2]=re>>>8&255,J[3]=re&255,J[4]=(re=parseInt(L.slice(9,13),16))>>>8,J[5]=re&255,J[6]=(re=parseInt(L.slice(14,18),16))>>>8,J[7]=re&255,J[8]=(re=parseInt(L.slice(19,23),16))>>>8,J[9]=re&255,J[10]=(re=parseInt(L.slice(24,36),16))/1099511627776&255,J[11]=re/4294967296&255,J[12]=re>>>24&255,J[13]=re>>>16&255,J[14]=re>>>8&255,J[15]=re&255,J}var O=x;function ne(L){L=unescape(encodeURIComponent(L));for(var re=[],J=0;J<L.length;++J)re.push(L.charCodeAt(J));return re}var Q="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ye="6ba7b811-9dad-11d1-80b4-00c04fd430c8",se=function(re,J,De){function Ye(et,R,He,G){if(typeof et=="string"&&(et=ne(et)),typeof R=="string"&&(R=O(R)),R.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var ge=new Uint8Array(16+et.length);if(ge.set(R),ge.set(et,R.length),ge=De(ge),ge[6]=ge[6]&15|J,ge[8]=ge[8]&63|128,He){G=G||0;for(var xe=0;xe<16;++xe)He[G+xe]=ge[xe];return He}return te(ge)}try{Ye.name=re}catch{}return Ye.DNS=Q,Ye.URL=ye,Ye};function Ze(L){if(typeof L=="string"){var re=unescape(encodeURIComponent(L));L=new Uint8Array(re.length);for(var J=0;J<re.length;++J)L[J]=re.charCodeAt(J)}return Qe(Te(ze(L),L.length*8))}function Qe(L){for(var re=[],J=L.length*32,De="0123456789abcdef",Ye=0;Ye<J;Ye+=8){var et=L[Ye>>5]>>>Ye%32&255,R=parseInt(De.charAt(et>>>4&15)+De.charAt(et&15),16);re.push(R)}return re}function M(L){return(L+64>>>9<<4)+14+1}function Te(L,re){L[re>>5]|=128<<re%32,L[M(re)-1]=re;for(var J=1732584193,De=-271733879,Ye=-1732584194,et=271733878,R=0;R<L.length;R+=16){var He=J,G=De,ge=Ye,xe=et;J=di(J,De,Ye,et,L[R],7,-680876936),et=di(et,J,De,Ye,L[R+1],12,-389564586),Ye=di(Ye,et,J,De,L[R+2],17,606105819),De=di(De,Ye,et,J,L[R+3],22,-1044525330),J=di(J,De,Ye,et,L[R+4],7,-176418897),et=di(et,J,De,Ye,L[R+5],12,1200080426),Ye=di(Ye,et,J,De,L[R+6],17,-1473231341),De=di(De,Ye,et,J,L[R+7],22,-45705983),J=di(J,De,Ye,et,L[R+8],7,1770035416),et=di(et,J,De,Ye,L[R+9],12,-1958414417),Ye=di(Ye,et,J,De,L[R+10],17,-42063),De=di(De,Ye,et,J,L[R+11],22,-1990404162),J=di(J,De,Ye,et,L[R+12],7,1804603682),et=di(et,J,De,Ye,L[R+13],12,-40341101),Ye=di(Ye,et,J,De,L[R+14],17,-1502002290),De=di(De,Ye,et,J,L[R+15],22,1236535329),J=zi(J,De,Ye,et,L[R+1],5,-165796510),et=zi(et,J,De,Ye,L[R+6],9,-1069501632),Ye=zi(Ye,et,J,De,L[R+11],14,643717713),De=zi(De,Ye,et,J,L[R],20,-373897302),J=zi(J,De,Ye,et,L[R+5],5,-701558691),et=zi(et,J,De,Ye,L[R+10],9,38016083),Ye=zi(Ye,et,J,De,L[R+15],14,-660478335),De=zi(De,Ye,et,J,L[R+4],20,-405537848),J=zi(J,De,Ye,et,L[R+9],5,568446438),et=zi(et,J,De,Ye,L[R+14],9,-1019803690),Ye=zi(Ye,et,J,De,L[R+3],14,-187363961),De=zi(De,Ye,et,J,L[R+8],20,1163531501),J=zi(J,De,Ye,et,L[R+13],5,-1444681467),et=zi(et,J,De,Ye,L[R+2],9,-51403784),Ye=zi(Ye,et,J,De,L[R+7],14,1735328473),De=zi(De,Ye,et,J,L[R+12],20,-1926607734),J=$e(J,De,Ye,et,L[R+5],4,-378558),et=$e(et,J,De,Ye,L[R+8],11,-2022574463),Ye=$e(Ye,et,J,De,L[R+11],16,1839030562),De=$e(De,Ye,et,J,L[R+14],23,-35309556),J=$e(J,De,Ye,et,L[R+1],4,-1530992060),et=$e(et,J,De,Ye,L[R+4],11,1272893353),Ye=$e(Ye,et,J,De,L[R+7],16,-155497632),De=$e(De,Ye,et,J,L[R+10],23,-1094730640),J=$e(J,De,Ye,et,L[R+13],4,681279174),et=$e(et,J,De,Ye,L[R],11,-358537222),Ye=$e(Ye,et,J,De,L[R+3],16,-722521979),De=$e(De,Ye,et,J,L[R+6],23,76029189),J=$e(J,De,Ye,et,L[R+9],4,-640364487),et=$e(et,J,De,Ye,L[R+12],11,-421815835),Ye=$e(Ye,et,J,De,L[R+15],16,530742520),De=$e(De,Ye,et,J,L[R+2],23,-995338651),J=st(J,De,Ye,et,L[R],6,-198630844),et=st(et,J,De,Ye,L[R+7],10,1126891415),Ye=st(Ye,et,J,De,L[R+14],15,-1416354905),De=st(De,Ye,et,J,L[R+5],21,-57434055),J=st(J,De,Ye,et,L[R+12],6,1700485571),et=st(et,J,De,Ye,L[R+3],10,-1894986606),Ye=st(Ye,et,J,De,L[R+10],15,-1051523),De=st(De,Ye,et,J,L[R+1],21,-2054922799),J=st(J,De,Ye,et,L[R+8],6,1873313359),et=st(et,J,De,Ye,L[R+15],10,-30611744),Ye=st(Ye,et,J,De,L[R+6],15,-1560198380),De=st(De,Ye,et,J,L[R+13],21,1309151649),J=st(J,De,Ye,et,L[R+4],6,-145523070),et=st(et,J,De,Ye,L[R+11],10,-1120210379),Ye=st(Ye,et,J,De,L[R+2],15,718787259),De=st(De,Ye,et,J,L[R+9],21,-343485551),J=oi(J,He),De=oi(De,G),Ye=oi(Ye,ge),et=oi(et,xe)}return[J,De,Ye,et]}function ze(L){if(L.length===0)return[];for(var re=L.length*8,J=new Uint32Array(M(re)),De=0;De<re;De+=8)J[De>>5]|=(L[De/8]&255)<<De%32;return J}function oi(L,re){var J=(L&65535)+(re&65535),De=(L>>16)+(re>>16)+(J>>16);return De<<16|J&65535}function wi(L,re){return L<<re|L>>>32-re}function ui(L,re,J,De,Ye,et){return oi(wi(oi(oi(re,L),oi(De,et)),Ye),J)}function di(L,re,J,De,Ye,et,R){return ui(re&J|~re&De,L,re,Ye,et,R)}function zi(L,re,J,De,Ye,et,R){return ui(re&De|J&~De,L,re,Ye,et,R)}function $e(L,re,J,De,Ye,et,R){return ui(re^J^De,L,re,Ye,et,R)}function st(L,re,J,De,Ye,et,R){return ui(J^(re|~De),L,re,Ye,et,R)}var Ke=Ze,Ne=se("v3",48,Ke),at=Ne;function Ut(L,re,J){L=L||{};var De=L.random||(L.rng||c)();if(De[6]=De[6]&15|64,De[8]=De[8]&63|128,re){J=J||0;for(var Ye=0;Ye<16;++Ye)re[J+Ye]=De[Ye];return re}return te(De)}var Wt=Ut;function kt(L,re,J,De){switch(L){case 0:return re&J^~re&De;case 1:return re^J^De;case 2:return re&J^re&De^J&De;case 3:return re^J^De}}function ee(L,re){return L<<re|L>>>32-re}function me(L){var re=[1518500249,1859775393,2400959708,3395469782],J=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof L=="string"){var De=unescape(encodeURIComponent(L));L=[];for(var Ye=0;Ye<De.length;++Ye)L.push(De.charCodeAt(Ye))}else Array.isArray(L)||(L=Array.prototype.slice.call(L));L.push(128);for(var et=L.length/4+2,R=Math.ceil(et/16),He=new Array(R),G=0;G<R;++G){for(var ge=new Uint32Array(16),xe=0;xe<16;++xe)ge[xe]=L[G*64+xe*4]<<24|L[G*64+xe*4+1]<<16|L[G*64+xe*4+2]<<8|L[G*64+xe*4+3];He[G]=ge}He[R-1][14]=(L.length-1)*8/Math.pow(2,32),He[R-1][14]=Math.floor(He[R-1][14]),He[R-1][15]=(L.length-1)*8&4294967295;for(var ke=0;ke<R;++ke){for(var ce=new Uint32Array(80),X=0;X<16;++X)ce[X]=He[ke][X];for(var Be=16;Be<80;++Be)ce[Be]=ee(ce[Be-3]^ce[Be-8]^ce[Be-14]^ce[Be-16],1);for(var lt=J[0],dt=J[1],Lt=J[2],qt=J[3],Si=J[4],he=0;he<80;++he){var Bi=Math.floor(he/20),yt=ee(lt,5)+kt(Bi,dt,Lt,qt)+Si+re[Bi]+ce[he]>>>0;Si=qt,qt=Lt,Lt=ee(dt,30)>>>0,dt=lt,lt=yt}J[0]=J[0]+lt>>>0,J[1]=J[1]+dt>>>0,J[2]=J[2]+Lt>>>0,J[3]=J[3]+qt>>>0,J[4]=J[4]+Si>>>0}return[J[0]>>24&255,J[0]>>16&255,J[0]>>8&255,J[0]&255,J[1]>>24&255,J[1]>>16&255,J[1]>>8&255,J[1]&255,J[2]>>24&255,J[2]>>16&255,J[2]>>8&255,J[2]&255,J[3]>>24&255,J[3]>>16&255,J[3]>>8&255,J[3]&255,J[4]>>24&255,J[4]>>16&255,J[4]>>8&255,J[4]&255]}var P=me,Y=se("v5",80,P),Oe=Y,N="00000000-0000-0000-0000-000000000000";function fe(L){if(!y(L))throw TypeError("Invalid UUID");return parseInt(L.substr(14,1),16)}var I=fe},function(t,n,o){t.exports=o(4)},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.JSPluginV1=void 0;var l=function(){function de(ie,we){for(var Ve=0;Ve<we.length;Ve++){var ue=we[Ve];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,"value"in ue&&(ue.writable=!0),Object.defineProperty(ie,ue.key,ue)}}return function(ie,we,Ve){return we&&de(ie.prototype,we),Ve&&de(ie,Ve),ie}}(),d=o(0),c=o(5),E=o(12),C=o(14),y=o(16),w=o(1),g=p(w);function p(de){return de&&de.__esModule?de:{default:de}}function te(de,ie){if(!(de instanceof ie))throw new TypeError("Cannot call a class as a function")}var ae=function(){var de=-1,ie=0,we=0,Ve=1,ue=40,x=1024*1024*4,O=1001,ne=1002,Q=1003,ye=2002,se=Symbol("OPTIONS"),Ze=Symbol("CURRENTPLAYRATE"),Qe=Symbol("CURRENTSOUNDWND"),M=Symbol("MAXWNDNUM"),Te=Symbol("MAXWNDNUM"),ze=Symbol("DRAWCANVAS"),oi=Symbol("SHAPEID"),wi=Symbol("WINDOWFULL"),ui=Symbol("SINGLEWINDOW"),di=Symbol("FILETMP"),zi=Symbol("STATUSTMP"),$e=Symbol("UPGRADESTATUSURL"),st=Symbol("CURWNDINDEX"),Ke=Symbol("CALLBACKFUNCTION"),Ne=Symbol("PLUGINVERSION"),at=Symbol("CANFULLSCREEN"),Ut=function(){function Wt(kt){te(this,Wt),this.oStreamClient=new c.StreamClient,this.oStorageManager=null,this.oJSPlugin=null,typeof kt.staticPath=="string"&&(this.staticPath=kt.staticPath);var ee=this,me={szId:"playWnd",iMode:0,iType:1,iWidth:400,iHeight:300,iMaxSplit:4,iCurrentSplit:2,szBasePath:"./"};this[se]=Object.assign(me,kt),this.iWidth=kt.iWidth,this.iHeight=kt.iHeight,this.b3DZoom=!1,this.bEZoom=!1;var P={border:"#000000",borderSelect:"#FFCC00",background:"#4C4B4B"};P=Object.assign(P,kt.oStyle),this[se].oStyle=P,this[se].iCurrentSplit>this[se].iMaxSplit&&(this[se].iCurrentSplit=this[se].iMaxSplit),this[Ze]=1,this[Qe]=-1,this[M]=this[se].iMaxSplit*this[se].iMaxSplit,this[oi]="",this[wi]=!1,this[ui]=null,this[di]=null,this[zi]="",this[$e]="",this[st]=-1,this[Ke]=null,this[at]=!0,this[Ne]="V1.2.0 build20190123",this.bPlay=!1,ee.oStorageManager=new C.StorageManager(this[se].szBasePath+"/transform",{staticPath:this.staticPath}),typeof ee[se].szId=="string"?ee.oJSPlugin=(0,g.default)("#"+ee[se].szId):ee.oJSPlugin=ee[se].szId,this[Te]=[];for(var Y=0;Y<this[M];Y++)this[Te][Y]={},this[Te][Y].bSelect=!1,this[Te][Y].bPlay=!1,this[Te][Y].bPause=!1,this[Te][Y].bRecord=!1,this[Te][Y].oPlayCtrl=null,this[Te][Y].szPlayType="",this[Te][Y].szStorageUUID="",this[Te][Y].szStreamUUID="",this[Te][Y].aHead=[],this[Te][Y].bLoad=!1,this[Te][Y].windowID=ee[se].szId+"canvas"+Y,this[Te][Y].drawID=ee[se].szId+"canvas_draw"+Y,this[Te][Y].iRate=1,this[Te][Y].bEZoom=!1,this[Te][Y].szSecretKey="",this[Te][Y].bFrameForward=!1,this[Te][Y].iDecodeType=we,this[Te][Y].bFirstFrame=!1;ee.listenBrowserVisibility(),this[se].iMode===0?ee.createWindows():this[se].iMode===1||this[se].iMode===2&&ee.createIMGWindows(),this[se].iType===0&&ee.oJSPlugin.hide(),ee.initEvent(),ee.EventCallback.windowEventSelect(0),window.JSPlayerModuleLoaded=!0}return l(Wt,[{key:"listenBrowserVisibility",value:function(){var ee=this;document.addEventListener("visibilitychange",function(){if(document.hidden)for(var me=0;me<16;me++)ee[Te][me]&&ee[Te][me].bLoad&&ee[Te][me].oPlayCtrl.PlayM4_IsVisible(!1);else for(var P=0;P<16;P++)ee[Te][P]&&ee[Te][P].bLoad&&ee[Te][P].oPlayCtrl.PlayM4_IsVisible(!0)},!1)}},{key:"createWindows",value:function(ee,me){var P=this;ee&&me&&(P.iWidth=ee,P.iHeight=me);var Y=P.iWidth%P[se].iCurrentSplit,Oe=P.iHeight%P[se].iCurrentSplit,N=(P.iWidth-Y-P[se].iCurrentSplit*2)/P[se].iCurrentSplit,fe=(P.iHeight-Oe-P[se].iCurrentSplit*2)/P[se].iCurrentSplit,I=(P.iWidth-Y)/P[se].iCurrentSplit,L=(P.iHeight-Oe)/P[se].iCurrentSplit,re=P[se].iCurrentSplit;typeof P[se].szId=="string"?P.oJSPlugin=(0,g.default)("#"+P[se].szId):P.oJSPlugin=P[se].szId;var J='<div class="'+P[se].szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">',De=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(De)for(var Ye=0;Ye<1;Ye++){ee=N+(Ye%re===re-1?Y:0),me=fe+(Ye+re>=Math.pow(re,2)?Oe:0);var et=I+(Ye%re===re-1?Y:0),R=L+(Ye+re>=Math.pow(re,2)?Oe:0);et=et*2,R=R*2,J+='<div style="transform: scale(0.5);-webkit-transform: scale(0.5);-webkit-transform-origin:0 0;text-align:left;transform-origin:0 0; width:'+et+"px;height:"+R+'px;"><div style="float:left; background-color: '+P[se].oStyle.background+'; position: relative; width:100%; height:100%;"><canvas id="'+P[se].szId+"canvas_draw"+Ye+'"  class="'+P[se].szId+'draw-window" style="position:absolute; top:0; left:0; z-index:999;" wid="'+Ye+'" width='+et+" height="+R+"></canvas>"+(Ye===0?'<img style="display:none;" id="playImg'+Ye+'" src="">':"")+'<canvas id="'+P[se].szId+"canvas"+Ye+'" class="'+P[se].szId+'play-window" style="z-index:9;" wid="'+Ye+'" width="'+et+'" height="'+R+'"></canvas></div></div>'}else for(var He=0;He<P[M];He++){ee=N+(He%re===re-1?Y:0),me=fe+(He+re>=Math.pow(re,2)?Oe:0);var G=I+(He%re===re-1?Y:0),ge=L+(He+re>=Math.pow(re,2)?Oe:0);J+='<div style="float:left; background-color: '+P[se].oStyle.background+"; position: relative; width: "+G+"px; height: "+ge+'px;"><canvas id="'+P[se].szId+"canvas"+He+'" class="'+P[se].szId+'play-window" style="z-index:9;" wid="'+He+'" width="'+G+'" height="'+ge+'"></canvas>'+(He===0?'<img style="display:none;" id="playImg'+He+'" src="">':"")+'<canvas id="'+P[se].szId+"canvas_draw"+He+'"  class="'+P[se].szId+'draw-window" style="position:absolute; top:0; left:0; z-index:999;" wid="'+He+'" width='+ee+" height="+me+"></canvas></div>"}J+="</div>",P.oJSPlugin.html(J)}},{key:"createIMGWindows",value:function(ee,me){var P=this;ee&&me&&(P.iWidth=ee,P.iHeight=me);var Y=P.iWidth%P[se].iCurrentSplit,Oe=P.iHeight%P[se].iCurrentSplit,N=(P.iWidth-Y-P[se].iCurrentSplit*2)/P[se].iCurrentSplit,fe=(P.iHeight-Oe-P[se].iCurrentSplit*2)/P[se].iCurrentSplit,I=(P.iWidth-Y)/P[se].iCurrentSplit,L=(P.iHeight-Oe)/P[se].iCurrentSplit,re=P[se].iCurrentSplit;typeof P[se].szId=="string"?P.oJSPlugin=(0,g.default)("#"+P[se].szId):P.oJSPlugin=P[se].szId,P.oJSPlugin.html("");for(var J='<div class="'+P[se].szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">',De=0;De<P[M];De++){ee=N+(De%re===re-1?Y:0),me=fe+(De+re>=Math.pow(re,2)?Oe:0);var Ye=I+(De%re===re-1?Y:0),et=L+(De+re>=Math.pow(re,2)?Oe:0);J+='<div style="float:left; background-color: '+P[se].oStyle.background+"; position: relative; width: "+Ye+"px; height: "+et+'px;"><img id="'+P[se].szId+"canvas"+De+'" class="'+P[se].szId+'play-window" wid="'+De+'" width="'+Ye+'" height="'+et+'"></img><canvas id="'+P[se].szId+"canvas_draw"+De+'"  class="'+P[se].szId+'draw-window" style="position:absolute; top:0; left:0; z-index:999;" wid="'+De+'" width='+ee+" height="+me+"></canvas></div>"}J+="</div>",P.oJSPlugin.html(J)}},{key:"initCallbackEvent",value:function(){var ee=this;ee.EventCallback=function(){return{openStreamCallback:function(){window.openStreamCallback&&window.openStreamCallback()},getStreamHeaderCallback:function(){window.getStreamHeaderCallback&&window.getStreamHeaderCallback()},getVideoStreamCallback:function(){window.getVideoStreamCallback&&window.getVideoStreamCallback()},appearFirstFrameCallback:function(){window.appearFirstFrameCallback&&window.appearFirstFrameCallback()},averageStreamSuccessCallback:function(){window.averageStreamSuccessCallback&&window.averageStreamSuccessCallback()},loadEventHandler:function(){window.loadEventHandler&&window.loadEventHandler()},zoomEventResponse:function(){},windowEventSelect:function(P){ee[st]!==P&&(ee[st]=P,(ee[Te][P].bEZoom||ee.b3DZoom)&&((0,g.default)("."+ee[se].szId+"draw-window").unbind(),ee[ze].setDrawStatus(!1),ee[ze]=null,ee[ze]=new y.ESCanvas(ee[se].szId+"canvas_draw0"),ee[ze].setShapeType("Rect"),ee[ze].setDrawStyle("#ff0000","",0),ee[Te][P].bEZoom?ee[ze].setDrawStatus(!0,function(Y){Y.startPos&&Y.endPos&&(Y.startPos[0]>Y.endPos[0]?ee[Te][P].oPlayCtrl.PlayM4_SetDisplayRegion(null,!1):ee[Te][P].oPlayCtrl.PlayM4_SetDisplayRegion({left:Y.startPos[0],top:Y.startPos[1],right:Y.endPos[0],bottom:Y.endPos[1]},!0))}):ee.b3DZoom&&ee[ze].setDrawStatus(!0,function(Y){ee[Ke](Y)})),window.GetSelectWndInfo&&window.GetSelectWndInfo(P))},pluginErrorHandler:function(P,Y,Oe){window.PluginEventHandler&&window.PluginEventHandler(P,Y,Oe)},windowEventOver:function(P){window.windowEventOver&&window.windowEventOver(P)},windowEventOut:function(P){window.windowEventOut&&window.windowEventOut(P)},windowEventUp:function(P){window.windowEventUp&&window.windowEventUp(P)},windowFullCcreenChange:function(P){window.windowFullCcreenChange&&window.windowFullCcreenChange(P)},firstFrameDisplay:function(P,Y,Oe){window.firstFrameDisplay&&window.firstFrameDisplay(P,Y,Oe)},performanceLack:function(){window.performanceLack&&window.performanceLack()},mouseEvent:function(P,Y,Oe){var N='<?xml version="1.0"?><MouseEvent><WndIndex>0</WndIndex><EventType>'+P+"</EventType><Position><x>"+Y+"</x><y>"+Oe+"</y><delta>0</delta></Position></MouseEvent>";window.onMouseEvent&&window.onMouseEvent(N)}}}()}},{key:"initEvent",value:function(){var ee=this;ee.initCallbackEvent(),ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().each(function(me){var P=this,Y=!1;(0,g.default)(P).unbind().bind("mousedown",function(){ee.EventCallback.windowEventSelect(parseInt(ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(me).find("."+ee[se].szId+"play-window").eq(0).attr("wid"),10))}),(0,g.default)(P).bind("mouseenter",function(N){var fe=ee[se].szId;N.target.id&&N.target.id.indexOf("_")===-1?fe=N.target.id.split("canvas0")[0]:fe=N.target.id.split("canvas_draw0")[0],(0,g.default)("#"+fe+"canvas_draw0").css("pointer-events","all"),ee.bEZoom||ee.b3DZoom?N.target.id&&N.target.id.indexOf("_")===-1&&(ee[ze]=null,(0,g.default)("."+fe+"draw-window").unbind(),ee[ze]=new y.ESCanvas(fe+"canvas_draw0"),ee[ze].setShapeType("Rect"),ee[ze].setDrawStyle("#ff0000","",0),ee.b3DZoom&&ee[ze].setDrawStatus(!0,function(I){ee[Ke](I)})):(0,g.default)("#"+fe+"canvas_draw0").css("pointer-events","none")}),(0,g.default)(P).bind("mouseleave",function(N){var fe=ee[se].szId;N.target.id&&N.target.id.indexOf("_")===-1?fe=N.target.id.split("canvas0")[0]:fe=N.target.id.split("canvas_draw0")[0],(0,g.default)("#"+fe+"canvas_draw0").css("pointer-events","none")}),(0,g.default)(P).bind("mouseover",function(N){ee.EventCallback.windowEventOver(me),N.stopPropagation()}),(0,g.default)(P).bind("mouseout",function(N){ee.EventCallback.windowEventOut(me),N.stopPropagation()}),(0,g.default)(P).bind("mousedown",function(N){if(ee[ze]){Y=!0;var fe=N.offsetX/ee[ze].m_iCanvasWidth,I=N.offsetY/ee[ze].m_iCanvasHeight;N.button===2?ee.EventCallback.mouseEvent(4,fe,I):N.button===0&&ee.EventCallback.mouseEvent(1,fe,I)}N.stopPropagation()}),(0,g.default)(P).bind("mousemove",function(N){if(ee[ze]){var fe=N.offsetX/ee[ze].m_iCanvasWidth,I=N.offsetY/ee[ze].m_iCanvasHeight;Y?ee.EventCallback.mouseEvent(7,fe,I):ee.EventCallback.mouseEvent(6,fe,I)}N.stopPropagation()}),(0,g.default)(P).bind("mousewheel",function(N){if(ee[ze]){var fe=N.offsetX/ee[ze].m_iCanvasWidth,I=N.offsetY/ee[ze].m_iCanvasHeight;ee.EventCallback.mouseEvent(8,fe,I)}N.stopPropagation()}),(0,g.default)(P).bind("mouseup",function(N){if(Y=!1,ee.EventCallback.windowEventUp(me),ee[ze]){var fe=N.offsetX/ee[ze].m_iCanvasWidth,I=N.offsetY/ee[ze].m_iCanvasHeight;N.button===2?ee.EventCallback.mouseEvent(5,fe,I):N.button===0&&ee.EventCallback.mouseEvent(3,fe,I)}}),new Date().getTime();function Oe(){var N=document.getElementsByTagName("body")[0],fe=document.getElementsByTagName("html")[0];switch(window.orientation){case-90:case 90:setTimeout(function(){ee.JS_FullScreenDisplay(!0),fe.style["overflow-y"]="hidden",fe.style.height="100%",N.style["overflow-y"]="hidden",N.style.height="100%"},200);break;case 0:case 180:setTimeout(function(){ee.JS_CancelFullScreenDisplay(!0),fe.style["overflow-y"]="auto",N.style["overflow-y"]="auto"},200);break}}window.addEventListener("orientationchange",Oe,!1)}),typeof document.fullScreen<"u"?document.addEventListener("fullscreenchange",function(){var me=document.fullscreen||!1;ee.EventCallback.windowFullCcreenChange(me)}):typeof document.webkitIsFullScreen<"u"?document.addEventListener("webkitfullscreenchange",function(){var me=document.webkitIsFullScreen||!1;ee.EventCallback.windowFullCcreenChange(me)}):typeof document.mozFullScreen<"u"&&document.addEventListener("mozfullscreenchange",function(){var me=document.mozFullScreen||!1;ee.EventCallback.windowFullCcreenChange(me)})}},{key:"updateWnd",value:function(){for(var ee=this,me=ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().length,P=ee.iWidth%ee[se].iCurrentSplit,Y=ee.iHeight%ee[se].iCurrentSplit,Oe=(ee.iWidth-P-ee[se].iCurrentSplit*2)/ee[se].iCurrentSplit,N=(ee.iHeight-Y-ee[se].iCurrentSplit*2)/ee[se].iCurrentSplit,fe=(ee.iWidth-P)/ee[se].iCurrentSplit,I=(ee.iHeight-Y)/ee[se].iCurrentSplit,L=ee[se].iCurrentSplit,re=0;re<me;re++){var J=Oe+(re%L===L-1?P:0),De=N+(re+L>=Math.pow(L,2)?Y:0),Ye=fe+(re%L===L-1?P:0),et=I+(re+L>=Math.pow(L,2)?Y:0);ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(re).width(Ye),ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(re).height(et),ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(re).find("."+ee[se].szId+"draw-window").attr("width",J),ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(re).find("."+ee[se].szId+"draw-window").attr("height",De),ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(re).find("."+ee[se].szId+"play-window").attr("width",Ye),ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).children().eq(re).find("."+ee[se].szId+"play-window").attr("height",et)}}},{key:"cbPlayCtrlCallback",value:function(ee,me,P,Y,Oe,N,fe){var I=this;if((0,g.default)("#"+I[Te][P].windowID).length){var L=!1;Y&&Oe&&(L=!0),I[Te][P].bLoad=!0,I.EventCallback&&I.EventCallback.openStreamCallback&&I.EventCallback.openStreamCallback(),I.oStreamClient.openStream(ee,me,function(re){if(re.errorCode&&re.errorCode!="1"&&I.EventCallback&&I.EventCallback.pluginErrorHandler&&(I.EventCallback.pluginErrorHandler(P,re.errorCode,re),fe(re)),re.bHead&&!I[Te][P].bPlay){console.log(I.EventCallback),I.EventCallback&&I.EventCallback.getStreamHeaderCallback&&I.EventCallback.getStreamHeaderCallback(),I.firstGetData=!0,I[Te][P].bPlay=!0,I.bPlay=!0,I[Te][P].aHead=new Uint8Array(re.buf),I[Te][P].oPlayCtrl.PlayM4_OpenStream(re.buf,ue,1024*1024*2);try{var J=function(dt,Lt){var qt=new RegExp("(^|&)"+dt+"=([^&]*)(&|$)","i"),Si=Lt.match(qt);return Si!=null?unescape(Si[2]):null},De=J("begin",me.playURL),Ye=parseInt(De.slice(0,4)),et=parseInt(De.slice(4,6)),R=parseInt(De.slice(6,8)),He=parseInt(De.slice(9,11)),G=parseInt(De.slice(11,13)),ge=parseInt(De.slice(13,15))+3;console.log("设置OSD时间: ",Ye+":"+et+":"+R+":"+He+":"+G+":"+ge+":0"),I[Te][P].oPlayCtrl.PlayM4_SetGlobalBaseTime(Ye,et,R,He,G,ge,0)}catch(lt){console.log("PlayM4_SetGlobalBaseTime:",lt)}I[Te][P].szSecretKey!==""&&I[Te][P].oPlayCtrl.PlayM4_SetSecretKey(1,I[Te][P].szSecretKey,128),I[Te][P].aHead[8]===4?(console.log("PlayM4_SetStreamOpenMode:0"),I[Te][P].oPlayCtrl.PlayM4_SetStreamOpenMode(0)):(console.log("PlayM4_SetStreamOpenMode:1"),I[Te][P].oPlayCtrl.PlayM4_SetStreamOpenMode(1));var xe=I[Te][P].oPlayCtrl.PlayM4_SetRunTimeInfoCallBackEx(1,function(lt,dt,Lt,qt,Si){I.EventCallback&&I.EventCallback.setRunTimeInfoCallBack&&I.EventCallback.setRunTimeInfoCallBack(lt,dt,Lt,qt,Si)});console.log("错误实时信息回调:",xe),I[Te][P].oPlayCtrl.PlayM4_SetInputBufSize(x),I[Te][P].oPlayCtrl.PlayM4_Play(I[Te][P].windowID)}else{var ke=new Uint8Array(re.buf),ce=I[Te][P].oPlayCtrl.PlayM4_GetInputBufSize(),X=I[Te][P].oPlayCtrl.PlayM4_GetYUVBufSize(),Be=I[Te][P].oPlayCtrl.PlayM4_GetDecodeFrameType();ce>x*.5&&ce<x*.8&&I[Te][P].iRate===1&&Be!==Ve&&!I[Te][P].bFrameForward&&(I[Te][P].oPlayCtrl.PlayM4_SetDecodeFrameType(Ve),I.EventCallback.performanceLack()),X>10&&X<15&&!I[Te][P].bFrameForward&&Be!==Ve&&(I[Te][P].oPlayCtrl.PlayM4_SetDecodeFrameType(Ve),I.EventCallback.performanceLack()),X<10&&ce<x*.5&&Be!==we&&I[Te][P].iRate===1&&I[Te][P].oPlayCtrl.PlayM4_SetDecodeFrameType(we),re.statusString?I.EventCallback.pluginErrorHandler(P,O,re):re.type&&re.type==="exception"?I.EventCallback.pluginErrorHandler(P,ne,re):(I.firstGetData&&(I.firstGetData=!1,console.log("第一次获取数据-----------6"),I.EventCallback&&I.EventCallback.getVideoStreamCallback&&I.EventCallback.getVideoStreamCallback()),I[Te][P].oPlayCtrl.PlayM4_InputData(ke,ke.length)),!I[Te][P].bFirstFrame&&re.errorCode&&re.errorCode=="1"&&I[Te][P].oPlayCtrl.PlayM4_GetFrameResolution(function(lt,dt){lt!=0&&dt!=0&&(console.log("iWidth--------",lt),console.log("iHeight--------",dt),I[Te][P].bFirstFrame=!0,I.EventCallback.firstFrameDisplay(P,lt,dt),I.EventCallback&&I.EventCallback.appearFirstFrameCallback&&I.EventCallback.appearFirstFrameCallback(),I.EventCallback&&I.EventCallback.averageStreamSuccessCallback&&I.EventCallback.averageStreamSuccessCallback())})}I[Te][P].szStorageUUID&&I.oStorageManager.inputData(I[Te][P].szStorageUUID,re.buf),re=null},function(){}).then(function(re){I[Te][P].szStreamUUID=re,I.oStreamClient.startPlay(re,Y,Oe).then(function(){L?(I[Te][P].szPlayType="playback",I[Te][P].iRate=1,I[Te][P].oPlayCtrl.PlayM4_PlayRate(I[Te][P].iRate)):I[Te][P].szPlayType="realplay",N()},function(J){fe(J)})},function(re){fe(re)})}}},{key:"cbPlayIMGCallback",value:function(ee,me,P,Y,Oe,N,fe){var I=this;(0,g.default)("#"+I[Te][P].windowID).length&&(I[Te][P].bPlay=!0,I.bPlay=!0,I.oStreamClient.openStream(ee,me,function(L){if(!L.bHead){var re=new Blob([L.buf],{type:"image/jpeg"}),J=URL.createObjectURL(re);(0,g.default)("#"+I[se].szId+"canvas"+P).length&&(document.getElementById(I[se].szId+"canvas"+P).src=J)}},function(){if(I[Te][P].bPlay){I.EventCallback.pluginErrorHandler(P,Q),I[Te][P].bPlay=!1;var L=I[Te][P].oPlayCtrl.PlayM4_GetInputBufSize();console.log("PlayM4_GetInputBufSize2:::",L),I.bPlay=!1}}).then(function(L){I[Te][P].szStreamUUID=L,I.oStreamClient.startPlay(L,Y,Oe).then(function(){I[Te][P].szPlayType="realplay",N()},function(re){fe(re)})},function(L){fe(L)}))}},{key:"JS_UpdateWindowStyle",value:function(ee){var me=this;this[se].oStyle=ee,me.updateWnd()}},{key:"JS_GetPluginVersion",value:function(){var ee=this;return ee[Ne]}},{key:"JS_ArrangeWindow",value:function(ee){var me=this;if(ee<me[se].iMaxSplit?me[se].iCurrentSplit=ee:me[se].iCurrentSplit=me[se].iMaxSplit,d.oTool.isFirefox())for(var P=0;P<me[se].iMaxSplit*me[se].iMaxSplit;P++)me[Te][P].oPlayCtrl&&me[Te][P].oPlayCtrl.PlayM4_ClearCanvas();me.updateWnd(),me.EventCallback.windowEventSelect(0)}},{key:"JS_SetSecretKey",value:function(ee,me){return ee<0||me===""||typeof me>"u"?-1:(this[Te][ee].szSecretKey=me,0)}},{key:"JS_Play",value:function(ee,me,P,Y,Oe){console.log("JS_Play");var N=this;N.playURL=me.playURL,N.szUrl=ee;var fe=new Promise(function(I,L){if(P<0||P>N[M]-1){L();return}if(N[Te][P].bFrameForward){L();return}if(N[Te][P].bPlay&&N.JS_Stop(P),N[se].iMode===0)setTimeout(function(){N[Te][P].bFirstFrame=!1,N[Te][P].iDecodeType=we,N[Te][P].oPlayCtrl?N.cbPlayCtrlCallback(ee,me,P,Y,Oe,I,L):N[Te][P].oPlayCtrl=new E.JSPlayCtrl(N[se].szBasePath+"/playctrl/",function(J){J.cmd==="loaded"&&!N[Te][P].bLoad?N.cbPlayCtrlCallback(ee,me,P,Y,Oe,I,L):J.cmd==="OnebyOne"?J.status?N[Te][P].bPause&&(N.oStreamClient.resume(N[Te][P].szStreamUUID),N[Te][P].bPause=!1):N[Te][P].bPause||(N.oStreamClient.pause(N[Te][P].szStreamUUID),N[Te][P].bPause=!0):J.cmd},P,N.staticPath)},200);else if(N[se].iMode!==1){if(N[se].iMode===2){var re=(0,g.default)("."+N[se].szId+"play-window").eq(P);re.show(),N.cbPlayIMGCallback(ee,me,P,Y,Oe,I,L)}}});return fe}},{key:"JS_Seek",value:function(ee,me,P){var Y=this,Oe=new Promise(function(N,fe){if(ee<0||ee>Y[M]-1){fe();return}if(!Y[Te][ee].bPlay){fe();return}console.log("seek，清理缓存"),Y[Te][ee].oPlayCtrl.aVideoYUVBuffer.splice(0,Y[Te][ee].oPlayCtrl.aVideoYUVBuffer.length),Y.oStreamClient.seek(Y[Te][ee].szStreamUUID,me,P),N()});return Oe}},{key:"JS_GetSdkVersion",value:function(){var ee=this;return ee[Te][0].oPlayCtrl.PlayM4_GetSdkVersion()}},{key:"JS_isInited",value:function(){var ee=this;return ee[Te][0].bLoad}},{key:"JS_SetLostFrameMode",value:function(ee){var me=this;return me[Te][0].oPlayCtrl.PlayM4_SetLostFrameMode(ee)}},{key:"JS_DestroyWorker",value:function(){var ee=this;ee[Te].forEach(function(me){me.bPlay&&me.oPlayCtrl.PlayM4_CloseStream(),me.oPlayCtrl&&(me.oPlayCtrl.PlayM4_Destroy(),me.oPlayCtrl=null,me.bLoad=!1)}),ee[ze]&&ee[ze].setShapeType("")}},{key:"JS_Stop",value:function(ee){var me=this,P=new Promise(function(Y,Oe){if(ee<0||ee>me[M]-1){Oe();return}me[Te][ee].szStorageUUID&&me.JS_StopSave(ee),me[Te][ee].bEZoom&&me.JS_DisableZoom(ee),me[Qe]===ee&&(me[Qe]=-1),me.oStreamClient.stopAll(me[Te][ee].szStreamUUID).then(function(){if(me[Te][ee].bPlay=!1,me.bPlay=!1,me[Te][ee].bFrameForward=!1,me[Te][ee].iRate=1,me[se].iMode===0)me[Te][ee].oPlayCtrl&&(me[Te][ee].oPlayCtrl.PlayM4_Stop&&me[Te][ee].oPlayCtrl.PlayM4_Stop(),me[Te][ee].oPlayCtrl.PlayM4_CloseStream&&me[Te][ee].oPlayCtrl.PlayM4_CloseStream());else if(me[se].iMode===2){var N=(0,g.default)("."+me[se].szId+"play-window").eq(ee);N.hide()}setTimeout(function(){Y()},500)},function(){setTimeout(function(){Oe()},500)})});return P}},{key:"JS_Pause",value:function(ee,me){console.log("JS_Pause");var P=this,Y=new Promise(function(Oe,N){if(ee<0||ee>P[M]-1){N();return}P[Te][ee].szStorageUUID&&P.JS_StopSave(ee);var fe=function(L){L.fileUint8Array&&(console.log("暂停缓存截图数据 start",L.fileUint8Array),P[Te][ee].tmpCapturePictureData=L.fileUint8Array)};if(P.JS_CapturePicture(0,""+new Date().getTime(),"JPEG",fe,!0).then(function(){}).catch(function(I){return console.log(I)}),!P[Te][ee].bPlay){N();return}if(P[Te][ee].bFrameForward){N();return}P.JS_GetOSDTime(0).then(function(I){var L=new Date(I*1e3),re=""+L.getFullYear()+(L.getMonth()>8?L.getMonth()+1:"0"+(L.getMonth()+1))+(L.getDate()>9?L.getDate():"0"+L.getDate())+(L.getHours()>9?L.getHours():"0"+L.getHours())+(L.getMinutes()>9?L.getMinutes():"0"+L.getMinutes())+(L.getSeconds()>9?L.getSeconds():"0"+L.getSeconds());if(P[Te][ee].pauseTime=re,P[Te][ee].pauseDate=L.valueOf(),me)P.oStreamClient.stopAll(P[Te][ee].szStreamUUID).then(function(){if(P[Te][ee].bPlay=!1,P.bPlay=!1,P[Te][ee].bFrameForward=!1,P[Te][ee].iRate=1,P[se].iMode===0)P[Te][ee].oPlayCtrl&&(P[Te][ee].oPlayCtrl.PlayM4_Stop&&P[Te][ee].oPlayCtrl.PlayM4_Stop(),P[Te][ee].oPlayCtrl.PlayM4_CloseStream&&P[Te][ee].oPlayCtrl.PlayM4_CloseStream());else if(P[se].iMode===2){var De=(0,g.default)("."+P[se].szId+"play-window").eq(ee);De.hide()}setTimeout(function(){P[Te][ee].bPause=!0,Oe({pauseDate:L})},500)},function(){setTimeout(function(){N()},500)});else{if(P[Te][ee].bPlay=!1,P.bPlay=!1,P[se].iMode===0)P[Te][ee].oPlayCtrl&&P[Te][ee].oPlayCtrl.PlayM4_Pause&&P[Te][ee].oPlayCtrl.PlayM4_Pause(!0);else if(P[se].iMode===2){var J=(0,g.default)("."+P[se].szId+"play-window").eq(ee);J.hide()}setTimeout(function(){P[Te][ee].bPause=!0,Oe({pauseDate:L})},500)}}).catch(function(I){N()})});return Y}},{key:"JS_Resume",value:function(ee){console.log("JS_Resume");var me=0,P=this,Y=new Promise(function(Oe,N){if(me>P[M]-1){N();return}if(ee&&(P[Te][me].pauseTime?P[Te][me].pauseTime=P[Te][me].pauseTime.slice(0,14-ee.length)+ee:P[Te][me].pauseTime=ee),P.playURL.indexOf("playback")!==-1){var fe=P[Te][me].pauseTime;console.log("pauseTime",fe),P.playURL=P.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin="+fe.slice(0,8)+"T"+fe.slice(8,14)+"Z")}if(P.playURL.indexOf("cloudplayback")!==-1){var I=P[Te][me].pauseDate;P.playURL=P.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+I),console.log("playURL:",P.playURL)}ee?(P.JS_Play(P.szUrl,{playURL:P.playURL},me).then(function(L){Oe(L)}).catch(function(L){N(L)}),P[Te][me].bPause=!1):(P[Te][me].oPlayCtrl&&P[Te][me].oPlayCtrl.PlayM4_Pause&&P[Te][me].oPlayCtrl.PlayM4_Pause(!1),P[Te][me].bPause=!1,P[Te][me].bPlay=!0,P.bPlay=!0,Oe())});return Y}},{key:"JS_Slow",value:function(ee){var me=this,P=new Promise(function(Y,Oe){if(ee<0||ee>me[M]-1){Oe();return}if(!me[Te][ee].bPlay){Oe();return}if(me[Te][ee].iRate===-8){Oe();return}if(me[Te][ee].bFrameForward){Oe();return}me[Te][ee].iRate<0&&me[Te][ee].iRate>-8&&(me[Te][ee].iRate*=2),me[Te][ee].iRate===1&&(me[Te][ee].iRate*=-2),me[Te][ee].iRate>1&&(me[Te][ee].iRate/=2),me.oStreamClient.setPlayRate(me[Te][ee].szStreamUUID,me[Te][ee].iRate).then(function(){me[Te][ee].iRate<2?me[Te][ee].oPlayCtrl.PlayM4_SetDecodeFrameType(we):(console.log("单线程倍速，只解析I帧",me[Te][ee].iRate),me[Te][ee].oPlayCtrl.PlayM4_SetDecodeFrameType(Ve),me[Te][ee].oPlayCtrl.PlayM4_SetIFrameDecInterval(0)),me[Te][ee].oPlayCtrl.PlayM4_PlayRate(me[Te][ee].iRate),Y()},function(N){Oe(N)})});return P}},{key:"JS_Fast",value:function(ee,me){var P=this,Y=new Promise(function(Oe,N){if(ee<0||ee>P[M]-1){N();return}if(!P[Te][ee].bPlay){N();return}if(me)switch(me){case 1:case 2:case 4:P[Te][ee].iRate=me;break;case 3:P[Te][ee].iRate=3;break;default:P[Te][ee].iRate=this.iRate;break}else{if(P[Te][ee].bFrameForward){N();return}if(P[Te][ee].iRate===8){N();return}P[Te][ee].iRate===-2?P[Te][ee].iRate=1:P[Te][ee].iRate<-2?P[Te][ee].iRate/=2:P[Te][ee].iRate>0&&P[Te][ee].iRate<8&&(P[Te][ee].iRate*=2)}P.oStreamClient.setPlayRate(P[Te][ee].szStreamUUID,P[Te][ee].iRate).then(function(){P[Te][ee].iRate<2?(console.log("单线程倍速，全解析",P[Te][ee].iRate),P[Te][ee].oPlayCtrl.PlayM4_SetDecodeFrameType(we)):(console.log("单线程倍速，只解析I帧",P[Te][ee].iRate),P[Te][ee].oPlayCtrl.PlayM4_SetDecodeFrameType(Ve),P[Te][ee].iRate===8?P[Te][ee].oPlayCtrl.PlayM4_SetIFrameDecInterval(2):P[Te][ee].oPlayCtrl.PlayM4_SetIFrameDecInterval(0)),P[Te][ee].oPlayCtrl.PlayM4_PlayRate(P[Te][ee].iRate),Oe()},function(fe){N(fe)})});return Y}},{key:"JS_Speed",value:function(ee){var me=this,P=0,Y=new Promise(function(Oe,N){if(P>me[M]-1){N();return}if(!me[Te][P].bPlay){N();return}if(me[Te][P].bFrameForward){N();return}if(me[Te][P].iRate===8){N();return}me[Te][P].iRate=ee,me.oStreamClient.setPlayRate(me[Te][P].szStreamUUID,me[Te][P].iRate).then(function(){me[Te][P].iRate<=2||me[Te][P].iRate===3?(console.log("单线程倍速，全解",me[Te][P].iRate),me[Te][P].oPlayCtrl.PlayM4_SetDecodeFrameType(we)):(console.log("单线程倍速，只解析I帧",me[Te][P].iRate),me[Te][P].oPlayCtrl.PlayM4_SetDecodeFrameType(Ve)),me[Te][P].oPlayCtrl.PlayM4_PlayRate(me[Te][P].iRate),Oe()},function(fe){N(fe)})});return Y}},{key:"JS_Transmission",value:function(ee,me){var P=this,Y=new Promise(function(Oe,N){if(ee<0||ee>P[M]-1){N();return}if(!P[Te][ee].szStreamUUID){N();return}P.oStreamClient.transmission(P[Te][ee].szStreamUUID,me).then(function(fe){Oe(fe)},function(fe){N(fe)})});return Y}},{key:"JS_FrameForward",value:function(ee){var me=this,P=new Promise(function(Y,Oe){if(ee<0||ee>me[M]-1){Oe();return}if(!me[Te][ee].bPlay){Oe();return}me[Te][ee].iRate!==1?(me[Te][ee].iRate=1,me[Ze]=me[Te][ee].iRate,me.oStreamClient.setPlayRate(me[Te][ee].szStreamUUID,me[Te][ee].iRate).then(function(){me[Te][ee].oPlayCtrl.PlayM4_PlayRate(me[Te][ee].iRate),me[Te][ee].oPlayCtrl.PlayM4_SetDecodeFrameType(we),me[Te][ee].oPlayCtrl.PlayM4_OneByOne(),me[Te][ee].bFrameForward=!0},function(N){Oe(N)})):(me[Te][ee].oPlayCtrl.PlayM4_PlayRate(me[Te][ee].iRate),me[Te][ee].oPlayCtrl.PlayM4_SetDecodeFrameType(we),me[Te][ee].oPlayCtrl.PlayM4_OneByOne(),me[Te][ee].bFrameForward=!0),Y()});return P}},{key:"JS_GetOSDTime",value:function(ee){var me=this,P=new Promise(function(Y,Oe){if(ee<0||ee>me[M]-1){Oe(de);return}if(!me[Te][ee].bPlay){Oe(de);return}var N=me[Te][ee].oPlayCtrl.PlayM4_GetOSDTime(function(fe){var I=d.oTool.isIOS()||d.oTool.isSafari()||d.oTool.isEdge()?"/":" ",L=Date.parse(fe.replace(/-/g,I))/1e3;Y(L)});if(N!==0){Oe(de);return}});return P}},{key:"JS_OpenSound",value:function(ee){var me=this;return ee<0||ee>me[M]-1||!me[Te][ee].bPlay||me[Qe]===ee||(me[Qe]!==-1&&me[Te][me[Qe]].oPlayCtrl.PlayM4_StopSound(),me[Te][ee].oPlayCtrl.PlayM4_PlaySound(ee)!==1)?de:(me[Qe]=ee,ie)}},{key:"JS_GetVolume",value:function(ee,me){var P=this,Y=P[Te][ee].oPlayCtrl.PlayM4_GetVolume(function(Oe){me&&me(Oe)});return Y}},{key:"JS_SetVolume",value:function(ee,me){var P=this;return P[Te][ee].oPlayCtrl.PlayM4_SetVolume(me)!==0?de:ie}},{key:"JS_CloseSound",value:function(){var ee=this,me=ee[Qe];return me<0||me>ee[M]-1||!ee[Te][me].bPlay||ee[Te][me].oPlayCtrl.PlayM4_StopSound()!==1?de:(ee[Qe]=-1,ie)}},{key:"JS_EnableZoom",value:function(ee){var me=this;return ee<0||ee>me[M]-1||!me[Te][ee].bPlay?de:((0,g.default)("."+me[se].szId+"draw-window").unbind(),this[ze]=new y.ESCanvas(me[se].szId+"canvas_draw0"),this[ze].setShapeType("Rect"),this[ze].setDrawStyle("#ff0000","",0),this[ze].setDrawStatus(!0,function(P){P.startPos&&P.endPos&&(P.startPos[0]>P.endPos[0]?me[Te][ee].oPlayCtrl.PlayM4_SetDisplayRegion(null,!1):me[Te][ee].oPlayCtrl.PlayM4_SetDisplayRegion({left:P.startPos[0],top:P.startPos[1],right:P.endPos[0],bottom:P.endPos[1]},!0))}),me[Te][ee].bEZoom=!0,ie)}},{key:"JS_DisableZoom",value:function(ee){var me=this;return ee<0||ee>me[M]-1||!me[Te][ee].bPlay||(this[ze].setDrawStatus(!1),this[Te][ee].oPlayCtrl.PlayM4_SetDisplayRegion(null,!1)!==0)?de:(this[Te][ee].bEZoom=!1,ie)}},{key:"JS_Enable3DZoom",value:function(ee,me){var P=this;if(ee<0||ee>P[M]-1||!P[Te][ee].bPlay)return de;var Y=this._JSPlayM4_GetFrameInfo();return this._JSPlayM4_SetDisplayRegion(0,Y.width,0,Y.height),(0,g.default)("."+P[se].szId+"draw-window").unbind(),this[Ke]=me,this[ze]=new y.ESCanvas(P[se].szId+"canvas_draw0"),this[ze].setShapeType("Rect"),this[ze].setDrawStyle("#ff0000","",0),this[ze].setDrawStatus(!0,function(Oe){me(Oe)}),this.b3DZoom=!0,ie}},{key:"JS_Disable3DZoom",value:function(ee){var me=this;return ee<0||ee>me[M]-1||!me[Te][ee].bPlay?de:(this[ze].setDrawStatus(!1),this.b3DZoom=!1,ie)}},{key:"JS_CapturePicture",value:function(ee,me,P,Y,Oe){var N=this;return new Promise(function(fe,I){if(ee<0||ee>N[M]-1){I({code:-1,msg:"窗口号错误"});return}if(!N[Te][ee].bPlay&&N[Te][ee].bPause&&N[Te][ee].tmpCapturePictureData&&(console.log("不在播放状态，使用缓存的截图"),L(N[Te][ee].tmpCapturePictureData),fe({code:1,data:L(N[Te][ee].tmpCapturePictureData)})),!N[Te][ee].bPlay){I({code:-1,msg:"获取图片数据失败！"});return}if(P||(P="JPEG"),P==="BMP")N[Te][ee].oPlayCtrl.PlayM4_GetBMP(function(re){re===6?I({code:-1,msg:"获取图片数据失败！"}):(Y?Y(re):d.oTool.downloadFile(re,me+".BMP"),fe({code:1,data:{fileName:me+".BMP",fileUint8Array:re}}))});else if(P==="JPEG")try{N[Te][ee].oPlayCtrl.PlayM4_GetJPEG(function(re){re===6?I({code:ye,msg:"内存不足，抓图失败"}):fe({code:1,data:L(re)})})}catch(re){console.log("JS_CapturePicture error",re)}function L(re){var J=function(et){for(var R=new Uint8Array(et),He="",G=0;G<R.length;G++)He+=String.fromCharCode(R[G]);return"data:image/jpeg;base64,"+window.btoa(He)},De={fileName:me+".jpeg",fileUint8Array:re,base64:J(re)};return Y?(Y(De),Oe||d.oTool.downloadFile(re,me+".jpeg")):d.oTool.downloadFile(re,me+".jpeg"),De}})}},{key:"JS_StopRealPlayAll",value:function(){var ee=this;ee.oStreamClient.stopAll(),ee[Te].forEach(function(me,P){me.bPlay&&(me.szStorageUUID&&ee.JS_StopSave(P),me.bEZoom&&ee.JS_DisableZoom(P),ee[se].iMode===0?(me.oPlayCtrl.PlayM4_Stop(),me.oPlayCtrl.PlayM4_CloseStream()):ee[se].iMode===2&&(0,g.default)("."+ee[se].szId+"play-window").hide()),me.bPlay=!1}),ee.bPlay=!1,ee[Qe]=-1}},{key:"JS_StartSave",value:function(ee,me,P){var Y=this,Oe=new Promise(function(N,fe){var I=0;if(P&&(I=P.iPackage),ee<0||ee>Y[M]-1){fe();return}if(!Y[Te][ee].bPlay){fe();return}me.indexOf(".mp4")<0&&(me=me+".mp4");var L=Y[Te][ee].aHead,re=0;Y[Te][ee].szPlayType==="playback"&&(re=1),Y.oStorageManager.startRecord(me,L,2,re,{cbEventHandler:function(De){Y.EventCallback.pluginErrorHandler(ee,De)},iPackage:I}).then(function(J){Y[Te][ee].szStorageUUID=J,N()},function(){fe()})});return Oe}},{key:"JS_StopSave",value:function(ee){var me=this,P=new Promise(function(Y,Oe){if(!me[Te][ee].szStorageUUID){Oe();return}me.oStorageManager.stopRecord(me[Te][ee].szStorageUUID).then(function(){me[Te][ee].szStorageUUID="",Y()},function(N){Oe(N)})});return P}},{key:"JS_GetLocalConfig",value:function(){return""}},{key:"JS_SetLocalConfig",value:function(){return 0}},{key:"JS_SetGridInfo",value:function(ee){if(ee===null||typeof ee>"u")return-1;var me="#ff0000";return ee.drawColor&&(me=ee.drawColor),this[ze].setDrawStyle(me),this[ze].setShapesInfoByType("Grid",[{szGridMap:ee.gridMap,iGridColNum:ee.gridColNum,iGridRowNum:ee.gridRowNum}]),0}},{key:"JS_GetGridInfo",value:function(){if(!this[ze])return{};var ee=this[ze].getShapesInfoByType("Grid")[0];return ee?{gridColNum:ee.iGridColNum,gridRowNum:ee.iGridRowNum,gridMap:ee.szGridMap}:{iGridRowNum:18,iGridColNum:22,szGridMap:""}}},{key:"JS_SetDrawShapeInfo",value:function(ee,me){if(typeof ee>"u"||ee==="")return-1;this[ze].setShapeType(ee),this[ze].setDrawStyle(me.szDrawColor||"",me.szFillColor||"",me.iTranslucent||0),me.iMaxShapeSupport&&me.iMaxShapeSupport>0&&this[ze].setMaxShapeSupport(me.iMaxShapeSupport),me.iMaxShapeSupport>0&&this[ze].setCurrentShapeInfo({szId:"",szTips:me.szTips||"",iMinClosed:3,iMaxPointNum:me.iMaxPointSupport,iPolygonType:1,szDrawColor:me.szDrawColor||"",szFillColor:me.szFillColor||"",iTranslucent:me.iTranslucent||0})}},{key:"JS_SetPolygonInfo",value:function(ee){if(typeof ee>"u"||!ee.length)return-1;var me=[];if(ee.length>0)for(var P=0,Y=ee.length;P<Y;P++){var Oe=ee[P].aPoint;Oe.length>0&&me.push(ee[P])}return me.length>0?(this[ze].setShapesInfoByType("Polygon",me),0):-1}},{key:"JS_GetPolygonInfo",value:function(){for(var ee=[],me=this[ze].getShapesInfoByType("Polygon"),P=0,Y=me.length;P<Y;P++){var Oe=me[P],N={aPoint:Oe.aPoint,bClosed:Oe.bClosed,szTips:Oe.szTips};ee.push(N)}return ee}},{key:"JS_SetLineInfo",value:function(ee){if(typeof ee>"u"||!ee.length)return-1;var me=[];if(ee.length>0)for(var P=0,Y=ee.length;P<Y;P++){var Oe=ee[P].aPoint;Oe.length>0&&me.push(ee[P])}return me.length>0?(this[ze].setShapesInfoByType("Line",me),0):-1}},{key:"JS_GetLineInfo",value:function(){for(var ee=[],me=this[ze].getShapesInfoByType("Line"),P=0,Y=me.length;P<Y;P++){var Oe=me[P],N={iLineType:Oe.iLineType,aPoint:Oe.aPoint,szTips:Oe.szTips};ee.push(N)}return ee}},{key:"JS_SetRectInfo",value:function(ee){if(typeof ee>"u"||!ee.length)return-1;var me=[];if(ee.length>0)for(var P=0,Y=ee.length;P<Y;P++){var Oe=ee[P].aPoint;Oe.length>0&&me.push(ee[P])}return me.length>0?(this[ze].setShapesInfoByType("Rect",me),0):-1}},{key:"JS_GetRectInfo",value:function(){for(var ee=[],me=this[ze].getShapesInfoByType("Rect"),P=0,Y=me.length;P<Y;P++){var Oe=me[P],N={aPoint:Oe.aPoint,szTips:Oe.szTips};ee.push(N)}return ee}},{key:"JS_SetRegionInfo",value:function(ee){var me=this;this[ze].clearAllShape();var P=d.oTool.parseXmlFromStr(ee);if(this[ze].setDrawStyle("#ff0000","#343434",.3),(0,g.default)(P).find("DetectionRegionInfo").length>0){this[ze].setShapeType("Rect");var Y=parseInt((0,g.default)(P).find("MaxRegionNum").eq(0).text(),10);this[ze].setMaxShapeSupport(Y),this[ze].m_szDisplayMode=(0,g.default)(P).find("DisplayMode").eq(0).text(),this[ze].m_szVideoFormat=(0,g.default)(P).find("videoFormat").eq(0).text(),this[ze].m_iHorizontalResolution=parseInt((0,g.default)(P).find("HorizontalResolution").eq(0).text(),10),this[ze].m_iVerticalResolution=parseInt((0,g.default)(P).find("VerticalResolution").eq(0).text(),10);var Oe=[];(0,g.default)(P).find("DetectionRegion").each(function(){for(var L=[],re=0,J=(0,g.default)(this).find("positionX").length;re<J;re++){var De=Math.round((0,g.default)(this).find("positionX").eq(re).text())*me[ze].m_iCanvasWidth/me[ze].m_iHorizontalResolution,Ye=(me[ze].m_iVerticalResolution-Math.round((0,g.default)(this).find("positionY").eq(re).text()))*me[ze].m_iCanvasHeight/me[ze].m_iVerticalResolution;L.push([De,Ye])}L.length>0&&!(L[0][0]===0&&L[1][0]===0&&L[2][0]===0&&L[3][0]===0)&&Oe.push({aPoint:L,iEditType:me[ze].m_szDisplayMode==="transparent"?1:0,szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.3})}),this[ze].setShapesInfoByType("Rect",Oe)}else if((0,g.default)(P).find("MoveDetection").length>0){this[ze].setShapeType("Grid");var N=parseInt((0,g.default)(P).find("columnGranularity").eq(0).text(),10),fe=parseInt((0,g.default)(P).find("rowGranularity").eq(0).text(),10),I=(0,g.default)(P).find("gridMap").eq(0).text();this[ze].setShapesInfoByType("Grid",[{szGridMap:I,iGridColNum:N,iGridRowNum:fe}])}return 0}},{key:"JS_GetRegionInfo",value:function(){if(!this[ze])return"";var ee=this[ze].getShapeType(),me='<?xml version="1.0" encoding="utf-8"?>';if(ee==="Rect"){me+="<DetectionRegionInfo>",me+="<videoFormat>"+this[ze].m_szVideoFormat+"</videoFormat><RegionType>roi</RegionType>",me+="<ROI><HorizontalResolution>"+this[ze].m_iHorizontalResolution+"</HorizontalResolution><VerticalResolution>"+this[ze].m_iVerticalResolution+"</VerticalResolution></ROI>",me+="<DisplayMode>"+this[ze].m_szDisplayMode+"</DisplayMode><MaxRegionNum>"+this[ze].getMaxShapeSupport()+"</MaxRegionNum>",me+="<DetectionRegionList>";for(var P=this[ze].getShapesInfoByType("Rect"),Y=0,Oe=P.length;Y<Oe;Y++){var N=P[Y].aPoint;me+="<DetectionRegion><RegionCoordinatesList>",me+="<RegionCoordinates><positionX>"+Math.round(N[3][0]*this[ze].m_iHorizontalResolution/this[ze].m_iCanvasWidth)+"</positionX><positionY>"+(this[ze].m_iVerticalResolution-Math.round(N[3][1]*this[ze].m_iVerticalResolution/this[ze].m_iCanvasHeight))+"</positionY></RegionCoordinates>",me+="<RegionCoordinates><positionX>"+Math.round(N[2][0]*this[ze].m_iHorizontalResolution/this[ze].m_iCanvasWidth)+"</positionX><positionY>"+(this[ze].m_iVerticalResolution-Math.round(N[2][1]*this[ze].m_iVerticalResolution/this[ze].m_iCanvasHeight))+"</positionY></RegionCoordinates>",me+="<RegionCoordinates><positionX>"+Math.round(N[1][0]*this[ze].m_iHorizontalResolution/this[ze].m_iCanvasWidth)+"</positionX><positionY>"+(this[ze].m_iVerticalResolution-Math.round(N[1][1]*this[ze].m_iVerticalResolution/this[ze].m_iCanvasHeight))+"</positionY></RegionCoordinates>",me+="<RegionCoordinates><positionX>"+Math.round(N[0][0]*this[ze].m_iHorizontalResolution/this[ze].m_iCanvasWidth)+"</positionX><positionY>"+(this[ze].m_iVerticalResolution-Math.round(N[0][1]*this[ze].m_iVerticalResolution/this[ze].m_iCanvasHeight))+"</positionY></RegionCoordinates>",me+="</RegionCoordinatesList></DetectionRegion>"}me+="</DetectionRegionList>",me+="</DetectionRegionInfo>"}else if(ee==="Grid"){var fe=this[ze].getShapesInfoByType("Grid")[0];fe||(fe={iGridRowNum:18,iGridColNum:22,szGridMap:""}),me+="<MoveDetection><videoFormat>PAL</videoFormat><RegionType>grid</RegionType>",me+="<Grid><rowGranularity>"+fe.iGridRowNum+"</rowGranularity><columnGranularity>"+fe.iGridColNum+"</columnGranularity></Grid>",me+="<DisplayMode>transparent</DisplayMode>",me+="<gridMap>"+fe.szGridMap+"</gridMap></MoveDetection>"}return me}},{key:"JS_SetDrawStatus",value:function(ee){return this[ze]?(this[ze].setDrawStatus(ee),0):-1}},{key:"JS_ClearRegion",value:function(){return this[ze]?(this[ze].clearAllShape(),0):-1}},{key:"JS_GetTextOverlay",value:function(){if(!this[ze])return"";var ee='<?xml version="1.0" encoding="utf-8"?>';ee+="<OSD>",ee+="<videoResolutionWidth>"+this[ze].m_iHorizontalResolution+"</videoResolutionWidth>",ee+="<videoResolutionHeight>"+this[ze].m_iVerticalResolution+"</videoResolutionHeight>";for(var me="",P="",Y="",Oe=this[ze].getShapesInfoByType("RectOSD"),N=0,fe=Oe.length;N<fe;N++){var I=Oe[N],L=Math.round(I.iPositionX*this[ze].m_iHorizontalResolution/this[ze].m_iCanvasWidth),re=Math.round(I.iPositionY*this[ze].m_iVerticalResolution/this[ze].m_iCanvasHeight);I.szOSDType==="overlay-date"?(me+="<DateTimeOverlay><Type>"+I.szDateStyle+"</Type>",me+="<clockType>"+I.szClockType+"</clockType>",me+="<displayWeek>"+I.szDisplayWeek+"</displayWeek>",me+="<enabled>"+I.szEnabled+"</enabled>",me+="<alignment>"+I.szAlignment+"</alignment>",me+="<positionX>"+L+"</positionX><positionY>"+re+"</positionY></DateTimeOverlay>"):I.szOSDType==="overlay-ch"?(P+="<channelNameOverlay><enabled>"+I.szEnabled+"</enabled>",P+="<ChannelName>"+I.szText+"</ChannelName>",P+="<alignment>"+I.szAlignment+"</alignment>",P+="<positionX>"+L+"</positionX><positionY>"+re+"</positionY></channelNameOverlay>"):I.szOSDType==="overlay-text"&&(Y+="<TextOverlay><id>"+I.szId+"</id><enabled>"+I.szEnabled+"</enabled>",Y+="<alignment>"+I.szAlignment+"</alignment>",Y+="<displayText>"+I.szText+"</displayText>",Y+="<positionX>"+L+"</positionX><positionY>"+re+"</positionY></TextOverlay>")}return ee+=me,ee+=P,ee+="<TextOverlayList>",ee+=Y,ee+="</TextOverlayList>",ee+="</OSD>",ee}},{key:"JS_SetTextOverlay",value:function(ee){var me=this;this[ze].setMaxShapeSupport(20);var P=d.oTool.parseXmlFromStr(ee);if(this[ze].clearShapeByType("RectOSD"),(0,g.default)(P).find("OSD").length>0){if(this[ze].setDrawStyle("#ff0000","#343434",.7),this[ze].m_iHorizontalResolution=parseInt((0,g.default)(P).find("videoResolutionWidth").eq(0).text(),10),this[ze].m_iVerticalResolution=parseInt((0,g.default)(P).find("videoResolutionHeight").eq(0).text(),10),(0,g.default)(P).find("channelNameOverlay").length>0){var Y=(0,g.default)(P).find("channelNameOverlay").eq(0),Oe=(0,g.default)(Y).find("ChannelName").eq(0).text(),N=(0,g.default)(Y).find("enabled").eq(0).text(),fe=Math.round((0,g.default)(Y).find("positionX").eq(0).text())*this[ze].m_iCanvasWidth/this[ze].m_iHorizontalResolution,I=Math.round((0,g.default)(Y).find("positionY").eq(0).text())*this[ze].m_iCanvasHeight/this[ze].m_iVerticalResolution,L=(0,g.default)(Y).find("alignment").eq(0).text()||"0";this[ze].addOSDShape(Oe,N,fe,I,{szOSDType:"overlay-ch",szAlignment:L})}if((0,g.default)(P).find("DateTimeOverlay").length>0){var re=(0,g.default)(P).find("DateTimeOverlay").eq(0),J=(0,g.default)(re).find("enabled").eq(0).text(),De=(0,g.default)(re).find("Type").eq(0).text()||(0,g.default)(re).find("type").eq(0).text(),Ye=(0,g.default)(re).find("displayWeek").eq(0).text(),et=(0,g.default)(re).find("clockType").eq(0).text(),R="",He="",G=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ge=new Date;switch(Ye==="true"&&(He=G[ge.getDay()]),et==="24hour"?et="":et="AM/PM",De){case"0":R="YYYY-MM-DD "+He+" hh:mm:ss "+et;break;case"1":R="MM-DD-YYYY "+He+" hh:mm:ss "+et;break;case"2":R="CHR-YYYY-MM-DD "+He+" hh:mm:ss "+et;break;case"3":R="CHR-MM-DD-YYYY "+He+" hh:mm:ss "+et;break;case"4":R="DD-MM-YYYY "+He+" hh:mm:ss "+et;break;case"5":R="CHR-DD-MM-YYYY "+He+" hh:mm:ss "+et;break}var xe=Math.round((0,g.default)(re).find("positionX").eq(0).text())*this[ze].m_iCanvasWidth/this[ze].m_iHorizontalResolution,ke=Math.round((0,g.default)(re).find("positionY").eq(0).text())*this[ze].m_iCanvasHeight/this[ze].m_iVerticalResolution,ce=(0,g.default)(re).find("alignment").eq(0).text()||"0";this[ze].addOSDShape(R,J,xe,ke,{szOSDType:"overlay-date",szDateStyle:De,szDisplayWeek:Ye,szClockType:et,szAlignment:ce})}(0,g.default)(P).find("TextOverlayList").length>0&&(0,g.default)(P).find("TextOverlayList").eq(0).find("TextOverlay").each(function(){var X=(0,g.default)(this).find("displayText").eq(0).text(),Be=(0,g.default)(this).find("enabled").eq(0).text(),lt=(0,g.default)(this).find("id").eq(0).text(),dt=Math.round((0,g.default)(this).find("positionX").eq(0).text())*me[ze].m_iCanvasWidth/me[ze].m_iHorizontalResolution,Lt=Math.round((0,g.default)(this).find("positionY").eq(0).text())*me[ze].m_iCanvasHeight/me[ze].m_iVerticalResolution,qt=(0,g.default)(this).find("alignment").eq(0).text()||"0";me[ze].addOSDShape(X,Be,dt,Lt,{szOSDType:"overlay-text",szId:lt,szAlignment:qt})})}return 0}},{key:"JS_ClearSnapInfo",value:function(ee){return this[ze]?(ee===0?this[ze].clearShapeByType("Rect"):ee===1?this[ze].clearShapeByType("Polygon"):ee===2?this[ze].clearShapeByType("Line"):ee===3?(this[ze].clearShapeByType("Rect"),this[ze].clearShapeByType("Polygon")):ee===5?this[ze].clearShapeByType("Point"):this[ze].clearAllShape(),0):-1}},{key:"JS_ClearTargetPolygon",value:function(ee){var me=d.oTool.parseXmlFromStr(ee),P=this[ze].getAllShapesInfo(),Y=P.length;if(Y>0)for(var Oe=0;Oe<Y;Oe++){var N=(0,g.default)(me).find("id").eq(0).text();if(P[Oe].szType==="Polygon"&&P[Oe].szId===N){this[ze].deleteShape(Oe);break}}}},{key:"JS_SetSnapPolygonInfo",value:function(ee){var me=this;this[ze].setShapeType("Polygon"),this[ze].setMaxShapeSupport(20),this[ze].setDrawStyle("#FFFF00","#FFFF00",.1);var P=d.oTool.parseXmlFromStr(ee),Y=this[ze].getAllShapesInfo(),Oe=Y.length;if(Oe>0)for(var N=0;N<Oe;N++){var fe=(0,g.default)(P).find("id").eq(0).text();if(Y[N].szType==="Polygon"&&Y[N].szId===fe){this[ze].deleteShape(N);break}}var I=[];return(0,g.default)(P).find("SnapPolygonList").length>0&&(0,g.default)(P).find("SnapPolygonList").eq(0).find("SnapPolygon").each(function(){var L=(0,g.default)(this).find("id").eq(0).text(),re=parseInt((0,g.default)(this).find("polygonType").eq(0).text()||"1",10),J=(0,g.default)(this).find("Tips").eq(0).text()||(0,g.default)(this).find("tips").eq(0).text(),De=parseInt((0,g.default)(this).find("MinClosed").eq(0).text(),10),Ye=parseInt((0,g.default)(this).find("PointNumMax").eq(0).text(),10),et=parseInt((0,g.default)(this).find("EditType").eq(0).text(),10)||parseInt((0,g.default)(this).find("editType").eq(0).text(),10)||0,R=(0,g.default)(this).find("isClosed").eq(0).text()==="true",He="rgb("+(0,g.default)(this).find("r").eq(0).text()+","+(0,g.default)(this).find("g").eq(0).text()+","+(0,g.default)(this).find("b").eq(0).text()+")",G=He,ge=.1,xe=parseInt((0,g.default)(this).find("RedrawMode").eq(0).text(),10)||0,ke=[];(0,g.default)(this).find("pointList").eq(0).find("point").each(function(ce){ke[ce]=[],ke[ce][0]=Math.round((0,g.default)(this).find("x").eq(0).text()*me[ze].m_iCanvasWidth),ke[ce][1]=Math.round((0,g.default)(this).find("y").eq(0).text()*me[ze].m_iCanvasHeight)}),ke.length>0?(I.push({szId:L,iPolygonType:re,iMinClosed:De,iMaxPointNum:Ye,iEditType:et,aPoint:ke,bClosed:R,szTips:J,szDrawColor:He,szFillColor:G,iTranslucent:ge,iRedrawMode:xe}),me[ze].setDrawStatus(!1)):(me[ze].setCurrentShapeInfo({szId:L,szTips:J,iMinClosed:De,iMaxPointNum:Ye,iPolygonType:re,szDrawColor:He,szFillColor:G,iTranslucent:ge,iRedrawMode:xe}),me[ze].setDrawStatus(!0))}),I.length>0&&this[ze].setShapesInfoByType("Polygon",I),0}},{key:"JS_GetSnapPolygonInfo",value:function(){for(var ee="<?xml version='1.0' encoding='utf-8'?><SnapPolygonList>",me=this[ze].getShapesInfoByType("Polygon"),P=0,Y=me.length;P<Y;P++){var Oe=me[P];ee+="<SnapPolygon>",ee+="<id>"+Oe.szId+"</id>",ee+="<polygonType>"+Oe.iPolygonType+"</polygonType>",ee+="<color>";var N=Oe.szDrawColor.substring(4,Oe.szDrawColor.length-1).split(",");ee+="<r>"+N[0]+"</r>",ee+="<g>"+N[1]+"</g>",ee+="<b>"+N[2]+"</b>",ee+="</color>",ee+="<tips>"+Oe.szTips+"</tips>",ee+="<isClosed>"+Oe.bClosed+"</isClosed>";var fe=Oe.aPoint;ee+="<pointList>";for(var I=0,L=fe.length;I<L;I++)ee+="<point><x>"+(fe[I][0]/this[ze].m_iCanvasWidth).toFixed(6)+"</x><y>"+(fe[I][1]/this[ze].m_iCanvasHeight).toFixed(6)+"</y></point>";ee+="</pointList>",ee+="</SnapPolygon>"}return ee+="</SnapPolygonList>",ee}},{key:"JS_SetSnapDrawMode",value:function(ee,me){var P=this;return this[ze]?(this[ze].setDrawMutiShapeOneTime(!1),ee===0&&me===3&&P[ze].setDrawStatus(!1),0):-1}},{key:"JS_SetSnapLineInfo",value:function(ee){var me=this;this[ze].setShapeType("Line"),this[ze].setMaxShapeSupport(20),this[ze].setDrawStyle("#FFFF00","#FFFF00",.1);var P=d.oTool.parseXmlFromStr(ee),Y=this[ze].getAllShapesInfo(),Oe=Y.length;if(Oe>0)for(var N=0;N<Oe;N++){var fe=(0,g.default)(P).find("id").eq(0).text();if(Y[N].szType==="Line"&&Y[N].szId===fe){this[ze].deleteShape(N);break}}var I=[];return(0,g.default)(P).find("SnapLineList").length>0&&(0,g.default)(P).find("SnapLineList").eq(0).find("SnapLine").each(function(){var L=(0,g.default)(this).find("id").eq(0).text(),re=parseInt((0,g.default)(this).find("LineTypeEx").eq(0).text(),10),J=parseInt((0,g.default)(this).find("CustomType").text()||(0,g.default)(this).find("LineType").text(),10),De=parseInt((0,g.default)(this).find("ArrowType").text()||0,10),Ye=(0,g.default)(this).find("Tips").eq(0).text()||(0,g.default)(this).find("tips").eq(0).text(),et="rgb("+(0,g.default)(this).find("r").eq(0).text()+","+(0,g.default)(this).find("g").eq(0).text()+","+(0,g.default)(this).find("b").eq(0).text()+")",R=[];R[0]=[],R[1]=[],R[0][0]=Math.round((0,g.default)(this).find("StartPos").eq(0).find("x").eq(0).text()*me[ze].m_iCanvasWidth),R[0][1]=Math.round((0,g.default)(this).find("StartPos").eq(0).find("y").eq(0).text()*me[ze].m_iCanvasHeight),R[1][0]=Math.round((0,g.default)(this).find("EndPos").eq(0).find("x").eq(0).text()*me[ze].m_iCanvasWidth),R[1][1]=Math.round((0,g.default)(this).find("EndPos").eq(0).find("y").eq(0).text()*me[ze].m_iCanvasHeight),R.length>0&&(I.push({szId:L,iLineType:re,aPoint:R,szTips:Ye,iDirection:J,iArrowType:De,szDrawColor:et}),me[ze].setDrawStatus(!1))}),I.length>0&&this[ze].setShapesInfoByType("Line",I),0}},{key:"JS_GetSnapLineInfo",value:function(){for(var ee=this,me="<?xml version='1.0' encoding='utf-8'?><SnapLineList>",P=this[ze].getShapesInfoByType("Line"),Y=0,Oe=P.length;Y<Oe;Y++){me+="<SnapLine>",me+="<id>"+P[Y].szId+"</id>",me+="<LineTypeEx>"+P[Y].iLineType+"</LineTypeEx>",me+="<CustomType>0</CustomType><MoveChange>0</MoveChange><ArrowType>"+P[Y].iArrowType+"</ArrowType>",me+="<tips>"+P[Y].szTips+"</tips>";var N=P[Y].aPoint;me+="<StartPos><x>"+(N[0][0]/ee[ze].m_iCanvasWidth).toFixed(6)+"</x><y>"+(N[0][1]/ee[ze].m_iCanvasHeight).toFixed(6)+"</y></StartPos>",me+="<EndPos><x>"+(N[1][0]/ee[ze].m_iCanvasWidth).toFixed(6)+"</x><y>"+(N[1][1]/ee[ze].m_iCanvasHeight).toFixed(6)+"</y></EndPos>",me+="<LineSelected>false</LineSelected>",P[Y].aCrossArrowPoint.length>0&&(me+="<PDCArrow><Sp_x>"+(P[Y].aCrossArrowPoint[0][0]/ee[ze].m_iCanvasWidth).toFixed(6)+"</Sp_x>",me+="<Sp_y>"+(P[Y].aCrossArrowPoint[0][1]/ee[ze].m_iCanvasWidth).toFixed(6)+"</Sp_y>",me+="<Ep_x>"+(P[Y].aCrossArrowPoint[1][0]/ee[ze].m_iCanvasWidth).toFixed(6)+"</Ep_x>",me+="<Ep_y>"+(P[Y].aCrossArrowPoint[1][1]/ee[ze].m_iCanvasWidth).toFixed(6)+"</Ep_y></PDCArrow>"),me+="<PDCShowMark>false</PDCShowMark>";var fe=P[Y].szDrawColor.split(",")[0].split("(")[1],I=P[Y].szDrawColor.split(",")[1],L=P[Y].szDrawColor.split(",")[2].split(")")[0];me+="<color><r>"+(fe||"255")+"</r><g>"+(I||"255")+"</g><b>"+(L||"0")+"</b></color>",me+="</SnapLine>"}return me+="</SnapLineList>",me}},{key:"JS_GetSnapPointInfo",value:function(){return""}},{key:"JS_SelectShapeById",value:function(ee,me){return ee?(this[ze].selectShapeById(ee,me),0):-1}},{key:"JS_DeleteChoosedShape",value:function(){var ee=this[ze].getAllShapesInfo(),me=ee.length;if(me>0){for(var P=0;P<me;P++)if(ee[P].bChoosed)return this[ze].deleteShape(P),ee[P].szId;return""}return""}},{key:"JS_SetSnapPointInfo",value:function(ee){var me=this,P=d.oTool.parseXmlFromStr(ee);if((0,g.default)(P).find("mode").eq(0).text()==="1"){var Y=(0,g.default)(P).find("id").eq(0).text(),Oe="rgb("+(0,g.default)(P).find("r").eq(0).text()+","+(0,g.default)(P).find("g").eq(0).text()+","+(0,g.default)(P).find("b").eq(0).text()+")";this[ze].setShapeType("Point"),this[ze].setDrawStatus(!0),this[ze].setMaxShapeSupport(12),me[ze].setCurrentShapeInfo({szId:Y,szDrawColor:Oe,iTranslucent:1})}else{var N=[];this[ze].clearShapeByType("Point"),this[ze].setMaxShapeSupport(12),this[ze].setDrawStatus(!1),(0,g.default)(P).find("SnapPointList").length>0&&(0,g.default)(P).find("SnapPointList").eq(0).find("SnapPoint").each(function(){var fe=(0,g.default)(this).find("id").eq(0).text(),I="rgb("+(0,g.default)(this).find("r").eq(0).text()+","+(0,g.default)(this).find("g").eq(0).text()+","+(0,g.default)(this).find("b").eq(0).text()+")",L=[];L[0]=[],L[0][0]=Math.round((0,g.default)(this).find("positionX").eq(0).text()*me[ze].m_iCanvasWidth),L[0][1]=Math.round((0,g.default)(this).find("positionY").eq(0).text()*me[ze].m_iCanvasHeight),L.length>0&&N.push({szId:fe,aPoint:L,szDrawColor:I,iTranslucent:1})}),N.length>0&&this[ze].setShapesInfoByType("Point",N)}return 0}},{key:"JS_FullScreenDisplay",value:function(ee){var me=this;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var P=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,Oe=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);Oe&&(P=P*2,Y=Y*2,me.oJSPlugin.find("."+me[se].szId+"parent-wnd").eq(0).css({width:P,height:Y,"z-index":1e4}));var N=document.body;N=(0,g.default)("#"+me[se].szId).find("canvas#"+me[se].szId+"canvas0")[0];var fe="";P>=Y?(fe+="width:"+P+"px;",fe+="height:"+Y+"px;",fe+="-webkit-transform: none",fe+="-webkit-transform-origin: 0 0;",fe+="transform-origin: 0 0;"):(fe+="width:"+Y+"px;",fe+="height:"+P+"px;",fe+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",fe+="-webkit-transform-origin: "+P/2+"px "+P/2+"px;",fe+="transform-origin: "+P/2+"px "+P/2+"px;"),fe+="position: fixed;top: 0;left: 0;z-index:10",N.style.cssText=fe,this[wi]=ee}else{if(ee){var I=me.oJSPlugin.get(0);I.requestFullScreen?I.requestFullScreen():I.webkitRequestFullScreen?I.webkitRequestFullScreen():I.mozRequestFullScreen?I.mozRequestFullScreen():I.msRequestFullscreen?I.msRequestFullscreen():I.oRequestFullscreen&&I.oRequestFullscreen()}this[wi]=ee}}},{key:"JS_CancelFullScreenDisplay",value:function(){var ee=this;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var me=(0,g.default)("."+ee[se].szId+"parent-wnd").parent().eq(0).width(),P=(0,g.default)("."+ee[se].szId+"parent-wnd").parent().eq(0).height(),Y=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);Y&&(me=me*2,P=P*2,ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).css({width:me,height:P,"z-index":0}));var Oe=document.body;Oe=(0,g.default)("#"+ee[se].szId).find("canvas#"+ee[se].szId+"canvas0")[0];var N="";me>=P?(N+="width:"+me+"px;",N+="height:"+P+"px;",N+="-webkit-transform: none",N+="-webkit-transform-origin: 0 0;",N+="transform-origin: 0 0;"):(N+="width:"+P+"px;",N+="height:"+me+"px;",N+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",N+="-webkit-transform-origin: "+me/2+"px "+me/2+"px;",N+="transform-origin: "+me/2+"px "+me/2+"px;"),Oe.style.cssText=N}else{if(ee.oJSPlugin.find("."+ee[se].szId+"parent-wnd").eq(0).width()===(0,g.default)(window).width())return;document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()}this[ui]=null,this[wi]=!1}},{key:"JS_FullScreenSingle",value:function(ee){var me=this;if(me[Te][ee].bPlay){var P=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1,Y=me.oJSPlugin.find("."+me[se].szId+"parent-wnd").eq(0).children().eq(ee).get(0);if(!P)Y.requestFullScreen?Y.requestFullScreen():Y.webkitRequestFullScreen?Y.webkitRequestFullScreen():Y.mozRequestFullScreen&&Y.mozRequestFullScreen(),me[ui]=me.oJSPlugin.find("."+me[se].szId+"parent-wnd").eq(0).children().eq(ee);else{if(me.oJSPlugin.find("."+me[se].szId+"parent-wnd").eq(0).width()===(0,g.default)(window).width())return;document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen(),me[ui]=null,me[wi]=!1}}}},{key:"JS_StartDownload",value:function(ee,me,P,Y){var Oe=(0,g.default)(d.oTool.parseXmlFromStr(Y)).find("playbackURI").eq(0).text(),N=ee+"?playbackURI="+Oe,fe=".mp4";ee.indexOf("picture/Streaming/tracks")>0&&(N=ee,fe=".jpg");var I=N.indexOf("&name=")+6,L=N.indexOf("&size=");return P=N.substring(I,L),(0,g.default)("body").append('<a id="jsplugin_download_a" href="'+N+'" download='+P+fe+'><li id="jsplugin_download_li"></li></a>'),(0,g.default)("#jsplugin_download_li").trigger("click"),(0,g.default)("#jsplugin_download_a").remove(),0}},{key:"JS_Resize",value:function(ee,me,P){var Y=this,Oe=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);Oe&&(ee=ee*2,me=me*2);var N=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1;this[wi]&&N?(ee=(0,g.default)(window).width(),me=(0,g.default)(window).height(),Y.oJSPlugin.css({width:ee,height:me})):Y.oJSPlugin.css({width:Oe?ee/2:ee,height:Oe?me/2:me});var fe=document.body;fe=(0,g.default)("#"+Y[se].szId).find("canvas#"+Y[se].szId+"canvas0")[0];var I="";if(I+="width:"+ee+"px;",I+="height:"+me+"px;",I+="-webkit-transform: none;",I+="-webkit-transform-origin: 0 0;",I+="transform-origin: 0 0;",I+="z-index: 0;",fe.style.cssText=I,Oe){var L=document.body;L=(0,g.default)("#"+Y[se].szId).find("canvas#"+Y[se].szId+"canvas_draw0")[0];var re="";re+="width:"+ee+"px;",re+="height:"+me+"px;",re+="position:absolute; top:0; left:0; z-index:999;",L.style.cssText=re,this.b3DZoom&&((0,g.default)("."+Y[se].szId+"draw-window").unbind(),Y[ze]=new y.ESCanvas(Y[se].szId+"canvas_draw0",P||!1),Y[ze].setShapeType("Rect"),Y[ze].setDrawStyle("#ff0000","",0),Y[ze].setDrawStatus(!0,function(De){Y[Ke](De)}))}if(this[se].iWidth=ee,this[se].iHeight=me,this.iWidth=ee,this.iHeight=me,d.oTool.isFirefox())for(var J=0;J<Y[se].iMaxSplit*Y[se].iMaxSplit;J++)Y[Te][J].oPlayCtrl&&Y[Te][J].oPlayCtrl.PlayM4_ClearCanvas();Y.updateWnd(),Y[ui]&&N&&(ee=(0,g.default)(window).width(),me=(0,g.default)(window).height(),Y[ui].css({width:ee,height:me}),Y[ui].find("."+Y[se].szId+"play-window").attr("width",ee),Y[ui].find("."+Y[se].szId+"play-window").attr("height",me),Y[ui].find("."+Y[se].szId+"draw-window").attr("width",ee-2),Y[ui].find("."+Y[se].szId+"draw-window").attr("height",me-2)),N||(Y[ui]=null,Y[wi]=!1),Y[ze]&&(Y[ze].resizeCanvas&&Y[ze].resizeCanvas(),Y[ze].canvasRedraw&&Y[ze].canvasRedraw())}},{key:"JS_WndCreate",value:function(ee,me,P){var Y=this;Y.createWindows(me,P),this[ze].updateCanvas(Y[se].szId+"canvas_draw0"),this[ze].clearAllShape(),ee===0?Y.oJSPlugin.hide():Y.oJSPlugin.show(),Y.EventCallback.windowEventSelect(0),Y.initEvent(),Y[di]=null}},{key:"JS_ExportDeviceConfig",value:function(ee){return(0,g.default)("body").append('<a id="jsplugin_download_a" href="'+ee+'"><li id="jsplugin_download_li"></li></a>'),(0,g.default)("#jsplugin_download_li").trigger("click"),(0,g.default)("#jsplugin_download_a").remove(),0}},{key:"JS_OpenFileBrowser",value:function(ee,me,P,Y,Oe){var N=this;N[di]=null;var fe=window.document.createElement("input");fe.type="file",me.toLowerCase()==="bmp"&&(fe.accept="image/bmp",fe.style.display="none",(0,g.default)("body").append(fe)),ee===0&&fe.setAttribute("webkitdirectory",""),fe.addEventListener("change",function(){ee===1?(N[di]=fe.files[0],P[Y]=fe.files[0].name,Oe&&Oe.$digest(function(){P[Y]=fe.files[0].name})):ee===0&&(N[di]=fe.files)});var I=document.createEvent("MouseEvents");I.that.initEvent("click",!0,!0),fe.dispatchEvent(I)}},{key:"JS_UploadFile",value:function(ee,me,P,Y){var Oe=this,N=0,fe=new XMLHttpRequest;return fe.onreadystatechange=function(){fe.readyState===4&&fe.status!==200&&(N=-1)},fe.open("put",ee,!1),fe.setRequestHeader("Content-Type",Y),fe.send(Oe[di]),N}},{key:"JS_StartAsynUpload",value:function(ee){var me=this,P=new XMLHttpRequest;return P.onreadystatechange=function(){P.readyState===4&&(me[zi]=P.responseText)},P.open("put",ee,!0),P.send(me[di]),0}},{key:"JS_StopAsynUpload",value:function(){var ee=this;ee[zi]=""}},{key:"JS_GetUploadErrorInfo",value:function(){var ee=this;return typeof ee[zi]=="string"&&ee[zi].length>0?ee[zi]:""}},{key:"JS_StartUpgradeEx",value:function(ee,me){var P=this,Y=new Promise(function(Oe,N){if(!ee||!me)return N(),de;P[zi]=0;var fe=new XMLHttpRequest;fe.onreadystatechange=function(){if(fe.readyState===4)if(fe.status===200)P[zi]=100,Oe();else{P[zi]=1;var I=d.oTool.parseXmlFromStr(fe.responseText);(0,g.default)(I).find("subStatusCode").text()==="lowPrivilege"?N(403):N()}},fe.open("put",ee,!0),fe.send(P[di]),P[$e]=me,setTimeout(function(){Oe()},3e3)});return Y}},{key:"JS_UpgradeStatus",value:function(){var ee=this;return ee[zi]===100?0:ee[zi]}},{key:"JS_UpgradeProgress",value:function(){var ee=this,me=0,P=new XMLHttpRequest;return P.onreadystatechange=function(){P.readyState===4&&P.status===200&&(me=parseInt((0,g.default)(d.oTool.parseXmlFromStr(P.responseText)).find("percent").text(),10))},P.open("get",ee[$e],!1),P.send(null),ee[zi]===100?100:me}},{key:"JS_StopUpgrade",value:function(){var ee=this;return ee[di]=null,0}},{key:"JS_ExportDeviceLog",value:function(ee,me){me="Log.txt";var P=[],Y=[];P=P.concat((0,g.default)(ee).find("searchMatchItem").toArray());for(var Oe=0;Oe<P.length;Oe++)Y[Oe]=[],Y[Oe][0]=(0,g.default)(P[Oe]).find("logtime").text().replace("T"," ").replace("Z",""),Y[Oe][1]=(0,g.default)(P[Oe]).find("majortype").text(),Y[Oe][2]=(0,g.default)(P[Oe]).find("minortype").text(),Y[Oe][3]=(0,g.default)(P[Oe]).find("channelid").text(),Y[Oe][4]=(0,g.default)(P[Oe]).find("userName").text(),Y[Oe][5]=(0,g.default)(P[Oe]).find("remoteaddress").text();var N=[];function fe(R){N.push(R);var He=R.slice("");if(/^[\u4e00-\u9fa5]/.test(R))for(var G=0;G<30-He.length*2;G++)N.push(" ");else for(var ge=0;ge<30-He.length;ge++)N.push(" ")}fe(" "),fe((0,g.default)(ee).find("laLogTime").text()),fe((0,g.default)(ee).find("laLogMajorType").text()),fe((0,g.default)(ee).find("laLogMinorType").text()),fe((0,g.default)(ee).find("laLogChannel").text()),fe((0,g.default)(ee).find("laLogRemoteUser").text()),fe((0,g.default)(ee).find("laLogRemoteIP").text()),N.push(`\r
`);for(var I=0;I<Y.length;I++){var L=(I+1).toString();fe(L);for(var re=0;re<6;re++)fe(Y[I][re]);N.push(`\r
`)}N=N.join("");var J=new Blob([N],{type:"text/plain"}),De=(window.URL||window.webkitURL).createObjectURL(J),Ye=window.document.createElement("a");Ye.href=De,Ye.download=me;var et=document.createEvent("MouseEvents");et.that.initEvent("click",!0,!0),Ye.dispatchEvent(et)}},{key:"outCsv",value:function(ee,me,P,Y){for(var Oe="",N="",fe=0;fe<P.length;fe++)N+=(0,g.default)(ee).find(P[fe]).eq(0).text()+",";N=N.slice(0,-1),Oe+=N+`\r
`;for(var I=0;I<Y.length;I++){N="";for(var L=0;L<P.length;L++)N+='"'+Y[I][L]+'",';N.slice(0,N.length-1),Oe+=N+`\r
`}if(Oe!==""){var re="";re+=me;var J="\uFEFF";if(window.navigator.msSaveOrOpenBlob){var De=J+Oe,Ye=new Blob([decodeURIComponent(encodeURI(De))],{type:"data:text/csv;charset=utf-8,"});navigator.msSaveBlob(Ye,re+".csv")}else{J="data:text/csv;charset=utf-8,\uFEFF";var et=J+Oe,R=encodeURI(et),He=document.createElement("a");He.setAttribute("href",R),He.setAttribute("download",re+".csv"),document.body.appendChild(He),He.click()}}}},{key:"JS_ExportReport",value:function(ee,me,P){var Y=this,Oe=new Promise(function(N){var fe=[],I=[],L=(0,g.default)(ee).find("NameList").text().split(",");fe=fe.concat((0,g.default)(ee).find("tDataItem").toArray());for(var re=0;re<fe.length;re++){I[re]=[];for(var J=0;J<L.length;J++)I[re][J]=(0,g.default)(fe[re]).find(L[J]).text(),L[J]==="logtime"&&(I[re][J]=I[re][J].replace("T"," ").replace("Z",""))}var De=[];if(P===1)Y.outCsv(ee,me,L,I);else{var Ye=function(Be){De.push(Be);var lt=Be.slice("");if(/^[\u4e00-\u9fa5]/.test(Be))for(var dt=0;dt<30-lt.length*2;dt++)De.push(" ");else for(var Lt=0;Lt<30-lt.length;Lt++)De.push(" ")};Ye(" ");for(var et=0;et<L.length;et++)Ye((0,g.default)(ee).find(L[et]).eq(0).text());De.push(`\r
`);for(var R=0;R<I.length;R++){var He=(R+1).toString();Ye(He);for(var G=0;G<L.length;G++)Ye(I[R][G]);De.push(`\r
`)}De=De.join("");var ge=void 0;ge=new Blob([De],{type:"text/plain"});var xe=(window.URL||window.webkitURL).createObjectURL(ge),ke=window.document.createElement("a");ke.href=xe,ke.download=me;var ce=document.createEvent("MouseEvents");ce.that.initEvent("click",!0,!0),ke.dispatchEvent(ce)}N()});return Oe}},{key:"JS_GetWndContainer",value:function(ee){var me=this;return ee<0||typeof ee>"u"||ee===null?-1:me.oJSPlugin.find("."+me[se].szId+"parent-wnd").eq(0).children().eq(ee)[0]}},{key:"JS_GetWndStatus",value:function(ee){if(ee<0||typeof ee>"u"||ee===null)return-1;var me={bPlay:this[Te][ee].bPlay,bSound:this[Qe]===ee,bSelect:this[Te][ee].bSelect,iRate:this[Te][ee].iRate};return me}},{key:"JS_SelectWnd",value:function(ee){var me=this;me.oJSPlugin.find("."+me[se].szId+"parent-wnd").eq(0).children().eq(ee).mousedown()}},{key:"JS_PlayWithImg",value:function(ee){var me=this;if(this[se].iType===1){var P=(0,g.default)("#"+me[se].szId+"canvas0"),Y=(0,g.default)("#"+me[se].szId+"canvas0").width(),Oe=(0,g.default)("#"+me[se].szId+"canvas0").height();P.hide();var N=(0,g.default)("#playImg0");N.show(),N.css({width:Y+"px",height:Oe+"px"}),N.attr("src",ee)}}},{key:"JS_SetCanFullScreen",value:function(ee){this[at]=ee}},{key:"JS_OpenPlayerSDKPrintLog",value:function(ee){var me=this;me[Te][ee].oPlayCtrl.PlayM4_OpenPlayerSDKPrintLog(!0)}},{key:"JS_DownloadYUVdata",value:function(ee){var me=this;me[Te][ee].oPlayCtrl.PlayM4_DownloadYUVdata()}},{key:"JS_DownloadPCMdata",value:function(ee){var me=this;me[Te][ee].oPlayCtrl.PlayM4_DownloadPCMdata()}},{key:"_JSPlayM4_GetFrameInfo",value:function(){var ee=this,me=ee[Te][0].oPlayCtrl;return{width:me.nWidth,height:me.nHeight}}},{key:"_JSPlayM4_SetDisplayRegion",value:function(ee,me,P,Y){var Oe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,N=arguments[5],fe=this,I=fe[Te][0].oPlayCtrl;console.log("canvasInfo:",fe.iWidth,fe.iHeight),console.log("canvasW:"+I.nWidth+",canvasH:"+I.nHeight+",left:"+ee+",right:"+me+",top:"+P+",bottom:"+Y),N?fe[Te][0].oPlayCtrl.PlayM4_SetDisplayRegion({left:ee*fe.iWidth/I.nHeight,top:P*fe.iHeight/I.nWidth,right:me*fe.iWidth/I.nHeight,bottom:Y*fe.iHeight/I.nWidth},Oe):fe[Te][0].oPlayCtrl.PlayM4_SetDisplayRegion({left:ee*fe.iWidth/I.nWidth,top:P*fe.iHeight/I.nHeight,right:me*fe.iWidth/I.nWidth,bottom:Y*fe.iHeight/I.nHeight},Oe)}},{key:"_JSPlayM4_SetDisplayFrameData",value:function(ee,me,P,Y,Oe){var N=this;N[Te][0].oPlayCtrl.oSuperRender.SR_DisplayFrameData(ee,me,P,Y,Oe)}},{key:"_JSPlayM4_SetRunTimeInfoCallBackEx",value:function(ee){var me=this;me.EventCallback&&typeof me.EventCallback.setRunTimeInfoCallback=="function"&&ee===1&&(console.log("PlayM4_SetRunTimeInfoCallBackEx 设置实时信息回调","解析模块",ee),me[Te][0].oPlayCtrl.PlayM4_SetRunTimeInfoCallBackEx(ee,me.EventCallback.setRunTimeInfoCallback))}}]),Wt}();return Ut}();window.JSPluginV1=ae,n.JSPluginV1=ae},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.StreamClient=void 0;var l=function(){function p(te,ae){for(var de=0;de<ae.length;de++){var ie=ae[de];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}return function(te,ae,de){return ae&&p(te.prototype,ae),de&&p(te,de),te}}(),d=o(2),c=o(6),E=o(7),C=o(8),y=o(11);function w(p,te){if(!(p instanceof te))throw new TypeError("Cannot call a class as a function")}var g=function(){var p=Symbol("WEBSOCKET"),te=Symbol("GETINDEX"),ae=Symbol("PROTOCOLVERSION"),de=Symbol("CIPHERSUITES"),ie=new c.DirectDeviceCustom,we=new E.DirectDevice,Ve=new C.LiveMedia,ue=new y.LocalService,x=function(){function O(){w(this,O),this[ae]="0.1",this[de]=0,this[p]=[],this.ERRORS={},this[te]=function(ne){for(var Q=-1,ye=0,se=this[p].length;ye<se;ye++)if(this[p][ye].id===ne){Q=ye;break}return Q}}return l(O,[{key:"openStream",value:function(Q,ye,se,Ze){var Qe=!1;Q.indexOf("[")>-1&&(Qe=!0);var M=this,Te=Q.split("://"),ze=Te[0],oi="",wi=7681,ui=1,di=0,zi=!1;if(Qe)oi=Te[1].split("]:")[0]+"]",wi=Math.floor(Te[1].split("]:")[1].split("/")[0]),ui=Math.floor(Te[1].split("]:")[1].split("/")[1]/100),di=Math.floor(Te[1].split("]:")[1].split("/")[1]%100)-1;else{oi=Te[1].split(":")[0],wi=Math.floor(Te[1].split(":")[1].split("/")[0]),ui=Math.floor(Te[1].split(":")[1].split("/")[1]/100),di=Math.floor(Te[1].split(":")[1].split("/")[1]%100)-1;var $e=Te[1].split(":")[1].split("/")[2];$e!==""&&$e==="webSocketVideoCtrlProxy"&&(zi=!0)}ui===0&&(di=0),ye=ye||{};var st="&sessionID=";ye.token&&!ye.playURL&&(st="&token=");var Ke=ye.sessionID||ye.session||(ye.playURL?"":ye.token)||"",Ne=new window.WebSocket(ze+"://"+oi+":"+wi+(ye.mode?"/"+ye.mode:"")+(zi?"/webSocketVideoCtrlProxy":"")+"?version="+M[ae]+"&cipherSuites="+M[de]+st+Ke+(ye.proxy?"&proxy="+ye.proxy:""));Ne.binaryType="arraybuffer";var at=(0,d.v4)(),Ut=-1,Wt=new Promise(function(kt,ee){Ne.onopen=function(){!ye.playURL&&!ye.sessionID&&!ye.deviceSerial&&!ye.token&&(M[p].push(ie.createClientObject(Ne,at,ui,di)),kt(at))},Ne.onmessage=function(me){if(typeof me.data=="string"){var P=JSON.parse(me.data),Y=M[te](at);if(P&&P.version&&P.cipherSuite){if(M[ae]=P.version,M[de]=parseInt(P.cipherSuite,10),P&&P.PKD&&P.rand)M[p].push(Ve.createClientObject(Ne,at,P.PKD,P.rand,ye));else{var Oe="live://"+oi+":"+wi+"/"+ui+"/"+di;M[de]===-1?M[p].push(ue.createClientObject(Ne,at,Oe,ye)):M[p].push(we.createClientObject(Ne,at,Oe))}kt(at);return}if(P&&P.sdp){var N=we.getMediaFromSdp(P.sdp);se({bHead:!0,buf:N})}if(P&&P.cmd&&P.cmd==="end"&&se({type:"exception",cmd:P.cmd}),P&&P.statusString&&(P.statusString.toLowerCase()==="ok"&&M[p][Y].resolve&&M[p][Y].resolve(P),P.statusString.toLowerCase()!=="ok")){var fe=we.getError(P);Y>-1?M[p][Y].reject&&M[p][Y].reject(fe):ee(fe)}P&&P.errorCode&&se(P)}else{var I={},L=new Uint8Array(me.data);if(Ut++,L.byteLength===64||L.byteLength===40){for(var re=-1,J=L.byteLength,De=0;De<J;De++)if(L[De]===73&&L[De+1]===77&&L[De+2]===75&&L[De+3]===72){re=De;break}if(re!==-1){var Ye=L.slice(re,re+40);I={bHead:!0,buf:Ye}}else I={bHead:!1,buf:L};se(I)}else Ut>0&&(I={bHead:!1,buf:L},se(I));L=null,I=null,me=null}},Ne.onclose=function(){for(var me=0,P=M[p].length;me<P;me++)if(M[p][me].id===at){M[p][me].resolve(),M[p].splice(me,1),setTimeout(function(){Ze()},200);break}ee()}});return Wt}},{key:"startPlay",value:function(Q,ye,se){var Ze=this,Qe=this[te](Q);ye&&se&&Ze[ae]==="0.1"&&(ye=ye.replace(/-/g,"").replace(/:/g,""),se=se.replace(/-/g,"").replace(/:/g,""));var M=new Promise(function(Te,ze){if(Qe>-1){Ze[p][Qe].resolve=Te,Ze[p][Qe].reject=ze;var oi=null;!ye||!se?Ze[p][Qe].iCurChannel===0&&Ze[ae]==="0.1"?oi=ie.zeroPlayCmd(Ze[p][Qe].iCurChannel,Ze[p][Qe].iCurStream):Ze[ae]!=="0.1"?Ze[de]===0?oi=Ve.playCmd(Ze[p][Qe]):Ze[de]===1?oi=we.playCmd(Ze[p][Qe].playURL):Ze[de]===-1&&(oi=ue.playCmd(Ze[p][Qe])):oi=ie.playCmd(Ze[p][Qe].iCurChannel,Ze[p][Qe].iCurStream):Ze[ae]!=="0.1"?Ze[de]===0?oi=Ve.playbackCmd(Ze[p][Qe],ye,se):Ze[de]===1?oi=we.playbackCmd(ye,se,Ze[p][Qe].playURL):Ze[de]===-1&&(oi=ue.playbackCmd(Ze[p][Qe],ye,se)):oi=ie.playbackCmd(ye,se,Ze[p][Qe].iCurChannel,Ze[p][Qe].iCurStream),Ze[p][Qe].socket.send(oi),Ze[ae]==="0.1"&&Te()}else Ze[ae]==="0.1"&&ze()});return M}},{key:"singleFrame",value:function(){}},{key:"setPlayRate",value:function(Q,ye){var se=this,Ze=new Promise(function(Qe,M){for(var Te=0,ze=se[p].length;Te<ze;Te++)if(se[p][Te].id===Q)if(se[ae]==="0.1"){console.log("DirectDeviceCustom.playRateCmd:",ye);var oi=ie.playRateCmd(ye);se[p][Te].socket.send(oi),Qe();break}else{se[p][Te].resolve=Qe,se[p][Te].reject=M,console.log("DirectDevice.playRateCmd:",ye);var wi=we.playRateCmd(ye);se[p][Te].socket.send(wi),Qe()}});return Ze}},{key:"seek",value:function(Q,ye,se){var Ze=this,Qe=new Promise(function(M,Te){for(var ze=0,oi=Ze[p].length;ze<oi;ze++)if(Ze[p][ze].id===Q){Ze[p][ze].resolve=M,Ze[p][ze].reject=Te;var wi=Ve.seekCmd(ye,se);Ze[p][ze].socket.send(wi)}});return Qe}},{key:"pause",value:function(Q){var ye=this,se=new Promise(function(Ze,Qe){for(var M=0,Te=ye[p].length;M<Te;M++)if(ye[p][M].id===Q)if(ye[ae]==="0.1"){var ze=ie.pauseCmd();ye[p][M].socket.send(ze),Ze();break}else{ye[p][M].resolve=Ze,ye[p][M].reject=Qe;var oi=we.pauseCmd();ye[p][M].socket.send(oi)}});return se}},{key:"transmission",value:function(Q,ye){var se=this,Ze=new Promise(function(Qe,M){for(var Te=0,ze=se[p].length;Te<ze;Te++)se[p][Te].id===Q&&(se[p][Te].resolve=Qe,se[p][Te].reject=M,se[p][Te].socket.send(ye))});return Ze}},{key:"resume",value:function(Q){var ye=this,se=new Promise(function(Ze,Qe){for(var M=0,Te=ye[p].length;M<Te;M++)if(ye[p][M].id===Q)if(ye[ae]==="0.1"){var ze=ie.resumeCmd();ye[p][M].socket.send(ze),Ze();break}else{ye[p][M].resolve=Ze,ye[p][M].reject=Qe;var oi=we.resumeCmd();ye[p][M].socket.send(oi)}});return se}},{key:"stop",value:function(Q){var ye=this,se=new Promise(function(Ze,Qe){if(!Q)Qe();else{for(var M=-1,Te=0,ze=ye[p].length;Te<ze;Te++)if(ye[p][Te].id===Q){M=Te,ye[p][Te].resolve=Ze,ye[p][Te].socket.close(1e3,"CLOSE");break}M===-1&&Qe()}});return se}},{key:"stopAll",value:function(){var Q=this,ye=new Promise(function(se,Ze){for(var Qe=0,M=Q[p].length;Qe<M;Qe++)Q[p][Qe].socket.close(1e3,"CLOSE");console.log("停止所有流"),se()});return ye}}]),O}();return x}();n.StreamClient=g},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function E(C,y){for(var w=0;w<y.length;w++){var g=y[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(C,g.key,g)}}return function(C,y,w){return y&&E(C.prototype,y),w&&E(C,w),C}}();function d(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}var c=function(){var E=function(){function C(){d(this,C)}return l(C,[{key:"createClientObject",value:function(w,g,p,te){return{socket:w,id:g,iCurChannel:p,iCurStream:te,resolve:null,reject:null}}},{key:"zeroPlayCmd",value:function(w,g){var p=[0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,w+1,0,0,0,g,0,0,4,0];return new Uint8Array(p)}},{key:"playCmd",value:function(w,g){var p=[0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,w,0,0,0,g,0,0,4,0];return new Uint8Array(p)}},{key:"playbackCmd",value:function(w,g,p,te){var ae=w.split("T")[0],de=w.split("T")[1],ie="0"+parseInt(ae.substring(0,4),10).toString(16),we=parseInt(ae.substring(4,6),10),Ve=parseInt(ae.substring(6),10),ue=parseInt(de.substring(0,2),10),x=parseInt(de.substring(2,4),10),O=parseInt(de.substring(4,6),10),ne=g.split("T")[0],Q=g.split("T")[1],ye="0"+parseInt(ne.substring(0,4),10).toString(16),se=parseInt(ne.substring(4,6),10),Ze=parseInt(Q.substring(0,2),10),Qe=parseInt(Q.substring(2,4),10),M=parseInt(Q.substring(4,6),10),Te=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,p,0,0,parseInt(ie.substring(0,2),16),parseInt(ie.substring(2,4),16),0,0,0,we,0,0,0,Ve,0,0,0,ue,0,0,0,x,0,0,0,O,0,0,parseInt(ye.substring(0,2),16),parseInt(ye.substring(2,4),16),0,0,0,se,0,0,0,Ve,0,0,0,Ze,0,0,0,Qe,0,0,0,M,0,0,0,0,0,0,0,0,te,0,0,0];return new Uint8Array(Te)}},{key:"playRateCmd",value:function(w){for(var g=(parseInt(w,10)>>>0).toString(16).toLocaleUpperCase().toString(16),p=g.length;p<8;p++)g="0"+g;for(var te=[0,0,0,0],ae=0,de=g.length;ae<de;ae=ae+2)te[Math.floor(ae/2)]=parseInt(g.substring(ae,ae+2),16);var ie=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,te[0],te[1],te[2],te[3]];return new Uint8Array(ie)}},{key:"pauseCmd",value:function(){var w=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(w)}},{key:"resumeCmd",value:function(){var w=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(w)}}]),C}();return E}();n.DirectDeviceCustom=c},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function w(g,p){for(var te=0;te<p.length;te++){var ae=p[te];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(g,ae.key,ae)}}return function(g,p,te){return p&&w(g.prototype,p),te&&w(g,te),g}}();function d(w,g){if(!(w instanceof g))throw new TypeError("Cannot call a class as a function")}var c=3001,E=3002,C=3003,y=function(){var w=function(){function g(){d(this,g)}return l(g,[{key:"createClientObject",value:function(te,ae,de){return{socket:te,id:ae,playURL:de,resolve:null,reject:null}}},{key:"getMediaFromSdp",value:function(te){for(var ae=te.indexOf("MEDIAINFO=")+10,de=te.slice(ae,ae+80),ie=[],we=0,Ve=de.length/2;we<Ve;we++)ie[we]=parseInt(de.slice(we*2,we*2+2),16);return new Uint8Array(ie)}},{key:"playCmd",value:function(te){var ae={sequence:0,cmd:"realplay",url:te};return JSON.stringify(ae)}},{key:"playbackCmd",value:function(te,ae,de){var ie={sequence:0,cmd:"playback",url:de,startTime:te,endTime:ae};return JSON.stringify(ie)}},{key:"playRateCmd",value:function(te){var ae={sequence:0,cmd:"changespeed",speed:te};return JSON.stringify(ae)}},{key:"pauseCmd",value:function(){var te={sequence:0,cmd:"pause"};return JSON.stringify(te)}},{key:"resumeCmd",value:function(){var te={sequence:0,cmd:"resume"};return JSON.stringify(te)}},{key:"getError",value:function(te){var ae=c;return te&&(parseInt(te.statusCode,10)===6&&te.subStatusCode==="streamLimit"?ae=E:parseInt(te.statusCode,10)===4&&te.subStatusCode==="badAuthorization"&&(ae=C)),{iErrorNum:ae,oError:te}}}]),g}();return w}();n.DirectDevice=y},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.LiveMedia=void 0;var l=function(){function p(te,ae){for(var de=0;de<ae.length;de++){var ie=ae[de];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}return function(te,ae,de){return ae&&p(te.prototype,ae),de&&p(te,de),te}}(),d=o(9),c=y(d),E=o(10),C=y(E);function y(p){return p&&p.__esModule?p:{default:p}}function w(p,te){if(!(p instanceof te))throw new TypeError("Cannot call a class as a function")}var g=function(){var p=function(){function te(){w(this,te)}return l(te,[{key:"createClientObject",value:function(de,ie,we,Ve,ue){var x=C.default.AES.encrypt(new Date().getTime().toString(),C.default.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:C.default.mode.CBC,iv:C.default.enc.Hex.parse("12345678912345671234567891234567"),padding:C.default.pad.Pkcs7}).ciphertext.toString();x.length<64&&(x=x+x);var O=C.default.AES.encrypt(new Date().getTime().toString(),C.default.enc.Hex.parse("12345678912345671234567891234567"),{mode:C.default.mode.CBC,iv:C.default.enc.Hex.parse("12345678912345671234567891234567"),padding:C.default.pad.Pkcs7}).ciphertext.toString();return{socket:de,id:ie,PKD:we,rand:Ve,playURL:ue.playURL||"",auth:ue.auth||"",token:ue.token||"",key:x,iv:O,resolve:null,reject:null}}},{key:"playCmd",value:function(de){var ie={sequence:0,cmd:"realplay",url:de.playURL,key:c.default.encrypt(de.iv+":"+de.key,de.PKD).cipher.split("?")[0],authorization:C.default.AES.encrypt(de.rand+":"+de.auth,C.default.enc.Hex.parse(de.key),{mode:C.default.mode.CBC,iv:C.default.enc.Hex.parse(de.iv),padding:C.default.pad.Pkcs7}).ciphertext.toString(),token:C.default.AES.encrypt(de.token,C.default.enc.Hex.parse(de.key),{mode:C.default.mode.CBC,iv:C.default.enc.Hex.parse(de.iv),padding:C.default.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(ie)}},{key:"playbackCmd",value:function(de,ie,we){var Ve={sequence:0,cmd:"playback",url:de.playURL,key:c.default.encrypt(de.iv+":"+de.key,de.PKD).cipher.split("?")[0],authorization:C.default.AES.encrypt(de.rand+":"+de.auth,C.default.enc.Hex.parse(de.key),{mode:C.default.mode.CBC,iv:C.default.enc.Hex.parse(de.iv),padding:C.default.pad.Pkcs7}).ciphertext.toString(),token:C.default.AES.encrypt(de.token,C.default.enc.Hex.parse(de.key),{mode:C.default.mode.CBC,iv:C.default.enc.Hex.parse(de.iv),padding:C.default.pad.Pkcs7}).ciphertext.toString(),startTime:ie,endTime:we};return JSON.stringify(Ve)}},{key:"seekCmd",value:function(de,ie){var we={sequence:0,cmd:"seek",startTime:de,endTime:ie};return JSON.stringify(we)}}]),te}();return p}();n.LiveMedia=g},function(t,n,o){var l=typeof Symbol=="function"&&Ni(Symbol.iterator)==="symbol"?function(z){return Ni(z)}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":Ni(z)},d;function c(z,H,K){z!=null&&(typeof z=="number"?this.fromNumber(z,H,K):H==null&&typeof z!="string"?this.fromString(z,256):this.fromString(z,H))}function E(){return new c(null)}function C(z,H,K,le,Xe,vt){var bt=H&16383;for(H>>=14;--vt>=0;){var Hi=this[z]&16383,Ht=this[z++]>>14,gi=H*Hi+Ht*bt,Hi=bt*Hi+((gi&16383)<<14)+K[le]+Xe,Xe=(Hi>>28)+(gi>>14)+H*Ht;K[le++]=Hi&268435455}return Xe}c.prototype.am=C,d=28,c.prototype.DB=d,c.prototype.DM=(1<<d)-1,c.prototype.DV=1<<d;var y=52;c.prototype.FV=Math.pow(2,y),c.prototype.F1=y-d,c.prototype.F2=2*d-y;var w="0123456789abcdefghijklmnopqrstuvwxyz",g=[],p,te;for(p=48,te=0;te<=9;++te)g[p++]=te;for(p=97,te=10;te<36;++te)g[p++]=te;for(p=65,te=10;te<36;++te)g[p++]=te;function ae(z){return w.charAt(z)}function de(z,H){var K=g[z.charCodeAt(H)];return K??-1}function ie(z){for(var H=this.t-1;H>=0;--H)z[H]=this[H];z.t=this.t,z.s=this.s}function we(z){this.t=1,this.s=z<0?-1:0,z>0?this[0]=z:z<-1?this[0]=z+DV:this.t=0}function Ve(z){var H=E();return H.fromInt(z),H}function ue(z,H){var K;if(H==16)K=4;else if(H==8)K=3;else if(H==256)K=8;else if(H==2)K=1;else if(H==32)K=5;else if(H==4)K=2;else{this.fromRadix(z,H);return}this.s=this.t=0;for(var le=z.length,Xe=!1,vt=0;--le>=0;){var bt=K==8?z[le]&255:de(z,le);bt<0?z.charAt(le)=="-"&&(Xe=!0):(Xe=!1,vt==0?this[this.t++]=bt:vt+K>this.DB?(this[this.t-1]|=(bt&(1<<this.DB-vt)-1)<<vt,this[this.t++]=bt>>this.DB-vt):this[this.t-1]|=bt<<vt,vt+=K,vt>=this.DB&&(vt-=this.DB))}K==8&&z[0]&128&&(this.s=-1,vt>0&&(this[this.t-1]|=(1<<this.DB-vt)-1<<vt)),this.clamp(),Xe&&c.ZERO.subTo(this,this)}function x(){for(var z=this.s&this.DM;this.t>0&&this[this.t-1]==z;)--this.t}function O(z){if(this.s<0)return"-"+this.negate().toString(z);if(z==16)z=4;else if(z==8)z=3;else if(z==2)z=1;else if(z==32)z=5;else if(z==64)z=6;else if(z==4)z=2;else return this.toRadix(z);var H=(1<<z)-1,K,le=!1,Xe="",vt=this.t,bt=this.DB-vt*this.DB%z;if(vt-- >0)for(bt<this.DB&&(K=this[vt]>>bt)>0&&(le=!0,Xe=ae(K));vt>=0;)bt<z?(K=(this[vt]&(1<<bt)-1)<<z-bt,K|=this[--vt]>>(bt+=this.DB-z)):(K=this[vt]>>(bt-=z)&H,bt<=0&&(bt+=this.DB,--vt)),K>0&&(le=!0),le&&(Xe+=ae(K));return le?Xe:"0"}function ne(){var z=E();return c.ZERO.subTo(this,z),z}function Q(){return this.s<0?this.negate():this}function ye(z){var K=this.s-z.s;if(K!=0)return K;var H=this.t,K=H-z.t;if(K!=0)return K;for(;--H>=0;)if((K=this[H]-z[H])!=0)return K;return 0}function se(z){var H=1,K;return(K=z>>>16)!=0&&(z=K,H+=16),(K=z>>8)!=0&&(z=K,H+=8),(K=z>>4)!=0&&(z=K,H+=4),(K=z>>2)!=0&&(z=K,H+=2),z>>1&&(H+=1),H}function Ze(){return this.t<=0?0:this.DB*(this.t-1)+se(this[this.t-1]^this.s&this.DM)}function Qe(z,H){var K;for(K=this.t-1;K>=0;--K)H[K+z]=this[K];for(K=z-1;K>=0;--K)H[K]=0;H.t=this.t+z,H.s=this.s}function M(z,H){for(var K=z;K<this.t;++K)H[K-z]=this[K];H.t=Math.max(this.t-z,0),H.s=this.s}function Te(z,H){var K=z%this.DB,le=this.DB-K,Xe=(1<<le)-1,vt=Math.floor(z/this.DB),bt=this.s<<K&this.DM,Ht;for(Ht=this.t-1;Ht>=0;--Ht)H[Ht+vt+1]=this[Ht]>>le|bt,bt=(this[Ht]&Xe)<<K;for(Ht=vt-1;Ht>=0;--Ht)H[Ht]=0;H[vt]=bt,H.t=this.t+vt+1,H.s=this.s,H.clamp()}function ze(z,H){H.s=this.s;var K=Math.floor(z/this.DB);if(K>=this.t)H.t=0;else{var le=z%this.DB,Xe=this.DB-le,vt=(1<<le)-1;H[0]=this[K]>>le;for(var bt=K+1;bt<this.t;++bt)H[bt-K-1]|=(this[bt]&vt)<<Xe,H[bt-K]=this[bt]>>le;le>0&&(H[this.t-K-1]|=(this.s&vt)<<Xe),H.t=this.t-K,H.clamp()}}function oi(z,H){for(var K=0,le=0,Xe=Math.min(z.t,this.t);K<Xe;)le+=this[K]-z[K],H[K++]=le&this.DM,le>>=this.DB;if(z.t<this.t){for(le-=z.s;K<this.t;)le+=this[K],H[K++]=le&this.DM,le>>=this.DB;le+=this.s}else{for(le+=this.s;K<z.t;)le-=z[K],H[K++]=le&this.DM,le>>=this.DB;le-=z.s}H.s=le<0?-1:0,le<-1?H[K++]=this.DV+le:le>0&&(H[K++]=le),H.t=K,H.clamp()}function wi(z,H){var K=this.abs(),le=z.abs(),Xe=K.t;for(H.t=Xe+le.t;--Xe>=0;)H[Xe]=0;for(Xe=0;Xe<le.t;++Xe)H[Xe+K.t]=K.am(0,le[Xe],H,Xe,0,K.t);H.s=0,H.clamp(),this.s!=z.s&&c.ZERO.subTo(H,H)}function ui(z){for(var H=this.abs(),K=z.t=2*H.t;--K>=0;)z[K]=0;for(K=0;K<H.t-1;++K){var le=H.am(K,H[K],z,2*K,0,1);(z[K+H.t]+=H.am(K+1,2*H[K],z,2*K+1,le,H.t-K-1))>=H.DV&&(z[K+H.t]-=H.DV,z[K+H.t+1]=1)}z.t>0&&(z[z.t-1]+=H.am(K,H[K],z,2*K,0,1)),z.s=0,z.clamp()}function di(z,H,K){var le=z.abs();if(!(le.t<=0)){var Xe=this.abs();if(Xe.t<le.t)H!=null&&H.fromInt(0),K!=null&&this.copyTo(K);else{K==null&&(K=E());var vt=E(),bt=this.s,z=z.s,Ht=this.DB-se(le[le.t-1]);if(Ht>0?(le.lShiftTo(Ht,vt),Xe.lShiftTo(Ht,K)):(le.copyTo(vt),Xe.copyTo(K)),le=vt.t,Xe=vt[le-1],Xe!=0){var Hi=Xe*(1<<this.F1)+(le>1?vt[le-2]>>this.F2:0),gi=this.FV/Hi,Hi=(1<<this.F1)/Hi,hi=1<<this.F2,Ai=K.t,fi=Ai-le,D=H??E();for(vt.dlShiftTo(fi,D),K.compareTo(D)>=0&&(K[K.t++]=1,K.subTo(D,K)),c.ONE.dlShiftTo(le,D),D.subTo(vt,vt);vt.t<le;)vt[vt.t++]=0;for(;--fi>=0;){var h=K[--Ai]==Xe?this.DM:Math.floor(K[Ai]*gi+(K[Ai-1]+hi)*Hi);if((K[Ai]+=vt.am(0,h,K,fi,0,le))<h)for(vt.dlShiftTo(fi,D),K.subTo(D,K);K[Ai]<--h;)K.subTo(D,K)}H!=null&&(K.drShiftTo(le,H),bt!=z&&c.ZERO.subTo(H,H)),K.t=le,K.clamp(),Ht>0&&K.rShiftTo(Ht,K),bt<0&&c.ZERO.subTo(K,K)}}}}function zi(z){var H=E();return this.abs().divRemTo(z,null,H),this.s<0&&H.compareTo(c.ZERO)>0&&z.subTo(H,H),H}function $e(z){this.m=z}function st(z){return z.s<0||z.compareTo(this.m)>=0?z.mod(this.m):z}function Ke(z){return z}function Ne(z){z.divRemTo(this.m,null,z)}function at(z,H,K){z.multiplyTo(H,K),this.reduce(K)}function Ut(z,H){z.squareTo(H),this.reduce(H)}$e.prototype.convert=st,$e.prototype.revert=Ke,$e.prototype.reduce=Ne,$e.prototype.mulTo=at,$e.prototype.sqrTo=Ut;function Wt(){if(this.t<1)return 0;var z=this[0];if(!(z&1))return 0;var H=z&3,H=H*(2-(z&15)*H)&15,H=H*(2-(z&255)*H)&255,H=H*(2-((z&65535)*H&65535))&65535,H=H*(2-z*H%this.DV)%this.DV;return H>0?this.DV-H:-H}function kt(z){this.m=z,this.mp=z.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<z.DB-15)-1,this.mt2=2*z.t}function ee(z){var H=E();return z.abs().dlShiftTo(this.m.t,H),H.divRemTo(this.m,null,H),z.s<0&&H.compareTo(c.ZERO)>0&&this.m.subTo(H,H),H}function me(z){var H=E();return z.copyTo(H),this.reduce(H),H}function P(z){for(;z.t<=this.mt2;)z[z.t++]=0;for(var H=0;H<this.m.t;++H){var le=z[H]&32767,K=le*this.mpl+((le*this.mph+(z[H]>>15)*this.mpl&this.um)<<15)&z.DM,le=H+this.m.t;for(z[le]+=this.m.am(0,K,z,H,0,this.m.t);z[le]>=z.DV;)z[le]-=z.DV,z[++le]++}z.clamp(),z.drShiftTo(this.m.t,z),z.compareTo(this.m)>=0&&z.subTo(this.m,z)}function Y(z,H){z.squareTo(H),this.reduce(H)}function Oe(z,H,K){z.multiplyTo(H,K),this.reduce(K)}kt.prototype.convert=ee,kt.prototype.revert=me,kt.prototype.reduce=P,kt.prototype.mulTo=Oe,kt.prototype.sqrTo=Y;function N(){return(this.t>0?this[0]&1:this.s)==0}function fe(z,H){if(z>4294967295||z<1)return c.ONE;var K=E(),le=E(),Xe=H.convert(this),vt=se(z)-1;for(Xe.copyTo(K);--vt>=0;)if(H.sqrTo(K,le),(z&1<<vt)>0)H.mulTo(le,Xe,K);else var bt=K,K=le,le=bt;return H.revert(K)}function I(z,H){var K;return K=z<256||H.isEven()?new $e(H):new kt(H),this.exp(z,K)}c.prototype.copyTo=ie,c.prototype.fromInt=we,c.prototype.fromString=ue,c.prototype.clamp=x,c.prototype.dlShiftTo=Qe,c.prototype.drShiftTo=M,c.prototype.lShiftTo=Te,c.prototype.rShiftTo=ze,c.prototype.subTo=oi,c.prototype.multiplyTo=wi,c.prototype.squareTo=ui,c.prototype.divRemTo=di,c.prototype.invDigit=Wt,c.prototype.isEven=N,c.prototype.exp=fe,c.prototype.toString=O,c.prototype.negate=ne,c.prototype.abs=Q,c.prototype.compareTo=ye,c.prototype.bitLength=Ze,c.prototype.mod=zi,c.prototype.modPowInt=I,c.ZERO=Ve(0),c.ONE=Ve(1);function L(){var z=E();return this.copyTo(z),z}function re(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function J(){return this.t==0?this.s:this[0]<<24>>24}function De(){return this.t==0?this.s:this[0]<<16>>16}function Ye(z){return Math.floor(Math.LN2*this.DB/Math.log(z))}function et(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function R(z){if(z==null&&(z=10),this.signum()==0||z<2||z>36)return"0";var H=this.chunkSize(z),H=Math.pow(z,H),K=Ve(H),le=E(),Xe=E(),vt="";for(this.divRemTo(K,le,Xe);le.signum()>0;)vt=(H+Xe.intValue()).toString(z).substr(1)+vt,le.divRemTo(K,le,Xe);return Xe.intValue().toString(z)+vt}function He(z,H){this.fromInt(0),H==null&&(H=10);for(var K=this.chunkSize(H),le=Math.pow(H,K),Xe=!1,vt=0,bt=0,Ht=0;Ht<z.length;++Ht){var gi=de(z,Ht);gi<0?z.charAt(Ht)=="-"&&this.signum()==0&&(Xe=!0):(bt=H*bt+gi,++vt>=K&&(this.dMultiply(le),this.dAddOffset(bt,0),bt=vt=0))}vt>0&&(this.dMultiply(Math.pow(H,vt)),this.dAddOffset(bt,0)),Xe&&c.ZERO.subTo(this,this)}function G(z,H,K){if(typeof H=="number")if(z<2)this.fromInt(1);else for(this.fromNumber(z,K),this.testBit(z-1)||this.bitwiseTo(c.ONE.shiftLeft(z-1),dt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(H);)this.dAddOffset(2,0),this.bitLength()>z&&this.subTo(c.ONE.shiftLeft(z-1),this);else{var K=[],le=z&7;K.length=(z>>3)+1,H.nextBytes(K),le>0?K[0]&=(1<<le)-1:K[0]=0,this.fromString(K,256)}}function ge(){var z=this.t,H=[];H[0]=this.s;var K=this.DB-z*this.DB%8,le,Xe=0;if(z-- >0)for(K<this.DB&&(le=this[z]>>K)!=(this.s&this.DM)>>K&&(H[Xe++]=le|this.s<<this.DB-K);z>=0;)K<8?(le=(this[z]&(1<<K)-1)<<8-K,le|=this[--z]>>(K+=this.DB-8)):(le=this[z]>>(K-=8)&255,K<=0&&(K+=this.DB,--z)),le&128&&(le|=-256),Xe==0&&(this.s&128)!=(le&128)&&++Xe,(Xe>0||le!=this.s)&&(H[Xe++]=le);return H}function xe(z){return this.compareTo(z)==0}function ke(z){return this.compareTo(z)<0?this:z}function ce(z){return this.compareTo(z)>0?this:z}function X(z,H,K){var le,Xe,vt=Math.min(z.t,this.t);for(le=0;le<vt;++le)K[le]=H(this[le],z[le]);if(z.t<this.t){for(Xe=z.s&this.DM,le=vt;le<this.t;++le)K[le]=H(this[le],Xe);K.t=this.t}else{for(Xe=this.s&this.DM,le=vt;le<z.t;++le)K[le]=H(Xe,z[le]);K.t=z.t}K.s=H(this.s,z.s),K.clamp()}function Be(z,H){return z&H}function lt(z){var H=E();return this.bitwiseTo(z,Be,H),H}function dt(z,H){return z|H}function Lt(z){var H=E();return this.bitwiseTo(z,dt,H),H}function qt(z,H){return z^H}function Si(z){var H=E();return this.bitwiseTo(z,qt,H),H}function he(z,H){return z&~H}function Bi(z){var H=E();return this.bitwiseTo(z,he,H),H}function yt(){for(var z=E(),H=0;H<this.t;++H)z[H]=this.DM&~this[H];return z.t=this.t,z.s=~this.s,z}function wt(z){var H=E();return z<0?this.rShiftTo(-z,H):this.lShiftTo(z,H),H}function pt(z){var H=E();return z<0?this.lShiftTo(-z,H):this.rShiftTo(z,H),H}function Dt(z){if(z==0)return-1;var H=0;return!(z&65535)&&(z>>=16,H+=16),!(z&255)&&(z>>=8,H+=8),!(z&15)&&(z>>=4,H+=4),!(z&3)&&(z>>=2,H+=2),!(z&1)&&++H,H}function St(){for(var z=0;z<this.t;++z)if(this[z]!=0)return z*this.DB+Dt(this[z]);return this.s<0?this.t*this.DB:-1}function Et(z){for(var H=0;z!=0;)z&=z-1,++H;return H}function jt(){for(var z=0,H=this.s&this.DM,K=0;K<this.t;++K)z+=Et(this[K]^H);return z}function _t(z){var H=Math.floor(z/this.DB);return H>=this.t?this.s!=0:(this[H]&1<<z%this.DB)!=0}function Xt(z,H){var K=c.ONE.shiftLeft(z);return this.bitwiseTo(K,H,K),K}function ot(z){return this.changeBit(z,dt)}function mi(z){return this.changeBit(z,he)}function Pi(z){return this.changeBit(z,qt)}function Ii(z,H){for(var K=0,le=0,Xe=Math.min(z.t,this.t);K<Xe;)le+=this[K]+z[K],H[K++]=le&this.DM,le>>=this.DB;if(z.t<this.t){for(le+=z.s;K<this.t;)le+=this[K],H[K++]=le&this.DM,le>>=this.DB;le+=this.s}else{for(le+=this.s;K<z.t;)le+=z[K],H[K++]=le&this.DM,le>>=this.DB;le+=z.s}H.s=le<0?-1:0,le>0?H[K++]=le:le<-1&&(H[K++]=this.DV+le),H.t=K,H.clamp()}function ti(z){var H=E();return this.addTo(z,H),H}function Vi(z){var H=E();return this.subTo(z,H),H}function Jt(z){var H=E();return this.multiplyTo(z,H),H}function At(){var z=E();return this.squareTo(z),z}function j(z){var H=E();return this.divRemTo(z,H,null),H}function T(z){var H=E();return this.divRemTo(z,null,H),H}function F(z){var H=E(),K=E();return this.divRemTo(z,H,K),[H,K]}function S(z){this[this.t]=this.am(0,z-1,this,0,0,this.t),++this.t,this.clamp()}function be(z,H){if(z!=0){for(;this.t<=H;)this[this.t++]=0;for(this[H]+=z;this[H]>=this.DV;)this[H]-=this.DV,++H>=this.t&&(this[this.t++]=0),++this[H]}}function _e(){}function Me(z){return z}function Ue(z,H,K){z.multiplyTo(H,K)}function ft(z,H){z.squareTo(H)}_e.prototype.convert=Me,_e.prototype.revert=Me,_e.prototype.mulTo=Ue,_e.prototype.sqrTo=ft;function Gt(z){return this.exp(z,new _e)}function Ft(z,H,K){var le=Math.min(this.t+z.t,H);for(K.s=0,K.t=le;le>0;)K[--le]=0;var Xe;for(Xe=K.t-this.t;le<Xe;++le)K[le+this.t]=this.am(0,z[le],K,le,0,this.t);for(Xe=Math.min(z.t,H);le<Xe;++le)this.am(0,z[le],K,le,0,H-le);K.clamp()}function Ee(z,H,K){--H;var le=K.t=this.t+z.t-H;for(K.s=0;--le>=0;)K[le]=0;for(le=Math.max(H-this.t,0);le<z.t;++le)K[this.t+le-H]=this.am(H-le,z[le],K,0,0,this.t+le-H);K.clamp(),K.drShiftTo(1,K)}function nt(z){this.r2=E(),this.q3=E(),c.ONE.dlShiftTo(2*z.t,this.r2),this.mu=this.r2.divide(z),this.m=z}function Zt(z){if(z.s<0||z.t>2*this.m.t)return z.mod(this.m);if(z.compareTo(this.m)<0)return z;var H=E();return z.copyTo(H),this.reduce(H),H}function bi(z){return z}function Kt(z){for(z.drShiftTo(this.m.t-1,this.r2),z.t>this.m.t+1&&(z.t=this.m.t+1,z.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);z.compareTo(this.r2)<0;)z.dAddOffset(1,this.m.t+1);for(z.subTo(this.r2,z);z.compareTo(this.m)>=0;)z.subTo(this.m,z)}function ri(z,H){z.squareTo(H),this.reduce(H)}function Li(z,H,K){z.multiplyTo(H,K),this.reduce(K)}nt.prototype.convert=Zt,nt.prototype.revert=bi,nt.prototype.reduce=Kt,nt.prototype.mulTo=Li,nt.prototype.sqrTo=ri;function li(z,H){var K=z.bitLength(),le,Xe=Ve(1),vt;if(K<=0)return Xe;le=K<18?1:K<48?3:K<144?4:K<768?5:6,vt=K<8?new $e(H):H.isEven()?new nt(H):new kt(H);var bt=[],Ht=3,gi=le-1,Hi=(1<<le)-1;if(bt[1]=vt.convert(this),le>1)for(K=E(),vt.sqrTo(bt[1],K);Ht<=Hi;)bt[Ht]=E(),vt.mulTo(K,bt[Ht-2],bt[Ht]),Ht+=2;for(var hi=z.t-1,Ai,fi=!0,D=E(),K=se(z[hi])-1;hi>=0;){for(K>=gi?Ai=z[hi]>>K-gi&Hi:(Ai=(z[hi]&(1<<K+1)-1)<<gi-K,hi>0&&(Ai|=z[hi-1]>>this.DB+K-gi)),Ht=le;!(Ai&1);)Ai>>=1,--Ht;if((K-=Ht)<0&&(K+=this.DB,--hi),fi)bt[Ai].copyTo(Xe),fi=!1;else{for(;Ht>1;)vt.sqrTo(Xe,D),vt.sqrTo(D,Xe),Ht-=2;Ht>0?vt.sqrTo(Xe,D):(Ht=Xe,Xe=D,D=Ht),vt.mulTo(D,bt[Ai],Xe)}for(;hi>=0&&!(z[hi]&1<<K);)vt.sqrTo(Xe,D),Ht=Xe,Xe=D,D=Ht,--K<0&&(K=this.DB-1,--hi)}return vt.revert(Xe)}function Mt(K){var H=this.s<0?this.negate():this.clone(),K=K.s<0?K.negate():K.clone();if(H.compareTo(K)<0)var le=H,H=K,K=le;var le=H.getLowestSetBit(),Xe=K.getLowestSetBit();if(Xe<0)return H;for(le<Xe&&(Xe=le),Xe>0&&(H.rShiftTo(Xe,H),K.rShiftTo(Xe,K));H.signum()>0;)(le=H.getLowestSetBit())>0&&H.rShiftTo(le,H),(le=K.getLowestSetBit())>0&&K.rShiftTo(le,K),H.compareTo(K)>=0?(H.subTo(K,H),H.rShiftTo(1,H)):(K.subTo(H,K),K.rShiftTo(1,K));return Xe>0&&K.lShiftTo(Xe,K),K}function Nt(z){if(z<=0)return 0;var H=this.DV%z,K=this.s<0?z-1:0;if(this.t>0)if(H==0)K=this[0]%z;else for(var le=this.t-1;le>=0;--le)K=(H*K+this[le])%z;return K}function ai(z){var H=z.isEven();if(this.isEven()&&H||z.signum()==0)return c.ZERO;for(var K=z.clone(),le=this.clone(),Xe=Ve(1),vt=Ve(0),bt=Ve(0),Ht=Ve(1);K.signum()!=0;){for(;K.isEven();)K.rShiftTo(1,K),H?((!Xe.isEven()||!vt.isEven())&&(Xe.addTo(this,Xe),vt.subTo(z,vt)),Xe.rShiftTo(1,Xe)):vt.isEven()||vt.subTo(z,vt),vt.rShiftTo(1,vt);for(;le.isEven();)le.rShiftTo(1,le),H?((!bt.isEven()||!Ht.isEven())&&(bt.addTo(this,bt),Ht.subTo(z,Ht)),bt.rShiftTo(1,bt)):Ht.isEven()||Ht.subTo(z,Ht),Ht.rShiftTo(1,Ht);K.compareTo(le)>=0?(K.subTo(le,K),H&&Xe.subTo(bt,Xe),vt.subTo(Ht,vt)):(le.subTo(K,le),H&&bt.subTo(Xe,bt),Ht.subTo(vt,Ht))}if(le.compareTo(c.ONE)!=0)return c.ZERO;if(Ht.compareTo(z)>=0)return Ht.subtract(z);if(Ht.signum()<0)Ht.addTo(z,Ht);else return Ht;return Ht.signum()<0?Ht.add(z):Ht}var ji=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],tn=67108864/ji[ji.length-1];function Ui(z){var H,K=this.abs();if(K.t==1&&K[0]<=ji[ji.length-1]){for(H=0;H<ji.length;++H)if(K[0]==ji[H])return!0;return!1}if(K.isEven())return!1;for(H=1;H<ji.length;){for(var le=ji[H],Xe=H+1;Xe<ji.length&&le<tn;)le*=ji[Xe++];for(le=K.modInt(le);H<Xe;)if(le%ji[H++]==0)return!1}return K.millerRabin(z)}function Gi(Xe){var H=this.subtract(c.ONE),K=H.getLowestSetBit();if(K<=0)return!1;var le=H.shiftRight(K),Xe=Xe+1>>1;Xe>ji.length&&(Xe=ji.length);for(var vt=E(),bt=0;bt<Xe;++bt){vt.fromInt(ji[Math.floor(Math.random()*ji.length)]);var Ht=vt.modPow(le,this);if(Ht.compareTo(c.ONE)!=0&&Ht.compareTo(H)!=0){for(var gi=1;gi++<K&&Ht.compareTo(H)!=0;)if(Ht=Ht.modPowInt(2,this),Ht.compareTo(c.ONE)==0)return!1;if(Ht.compareTo(H)!=0)return!1}}return!0}c.prototype.chunkSize=Ye,c.prototype.toRadix=R,c.prototype.fromRadix=He,c.prototype.fromNumber=G,c.prototype.bitwiseTo=X,c.prototype.changeBit=Xt,c.prototype.addTo=Ii,c.prototype.dMultiply=S,c.prototype.dAddOffset=be,c.prototype.multiplyLowerTo=Ft,c.prototype.multiplyUpperTo=Ee,c.prototype.modInt=Nt,c.prototype.millerRabin=Gi,c.prototype.clone=L,c.prototype.intValue=re,c.prototype.byteValue=J,c.prototype.shortValue=De,c.prototype.signum=et,c.prototype.toByteArray=ge,c.prototype.equals=xe,c.prototype.min=ke,c.prototype.max=ce,c.prototype.and=lt,c.prototype.or=Lt,c.prototype.xor=Si,c.prototype.andNot=Bi,c.prototype.not=yt,c.prototype.shiftLeft=wt,c.prototype.shiftRight=pt,c.prototype.getLowestSetBit=St,c.prototype.bitCount=jt,c.prototype.testBit=_t,c.prototype.setBit=ot,c.prototype.clearBit=mi,c.prototype.flipBit=Pi,c.prototype.add=ti,c.prototype.subtract=Vi,c.prototype.multiply=Jt,c.prototype.divide=j,c.prototype.remainder=T,c.prototype.divideAndRemainder=F,c.prototype.modPow=li,c.prototype.modInverse=ai,c.prototype.pow=Gt,c.prototype.gcd=Mt,c.prototype.isProbablePrime=Ui,c.prototype.square=At,function(z,H,K,le,Xe,vt,bt){function Ht(hi){var Ai,fi,D=this,h=hi.length,k=0,V=D.i=D.j=D.m=0;for(D.S=[],D.c=[],h||(hi=[h++]);k<K;)D.S[k]=k++;for(k=0;k<K;k++)Ai=D.S[k],V=V+Ai+hi[k%h]&K-1,fi=D.S[V],D.S[k]=fi,D.S[V]=Ai;D.g=function(ve){var je=D.S,We=D.i+1&K-1,ct=je[We],gt=D.j+ct&K-1,It=je[gt];je[We]=It,je[gt]=ct;for(var xi=je[ct+It&K-1];--ve;)We=We+1&K-1,ct=je[We],gt=gt+ct&K-1,It=je[gt],je[We]=It,je[gt]=ct,xi=xi*K+je[ct+It&K-1];return D.i=We,D.j=gt,xi},D.g(K)}function gi(hi,Ai,fi,D,h){if(fi=[],h=typeof hi>"u"?"undefined":l(hi),Ai&&h=="object"){for(D in hi)if(D.indexOf("S")<5)try{fi.push(gi(hi[D],Ai-1))}catch{}}return fi.length?fi:hi+(h!="string"?"\0":"")}function Hi(hi,Ai,fi,D){for(hi+="",D=fi=0;D<hi.length;D++){var h=Ai,k=D&K-1,V=(fi^=Ai[D&K-1]*19)+hi.charCodeAt(D);h[k]=V&K-1}hi="";for(D in Ai)hi+=String.fromCharCode(Ai[D]);return hi}H.seedrandom=function(h,Ai){var fi=[],D,h=Hi(gi(Ai?[h,z]:arguments.length?h:[new Date().getTime(),z,window],3),fi);return D=new Ht(fi),Hi(D.S,z),H.random=function(){for(var k=D.g(le),V=bt,ve=0;k<Xe;)k=(k+ve)*K,V*=K,ve=D.g(1);for(;k>=vt;)k/=2,V/=2,ve>>>=1;return(k+ve)/V},h},bt=H.pow(K,le),Xe=H.pow(2,Xe),vt=Xe*2,Hi(H.random(),z)}([],Math,256,6,52);function nn(){}function Zi(z){var H;for(H=0;H<z.length;H++)z[H]=Math.floor(Math.random()*256)}nn.prototype.nextBytes=Zi;function Yi(){this.j=this.i=0,this.S=[]}function bn(z){var H,K,le;for(H=0;H<256;++H)this.S[H]=H;for(H=K=0;H<256;++H)K=K+this.S[H]+z[H%z.length]&255,le=this.S[H],this.S[H]=this.S[K],this.S[K]=le;this.j=this.i=0}function vn(){var z;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,z=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=z,this.S[z+this.S[this.i]&255]}Yi.prototype.init=bn,Yi.prototype.next=vn;function jn(){return new Yi}var un=256,Un,Hn,yn;function fn(z){Hn[yn++]^=z&255,Hn[yn++]^=z>>8&255,Hn[yn++]^=z>>16&255,Hn[yn++]^=z>>24&255,yn>=un&&(yn-=un)}function Cn(){fn(new Date().getTime())}if(Hn==null){Hn=[],yn=0;for(var wr;yn<un;)wr=Math.floor(65536*Math.random()),Hn[yn++]=wr>>>8,Hn[yn++]=wr&255;yn=0,Cn()}function tr(){if(Un==null){for(Cn(),Un=jn(),Un.init(Hn),yn=0;yn<Hn.length;++yn)Hn[yn]=0;yn=0}return Un.next()}function Nn(z){var H;for(H=0;H<z.length;++H)z[H]=tr()}function lr(){}lr.prototype.nextBytes=Nn;function zr(z){function H(le,Xe){var vt=(le&65535)+(Xe&65535);return(le>>16)+(Xe>>16)+(vt>>16)<<16|vt&65535}function K(le,Xe){return le>>>Xe|le<<32-Xe}return z=function(le){for(var le=le.replace(/\r\n/g,`
`),Xe="",vt=0;vt<le.length;vt++){var bt=le.charCodeAt(vt);bt<128?Xe+=String.fromCharCode(bt):(bt>127&&bt<2048?Xe+=String.fromCharCode(bt>>6|192):(Xe+=String.fromCharCode(bt>>12|224),Xe+=String.fromCharCode(bt>>6&63|128)),Xe+=String.fromCharCode(bt&63|128))}return Xe}(z),function(le){for(var Xe="",vt=0;vt<le.length*4;vt++)Xe+="0123456789abcdef".charAt(le[vt>>2]>>(3-vt%4)*8+4&15)+"0123456789abcdef".charAt(le[vt>>2]>>(3-vt%4)*8&15);return Xe}(function(le,Xe){var vt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],bt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ht=Array(64),gi,Hi,hi,Ai,fi,D,h,k,V,ve,je,We;for(le[Xe>>5]|=128<<24-Xe%32,le[(Xe+64>>9<<4)+15]=Xe,V=0;V<le.length;V+=16){for(gi=bt[0],Hi=bt[1],hi=bt[2],Ai=bt[3],fi=bt[4],D=bt[5],h=bt[6],k=bt[7],ve=0;ve<64;ve++)Ht[ve]=ve<16?le[ve+V]:H(H(H(K(Ht[ve-2],17)^K(Ht[ve-2],19)^Ht[ve-2]>>>10,Ht[ve-7]),K(Ht[ve-15],7)^K(Ht[ve-15],18)^Ht[ve-15]>>>3),Ht[ve-16]),je=H(H(H(H(k,K(fi,6)^K(fi,11)^K(fi,25)),fi&D^~fi&h),vt[ve]),Ht[ve]),We=H(K(gi,2)^K(gi,13)^K(gi,22),gi&Hi^gi&hi^Hi&hi),k=h,h=D,D=fi,fi=H(Ai,je),Ai=hi,hi=Hi,Hi=gi,gi=H(je,We);bt[0]=H(gi,bt[0]),bt[1]=H(Hi,bt[1]),bt[2]=H(hi,bt[2]),bt[3]=H(Ai,bt[3]),bt[4]=H(fi,bt[4]),bt[5]=H(D,bt[5]),bt[6]=H(h,bt[6]),bt[7]=H(k,bt[7])}return bt}(function(le){for(var Xe=[],vt=0;vt<le.length*8;vt+=8)Xe[vt>>5]|=(le.charCodeAt(vt/8)&255)<<24-vt%32;return Xe}(z),z.length*8))}var Ir={hex:function(H){return zr(H)}};function _n(V){function H(je,We){return je<<We|je>>>32-We}function K(je){var We="",ct,gt;for(ct=7;ct>=0;ct--)gt=je>>>ct*4&15,We+=gt.toString(16);return We}var le,Xe,vt=Array(80),bt=1732584193,Ht=4023233417,gi=2562383102,Hi=271733878,hi=3285377520,Ai,fi,D,h,k,V=function(je){for(var je=je.replace(/\r\n/g,`
`),We="",ct=0;ct<je.length;ct++){var gt=je.charCodeAt(ct);gt<128?We+=String.fromCharCode(gt):(gt>127&&gt<2048?We+=String.fromCharCode(gt>>6|192):(We+=String.fromCharCode(gt>>12|224),We+=String.fromCharCode(gt>>6&63|128)),We+=String.fromCharCode(gt&63|128))}return We}(V);Ai=V.length;var ve=[];for(le=0;le<Ai-3;le+=4)Xe=V.charCodeAt(le)<<24|V.charCodeAt(le+1)<<16|V.charCodeAt(le+2)<<8|V.charCodeAt(le+3),ve.push(Xe);switch(Ai%4){case 0:le=2147483648;break;case 1:le=V.charCodeAt(Ai-1)<<24|8388608;break;case 2:le=V.charCodeAt(Ai-2)<<24|V.charCodeAt(Ai-1)<<16|32768;break;case 3:le=V.charCodeAt(Ai-3)<<24|V.charCodeAt(Ai-2)<<16|V.charCodeAt(Ai-1)<<8|128}for(ve.push(le);ve.length%16!=14;)ve.push(0);for(ve.push(Ai>>>29),ve.push(Ai<<3&4294967295),V=0;V<ve.length;V+=16){for(le=0;le<16;le++)vt[le]=ve[V+le];for(le=16;le<=79;le++)vt[le]=H(vt[le-3]^vt[le-8]^vt[le-14]^vt[le-16],1);for(Xe=bt,Ai=Ht,fi=gi,D=Hi,h=hi,le=0;le<=19;le++)k=H(Xe,5)+(Ai&fi|~Ai&D)+h+vt[le]+1518500249&4294967295,h=D,D=fi,fi=H(Ai,30),Ai=Xe,Xe=k;for(le=20;le<=39;le++)k=H(Xe,5)+(Ai^fi^D)+h+vt[le]+1859775393&4294967295,h=D,D=fi,fi=H(Ai,30),Ai=Xe,Xe=k;for(le=40;le<=59;le++)k=H(Xe,5)+(Ai&fi|Ai&D|fi&D)+h+vt[le]+2400959708&4294967295,h=D,D=fi,fi=H(Ai,30),Ai=Xe,Xe=k;for(le=60;le<=79;le++)k=H(Xe,5)+(Ai^fi^D)+h+vt[le]+3395469782&4294967295,h=D,D=fi,fi=H(Ai,30),Ai=Xe,Xe=k;bt=bt+Xe&4294967295,Ht=Ht+Ai&4294967295,gi=gi+fi&4294967295,Hi=Hi+D&4294967295,hi=hi+h&4294967295}return k=K(bt)+K(Ht)+K(gi)+K(Hi)+K(hi),k.toLowerCase()}var fr={hex:function(H){return _n(H)}},Jn=function(V){function K(je,We){var ct,gt,It,xi,yi;return It=je&2147483648,xi=We&2147483648,ct=je&1073741824,gt=We&1073741824,yi=(je&1073741823)+(We&1073741823),ct&gt?yi^2147483648^It^xi:ct|gt?yi&1073741824?yi^3221225472^It^xi:yi^1073741824^It^xi:yi^It^xi}function le(je,We,ct,gt,It,xi,yi){return je=K(je,K(K(We&ct|~We&gt,It),yi)),K(je<<xi|je>>>32-xi,We)}function Xe(je,We,ct,gt,It,xi,yi){return je=K(je,K(K(We&gt|ct&~gt,It),yi)),K(je<<xi|je>>>32-xi,We)}function vt(je,We,ct,gt,It,xi,yi){return je=K(je,K(K(We^ct^gt,It),yi)),K(je<<xi|je>>>32-xi,We)}function bt(je,We,ct,gt,It,xi,yi){return je=K(je,K(K(ct^(We|~gt),It),yi)),K(je<<xi|je>>>32-xi,We)}function Ht(je){var We="",ct="",gt;for(gt=0;gt<=3;gt++)ct=je>>>gt*8&255,ct="0"+ct.toString(16),We+=ct.substr(ct.length-2,2);return We}var ve=[],gi,Hi,hi,Ai,fi,D,h,k,V=function(je){for(var je=je.replace(/\r\n/g,`
`),We="",ct=0;ct<je.length;ct++){var gt=je.charCodeAt(ct);gt<128?We+=String.fromCharCode(gt):(gt>127&&gt<2048?We+=String.fromCharCode(gt>>6|192):(We+=String.fromCharCode(gt>>12|224),We+=String.fromCharCode(gt>>6&63|128)),We+=String.fromCharCode(gt&63|128))}return We}(V),ve=function(je){var We,ct=je.length;We=ct+8;for(var gt=((We-We%64)/64+1)*16,It=Array(gt-1),xi=0,yi=0;yi<ct;)We=(yi-yi%4)/4,xi=yi%4*8,It[We]|=je.charCodeAt(yi)<<xi,yi++;return It[(yi-yi%4)/4]|=128<<yi%4*8,It[gt-2]=ct<<3,It[gt-1]=ct>>>29,It}(V);for(fi=1732584193,D=4023233417,h=2562383102,k=271733878,V=0;V<ve.length;V+=16)gi=fi,Hi=D,hi=h,Ai=k,fi=le(fi,D,h,k,ve[V+0],7,3614090360),k=le(k,fi,D,h,ve[V+1],12,3905402710),h=le(h,k,fi,D,ve[V+2],17,606105819),D=le(D,h,k,fi,ve[V+3],22,3250441966),fi=le(fi,D,h,k,ve[V+4],7,4118548399),k=le(k,fi,D,h,ve[V+5],12,1200080426),h=le(h,k,fi,D,ve[V+6],17,2821735955),D=le(D,h,k,fi,ve[V+7],22,4249261313),fi=le(fi,D,h,k,ve[V+8],7,1770035416),k=le(k,fi,D,h,ve[V+9],12,2336552879),h=le(h,k,fi,D,ve[V+10],17,4294925233),D=le(D,h,k,fi,ve[V+11],22,2304563134),fi=le(fi,D,h,k,ve[V+12],7,1804603682),k=le(k,fi,D,h,ve[V+13],12,4254626195),h=le(h,k,fi,D,ve[V+14],17,2792965006),D=le(D,h,k,fi,ve[V+15],22,1236535329),fi=Xe(fi,D,h,k,ve[V+1],5,4129170786),k=Xe(k,fi,D,h,ve[V+6],9,3225465664),h=Xe(h,k,fi,D,ve[V+11],14,643717713),D=Xe(D,h,k,fi,ve[V+0],20,3921069994),fi=Xe(fi,D,h,k,ve[V+5],5,3593408605),k=Xe(k,fi,D,h,ve[V+10],9,38016083),h=Xe(h,k,fi,D,ve[V+15],14,3634488961),D=Xe(D,h,k,fi,ve[V+4],20,3889429448),fi=Xe(fi,D,h,k,ve[V+9],5,568446438),k=Xe(k,fi,D,h,ve[V+14],9,3275163606),h=Xe(h,k,fi,D,ve[V+3],14,4107603335),D=Xe(D,h,k,fi,ve[V+8],20,1163531501),fi=Xe(fi,D,h,k,ve[V+13],5,2850285829),k=Xe(k,fi,D,h,ve[V+2],9,4243563512),h=Xe(h,k,fi,D,ve[V+7],14,1735328473),D=Xe(D,h,k,fi,ve[V+12],20,2368359562),fi=vt(fi,D,h,k,ve[V+5],4,4294588738),k=vt(k,fi,D,h,ve[V+8],11,2272392833),h=vt(h,k,fi,D,ve[V+11],16,1839030562),D=vt(D,h,k,fi,ve[V+14],23,4259657740),fi=vt(fi,D,h,k,ve[V+1],4,2763975236),k=vt(k,fi,D,h,ve[V+4],11,1272893353),h=vt(h,k,fi,D,ve[V+7],16,4139469664),D=vt(D,h,k,fi,ve[V+10],23,3200236656),fi=vt(fi,D,h,k,ve[V+13],4,681279174),k=vt(k,fi,D,h,ve[V+0],11,3936430074),h=vt(h,k,fi,D,ve[V+3],16,3572445317),D=vt(D,h,k,fi,ve[V+6],23,76029189),fi=vt(fi,D,h,k,ve[V+9],4,3654602809),k=vt(k,fi,D,h,ve[V+12],11,3873151461),h=vt(h,k,fi,D,ve[V+15],16,530742520),D=vt(D,h,k,fi,ve[V+2],23,3299628645),fi=bt(fi,D,h,k,ve[V+0],6,4096336452),k=bt(k,fi,D,h,ve[V+7],10,1126891415),h=bt(h,k,fi,D,ve[V+14],15,2878612391),D=bt(D,h,k,fi,ve[V+5],21,4237533241),fi=bt(fi,D,h,k,ve[V+12],6,1700485571),k=bt(k,fi,D,h,ve[V+3],10,2399980690),h=bt(h,k,fi,D,ve[V+10],15,4293915773),D=bt(D,h,k,fi,ve[V+1],21,2240044497),fi=bt(fi,D,h,k,ve[V+8],6,1873313359),k=bt(k,fi,D,h,ve[V+15],10,4264355552),h=bt(h,k,fi,D,ve[V+6],15,2734768916),D=bt(D,h,k,fi,ve[V+13],21,1309151649),fi=bt(fi,D,h,k,ve[V+4],6,4149444226),k=bt(k,fi,D,h,ve[V+11],10,3174756917),h=bt(h,k,fi,D,ve[V+2],15,718787259),D=bt(D,h,k,fi,ve[V+9],21,3951481745),fi=K(fi,gi),D=K(D,Hi),h=K(h,hi),k=K(k,Ai);return(Ht(fi)+Ht(D)+Ht(h)+Ht(k)).toLowerCase()};function kn(z,H){return new c(z,H)}function mr(z,H){if(H<z.length+11)throw"Message too long for RSA (n="+H+", l="+z.length+")";for(var K=[],le=z.length-1;le>=0&&H>0;){var Xe=z.charCodeAt(le--);Xe<128?K[--H]=Xe:Xe>127&&Xe<2048?(K[--H]=Xe&63|128,K[--H]=Xe>>6|192):(K[--H]=Xe&63|128,K[--H]=Xe>>6&63|128,K[--H]=Xe>>12|224)}for(K[--H]=0,le=new lr,Xe=[];H>2;){for(Xe[0]=0;Xe[0]==0;)le.nextBytes(Xe);K[--H]=Xe[0]}return K[--H]=2,K[--H]=0,new c(K)}function Yn(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function Dr(z,H){z!=null&&H!=null&&z.length>0&&H.length>0?(this.n=kn(z,16),this.e=parseInt(H,16)):alert("Invalid RSA public key")}function ta(z){return z.modPowInt(this.e,this.n)}function Vr(z){return z=mr(z,this.n.bitLength()+7>>3),z==null||(z=this.doPublic(z),z==null)?null:(z=z.toString(16),z.length&1?"0"+z:z)}Yn.prototype.doPublic=ta,Yn.prototype.setPublic=Dr,Yn.prototype.encrypt=Vr;function jr(z,H){for(var K=z.toByteArray(),le=0;le<K.length&&K[le]==0;)++le;if(K.length-le!=H-1||K[le]!=2)return null;for(++le;K[le]!=0;)if(++le>=K.length)return null;for(var Xe="";++le<K.length;){var vt=K[le]&255;vt<128?Xe+=String.fromCharCode(vt):vt>191&&vt<224?(Xe+=String.fromCharCode((vt&31)<<6|K[le+1]&63),++le):(Xe+=String.fromCharCode((vt&15)<<12|(K[le+1]&63)<<6|K[le+2]&63),le+=2)}return Xe}function ma(z,H,K){z!=null&&H!=null&&z.length>0&&H.length>0?(this.n=kn(z,16),this.e=parseInt(H,16),this.d=kn(K,16)):alert("Invalid RSA private key")}function ca(z,H,K,le,Xe,vt,bt,Ht){z!=null&&H!=null&&z.length>0&&H.length>0?(this.n=kn(z,16),this.e=parseInt(H,16),this.d=kn(K,16),this.p=kn(le,16),this.q=kn(Xe,16),this.dmp1=kn(vt,16),this.dmq1=kn(bt,16),this.coeff=kn(Ht,16)):alert("Invalid RSA private key")}function Ta(z,H){var K=new nn,le=z>>1;this.e=parseInt(H,16);for(var Xe=new c(H,16);;){for(;this.p=new c(z-le,1,K),!(this.p.subtract(c.ONE).gcd(Xe).compareTo(c.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new c(le,1,K),!(this.q.subtract(c.ONE).gcd(Xe).compareTo(c.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var vt=this.p;this.p=this.q,this.q=vt}var vt=this.p.subtract(c.ONE),bt=this.q.subtract(c.ONE),Ht=vt.multiply(bt);if(Ht.gcd(Xe).compareTo(c.ONE)==0){this.n=this.p.multiply(this.q),this.d=Xe.modInverse(Ht),this.dmp1=this.d.mod(vt),this.dmq1=this.d.mod(bt),this.coeff=this.q.modInverse(this.p);break}}}function ir(z){if(this.p==null||this.q==null)return z.modPow(this.d,this.n);for(var H=z.mod(this.p).modPow(this.dmp1,this.p),z=z.mod(this.q).modPow(this.dmq1,this.q);H.compareTo(z)<0;)H=H.add(this.p);return H.subtract(z).multiply(this.coeff).mod(this.p).multiply(this.q).add(z)}function Tt(z){return z=this.doPrivate(kn(z,16)),z==null?null:jr(z,this.n.bitLength()+7>>3)}Yn.prototype.doPrivate=ir,Yn.prototype.setPrivate=ma,Yn.prototype.setPrivateEx=ca,Yn.prototype.generate=Ta,Yn.prototype.decrypt=Tt;var Gr=[];Gr.sha1="3021300906052b0e03021a05000414",Gr.sha256="3031300d060960864801650304020105000420";var Ar=[];Ar.sha1=fr.hex,Ar.sha256=Ir.hex;function oe(z,H,K){H/=4;for(var z=(0,Ar[K])(z),K="00"+Gr[K]+z,z="",H=H-4-K.length,le=0;le<H;le+=2)z+="ff";return sPaddedMessageHex="0001"+z+K}function si(z,H){var K=oe(z,this.n.bitLength(),H);return this.doPrivate(kn(K,16)).toString(16)}function Ge(z){return z=oe(z,this.n.bitLength(),"sha1"),this.doPrivate(kn(z,16)).toString(16)}function u(z){return z=oe(z,this.n.bitLength(),"sha256"),this.doPrivate(kn(z,16)).toString(16)}function s(z,H,K){var le=new Yn;return le.setPublic(H,K),le.doPublic(z)}function e(z,H,K){return s(z,H,K).toString(16).replace(/^1f+00/,"")}function r(z){for(var H in Gr){var K=Gr[H],le=K.length;if(z.substring(0,le)==K)return[H,z.substring(le)]}return[]}function b(z,H,K,le){return H=e(H,K,le),K=r(H),K.length==0?!1:(H=K[1],z=(0,Ar[K[0]])(z),H==z)}function A(z,H){var K=kn(z,16);return b(H,K,this.n.toString(16),this.e.toString(16))}function Ce(z,K){var K=K.replace(/[ \n]+/g,""),le=this.doPublic(kn(K,16)).toString(16).replace(/^1f+00/,""),Xe=r(le);return Xe.length==0?!1:(le=Xe[1],Xe=(0,Ar[Xe[0]])(z),le==Xe)}Yn.prototype.signString=si,Yn.prototype.signStringWithSHA1=Ge,Yn.prototype.signStringWithSHA256=u,Yn.prototype.verifyString=Ce,Yn.prototype.verifyHexSignatureForMessage=A;var Ae=function(){var z={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11]};return z.Init=function(){z.Sbox_Inv=Array(256);for(var H=0;H<256;H++)z.Sbox_Inv[z.Sbox[H]]=H;for(z.ShiftRowTab_Inv=Array(16),H=0;H<16;H++)z.ShiftRowTab_Inv[z.ShiftRowTab[H]]=H;for(z.xtime=Array(256),H=0;H<128;H++)z.xtime[H]=H<<1,z.xtime[128+H]=H<<1^27},z.Done=function(){delete z.Sbox_Inv,delete z.ShiftRowTab_Inv,delete z.xtime},z.ExpandKey=function(H){var K=H.length,le,Xe=1;switch(K){case 16:le=176;break;case 24:le=208;break;case 32:le=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var vt=K;vt<le;vt+=4){var bt=H.slice(vt-4,vt);vt%K==0?(bt=[z.Sbox[bt[1]]^Xe,z.Sbox[bt[2]],z.Sbox[bt[3]],z.Sbox[bt[0]]],(Xe<<=1)>=256&&(Xe^=283)):K>24&&vt%K==16&&(bt=[z.Sbox[bt[0]],z.Sbox[bt[1]],z.Sbox[bt[2]],z.Sbox[bt[3]]]);for(var Ht=0;Ht<4;Ht++)H[vt+Ht]=H[vt+Ht-K]^bt[Ht]}},z.Encrypt=function(H,K){var le=K.length;z.AddRoundKey(H,K.slice(0,16));for(var Xe=16;Xe<le-16;Xe+=16)z.SubBytes(H,z.Sbox),z.ShiftRows(H,z.ShiftRowTab),z.MixColumns(H),z.AddRoundKey(H,K.slice(Xe,Xe+16));z.SubBytes(H,z.Sbox),z.ShiftRows(H,z.ShiftRowTab),z.AddRoundKey(H,K.slice(Xe,le))},z.Decrypt=function(H,K){var le=K.length;for(z.AddRoundKey(H,K.slice(le-16,le)),z.ShiftRows(H,z.ShiftRowTab_Inv),z.SubBytes(H,z.Sbox_Inv),le-=32;le>=16;le-=16)z.AddRoundKey(H,K.slice(le,le+16)),z.MixColumns_Inv(H),z.ShiftRows(H,z.ShiftRowTab_Inv),z.SubBytes(H,z.Sbox_Inv);z.AddRoundKey(H,K.slice(0,16))},z.SubBytes=function(H,K){for(var le=0;le<16;le++)H[le]=K[H[le]]},z.AddRoundKey=function(H,K){for(var le=0;le<16;le++)H[le]^=K[le]},z.ShiftRows=function(H,K){for(var le=[].concat(H),Xe=0;Xe<16;Xe++)H[Xe]=le[K[Xe]]},z.MixColumns=function(H){for(var K=0;K<16;K+=4){var le=H[K+0],Xe=H[K+1],vt=H[K+2],bt=H[K+3],Ht=le^Xe^vt^bt;H[K+0]^=Ht^z.xtime[le^Xe],H[K+1]^=Ht^z.xtime[Xe^vt],H[K+2]^=Ht^z.xtime[vt^bt],H[K+3]^=Ht^z.xtime[bt^le]}},z.MixColumns_Inv=function(H){for(var K=0;K<16;K+=4){var le=H[K+0],Xe=H[K+1],vt=H[K+2],bt=H[K+3],Ht=le^Xe^vt^bt,gi=z.xtime[Ht],Hi=z.xtime[z.xtime[gi^le^vt]]^Ht;Ht^=z.xtime[z.xtime[gi^Xe^bt]],H[K+0]^=Hi^z.xtime[le^Xe],H[K+1]^=Ht^z.xtime[Xe^vt],H[K+2]^=Hi^z.xtime[vt^bt],H[K+3]^=Ht^z.xtime[bt^le]}},z}(),zt=function(){var z={};return Ae.Init(),z.b256to64=function(H){var K,le,Xe,vt="",bt=0,Ht=H.length;for(Xe=0;Xe<Ht;Xe++)le=H.charCodeAt(Xe),bt==0?(vt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(le>>2&63),K=(le&3)<<4):bt==1?(vt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(K|le>>4&15),K=(le&15)<<2):bt==2&&(vt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(K|le>>6&3),vt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(le&63)),bt+=1,bt==3&&(bt=0);return bt>0&&(vt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(K),vt+="="),bt==1&&(vt+="="),vt},z.b64to256=function(H){var K,le,Xe="",vt=0,bt=0,Ht=H.length;for(le=0;le<Ht;le++)K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(H.charAt(le)),K>=0&&(vt&&(Xe+=String.fromCharCode(bt|K>>6-vt&255)),vt=vt+2&7,bt=K<<vt&255);return Xe},z.b16to64=function(H){var K,le,Xe="";for(H.length%2==1&&(H="0"+H),K=0;K+3<=H.length;K+=3)le=parseInt(H.substring(K,K+3),16),Xe+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(le>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(le&63);for(K+1==H.length?(le=parseInt(H.substring(K,K+1),16),Xe+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(le<<2)):K+2==H.length&&(le=parseInt(H.substring(K,K+2),16),Xe+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(le>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((le&3)<<4));(Xe.length&3)>0;)Xe+="=";return Xe},z.b64to16=function(H){var K="",le,Xe=0,vt;for(le=0;le<H.length&&H.charAt(le)!="=";++le)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(H.charAt(le)),v<0||(Xe==0?(K+=ae(v>>2),vt=v&3,Xe=1):Xe==1?(K+=ae(vt<<2|v>>4),vt=v&15,Xe=2):Xe==2?(K+=ae(vt),K+=ae(v>>2),vt=v&3,Xe=3):(K+=ae(vt<<2|v>>4),K+=ae(v&15),Xe=0));return Xe==1&&(K+=ae(vt<<2)),K},z.string2bytes=function(H){for(var K=[],le=0;le<H.length;le++)K.push(H.charCodeAt(le));return K},z.bytes2string=function(H){for(var K="",le=0;le<H.length;le++)K+=String.fromCharCode(H[le]);return K},z.blockXOR=function(H,K){for(var le=Array(16),Xe=0;Xe<16;Xe++)le[Xe]=H[Xe]^K[Xe];return le},z.blockIV=function(){var H=new lr,K=Array(16);return H.nextBytes(K),K},z.pad16=function(H){var K=H.slice(0),le=(16-H.length%16)%16;for(i=H.length;i<H.length+le;i++)K.push(0);return K},z.depad=function(H){for(H=H.slice(0);H[H.length-1]==0;)H=H.slice(0,H.length-1);return H},z.encryptAESCBC=function(H,K){var le=K.slice(0);Ae.ExpandKey(le);for(var Xe=z.string2bytes(H),Xe=z.pad16(Xe),vt=z.blockIV(),bt=0;bt<Xe.length/16;bt++){var gi=Xe.slice(bt*16,bt*16+16),Ht=vt.slice(bt*16,bt*16+16),gi=z.blockXOR(Ht,gi);Ae.Encrypt(gi,le),vt=vt.concat(gi)}return le=z.bytes2string(vt),z.b256to64(le)},z.decryptAESCBC=function(H,K){var le=K.slice(0);Ae.ExpandKey(le);for(var H=z.b64to256(H),Xe=z.string2bytes(H),vt=[],bt=1;bt<Xe.length/16;bt++){var Ht=Xe.slice(bt*16,bt*16+16),gi=Xe.slice((bt-1)*16,(bt-1)*16+16);Ae.Decrypt(Ht,le),Ht=z.blockXOR(gi,Ht),vt=vt.concat(Ht)}return vt=z.depad(vt),z.bytes2string(vt)},z.wrap60=function(H){for(var K="",le=0;le<H.length;le++)le%60==0&&le!=0&&(K+=`
`),K+=H[le];return K},z.generateAESKey=function(){var H=Array(16);return new lr().nextBytes(H),H},z.generateRSAKey=function(H,K){Math.seedrandom(Ir.hex(H));var le=new Yn;return le.generate(K,"10001"),le},z.publicKeyString=function(H){return pubkey=H.n.toString(16)},z.publicKeyID=function(H){return Jn(H)},z.publicKeyFromString=function(K){var K=K.split("|")[0],le=new Yn;return le.setPublic(K,"10001"),le},z.encrypt=function(H,K,le){var Xe="";try{var vt=z.publicKeyFromString(K);Xe+=vt.encrypt(H)+"?"}catch{return{status:"Invalid public key"}}return{status:"success",cipher:Xe}},z.decrypt=function(H,K){var le=H.split("?"),Xe=K.decrypt(le[0]);return{status:"success",plaintext:Xe,signature:"unsigned"}},z}();t.exports=zt},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=l||function(d,c){var E={},C=E.lib={},y=function(){},w=C.Base={extend:function(ue){y.prototype=this;var x=new y;return ue&&x.mixIn(ue),x.hasOwnProperty("init")||(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var ue=this.extend();return ue.init.apply(ue,arguments),ue},init:function(){},mixIn:function(ue){for(var x in ue)ue.hasOwnProperty(x)&&(this[x]=ue[x]);ue.hasOwnProperty("toString")&&(this.toString=ue.toString)},clone:function(){return this.init.prototype.extend(this)}},g=C.WordArray=w.extend({init:function(ue,x){ue=this.words=ue||[],this.sigBytes=x!=c?x:4*ue.length},toString:function(ue){return(ue||te).stringify(this)},concat:function(ue){var x=this.words,O=ue.words,ne=this.sigBytes;if(ue=ue.sigBytes,this.clamp(),ne%4)for(var Q=0;Q<ue;Q++)x[ne+Q>>>2]|=(O[Q>>>2]>>>24-8*(Q%4)&255)<<24-8*((ne+Q)%4);else if(65535<O.length)for(Q=0;Q<ue;Q+=4)x[ne+Q>>>2]=O[Q>>>2];else x.push.apply(x,O);return this.sigBytes+=ue,this},clamp:function(){var ue=this.words,x=this.sigBytes;ue[x>>>2]&=4294967295<<32-8*(x%4),ue.length=d.ceil(x/4)},clone:function(){var ue=w.clone.call(this);return ue.words=this.words.slice(0),ue},random:function(ue){for(var x=[],O=0;O<ue;O+=4)x.push(4294967296*d.random()|0);return new g.init(x,ue)}}),p=E.enc={},te=p.Hex={stringify:function(ue){var x=ue.words;ue=ue.sigBytes;for(var O=[],ne=0;ne<ue;ne++){var Q=x[ne>>>2]>>>24-8*(ne%4)&255;O.push((Q>>>4).toString(16)),O.push((Q&15).toString(16))}return O.join("")},parse:function(ue){for(var x=ue.length,O=[],ne=0;ne<x;ne+=2)O[ne>>>3]|=parseInt(ue.substr(ne,2),16)<<24-4*(ne%8);return new g.init(O,x/2)}},ae=p.Latin1={stringify:function(ue){var x=ue.words;ue=ue.sigBytes;for(var O=[],ne=0;ne<ue;ne++)O.push(String.fromCharCode(x[ne>>>2]>>>24-8*(ne%4)&255));return O.join("")},parse:function(ue){for(var x=ue.length,O=[],ne=0;ne<x;ne++)O[ne>>>2]|=(ue.charCodeAt(ne)&255)<<24-8*(ne%4);return new g.init(O,x)}},de=p.Utf8={stringify:function(ue){try{return decodeURIComponent(escape(ae.stringify(ue)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(ue){return ae.parse(unescape(encodeURIComponent(ue)))}},ie=C.BufferedBlockAlgorithm=w.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(ue){typeof ue=="string"&&(ue=de.parse(ue)),this._data.concat(ue),this._nDataBytes+=ue.sigBytes},_process:function(ue){var x=this._data,O=x.words,ne=x.sigBytes,Q=this.blockSize,ye=ne/(4*Q),ye=ue?d.ceil(ye):d.max((ye|0)-this._minBufferSize,0);if(ue=ye*Q,ne=d.min(4*ue,ne),ue){for(var se=0;se<ue;se+=Q)this._doProcessBlock(O,se);se=O.splice(0,ue),x.sigBytes-=ne}return new g.init(se,ne)},clone:function(){var ue=w.clone.call(this);return ue._data=this._data.clone(),ue},_minBufferSize:0});C.Hasher=ie.extend({cfg:w.extend(),init:function(ue){this.cfg=this.cfg.extend(ue),this.reset()},reset:function(){ie.reset.call(this),this._doReset()},update:function(ue){return this._append(ue),this._process(),this},finalize:function(ue){return ue&&this._append(ue),this._doFinalize()},blockSize:16,_createHelper:function(ue){return function(x,O){return new ue.init(O).finalize(x)}},_createHmacHelper:function(ue){return function(x,O){return new we.HMAC.init(ue,O).finalize(x)}}});var we=E.algo={};return E}(Math);(function(){var d=l,c=d.lib.WordArray;d.enc.Base64={stringify:function(C){var y=C.words,w=C.sigBytes,g=this._map;C.clamp(),C=[];for(var p=0;p<w;p+=3)for(var te=(y[p>>>2]>>>24-8*(p%4)&255)<<16|(y[p+1>>>2]>>>24-8*((p+1)%4)&255)<<8|y[p+2>>>2]>>>24-8*((p+2)%4)&255,ae=0;4>ae&&p+.75*ae<w;ae++)C.push(g.charAt(te>>>6*(3-ae)&63));if(y=g.charAt(64))for(;C.length%4;)C.push(y);return C.join("")},parse:function(C){var y=C.length,w=this._map,g=w.charAt(64);g&&(g=C.indexOf(g),g!=-1&&(y=g));for(var g=[],p=0,te=0;te<y;te++)if(te%4){var ae=w.indexOf(C.charAt(te-1))<<2*(te%4),de=w.indexOf(C.charAt(te))>>>6-2*(te%4);g[p>>>2]|=(ae|de)<<24-8*(p%4),p++}return c.create(g,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(d){function c(ie,we,Ve,ue,x,O,ne){return ie=ie+(we&Ve|~we&ue)+x+ne,(ie<<O|ie>>>32-O)+we}function E(ie,we,Ve,ue,x,O,ne){return ie=ie+(we&ue|Ve&~ue)+x+ne,(ie<<O|ie>>>32-O)+we}function C(ie,we,Ve,ue,x,O,ne){return ie=ie+(we^Ve^ue)+x+ne,(ie<<O|ie>>>32-O)+we}function y(ie,we,Ve,ue,x,O,ne){return ie=ie+(Ve^(we|~ue))+x+ne,(ie<<O|ie>>>32-O)+we}for(var w=l,te=w.lib,g=te.WordArray,p=te.Hasher,te=w.algo,ae=[],de=0;64>de;de++)ae[de]=4294967296*d.abs(d.sin(de+1))|0;te=te.MD5=p.extend({_doReset:function(){this._hash=new g.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(we,Ve){for(var ue=0;16>ue;ue++){var x=Ve+ue,O=we[x];we[x]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}var ue=this._hash.words,x=we[Ve+0],O=we[Ve+1],ne=we[Ve+2],Q=we[Ve+3],ye=we[Ve+4],se=we[Ve+5],Ze=we[Ve+6],Qe=we[Ve+7],M=we[Ve+8],Te=we[Ve+9],ze=we[Ve+10],oi=we[Ve+11],wi=we[Ve+12],ui=we[Ve+13],di=we[Ve+14],zi=we[Ve+15],$e=ue[0],Ne=ue[1],Ke=ue[2],st=ue[3],$e=c($e,Ne,Ke,st,x,7,ae[0]),st=c(st,$e,Ne,Ke,O,12,ae[1]),Ke=c(Ke,st,$e,Ne,ne,17,ae[2]),Ne=c(Ne,Ke,st,$e,Q,22,ae[3]),$e=c($e,Ne,Ke,st,ye,7,ae[4]),st=c(st,$e,Ne,Ke,se,12,ae[5]),Ke=c(Ke,st,$e,Ne,Ze,17,ae[6]),Ne=c(Ne,Ke,st,$e,Qe,22,ae[7]),$e=c($e,Ne,Ke,st,M,7,ae[8]),st=c(st,$e,Ne,Ke,Te,12,ae[9]),Ke=c(Ke,st,$e,Ne,ze,17,ae[10]),Ne=c(Ne,Ke,st,$e,oi,22,ae[11]),$e=c($e,Ne,Ke,st,wi,7,ae[12]),st=c(st,$e,Ne,Ke,ui,12,ae[13]),Ke=c(Ke,st,$e,Ne,di,17,ae[14]),Ne=c(Ne,Ke,st,$e,zi,22,ae[15]),$e=E($e,Ne,Ke,st,O,5,ae[16]),st=E(st,$e,Ne,Ke,Ze,9,ae[17]),Ke=E(Ke,st,$e,Ne,oi,14,ae[18]),Ne=E(Ne,Ke,st,$e,x,20,ae[19]),$e=E($e,Ne,Ke,st,se,5,ae[20]),st=E(st,$e,Ne,Ke,ze,9,ae[21]),Ke=E(Ke,st,$e,Ne,zi,14,ae[22]),Ne=E(Ne,Ke,st,$e,ye,20,ae[23]),$e=E($e,Ne,Ke,st,Te,5,ae[24]),st=E(st,$e,Ne,Ke,di,9,ae[25]),Ke=E(Ke,st,$e,Ne,Q,14,ae[26]),Ne=E(Ne,Ke,st,$e,M,20,ae[27]),$e=E($e,Ne,Ke,st,ui,5,ae[28]),st=E(st,$e,Ne,Ke,ne,9,ae[29]),Ke=E(Ke,st,$e,Ne,Qe,14,ae[30]),Ne=E(Ne,Ke,st,$e,wi,20,ae[31]),$e=C($e,Ne,Ke,st,se,4,ae[32]),st=C(st,$e,Ne,Ke,M,11,ae[33]),Ke=C(Ke,st,$e,Ne,oi,16,ae[34]),Ne=C(Ne,Ke,st,$e,di,23,ae[35]),$e=C($e,Ne,Ke,st,O,4,ae[36]),st=C(st,$e,Ne,Ke,ye,11,ae[37]),Ke=C(Ke,st,$e,Ne,Qe,16,ae[38]),Ne=C(Ne,Ke,st,$e,ze,23,ae[39]),$e=C($e,Ne,Ke,st,ui,4,ae[40]),st=C(st,$e,Ne,Ke,x,11,ae[41]),Ke=C(Ke,st,$e,Ne,Q,16,ae[42]),Ne=C(Ne,Ke,st,$e,Ze,23,ae[43]),$e=C($e,Ne,Ke,st,Te,4,ae[44]),st=C(st,$e,Ne,Ke,wi,11,ae[45]),Ke=C(Ke,st,$e,Ne,zi,16,ae[46]),Ne=C(Ne,Ke,st,$e,ne,23,ae[47]),$e=y($e,Ne,Ke,st,x,6,ae[48]),st=y(st,$e,Ne,Ke,Qe,10,ae[49]),Ke=y(Ke,st,$e,Ne,di,15,ae[50]),Ne=y(Ne,Ke,st,$e,se,21,ae[51]),$e=y($e,Ne,Ke,st,wi,6,ae[52]),st=y(st,$e,Ne,Ke,Q,10,ae[53]),Ke=y(Ke,st,$e,Ne,ze,15,ae[54]),Ne=y(Ne,Ke,st,$e,O,21,ae[55]),$e=y($e,Ne,Ke,st,M,6,ae[56]),st=y(st,$e,Ne,Ke,zi,10,ae[57]),Ke=y(Ke,st,$e,Ne,Ze,15,ae[58]),Ne=y(Ne,Ke,st,$e,ui,21,ae[59]),$e=y($e,Ne,Ke,st,ye,6,ae[60]),st=y(st,$e,Ne,Ke,oi,10,ae[61]),Ke=y(Ke,st,$e,Ne,ne,15,ae[62]),Ne=y(Ne,Ke,st,$e,Te,21,ae[63]);ue[0]=ue[0]+$e|0,ue[1]=ue[1]+Ne|0,ue[2]=ue[2]+Ke|0,ue[3]=ue[3]+st|0},_doFinalize:function(){var we=this._data,Ve=we.words,ue=8*this._nDataBytes,x=8*we.sigBytes;Ve[x>>>5]|=128<<24-x%32;var O=d.floor(ue/4294967296);for(Ve[(x+64>>>9<<4)+15]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,Ve[(x+64>>>9<<4)+14]=(ue<<8|ue>>>24)&16711935|(ue<<24|ue>>>8)&4278255360,we.sigBytes=4*(Ve.length+1),this._process(),we=this._hash,Ve=we.words,ue=0;4>ue;ue++)x=Ve[ue],Ve[ue]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360;return we},clone:function(){var we=p.clone.call(this);return we._hash=this._hash.clone(),we}}),w.MD5=p._createHelper(te),w.HmacMD5=p._createHmacHelper(te)}(Math),function(){var d=l,C=d.lib,c=C.Base,E=C.WordArray,C=d.algo,y=C.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:C.MD5,iterations:1}),init:function(g){this.cfg=this.cfg.extend(g)},compute:function(g,p){for(var we=this.cfg,te=we.hasher.create(),ae=E.create(),de=ae.words,ie=we.keySize,we=we.iterations;de.length<ie;){Ve&&te.update(Ve);var Ve=te.update(g).finalize(p);te.reset();for(var ue=1;ue<we;ue++)Ve=te.finalize(Ve),te.reset();ae.concat(Ve)}return ae.sigBytes=4*ie,ae}});d.EvpKDF=function(w,g,p){return y.create(p).compute(w,g)}}(),l.lib.Cipher||function(d){var Ve=l,c=Ve.lib,E=c.Base,C=c.WordArray,y=c.BufferedBlockAlgorithm,w=Ve.enc.Base64,g=Ve.algo.EvpKDF,p=c.Cipher=y.extend({cfg:E.extend(),createEncryptor:function(O,ne){return this.create(this._ENC_XFORM_MODE,O,ne)},createDecryptor:function(O,ne){return this.create(this._DEC_XFORM_MODE,O,ne)},init:function(O,ne,Q){this.cfg=this.cfg.extend(Q),this._xformMode=O,this._key=ne,this.reset()},reset:function(){y.reset.call(this),this._doReset()},process:function(O){return this._append(O),this._process()},finalize:function(O){return O&&this._append(O),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(O){return{encrypt:function(Q,ye,se){return(typeof ye=="string"?ue:we).encrypt(O,Q,ye,se)},decrypt:function(Q,ye,se){return(typeof ye=="string"?ue:we).decrypt(O,Q,ye,se)}}}});c.StreamCipher=p.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var ie=Ve.mode={},te=function(O,ne,Q){var ye=this._iv;ye?this._iv=d:ye=this._prevBlock;for(var se=0;se<Q;se++)O[ne+se]^=ye[se]},ae=(c.BlockCipherMode=E.extend({createEncryptor:function(O,ne){return this.Encryptor.create(O,ne)},createDecryptor:function(O,ne){return this.Decryptor.create(O,ne)},init:function(O,ne){this._cipher=O,this._iv=ne}})).extend();ae.Encryptor=ae.extend({processBlock:function(O,ne){var Q=this._cipher,ye=Q.blockSize;te.call(this,O,ne,ye),Q.encryptBlock(O,ne),this._prevBlock=O.slice(ne,ne+ye)}}),ae.Decryptor=ae.extend({processBlock:function(O,ne){var Q=this._cipher,ye=Q.blockSize,se=O.slice(ne,ne+ye);Q.decryptBlock(O,ne),te.call(this,O,ne,ye),this._prevBlock=se}}),ie=ie.CBC=ae,ae=(Ve.pad={}).Pkcs7={pad:function(O,ne){for(var Q=4*ne,Q=Q-O.sigBytes%Q,ye=Q<<24|Q<<16|Q<<8|Q,se=[],Ze=0;Ze<Q;Ze+=4)se.push(ye);Q=C.create(se,Q),O.concat(Q)},unpad:function(O){O.sigBytes-=O.words[O.sigBytes-1>>>2]&255}},c.BlockCipher=p.extend({cfg:p.cfg.extend({mode:ie,padding:ae}),reset:function(){p.reset.call(this);var ne=this.cfg,O=ne.iv,ne=ne.mode;if(this._xformMode==this._ENC_XFORM_MODE)var Q=ne.createEncryptor;else Q=ne.createDecryptor,this._minBufferSize=1;this._mode=Q.call(ne,this,O&&O.words)},_doProcessBlock:function(O,ne){this._mode.processBlock(O,ne)},_doFinalize:function(){var O=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){O.pad(this._data,this.blockSize);var ne=this._process(!0)}else ne=this._process(!0),O.unpad(ne);return ne},blockSize:4});var de=c.CipherParams=E.extend({init:function(O){this.mixIn(O)},toString:function(O){return(O||this.formatter).stringify(this)}}),ie=(Ve.format={}).OpenSSL={stringify:function(O){var ne=O.ciphertext;return O=O.salt,(O?C.create([1398893684,1701076831]).concat(O).concat(ne):ne).toString(w)},parse:function(O){O=w.parse(O);var ne=O.words;if(ne[0]==1398893684&&ne[1]==1701076831){var Q=C.create(ne.slice(2,4));ne.splice(0,4),O.sigBytes-=16}return de.create({ciphertext:O,salt:Q})}},we=c.SerializableCipher=E.extend({cfg:E.extend({format:ie}),encrypt:function(O,ne,Q,ye){ye=this.cfg.extend(ye);var se=O.createEncryptor(Q,ye);return ne=se.finalize(ne),se=se.cfg,de.create({ciphertext:ne,key:Q,iv:se.iv,algorithm:O,mode:se.mode,padding:se.padding,blockSize:O.blockSize,formatter:ye.format})},decrypt:function(O,ne,Q,ye){return ye=this.cfg.extend(ye),ne=this._parse(ne,ye.format),O.createDecryptor(Q,ye).finalize(ne.ciphertext)},_parse:function(O,ne){return typeof O=="string"?ne.parse(O,this):O}}),Ve=(Ve.kdf={}).OpenSSL={execute:function(O,ne,Q,ye){return ye||(ye=C.random(8)),O=g.create({keySize:ne+Q}).compute(O,ye),Q=C.create(O.words.slice(ne),4*Q),O.sigBytes=4*ne,de.create({key:O,iv:Q,salt:ye})}},ue=c.PasswordBasedCipher=we.extend({cfg:we.cfg.extend({kdf:Ve}),encrypt:function(O,ne,Q,ye){return ye=this.cfg.extend(ye),Q=ye.kdf.execute(Q,O.keySize,O.ivSize),ye.iv=Q.iv,O=we.encrypt.call(this,O,ne,Q.key,ye),O.mixIn(Q),O},decrypt:function(O,ne,Q,ye){return ye=this.cfg.extend(ye),ne=this._parse(ne,ye.format),Q=ye.kdf.execute(Q,O.keySize,O.ivSize,ne.salt),ye.iv=Q.iv,we.decrypt.call(this,O,ne,Q.key,ye)}})}(),function(){for(var d=l,c=d.lib.BlockCipher,Qe=d.algo,E=[],C=[],y=[],w=[],g=[],p=[],te=[],ae=[],de=[],ie=[],we=[],Ve=0;256>Ve;Ve++)we[Ve]=128>Ve?Ve<<1:Ve<<1^283;for(var ue=0,x=0,Ve=0;256>Ve;Ve++){var O=x^x<<1^x<<2^x<<3^x<<4,O=O>>>8^O&255^99;E[ue]=O,C[O]=ue;var ne=we[ue],Q=we[ne],ye=we[Q],se=257*we[O]^16843008*O;y[ue]=se<<24|se>>>8,w[ue]=se<<16|se>>>16,g[ue]=se<<8|se>>>24,p[ue]=se,se=16843009*ye^65537*Q^257*ne^16843008*ue,te[O]=se<<24|se>>>8,ae[O]=se<<16|se>>>16,de[O]=se<<8|se>>>24,ie[O]=se,ue?(ue=ne^we[we[we[ye^ne]]],x^=we[we[x]]):ue=x=1}var Ze=[0,1,2,4,8,16,32,64,128,27,54],Qe=Qe.AES=c.extend({_doReset:function(){for(var oi=this._key,Te=oi.words,ze=oi.sigBytes/4,oi=4*((this._nRounds=ze+6)+1),wi=this._keySchedule=[],ui=0;ui<oi;ui++)if(ui<ze)wi[ui]=Te[ui];else{var di=wi[ui-1];ui%ze?6<ze&&ui%ze==4&&(di=E[di>>>24]<<24|E[di>>>16&255]<<16|E[di>>>8&255]<<8|E[di&255]):(di=di<<8|di>>>24,di=E[di>>>24]<<24|E[di>>>16&255]<<16|E[di>>>8&255]<<8|E[di&255],di^=Ze[ui/ze|0]<<24),wi[ui]=wi[ui-ze]^di}for(Te=this._invKeySchedule=[],ze=0;ze<oi;ze++)ui=oi-ze,di=ze%4?wi[ui]:wi[ui-4],Te[ze]=4>ze||4>=ui?di:te[E[di>>>24]]^ae[E[di>>>16&255]]^de[E[di>>>8&255]]^ie[E[di&255]]},encryptBlock:function(Te,ze){this._doCryptBlock(Te,ze,this._keySchedule,y,w,g,p,E)},decryptBlock:function(Te,ze){var oi=Te[ze+1];Te[ze+1]=Te[ze+3],Te[ze+3]=oi,this._doCryptBlock(Te,ze,this._invKeySchedule,te,ae,de,ie,C),oi=Te[ze+1],Te[ze+1]=Te[ze+3],Te[ze+3]=oi},_doCryptBlock:function(Te,ze,oi,wi,ui,di,zi,$e){for(var st=this._nRounds,Ke=Te[ze]^oi[0],Ne=Te[ze+1]^oi[1],at=Te[ze+2]^oi[2],Ut=Te[ze+3]^oi[3],Wt=4,kt=1;kt<st;kt++)var ee=wi[Ke>>>24]^ui[Ne>>>16&255]^di[at>>>8&255]^zi[Ut&255]^oi[Wt++],me=wi[Ne>>>24]^ui[at>>>16&255]^di[Ut>>>8&255]^zi[Ke&255]^oi[Wt++],P=wi[at>>>24]^ui[Ut>>>16&255]^di[Ke>>>8&255]^zi[Ne&255]^oi[Wt++],Ut=wi[Ut>>>24]^ui[Ke>>>16&255]^di[Ne>>>8&255]^zi[at&255]^oi[Wt++],Ke=ee,Ne=me,at=P;ee=($e[Ke>>>24]<<24|$e[Ne>>>16&255]<<16|$e[at>>>8&255]<<8|$e[Ut&255])^oi[Wt++],me=($e[Ne>>>24]<<24|$e[at>>>16&255]<<16|$e[Ut>>>8&255]<<8|$e[Ke&255])^oi[Wt++],P=($e[at>>>24]<<24|$e[Ut>>>16&255]<<16|$e[Ke>>>8&255]<<8|$e[Ne&255])^oi[Wt++],Ut=($e[Ut>>>24]<<24|$e[Ke>>>16&255]<<16|$e[Ne>>>8&255]<<8|$e[at&255])^oi[Wt++],Te[ze]=ee,Te[ze+1]=me,Te[ze+2]=P,Te[ze+3]=Ut},keySize:8});d.AES=c._createHelper(Qe)}(),n.default=l},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function E(C,y){for(var w=0;w<y.length;w++){var g=y[w];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(C,g.key,g)}}return function(C,y,w){return y&&E(C.prototype,y),w&&E(C,w),C}}();function d(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}var c=function(){var E=function(){function C(){d(this,C)}return l(C,[{key:"createClientObject",value:function(w,g,p,te){return{socket:w,id:g,playURL:p,deviceSerial:te.deviceSerial||"",verificationCode:te.verificationCode||"",resolve:null,reject:null}}},{key:"playCmd",value:function(w){var g={sequence:0,cmd:"realplay",deviceSerial:w.deviceSerial,verificationCode:w.verificationCode,url:w.playURL};return JSON.stringify(g)}},{key:"playbackCmd",value:function(w,g,p){var te={sequence:0,cmd:"playback",deviceSerial:w.deviceSerial,verificationCode:w.verificationCode,url:w.playURL,startTime:g,endTime:p};return JSON.stringify(te)}}]),C}();return E}();n.LocalService=c},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.JSPlayCtrl=void 0;var l=function(){function me(P,Y){for(var Oe=0;Oe<Y.length;Oe++){var N=Y[Oe];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(P,N.key,N)}}return function(P,Y,Oe){return Y&&me(P.prototype,Y),Oe&&me(P,Oe),P}}(),d=o(13),c=E(d);function E(me){return me&&me.__esModule?me:{default:me}}function C(me,P){if(!(me instanceof P))throw new TypeError("Cannot call a class as a function")}var y=0,w=1,g=2,p=11,te=16,ae=31,de=35,ie=36,we=48,Ve=60,ue=61,x=63,O=100,ne=101,Q=0,ye=1,se=0,Ze=1,Qe=0,M=1,Te=15,ze=8,oi=1,wi=50,ui=5,di=2,zi=5*1024*1024,$e=1024*20,st=100,Ke=20,Ne=100,at=200,Ut={width:0,height:0,frameNum:0,yuvData:null},Wt={width:0,height:0,frameNum:0,yuvData:null},kt={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},ee={id:null,cmd:null,data:null,errorCode:0,status:null};n.JSPlayCtrl=function(){function me(P,Y,Oe,N){if(C(this,me),P!=null&&P!==void 0&&typeof P=="string")this.szBasePath=P;else return y;if(Y&&typeof Y=="function")this.fnCallBack=Y;else return y;typeof N=="string"&&(this.staticPath=N),this.decodeWorker=null,this.streamOpenMode=null,this.bOpenStream=!1,this.audioRenderer=null,this.aAudioBuffer=[],this.iAudioBufferSize=0,this.Volume=0,this.oSuperRender=null,this.aVideoFrameBuffer=[],this.YUVBufferSize=oi,this.szOSDTime=null,this.bJSPrintLog=!1,this.bWriteYUVData=!1,this.iYUV10size=0,this.aVideoYUVBuffer=[],this.bWritePCMData=!1,this.iAudioBuffer500Size=0,this.aAudioPCMBuffer=[],this.bWriteRawData=!1,this.iRawDataSize=0,this.aRawDataBuffer=[],this.bWriteRTPData=!0,this.iRTPDataSize=0,this.aRTPDataBuffer=[],this.downloadRTP=!1,this.rtpNum=0,this.bPlaySound=!1,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.audioNum=0,this.videoNum=0,this.FrameForwardLen=1,this.bOnlyPlaySound=!1,this.bVideoCropInfo=!1,this.dataCallBackFun=null,this.YUVBufSizeCBFun=null,this.DecCallBackFun=null,this.DisplayCallBackFun=null,this.PCMCallBackFun=null,this.DecInfoYUV=Ut,this.DisplayInfoYUV=Wt,this.DecInfoPCM=kt,this.nWidth=0,this.nHeight=0,this.nSPSCropLeft=0,this.nSPSCropRight=0,this.nSPSCropTop=0,this.nSPSCropBottom=0,this.sCanvasId=null,this.aDisplayBuf=null,this.bVisibility=!0,this.nDecFrameType=Qe,this.runtimeInfoCBFun=null,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.bDisRect=!1,this.stYUVRect={top:0,left:0,right:0,bottom:0},this.aInputDataLens=[],this.aInputDataBuffer=[],this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.iInputMaxBufSize=zi,this.bIsInput=!1,this.bIsInputBufOver=!1,this.bIsInputBufWillOver=!1,this.iInputDataLen=$e;var fe=this;this.errorCode=w,this.loopNum=0,this.setCallBack=function(I,L,re,J,De){var Ye=ee;Ye.id=Oe,Ye.cmd=L,Ye.data=re,Ye.errorCode=J,Ye.status=De,I.fnCallBack(Ye)},this.convertErrorCode=function(I){switch(I){case 1:return w;case 98:return y;default:return I}},this.arrayBufferCopy=function(I){var L=I.byteLength,re=new Uint8Array(L),J=new Uint8Array(I),De=0;for(De=0;De<L;De++)re[De]=J[De];return re},this.inputDataFun=function(){var I,L,re=0;if(fe.bIsGetYUV=!1,fe.bIsInputBufOver||fe.bIsInputBufWillOver){I=new Uint8Array(1),L=new Uint8Array(I);var J={command:"InputData",data:L.buffer,dataSize:0};fe.decodeWorker.postMessage(J,[J.data])}else if(fe.bPlay&&(!fe.bPause||fe.bOnebyOne)||this.bOnlyPlaySound){for(;fe.aInputDataLens.length>0&&(re+=fe.aInputDataLens.shift(),!(re>fe.iInputDataLen)););I=fe.aInputDataBuffer.splice(0,re),L=new Uint8Array(I);var J={command:"InputData",data:L.buffer,dataSize:re};fe.decodeWorker.postMessage(J,[J.data])}I=null,L=null},this.getPic=function(I,L){if(this.decodeWorker==null||this.oSuperRender==null||!this.bPlay)return g;if(I&&typeof I=="function")this.dataCallBackFun=I;else return y;if(this.iZoomNum===0)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{if(this.iCanvasWidth===0||this.iCanvasHeight===0)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{var re=this.nWidth/this.iCanvasWidth,J=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*re),this.stYUVRect.top=Math.round(this.stDisplayRect.top*J),this.stYUVRect.right=Math.round(this.stDisplayRect.right*re),this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*J)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32)return y}if(this.aDisplayBuf==null)return g;var De=this.arrayBufferCopy(this.aDisplayBuf),Ye={command:L,data:De.buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};return this.decodeWorker.postMessage(Ye,[Ye.data]),w},this.createWorker=function(I){if(window.Worker){if(this.decodeWorker==null){var L=new Blob([(0,c.default)(this.staticPath)]),re=URL.createObjectURL(L);if(this.decodeWorker=new Worker(re),I.bJSPrintLog&&console.log(">>>JSPlayV1.1 createWorker success!"),this.decodeWorker==null)return Ve}this.decodeWorker.onmessage=function(J){var De=null,Ye=J.data;switch(Ye.function){case"printLog":console.log("print JSPlayerSDK log failed");break;case"loaded":De="loaded",I.setCallBack(I,"loaded",0,0,!0);break;case"SetStreamOpenMode":De="SetStreamOpenMode";break;case"OpenStream":if(De="OpenStream",Ye.errorCode===1){fe.bOpenStream=!0;return}break;case"InputData":De="InputData",Ye.errorCode===p&&(fe.bIsInputBufOver=!0,console.log(`yff inputBuffer over set key frame 
`),fe.nDecFrameType!=M&&fe.PlayM4_SetDecodeFrameType(M)),Ye.errorCode===ie&&(fe.bIsInputBufWillOver=!0),Ye.errorCode===ae&&(fe.bIsInputBufOver=!1,fe.bIsInputBufWillOver=!1,fe.aInputDataLens.length>0&&fe.bIsInput?(fe.inputDataFun(),fe.bIsInput=!1):fe.bIsGetYUV=!0);break;case"GetFrameData":if(De="GetFrameData",!fe.bOnlyPlaySound){if(Ye.data!=null&&Ye.frameInfo!=null&&(Ye.frameInfo.width,Ye.frameInfo.height),!fe.bPlay)return;if(fe.errorCode=Ye.errorCode,!fe.bIsFirstFrame&&(Ye.errorCode===ae||Ye.errorCode===de)){Ye.errorCode===ae&&(fe.bIsInputBufOver=!1,fe.bIsInputBufWillOver=!1),fe.loopNum>5?(fe.bIsGetYUV=!0,fe.loopNum=0):(fe.inputDataFun(),fe.loopNum++);break}else fe.bIsInputBufOver||fe.bIsInputBufWillOver?fe.inputDataFun():Ye.type==="videoType"&&(fe.aInputDataLens.length>0&&fe.bIsInput?(fe.inputDataFun(),fe.bIsInput=!1):fe.bIsGetYUV=!0,fe.bIsFirstFrame=!1)}if(fe.bVisibility&&w===Ye.errorCode)switch(Ye.type){case"videoType":if(Ye.data==null||Ye.frameInfo==null)return y;fe.DecCallBackFun!=null&&(fe.DecInfoYUV.height=Ye.frameInfo.height,fe.DecInfoYUV.width=Ye.frameInfo.width,fe.DecInfoYUV.frameNum=Ye.frameInfo.frameNum,fe.DecInfoYUV.yuvData=new Uint8Array(Ye.data),fe.DecCallBackFun(fe.DecInfoYUV)),fe.bIsFirstFrame=!1,I.nWidth=Ye.frameInfo.width,I.nHeight=Ye.frameInfo.height,I.nSPSCropLeft=Ye.frameInfo.cropLeft,I.nSPSCropRight=Ye.frameInfo.cropRight,I.nSPSCropTop=Ye.frameInfo.cropTop,I.nSPSCropBottom=Ye.frameInfo.cropBottom;var et=new Object;if(et.data=Ye.data,et.osdTime=Ye.osd,et.nWidth=Ye.frameInfo.width,et.nHeight=Ye.frameInfo.height,et.frameNum=Ye.frameInfo.frameNum,et.timeStamp=Ye.frameInfo.timeStamp,I.bWriteYUVData){for(var R=new Uint8Array(Ye.data),He=I.aVideoYUVBuffer.length,G=0,ge=R.length;G<ge;G++)I.aVideoYUVBuffer[He+G]=R[G];I.iYUV10size++,R=null}if(I.bWriteYUVData&&I.iYUV10size>=Ke){var xe=new Uint8Array(I.aVideoYUVBuffer);I.downloadFile(xe,"videoYUV.data"),I.aVideoYUVBuffer.splice(0,I.aVideoYUVBuffer.length),I.bWriteYUVData=!1,I.iYUV10size=0,xe=null}I.aVideoFrameBuffer.push(et),et=null;var ke=I.aVideoFrameBuffer.length;if(ke>ui&&(I.bOnebyOne||I.aVideoFrameBuffer.splice(0,di)),I.bOnebyOne&&I.aVideoFrameBuffer.length>=Te){I.setCallBack(I,"OnebyOne",0,0,!1),I.bIsFirstFrame=!0;break}break;case"audioType":if(I.bPlaySound&&!I.bPlayRateChange||fe.bOnlyPlaySound){fe.PCMCallBackFun!=null&&(fe.DecInfoPCM.sampleRate=Ye.frameInfo.samplesPerSec,fe.DecInfoPCM.channel=Ye.frameInfo.channels,fe.DecInfoPCM.bitsPerSample=Ye.frameInfo.bitsPerSample,fe.DecInfoPCM.pcmData=new Uint8Array(Ye.data),fe.DecInfoPCM.length=fe.DecInfoPCM.pcmData.length,fe.PCMCallBackFun(fe.DecInfoPCM));for(var R=new Uint8Array(Ye.data),He=I.aAudioBuffer.length,G=0,ge=R.length;G<ge;G++)I.aAudioBuffer[He+G]=R[G];if(I.iAudioBufferSize++,R=null,I.bWritePCMData){for(var R=new Uint8Array(Ye.data),He=I.aAudioPCMBuffer.length,G=0,ge=R.length;G<ge;G++)I.aAudioPCMBuffer[He+G]=R[G];console.log("audio_type num:"+I.iAudioBuffer500Size+", len:"+R.length),I.iAudioBuffer500Size++,R=null}if(I.bWritePCMData&&I.iAudioBuffer500Size>=st){var ce=new Uint8Array(I.aAudioPCMBuffer);I.downloadFile(ce,"audioPCM.data"),I.aAudioPCMBuffer.splice(0,I.aAudioPCMBuffer.length),I.bWritePCMData=!1,I.iAudioBuffer500Size=0,ce=null}I.iAudioBufferSize>=wi&&(I.audioRenderer.Play(I.aAudioBuffer,I.aAudioBuffer.length,Ye.frameInfo),I.aAudioBuffer.splice(0,I.aAudioBuffer.length),I.aAudioBuffer.length=0,I.iAudioBufferSize=0)}break}break;case"GetRawData":if(De="GetRawData",I.bWriteRawData){for(var X=new Uint8Array(Ye.data),Be=I.aRawDataBuffer.length,G=0,ge=X.length;G<ge;G++)I.aRawDataBuffer[Be+G]=X[G];I.iRawDataSize++,X=null}if(I.bWriteRawData&&I.iRawDataSize>=Ne){var lt=new Uint8Array(I.aRawDataBuffer);I.downloadFile(lt,"rawBuffer.data"),I.aRawDataBuffer.splice(0,I.aRawDataBuffer.length),I.bWriteRawData=!1,I.iRawDataSize=0,lt=null}break;case"PlaySound":De="PlaySound";break;case"GetJPEG":if(De="GetJPEG",Ye.errorCode!==w){console.log("GetJPEG ErrorParam");return}var dt=Ye.data;I.dataCallBackFun(dt);break;case"GetBMP":if(De="GetBMP",Ye.errorCode!==w){console.log("GetBMP ErrorParam");return}var Lt=Ye.data;I.dataCallBackFun(Lt);break;case"RunTimeInfoCallBack":De="RunTimeInfoCallBack";var qt=Ye.nRunTimeModule,Si=Ye.nStrVersion,he=Ye.nFrameTimeStamp,Bi=Ye.nFrameNum,yt=Ye.nErrorCode;I.runtimeInfoCBFun!=null&&I.runtimeInfoCBFun(qt,Si,he,Bi,yt)}(De!=="GetFrameData"&&De!="loaded"||te===Ye.errorCode||ne===Ye.errorCode||O===Ye.errorCode||we===Ye.errorCode)&&I.setCallBack(I,De,0,I.convertErrorCode(Ye.errorCode),!0)}}},this.createWorker(fe),this.draw=function(){if(fe.bPlay){if(!fe.bPause||fe.bOnebyOne){requestAnimationFrame(fe.draw);var I=fe.aVideoFrameBuffer.length;if(fe.YUVBufSizeCBFun!=null&&fe.YUVBufSizeCBFun(I),fe.bOnebyOne){if(I<=ze&&fe.setCallBack(fe,"OnebyOne",0,ae,!0),I<=fe.FrameForwardLen+1){fe.setCallBack(fe,"OnebyOne",0,ae,!0);return}else for(var L=fe.FrameForwardLen;L>1;)fe.aVideoFrameBuffer.shift(),L--;fe.bOnebyOne=!1}if(I>0){var re=fe.aVideoFrameBuffer.shift();fe.aDisplayBuf=re.data;var J=new Uint8Array(fe.aDisplayBuf);fe.bVideoCropInfo?fe.oSuperRender.SR_DisplayFrameData(re.nWidth,re.nHeight,J,re.nWidth-fe.nSPSCropLeft-fe.nSPSCropRight,re.nHeight-fe.nSPSCropTop-fe.nSPSCropBottom):fe.oSuperRender.SR_DisplayFrameData(re.nWidth,re.nHeight,J,re.nWidth,re.nHeight),fe.DisplayCallBackFun!=null&&(fe.DisplayInfoYUV.height=re.nHeight,fe.DisplayInfoYUV.width=re.nWidth,fe.DisplayInfoYUV.frameNum=re.frameNum,fe.DisplayInfoYUV.yuvData=new Uint8Array(J),fe.DisplayCallBackFun(fe.DisplayInfoYUV)),J=null,fe.szOSDTime=re.osdTime,re=null}else fe.setCallBack(fe,"Play",0,ae,!0)}}else fe.bPlay||(fe.aVideoFrameBuffer.splice(0,fe.aVideoFrameBuffer.length),fe.aAudioBuffer.splice(0,fe.aAudioBuffer.length))}}return l(me,[{key:"PlayM4_SetCurrentFrameNum",value:function(Y,Oe){return te}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function(Y){return Y===!0?(this.bJSPrintLog=!0,this.decodeWorker.postMessage({command:"printLog",data:Y})):(this.bJSPrintLog=!1,this.decodeWorker.postMessage({command:"printLog",data:Y})),w}},{key:"PlayM4_DownloadYUVdata",value:function(){return this.bWriteYUVData=!0,w}},{key:"PlayM4_DownloadPCMdata",value:function(){return this.bWritePCMData=!0,w}},{key:"PlayM4_SetDecCallBack",value:function(Y){return Y&&typeof Y=="function"?(this.DecCallBackFun=Y,w):y}},{key:"PlayM4_SetDisplayCallBack",value:function(Y){return Y&&typeof Y=="function"?(this.DisplayCallBackFun=Y,w):y}},{key:"PlayM4_SetPCMCallBack",value:function(Y){return Y&&typeof Y=="function"?(this.PCMCallBackFun=Y,w):y}},{key:"PlayM4_SetStreamOpenMode",value:function(Y){return Y==null||Y===void 0||Y!==se&&Y!==Ze?y:(this.streamOpenMode=Y,w)}},{key:"PlayM4_DownloadRTPData",value:function(Y){this.downloadRTP=Y}},{key:"PlayM4_SetVideoCropInfo",value:function(Y){return Y==null||Y===void 0||typeof Y!="boolean"?y:(this.bVideoCropInfo=Y,w)}},{key:"PlayM4_OpenStream",value:function(Y,Oe,N){if(this.bJSPrintLog&&console.log(">>>JS PlayM4_OpenStream nSysTime:"+(new Date().getMonth()+1)+"-"+new Date().getDate()+" "+new Date().getHours()+":"+new Date().getMinutes()+":"+new Date().getSeconds()+"."+new Date().getMilliseconds()),this.decodeWorker==null)return g;if(this.downloadRTP){var fe=new Uint8Array(Y.buffer);this.DownloadRTPData(fe),console.log("write 40 hik head")}return Y==null||Oe<=0||N<=0?y:(this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bIsFirstFrame=!0,this.bIsGetYUV=!1,this.bIsInput=!1,this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode}),this.decodeWorker.postMessage({command:"OpenStream",data:Y,dataSize:Oe,bufPoolSize:N}),this.bOpenStream=!0,w)}},{key:"PlayM4_CloseStream",value:function(){return this.decodeWorker===null||this.bOpenStream===!1?g:(this.bOnlyPlaySound=!1,this.PlayM4_Stop(),this.decodeWorker.postMessage({command:"CloseStream"}),this.oSuperRender!==null&&(this.oSuperRender.SR_Destroy(),this.oSuperRender=null),this.audioRenderer!==null&&(this.audioRenderer.Stop(),this.audioRenderer=null),this.aAudioBuffer.splice(0,this.aAudioBuffer.length),this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.aVideoYUVBuffer.splice(0,this.aVideoYUVBuffer.length),this.aAudioPCMBuffer.splice(0,this.aAudioPCMBuffer.length),this.aRawDataBuffer.splice(0,this.aRawDataBuffer.length),this.bOpenStream=!1,this.iAudioBufferSize=0,this.szOSDTime=null,w)}},{key:"PlayM4_Destroy",value:function(){return this.decodeWorker===null||(this.PlayM4_CloseStream(),this.decodeWorker.terminate(),this.decodeWorker=null),w}},{key:"PlayM4_InputData",value:function(Y,Oe){var N=this.aInputDataBuffer.length;if(Oe===4){var fe=new Uint8Array(Y.buffer);if(fe[0]===1&&fe[1]===2&&fe[2]===3&&fe[3]===4)return this.bIsFirstFrame?this.inputDataFun():this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,fe=null,w}if(N+Oe>this.iInputMaxBufSize)return console.log("input over"),this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,p;var I=null,L=Oe;switch(this.streamOpenMode){case Ze:I=new Uint8Array(Y.buffer),this.downloadRTP&&(this.DownloadRTPData(I),this.rtpNum++,console.log("STREAM_FILE psNUm:"+this.rtpNum)),this.aInputDataLens.push(Oe);break;case se:L=Oe+4;var re=new Uint32Array([Oe]),J=new Uint8Array(re.buffer);I=new Uint8Array(L),I.set(J,0),I.set(Y,4),this.downloadRTP&&(this.DownloadRTPData(I),this.rtpNum++,console.log("STREAM_REALTIME rtpNUm:"+this.rtpNum)),re=null,J=null,this.aInputDataLens.push(Oe+4);break;default:return te}for(var De=0;De<L;De++)this.aInputDataBuffer[N+De]=I[De];return!this.bPlay&&!this.bOnlyPlaySound||this.decodeWorker===null||this.bOpenStream===!1||(I=null,this.bOnlyPlaySound?this.inputDataFun():this.bIsFirstFrame?this.inputDataFun():this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0),w}},{key:"DownloadRTPData",value:function(Y){if(this.bWriteRTPData){for(var Oe=new Uint8Array(Y),N=this.aRTPDataBuffer.length,fe=0,I=Oe.length;fe<I;fe++)this.aRTPDataBuffer[N+fe]=Oe[fe];this.iRTPDataSize++,Oe=null}if(this.bWriteRTPData&&this.iRTPDataSize>=at){console.log("download"+at+"RTPdata");var L=new Uint8Array(this.aRTPDataBuffer);this.downloadFile(L,"RTP.data"),this.aRTPDataBuffer.splice(0,this.aRTPDataBuffer.length),this.iRTPDataSize=0,this.rtpNum=0,this.downloadRTP=!1,L=null}}},{key:"PlayM4_Play",value:function(Y){if(this.decodeWorker===null)return g;if(this.bJSPrintLog&&console.log(">>>JS PlayM4_Play canvasID: "+Y),Y===null)this.bOnlyPlaySound=!0,this.decodeWorker.postMessage({command:"OnlyPlaySound"}),this.sCanvasId=null;else{if(typeof Y!="string")return y;if(this.bOnebyOne&&(this.bPlayRateChange=!1,this.bOnebyOne=!1,this.bPause=!1,this.draw()),this.bPlay)return w;if(this.oSuperRender==null&&(this.oSuperRender=new SuperRender(Y,this.szBasePath),this.oSuperRender==null))return ue;this.sCanvasId=Y,this.bPlay=!0,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.bOnlyPlaySound=!1,this.draw()}return this.audioRenderer==null&&(this.audioRenderer=new AudioRenderer,this.audioRenderer==null)?ue:(this.decodeWorker.postMessage({command:"Play"}),w)}},{key:"PlayM4_Stop",value:function(){return this.decodeWorker==null||this.oSuperRender==null||!this.bPlay?g:(this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.bPlay=!1,this.bOnebyOne=!1,this.bPause=!1,this.oSuperRender.SR_SetDisplayRect(null),this.iZoomNum=0,this.bDisRect=!1,w)}},{key:"PlayM4_PlayRate",value:function(Y){return this.decodeWorker==null?g:(Y===1?this.bPlayRateChange=!1:this.bPlayRateChange=!0,Y<1&&(Y=1),this.iInputDataLen=Y*$e,this.decodeWorker.postMessage({command:"PlayRate",playRate:Y}),w)}},{key:"PlayM4_Pause",value:function(Y){return this.decodeWorker==null||this.oSuperRender==null||!this.bPlay||this.bOnebyOne||this.bPause==Y?g:typeof Y!="boolean"?y:(this.bPause=Y,this.bIsFirstFrame=!0,Y?this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0):(this.bPlaySound&&this.PlayM4_PlaySound(),this.draw()),w)}},{key:"PlayM4_OneByOne",value:function(Y){return this.decodeWorker==null||this.oSuperRender==null||!this.bPlay?g:Y>10||Y<=0?y:(Y||(Y=1),this.iInputDataLen=$e,this.FrameForwardLen=Y,this.bPause=!0,this.bOnebyOne=!0,this.bIsFirstFrame=!0,this.draw(),w)}},{key:"PlayM4_PlaySound",value:function(Y){return this.decodeWorker===null||this.bOpenStream===!1?g:Y<0||Y>16?y:this.audioRenderer==null&&(this.audioRenderer=new AudioRenderer,this.audioRenderer==null)?ue:(this.decodeWorker.postMessage({command:"PlaySound"}),this.audioRenderer.SetWndNum(Y),this.Volume!==0&&this.audioRenderer.SetVolume(this.Volume),this.audioRenderer.oAudioContext.resume(),this.bPlaySound=!0,w)}},{key:"PlayM4_StopSound",value:function(){return this.decodeWorker==null||this.audioRenderer==null||!this.bPlaySound?g:(this.decodeWorker.postMessage({command:"StopSound"}),this.bPlaySound=!1,w)}},{key:"PlayM4_SetDisplayBuf",value:function(Y){return this.decodeWorker==null?g:Y<=0?y:(this.YUVBufferSize=Y,w)}},{key:"PlayM4_SetSecretKey",value:function(Y,Oe,N){if(this.decodeWorker==null||this.bOpenStream===!1)return g;if(Oe==null)return y;if(ye===Y)if(N===128){if(Oe==null||Oe===void 0)return y}else return y;else if(Q!==Y)return y;return this.decodeWorker.postMessage({command:"SetSecretKey",data:Oe,nKeyType:Y,nKeyLen:N}),w}},{key:"PlayM4_SetDecodeFrameType",value:function(Y){return console.log("PlayM4_SetDecodeFrameType nFrameType:"+Y),this.decodeWorker==null||this.oSuperRender==null?g:Y!==Qe&&Y!==M?y:(this.bJSPrintLog&&console.log(">>>JS PlayM4_SetDecodeFrameType :"+Y),this.nDecFrameType=Y,this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:Y}),w)}},{key:"PlayM4_SetIFrameDecInterval",value:function(Y){return this.nDecFrameType!==M?g:Y<0?y:(this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:Y}),w)}},{key:"PlayM4_SetLostFrameMode",value:function(Y){return Y<0||Y>1?y:(this.decodeWorker.postMessage({command:"SetLostFrameMode",data:Y}),w)}},{key:"PlayM4_SetDisplayRegion",value:function(Y,Oe){if(this.decodeWorker===null||this.bPlay===!1||this.oSuperRender===null||this.canvasId===null)return g;if(Oe===!0){if(Y==null)return y;if(typeof Y.left=="number"&&typeof Y.top=="number"&&typeof Y.right=="number"&&typeof Y.bottom=="number"){if(Y.right<0||Y.left<0||Y.top<0||Y.bottom<0)return y;var N=Y.left,fe=Y.right,I=Y.top,L=Y.bottom,re=document.getElementById(this.sCanvasId).getBoundingClientRect();if(this.iCanvasWidth=re.width,this.iCanvasHeight=re.height,fe-N<16||L-I<16||fe-N>this.iCanvasWidth||L-I>this.iCanvasHeight)return y;this.iZoomNum!==0&&(N=Math.round(N/this.iRatio_x)+this.stDisplayRect.left,I=Math.round(I/this.iRatio_y)+this.stDisplayRect.top,fe=Math.round(fe/this.iRatio_x)+this.stDisplayRect.left,L=Math.round(L/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:I,left:N,right:fe,bottom:L},this.oSuperRender.SR_SetDisplayRect(this.stDisplayRect),this.bDisRect=!0;var J=fe-N,De=L-I;this.iRatio_x=this.iCanvasWidth/J,this.iRatio_y=this.iCanvasHeight/De}else return y}else this.oSuperRender.SR_SetDisplayRect(null),this.iZoomNum=0,this.bDisRect=!1;return(this.bPause||this.bOnebyOne||this.bPlayRateChange)&&(this.bVideoCropInfo?this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,new Uint8Array(this.aDisplayBuf),this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom):this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,new Uint8Array(this.aDisplayBuf),this.nWidth,this.nHeight)),w}},{key:"PlayM4_GetBMP",value:function(Y){return this.getPic(Y,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function(Y){return this.getPic(Y,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function(Y){return this.decodeWorker==null||this.audioRenderer==null?g:Y<0||Y>100||Y===""?y:(this.Volume=Y,this.audioRenderer.SetVolume(Y),w)}},{key:"PlayM4_GetVolume",value:function(Y){if(this.decodeWorker==null||this.audioRenderer==null)return g;if(Y&&typeof Y=="function"){var Oe=this.audioRenderer.GetVolume();return Oe===null?x:(Y(Oe),w)}else return y}},{key:"PlayM4_GetOSDTime",value:function(Y){return this.decodeWorker==null||!this.bPlay?g:Y&&typeof Y=="function"?(Y(this.szOSDTime),w):y}},{key:"PlayM4_IsVisible",value:function(Y){return this.bVisibility=Y,w}},{key:"PlayM4_GetSdkVersion",value:function(){return"07040005"}},{key:"PlayM4_GetBuildDate",value:function(){return"20230303"}},{key:"PlayM4_GetInputBufSize",value:function(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function(Y){return Y>0?(this.iInputMaxBufSize=Y,console.log(">>JSBufferSize SetInputBufSize:"+this.iInputMaxBufSize),w):y}},{key:"PlayM4_GetYUVBufSize",value:function(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function(Y){return this.decodeWorker==null?g:Y&&typeof Y=="function"?(Y(this.nWidth,this.nHeight),w):y}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function(Y){return Y&&typeof Y=="function"?(this.YUVBufSizeCBFun=Y,w):y}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function(){return this.YUVBufSizeCBFun!=null&&(this.YUVBufSizeCBFun=null),w}},{key:"PlayM4_ClearCanvas",value:function(){return this.oSuperRender==null?g:(this.bVideoCropInfo?this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom):this.oSuperRender.SR_DisplayFrameData(this.nWidth,this.nHeight,null,this.nWidth,this.nHeight),w)}},{key:"PlayM4_ReleaseInputBuffer",value:function(){return this.aInputDataBuffer===null?g:(this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),w)}},{key:"PlayM4_GetDecodeFrameType",value:function(){return this.nDecFrameType}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function(Y,Oe){return this.runtimeInfoCBFun=Oe,this.decodeWorker.postMessage({command:"SetRunTimeInfoCB",nModuleType:Y}),w}},{key:"PlayM4_SetDemuxModel",value:function(Y,Oe){return this.decodeWorker.postMessage({command:"SetDemuxModel",nIdemuxType:Y,bTrue:Oe}),w}},{key:"PlayM4_SkipErrorData",value:function(Y){return this.decodeWorker.postMessage({command:"SkipErrorData",bSkip:Y}),w}},{key:"PlayM4_SetDecodeERC",value:function(Y){return this.decodeWorker.postMessage({command:"SetDecodeERC",nLevel:Y}),w}},{key:"PlayM4_SetANRParam",value:function(Y,Oe){return this.decodeWorker.postMessage({command:"SetANRParam",nEnable:Y,nANRLevel:Oe}),w}},{key:"PlayM4_SetResampleValue",value:function(Y,Oe){return this.decodeWorker.postMessage({command:"SetResampleValue",nEnable:Y,resampleValue:Oe}),w}},{key:"PlayM4_SetGlobalBaseTime",value:function(Y,Oe,N,fe,I,L,re){return Y<2e3||Y>3e3||Oe<1||Oe>12||Y<0||Oe<0||N<0||fe<0||I<0||L<0||re<0?te:(this.decodeWorker.postMessage({command:"SetGlobalBaseTime",year:Y,month:Oe,day:N,hour:fe,min:I,sec:L,ms:re}),w)}},{key:"downloadFile",value:function(Y,Oe){var N=Y;Y instanceof Blob||Y instanceof File||(N=new Blob([Y]));var fe=window.URL.createObjectURL(N),I=window.document.createElement("a");I.href=fe,I.download=Oe;var L=document.createEvent("MouseEvents");L.initEvent("click",!0,!0),I.dispatchEvent(L)}}]),me}()},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"https://open.ys7.com/assets/ezuikit_v3.6";return`
/**
 * Created by wangweijie5 on 2016/12/5.
 */
(function (event) {
    const AUDIO_TYPE = 0;	// 音频
    const VIDEO_TYPE = 1;   // 视频
    const PRIVT_TYPE = 2;  // 私有帧

    const PLAYM4_AUDIO_FRAME = 100; // 音频帧
    const PLAYM4_VIDEO_FRAME = 101; // 视频帧

    const PLAYM4_OK = 1;
    const PLAYM4_ORDER_ERROR = 2;
    const PLAYM4_DECODE_ERROR = 44 	// 解码失败
    const PLAYM4_NOT_KEYFRAME = 48; 	// 非关键帧
    const PLAYM4_NEED_MORE_DATA = 31;   // 需要更多数据才能解析
    const PLAYM4_NEED_NEET_LOOP = 35; //丢帧需要下个循环
    const PLAYM4_SYS_NOT_SUPPORT = 16; 	// 不支持

    importScripts('`+c+`/js/playctrl/Decoder.js');
    Module.addOnPostRun(function () {
        postMessage({ 'function': "loaded" });
    });

    var iStreamMode = 0;  // 流模式

    var bOpenMode = false;
    var bOpenStream = false;

    var funGetFrameData = null;
    var funGetAudFrameData = null;

    var bWorkerPrintLog = false;//worker层log开关

    var g_nPort = -1;

    self.JSPlayM4_RunTimeInfoCallBack = function (nPort, pstRunTimeInfo, pUser) {
        let port = nPort;
        let user = pUser;
        let nRunTimeModule = Module.HEAP32[pstRunTimeInfo >> 2];
        let nStrVersion = Module.HEAP32[pstRunTimeInfo + 4 >> 2];
        let nFrameTimeStamp = Module.HEAP32[pstRunTimeInfo + 8 >> 2];
        let nFrameNum = Module.HEAP32[pstRunTimeInfo + 12 >> 2];
        let nErrorCode = Module.HEAP32[pstRunTimeInfo + 16 >> 2];
        // console.log("nRunTimeModule:"+nRunTimeModule+",nFrameNum:"+nFrameNum+",nErrorCode:"+nErrorCode);
        postMessage({ 'function': "RunTimeInfoCallBack", 'nRunTimeModule': nRunTimeModule, 'nStrVersion': nStrVersion, 'nFrameTimeStamp': nFrameTimeStamp, 'nFrameNum': nFrameNum, 'nErrorCode': nErrorCode });
    }

    onmessage = function (event) {
        var eventData = event.data;
        var res = 0;
        switch (eventData.command) {
            case "printLog":
                let downloadFlag = eventData.data;
                if (downloadFlag === true) {
                    bWorkerPrintLog = true;
                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);
                }
                else {
                    bWorkerPrintLog = false;
                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);
                }

                if (res !== PLAYM4_OK) {
                    console.log("DecodeWorker.js: PlayerSDK print log failed,res" + res);
                    postMessage({ 'function': "printLog", 'errorCode': res });
                }
                break;
            case "SetPlayPosition":
                let nFrameNumOrTime = eventData.data;
                let enPosType = eventData.type;
                // res = Module._SetPlayPosition(nFrameNumOrTime,enPosType);
                // if (res !== PLAYM4_OK)
                // {
                //     postMessage({'function': "SetPlayPosition", 'errorCode': res});
                //     return;
                // }
                // //有没有buffer需要清除

                break;
            case "SetStreamOpenMode":
                //获取端口号
                g_nPort = Module._GetPort();
                //设置流打开模式
                iStreamMode = eventData.data;
                res = Module._SetStreamOpenMode(g_nPort, iStreamMode);
                if (res !== PLAYM4_OK) {
                    postMessage({ 'function': "SetStreamOpenMode", 'errorCode': res });
                    return;
                }
                bOpenMode = true;
                break;

            case "OpenStream":
                // 接收到的数据
                var iHeadLen = eventData.dataSize;
                var pHead = Module._malloc(iHeadLen + 4);
                if (pHead === null) {
                    return;
                }
                var aHead = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);
                aHead.set(eventData.data);
                res = Module._OpenStream(g_nPort, pHead, iHeadLen, eventData.bufPoolSize);
                postMessage({ 'function': "OpenStream", 'errorCode': res });
                if (res !== PLAYM4_OK) {
                    //释放内存
                    Module._free(pHead);
                    pHead = null;
                    return;
                }
                bOpenStream = true;
                break;
            case "Play":
                let resP = Module._Play(g_nPort);
                if (resP !== PLAYM4_OK) {
                    return;
                }
                break;
            case "InputData":
                // 接收到的数据
                var iLen = eventData.dataSize;
                if (iLen > 0) {
                    var pInputData = Module._malloc(iLen);
                    if (pInputData === null) {
                        return;
                    }
                    var inputData = new Uint8Array(eventData.data);
                    // var aInputData = Module.HEAPU8.subarray(pInputData, pInputData + iLen);
                    // aInputData.set(inputData);
                    Module.writeArrayToMemory(inputData, pInputData);
                    inputData = null;
                    res = Module._InputData(g_nPort, pInputData, iLen);
                    if (res !== PLAYM4_OK) {
                        let errorCode = Module._GetLastError(g_nPort);
                        let sourceRemain = Module._GetSourceBufferRemain(g_nPort);
                        postMessage({ 'function': "InputData", 'errorCode': errorCode, "sourceRemain": sourceRemain });
                    }
                    Module._free(pInputData);
                    pInputData = null;
                } else {
                    let sourceRemain = Module._GetSourceBufferRemain(g_nPort);
                    if (sourceRemain == 0) {
                        // console.log("C buffer and JS buffer size is both 0");
                        postMessage({ 'function': "InputData", 'errorCode': PLAYM4_NEED_MORE_DATA });
                        return;
                    }
                }

                /////////////////////
                if (funGetFrameData === null) {
                    funGetFrameData = Module.cwrap('GetFrameData', 'number');
                }

                while (bOpenMode && bOpenStream) {

                    var ret = getFrameData(funGetFrameData);
                    // 直到获取视频帧或数据不足为止
                    if (PLAYM4_VIDEO_FRAME === ret || PLAYM4_NEED_MORE_DATA === ret || PLAYM4_ORDER_ERROR === ret || PLAYM4_NEED_NEET_LOOP === ret)//PLAYM4_VIDEO_FRAME === ret ||
                    {
                        break;
                    }
                }
                break;

            case "SetSecretKey":
                var keyLen = eventData.nKeyLen;
                var pKeyData = Module._malloc(keyLen);
                if (pKeyData === null) {
                    return;
                }
                var nKeySize = eventData.data.length
                var bufData = stringToBytes(eventData.data);
                var aKeyData = Module.HEAPU8.subarray(pKeyData, pKeyData + keyLen);
                let u8array = new Uint8Array(keyLen);
                aKeyData.set(u8array, 0);
                aKeyData.set(new Uint8Array(bufData));
                aKeyData = null;
                u8array = null;

                res = Module._SetSecretKey(g_nPort, eventData.nKeyType, pKeyData, keyLen);//, nKeySize
                if (res !== PLAYM4_OK) {
                    postMessage({ 'function': "SetSecretKey", 'errorCode': res });
                    Module._free(pKeyData);
                    pKeyData = null;
                    return;
                }

                Module._free(pKeyData);
                pKeyData = null;
                break;

            case "GetBMP":
                var nBMPWidth = eventData.width;
                var nBMPHeight = eventData.height;
                var pYUVData = eventData.data;
                var nYUVSize = nBMPWidth * nBMPHeight * 3 / 2;
                var oBMPCropRect = eventData.rect;

                var pDataYUV = Module._malloc(nYUVSize);
                if (pDataYUV === null) {
                    return;
                }

                Module.writeArrayToMemory(new Uint8Array(pYUVData, 0, nYUVSize), pDataYUV);

                // 分配BMP空间
                var nBmpSize = nBMPWidth * nBMPHeight * 4 + 60;
                var pBmpData = Module._malloc(nBmpSize);
                var pBmpSize = Module._malloc(4);
                if (pBmpData === null || pBmpSize === null) {
                    Module._free(pDataYUV);
                    pDataYUV = null;

                    if (pBmpData != null) {
                        Module._free(pBmpData);
                        pBmpData = null;
                    }

                    if (pBmpSize != null) {
                        Module._free(pBmpSize);
                        pBmpSize = null;
                    }
                    return;
                }

                //Module._memset(pBmpSize, nBmpSize, 4); // 防止bmp截图出现输入数据过大的错误码
                Module.setValue(pBmpSize, nBmpSize, "i32");
                res = Module._GetBMP(g_nPort, pDataYUV, nYUVSize, pBmpData, pBmpSize,
                    oBMPCropRect.left, oBMPCropRect.top, oBMPCropRect.right, oBMPCropRect.bottom);
                if (res !== PLAYM4_OK) {
                    postMessage({ 'function': "GetBMP", 'errorCode': res });
                    Module._free(pDataYUV);
                    pDataYUV = null;
                    Module._free(pBmpData);
                    pBmpData = null;
                    Module._free(pBmpSize);
                    pBmpSize = null;
                    return;
                }

                // 获取BMP图片大小
                var nBmpDataSize = Module.getValue(pBmpSize, "i32");

                // 获取BMP图片数据
                var aBmpData = new Uint8Array(nBmpDataSize);
                aBmpData.set(Module.HEAPU8.subarray(pBmpData, pBmpData + nBmpDataSize));

                postMessage({ 'function': "GetBMP", 'data': aBmpData, 'errorCode': res }, [aBmpData.buffer]);
                aBmpData = null;
                if (pDataYUV != null) {
                    Module._free(pDataYUV);
                    pDataYUV = null;
                }
                if (pBmpData != null) {
                    Module._free(pBmpData);
                    pBmpData = null;
                }
                if (pBmpSize != null) {
                    Module._free(pBmpSize);
                    pBmpSize = null;
                }
                break;

            case "GetJPEG":
                var nJpegWidth = eventData.width;
                var nJpegHeight = eventData.height;
                var pYUVData1 = eventData.data;
                var nYUVSize1 = nJpegWidth * nJpegHeight * 3 / 2;
                var oJpegCropRect = eventData.rect;

                var pDataYUV1 = Module._malloc(nYUVSize1);
                if (pDataYUV1 === null) {
                    return;
                }

                Module.writeArrayToMemory(new Uint8Array(pYUVData1, 0, nYUVSize1), pDataYUV1);

                // 分配JPEG空间
                var pJpegData = Module._malloc(nYUVSize1);
                var pJpegSize = Module._malloc(4);
                if (pJpegData === null || pJpegSize === null) {
                    if (pJpegData != null) {
                        Module._free(pJpegData);
                        pJpegData = null;
                    }

                    if (pJpegSize != null) {
                        Module._free(pJpegSize);
                        pJpegSize = null;
                    }

                    if (pDataYUV1 != null) {
                        Module._free(pDataYUV1);
                        pDataYUV1 = null;
                    }
                    return;
                }

                Module.setValue(pJpegSize, nJpegWidth * nJpegHeight * 2, "i32");    // JPEG抓图，输入缓冲长度不小于当前帧YUV大小

                res = Module._GetJPEG(g_nPort, pDataYUV1, nYUVSize1, pJpegData, pJpegSize,
                    oJpegCropRect.left, oJpegCropRect.top, oJpegCropRect.right, oJpegCropRect.bottom);
                if (res !== PLAYM4_OK) {
                    postMessage({ 'function': "GetJPEG", 'errorCode': res });
                    if (pJpegData != null) {
                        Module._free(pJpegData);
                        pJpegData = null;
                    }

                    if (pJpegSize != null) {
                        Module._free(pJpegSize);
                        pJpegSize = null;
                    }

                    if (pDataYUV1 != null) {
                        Module._free(pDataYUV1);
                        pDataYUV1 = null;
                    }
                    return;
                }

                // 获取JPEG图片大小
                var nJpegSize = Module.getValue(pJpegSize, "i32");

                // 获取JPEG图片数据
                var aJpegData = new Uint8Array(nJpegSize);
                aJpegData.set(Module.HEAPU8.subarray(pJpegData, pJpegData + nJpegSize));

                postMessage({ 'function': "GetJPEG", 'data': aJpegData, 'errorCode': res }, [aJpegData.buffer]);

                nJpegSize = null;
                aJpegData = null;

                if (pDataYUV1 != null) {
                    Module._free(pDataYUV1);
                    pDataYUV1 = null;
                }
                if (pJpegData != null) {
                    Module._free(pJpegData);
                    pJpegData = null;
                }
                if (pJpegSize != null) {
                    Module._free(pJpegSize);
                    pJpegSize = null;
                }
                break;

            case "SetDecodeFrameType":
                var nFrameType = eventData.data;
                res = Module._SetDecodeFrameType(g_nPort, nFrameType);
                if (res !== PLAYM4_OK) {
                    postMessage({ 'function': "SetDecodeFrameType", 'errorCode': res });
                    return;
                }
                break;
            case "CloseStream":
                //stop
                let resS = Module._Stop(g_nPort);
                if (resS !== PLAYM4_OK) {
                    postMessage({ 'function': "Stop", 'errorCode': res });
                    return;
                }
                //closeStream
                res = Module._CloseStream(g_nPort);
                if (res !== PLAYM4_OK) {
                    postMessage({ 'function': "CloseStream", 'errorCode': res });
                    return;
                }
                //freePort
                let resF = Module._FreePort(g_nPort);
                if (resF !== PLAYM4_OK) {
                    postMessage({ 'function': "FreePort", 'errorCode': res });
                    return;
                }
                break;
            case "PlaySound":
                let resPS = Module._PlaySound(g_nPort);
                if (resPS !== PLAYM4_OK) {
                    console.log("PlaySound failed");
                    return;
                }
                break;
            case "StopSound":
                let resSS = Module._StopSound();
                if (resSS !== PLAYM4_OK) {
                    console.log("StopSound failed");
                    return;
                }
                break;
            case "SetVolume":
                let resSV = Module._SetVolume(g_nPort, eventData.volume);
                if (resSV !== PLAYM4_OK) {
                    console.log("Audio SetVolume failed");
                    return;
                }
                break;
            case "GetVolume":
                let volume = Module._GetVolume();
                if (volume > 0) {
                    postMessage({ 'function': "GetVolume", 'volume': volume });
                }
                else {
                    console.log("Audio GetVolume failed");
                    return;
                }
                break;
            case "OnlyPlaySound":
                let resOPS = Module._OnlyPlaySound(g_nPort);
                if (resOPS !== PLAYM4_OK) {
                    console.log("OnlyPlaySound failed");
                    return;
                }
                break;
            case "Pause":
                let resPa = Module._Pause(g_nPort, eventData.bPlay);
                if (resPa !== PLAYM4_OK) {
                    console.log("Pause failed");
                    return;
                }
            case "PlayRate":
                Module._SetPlayRate(g_nPort, eventData.playRate);
                break;
            case "SetIFrameDecInterval":
                Module._SetIFrameDecInterval(g_nPort, eventData.data);
                break;
            case "SetLostFrameMode":
                Module._SetLostFrameMode(g_nPort, eventData.data);
                break;
            case "SetDemuxModel":
                Module._SetDemuxModel(g_nPort, eventData.nIdemuxType, eventData.bTrue);
                break;
            case "SkipErrorData":
                Module._SkipErrorData(g_nPort, eventData.bSkip);
                break;
            case "SetDecodeERC":
                Module._SetDecodeERC(g_nPort, eventData.nLevel);
                break;
            case "SetANRParam":
                Module._SetANRParam(g_nPort, eventData.nEnable, eventData.nANRLevel);
                break;
            case "SetResampleValue":
                Module._SetResampleValue(g_nPort, eventData.nEnable, eventData.resampleValue);
                break;
            case "GetLastError":
                let errorCode = Module._GetLastError(g_nPort);
                postMessage({ 'function': "GetLastError", 'errorCode': errorCode });
                break;
            case "SetGlobalBaseTime":
                Module._SetGlobalBaseTime(g_nPort, eventData.year, eventData.month, eventData.day, eventData.hour, eventData.min, eventData.sec, eventData.ms);
                break;
            case "SetRunTimeInfoCB":
                Module._SetRunTimeInfoCallBackEx(g_nPort, eventData.nModuleType, 0);
                break;
            default:
                break;
        }
    };

    function getOSDTime(oFrameInfo) {
        var iYear = oFrameInfo.year;
        var iMonth = oFrameInfo.month;
        var iDay = oFrameInfo.day;
        var iHour = oFrameInfo.hour;
        var iMinute = oFrameInfo.minute;
        var iSecond = oFrameInfo.second;

        if (iMonth < 10) {
            iMonth = "0" + iMonth;
        }
        if (iDay < 10) {
            iDay = "0" + iDay;
        }
        if (iHour < 10) {
            iHour = "0" + iHour;
        }
        if (iMinute < 10) {
            iMinute = "0" + iMinute;
        }
        if (iSecond < 10) {
            iSecond = "0" + iSecond;
        }

        return iYear + "-" + iMonth + "-" + iDay + " " + iHour + ":" + iMinute + ":" + iSecond;
    }
    // 获取帧数据
    function getFrameData(fun) {
        // function getFrameData() {
        // 获取帧数据
        // var res = Module._GetFrameData();
        var res = fun();
        if (res === PLAYM4_OK) {
            var oFrameInfo = Module._GetFrameInfo();
            switch (oFrameInfo.frameType) {
                case AUDIO_TYPE:
                    var iSize = oFrameInfo.frameSize;
                    if (0 === iSize) {
                        return -1;
                    }
                    var pPCM = Module._GetFrameBuffer();
                    // var audioBuf = new ArrayBuffer(iSize);
                    var aPCMData = new Uint8Array(iSize);
                    aPCMData.set(Module.HEAPU8.subarray(pPCM, pPCM + iSize));
                    if (bWorkerPrintLog) {
                        console.log("<<<Worker: audio media Info: nSise:" + oFrameInfo.frameSize + ",nSampleRate:" + oFrameInfo.samplesPerSec + ',channel:' + oFrameInfo.channels + ',bitsPerSample:' + oFrameInfo.bitsPerSample);
                    }
                    postMessage({
                        'function': "GetFrameData", 'type': "audioType", 'data': aPCMData.buffer,
                        'frameInfo': oFrameInfo, 'errorCode': res
                    }, [aPCMData.buffer]);

                    oFrameInfo = null;
                    pPCM = null;
                    aPCMData = null;
                    return PLAYM4_AUDIO_FRAME;

                case VIDEO_TYPE:
                    var szOSDTime = getOSDTime(oFrameInfo);

                    var iWidth = oFrameInfo.width;
                    var iHeight = oFrameInfo.height;

                    var iYUVSize = iWidth * iHeight * 3 / 2;
                    if (0 === iYUVSize) {
                        return -1;
                    }

                    var pYUV = Module._GetFrameBuffer();

                    // 图像数据渲染后压回，若从主码流切到子码流，存在数组大小与图像大小不匹配现象
                    var aYUVData = new Uint8Array(iYUVSize);
                    aYUVData.set(Module.HEAPU8.subarray(pYUV, pYUV + iYUVSize));
                    if (bWorkerPrintLog) {
                        console.log("<<<Worker: video media Info: Width:" + oFrameInfo.width + ",Height:" + oFrameInfo.height + ",timeStamp:" + oFrameInfo.timeStamp);
                    }

                    postMessage({
                        'function': "GetFrameData", 'type': "videoType", 'data': aYUVData.buffer,
                        'dataLen': aYUVData.length, 'osd': szOSDTime, 'frameInfo': oFrameInfo, 'errorCode': res
                    }, [aYUVData.buffer]);

                    oFrameInfo = null;
                    pYUV = null;
                    aYUVData = null;
                    return PLAYM4_VIDEO_FRAME;

                case PRIVT_TYPE:
                    postMessage({
                        'function': "GetFrameData", 'type': "", 'data': null,
                        'dataLen': -1, 'osd': 0, 'frameInfo': null, 'errorCode': PLAYM4_SYS_NOT_SUPPORT
                    });
                    return PLAYM4_SYS_NOT_SUPPORT;

                default:
                    postMessage({
                        'function': "GetFrameData", 'type': "", 'data': null,
                        'dataLen': -1, 'osd': 0, 'frameInfo': null, 'errorCode': PLAYM4_SYS_NOT_SUPPORT
                    });
                    return PLAYM4_SYS_NOT_SUPPORT;
            }
        }
        else {
            let errorCode = Module._GetLastError(g_nPort);
            //解码失败返回裸数据
            if (PLAYM4_DECODE_ERROR === errorCode) {
                var rawInfo = Module._GetRawDataInfo();
                var pRawData = Module._GetRawDataBuffer();
                var aRawData = new Uint8Array(rawInfo.isize);
                aRawData.set(Module.HEAPU8.subarray(pRawData, pRawData + rawInfo.isize));
                postMessage({
                    'function': "GetRawData", 'type': "", 'data': aRawData.buffer,
                    'rawDataLen': rawInfo.isize, 'osd': 0, 'frameInfo': null, 'errorCode': errorCode
                });
                rawInfo = null;
                pRawData = null;
                aRawData = null;
            }
            //需要更多数据
            if (PLAYM4_NEED_MORE_DATA === errorCode || PLAYM4_SYS_NOT_SUPPORT === errorCode || PLAYM4_NEED_NEET_LOOP === errorCode) {
                postMessage({
                    'function': "GetFrameData", 'type': "", 'data': null,
                    'dataLen': -1, 'osd': 0, 'frameInfo': null, 'errorCode': errorCode
                });
            }
            return errorCode;
        }
    }

    // 开始计算时间
    function startTime() {
        return new Date().getTime();
    }

    // 结束计算时间
    function endTime() {
        return new Date().getTime();
    }

    // 字母字符串转byte数组
    function stringToBytes(str) {
        var ch, st, re = [];
        for (var i = 0; i < str.length; i++) {
            ch = str.charCodeAt(i);  // get char
            st = [];                 // set up "stack"
            do {
                st.push(ch & 0xFF);  // push byte to stack
                ch = ch >> 8;          // shift value down by 1 byte
            }
            while (ch);
            // add stack contents to result
            // done because chars have "wrong" endianness
            re = re.concat(st.reverse());
        }
        // return an array of bytes
        return re;
    }
})();
`};n.default=l},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.StorageManager=void 0;var l=function(){function ue(x,O){for(var ne=0;ne<O.length;ne++){var Q=O[ne];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(x,Q.key,Q)}}return function(x,O,ne){return O&&ue(x.prototype,O),ne&&ue(x,ne),x}}(),d=o(2),c=o(0),E=o(15),C=y(E);function y(ue){return ue&&ue.__esModule?ue:{default:ue}}function w(ue,x){if(!(ue instanceof x))throw new TypeError("Cannot call a class as a function")}var g="Web/RecordFiles/",p="Web/PlaybackFiles/",te=1e3,ae=1,de=3001;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.URL=window.URL||window.webkitURL;var ie=function(){function ue(x,O,ne,Q){w(this,ue),this.szUUID=x,this.szFileName=O,this.iStreamType=ne,this.szPath="",this.bStart=!1,this.aStreamList=[],this.options=Q}return l(ue,[{key:"init",value:function(){var O=this;this.iStreamType===0?this.szPath=g:this.iStreamType===1&&(this.szPath=p),this.szPath+=this.getDateDir();var ne=O.szPath.split("/"),Q=new Promise(function(ye){window.requestFileSystem(window.TEMPORARY,O.options.iFileSize,function(se){O.createDir(se.root,ne,function(){ye()})},O.errorHandler)});return Q}},{key:"getDateDir",value:function(){return c.oTool.dateFormat(new Date,"yyyy-MM-dd")}},{key:"createDir",value:function(O,ne,Q){var ye=this;ne.length?O.getDirectory(ne[0],{create:!0},function(se){ye.createDir(se,ne.slice(1),Q)},ye.errorHandler):Q()}},{key:"errorHandler",value:function(){}},{key:"writeFileHeader",value:function(O){var ne=this;window.requestFileSystem(window.TEMPORARY,ne.options.iFileSize,function(Q){Q.root.getFile(ne.szPath+"/"+ne.szFileName,{create:!0},function(ye){ye.createWriter(function(se){se.onwriteend=function(){ne.bStart=!0,ne.writeFile(se)},se.onerror=function(){},se.seek(se.length);var Ze=new Blob([O]);se.write(Ze)},ne.errorHandler)},ne.errorHandler)},ne.errorHandler)}},{key:"writeFileContent",value:function(O){this.aStreamList.push(O)}},{key:"writeFile",value:function(O){var ne=this;if(this.bStart)if(this.aStreamList.length>0){var Q=this.aStreamList.shift();if(O.seek(O.length),O.length>=this.options.iFileSize){this.options.cbEventHandler&&this.options.cbEventHandler(de,this.szUUID);return}var ye=new Blob([Q]);O.write(ye)}else setTimeout(function(){ne.writeFile(O)},te)}},{key:"stopWriteFile",value:function(){var O=this;this.bStart=!1,this.aStreamList.length=0;var ne=new Promise(function(Q){window.requestFileSystem(window.TEMPORARY,O.options.iFileSize,function(ye){ye.root.getFile(O.szPath+"/"+O.szFileName,{create:!1},function(se){se.file(function(Ze){Q(),c.oTool.downloadFile(Ze,Ze.name)})},O.errorHandler)},O.errorHandler)});return ne}}]),ue}(),we=function(){function ue(x,O,ne,Q,ye,se,Ze,Qe){w(this,ue),this.szBasePath=x,this.szUUID=O,this.szFileName=ne,this.aHeadBuf=new Uint8Array(Q),this.iPackType=ye,this.iStreamType=se,this.oWorker=null,this.oFileSystem=null,this.options=Ze,this.bHead=!0,this.staticPath=Qe}return l(ue,[{key:"init",value:function(){var O=this,ne=new Promise(function(Q,ye){O.initFileSystem().then(function(){O.initWorker().then(function(){Q(O.szUUID)},function(se){ye(se)})},function(se){ye(se)})});return ne}},{key:"initFileSystem",value:function(){var O=this;this.oFileSystem=new ie(this.szUUID,this.szFileName,this.iStreamType,this.options);var ne=new Promise(function(Q,ye){O.oFileSystem.init().then(function(){Q()},function(se){ye(se)})});return ne}},{key:"initWorker",value:function(){var O=this,ne=new Promise(function(Q){var ye=new Blob([(0,C.default)(O.staticPath)]),se=URL.createObjectURL(ye);O.oWorker=new Worker(se),O.oWorker.onmessage=function(Ze){var Qe=Ze.data,M=O.iPackType;if(O.options.iPackage===1&&(M=12),Qe.type==="loaded")O.oWorker.postMessage({type:"create",buf:O.aHeadBuf.buffer,len:40,packType:M},[O.aHeadBuf.buffer]);else if(Qe.type==="created")Q();else if(Qe.type==="outputData"){var Te=new Uint8Array(Qe.buf);O.options.iPackage===1?O.bHead?(O.oFileSystem.writeFileHeader(Te),O.bHead=!1):O.oFileSystem.writeFileContent(Te):ae===Qe.dType?O.oFileSystem.writeFileHeader(Te):O.oFileSystem.writeFileContent(Te)}}});return ne}},{key:"inputData",value:function(O){if(this.oWorker){var ne=new Uint8Array(O);this.oWorker.postMessage({type:"inputData",buf:ne.buffer,len:ne.length},[ne.buffer])}}},{key:"stopRecord",value:function(){var O=this,ne=new Promise(function(Q,ye){O.oWorker?O.oWorker.postMessage({type:"release"}):ye(),O.oFileSystem?O.oFileSystem.stopWriteFile().then(function(){O.bHead=!0,Q()},function(){ye()}):ye()});return ne}}]),ue}(),Ve=function(){var ue=Symbol("STORAGELIST"),x=function(){function O(ne,Q,ye){w(this,O),this.szBasePath=ne,this[ue]={},this.options={iFileSize:1024*1024*1024},Object.assign(this.options,Q),typeof Q.staticPath=="string"&&(this.staticPath=Q.staticPath)}return l(O,[{key:"startRecord",value:function(Q,ye,se,Ze,Qe){var M=this,Te=(0,d.v4)(),ze=Object.assign({},this.options,Qe),oi=new we(this.szBasePath,Te,Q,ye,se,Ze,ze,this.staticPath),wi=new Promise(function(ui,di){oi.init().then(function(zi){M[ue][zi]=oi,ui(zi)},function(zi){di(zi)})});return wi}},{key:"inputData",value:function(Q,ye){var se=this[ue][Q];se&&se.inputData(ye)}},{key:"stopRecord",value:function(Q){var ye=this,se=new Promise(function(Ze,Qe){var M=ye[ue][Q];M?M.stopRecord().then(function(){delete ye[ue][Q],Ze()},function(){Qe()}):Qe()});return se}}]),O}();return x}();n.StorageManager=Ve},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0});var l=function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"https://open.ys7.com/assets/ezuikit_v3.6";return`(function() {
    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题
    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };
    importScripts('`+c+`/js/transform/SystemTransform.js');

    Module.postRun.push(function() {
        postMessage({type: "loaded"});
    });

    onmessage = function (e) {
        var data = e.data;

        if ("create" === data.type) {
            var iHeadLen = data.len;
            var pHead = Module._malloc(iHeadLen);

            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);
            aData.set(new Uint8Array(data.buf));

            var iTransType = data.packType;//目标格式 RTP->PS
            if (RECORDRTP) {
                postMessage({type: "created"});
                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);
            } else {
                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);
                if (iRet != 0) {
                    console.log("_ST_Create failed!");
                } else {
                    Module._ST_Start();
                    postMessage({type: "created"});
                }
            }

        } else if ("inputData" === data.type) {
            if (RECORDRTP) {
                var aFileData = new Uint8Array(data.buf);  // 拷贝一份
                var iBufferLen = aFileData.length;
                var szBufferLen = iBufferLen.toString(16);
                if (szBufferLen.length === 1) {
                    szBufferLen = "000" + szBufferLen;
                } else if (szBufferLen.length === 2) {
                    szBufferLen = "00" + szBufferLen;
                } else if (szBufferLen.length === 3) {
                    szBufferLen = "0" + szBufferLen;
                }
                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];
                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {
                    aData[iIndex + 4] = aFileData[iIndex]
                }
                var dataUint8 = new Uint8Array(aData);
                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);
            } else {
                var iDataLen = data.len;
                var pData = Module._malloc(iDataLen);

                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);
                aData.set(new Uint8Array(data.buf));

                var iRet = Module._ST_InputData(0, pData, iDataLen);
                if (iRet != 0) {
                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储
                }

                Module._free(pData);
            }
        } else if ("release" === data.type) {
            Module._ST_Stop();
            Module._ST_Release();

            close();
        }
    };

    function loadMemInitFile() {
        var req = new XMLHttpRequest();
        req.open('GET', '`+c+`/js/transform/SystemTransform.js.mem');
        req.responseType = 'arraybuffer';
        req.send();

        return req;
    }
})();`};n.default=l},function(t,n,o){Object.defineProperty(n,"__esModule",{value:!0}),n.ESCanvas=void 0;var l=function(){function p(te,ae){for(var de=0;de<ae.length;de++){var ie=ae[de];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}return function(te,ae,de){return ae&&p(te.prototype,ae),de&&p(te,de),te}}(),d=o(1),c=E(d);function E(p){return p&&p.__esModule?p:{default:p}}function C(p,te){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te&&(Ni(te)==="object"||typeof te=="function")?te:p}function y(p,te){if(typeof te!="function"&&te!==null)throw new TypeError("Super expression must either be null or a function, not "+Ni(te));p.prototype=Object.create(te&&te.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(p,te):p.__proto__=te)}function w(p,te){if(!(p instanceof te))throw new TypeError("Cannot call a class as a function")}var g=function(){var p=null,te=Symbol("TRANS"),ae=Symbol("CANVAS"),de=Symbol("CONTEXT"),ie=Symbol("SHAPES"),we=Symbol("DRAWSTATUS"),Ve=Symbol("SHAPETYPE"),ue=Symbol("MAXSHAPENUMSUPPORT"),x=Symbol("SHAPESTYLE"),O=Symbol("POLYGONDRAWING"),ne=Symbol("CURRENTSHAPEINFO"),Q=Symbol("DRAWSHAPEMULTIONETIME"),ye=Symbol("EVENTCALLBACK");function se(){p[de].clearRect(0,0,p.m_iCanvasWidth,p.m_iCanvasHeight);for(var $e=0,st=p[ie].length;$e<st;$e++)p[ie][$e].draw()}function Ze($e){var st=p[ie].length;st<p[ue]&&p[ie].push($e)}function Qe(){var $e=!1,st={},Ke=0,Ne=0,at=0,Ut=0,Wt=0,kt=0,ee="draw",me=null;function P(){for(var Y=-1,Oe=0,N=p[ie].length;Oe<N;Oe++)if(p[ie][Oe].m_bChoosed){Y=Oe;break}return Y}p[ae][0].oncontextmenu=function(){return!1},p[ae][0].onselectstart=function(){return!1},p[ae].unbind(),p[ae].bind("mousedown",function(Y){if(Y.button===2)p[O]&&me&&me.m_aPoint.length>=me.m_iMinClosed&&(me.m_bClosed=!0,p[O]=!1,me.setPointInfo(me.m_aPoint),Ze(me),se(),$e=!1,p[Q]||(p[we]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(me.m_szType,"onDrawEnd",me.m_szId));else if(Y.button===0){if($e){if(Math.abs(Y.offsetX-Ke)>2&&Math.abs(Y.offsetY-Ne)>2&&(Ze(me),p[Q]||(p[we]=!1)),p[ye]){var Oe={startPos:[],endPos:[]};Oe.startPos=[Ke,Ne],Oe.endPos=[Y.offsetX,Y.offsetY],p[ye]&&p[ye](Oe),p.clearAllShape()}me=null,$e=!1;return}if(Ke=Y.offsetX,Ne=Y.offsetY,ee="draw",!p[O]){var N=P();if(N!==-1&&p[ie][N].inArc(Y.offsetX,Y.offsetY,5)&&(ee="stretch"),ee!=="stretch")for(var fe=0,I=p[ie].length;fe<I;fe++)p[ie][fe].inShape(Y.offsetX,Y.offsetY)&&p[ie][fe].m_iEditType!==2?(p[ie][fe].m_bChoosed=!0,p[ie][fe].getMouseDownPoints(Y.offsetX,Y.offsetY),ee="drag",window.onDrawShapeEvent&&window.onDrawShapeEvent(p[ie][fe].m_szType,"onChoose",p[ie][fe].m_szId)):p[ie][fe].m_bChoosed=!1;ee==="drag"?p[ae][0].style.cursor="move":p[ae][0].style.cursor="default",ee==="draw"&&p[ie].length===1&&p[ie][0].m_iRedrawMode===1&&(p.deleteRepeatPolyonById(p[ie][0].m_szId),p[we]=!0),p[we]&&!p[Q]&&(ee="draw")}if(ee==="draw"&&p[we]){if(p[ue]<=p[ie].length&&p[Ve]!=="Grid"&&p[Ve]!=="Point")return;p[Ve]==="Rect"?(me=new Te,me.m_szTips=p[ne].szTips||""):p[Ve]==="Grid"?p[ie].length===0&&(me=new oi,Ze(me)):p[Ve]==="Polygon"?(p[O]||(p[O]=!0,me=new ui,me.m_szId=p[ne].szId||"",me.m_szTips=p[ne].szTips||"",me.m_iMinClosed=p[ne].iMinClosed||3,me.m_iMaxPointNum=p[ne].iMaxPointNum||11,me.m_iPolygonType=p[ne].iPolygonType,me.m_szDrawColor=p[ne].szDrawColor,me.m_szFillColor=p[ne].szFillColor,me.m_iTranslucent=p[ne].iTranslucent,me.m_iRedrawMode=p[ne].iRedrawMode),me.m_iPolygonType===1&&(me.addPoint(Ke,Ne),me.m_aPoint.length===me.m_iMaxPointNum&&(me.m_bClosed=!0,p[O]=!1,Ze(me),se(),$e=!1,p[Q]||(p[we]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(me.m_szType,"onDrawEnd",me.m_szId)))):p[Ve]==="Point"&&(p.clearShapeByType("Point"),me=new di,me.m_szId=p[ne].szId||"",me.m_szDrawColor=p[ne].szDrawColor,me.setPointInfo([[Ke,Ne]]),Ze(me),se())}$e=!0}}),p[ae].bind("mouseenter",function(Y){st={isIn:!0,offsetX:Y.offsetX,offsetY:Y.offsetY},p[we]&&$e&&(p[Ve]==="Rect"?me.move([[Ke,Ne],[Y.offsetX,Y.offsetY]]):p[Ve]==="Grid"&&p[ie][0].move(Ke,Ne,Y.offsetX,Y.offsetY))}),p[ae].bind("mouseleave",function(Y){st={isIn:!1,offsetX:Y.offsetX,offsetY:Y.offsetY}}),p[ae].bind("mousemove",function(Y){if(p[O])p[we]&&$e&&(p[Ve]==="Polygon"&&me.m_iPolygonType===0&&(me.m_bClosed=!0),se(),me.move(Y.offsetX,Y.offsetY,Ke,Ne));else{var Oe=P();Oe>-1?$e&&(ee==="drag"?(p[ie][Oe].drag(Y.offsetX,Y.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(p[ie][Oe].m_szType,"onDrag",p[ie][Oe].m_szId)):ee==="stretch"&&(p[ie][Oe].stretch(Y.offsetX,Y.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(p[ie][Oe].m_szType,"onStretch",p[ie][Oe].m_szId))):p[we]&&$e&&st.isIn&&(p[Ve]==="Rect"?me.move([[Ke,Ne],[Y.offsetX,Y.offsetY]]):p[Ve]==="Grid"&&p[ie][0].move(Ke,Ne,Y.offsetX,Y.offsetY))}}),p[ae].bind("mouseup",function(Y){if(p[ae][0].style.cursor="default",me!==null&&typeof me<"u"&&ee==="draw")if(p[Ve]==="Rect"){if(Math.abs(Y.offsetX-Ke)>2&&Math.abs(Y.offsetY-Ne)>2&&(Ze(me),p[Q]||(p[we]=!1)),p[ye]){var Oe={startPos:[],endPos:[]};Oe.startPos=[Ke,Ne],Oe.endPos=[Y.offsetX,Y.offsetY],p[ye]&&p[ye](Oe),p.clearAllShape()}me=null}else p[Ve]==="Polygon"&&me.m_iPolygonType===0&&p[O]&&Math.abs(Y.offsetX-Ke)>2&&Math.abs(Y.offsetY-Ne)>2&&(Ze(me),p[O]=!1,p[Q]||(p[we]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(me.m_szType,"onDrawEnd",me.m_szId));p[O]?$e=!0:$e=!1,p[O]||se()}),p[ae].bind("dblclick",function(){p[we]&&p[Ve]==="Grid"&&(p[ie][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",se())}),p[ae].bind("touchstart",function(Y){var Oe=Y.target.getBoundingClientRect();if(Y.touches&&Y.touches[0]){if(p[te]?(at=parseInt(Y.touches[0].clientY-Oe.x)>0?parseInt(Y.touches[0].clientY-Oe.x):0,Ut=parseInt(Y.touches[0].clientX-Oe.y)>0?parseInt(Y.touches[0].clientX-Oe.y):0):(at=parseInt(Y.touches[0].clientX-Oe.x)>0?parseInt(Y.touches[0].clientX-Oe.x):0,Ut=parseInt(Y.touches[0].clientY-Oe.y)>0?parseInt(Y.touches[0].clientY-Oe.y):0),ee="draw",p[we]){if(p[ue]<=p[ie].length&&p[Ve]!=="Grid"&&p[Ve]!=="Point")return;p[Ve]==="Rect"?(me=new Te,me.m_szTips=p[ne].szTips||""):p[Ve]==="Grid"?p[ie].length===0&&(me=new oi,Ze(me)):p[Ve]==="Polygon"?(p[O]||(p[O]=!0,me=new ui,me.m_szId=p[ne].szId||"",me.m_szTips=p[ne].szTips||"",me.m_iMinClosed=p[ne].iMinClosed||3,me.m_iMaxPointNum=p[ne].iMaxPointNum||11,me.m_iPolygonType=p[ne].iPolygonType,me.m_szDrawColor=p[ne].szDrawColor,me.m_szFillColor=p[ne].szFillColor,me.m_iTranslucent=p[ne].iTranslucent,me.m_iRedrawMode=p[ne].iRedrawMode),me.m_iPolygonType===1&&(me.addPoint(at,Ut),me.m_aPoint.length===me.m_iMaxPointNum&&(me.m_bClosed=!0,p[O]=!1,Ze(me),se(),$e=!1,p[Q]||(p[we]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(me.m_szType,"onDrawEnd",me.m_szId)))):p[Ve]==="Point"&&(p.clearShapeByType("Point"),me=new di,me.m_szId=p[ne].szId||"",me.m_szDrawColor=p[ne].szDrawColor,me.setPointInfo([[at,Ut]]),Ze(me),se())}$e=!0}}),p[ae].bind("touchmove",function(Y){var Oe=Y.target.getBoundingClientRect();if(Y.touches&&Y.touches[0])if(p[te]?(Wt=parseInt(Y.touches[0].clientY-Oe.x)>0?parseInt(Y.touches[0].clientY-Oe.x):0,kt=parseInt(Y.touches[0].clientX-Oe.y)>0?parseInt(Y.touches[0].clientX-Oe.y):0):(Wt=parseInt(Y.touches[0].clientX-Oe.x)>0?parseInt(Y.touches[0].clientX-Oe.x):0,kt=parseInt(Y.touches[0].clientY-Oe.y)>0?parseInt(Y.touches[0].clientY-Oe.y):0),p[O])p[we]&&$e&&(p[Ve]==="Polygon"&&me.m_iPolygonType===0&&(me.m_bClosed=!0),se(),me.move(Y.touches[0].offsetX,Y.touches[0].offsetY,at,Ut));else{var N=P();N>-1?$e&&(ee==="drag"?(p[ie][N].drag(Wt,kt),window.onDrawShapeEvent&&window.onDrawShapeEvent(p[ie][N].m_szType,"onDrag",p[ie][N].m_szId)):ee==="stretch"&&(p[ie][N].stretch(Wt,kt),window.onDrawShapeEvent&&window.onDrawShapeEvent(p[ie][N].m_szType,"onStretch",p[ie][N].m_szId))):p[we]&&$e&&(p[Ve]==="Rect"?p[te]?me.move([[at*2,(Oe.width-Ut)*2],[Wt*2,(Oe.width-kt)*2]]):me.move([[at*2,Ut*2],[Wt*2,kt*2]]):p[Ve]==="Grid"&&p[ie][0].move(at,Ut,Wt,kt))}}),p[ae].bind("touchend",function(Y){if(console.log("起始点坐标：",at,Ut),console.log("结束点坐标：",Wt,kt),!(at==Wt&&Ut==kt)){if(p[ae][0].style.cursor="default",me!==null&&typeof me<"u"&&ee==="draw")if(p[Ve]==="Rect"){if(Math.abs(Wt-at)>2&&Math.abs(kt-Ut)>2&&(Ze(me),p[Q]||(p[we]=!1)),p[ye]&&Math.abs(Wt-at)>15&&Math.abs(kt-Ut)>15){var Oe={startPos:[],endPos:[]};Oe.startPos=[at,Ut],Oe.endPos=[Wt,kt],p[ye]&&p[ye](Oe)}p.clearAllShape(),me=null}else p[Ve]==="Polygon"&&me.m_iPolygonType===0&&p[O]&&Math.abs(Wt-at)>2&&Math.abs(kt-Ut)>2&&(Ze(me),p[O]=!1,p[Q]||(p[we]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(me.m_szType,"onDrawEnd",me.m_szId));p[O]?$e=!0:$e=!1,p[O]||se()}})}var M=function(){function $e(){w(this,$e),this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=p[x].szDrawColor,this.m_szFillColor=p[x].szFillColor,this.m_iTranslucent=p[x].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}return l($e,[{key:"draw",value:function(){}},{key:"drag",value:function(Ke,Ne){if(this.m_iEditType!==2){var at=this.m_aPoint.length,Ut=0;for(Ut=0;Ut<at;Ut++)if(this.m_aPoint[Ut][0]+Ke-this.m_iDriftStartX>p.m_iCanvasWidth||this.m_aPoint[Ut][1]+Ne-this.m_iDriftStartY>p.m_iCanvasHeight||this.m_aPoint[Ut][0]+Ke-this.m_iDriftStartX<0||this.m_aPoint[Ut][1]+Ne-this.m_iDriftStartY<0){this.m_iDriftStartX=Ke,this.m_iDriftStartY=Ne;return}for(Ut=0;Ut<at;Ut++)this.m_aPoint[Ut][0]=this.m_aPoint[Ut][0]+Ke-this.m_iDriftStartX,this.m_aPoint[Ut][1]=this.m_aPoint[Ut][1]+Ne-this.m_iDriftStartY;this.m_iDriftStartX=Ke,this.m_iDriftStartY=Ne,this.setPointInfo(this.m_aPoint),se()}}},{key:"stretch",value:function(Ke,Ne){this.m_iEditType===0&&(this.m_iIndexChoosePoint!==-1&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=Ke,this.m_aPoint[this.m_iIndexChoosePoint][1]=Ne),this.setPointInfo(this.m_aPoint),se())}},{key:"inShape",value:function(Ke,Ne){for(var at=!1,Ut=this.m_aPoint.length,Wt=0,kt=Ut-1;Wt<Ut;kt=Wt++)this.m_aPoint[Wt][1]>Ne!=this.m_aPoint[kt][1]>Ne&&Ke<(this.m_aPoint[kt][0]-this.m_aPoint[Wt][0])*(Ne-this.m_aPoint[Wt][1])/(this.m_aPoint[kt][1]-this.m_aPoint[Wt][1])+this.m_aPoint[Wt][0]&&(at=!at);return at}},{key:"inArc",value:function(Ke,Ne,at){for(var Ut=!1,Wt=0,kt=this.m_aPoint.length;Wt<kt;Wt++){var ee=Math.sqrt((Ke-this.m_aPoint[Wt][0])*(Ke-this.m_aPoint[Wt][0])+(Ne-this.m_aPoint[Wt][1])*(Ne-this.m_aPoint[Wt][1]));if(ee<at){Ut=!0,this.m_iIndexChoosePoint=Wt;break}}return Ut}},{key:"getMouseDownPoints",value:function(Ke,Ne){this.m_iDriftStartX=Ke,this.m_iDriftStartY=Ne}},{key:"getPointInfo",value:function(){return this.m_aPoint}},{key:"setPointInfo",value:function(Ke){Ke!==null&&typeof Ke<"u"&&Ke.length>0&&(this.m_aPoint=Ke,this.setEdgePoints(Ke))}},{key:"addPoint",value:function(Ke,Ne){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([Ke,Ne]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)}},{key:"setEdgePoints",value:function(Ke){for(var Ne=0,at=Ke.length;Ne<at;Ne++)Ne===0?(this.m_oEdgePoints.top.x=Ke[Ne][0],this.m_oEdgePoints.top.y=Ke[Ne][1],this.m_oEdgePoints.left.x=Ke[Ne][0],this.m_oEdgePoints.left.y=Ke[Ne][1],this.m_oEdgePoints.right.x=Ke[Ne][0],this.m_oEdgePoints.right.y=Ke[Ne][1],this.m_oEdgePoints.bottom.x=Ke[Ne][0],this.m_oEdgePoints.bottom.y=Ke[Ne][1]):(Ke[Ne][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=Ke[Ne][0],this.m_oEdgePoints.top.y=Ke[Ne][1]),Ke[Ne][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=Ke[Ne][0],this.m_oEdgePoints.right.y=Ke[Ne][1]),Ke[Ne][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=Ke[Ne][0],this.m_oEdgePoints.bottom.y=Ke[Ne][1]),Ke[Ne][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=Ke[Ne][0],this.m_oEdgePoints.left.y=Ke[Ne][1]))}}]),$e}(),Te=function($e){y(st,$e);function st(){w(this,st);var Ke=C(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return Ke.m_szType="Rect",Ke}return l(st,[{key:"setPointInfo",value:function(Ne){if(Ne!==null&&typeof Ne<"u"){for(var at=Ne[0][0],Ut=Ne[0][1],Wt=Ne[0][0],kt=Ne[0][1],ee=0,me=Ne.length;ee<me;ee++)at>Ne[ee][0]&&(at=Ne[ee][0]),Ut>Ne[ee][1]&&(Ut=Ne[ee][1]),Wt<Ne[ee][0]&&(Wt=Ne[ee][0]),kt<Ne[ee][1]&&(kt=Ne[ee][1]);this.m_aPoint=[[at,Ut],[Wt,Ut],[Wt,kt],[at,kt]]}}},{key:"draw",value:function(){p[de].fillStyle=this.m_szFillColor,p[de].strokeStyle=this.m_szDrawColor;var Ne=this.m_aPoint[0][0],at=this.m_aPoint[0][1],Ut=this.m_aPoint[2][0]-Ne,Wt=this.m_aPoint[2][1]-at;if(p[de].globalAlpha=this.m_iTranslucent,p[de].fillRect(Ne,at,Ut,Wt),p[de].globalAlpha=1,p[de].fillText(this.m_szTips,(Ne+this.m_aPoint[2][0])/2,(at+this.m_aPoint[2][1])/2),this.m_bChoosed){var kt=Math.round(Ut/2),ee=Math.round(Wt/2);if(this.m_iEditType===0)for(var me=[Ne,Ne+kt,Ne+Ut,Ne,Ne+Ut,Ne,Ne+kt,Ne+Ut],P=[at,at,at,at+ee,at+ee,at+Wt,at+Wt,at+Wt],Y=0;Y<8;Y++)p[de].beginPath(),p[de].arc(me[Y],P[Y],3,0,360,!1),p[de].fillStyle=this.m_szDrawColor,p[de].closePath(),p[de].fill()}p[de].strokeRect(Ne,at,Ut,Wt)}},{key:"stretch",value:function(Ne,at){this.m_iEditType===0&&(this.m_iIndexChoosePoint===0?Ne<this.m_aPoint[2][0]&&at<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=Ne,this.m_aPoint[0][1]=at,this.m_aPoint[3][0]=Ne,this.m_aPoint[1][1]=at):this.m_iIndexChoosePoint===1?at<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=at,this.m_aPoint[1][1]=at):this.m_iIndexChoosePoint===2?Ne>this.m_aPoint[3][0]&&at<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=Ne,this.m_aPoint[1][1]=at,this.m_aPoint[2][0]=Ne,this.m_aPoint[0][1]=at):this.m_iIndexChoosePoint===3?Ne<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=Ne,this.m_aPoint[3][0]=Ne):this.m_iIndexChoosePoint===4?Ne>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=Ne,this.m_aPoint[2][0]=Ne):this.m_iIndexChoosePoint===5?Ne<this.m_aPoint[1][0]&&at>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=Ne,this.m_aPoint[3][1]=at,this.m_aPoint[0][0]=Ne,this.m_aPoint[2][1]=at):this.m_iIndexChoosePoint===6?at>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=at,this.m_aPoint[3][1]=at):this.m_iIndexChoosePoint===7&&Ne>this.m_aPoint[0][0]&&at>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=Ne,this.m_aPoint[2][1]=at,this.m_aPoint[1][0]=Ne,this.m_aPoint[3][1]=at),se())}},{key:"move",value:function(Ne){se(),this.m_bChoosed=!0;var at=Ne[0][0],Ut=Ne[0][1],Wt=Ne[1][0],kt=Ne[1][1];this.setPointInfo([[at,Ut],[Wt,Ut],[Wt,kt],[at,kt]]),this.draw()}},{key:"inArc",value:function(Ne,at,Ut){for(var Wt=this.m_aPoint[0][0],kt=this.m_aPoint[0][1],ee=this.m_aPoint[2][0]-Wt,me=this.m_aPoint[2][1]-kt,P=Math.round(ee/2),Y=Math.round(me/2),Oe=[Wt,Wt+P,Wt+ee,Wt,Wt+ee,Wt,Wt+P,Wt+ee],N=[kt,kt,kt,kt+Y,kt+Y,kt+me,kt+me,kt+me],fe=0;fe<8;fe++){var I=Math.sqrt((Ne-Oe[fe])*(Ne-Oe[fe])+(at-N[fe])*(at-N[fe]));if(I<Ut)return this.m_iIndexChoosePoint=fe,!0}return!1}}]),st}(M),ze=function($e){y(st,$e);function st(Ke,Ne){w(this,st);var at=C(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return at.m_szType="RectOSD",at.m_szOSDType="overlay-date",at.m_szText=Ke||"",at.m_szEnabled=Ne||"",at.m_szDateStyle="",at.m_szClockType="",at.m_szDisplayWeek="",at.m_szId="",at.m_szAlignment="0",at}return l(st,[{key:"draw",value:function(){if(this.m_szEnabled==="true"){var Ne=this.m_aPoint[0][0],at=this.m_aPoint[0][1],Ut=this.m_aPoint[2][0]-Ne,Wt=this.m_aPoint[2][1]-at;p[de].beginPath(),p[de].strokeStyle=this.m_szDrawColor,p[de].globalAlpha=1,p[de].rect(Ne,at,Ut,Wt),p[de].font="15px serif",p[de].strokeText(this.m_szText,Ne,at+15),p[de].stroke()}}},{key:"drag",value:function(Ne,at){var Ut=this.m_aPoint.length,Wt=0;if(this.m_szAlignment==="0"){for(Wt=0;Wt<Ut;Wt++)if(this.m_aPoint[Wt][1]+at-this.m_iDriftStartY>p.m_iCanvasHeight||this.m_aPoint[Wt][0]+Ne-this.m_iDriftStartX<0||this.m_aPoint[Wt][1]+at-this.m_iDriftStartY<0){this.m_iDriftStartX=Ne,this.m_iDriftStartY=at;return}for(Wt=0;Wt<Ut;Wt++)this.m_aPoint[Wt][0]=this.m_aPoint[Wt][0]+Ne-this.m_iDriftStartX,this.m_aPoint[Wt][1]=this.m_aPoint[Wt][1]+at-this.m_iDriftStartY}else if(this.m_szAlignment==="1"||this.m_szAlignment==="2"){for(Wt=0;Wt<Ut;Wt++)if(this.m_aPoint[Wt][1]+at-this.m_iDriftStartY>p.m_iCanvasHeight||this.m_aPoint[Wt][1]+at-this.m_iDriftStartY<0){this.m_iDriftStartX=Ne,this.m_iDriftStartY=at;return}for(Wt=0;Wt<Ut;Wt++)this.m_aPoint[Wt][1]=this.m_aPoint[Wt][1]+at-this.m_iDriftStartY}this.m_iDriftStartX=Ne,this.m_iDriftStartY=at,this.setEdgePoints(this.m_aPoint),se()}},{key:"stretch",value:function(){}}]),st}(M),oi=function($e){y(st,$e);function st(){w(this,st);var Ke=C(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return Ke.m_szType="Grid",Ke.m_iGridColNum=22,Ke.m_iGridRowNum=18,Ke.m_szGridMap="",Ke.m_aAddGridMap=[],Ke}return l(st,[{key:"draw",value:function(){for(var Ne=p.m_iCanvasWidth/this.m_iGridColNum,at=p.m_iCanvasHeight/this.m_iGridRowNum,Ut="",Wt=0;Wt<this.m_iGridRowNum;Wt++){for(var kt=this.m_szGridMap.substring(Wt*6,Wt*6+6),ee=parseInt("f"+kt,16).toString(2).split("").slice(4),me="",P=0;P<this.m_iGridColNum;P++){var Y="";ee[P]==="1"?(p[de].strokeStyle=this.m_szDrawColor,p[de].globalAlpha=1,p[de].strokeRect(Ne*P,at*Wt,Ne,at),Y="1"):Y="0",this.m_aAddGridMap.length&&this.m_aAddGridMap[Wt][P]===1&&(p[de].strokeStyle=this.m_szDrawColor,p[de].strokeRect(Ne*P,at*Wt,Ne,at),Y="1"),me+=Y}Ut+=parseInt("1111"+me+"00",2).toString(16).substring(1)}this.m_szGridMap=Ut}},{key:"move",value:function(Ne,at,Ut,Wt){var kt=p.m_iCanvasWidth/this.m_iGridColNum,ee=p.m_iCanvasHeight/this.m_iGridRowNum,me=Math.floor(Ne/kt),P=Math.floor(at/ee),Y=Math.floor(Math.abs(Ut-Ne)/kt),Oe=Math.floor(Math.abs(Wt-at)/ee),N=1,fe=1;Ut-Ne>0?N=1:N=-1,Wt-at>0?fe=1:fe=-1;for(var I=[],L=0;L<this.m_iGridRowNum;L++){I[L]=[];for(var re=0;re<this.m_iGridColNum;re++)N===1?fe===1?L>=P&&L<=P+Oe&&re>=me&&re<=me+Y?I[L][re]=1:I[L][re]=0:L<=P&&L>=P-Oe&&re>=me&&re<=me+Y?I[L][re]=1:I[L][re]=0:fe===1?L>=P&&L<=P+Oe&&re<=me&&re>=me-Y?I[L][re]=1:I[L][re]=0:L<=P&&L>=P-Oe&&re<=me&&re>=me-Y?I[L][re]=1:I[L][re]=0}this.m_aAddGridMap=I,this.draw()}}]),st}(M),wi=function($e){y(st,$e);function st(){w(this,st);var Ke=C(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return Ke.m_szType="Line",Ke.m_iLineType=0,Ke.m_iDirection=0,Ke.m_iArrowType=0,Ke.m_aCrossArrowPoint=[],Ke}return l(st,[{key:"draw",value:function(){this.m_iLineType===0?this.drawNormalLine():this.m_iLineType===1?this.drawArrowLine():this.m_iLineType===3?this.drawCrossLine():this.m_iLineType===4&&this.drawLineCount()}},{key:"drawNormalLine",value:function(){if(p[de].globalAlpha=1,this.m_aPoint.length>0){p[de].beginPath(),p[de].strokeStyle=this.m_szDrawColor,p[de].lineWidth=2,p[de].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var Ne=1,at=this.m_aPoint.length;Ne<at;Ne++)p[de].lineTo(this.m_aPoint[Ne][0],this.m_aPoint[Ne][1]);if(p[de].stroke(),this.m_bChoosed)for(var Ut=0,Wt=this.m_aPoint.length;Ut<Wt;Ut++)p[de].beginPath(),p[de].fillStyle=this.m_szDrawColor,p[de].arc(this.m_aPoint[Ut][0],this.m_aPoint[Ut][1],3,0,Math.PI*2,!0),p[de].closePath(),p[de].fill();this.m_szTips!==""&&(p[de].strokeStyle=this.m_szDrawColor,p[de].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}}},{key:"drawArrowLine",value:function(Ne,at,Ut,Wt,kt,ee,me,P){ee=typeof ee<"u"?ee:30,me=typeof me<"u"?me:10,P=typeof P<"u"?P:1;var Y=Math.atan2(Ut-kt,at-Wt)*180/Math.PI,Oe=(Y+ee)*Math.PI/180,N=(Y-ee)*Math.PI/180,fe=me*Math.cos(Oe),I=me*Math.sin(Oe),L=me*Math.cos(N),re=me*Math.sin(N);p[de].save(),p[de].beginPath();var J=at-fe,De=Ut-I;p[de].moveTo(J,De),p[de].lineTo(at,Ut),J=at-L,De=Ut-re,p[de].lineTo(J,De),p[de].moveTo(at,Ut),p[de].lineTo(Wt,kt),Ne===1&&(J=Wt+fe,De=kt+I,p[de].moveTo(J,De),p[de].lineTo(Wt,kt),J=Wt+L,De=kt+re,p[de].lineTo(J,De)),p[de].strokeStyle=this.m_szDrawColor,p[de].lineWidth=P,p[de].stroke(),p[de].restore()}},{key:"drawCrossLine",value:function(){this.drawNormalLine();var Ne=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,at=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,Ut=Math.atan2(at-this.m_aPoint[0][1],Ne-this.m_aPoint[0][0])*180/Math.PI,Wt=(Ut+90)*Math.PI/180,kt=(Ut-90)*Math.PI/180,ee=25*Math.cos(Wt),me=25*Math.sin(Wt),P=25*Math.cos(kt),Y=25*Math.sin(kt),Oe=0,N=0;Oe=Ne-ee,N=at-me;var fe=0,I=0;this.m_iDirection===0?(fe=-10,I=-15):this.m_iDirection===1?(fe=10,I=10):(fe=10,I=-15),this.m_iDirection!==0&&this.drawArrowLine(0,Oe,N,Ne,at),p[de].strokeStyle=this.m_szDrawColor,p[de].font="8px",p[de].strokeText("A",Oe+fe,N+4),Oe=Ne-P,N=at-Y,this.m_iDirection!==1&&this.drawArrowLine(0,Oe,N,Ne,at),p[de].strokeStyle=this.m_szDrawColor,p[de].font="8px",p[de].strokeText("B",Oe+I,N+4)}},{key:"drawLineCount",value:function(){this.drawNormalLine();var Ne=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,at=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,Ut=Math.atan2(at-this.m_aPoint[0][1],Ne-this.m_aPoint[0][0])*180/Math.PI,Wt=(Ut+90)*Math.PI/180,kt=(Ut-90)*Math.PI/180,ee=25*Math.cos(Wt),me=25*Math.sin(Wt),P=25*Math.cos(kt),Y=25*Math.sin(kt),Oe=0,N=0;Oe=Ne-ee,N=at-me,this.m_iArrowType===1?(Oe=Ne-P,N=at-Y,this.drawArrowLine(0,Oe,N,Ne,at)):this.m_iArrowType===0&&this.drawArrowLine(0,Oe,N,Ne,at),this.m_aCrossArrowPoint=[[Ne,at],[Oe,N]]}},{key:"inShape",value:function(Ne,at){for(var Ut=!1,Wt=0,kt=this.m_aPoint.length-1;Wt<kt;Wt++){var ee=Math.sqrt((this.m_aPoint[Wt+1][0]-this.m_aPoint[Wt][0])*(this.m_aPoint[Wt+1][0]-this.m_aPoint[Wt][0])+(this.m_aPoint[Wt+1][1]-this.m_aPoint[Wt][1])*(this.m_aPoint[Wt+1][1]-this.m_aPoint[Wt][1])),me=Math.sqrt((Ne-this.m_aPoint[Wt][0])*(Ne-this.m_aPoint[Wt][0])+(at-this.m_aPoint[Wt][1])*(at-this.m_aPoint[Wt][1])),P=Math.sqrt((Ne-this.m_aPoint[Wt+1][0])*(Ne-this.m_aPoint[Wt+1][0])+(at-this.m_aPoint[Wt+1][1])*(at-this.m_aPoint[Wt+1][1]));me+P-ee<1&&(Ut=!0)}return Ut}}]),st}(M),ui=function($e){y(st,$e);function st(){w(this,st);var Ke=C(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return Ke.m_szType="Polygon",Ke.m_iPolygonType=1,Ke}return l(st,[{key:"setPointInfo",value:function(Ne){if(Ne!==null&&typeof Ne<"u"){if(this.m_iPolygonType===0){for(var at=Ne[0][0],Ut=Ne[0][1],Wt=Ne[0][0],kt=Ne[0][1],ee=0,me=Ne.length;ee<me;ee++)at>Ne[ee][0]&&(at=Ne[ee][0]),Ut>Ne[ee][1]&&(Ut=Ne[ee][1]),Wt<Ne[ee][0]&&(Wt=Ne[ee][0]),kt<Ne[ee][1]&&(kt=Ne[ee][1]);this.m_aPoint=[[at,Ut],[Wt,Ut],[Wt,kt],[at,kt]]}else this.m_iPolygonType===1?this.m_aPoint=Ne:this.m_aPoint=Ne;this.setEdgePoints(Ne)}}},{key:"draw",value:function(){if(this.m_aPoint.length>0){p[de].fillStyle=this.m_szFillColor,p[de].strokeStyle=this.m_szDrawColor,p[de].globalAlpha=1;var Ne=0,at=0;if(this.m_bChoosed)for(Ne=0,at=this.m_aPoint.length;Ne<at;Ne++)p[de].beginPath(),p[de].arc(this.m_aPoint[Ne][0],this.m_aPoint[Ne][1],3,0,360,!1),p[de].fillStyle=this.m_szDrawColor,p[de].closePath(),p[de].fill();for(p[de].beginPath(),p[de].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),Ne=0,at=this.m_aPoint.length;Ne<at;Ne++)Ne!==0&&p[de].lineTo(this.m_aPoint[Ne][0],this.m_aPoint[Ne][1]);p[de].stroke(),this.m_bClosed&&(p[de].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),p[de].closePath(),p[de].stroke(),p[de].globalAlpha=this.m_iTranslucent,p[de].fill())}}},{key:"move",value:function(Ne,at,Ut,Wt){if(this.m_iPolygonType===1){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){p[de].fillStyle=this.m_szFillColor,p[de].strokeStyle=this.m_szDrawColor,p[de].globalAlpha=1;var kt=0,ee=0;for(kt=0,ee=this.m_aPoint.length;kt<ee;kt++)p[de].beginPath(),p[de].arc(this.m_aPoint[kt][0],this.m_aPoint[kt][1],3,0,360,!1),p[de].fillStyle=this.m_szDrawColor,p[de].closePath(),p[de].fill();for(p[de].beginPath(),p[de].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),kt=0,ee=this.m_aPoint.length;kt<ee;kt++)kt!==0&&p[de].lineTo(this.m_aPoint[kt][0],this.m_aPoint[kt][1]);p[de].lineTo(Ne,at),p[de].closePath(),p[de].stroke()}}else if(this.m_iPolygonType===0){this.m_bChoosed=!0;var me=Ut,P=Wt,Y=Ne,Oe=at;this.setPointInfo([[me,P],[Y,P],[Y,Oe],[me,Oe]]),this.draw()}}},{key:"stretch",value:function(Ne,at){this.m_iEditType===0&&(this.m_iPolygonType===1?this.m_iIndexChoosePoint!==-1&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=Ne,this.m_aPoint[this.m_iIndexChoosePoint][1]=at):this.m_iIndexChoosePoint===0?Ne<this.m_aPoint[2][0]&&at<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=Ne,this.m_aPoint[0][1]=at,this.m_aPoint[3][0]=Ne,this.m_aPoint[1][1]=at):this.m_iIndexChoosePoint===1?Ne>this.m_aPoint[3][0]&&at<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=Ne,this.m_aPoint[1][1]=at,this.m_aPoint[2][0]=Ne,this.m_aPoint[0][1]=at):this.m_iIndexChoosePoint===2?Ne>this.m_aPoint[0][0]&&at>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=Ne,this.m_aPoint[2][1]=at,this.m_aPoint[1][0]=Ne,this.m_aPoint[3][1]=at):this.m_iIndexChoosePoint===3&&Ne<this.m_aPoint[1][0]&&at>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=Ne,this.m_aPoint[3][1]=at,this.m_aPoint[0][0]=Ne,this.m_aPoint[2][1]=at),this.setPointInfo(this.m_aPoint),se())}}]),st}(M),di=function($e){y(st,$e);function st(){w(this,st);var Ke=C(this,(st.__proto__||Object.getPrototypeOf(st)).call(this));return Ke.m_szType="Point",Ke.m_szId="",Ke}return l(st,[{key:"draw",value:function(){p[de].beginPath(),p[de].fillStyle=this.m_szDrawColor,p[de].globalAlpha=1,p[de].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,Math.PI*2,!0),p[de].closePath(),p[de].fill()}},{key:"drag",value:function(){}},{key:"stretch",value:function(){}}]),st}(M),zi=function(){function $e(st,Ke){w(this,$e),p=this,this[ae]=(0,c.default)("#"+st),this[te]=Ke||!1,this[de]=this[ae][0].getContext("2d"),this[ie]=[],this[we]=!1,this[Ve]="Rect",this[ue]=10,this[Q]=!0,this[ne]={},this[ye]=null,this[x]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[O]=!1,this.m_iCanvasWidth=this[ae].width(),this.m_iCanvasHeight=this[ae].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",Qe(),this[ie].length=0}return l($e,[{key:"setDrawMutiShapeOneTime",value:function(Ke){this[Q]=Ke}},{key:"setMaxShapeSupport",value:function(Ke){this[ue]=Ke}},{key:"getMaxShapeSupport",value:function(){return this[ue]}},{key:"setDrawStatus",value:function(Ke,Ne){this[we]=Ke,Ne&&Ke&&(this[ye]=Ne),Ke||(this[ye]=null)}},{key:"setShapeType",value:function(Ke){this[Ve]=Ke,se()}},{key:"setCurrentShapeInfo",value:function(Ke){this[ne]=Ke||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}}},{key:"getShapeType",value:function(){return this[Ve]}},{key:"getAllShapesInfo",value:function(){for(var Ke=[],Ne=0,at=this[ie].length;Ne<at;Ne++)this[ie][Ne].m_szType==="Grid"?Ke.push({szType:this[ie][Ne].m_szType,szGridMap:this[ie][Ne].m_szGridMap,iGridColNum:this[ie][Ne].m_iGridColNum,iGridRowNum:this[ie][Ne].m_iGridRowNum}):this[ie][Ne].m_szType==="RectOSD"?Ke.push({szType:this[ie][Ne].m_szType,szText:this[ie][Ne].m_szText,szEnabled:this[ie][Ne].m_szEnabled,szOSDType:this[ie][Ne].m_szOSDType,iPositionX:this[ie][Ne].m_aPoint[0][0],iPositionY:this[ie][Ne].m_aPoint[0][1],szDateStyle:this[ie][Ne].m_szDateStyle,szClockType:this[ie][Ne].m_szClockType,szDisplayWeek:this[ie][Ne].m_szDisplayWeek,szId:this[ie][Ne].m_szId,szAlignment:this[ie][Ne].m_szAlignment}):Ke.push({szType:this[ie][Ne].m_szType,aPoint:this[ie][Ne].m_aPoint,szId:this[ie][Ne].m_szId,bChoosed:this[ie][Ne].m_bChoosed});return Ke}},{key:"deleteRepeatPolyonById",value:function(Ke){var Ne=this.getAllShapesInfo(),at=Ne.length;if(at>0)for(var Ut=0;Ut<at;Ut++)Ne[Ut].szType==="Polygon"&&Ne[Ut].szId===Ke&&this.deleteShape(Ut)}},{key:"getShapesInfoByType",value:function(Ke){for(var Ne=[],at=0,Ut=this[ie].length;at<Ut;at++)this[ie][at].m_szType===Ke&&(this[ie][at].m_szType==="Grid"?Ne.push({szType:this[ie][at].m_szType,szGridMap:this[ie][at].m_szGridMap,iGridColNum:this[ie][at].m_iGridColNum,iGridRowNum:this[ie][at].m_iGridRowNum}):this[ie][at].m_szType==="RectOSD"?Ne.push({szType:this[ie][at].m_szType,szText:this[ie][at].m_szText,szEnabled:this[ie][at].m_szEnabled,szOSDType:this[ie][at].m_szOSDType,iPositionX:this[ie][at].m_aPoint[0][0],iPositionY:this[ie][at].m_aPoint[0][1],szDateStyle:this[ie][at].m_szDateStyle,szClockType:this[ie][at].m_szClockType,szDisplayWeek:this[ie][at].m_szDisplayWeek,szId:this[ie][at].m_szId,szAlignment:this[ie][at].m_szAlignment}):Ke==="Polygon"?Ne.push({szType:this[ie][at].m_szType,szId:this[ie][at].m_szId,iPolygonType:this[ie][at].m_iPolygonType,iMinClosed:this[ie][at].m_iMinClosed,iMaxPointNum:this[ie][at].m_iMaxPointNum,iEditType:this[ie][at].m_iEditType,aPoint:this[ie][at].m_aPoint,bClosed:this[ie][at].m_bClosed,szTips:this[ie][at].m_szTips,szDrawColor:this[ie][at].m_szDrawColor,szFillColor:this[ie][at].m_szFillColor,iTranslucent:this[ie][at].m_iTranslucent}):Ke==="Line"?Ne.push({szType:this[ie][at].m_szType,szId:this[ie][at].m_szId,aPoint:this[ie][at].m_aPoint,szTips:this[ie][at].m_szTips,iLineType:this[ie][at].m_iLineType,iDirection:this[ie][at].m_iDirection,iArrowType:this[ie][at].m_iArrowType,szDrawColor:this[ie][at].m_szDrawColor,aCrossArrowPoint:this[ie][at].m_aCrossArrowPoint}):Ke==="Rect"?Ne.push({szType:this[ie][at].m_szType,iEditType:this[ie][at].m_iEditType,aPoint:this[ie][at].m_aPoint,szTips:this[ie][at].m_szTips,szDrawColor:this[ie][at].m_szDrawColor,szFillColor:this[ie][at].m_szFillColor,iTranslucent:this[ie][at].m_iTranslucent}):Ne.push({szType:this[ie][at].m_szType,aPoint:this[ie][at].m_aPoint}));return Ne}},{key:"setShapesInfoByType",value:function(Ke,Ne){Ne||(Ne=[]);var at=null;if(Ke==="Rect"||Ke==="Polygon"||Ke==="Line"||Ke==="Point")for(var Ut=0,Wt=Ne.length;Ut<Wt;Ut++)Ke==="Rect"?(at=new Te,at.m_iEditType=Ne[Ut].iEditType,at.m_szTips=Ne[Ut].szTips||"",at.m_szDrawColor=Ne[Ut].szDrawColor,at.m_szFillColor=Ne[Ut].szFillColor,at.m_iTranslucent=Ne[Ut].iTranslucent,at.m_iRedrawMode=Ne[Ut].iRedrawMode):Ke==="Polygon"?(at=new ui,Ne[Ut].iPolygonType===0?at.m_bClosed=!0:at.m_bClosed=Ne[Ut].bClosed,at.m_szTips=Ne[Ut].szTips||"",at.m_szId=Ne[Ut].szId||"",at.m_iPolygonType=Ne[Ut].iPolygonType,at.m_iMinClosed=Ne[Ut].iMinClosed||3,at.m_iMaxPointNum=Ne[Ut].iMaxPointNum||11,at.m_iEditType=Ne[Ut].iEditType,at.m_szDrawColor=Ne[Ut].szDrawColor,at.m_szFillColor=Ne[Ut].szFillColor,at.m_iTranslucent=Ne[Ut].iTranslucent,at.m_iRedrawMode=Ne[Ut].iRedrawMode):Ke==="Line"?(at=new wi,at.m_iLineType=Ne[Ut].iLineType,at.m_szTips=Ne[Ut].szTips||"",at.m_szId=Ne[Ut].szId,at.m_iDirection=Ne[Ut].iDirection,at.m_iArrowType=Ne[Ut].iArrowType,at.m_szDrawColor=Ne[Ut].szDrawColor,at.setPointInfo(Ne[Ut].aPoint)):Ke==="Point"&&(at=new di,at.m_szId=Ne[Ut].szId,at.m_szDrawColor=Ne[Ut].szDrawColor,at.setPointInfo(Ne[Ut].aPoint)),at.setPointInfo(Ne[Ut].aPoint),Ut===0&&(at.m_bChoosed=!0),Ze(at);else Ke==="Grid"&&(at=new oi,at.m_szGridMap=Ne[0].szGridMap||"",at.m_iGridColNum=Ne[0].iGridColNum||22,at.m_iGridRowNum=Ne[0].iGridRowNum||18,Ze(at));se()}},{key:"addOSDShape",value:function(Ke,Ne,at,Ut,Wt){!at&&!Ut&&(at=0,Ut=0),Wt||(Wt={});var kt=new ze(Ke,Ne),ee=Ke.replace(/[^x00-xff]/g,"rr").length*10;kt.m_szOSDType=Wt.szOSDType||"",kt.m_szDateStyle=Wt.szDateStyle||"",kt.m_szClockType=Wt.szClockType||"",kt.m_szDisplayWeek=Wt.szDisplayWeek||"",kt.m_szId=Wt.szId||"",kt.m_szAlignment=""+Wt.szAlignment||"0",kt.m_szAlignment==="0"?kt.m_aPoint=[[at,Ut],[ee+at,Ut],[ee+at,Ut+20],[at,Ut+20]]:kt.m_szAlignment==="1"?kt.m_aPoint=[[0,Ut],[ee,Ut],[ee,Ut+20],[0,Ut+20]]:kt.m_szAlignment==="2"?kt.m_aPoint=[[this.m_iCanvasWidth-ee,Ut],[this.m_iCanvasWidth,Ut],[this.m_iCanvasWidth,Ut+20],[this.m_iCanvasWidth-ee,Ut+20]]:kt.m_aPoint=[[at,Ut],[ee+at,Ut],[ee+at,Ut+20],[at,Ut+20]],Ze(kt),se()}},{key:"selectShapeById",value:function(Ke,Ne){for(var at=0,Ut=p[ie].length;at<Ut;at++)Ke===p[ie][at].m_szType&&(Ne===p[ie][at].m_szId?p[ie][at].m_bChoosed=!0:p[ie][at].m_bChoosed=!1);se()}},{key:"setCanvasSize",value:function(Ke,Ne){Ke>0&&Ne>0&&(this.m_iCanvasWidth=Ke,this.m_iCanvasHeight=Ne,se())}},{key:"setDrawStyle",value:function(Ke,Ne,at){this[x]={szDrawColor:Ke,szFillColor:Ne,iTranslucent:at}}},{key:"clearAllShape",value:function(){this[ie].length=0,p[O]=!1,se()}},{key:"clearShapeByType",value:function(Ke){for(var Ne=this[ie].length,at=Ne;at>0;at--)this[ie][at-1].m_szType===Ke&&(Ke==="Grid"?(this[ie][at-1].m_szGridMap="",this[ie][at-1].m_aAddGridMap=[]):this[ie].splice(at-1,1));Ke==="Polygon"&&(p[O]=!1),se()}},{key:"deleteShape",value:function(Ke){this[ie].length>Ke&&this[ie].splice(Ke,1),se()}},{key:"updateCanvas",value:function(Ke){this[ae]=(0,c.default)("#"+Ke),this[de]=this[ae][0].getContext("2d"),this.m_iCanvasWidth=this[ae].width(),this.m_iCanvasHeight=this[ae].height(),Qe()}},{key:"resizeCanvas",value:function(){this.m_iCanvasWidth=this[ae].width(),this.m_iCanvasHeight=this[ae].height()}},{key:"canvasRedraw",value:function(){se()}}]),$e}();return zi}();n.ESCanvas=g}])})})(zf);var Of={exports:{}};(function(Z,m){(function(t,n){Z.exports=n()})(Na,function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Na<"u"?Na:typeof self<"u"?self:{};function n(N){return N&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N}var o={exports:{}};(function(N,fe){(function(L,re){N.exports=re()})(window,function(){return function(I){var L={};function re(J){if(L[J])return L[J].exports;var De=L[J]={i:J,l:!1,exports:{}};return I[J].call(De.exports,De,De.exports,re),De.l=!0,De.exports}return re.m=I,re.c=L,re.d=function(J,De,Ye){re.o(J,De)||Object.defineProperty(J,De,{enumerable:!0,get:Ye})},re.r=function(J){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(J,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(J,"__esModule",{value:!0})},re.t=function(J,De){if(De&1&&(J=re(J)),De&8||De&4&&Ni(J)==="object"&&J&&J.__esModule)return J;var Ye=Object.create(null);if(re.r(Ye),Object.defineProperty(Ye,"default",{enumerable:!0,value:J}),De&2&&typeof J!="string")for(var et in J)re.d(Ye,et,(function(R){return J[R]}).bind(null,et));return Ye},re.n=function(J){var De=J&&J.__esModule?function(){return J.default}:function(){return J};return re.d(De,"a",De),De},re.o=function(J,De){return Object.prototype.hasOwnProperty.call(J,De)},re.p="",re(re.s=1)}([function(I,L){var re;function J(Se,Pe,Fe){Se!=null&&(typeof Se=="number"?this.fromNumber(Se,Pe,Fe):Pe==null&&typeof Se!="string"?this.fromString(Se,256):this.fromString(Se,Pe))}function De(){return new J(null)}function Ye(Se,Pe,Fe,tt,Pt,Yt){var ci=Pe&16383;for(Pe>>=14;--Yt>=0;){var q=this[Se]&16383,Fi=this[Se++]>>14,Pn=Pe*q+Fi*ci,q=ci*q+((Pn&16383)<<14)+Fe[tt]+Pt,Pt=(q>>28)+(Pn>>14)+Pe*Fi;Fe[tt++]=q&268435455}return Pt}J.prototype.am=Ye,re=28,J.prototype.DB=re,J.prototype.DM=(1<<re)-1,J.prototype.DV=1<<re;var et=52;J.prototype.FV=Math.pow(2,et),J.prototype.F1=et-re,J.prototype.F2=2*re-et;var R="0123456789abcdefghijklmnopqrstuvwxyz",He=[],G,ge;for(G=48,ge=0;ge<=9;++ge)He[G++]=ge;for(G=97,ge=10;ge<36;++ge)He[G++]=ge;for(G=65,ge=10;ge<36;++ge)He[G++]=ge;function xe(Se){return R.charAt(Se)}function ke(Se,Pe){var Fe=He[Se.charCodeAt(Pe)];return Fe??-1}function ce(Se){for(var Pe=this.t-1;Pe>=0;--Pe)Se[Pe]=this[Pe];Se.t=this.t,Se.s=this.s}function X(Se){this.t=1,this.s=Se<0?-1:0,Se>0?this[0]=Se:Se<-1?this[0]=Se+DV:this.t=0}function Be(Se){var Pe=De();return Pe.fromInt(Se),Pe}function lt(Se,Pe){var Fe;if(Pe==16)Fe=4;else if(Pe==8)Fe=3;else if(Pe==256)Fe=8;else if(Pe==2)Fe=1;else if(Pe==32)Fe=5;else if(Pe==4)Fe=2;else{this.fromRadix(Se,Pe);return}this.s=this.t=0;for(var tt=Se.length,Pt=!1,Yt=0;--tt>=0;){var ci=Fe==8?Se[tt]&255:ke(Se,tt);ci<0?Se.charAt(tt)=="-"&&(Pt=!0):(Pt=!1,Yt==0?this[this.t++]=ci:Yt+Fe>this.DB?(this[this.t-1]|=(ci&(1<<this.DB-Yt)-1)<<Yt,this[this.t++]=ci>>this.DB-Yt):this[this.t-1]|=ci<<Yt,Yt+=Fe,Yt>=this.DB&&(Yt-=this.DB))}Fe==8&&Se[0]&128&&(this.s=-1,Yt>0&&(this[this.t-1]|=(1<<this.DB-Yt)-1<<Yt)),this.clamp(),Pt&&J.ZERO.subTo(this,this)}function dt(){for(var Se=this.s&this.DM;this.t>0&&this[this.t-1]==Se;)--this.t}function Lt(Se){if(this.s<0)return"-"+this.negate().toString(Se);if(Se==16)Se=4;else if(Se==8)Se=3;else if(Se==2)Se=1;else if(Se==32)Se=5;else if(Se==64)Se=6;else if(Se==4)Se=2;else return this.toRadix(Se);var Pe=(1<<Se)-1,Fe,tt=!1,Pt="",Yt=this.t,ci=this.DB-Yt*this.DB%Se;if(Yt-- >0)for(ci<this.DB&&(Fe=this[Yt]>>ci)>0&&(tt=!0,Pt=xe(Fe));Yt>=0;)ci<Se?(Fe=(this[Yt]&(1<<ci)-1)<<Se-ci,Fe|=this[--Yt]>>(ci+=this.DB-Se)):(Fe=this[Yt]>>(ci-=Se)&Pe,ci<=0&&(ci+=this.DB,--Yt)),Fe>0&&(tt=!0),tt&&(Pt+=xe(Fe));return tt?Pt:"0"}function qt(){var Se=De();return J.ZERO.subTo(this,Se),Se}function Si(){return this.s<0?this.negate():this}function he(Se){var Fe=this.s-Se.s;if(Fe!=0)return Fe;var Pe=this.t,Fe=Pe-Se.t;if(Fe!=0)return Fe;for(;--Pe>=0;)if((Fe=this[Pe]-Se[Pe])!=0)return Fe;return 0}function Bi(Se){var Pe=1,Fe;return(Fe=Se>>>16)!=0&&(Se=Fe,Pe+=16),(Fe=Se>>8)!=0&&(Se=Fe,Pe+=8),(Fe=Se>>4)!=0&&(Se=Fe,Pe+=4),(Fe=Se>>2)!=0&&(Se=Fe,Pe+=2),Se>>1&&(Pe+=1),Pe}function yt(){return this.t<=0?0:this.DB*(this.t-1)+Bi(this[this.t-1]^this.s&this.DM)}function wt(Se,Pe){var Fe;for(Fe=this.t-1;Fe>=0;--Fe)Pe[Fe+Se]=this[Fe];for(Fe=Se-1;Fe>=0;--Fe)Pe[Fe]=0;Pe.t=this.t+Se,Pe.s=this.s}function pt(Se,Pe){for(var Fe=Se;Fe<this.t;++Fe)Pe[Fe-Se]=this[Fe];Pe.t=Math.max(this.t-Se,0),Pe.s=this.s}function Dt(Se,Pe){var Fe=Se%this.DB,tt=this.DB-Fe,Pt=(1<<tt)-1,Yt=Math.floor(Se/this.DB),ci=this.s<<Fe&this.DM,Fi;for(Fi=this.t-1;Fi>=0;--Fi)Pe[Fi+Yt+1]=this[Fi]>>tt|ci,ci=(this[Fi]&Pt)<<Fe;for(Fi=Yt-1;Fi>=0;--Fi)Pe[Fi]=0;Pe[Yt]=ci,Pe.t=this.t+Yt+1,Pe.s=this.s,Pe.clamp()}function St(Se,Pe){Pe.s=this.s;var Fe=Math.floor(Se/this.DB);if(Fe>=this.t)Pe.t=0;else{var tt=Se%this.DB,Pt=this.DB-tt,Yt=(1<<tt)-1;Pe[0]=this[Fe]>>tt;for(var ci=Fe+1;ci<this.t;++ci)Pe[ci-Fe-1]|=(this[ci]&Yt)<<Pt,Pe[ci-Fe]=this[ci]>>tt;tt>0&&(Pe[this.t-Fe-1]|=(this.s&Yt)<<Pt),Pe.t=this.t-Fe,Pe.clamp()}}function Et(Se,Pe){for(var Fe=0,tt=0,Pt=Math.min(Se.t,this.t);Fe<Pt;)tt+=this[Fe]-Se[Fe],Pe[Fe++]=tt&this.DM,tt>>=this.DB;if(Se.t<this.t){for(tt-=Se.s;Fe<this.t;)tt+=this[Fe],Pe[Fe++]=tt&this.DM,tt>>=this.DB;tt+=this.s}else{for(tt+=this.s;Fe<Se.t;)tt-=Se[Fe],Pe[Fe++]=tt&this.DM,tt>>=this.DB;tt-=Se.s}Pe.s=tt<0?-1:0,tt<-1?Pe[Fe++]=this.DV+tt:tt>0&&(Pe[Fe++]=tt),Pe.t=Fe,Pe.clamp()}function jt(Se,Pe){var Fe=this.abs(),tt=Se.abs(),Pt=Fe.t;for(Pe.t=Pt+tt.t;--Pt>=0;)Pe[Pt]=0;for(Pt=0;Pt<tt.t;++Pt)Pe[Pt+Fe.t]=Fe.am(0,tt[Pt],Pe,Pt,0,Fe.t);Pe.s=0,Pe.clamp(),this.s!=Se.s&&J.ZERO.subTo(Pe,Pe)}function _t(Se){for(var Pe=this.abs(),Fe=Se.t=2*Pe.t;--Fe>=0;)Se[Fe]=0;for(Fe=0;Fe<Pe.t-1;++Fe){var tt=Pe.am(Fe,Pe[Fe],Se,2*Fe,0,1);(Se[Fe+Pe.t]+=Pe.am(Fe+1,2*Pe[Fe],Se,2*Fe+1,tt,Pe.t-Fe-1))>=Pe.DV&&(Se[Fe+Pe.t]-=Pe.DV,Se[Fe+Pe.t+1]=1)}Se.t>0&&(Se[Se.t-1]+=Pe.am(Fe,Pe[Fe],Se,2*Fe,0,1)),Se.s=0,Se.clamp()}function Xt(Se,Pe,Fe){var tt=Se.abs();if(!(tt.t<=0)){var Pt=this.abs();if(Pt.t<tt.t)Pe!=null&&Pe.fromInt(0),Fe!=null&&this.copyTo(Fe);else{Fe==null&&(Fe=De());var Yt=De(),ci=this.s,Se=Se.s,Fi=this.DB-Bi(tt[tt.t-1]);if(Fi>0?(tt.lShiftTo(Fi,Yt),Pt.lShiftTo(Fi,Fe)):(tt.copyTo(Yt),Pt.copyTo(Fe)),tt=Yt.t,Pt=Yt[tt-1],Pt!=0){var q=Pt*(1<<this.F1)+(tt>1?Yt[tt-2]>>this.F2:0),Pn=this.FV/q,q=(1<<this.F1)/q,_=1<<this.F2,U=Fe.t,W=U-tt,pe=Pe??De();for(Yt.dlShiftTo(W,pe),Fe.compareTo(pe)>=0&&(Fe[Fe.t++]=1,Fe.subTo(pe,Fe)),J.ONE.dlShiftTo(tt,pe),pe.subTo(Yt,Yt);Yt.t<tt;)Yt[Yt.t++]=0;for(;--W>=0;){var Ie=Fe[--U]==Pt?this.DM:Math.floor(Fe[U]*Pn+(Fe[U-1]+_)*q);if((Fe[U]+=Yt.am(0,Ie,Fe,W,0,tt))<Ie)for(Yt.dlShiftTo(W,pe),Fe.subTo(pe,Fe);Fe[U]<--Ie;)Fe.subTo(pe,Fe)}Pe!=null&&(Fe.drShiftTo(tt,Pe),ci!=Se&&J.ZERO.subTo(Pe,Pe)),Fe.t=tt,Fe.clamp(),Fi>0&&Fe.rShiftTo(Fi,Fe),ci<0&&J.ZERO.subTo(Fe,Fe)}}}}function ot(Se){var Pe=De();return this.abs().divRemTo(Se,null,Pe),this.s<0&&Pe.compareTo(J.ZERO)>0&&Se.subTo(Pe,Pe),Pe}function mi(Se){this.m=Se}function Pi(Se){return Se.s<0||Se.compareTo(this.m)>=0?Se.mod(this.m):Se}function Ii(Se){return Se}function ti(Se){Se.divRemTo(this.m,null,Se)}function Vi(Se,Pe,Fe){Se.multiplyTo(Pe,Fe),this.reduce(Fe)}function Jt(Se,Pe){Se.squareTo(Pe),this.reduce(Pe)}mi.prototype.convert=Pi,mi.prototype.revert=Ii,mi.prototype.reduce=ti,mi.prototype.mulTo=Vi,mi.prototype.sqrTo=Jt;function At(){if(this.t<1)return 0;var Se=this[0];if(!(Se&1))return 0;var Pe=Se&3,Pe=Pe*(2-(Se&15)*Pe)&15,Pe=Pe*(2-(Se&255)*Pe)&255,Pe=Pe*(2-((Se&65535)*Pe&65535))&65535,Pe=Pe*(2-Se*Pe%this.DV)%this.DV;return Pe>0?this.DV-Pe:-Pe}function j(Se){this.m=Se,this.mp=Se.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<Se.DB-15)-1,this.mt2=2*Se.t}function T(Se){var Pe=De();return Se.abs().dlShiftTo(this.m.t,Pe),Pe.divRemTo(this.m,null,Pe),Se.s<0&&Pe.compareTo(J.ZERO)>0&&this.m.subTo(Pe,Pe),Pe}function F(Se){var Pe=De();return Se.copyTo(Pe),this.reduce(Pe),Pe}function S(Se){for(;Se.t<=this.mt2;)Se[Se.t++]=0;for(var Pe=0;Pe<this.m.t;++Pe){var tt=Se[Pe]&32767,Fe=tt*this.mpl+((tt*this.mph+(Se[Pe]>>15)*this.mpl&this.um)<<15)&Se.DM,tt=Pe+this.m.t;for(Se[tt]+=this.m.am(0,Fe,Se,Pe,0,this.m.t);Se[tt]>=Se.DV;)Se[tt]-=Se.DV,Se[++tt]++}Se.clamp(),Se.drShiftTo(this.m.t,Se),Se.compareTo(this.m)>=0&&Se.subTo(this.m,Se)}function be(Se,Pe){Se.squareTo(Pe),this.reduce(Pe)}function _e(Se,Pe,Fe){Se.multiplyTo(Pe,Fe),this.reduce(Fe)}j.prototype.convert=T,j.prototype.revert=F,j.prototype.reduce=S,j.prototype.mulTo=_e,j.prototype.sqrTo=be;function Me(){return(this.t>0?this[0]&1:this.s)==0}function Ue(Se,Pe){if(Se>4294967295||Se<1)return J.ONE;var Fe=De(),tt=De(),Pt=Pe.convert(this),Yt=Bi(Se)-1;for(Pt.copyTo(Fe);--Yt>=0;)if(Pe.sqrTo(Fe,tt),(Se&1<<Yt)>0)Pe.mulTo(tt,Pt,Fe);else var ci=Fe,Fe=tt,tt=ci;return Pe.revert(Fe)}function ft(Se,Pe){var Fe;return Fe=Se<256||Pe.isEven()?new mi(Pe):new j(Pe),this.exp(Se,Fe)}J.prototype.copyTo=ce,J.prototype.fromInt=X,J.prototype.fromString=lt,J.prototype.clamp=dt,J.prototype.dlShiftTo=wt,J.prototype.drShiftTo=pt,J.prototype.lShiftTo=Dt,J.prototype.rShiftTo=St,J.prototype.subTo=Et,J.prototype.multiplyTo=jt,J.prototype.squareTo=_t,J.prototype.divRemTo=Xt,J.prototype.invDigit=At,J.prototype.isEven=Me,J.prototype.exp=Ue,J.prototype.toString=Lt,J.prototype.negate=qt,J.prototype.abs=Si,J.prototype.compareTo=he,J.prototype.bitLength=yt,J.prototype.mod=ot,J.prototype.modPowInt=ft,J.ZERO=Be(0),J.ONE=Be(1);function Gt(){var Se=De();return this.copyTo(Se),Se}function Ft(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ee(){return this.t==0?this.s:this[0]<<24>>24}function nt(){return this.t==0?this.s:this[0]<<16>>16}function Zt(Se){return Math.floor(Math.LN2*this.DB/Math.log(Se))}function bi(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Kt(Se){if(Se==null&&(Se=10),this.signum()==0||Se<2||Se>36)return"0";var Pe=this.chunkSize(Se),Pe=Math.pow(Se,Pe),Fe=Be(Pe),tt=De(),Pt=De(),Yt="";for(this.divRemTo(Fe,tt,Pt);tt.signum()>0;)Yt=(Pe+Pt.intValue()).toString(Se).substr(1)+Yt,tt.divRemTo(Fe,tt,Pt);return Pt.intValue().toString(Se)+Yt}function ri(Se,Pe){this.fromInt(0),Pe==null&&(Pe=10);for(var Fe=this.chunkSize(Pe),tt=Math.pow(Pe,Fe),Pt=!1,Yt=0,ci=0,Fi=0;Fi<Se.length;++Fi){var Pn=ke(Se,Fi);Pn<0?Se.charAt(Fi)=="-"&&this.signum()==0&&(Pt=!0):(ci=Pe*ci+Pn,++Yt>=Fe&&(this.dMultiply(tt),this.dAddOffset(ci,0),ci=Yt=0))}Yt>0&&(this.dMultiply(Math.pow(Pe,Yt)),this.dAddOffset(ci,0)),Pt&&J.ZERO.subTo(this,this)}function Li(Se,Pe,Fe){if(typeof Pe=="number")if(Se<2)this.fromInt(1);else for(this.fromNumber(Se,Fe),this.testBit(Se-1)||this.bitwiseTo(J.ONE.shiftLeft(Se-1),Gi,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(Pe);)this.dAddOffset(2,0),this.bitLength()>Se&&this.subTo(J.ONE.shiftLeft(Se-1),this);else{var Fe=[],tt=Se&7;Fe.length=(Se>>3)+1,Pe.nextBytes(Fe),tt>0?Fe[0]&=(1<<tt)-1:Fe[0]=0,this.fromString(Fe,256)}}function li(){var Se=this.t,Pe=[];Pe[0]=this.s;var Fe=this.DB-Se*this.DB%8,tt,Pt=0;if(Se-- >0)for(Fe<this.DB&&(tt=this[Se]>>Fe)!=(this.s&this.DM)>>Fe&&(Pe[Pt++]=tt|this.s<<this.DB-Fe);Se>=0;)Fe<8?(tt=(this[Se]&(1<<Fe)-1)<<8-Fe,tt|=this[--Se]>>(Fe+=this.DB-8)):(tt=this[Se]>>(Fe-=8)&255,Fe<=0&&(Fe+=this.DB,--Se)),tt&128&&(tt|=-256),Pt==0&&(this.s&128)!=(tt&128)&&++Pt,(Pt>0||tt!=this.s)&&(Pe[Pt++]=tt);return Pe}function Mt(Se){return this.compareTo(Se)==0}function Nt(Se){return this.compareTo(Se)<0?this:Se}function ai(Se){return this.compareTo(Se)>0?this:Se}function ji(Se,Pe,Fe){var tt,Pt,Yt=Math.min(Se.t,this.t);for(tt=0;tt<Yt;++tt)Fe[tt]=Pe(this[tt],Se[tt]);if(Se.t<this.t){for(Pt=Se.s&this.DM,tt=Yt;tt<this.t;++tt)Fe[tt]=Pe(this[tt],Pt);Fe.t=this.t}else{for(Pt=this.s&this.DM,tt=Yt;tt<Se.t;++tt)Fe[tt]=Pe(Pt,Se[tt]);Fe.t=Se.t}Fe.s=Pe(this.s,Se.s),Fe.clamp()}function tn(Se,Pe){return Se&Pe}function Ui(Se){var Pe=De();return this.bitwiseTo(Se,tn,Pe),Pe}function Gi(Se,Pe){return Se|Pe}function nn(Se){var Pe=De();return this.bitwiseTo(Se,Gi,Pe),Pe}function Zi(Se,Pe){return Se^Pe}function Yi(Se){var Pe=De();return this.bitwiseTo(Se,Zi,Pe),Pe}function bn(Se,Pe){return Se&~Pe}function vn(Se){var Pe=De();return this.bitwiseTo(Se,bn,Pe),Pe}function jn(){for(var Se=De(),Pe=0;Pe<this.t;++Pe)Se[Pe]=this.DM&~this[Pe];return Se.t=this.t,Se.s=~this.s,Se}function un(Se){var Pe=De();return Se<0?this.rShiftTo(-Se,Pe):this.lShiftTo(Se,Pe),Pe}function Un(Se){var Pe=De();return Se<0?this.lShiftTo(-Se,Pe):this.rShiftTo(Se,Pe),Pe}function Hn(Se){if(Se==0)return-1;var Pe=0;return!(Se&65535)&&(Se>>=16,Pe+=16),!(Se&255)&&(Se>>=8,Pe+=8),!(Se&15)&&(Se>>=4,Pe+=4),!(Se&3)&&(Se>>=2,Pe+=2),!(Se&1)&&++Pe,Pe}function yn(){for(var Se=0;Se<this.t;++Se)if(this[Se]!=0)return Se*this.DB+Hn(this[Se]);return this.s<0?this.t*this.DB:-1}function fn(Se){for(var Pe=0;Se!=0;)Se&=Se-1,++Pe;return Pe}function Cn(){for(var Se=0,Pe=this.s&this.DM,Fe=0;Fe<this.t;++Fe)Se+=fn(this[Fe]^Pe);return Se}function wr(Se){var Pe=Math.floor(Se/this.DB);return Pe>=this.t?this.s!=0:(this[Pe]&1<<Se%this.DB)!=0}function tr(Se,Pe){var Fe=J.ONE.shiftLeft(Se);return this.bitwiseTo(Fe,Pe,Fe),Fe}function Nn(Se){return this.changeBit(Se,Gi)}function lr(Se){return this.changeBit(Se,bn)}function zr(Se){return this.changeBit(Se,Zi)}function Ir(Se,Pe){for(var Fe=0,tt=0,Pt=Math.min(Se.t,this.t);Fe<Pt;)tt+=this[Fe]+Se[Fe],Pe[Fe++]=tt&this.DM,tt>>=this.DB;if(Se.t<this.t){for(tt+=Se.s;Fe<this.t;)tt+=this[Fe],Pe[Fe++]=tt&this.DM,tt>>=this.DB;tt+=this.s}else{for(tt+=this.s;Fe<Se.t;)tt+=Se[Fe],Pe[Fe++]=tt&this.DM,tt>>=this.DB;tt+=Se.s}Pe.s=tt<0?-1:0,tt>0?Pe[Fe++]=tt:tt<-1&&(Pe[Fe++]=this.DV+tt),Pe.t=Fe,Pe.clamp()}function _n(Se){var Pe=De();return this.addTo(Se,Pe),Pe}function fr(Se){var Pe=De();return this.subTo(Se,Pe),Pe}function Jn(Se){var Pe=De();return this.multiplyTo(Se,Pe),Pe}function kn(){var Se=De();return this.squareTo(Se),Se}function mr(Se){var Pe=De();return this.divRemTo(Se,Pe,null),Pe}function Yn(Se){var Pe=De();return this.divRemTo(Se,null,Pe),Pe}function Dr(Se){var Pe=De(),Fe=De();return this.divRemTo(Se,Pe,Fe),[Pe,Fe]}function ta(Se){this[this.t]=this.am(0,Se-1,this,0,0,this.t),++this.t,this.clamp()}function Vr(Se,Pe){if(Se!=0){for(;this.t<=Pe;)this[this.t++]=0;for(this[Pe]+=Se;this[Pe]>=this.DV;)this[Pe]-=this.DV,++Pe>=this.t&&(this[this.t++]=0),++this[Pe]}}function jr(){}function ma(Se){return Se}function ca(Se,Pe,Fe){Se.multiplyTo(Pe,Fe)}function Ta(Se,Pe){Se.squareTo(Pe)}jr.prototype.convert=ma,jr.prototype.revert=ma,jr.prototype.mulTo=ca,jr.prototype.sqrTo=Ta;function ir(Se){return this.exp(Se,new jr)}function Tt(Se,Pe,Fe){var tt=Math.min(this.t+Se.t,Pe);for(Fe.s=0,Fe.t=tt;tt>0;)Fe[--tt]=0;var Pt;for(Pt=Fe.t-this.t;tt<Pt;++tt)Fe[tt+this.t]=this.am(0,Se[tt],Fe,tt,0,this.t);for(Pt=Math.min(Se.t,Pe);tt<Pt;++tt)this.am(0,Se[tt],Fe,tt,0,Pe-tt);Fe.clamp()}function Gr(Se,Pe,Fe){--Pe;var tt=Fe.t=this.t+Se.t-Pe;for(Fe.s=0;--tt>=0;)Fe[tt]=0;for(tt=Math.max(Pe-this.t,0);tt<Se.t;++tt)Fe[this.t+tt-Pe]=this.am(Pe-tt,Se[tt],Fe,0,0,this.t+tt-Pe);Fe.clamp(),Fe.drShiftTo(1,Fe)}function Ar(Se){this.r2=De(),this.q3=De(),J.ONE.dlShiftTo(2*Se.t,this.r2),this.mu=this.r2.divide(Se),this.m=Se}function oe(Se){if(Se.s<0||Se.t>2*this.m.t)return Se.mod(this.m);if(Se.compareTo(this.m)<0)return Se;var Pe=De();return Se.copyTo(Pe),this.reduce(Pe),Pe}function si(Se){return Se}function Ge(Se){for(Se.drShiftTo(this.m.t-1,this.r2),Se.t>this.m.t+1&&(Se.t=this.m.t+1,Se.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Se.compareTo(this.r2)<0;)Se.dAddOffset(1,this.m.t+1);for(Se.subTo(this.r2,Se);Se.compareTo(this.m)>=0;)Se.subTo(this.m,Se)}function u(Se,Pe){Se.squareTo(Pe),this.reduce(Pe)}function s(Se,Pe,Fe){Se.multiplyTo(Pe,Fe),this.reduce(Fe)}Ar.prototype.convert=oe,Ar.prototype.revert=si,Ar.prototype.reduce=Ge,Ar.prototype.mulTo=s,Ar.prototype.sqrTo=u;function e(Se,Pe){var Fe=Se.bitLength(),tt,Pt=Be(1),Yt;if(Fe<=0)return Pt;tt=Fe<18?1:Fe<48?3:Fe<144?4:Fe<768?5:6,Yt=Fe<8?new mi(Pe):Pe.isEven()?new Ar(Pe):new j(Pe);var ci=[],Fi=3,Pn=tt-1,q=(1<<tt)-1;if(ci[1]=Yt.convert(this),tt>1)for(Fe=De(),Yt.sqrTo(ci[1],Fe);Fi<=q;)ci[Fi]=De(),Yt.mulTo(Fe,ci[Fi-2],ci[Fi]),Fi+=2;for(var _=Se.t-1,U,W=!0,pe=De(),Fe=Bi(Se[_])-1;_>=0;){for(Fe>=Pn?U=Se[_]>>Fe-Pn&q:(U=(Se[_]&(1<<Fe+1)-1)<<Pn-Fe,_>0&&(U|=Se[_-1]>>this.DB+Fe-Pn)),Fi=tt;!(U&1);)U>>=1,--Fi;if((Fe-=Fi)<0&&(Fe+=this.DB,--_),W)ci[U].copyTo(Pt),W=!1;else{for(;Fi>1;)Yt.sqrTo(Pt,pe),Yt.sqrTo(pe,Pt),Fi-=2;Fi>0?Yt.sqrTo(Pt,pe):(Fi=Pt,Pt=pe,pe=Fi),Yt.mulTo(pe,ci[U],Pt)}for(;_>=0&&!(Se[_]&1<<Fe);)Yt.sqrTo(Pt,pe),Fi=Pt,Pt=pe,pe=Fi,--Fe<0&&(Fe=this.DB-1,--_)}return Yt.revert(Pt)}function r(Fe){var Pe=this.s<0?this.negate():this.clone(),Fe=Fe.s<0?Fe.negate():Fe.clone();if(Pe.compareTo(Fe)<0)var tt=Pe,Pe=Fe,Fe=tt;var tt=Pe.getLowestSetBit(),Pt=Fe.getLowestSetBit();if(Pt<0)return Pe;for(tt<Pt&&(Pt=tt),Pt>0&&(Pe.rShiftTo(Pt,Pe),Fe.rShiftTo(Pt,Fe));Pe.signum()>0;)(tt=Pe.getLowestSetBit())>0&&Pe.rShiftTo(tt,Pe),(tt=Fe.getLowestSetBit())>0&&Fe.rShiftTo(tt,Fe),Pe.compareTo(Fe)>=0?(Pe.subTo(Fe,Pe),Pe.rShiftTo(1,Pe)):(Fe.subTo(Pe,Fe),Fe.rShiftTo(1,Fe));return Pt>0&&Fe.lShiftTo(Pt,Fe),Fe}function b(Se){if(Se<=0)return 0;var Pe=this.DV%Se,Fe=this.s<0?Se-1:0;if(this.t>0)if(Pe==0)Fe=this[0]%Se;else for(var tt=this.t-1;tt>=0;--tt)Fe=(Pe*Fe+this[tt])%Se;return Fe}function A(Se){var Pe=Se.isEven();if(this.isEven()&&Pe||Se.signum()==0)return J.ZERO;for(var Fe=Se.clone(),tt=this.clone(),Pt=Be(1),Yt=Be(0),ci=Be(0),Fi=Be(1);Fe.signum()!=0;){for(;Fe.isEven();)Fe.rShiftTo(1,Fe),Pe?((!Pt.isEven()||!Yt.isEven())&&(Pt.addTo(this,Pt),Yt.subTo(Se,Yt)),Pt.rShiftTo(1,Pt)):Yt.isEven()||Yt.subTo(Se,Yt),Yt.rShiftTo(1,Yt);for(;tt.isEven();)tt.rShiftTo(1,tt),Pe?((!ci.isEven()||!Fi.isEven())&&(ci.addTo(this,ci),Fi.subTo(Se,Fi)),ci.rShiftTo(1,ci)):Fi.isEven()||Fi.subTo(Se,Fi),Fi.rShiftTo(1,Fi);Fe.compareTo(tt)>=0?(Fe.subTo(tt,Fe),Pe&&Pt.subTo(ci,Pt),Yt.subTo(Fi,Yt)):(tt.subTo(Fe,tt),Pe&&ci.subTo(Pt,ci),Fi.subTo(Yt,Fi))}if(tt.compareTo(J.ONE)!=0)return J.ZERO;if(Fi.compareTo(Se)>=0)return Fi.subtract(Se);if(Fi.signum()<0)Fi.addTo(Se,Fi);else return Fi;return Fi.signum()<0?Fi.add(Se):Fi}var Ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ae=67108864/Ce[Ce.length-1];function zt(Se){var Pe,Fe=this.abs();if(Fe.t==1&&Fe[0]<=Ce[Ce.length-1]){for(Pe=0;Pe<Ce.length;++Pe)if(Fe[0]==Ce[Pe])return!0;return!1}if(Fe.isEven())return!1;for(Pe=1;Pe<Ce.length;){for(var tt=Ce[Pe],Pt=Pe+1;Pt<Ce.length&&tt<Ae;)tt*=Ce[Pt++];for(tt=Fe.modInt(tt);Pe<Pt;)if(tt%Ce[Pe++]==0)return!1}return Fe.millerRabin(Se)}function z(Pt){var Pe=this.subtract(J.ONE),Fe=Pe.getLowestSetBit();if(Fe<=0)return!1;var tt=Pe.shiftRight(Fe),Pt=Pt+1>>1;Pt>Ce.length&&(Pt=Ce.length);for(var Yt=De(),ci=0;ci<Pt;++ci){Yt.fromInt(Ce[Math.floor(Math.random()*Ce.length)]);var Fi=Yt.modPow(tt,this);if(Fi.compareTo(J.ONE)!=0&&Fi.compareTo(Pe)!=0){for(var Pn=1;Pn++<Fe&&Fi.compareTo(Pe)!=0;)if(Fi=Fi.modPowInt(2,this),Fi.compareTo(J.ONE)==0)return!1;if(Fi.compareTo(Pe)!=0)return!1}}return!0}J.prototype.chunkSize=Zt,J.prototype.toRadix=Kt,J.prototype.fromRadix=ri,J.prototype.fromNumber=Li,J.prototype.bitwiseTo=ji,J.prototype.changeBit=tr,J.prototype.addTo=Ir,J.prototype.dMultiply=ta,J.prototype.dAddOffset=Vr,J.prototype.multiplyLowerTo=Tt,J.prototype.multiplyUpperTo=Gr,J.prototype.modInt=b,J.prototype.millerRabin=z,J.prototype.clone=Gt,J.prototype.intValue=Ft,J.prototype.byteValue=Ee,J.prototype.shortValue=nt,J.prototype.signum=bi,J.prototype.toByteArray=li,J.prototype.equals=Mt,J.prototype.min=Nt,J.prototype.max=ai,J.prototype.and=Ui,J.prototype.or=nn,J.prototype.xor=Yi,J.prototype.andNot=vn,J.prototype.not=jn,J.prototype.shiftLeft=un,J.prototype.shiftRight=Un,J.prototype.getLowestSetBit=yn,J.prototype.bitCount=Cn,J.prototype.testBit=wr,J.prototype.setBit=Nn,J.prototype.clearBit=lr,J.prototype.flipBit=zr,J.prototype.add=_n,J.prototype.subtract=fr,J.prototype.multiply=Jn,J.prototype.divide=mr,J.prototype.remainder=Yn,J.prototype.divideAndRemainder=Dr,J.prototype.modPow=e,J.prototype.modInverse=A,J.prototype.pow=ir,J.prototype.gcd=r,J.prototype.isProbablePrime=zt,J.prototype.square=kn,function(Se,Pe,Fe,tt,Pt,Yt,ci){function Fi(_){var U,W,pe=this,Ie=_.length,Le=0,it=pe.i=pe.j=pe.m=0;for(pe.S=[],pe.c=[],Ie||(_=[Ie++]);Le<Fe;)pe.S[Le]=Le++;for(Le=0;Le<Fe;Le++)U=pe.S[Le],it=it+U+_[Le%Ie]&Fe-1,W=pe.S[it],pe.S[Le]=W,pe.S[it]=U;pe.g=function(ut){var Rt=pe.S,Qt=pe.i+1&Fe-1,vi=Rt[Qt],Di=pe.j+vi&Fe-1,pi=Rt[Di];Rt[Qt]=pi,Rt[Di]=vi;for(var Oi=Rt[vi+pi&Fe-1];--ut;)Qt=Qt+1&Fe-1,vi=Rt[Qt],Di=Di+vi&Fe-1,pi=Rt[Di],Rt[Qt]=pi,Rt[Di]=vi,Oi=Oi*Fe+Rt[vi+pi&Fe-1];return pe.i=Qt,pe.j=Di,Oi},pe.g(Fe)}function Pn(_,U,W,pe,Ie){if(W=[],Ie=Ni(_),U&&Ie=="object"){for(pe in _)if(pe.indexOf("S")<5)try{W.push(Pn(_[pe],U-1))}catch{}}return W.length?W:_+(Ie!="string"?"\0":"")}function q(_,U,W,pe){for(_+="",pe=W=0;pe<_.length;pe++){var Ie=U,Le=pe&Fe-1,it=(W^=U[pe&Fe-1]*19)+_.charCodeAt(pe);Ie[Le]=it&Fe-1}_="";for(pe in U)_+=String.fromCharCode(U[pe]);return _}Pe.seedrandom=function(Ie,U){var W=[],pe,Ie=q(Pn(U?[Ie,Se]:arguments.length?Ie:[new Date().getTime(),Se,window],3),W);return pe=new Fi(W),q(pe.S,Se),Pe.random=function(){for(var Le=pe.g(tt),it=ci,ut=0;Le<Pt;)Le=(Le+ut)*Fe,it*=Fe,ut=pe.g(1);for(;Le>=Yt;)Le/=2,it/=2,ut>>>=1;return(Le+ut)/it},Ie},ci=Pe.pow(Fe,tt),Pt=Pe.pow(2,Pt),Yt=Pt*2,q(Pe.random(),Se)}([],Math,256,6,52);function H(){}function K(Se){var Pe;for(Pe=0;Pe<Se.length;Pe++)Se[Pe]=Math.floor(Math.random()*256)}H.prototype.nextBytes=K;function le(){this.j=this.i=0,this.S=[]}function Xe(Se){var Pe,Fe,tt;for(Pe=0;Pe<256;++Pe)this.S[Pe]=Pe;for(Pe=Fe=0;Pe<256;++Pe)Fe=Fe+this.S[Pe]+Se[Pe%Se.length]&255,tt=this.S[Pe],this.S[Pe]=this.S[Fe],this.S[Fe]=tt;this.j=this.i=0}function vt(){var Se;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,Se=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=Se,this.S[Se+this.S[this.i]&255]}le.prototype.init=Xe,le.prototype.next=vt;function bt(){return new le}var Ht=256,gi,Hi,hi;function Ai(Se){Hi[hi++]^=Se&255,Hi[hi++]^=Se>>8&255,Hi[hi++]^=Se>>16&255,Hi[hi++]^=Se>>24&255,hi>=Ht&&(hi-=Ht)}function fi(){Ai(new Date().getTime())}if(Hi==null){Hi=[],hi=0;for(var D;hi<Ht;)D=Math.floor(65536*Math.random()),Hi[hi++]=D>>>8,Hi[hi++]=D&255;hi=0,fi()}function h(){if(gi==null){for(fi(),gi=bt(),gi.init(Hi),hi=0;hi<Hi.length;++hi)Hi[hi]=0;hi=0}return gi.next()}function k(Se){var Pe;for(Pe=0;Pe<Se.length;++Pe)Se[Pe]=h()}function V(){}V.prototype.nextBytes=k;function ve(Se){function Pe(tt,Pt){var Yt=(tt&65535)+(Pt&65535);return(tt>>16)+(Pt>>16)+(Yt>>16)<<16|Yt&65535}function Fe(tt,Pt){return tt>>>Pt|tt<<32-Pt}return Se=function(tt){for(var tt=tt.replace(/\r\n/g,`
`),Pt="",Yt=0;Yt<tt.length;Yt++){var ci=tt.charCodeAt(Yt);ci<128?Pt+=String.fromCharCode(ci):(ci>127&&ci<2048?Pt+=String.fromCharCode(ci>>6|192):(Pt+=String.fromCharCode(ci>>12|224),Pt+=String.fromCharCode(ci>>6&63|128)),Pt+=String.fromCharCode(ci&63|128))}return Pt}(Se),function(tt){for(var Pt="",Yt=0;Yt<tt.length*4;Yt++)Pt+="0123456789abcdef".charAt(tt[Yt>>2]>>(3-Yt%4)*8+4&15)+"0123456789abcdef".charAt(tt[Yt>>2]>>(3-Yt%4)*8&15);return Pt}(function(tt,Pt){var Yt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ci=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Fi=Array(64),Pn,q,_,U,W,pe,Ie,Le,it,ut,Rt,Qt;for(tt[Pt>>5]|=128<<24-Pt%32,tt[(Pt+64>>9<<4)+15]=Pt,it=0;it<tt.length;it+=16){for(Pn=ci[0],q=ci[1],_=ci[2],U=ci[3],W=ci[4],pe=ci[5],Ie=ci[6],Le=ci[7],ut=0;ut<64;ut++)Fi[ut]=ut<16?tt[ut+it]:Pe(Pe(Pe(Fe(Fi[ut-2],17)^Fe(Fi[ut-2],19)^Fi[ut-2]>>>10,Fi[ut-7]),Fe(Fi[ut-15],7)^Fe(Fi[ut-15],18)^Fi[ut-15]>>>3),Fi[ut-16]),Rt=Pe(Pe(Pe(Pe(Le,Fe(W,6)^Fe(W,11)^Fe(W,25)),W&pe^~W&Ie),Yt[ut]),Fi[ut]),Qt=Pe(Fe(Pn,2)^Fe(Pn,13)^Fe(Pn,22),Pn&q^Pn&_^q&_),Le=Ie,Ie=pe,pe=W,W=Pe(U,Rt),U=_,_=q,q=Pn,Pn=Pe(Rt,Qt);ci[0]=Pe(Pn,ci[0]),ci[1]=Pe(q,ci[1]),ci[2]=Pe(_,ci[2]),ci[3]=Pe(U,ci[3]),ci[4]=Pe(W,ci[4]),ci[5]=Pe(pe,ci[5]),ci[6]=Pe(Ie,ci[6]),ci[7]=Pe(Le,ci[7])}return ci}(function(tt){for(var Pt=[],Yt=0;Yt<tt.length*8;Yt+=8)Pt[Yt>>5]|=(tt.charCodeAt(Yt/8)&255)<<24-Yt%32;return Pt}(Se),Se.length*8))}var je={hex:function(Pe){return ve(Pe)}};function We(it){function Pe(Rt,Qt){return Rt<<Qt|Rt>>>32-Qt}function Fe(Rt){var Qt="",vi,Di;for(vi=7;vi>=0;vi--)Di=Rt>>>vi*4&15,Qt+=Di.toString(16);return Qt}var tt,Pt,Yt=Array(80),ci=1732584193,Fi=4023233417,Pn=2562383102,q=271733878,_=3285377520,U,W,pe,Ie,Le,it=function(Rt){for(var Rt=Rt.replace(/\r\n/g,`
`),Qt="",vi=0;vi<Rt.length;vi++){var Di=Rt.charCodeAt(vi);Di<128?Qt+=String.fromCharCode(Di):(Di>127&&Di<2048?Qt+=String.fromCharCode(Di>>6|192):(Qt+=String.fromCharCode(Di>>12|224),Qt+=String.fromCharCode(Di>>6&63|128)),Qt+=String.fromCharCode(Di&63|128))}return Qt}(it);U=it.length;var ut=[];for(tt=0;tt<U-3;tt+=4)Pt=it.charCodeAt(tt)<<24|it.charCodeAt(tt+1)<<16|it.charCodeAt(tt+2)<<8|it.charCodeAt(tt+3),ut.push(Pt);switch(U%4){case 0:tt=2147483648;break;case 1:tt=it.charCodeAt(U-1)<<24|8388608;break;case 2:tt=it.charCodeAt(U-2)<<24|it.charCodeAt(U-1)<<16|32768;break;case 3:tt=it.charCodeAt(U-3)<<24|it.charCodeAt(U-2)<<16|it.charCodeAt(U-1)<<8|128}for(ut.push(tt);ut.length%16!=14;)ut.push(0);for(ut.push(U>>>29),ut.push(U<<3&4294967295),it=0;it<ut.length;it+=16){for(tt=0;tt<16;tt++)Yt[tt]=ut[it+tt];for(tt=16;tt<=79;tt++)Yt[tt]=Pe(Yt[tt-3]^Yt[tt-8]^Yt[tt-14]^Yt[tt-16],1);for(Pt=ci,U=Fi,W=Pn,pe=q,Ie=_,tt=0;tt<=19;tt++)Le=Pe(Pt,5)+(U&W|~U&pe)+Ie+Yt[tt]+1518500249&4294967295,Ie=pe,pe=W,W=Pe(U,30),U=Pt,Pt=Le;for(tt=20;tt<=39;tt++)Le=Pe(Pt,5)+(U^W^pe)+Ie+Yt[tt]+1859775393&4294967295,Ie=pe,pe=W,W=Pe(U,30),U=Pt,Pt=Le;for(tt=40;tt<=59;tt++)Le=Pe(Pt,5)+(U&W|U&pe|W&pe)+Ie+Yt[tt]+2400959708&4294967295,Ie=pe,pe=W,W=Pe(U,30),U=Pt,Pt=Le;for(tt=60;tt<=79;tt++)Le=Pe(Pt,5)+(U^W^pe)+Ie+Yt[tt]+3395469782&4294967295,Ie=pe,pe=W,W=Pe(U,30),U=Pt,Pt=Le;ci=ci+Pt&4294967295,Fi=Fi+U&4294967295,Pn=Pn+W&4294967295,q=q+pe&4294967295,_=_+Ie&4294967295}return Le=Fe(ci)+Fe(Fi)+Fe(Pn)+Fe(q)+Fe(_),Le.toLowerCase()}var ct={hex:function(Pe){return We(Pe)}},gt=function(it){function Fe(Rt,Qt){var vi,Di,pi,Oi,Ot;return pi=Rt&2147483648,Oi=Qt&2147483648,vi=Rt&1073741824,Di=Qt&1073741824,Ot=(Rt&1073741823)+(Qt&1073741823),vi&Di?Ot^2147483648^pi^Oi:vi|Di?Ot&1073741824?Ot^3221225472^pi^Oi:Ot^1073741824^pi^Oi:Ot^pi^Oi}function tt(Rt,Qt,vi,Di,pi,Oi,Ot){return Rt=Fe(Rt,Fe(Fe(Qt&vi|~Qt&Di,pi),Ot)),Fe(Rt<<Oi|Rt>>>32-Oi,Qt)}function Pt(Rt,Qt,vi,Di,pi,Oi,Ot){return Rt=Fe(Rt,Fe(Fe(Qt&Di|vi&~Di,pi),Ot)),Fe(Rt<<Oi|Rt>>>32-Oi,Qt)}function Yt(Rt,Qt,vi,Di,pi,Oi,Ot){return Rt=Fe(Rt,Fe(Fe(Qt^vi^Di,pi),Ot)),Fe(Rt<<Oi|Rt>>>32-Oi,Qt)}function ci(Rt,Qt,vi,Di,pi,Oi,Ot){return Rt=Fe(Rt,Fe(Fe(vi^(Qt|~Di),pi),Ot)),Fe(Rt<<Oi|Rt>>>32-Oi,Qt)}function Fi(Rt){var Qt="",vi="",Di;for(Di=0;Di<=3;Di++)vi=Rt>>>Di*8&255,vi="0"+vi.toString(16),Qt+=vi.substr(vi.length-2,2);return Qt}var ut=[],Pn,q,_,U,W,pe,Ie,Le,it=function(Rt){for(var Rt=Rt.replace(/\r\n/g,`
`),Qt="",vi=0;vi<Rt.length;vi++){var Di=Rt.charCodeAt(vi);Di<128?Qt+=String.fromCharCode(Di):(Di>127&&Di<2048?Qt+=String.fromCharCode(Di>>6|192):(Qt+=String.fromCharCode(Di>>12|224),Qt+=String.fromCharCode(Di>>6&63|128)),Qt+=String.fromCharCode(Di&63|128))}return Qt}(it),ut=function(Rt){var Qt,vi=Rt.length;Qt=vi+8;for(var Di=((Qt-Qt%64)/64+1)*16,pi=Array(Di-1),Oi=0,Ot=0;Ot<vi;)Qt=(Ot-Ot%4)/4,Oi=Ot%4*8,pi[Qt]|=Rt.charCodeAt(Ot)<<Oi,Ot++;return pi[(Ot-Ot%4)/4]|=128<<Ot%4*8,pi[Di-2]=vi<<3,pi[Di-1]=vi>>>29,pi}(it);for(W=1732584193,pe=4023233417,Ie=2562383102,Le=271733878,it=0;it<ut.length;it+=16)Pn=W,q=pe,_=Ie,U=Le,W=tt(W,pe,Ie,Le,ut[it+0],7,3614090360),Le=tt(Le,W,pe,Ie,ut[it+1],12,3905402710),Ie=tt(Ie,Le,W,pe,ut[it+2],17,606105819),pe=tt(pe,Ie,Le,W,ut[it+3],22,3250441966),W=tt(W,pe,Ie,Le,ut[it+4],7,4118548399),Le=tt(Le,W,pe,Ie,ut[it+5],12,1200080426),Ie=tt(Ie,Le,W,pe,ut[it+6],17,2821735955),pe=tt(pe,Ie,Le,W,ut[it+7],22,4249261313),W=tt(W,pe,Ie,Le,ut[it+8],7,1770035416),Le=tt(Le,W,pe,Ie,ut[it+9],12,2336552879),Ie=tt(Ie,Le,W,pe,ut[it+10],17,4294925233),pe=tt(pe,Ie,Le,W,ut[it+11],22,2304563134),W=tt(W,pe,Ie,Le,ut[it+12],7,1804603682),Le=tt(Le,W,pe,Ie,ut[it+13],12,4254626195),Ie=tt(Ie,Le,W,pe,ut[it+14],17,2792965006),pe=tt(pe,Ie,Le,W,ut[it+15],22,1236535329),W=Pt(W,pe,Ie,Le,ut[it+1],5,4129170786),Le=Pt(Le,W,pe,Ie,ut[it+6],9,3225465664),Ie=Pt(Ie,Le,W,pe,ut[it+11],14,643717713),pe=Pt(pe,Ie,Le,W,ut[it+0],20,3921069994),W=Pt(W,pe,Ie,Le,ut[it+5],5,3593408605),Le=Pt(Le,W,pe,Ie,ut[it+10],9,38016083),Ie=Pt(Ie,Le,W,pe,ut[it+15],14,3634488961),pe=Pt(pe,Ie,Le,W,ut[it+4],20,3889429448),W=Pt(W,pe,Ie,Le,ut[it+9],5,568446438),Le=Pt(Le,W,pe,Ie,ut[it+14],9,3275163606),Ie=Pt(Ie,Le,W,pe,ut[it+3],14,4107603335),pe=Pt(pe,Ie,Le,W,ut[it+8],20,1163531501),W=Pt(W,pe,Ie,Le,ut[it+13],5,2850285829),Le=Pt(Le,W,pe,Ie,ut[it+2],9,4243563512),Ie=Pt(Ie,Le,W,pe,ut[it+7],14,1735328473),pe=Pt(pe,Ie,Le,W,ut[it+12],20,2368359562),W=Yt(W,pe,Ie,Le,ut[it+5],4,4294588738),Le=Yt(Le,W,pe,Ie,ut[it+8],11,2272392833),Ie=Yt(Ie,Le,W,pe,ut[it+11],16,1839030562),pe=Yt(pe,Ie,Le,W,ut[it+14],23,4259657740),W=Yt(W,pe,Ie,Le,ut[it+1],4,2763975236),Le=Yt(Le,W,pe,Ie,ut[it+4],11,1272893353),Ie=Yt(Ie,Le,W,pe,ut[it+7],16,4139469664),pe=Yt(pe,Ie,Le,W,ut[it+10],23,3200236656),W=Yt(W,pe,Ie,Le,ut[it+13],4,681279174),Le=Yt(Le,W,pe,Ie,ut[it+0],11,3936430074),Ie=Yt(Ie,Le,W,pe,ut[it+3],16,3572445317),pe=Yt(pe,Ie,Le,W,ut[it+6],23,76029189),W=Yt(W,pe,Ie,Le,ut[it+9],4,3654602809),Le=Yt(Le,W,pe,Ie,ut[it+12],11,3873151461),Ie=Yt(Ie,Le,W,pe,ut[it+15],16,530742520),pe=Yt(pe,Ie,Le,W,ut[it+2],23,3299628645),W=ci(W,pe,Ie,Le,ut[it+0],6,4096336452),Le=ci(Le,W,pe,Ie,ut[it+7],10,1126891415),Ie=ci(Ie,Le,W,pe,ut[it+14],15,2878612391),pe=ci(pe,Ie,Le,W,ut[it+5],21,4237533241),W=ci(W,pe,Ie,Le,ut[it+12],6,1700485571),Le=ci(Le,W,pe,Ie,ut[it+3],10,2399980690),Ie=ci(Ie,Le,W,pe,ut[it+10],15,4293915773),pe=ci(pe,Ie,Le,W,ut[it+1],21,2240044497),W=ci(W,pe,Ie,Le,ut[it+8],6,1873313359),Le=ci(Le,W,pe,Ie,ut[it+15],10,4264355552),Ie=ci(Ie,Le,W,pe,ut[it+6],15,2734768916),pe=ci(pe,Ie,Le,W,ut[it+13],21,1309151649),W=ci(W,pe,Ie,Le,ut[it+4],6,4149444226),Le=ci(Le,W,pe,Ie,ut[it+11],10,3174756917),Ie=ci(Ie,Le,W,pe,ut[it+2],15,718787259),pe=ci(pe,Ie,Le,W,ut[it+9],21,3951481745),W=Fe(W,Pn),pe=Fe(pe,q),Ie=Fe(Ie,_),Le=Fe(Le,U);return(Fi(W)+Fi(pe)+Fi(Ie)+Fi(Le)).toLowerCase()};function It(Se,Pe){return new J(Se,Pe)}function xi(Se,Pe){if(Pe<Se.length+11)throw"Message too long for RSA (n="+Pe+", l="+Se.length+")";for(var Fe=[],tt=Se.length-1;tt>=0&&Pe>0;){var Pt=Se.charCodeAt(tt--);Pt<128?Fe[--Pe]=Pt:Pt>127&&Pt<2048?(Fe[--Pe]=Pt&63|128,Fe[--Pe]=Pt>>6|192):(Fe[--Pe]=Pt&63|128,Fe[--Pe]=Pt>>6&63|128,Fe[--Pe]=Pt>>12|224)}for(Fe[--Pe]=0,tt=new V,Pt=[];Pe>2;){for(Pt[0]=0;Pt[0]==0;)tt.nextBytes(Pt);Fe[--Pe]=Pt[0]}return Fe[--Pe]=2,Fe[--Pe]=0,new J(Fe)}function yi(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}function Ji(Se,Pe){Se!=null&&Pe!=null&&Se.length>0&&Pe.length>0?(this.n=It(Se,16),this.e=parseInt(Pe,16)):alert("Invalid RSA public key")}function ki(Se){return Se.modPowInt(this.e,this.n)}function en(Se){return Se=xi(Se,this.n.bitLength()+7>>3),Se==null||(Se=this.doPublic(Se),Se==null)?null:(Se=Se.toString(16),Se.length&1?"0"+Se:Se)}yi.prototype.doPublic=ki,yi.prototype.setPublic=Ji,yi.prototype.encrypt=en;function In(Se,Pe){for(var Fe=Se.toByteArray(),tt=0;tt<Fe.length&&Fe[tt]==0;)++tt;if(Fe.length-tt!=Pe-1||Fe[tt]!=2)return null;for(++tt;Fe[tt]!=0;)if(++tt>=Fe.length)return null;for(var Pt="";++tt<Fe.length;){var Yt=Fe[tt]&255;Yt<128?Pt+=String.fromCharCode(Yt):Yt>191&&Yt<224?(Pt+=String.fromCharCode((Yt&31)<<6|Fe[tt+1]&63),++tt):(Pt+=String.fromCharCode((Yt&15)<<12|(Fe[tt+1]&63)<<6|Fe[tt+2]&63),tt+=2)}return Pt}function On(Se,Pe,Fe){Se!=null&&Pe!=null&&Se.length>0&&Pe.length>0?(this.n=It(Se,16),this.e=parseInt(Pe,16),this.d=It(Fe,16)):alert("Invalid RSA private key")}function Qn(Se,Pe,Fe,tt,Pt,Yt,ci,Fi){Se!=null&&Pe!=null&&Se.length>0&&Pe.length>0?(this.n=It(Se,16),this.e=parseInt(Pe,16),this.d=It(Fe,16),this.p=It(tt,16),this.q=It(Pt,16),this.dmp1=It(Yt,16),this.dmq1=It(ci,16),this.coeff=It(Fi,16)):alert("Invalid RSA private key")}function Er(Se,Pe){var Fe=new H,tt=Se>>1;this.e=parseInt(Pe,16);for(var Pt=new J(Pe,16);;){for(;this.p=new J(Se-tt,1,Fe),!(this.p.subtract(J.ONE).gcd(Pt).compareTo(J.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new J(tt,1,Fe),!(this.q.subtract(J.ONE).gcd(Pt).compareTo(J.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var Yt=this.p;this.p=this.q,this.q=Yt}var Yt=this.p.subtract(J.ONE),ci=this.q.subtract(J.ONE),Fi=Yt.multiply(ci);if(Fi.gcd(Pt).compareTo(J.ONE)==0){this.n=this.p.multiply(this.q),this.d=Pt.modInverse(Fi),this.dmp1=this.d.mod(Yt),this.dmq1=this.d.mod(ci),this.coeff=this.q.modInverse(this.p);break}}}function $r(Se){if(this.p==null||this.q==null)return Se.modPow(this.d,this.n);for(var Pe=Se.mod(this.p).modPow(this.dmp1,this.p),Se=Se.mod(this.q).modPow(this.dmq1,this.q);Pe.compareTo(Se)<0;)Pe=Pe.add(this.p);return Pe.subtract(Se).multiply(this.coeff).mod(this.p).multiply(this.q).add(Se)}function Rr(Se){return Se=this.doPrivate(It(Se,16)),Se==null?null:In(Se,this.n.bitLength()+7>>3)}yi.prototype.doPrivate=$r,yi.prototype.setPrivate=On,yi.prototype.setPrivateEx=Qn,yi.prototype.generate=Er,yi.prototype.decrypt=Rr;var Sr=[];Sr.sha1="3021300906052b0e03021a05000414",Sr.sha256="3031300d060960864801650304020105000420";var Tn=[];Tn.sha1=ct.hex,Tn.sha256=je.hex;function ia(Se,Pe,Fe){Pe/=4;for(var Se=(0,Tn[Fe])(Se),Fe="00"+Sr[Fe]+Se,Se="",Pe=Pe-4-Fe.length,tt=0;tt<Pe;tt+=2)Se+="ff";return sPaddedMessageHex="0001"+Se+Fe}function pr(Se,Pe){var Fe=ia(Se,this.n.bitLength(),Pe);return this.doPrivate(It(Fe,16)).toString(16)}function _r(Se){return Se=ia(Se,this.n.bitLength(),"sha1"),this.doPrivate(It(Se,16)).toString(16)}function hr(Se){return Se=ia(Se,this.n.bitLength(),"sha256"),this.doPrivate(It(Se,16)).toString(16)}function Aa(Se,Pe,Fe){var tt=new yi;return tt.setPublic(Pe,Fe),tt.doPublic(Se)}function Qr(Se,Pe,Fe){return Aa(Se,Pe,Fe).toString(16).replace(/^1f+00/,"")}function Wr(Se){for(var Pe in Sr){var Fe=Sr[Pe],tt=Fe.length;if(Se.substring(0,tt)==Fe)return[Pe,Se.substring(tt)]}return[]}function Cr(Se,Pe,Fe,tt){return Pe=Qr(Pe,Fe,tt),Fe=Wr(Pe),Fe.length==0?!1:(Pe=Fe[1],Se=(0,Tn[Fe[0]])(Se),Pe==Se)}function Zr(Se,Pe){var Fe=It(Se,16);return Cr(Pe,Fe,this.n.toString(16),this.e.toString(16))}function Ur(Se,Fe){var Fe=Fe.replace(/[ \n]+/g,""),tt=this.doPublic(It(Fe,16)).toString(16).replace(/^1f+00/,""),Pt=Wr(tt);return Pt.length==0?!1:(tt=Pt[1],Pt=(0,Tn[Pt[0]])(Se),tt==Pt)}yi.prototype.signString=pr,yi.prototype.signStringWithSHA1=_r,yi.prototype.signStringWithSHA256=hr,yi.prototype.verifyString=Ur,yi.prototype.verifyHexSignatureForMessage=Zr;var Tr=function(){var Se={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11]};return Se.Init=function(){Se.Sbox_Inv=Array(256);for(var Pe=0;Pe<256;Pe++)Se.Sbox_Inv[Se.Sbox[Pe]]=Pe;for(Se.ShiftRowTab_Inv=Array(16),Pe=0;Pe<16;Pe++)Se.ShiftRowTab_Inv[Se.ShiftRowTab[Pe]]=Pe;for(Se.xtime=Array(256),Pe=0;Pe<128;Pe++)Se.xtime[Pe]=Pe<<1,Se.xtime[128+Pe]=Pe<<1^27},Se.Done=function(){delete Se.Sbox_Inv,delete Se.ShiftRowTab_Inv,delete Se.xtime},Se.ExpandKey=function(Pe){var Fe=Pe.length,tt,Pt=1;switch(Fe){case 16:tt=176;break;case 24:tt=208;break;case 32:tt=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var Yt=Fe;Yt<tt;Yt+=4){var ci=Pe.slice(Yt-4,Yt);Yt%Fe==0?(ci=[Se.Sbox[ci[1]]^Pt,Se.Sbox[ci[2]],Se.Sbox[ci[3]],Se.Sbox[ci[0]]],(Pt<<=1)>=256&&(Pt^=283)):Fe>24&&Yt%Fe==16&&(ci=[Se.Sbox[ci[0]],Se.Sbox[ci[1]],Se.Sbox[ci[2]],Se.Sbox[ci[3]]]);for(var Fi=0;Fi<4;Fi++)Pe[Yt+Fi]=Pe[Yt+Fi-Fe]^ci[Fi]}},Se.Encrypt=function(Pe,Fe){var tt=Fe.length;Se.AddRoundKey(Pe,Fe.slice(0,16));for(var Pt=16;Pt<tt-16;Pt+=16)Se.SubBytes(Pe,Se.Sbox),Se.ShiftRows(Pe,Se.ShiftRowTab),Se.MixColumns(Pe),Se.AddRoundKey(Pe,Fe.slice(Pt,Pt+16));Se.SubBytes(Pe,Se.Sbox),Se.ShiftRows(Pe,Se.ShiftRowTab),Se.AddRoundKey(Pe,Fe.slice(Pt,tt))},Se.Decrypt=function(Pe,Fe){var tt=Fe.length;for(Se.AddRoundKey(Pe,Fe.slice(tt-16,tt)),Se.ShiftRows(Pe,Se.ShiftRowTab_Inv),Se.SubBytes(Pe,Se.Sbox_Inv),tt-=32;tt>=16;tt-=16)Se.AddRoundKey(Pe,Fe.slice(tt,tt+16)),Se.MixColumns_Inv(Pe),Se.ShiftRows(Pe,Se.ShiftRowTab_Inv),Se.SubBytes(Pe,Se.Sbox_Inv);Se.AddRoundKey(Pe,Fe.slice(0,16))},Se.SubBytes=function(Pe,Fe){for(var tt=0;tt<16;tt++)Pe[tt]=Fe[Pe[tt]]},Se.AddRoundKey=function(Pe,Fe){for(var tt=0;tt<16;tt++)Pe[tt]^=Fe[tt]},Se.ShiftRows=function(Pe,Fe){for(var tt=[].concat(Pe),Pt=0;Pt<16;Pt++)Pe[Pt]=tt[Fe[Pt]]},Se.MixColumns=function(Pe){for(var Fe=0;Fe<16;Fe+=4){var tt=Pe[Fe+0],Pt=Pe[Fe+1],Yt=Pe[Fe+2],ci=Pe[Fe+3],Fi=tt^Pt^Yt^ci;Pe[Fe+0]^=Fi^Se.xtime[tt^Pt],Pe[Fe+1]^=Fi^Se.xtime[Pt^Yt],Pe[Fe+2]^=Fi^Se.xtime[Yt^ci],Pe[Fe+3]^=Fi^Se.xtime[ci^tt]}},Se.MixColumns_Inv=function(Pe){for(var Fe=0;Fe<16;Fe+=4){var tt=Pe[Fe+0],Pt=Pe[Fe+1],Yt=Pe[Fe+2],ci=Pe[Fe+3],Fi=tt^Pt^Yt^ci,Pn=Se.xtime[Fi],q=Se.xtime[Se.xtime[Pn^tt^Yt]]^Fi;Fi^=Se.xtime[Se.xtime[Pn^Pt^ci]],Pe[Fe+0]^=q^Se.xtime[tt^Pt],Pe[Fe+1]^=Fi^Se.xtime[Pt^Yt],Pe[Fe+2]^=q^Se.xtime[Yt^ci],Pe[Fe+3]^=Fi^Se.xtime[ci^tt]}},Se}(),Yr=function(){var Se={};return Tr.Init(),Se.b256to64=function(Pe){var Fe,tt,Pt,Yt="",ci=0,Fi=Pe.length;for(Pt=0;Pt<Fi;Pt++)tt=Pe.charCodeAt(Pt),ci==0?(Yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(tt>>2&63),Fe=(tt&3)<<4):ci==1?(Yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Fe|tt>>4&15),Fe=(tt&15)<<2):ci==2&&(Yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Fe|tt>>6&3),Yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(tt&63)),ci+=1,ci==3&&(ci=0);return ci>0&&(Yt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Fe),Yt+="="),ci==1&&(Yt+="="),Yt},Se.b64to256=function(Pe){var Fe,tt,Pt="",Yt=0,ci=0,Fi=Pe.length;for(tt=0;tt<Fi;tt++)Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(Pe.charAt(tt)),Fe>=0&&(Yt&&(Pt+=String.fromCharCode(ci|Fe>>6-Yt&255)),Yt=Yt+2&7,ci=Fe<<Yt&255);return Pt},Se.b16to64=function(Pe){var Fe,tt,Pt="";for(Pe.length%2==1&&(Pe="0"+Pe),Fe=0;Fe+3<=Pe.length;Fe+=3)tt=parseInt(Pe.substring(Fe,Fe+3),16),Pt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(tt>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(tt&63);for(Fe+1==Pe.length?(tt=parseInt(Pe.substring(Fe,Fe+1),16),Pt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(tt<<2)):Fe+2==Pe.length&&(tt=parseInt(Pe.substring(Fe,Fe+2),16),Pt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(tt>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((tt&3)<<4));(Pt.length&3)>0;)Pt+="=";return Pt},Se.b64to16=function(Pe){var Fe="",tt,Pt=0,Yt;for(tt=0;tt<Pe.length&&Pe.charAt(tt)!="=";++tt)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(Pe.charAt(tt)),v<0||(Pt==0?(Fe+=xe(v>>2),Yt=v&3,Pt=1):Pt==1?(Fe+=xe(Yt<<2|v>>4),Yt=v&15,Pt=2):Pt==2?(Fe+=xe(Yt),Fe+=xe(v>>2),Yt=v&3,Pt=3):(Fe+=xe(Yt<<2|v>>4),Fe+=xe(v&15),Pt=0));return Pt==1&&(Fe+=xe(Yt<<2)),Fe},Se.string2bytes=function(Pe){for(var Fe=[],tt=0;tt<Pe.length;tt++)Fe.push(Pe.charCodeAt(tt));return Fe},Se.bytes2string=function(Pe){for(var Fe="",tt=0;tt<Pe.length;tt++)Fe+=String.fromCharCode(Pe[tt]);return Fe},Se.blockXOR=function(Pe,Fe){for(var tt=Array(16),Pt=0;Pt<16;Pt++)tt[Pt]=Pe[Pt]^Fe[Pt];return tt},Se.blockIV=function(){var Pe=new V,Fe=Array(16);return Pe.nextBytes(Fe),Fe},Se.pad16=function(Pe){var Fe=Pe.slice(0),tt=(16-Pe.length%16)%16;for(i=Pe.length;i<Pe.length+tt;i++)Fe.push(0);return Fe},Se.depad=function(Pe){for(Pe=Pe.slice(0);Pe[Pe.length-1]==0;)Pe=Pe.slice(0,Pe.length-1);return Pe},Se.encryptAESCBC=function(Pe,Fe){var tt=Fe.slice(0);Tr.ExpandKey(tt);for(var Pt=Se.string2bytes(Pe),Pt=Se.pad16(Pt),Yt=Se.blockIV(),ci=0;ci<Pt.length/16;ci++){var Pn=Pt.slice(ci*16,ci*16+16),Fi=Yt.slice(ci*16,ci*16+16),Pn=Se.blockXOR(Fi,Pn);Tr.Encrypt(Pn,tt),Yt=Yt.concat(Pn)}return tt=Se.bytes2string(Yt),Se.b256to64(tt)},Se.decryptAESCBC=function(Pe,Fe){var tt=Fe.slice(0);Tr.ExpandKey(tt);for(var Pe=Se.b64to256(Pe),Pt=Se.string2bytes(Pe),Yt=[],ci=1;ci<Pt.length/16;ci++){var Fi=Pt.slice(ci*16,ci*16+16),Pn=Pt.slice((ci-1)*16,(ci-1)*16+16);Tr.Decrypt(Fi,tt),Fi=Se.blockXOR(Pn,Fi),Yt=Yt.concat(Fi)}return Yt=Se.depad(Yt),Se.bytes2string(Yt)},Se.wrap60=function(Pe){for(var Fe="",tt=0;tt<Pe.length;tt++)tt%60==0&&tt!=0&&(Fe+=`
`),Fe+=Pe[tt];return Fe},Se.generateAESKey=function(){var Pe=Array(16);return new V().nextBytes(Pe),Pe},Se.generateRSAKey=function(Pe,Fe){Math.seedrandom(je.hex(Pe));var tt=new yi;return tt.generate(Fe,"10001"),tt},Se.publicKeyString=function(Pe){return pubkey=Pe.n.toString(16)},Se.publicKeyID=function(Pe){return gt(Pe)},Se.publicKeyFromString=function(Fe){var Fe=Fe.split("|")[0],tt=new yi;return tt.setPublic(Fe,"10001"),tt},Se.encrypt=function(Pe,Fe,tt){var Pt="";try{var Yt=Se.publicKeyFromString(Fe);Pt+=Yt.encrypt(Pe)+"?"}catch{return{status:"Invalid public key"}}return{status:"success",cipher:Pt}},Se.decrypt=function(Pe,Fe){var tt=Pe.split("?"),Pt=Fe.decrypt(tt[0]);return{status:"success",plaintext:Pt,signature:"unsigned"}},Se}();I.exports=Yr},function(I,L,re){I.exports=re(2)},function(I,L,re){re.r(L),re.d(L,"StreamClient",function(){return Dt});var J,De=new Uint8Array(16);function Ye(){if(!J&&(J=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!J))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return J(De)}var et=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function R(St){return typeof St=="string"&&et.test(St)}for(var He=R,G=[],ge=0;ge<256;++ge)G.push((ge+256).toString(16).substr(1));function xe(St){var Et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,jt=(G[St[Et+0]]+G[St[Et+1]]+G[St[Et+2]]+G[St[Et+3]]+"-"+G[St[Et+4]]+G[St[Et+5]]+"-"+G[St[Et+6]]+G[St[Et+7]]+"-"+G[St[Et+8]]+G[St[Et+9]]+"-"+G[St[Et+10]]+G[St[Et+11]]+G[St[Et+12]]+G[St[Et+13]]+G[St[Et+14]]+G[St[Et+15]]).toLowerCase();if(!He(jt))throw TypeError("Stringified UUID is invalid");return jt}var ke=xe;function ce(St,Et,jt){St=St||{};var _t=St.random||(St.rng||Ye)();if(_t[6]=_t[6]&15|64,_t[8]=_t[8]&63|128,Et){jt=jt||0;for(var Xt=0;Xt<16;++Xt)Et[jt+Xt]=_t[Xt];return Et}return ke(_t)}var X=ce,Be=function(){var St=function(){function Et(){En(this,Et)}return Rn(Et,[{key:"createClientObject",value:function(_t,Xt,ot,mi){return{socket:_t,id:Xt,iCurChannel:ot,iCurStream:mi,resolve:null,reject:null}}},{key:"zeroPlayCmd",value:function(_t,Xt){var ot=[0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,_t+1,0,0,0,Xt,0,0,4,0];return new Uint8Array(ot)}},{key:"playCmd",value:function(_t,Xt){var ot=[0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,_t,0,0,0,Xt,0,0,4,0];return new Uint8Array(ot)}},{key:"playbackCmd",value:function(_t,Xt,ot,mi){var Pi=_t.split("T")[0],Ii=_t.split("T")[1],ti="0"+parseInt(Pi.substring(0,4),10).toString(16),Vi=parseInt(Pi.substring(4,6),10),Jt=parseInt(Pi.substring(6),10),At=parseInt(Ii.substring(0,2),10),j=parseInt(Ii.substring(2,4),10),T=parseInt(Ii.substring(4,6),10),F=Xt.split("T")[0],S=Xt.split("T")[1],be="0"+parseInt(F.substring(0,4),10).toString(16),_e=parseInt(F.substring(4,6),10),Me=parseInt(S.substring(0,2),10),Ue=parseInt(S.substring(2,4),10),ft=parseInt(S.substring(4,6),10),Gt=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ot,0,0,parseInt(ti.substring(0,2),16),parseInt(ti.substring(2,4),16),0,0,0,Vi,0,0,0,Jt,0,0,0,At,0,0,0,j,0,0,0,T,0,0,parseInt(be.substring(0,2),16),parseInt(be.substring(2,4),16),0,0,0,_e,0,0,0,Jt,0,0,0,Me,0,0,0,Ue,0,0,0,ft,0,0,0,0,0,0,0,0,mi,0,0,0];return new Uint8Array(Gt)}},{key:"playRateCmd",value:function(_t){for(var Xt=(parseInt(_t,10)>>>0).toString(16).toLocaleUpperCase().toString(16),ot=Xt.length;ot<8;ot++)Xt="0"+Xt;for(var mi=[0,0,0,0],Pi=0,Ii=Xt.length;Pi<Ii;Pi=Pi+2)mi[Math.floor(Pi/2)]=parseInt(Xt.substring(Pi,Pi+2),16);var ti=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,mi[0],mi[1],mi[2],mi[3]];return new Uint8Array(ti)}},{key:"pauseCmd",value:function(){var _t=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(_t)}},{key:"resumeCmd",value:function(){var _t=[0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return new Uint8Array(_t)}}]),Et}();return St}(),lt=3001,dt=3002,Lt=3003,qt=function(){var St=function(){function Et(){En(this,Et)}return Rn(Et,[{key:"createClientObject",value:function(_t,Xt,ot){return{socket:_t,id:Xt,playURL:ot,resolve:null,reject:null}}},{key:"getMediaFromSdp",value:function(_t){for(var Xt=_t.indexOf("MEDIAINFO=")+10,ot=_t.slice(Xt,Xt+80),mi=[],Pi=0,Ii=ot.length/2;Pi<Ii;Pi++)mi[Pi]=parseInt(ot.slice(Pi*2,Pi*2+2),16);return new Uint8Array(mi)}},{key:"playCmd",value:function(_t){var Xt={sequence:0,cmd:"realplay",url:_t};return JSON.stringify(Xt)}},{key:"playbackCmd",value:function(_t,Xt,ot){var mi={sequence:0,cmd:"playback",url:ot,startTime:_t,endTime:Xt};return JSON.stringify(mi)}},{key:"playRateCmd",value:function(_t){var Xt={sequence:0,cmd:"changespeed",speed:_t};return JSON.stringify(Xt)}},{key:"pauseCmd",value:function(){var _t={sequence:0,cmd:"pause"};return JSON.stringify(_t)}},{key:"resumeCmd",value:function(){var _t={sequence:0,cmd:"resume"};return JSON.stringify(_t)}},{key:"getError",value:function(_t){var Xt=lt;return _t&&(parseInt(_t.statusCode,10)===6&&_t.subStatusCode==="streamLimit"?Xt=dt:parseInt(_t.statusCode,10)===4&&_t.subStatusCode==="badAuthorization"&&(Xt=Lt)),{iErrorNum:Xt,oError:_t}}}]),Et}();return St}(),Si=re(0),he=re.n(Si),Bi=Bi||function(St,Et){var jt={},_t=jt.lib={},Xt=function(){},ot=_t.Base={extend:function(T){Xt.prototype=this;var F=new Xt;return T&&F.mixIn(T),F.hasOwnProperty("init")||(F.init=function(){F.$super.init.apply(this,arguments)}),F.init.prototype=F,F.$super=this,F},create:function(){var T=this.extend();return T.init.apply(T,arguments),T},init:function(){},mixIn:function(T){for(var F in T)T.hasOwnProperty(F)&&(this[F]=T[F]);T.hasOwnProperty("toString")&&(this.toString=T.toString)},clone:function(){return this.init.prototype.extend(this)}},mi=_t.WordArray=ot.extend({init:function(T,F){T=this.words=T||[],this.sigBytes=F!=Et?F:4*T.length},toString:function(T){return(T||Ii).stringify(this)},concat:function(T){var F=this.words,S=T.words,be=this.sigBytes;if(T=T.sigBytes,this.clamp(),be%4)for(var _e=0;_e<T;_e++)F[be+_e>>>2]|=(S[_e>>>2]>>>24-8*(_e%4)&255)<<24-8*((be+_e)%4);else if(65535<S.length)for(_e=0;_e<T;_e+=4)F[be+_e>>>2]=S[_e>>>2];else F.push.apply(F,S);return this.sigBytes+=T,this},clamp:function(){var T=this.words,F=this.sigBytes;T[F>>>2]&=4294967295<<32-8*(F%4),T.length=St.ceil(F/4)},clone:function(){var T=ot.clone.call(this);return T.words=this.words.slice(0),T},random:function(T){for(var F=[],S=0;S<T;S+=4)F.push(4294967296*St.random()|0);return new mi.init(F,T)}}),Pi=jt.enc={},Ii=Pi.Hex={stringify:function(T){var F=T.words;T=T.sigBytes;for(var S=[],be=0;be<T;be++){var _e=F[be>>>2]>>>24-8*(be%4)&255;S.push((_e>>>4).toString(16)),S.push((_e&15).toString(16))}return S.join("")},parse:function(T){for(var F=T.length,S=[],be=0;be<F;be+=2)S[be>>>3]|=parseInt(T.substr(be,2),16)<<24-4*(be%8);return new mi.init(S,F/2)}},ti=Pi.Latin1={stringify:function(T){var F=T.words;T=T.sigBytes;for(var S=[],be=0;be<T;be++)S.push(String.fromCharCode(F[be>>>2]>>>24-8*(be%4)&255));return S.join("")},parse:function(T){for(var F=T.length,S=[],be=0;be<F;be++)S[be>>>2]|=(T.charCodeAt(be)&255)<<24-8*(be%4);return new mi.init(S,F)}},Vi=Pi.Utf8={stringify:function(T){try{return decodeURIComponent(escape(ti.stringify(T)))}catch{throw Error("Malformed UTF-8 data")}},parse:function(T){return ti.parse(unescape(encodeURIComponent(T)))}},Jt=_t.BufferedBlockAlgorithm=ot.extend({reset:function(){this._data=new mi.init,this._nDataBytes=0},_append:function(T){typeof T=="string"&&(T=Vi.parse(T)),this._data.concat(T),this._nDataBytes+=T.sigBytes},_process:function(T){var F=this._data,S=F.words,be=F.sigBytes,_e=this.blockSize,Me=be/(4*_e),Me=T?St.ceil(Me):St.max((Me|0)-this._minBufferSize,0);if(T=Me*_e,be=St.min(4*T,be),T){for(var Ue=0;Ue<T;Ue+=_e)this._doProcessBlock(S,Ue);Ue=S.splice(0,T),F.sigBytes-=be}return new mi.init(Ue,be)},clone:function(){var T=ot.clone.call(this);return T._data=this._data.clone(),T},_minBufferSize:0});_t.Hasher=Jt.extend({cfg:ot.extend(),init:function(T){this.cfg=this.cfg.extend(T),this.reset()},reset:function(){Jt.reset.call(this),this._doReset()},update:function(T){return this._append(T),this._process(),this},finalize:function(T){return T&&this._append(T),this._doFinalize()},blockSize:16,_createHelper:function(T){return function(F,S){return new T.init(S).finalize(F)}},_createHmacHelper:function(T){return function(F,S){return new At.HMAC.init(T,S).finalize(F)}}});var At=jt.algo={};return jt}(Math);(function(){var St=Bi,Et=St.lib.WordArray;St.enc.Base64={stringify:function(_t){var Xt=_t.words,ot=_t.sigBytes,mi=this._map;_t.clamp(),_t=[];for(var Pi=0;Pi<ot;Pi+=3)for(var Ii=(Xt[Pi>>>2]>>>24-8*(Pi%4)&255)<<16|(Xt[Pi+1>>>2]>>>24-8*((Pi+1)%4)&255)<<8|Xt[Pi+2>>>2]>>>24-8*((Pi+2)%4)&255,ti=0;4>ti&&Pi+.75*ti<ot;ti++)_t.push(mi.charAt(Ii>>>6*(3-ti)&63));if(Xt=mi.charAt(64))for(;_t.length%4;)_t.push(Xt);return _t.join("")},parse:function(_t){var Xt=_t.length,ot=this._map,mi=ot.charAt(64);mi&&(mi=_t.indexOf(mi),mi!=-1&&(Xt=mi));for(var mi=[],Pi=0,Ii=0;Ii<Xt;Ii++)if(Ii%4){var ti=ot.indexOf(_t.charAt(Ii-1))<<2*(Ii%4),Vi=ot.indexOf(_t.charAt(Ii))>>>6-2*(Ii%4);mi[Pi>>>2]|=(ti|Vi)<<24-8*(Pi%4),Pi++}return Et.create(mi,Pi)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),function(St){function Et(Jt,At,j,T,F,S,be){return Jt=Jt+(At&j|~At&T)+F+be,(Jt<<S|Jt>>>32-S)+At}function jt(Jt,At,j,T,F,S,be){return Jt=Jt+(At&T|j&~T)+F+be,(Jt<<S|Jt>>>32-S)+At}function _t(Jt,At,j,T,F,S,be){return Jt=Jt+(At^j^T)+F+be,(Jt<<S|Jt>>>32-S)+At}function Xt(Jt,At,j,T,F,S,be){return Jt=Jt+(j^(At|~T))+F+be,(Jt<<S|Jt>>>32-S)+At}for(var ot=Bi,Ii=ot.lib,mi=Ii.WordArray,Pi=Ii.Hasher,Ii=ot.algo,ti=[],Vi=0;64>Vi;Vi++)ti[Vi]=4294967296*St.abs(St.sin(Vi+1))|0;Ii=Ii.MD5=Pi.extend({_doReset:function(){this._hash=new mi.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(At,j){for(var T=0;16>T;T++){var F=j+T,S=At[F];At[F]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}var T=this._hash.words,F=At[j+0],S=At[j+1],be=At[j+2],_e=At[j+3],Me=At[j+4],Ue=At[j+5],ft=At[j+6],Gt=At[j+7],Ft=At[j+8],Ee=At[j+9],nt=At[j+10],Zt=At[j+11],bi=At[j+12],Kt=At[j+13],ri=At[j+14],Li=At[j+15],li=T[0],ai=T[1],Nt=T[2],Mt=T[3],li=Et(li,ai,Nt,Mt,F,7,ti[0]),Mt=Et(Mt,li,ai,Nt,S,12,ti[1]),Nt=Et(Nt,Mt,li,ai,be,17,ti[2]),ai=Et(ai,Nt,Mt,li,_e,22,ti[3]),li=Et(li,ai,Nt,Mt,Me,7,ti[4]),Mt=Et(Mt,li,ai,Nt,Ue,12,ti[5]),Nt=Et(Nt,Mt,li,ai,ft,17,ti[6]),ai=Et(ai,Nt,Mt,li,Gt,22,ti[7]),li=Et(li,ai,Nt,Mt,Ft,7,ti[8]),Mt=Et(Mt,li,ai,Nt,Ee,12,ti[9]),Nt=Et(Nt,Mt,li,ai,nt,17,ti[10]),ai=Et(ai,Nt,Mt,li,Zt,22,ti[11]),li=Et(li,ai,Nt,Mt,bi,7,ti[12]),Mt=Et(Mt,li,ai,Nt,Kt,12,ti[13]),Nt=Et(Nt,Mt,li,ai,ri,17,ti[14]),ai=Et(ai,Nt,Mt,li,Li,22,ti[15]),li=jt(li,ai,Nt,Mt,S,5,ti[16]),Mt=jt(Mt,li,ai,Nt,ft,9,ti[17]),Nt=jt(Nt,Mt,li,ai,Zt,14,ti[18]),ai=jt(ai,Nt,Mt,li,F,20,ti[19]),li=jt(li,ai,Nt,Mt,Ue,5,ti[20]),Mt=jt(Mt,li,ai,Nt,nt,9,ti[21]),Nt=jt(Nt,Mt,li,ai,Li,14,ti[22]),ai=jt(ai,Nt,Mt,li,Me,20,ti[23]),li=jt(li,ai,Nt,Mt,Ee,5,ti[24]),Mt=jt(Mt,li,ai,Nt,ri,9,ti[25]),Nt=jt(Nt,Mt,li,ai,_e,14,ti[26]),ai=jt(ai,Nt,Mt,li,Ft,20,ti[27]),li=jt(li,ai,Nt,Mt,Kt,5,ti[28]),Mt=jt(Mt,li,ai,Nt,be,9,ti[29]),Nt=jt(Nt,Mt,li,ai,Gt,14,ti[30]),ai=jt(ai,Nt,Mt,li,bi,20,ti[31]),li=_t(li,ai,Nt,Mt,Ue,4,ti[32]),Mt=_t(Mt,li,ai,Nt,Ft,11,ti[33]),Nt=_t(Nt,Mt,li,ai,Zt,16,ti[34]),ai=_t(ai,Nt,Mt,li,ri,23,ti[35]),li=_t(li,ai,Nt,Mt,S,4,ti[36]),Mt=_t(Mt,li,ai,Nt,Me,11,ti[37]),Nt=_t(Nt,Mt,li,ai,Gt,16,ti[38]),ai=_t(ai,Nt,Mt,li,nt,23,ti[39]),li=_t(li,ai,Nt,Mt,Kt,4,ti[40]),Mt=_t(Mt,li,ai,Nt,F,11,ti[41]),Nt=_t(Nt,Mt,li,ai,_e,16,ti[42]),ai=_t(ai,Nt,Mt,li,ft,23,ti[43]),li=_t(li,ai,Nt,Mt,Ee,4,ti[44]),Mt=_t(Mt,li,ai,Nt,bi,11,ti[45]),Nt=_t(Nt,Mt,li,ai,Li,16,ti[46]),ai=_t(ai,Nt,Mt,li,be,23,ti[47]),li=Xt(li,ai,Nt,Mt,F,6,ti[48]),Mt=Xt(Mt,li,ai,Nt,Gt,10,ti[49]),Nt=Xt(Nt,Mt,li,ai,ri,15,ti[50]),ai=Xt(ai,Nt,Mt,li,Ue,21,ti[51]),li=Xt(li,ai,Nt,Mt,bi,6,ti[52]),Mt=Xt(Mt,li,ai,Nt,_e,10,ti[53]),Nt=Xt(Nt,Mt,li,ai,nt,15,ti[54]),ai=Xt(ai,Nt,Mt,li,S,21,ti[55]),li=Xt(li,ai,Nt,Mt,Ft,6,ti[56]),Mt=Xt(Mt,li,ai,Nt,Li,10,ti[57]),Nt=Xt(Nt,Mt,li,ai,ft,15,ti[58]),ai=Xt(ai,Nt,Mt,li,Kt,21,ti[59]),li=Xt(li,ai,Nt,Mt,Me,6,ti[60]),Mt=Xt(Mt,li,ai,Nt,Zt,10,ti[61]),Nt=Xt(Nt,Mt,li,ai,be,15,ti[62]),ai=Xt(ai,Nt,Mt,li,Ee,21,ti[63]);T[0]=T[0]+li|0,T[1]=T[1]+ai|0,T[2]=T[2]+Nt|0,T[3]=T[3]+Mt|0},_doFinalize:function(){var At=this._data,j=At.words,T=8*this._nDataBytes,F=8*At.sigBytes;j[F>>>5]|=128<<24-F%32;var S=St.floor(T/4294967296);for(j[(F+64>>>9<<4)+15]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,j[(F+64>>>9<<4)+14]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,At.sigBytes=4*(j.length+1),this._process(),At=this._hash,j=At.words,T=0;4>T;T++)F=j[T],j[T]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360;return At},clone:function(){var At=Pi.clone.call(this);return At._hash=this._hash.clone(),At}}),ot.MD5=Pi._createHelper(Ii),ot.HmacMD5=Pi._createHmacHelper(Ii)}(Math),function(){var St=Bi,_t=St.lib,Et=_t.Base,jt=_t.WordArray,_t=St.algo,Xt=_t.EvpKDF=Et.extend({cfg:Et.extend({keySize:4,hasher:_t.MD5,iterations:1}),init:function(mi){this.cfg=this.cfg.extend(mi)},compute:function(mi,Pi){for(var At=this.cfg,Ii=At.hasher.create(),ti=jt.create(),Vi=ti.words,Jt=At.keySize,At=At.iterations;Vi.length<Jt;){j&&Ii.update(j);var j=Ii.update(mi).finalize(Pi);Ii.reset();for(var T=1;T<At;T++)j=Ii.finalize(j),Ii.reset();ti.concat(j)}return ti.sigBytes=4*Jt,ti}});St.EvpKDF=function(ot,mi,Pi){return Xt.create(Pi).compute(ot,mi)}}(),Bi.lib.Cipher||function(St){var j=Bi,Et=j.lib,jt=Et.Base,_t=Et.WordArray,Xt=Et.BufferedBlockAlgorithm,ot=j.enc.Base64,mi=j.algo.EvpKDF,Pi=Et.Cipher=Xt.extend({cfg:jt.extend(),createEncryptor:function(S,be){return this.create(this._ENC_XFORM_MODE,S,be)},createDecryptor:function(S,be){return this.create(this._DEC_XFORM_MODE,S,be)},init:function(S,be,_e){this.cfg=this.cfg.extend(_e),this._xformMode=S,this._key=be,this.reset()},reset:function(){Xt.reset.call(this),this._doReset()},process:function(S){return this._append(S),this._process()},finalize:function(S){return S&&this._append(S),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(S){return{encrypt:function(_e,Me,Ue){return(typeof Me=="string"?T:At).encrypt(S,_e,Me,Ue)},decrypt:function(_e,Me,Ue){return(typeof Me=="string"?T:At).decrypt(S,_e,Me,Ue)}}}});Et.StreamCipher=Pi.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var Jt=j.mode={},Ii=function(S,be,_e){var Me=this._iv;Me?this._iv=St:Me=this._prevBlock;for(var Ue=0;Ue<_e;Ue++)S[be+Ue]^=Me[Ue]},ti=(Et.BlockCipherMode=jt.extend({createEncryptor:function(S,be){return this.Encryptor.create(S,be)},createDecryptor:function(S,be){return this.Decryptor.create(S,be)},init:function(S,be){this._cipher=S,this._iv=be}})).extend();ti.Encryptor=ti.extend({processBlock:function(S,be){var _e=this._cipher,Me=_e.blockSize;Ii.call(this,S,be,Me),_e.encryptBlock(S,be),this._prevBlock=S.slice(be,be+Me)}}),ti.Decryptor=ti.extend({processBlock:function(S,be){var _e=this._cipher,Me=_e.blockSize,Ue=S.slice(be,be+Me);_e.decryptBlock(S,be),Ii.call(this,S,be,Me),this._prevBlock=Ue}}),Jt=Jt.CBC=ti,ti=(j.pad={}).Pkcs7={pad:function(S,be){for(var _e=4*be,_e=_e-S.sigBytes%_e,Me=_e<<24|_e<<16|_e<<8|_e,Ue=[],ft=0;ft<_e;ft+=4)Ue.push(Me);_e=_t.create(Ue,_e),S.concat(_e)},unpad:function(S){S.sigBytes-=S.words[S.sigBytes-1>>>2]&255}},Et.BlockCipher=Pi.extend({cfg:Pi.cfg.extend({mode:Jt,padding:ti}),reset:function(){Pi.reset.call(this);var be=this.cfg,S=be.iv,be=be.mode;if(this._xformMode==this._ENC_XFORM_MODE)var _e=be.createEncryptor;else _e=be.createDecryptor,this._minBufferSize=1;this._mode=_e.call(be,this,S&&S.words)},_doProcessBlock:function(S,be){this._mode.processBlock(S,be)},_doFinalize:function(){var S=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){S.pad(this._data,this.blockSize);var be=this._process(!0)}else be=this._process(!0),S.unpad(be);return be},blockSize:4});var Vi=Et.CipherParams=jt.extend({init:function(S){this.mixIn(S)},toString:function(S){return(S||this.formatter).stringify(this)}}),Jt=(j.format={}).OpenSSL={stringify:function(S){var be=S.ciphertext;return S=S.salt,(S?_t.create([1398893684,1701076831]).concat(S).concat(be):be).toString(ot)},parse:function(S){S=ot.parse(S);var be=S.words;if(be[0]==1398893684&&be[1]==1701076831){var _e=_t.create(be.slice(2,4));be.splice(0,4),S.sigBytes-=16}return Vi.create({ciphertext:S,salt:_e})}},At=Et.SerializableCipher=jt.extend({cfg:jt.extend({format:Jt}),encrypt:function(S,be,_e,Me){Me=this.cfg.extend(Me);var Ue=S.createEncryptor(_e,Me);return be=Ue.finalize(be),Ue=Ue.cfg,Vi.create({ciphertext:be,key:_e,iv:Ue.iv,algorithm:S,mode:Ue.mode,padding:Ue.padding,blockSize:S.blockSize,formatter:Me.format})},decrypt:function(S,be,_e,Me){return Me=this.cfg.extend(Me),be=this._parse(be,Me.format),S.createDecryptor(_e,Me).finalize(be.ciphertext)},_parse:function(S,be){return typeof S=="string"?be.parse(S,this):S}}),j=(j.kdf={}).OpenSSL={execute:function(S,be,_e,Me){return Me||(Me=_t.random(8)),S=mi.create({keySize:be+_e}).compute(S,Me),_e=_t.create(S.words.slice(be),4*_e),S.sigBytes=4*be,Vi.create({key:S,iv:_e,salt:Me})}},T=Et.PasswordBasedCipher=At.extend({cfg:At.cfg.extend({kdf:j}),encrypt:function(S,be,_e,Me){return Me=this.cfg.extend(Me),_e=Me.kdf.execute(_e,S.keySize,S.ivSize),Me.iv=_e.iv,S=At.encrypt.call(this,S,be,_e.key,Me),S.mixIn(_e),S},decrypt:function(S,be,_e,Me){return Me=this.cfg.extend(Me),be=this._parse(be,Me.format),_e=Me.kdf.execute(_e,S.keySize,S.ivSize,be.salt),Me.iv=_e.iv,At.decrypt.call(this,S,be,_e.key,Me)}})}(),function(){for(var St=Bi,Et=St.lib.BlockCipher,Gt=St.algo,jt=[],_t=[],Xt=[],ot=[],mi=[],Pi=[],Ii=[],ti=[],Vi=[],Jt=[],At=[],j=0;256>j;j++)At[j]=128>j?j<<1:j<<1^283;for(var T=0,F=0,j=0;256>j;j++){var S=F^F<<1^F<<2^F<<3^F<<4,S=S>>>8^S&255^99;jt[T]=S,_t[S]=T;var be=At[T],_e=At[be],Me=At[_e],Ue=257*At[S]^16843008*S;Xt[T]=Ue<<24|Ue>>>8,ot[T]=Ue<<16|Ue>>>16,mi[T]=Ue<<8|Ue>>>24,Pi[T]=Ue,Ue=16843009*Me^65537*_e^257*be^16843008*T,Ii[S]=Ue<<24|Ue>>>8,ti[S]=Ue<<16|Ue>>>16,Vi[S]=Ue<<8|Ue>>>24,Jt[S]=Ue,T?(T=be^At[At[At[Me^be]]],F^=At[At[F]]):T=F=1}var ft=[0,1,2,4,8,16,32,64,128,27,54],Gt=Gt.AES=Et.extend({_doReset:function(){for(var Zt=this._key,Ee=Zt.words,nt=Zt.sigBytes/4,Zt=4*((this._nRounds=nt+6)+1),bi=this._keySchedule=[],Kt=0;Kt<Zt;Kt++)if(Kt<nt)bi[Kt]=Ee[Kt];else{var ri=bi[Kt-1];Kt%nt?6<nt&&Kt%nt==4&&(ri=jt[ri>>>24]<<24|jt[ri>>>16&255]<<16|jt[ri>>>8&255]<<8|jt[ri&255]):(ri=ri<<8|ri>>>24,ri=jt[ri>>>24]<<24|jt[ri>>>16&255]<<16|jt[ri>>>8&255]<<8|jt[ri&255],ri^=ft[Kt/nt|0]<<24),bi[Kt]=bi[Kt-nt]^ri}for(Ee=this._invKeySchedule=[],nt=0;nt<Zt;nt++)Kt=Zt-nt,ri=nt%4?bi[Kt]:bi[Kt-4],Ee[nt]=4>nt||4>=Kt?ri:Ii[jt[ri>>>24]]^ti[jt[ri>>>16&255]]^Vi[jt[ri>>>8&255]]^Jt[jt[ri&255]]},encryptBlock:function(Ee,nt){this._doCryptBlock(Ee,nt,this._keySchedule,Xt,ot,mi,Pi,jt)},decryptBlock:function(Ee,nt){var Zt=Ee[nt+1];Ee[nt+1]=Ee[nt+3],Ee[nt+3]=Zt,this._doCryptBlock(Ee,nt,this._invKeySchedule,Ii,ti,Vi,Jt,_t),Zt=Ee[nt+1],Ee[nt+1]=Ee[nt+3],Ee[nt+3]=Zt},_doCryptBlock:function(Ee,nt,Zt,bi,Kt,ri,Li,li){for(var Mt=this._nRounds,nn=Ee[nt]^Zt[0],Zi=Ee[nt+1]^Zt[1],Yi=Ee[nt+2]^Zt[2],Gi=Ee[nt+3]^Zt[3],Nt=4,ai=1;ai<Mt;ai++)var ji=bi[nn>>>24]^Kt[Zi>>>16&255]^ri[Yi>>>8&255]^Li[Gi&255]^Zt[Nt++],tn=bi[Zi>>>24]^Kt[Yi>>>16&255]^ri[Gi>>>8&255]^Li[nn&255]^Zt[Nt++],Ui=bi[Yi>>>24]^Kt[Gi>>>16&255]^ri[nn>>>8&255]^Li[Zi&255]^Zt[Nt++],Gi=bi[Gi>>>24]^Kt[nn>>>16&255]^ri[Zi>>>8&255]^Li[Yi&255]^Zt[Nt++],nn=ji,Zi=tn,Yi=Ui;ji=(li[nn>>>24]<<24|li[Zi>>>16&255]<<16|li[Yi>>>8&255]<<8|li[Gi&255])^Zt[Nt++],tn=(li[Zi>>>24]<<24|li[Yi>>>16&255]<<16|li[Gi>>>8&255]<<8|li[nn&255])^Zt[Nt++],Ui=(li[Yi>>>24]<<24|li[Gi>>>16&255]<<16|li[nn>>>8&255]<<8|li[Zi&255])^Zt[Nt++],Gi=(li[Gi>>>24]<<24|li[nn>>>16&255]<<16|li[Zi>>>8&255]<<8|li[Yi&255])^Zt[Nt++],Ee[nt]=ji,Ee[nt+1]=tn,Ee[nt+2]=Ui,Ee[nt+3]=Gi},keySize:8});St.AES=Et._createHelper(Gt)}();var yt=Bi,wt=function(){var St=function(){function Et(){En(this,Et)}return Rn(Et,[{key:"createClientObject",value:function(_t,Xt,ot,mi,Pi){var Ii=yt.AES.encrypt(new Date().getTime().toString(),yt.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:yt.mode.CBC,iv:yt.enc.Hex.parse("12345678912345671234567891234567"),padding:yt.pad.Pkcs7}).ciphertext.toString();Ii.length<64&&(Ii=Ii+Ii);var ti=yt.AES.encrypt(new Date().getTime().toString(),yt.enc.Hex.parse("12345678912345671234567891234567"),{mode:yt.mode.CBC,iv:yt.enc.Hex.parse("12345678912345671234567891234567"),padding:yt.pad.Pkcs7}).ciphertext.toString();return{socket:_t,id:Xt,PKD:ot,rand:mi,playURL:Pi.playURL||"",auth:Pi.auth||"",token:Pi.token||"",key:Ii,iv:ti,resolve:null,reject:null}}},{key:"playCmd",value:function(_t){var Xt={sequence:0,cmd:"realplay",url:_t.playURL,key:he.a.encrypt(_t.iv+":"+_t.key,_t.PKD).cipher.split("?")[0],authorization:yt.AES.encrypt(_t.rand+":"+_t.auth,yt.enc.Hex.parse(_t.key),{mode:yt.mode.CBC,iv:yt.enc.Hex.parse(_t.iv),padding:yt.pad.Pkcs7}).ciphertext.toString(),token:yt.AES.encrypt(_t.token,yt.enc.Hex.parse(_t.key),{mode:yt.mode.CBC,iv:yt.enc.Hex.parse(_t.iv),padding:yt.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(Xt)}},{key:"playbackCmd",value:function(_t,Xt,ot){var mi={sequence:0,cmd:"playback",url:_t.playURL,key:he.a.encrypt(_t.iv+":"+_t.key,_t.PKD).cipher.split("?")[0],authorization:yt.AES.encrypt(_t.rand+":"+_t.auth,yt.enc.Hex.parse(_t.key),{mode:yt.mode.CBC,iv:yt.enc.Hex.parse(_t.iv),padding:yt.pad.Pkcs7}).ciphertext.toString(),token:yt.AES.encrypt(_t.token,yt.enc.Hex.parse(_t.key),{mode:yt.mode.CBC,iv:yt.enc.Hex.parse(_t.iv),padding:yt.pad.Pkcs7}).ciphertext.toString(),startTime:Xt,endTime:ot};return JSON.stringify(mi)}},{key:"seekCmd",value:function(_t,Xt){var ot={sequence:0,cmd:"seek",startTime:_t,endTime:Xt};return JSON.stringify(ot)}}]),Et}();return St}(),pt=function(){var St=function(){function Et(){En(this,Et)}return Rn(Et,[{key:"createClientObject",value:function(_t,Xt,ot,mi){return{socket:_t,id:Xt,playURL:ot,deviceSerial:mi.deviceSerial||"",verificationCode:mi.verificationCode||"",resolve:null,reject:null}}},{key:"playCmd",value:function(_t){var Xt={sequence:0,cmd:"realplay",deviceSerial:_t.deviceSerial,verificationCode:_t.verificationCode,url:_t.playURL};return JSON.stringify(Xt)}},{key:"playbackCmd",value:function(_t,Xt,ot){var mi={sequence:0,cmd:"playback",deviceSerial:_t.deviceSerial,verificationCode:_t.verificationCode,url:_t.playURL,startTime:Xt,endTime:ot};return JSON.stringify(mi)}}]),Et}();return St}(),Dt=function(){var St=Symbol("WEBSOCKET"),Et=Symbol("GETINDEX"),jt=Symbol("PROTOCOLVERSION"),_t=Symbol("CIPHERSUITES"),Xt=new Be,ot=new qt,mi=new wt,Pi=new pt,Ii=function(){function ti(){En(this,ti),this[jt]="0.1",this[_t]=0,this[St]=[],this.ERRORS={},this[Et]=function(Vi){for(var Jt=-1,At=0,j=this[St].length;At<j;At++)if(this[St][At].id===Vi){Jt=At;break}return Jt}}return Rn(ti,[{key:"openStream",value:function(Jt,At,j,T){var F=!1;Jt.indexOf("[")>-1&&(F=!0);var S=this,be=Jt.split("://"),_e=be[0],Me="",Ue=7681,ft=1,Gt=0,Ft=!1;if(F)Me=be[1].split("]:")[0]+"]",Ue=Math.floor(be[1].split("]:")[1].split("/")[0]),ft=Math.floor(be[1].split("]:")[1].split("/")[1]/100),Gt=Math.floor(be[1].split("]:")[1].split("/")[1]%100)-1;else{Me=be[1].split(":")[0],Ue=Math.floor(be[1].split(":")[1].split("/")[0]),ft=Math.floor(be[1].split(":")[1].split("/")[1]/100),Gt=Math.floor(be[1].split(":")[1].split("/")[1]%100)-1;var Ee=be[1].split(":")[1].split("/")[2];Ee!==""&&Ee==="webSocketVideoCtrlProxy"&&(Ft=!0)}ft===0&&(Gt=0),At=At||{};var nt="&sessionID=";At.token&&!At.playURL&&(nt="&token=");var Zt=At.sessionID||At.session||(At.playURL?"":At.token)||"",bi=new window.WebSocket(_e+"://"+Me+":"+Ue+(At.mode?"/"+At.mode:"")+(Ft?"/webSocketVideoCtrlProxy":"")+"?version="+S[jt]+"&cipherSuites="+S[_t]+nt+Zt+(At.proxy?"&proxy="+At.proxy:""));bi.binaryType="arraybuffer";var Kt=X(),ri=-1,Li=new Promise(function(li,Mt){bi.onopen=function(){!At.playURL&&!At.sessionID&&!At.deviceSerial&&!At.token&&(S[St].push(Xt.createClientObject(bi,Kt,ft,Gt)),li(Kt))},bi.onmessage=function(Nt){if(typeof Nt.data=="string"){var ai=JSON.parse(Nt.data),ji=S[Et](Kt);if(ai&&ai.version&&ai.cipherSuite){if(S[jt]=ai.version,S[_t]=parseInt(ai.cipherSuite,10),ai&&ai.PKD&&ai.rand)S[St].push(mi.createClientObject(bi,Kt,ai.PKD,ai.rand,At));else{var tn="live://"+Me+":"+Ue+"/"+ft+"/"+Gt;S[_t]===-1?S[St].push(Pi.createClientObject(bi,Kt,tn,At)):S[St].push(ot.createClientObject(bi,Kt,tn))}li(Kt);return}if(ai&&ai.sdp){var Ui=ot.getMediaFromSdp(ai.sdp);j({bHead:!0,buf:Ui})}if(ai&&ai.cmd&&ai.cmd==="end"&&j({type:"exception",cmd:ai.cmd}),ai&&ai.statusString&&(ai.statusString.toLowerCase()==="ok"&&S[St][ji].resolve&&S[St][ji].resolve(ai),ai.statusString.toLowerCase()!=="ok")){var Gi=ot.getError(ai);ji>-1?S[St][ji].reject&&S[St][ji].reject(Gi):Mt(Gi)}ai&&ai.errorCode&&j(ai)}else{var nn={},Zi=new Uint8Array(Nt.data);if(ri++,Zi.byteLength===64||Zi.byteLength===40){for(var Yi=-1,bn=Zi.byteLength,vn=0;vn<bn;vn++)if(Zi[vn]===73&&Zi[vn+1]===77&&Zi[vn+2]===75&&Zi[vn+3]===72){Yi=vn;break}if(Yi!==-1){var jn=Zi.slice(Yi,Yi+40);nn={bHead:!0,buf:jn}}else nn={bHead:!1,buf:Zi};j(nn)}else ri>0&&(nn={bHead:!1,buf:Zi},j(nn));Zi=null,nn=null,Nt=null}},bi.onclose=function(){for(var Nt=0,ai=S[St].length;Nt<ai;Nt++)if(S[St][Nt].id===Kt){S[St][Nt].resolve(),S[St].splice(Nt,1),setTimeout(function(){T()},200);break}Mt()}});return Li}},{key:"startPlay",value:function(Jt,At,j){var T=this,F=this[Et](Jt);At&&j&&T[jt]==="0.1"&&(At=At.replace(/-/g,"").replace(/:/g,""),j=j.replace(/-/g,"").replace(/:/g,""));var S=new Promise(function(be,_e){if(F>-1){T[St][F].resolve=be,T[St][F].reject=_e;var Me=null;!At||!j?T[St][F].iCurChannel===0&&T[jt]==="0.1"?Me=Xt.zeroPlayCmd(T[St][F].iCurChannel,T[St][F].iCurStream):T[jt]!=="0.1"?T[_t]===0?Me=mi.playCmd(T[St][F]):T[_t]===1?Me=ot.playCmd(T[St][F].playURL):T[_t]===-1&&(Me=Pi.playCmd(T[St][F])):Me=Xt.playCmd(T[St][F].iCurChannel,T[St][F].iCurStream):T[jt]!=="0.1"?T[_t]===0?Me=mi.playbackCmd(T[St][F],At,j):T[_t]===1?Me=ot.playbackCmd(At,j,T[St][F].playURL):T[_t]===-1&&(Me=Pi.playbackCmd(T[St][F],At,j)):Me=Xt.playbackCmd(At,j,T[St][F].iCurChannel,T[St][F].iCurStream),T[St][F].socket.send(Me),T[jt]==="0.1"&&be()}else T[jt]==="0.1"&&_e()});return S}},{key:"singleFrame",value:function(){}},{key:"setPlayRate",value:function(Jt,At){var j=this,T=new Promise(function(F,S){for(var be=0,_e=j[St].length;be<_e;be++)if(j[St][be].id===Jt)if(j[jt]==="0.1"){var Me=Xt.playRateCmd(At);j[St][be].socket.send(Me),F();break}else{j[St][be].resolve=F,j[St][be].reject=S;var Ue=ot.playRateCmd(At);j[St][be].socket.send(Ue)}});return T}},{key:"seek",value:function(Jt,At,j){var T=this,F=new Promise(function(S,be){for(var _e=0,Me=T[St].length;_e<Me;_e++)if(T[St][_e].id===Jt){T[St][_e].resolve=S,T[St][_e].reject=be;var Ue=mi.seekCmd(At,j);T[St][_e].socket.send(Ue)}});return F}},{key:"pause",value:function(Jt){var At=this,j=new Promise(function(T,F){for(var S=0,be=At[St].length;S<be;S++)if(At[St][S].id===Jt)if(At[jt]==="0.1"){var _e=Xt.pauseCmd();At[St][S].socket.send(_e),T();break}else{At[St][S].resolve=T,At[St][S].reject=F;var Me=ot.pauseCmd();At[St][S].socket.send(Me)}});return j}},{key:"transmission",value:function(Jt,At){var j=this,T=new Promise(function(F,S){for(var be=0,_e=j[St].length;be<_e;be++)j[St][be].id===Jt&&(j[St][be].resolve=F,j[St][be].reject=S,j[St][be].socket.send(At))});return T}},{key:"resume",value:function(Jt){var At=this,j=new Promise(function(T,F){for(var S=0,be=At[St].length;S<be;S++)if(At[St][S].id===Jt)if(At[jt]==="0.1"){var _e=Xt.resumeCmd();At[St][S].socket.send(_e),T();break}else{At[St][S].resolve=T,At[St][S].reject=F;var Me=ot.resumeCmd();At[St][S].socket.send(Me)}});return j}},{key:"stop",value:function(Jt){var At=this,j=new Promise(function(T,F){if(!Jt)F();else{for(var S=-1,be=0,_e=At[St].length;be<_e;be++)if(At[St][be].id===Jt){S=be,At[St][be].resolve=T,At[St][be].socket.close(1e3,"CLOSE");break}S===-1&&F()}});return j}},{key:"stopAll",value:function(){var Jt=this,At=new Promise(function(j,T){for(var F=0,S=Jt[St].length;F<S;F++)Jt[St][F].socket.close(1e3,"CLOSE");console.log("停止所有流"),j()});return At}}]),ti}();return Ii}()}])})})(o);var l=o.exports,d,c=new Uint8Array(16);function E(){if(!d&&(d=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(c)}var C=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function y(N){return typeof N=="string"&&C.test(N)}for(var w=[],g=0;g<256;++g)w.push((g+256).toString(16).substr(1));function p(N){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,I=(w[N[fe+0]]+w[N[fe+1]]+w[N[fe+2]]+w[N[fe+3]]+"-"+w[N[fe+4]]+w[N[fe+5]]+"-"+w[N[fe+6]]+w[N[fe+7]]+"-"+w[N[fe+8]]+w[N[fe+9]]+"-"+w[N[fe+10]]+w[N[fe+11]]+w[N[fe+12]]+w[N[fe+13]]+w[N[fe+14]]+w[N[fe+15]]).toLowerCase();if(!y(I))throw TypeError("Stringified UUID is invalid");return I}function te(N,fe,I){N=N||{};var L=N.random||(N.rng||E)();if(L[6]=L[6]&15|64,L[8]=L[8]&63|128,fe){I=I||0;for(var re=0;re<16;++re)fe[I+re]=L[re];return fe}return p(L)}var ae=function(){function N(){En(this,N),this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return Rn(N,[{key:"$",value:function(I){var L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,re=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(L.test(I)){var J=L.exec(I);return document.getElementById(J[2])}else if(re.test(I)){for(var De=re.exec(I),Ye=document.getElementsByTagName("*"),et=[],R=0,He=Ye.length;R<He;R++)Ye[R].className.match(new RegExp("(\\s|^)"+De[2]+"(\\s|$)"))&&et.push(Ye[R]);return et}}},{key:"dateFormat",value:function(I,L){var re={"M+":I.getMonth()+1,"d+":I.getDate(),"h+":I.getHours(),"m+":I.getMinutes(),"s+":I.getSeconds(),"q+":Math.floor((I.getMonth()+3)/3),S:I.getMilliseconds()};/(y+)/.test(L)&&(L=L.replace(RegExp.$1,(I.getFullYear()+"").substr(4-RegExp.$1.length)));for(var J in re)new RegExp("("+J+")").test(L)&&(L=L.replace(RegExp.$1,RegExp.$1.length===1?re[J]:("00"+re[J]).substr((""+re[J]).length)));return L}},{key:"downloadFile",value:function(I,L){var re=I;I instanceof Blob||I instanceof File||(re=new Blob([I]));var J=window.URL.createObjectURL(re),De=window.document.createElement("a");De.href=J,De.download=L;var Ye=document.createEvent("MouseEvents");Ye.initEvent("click",!0,!0),De.dispatchEvent(Ye)}},{key:"createxmlDoc",value:function(){for(var I,L=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"],re=0,J=L.length;re<J;re++)try{I=new ActiveXObject(L[re]);break}catch{I=document.implementation.createDocument("","",null);break}return I.async="false",I}},{key:"parseXmlFromStr",value:function(I){if(I===null||I==="")return null;var L=this.createxmlDoc();if(navigator.appName==="Netscape"||navigator.appName==="Opera"){var re=new DOMParser;L=re.parseFromString(I,"text/xml")}else L.loadXML(I);return L}},{key:"encode",value:function(I){var L="",re,J,De,Ye,et,R,He,G=0;for(I=this._utf8_encode(I);G<I.length;)re=I.charCodeAt(G++),J=I.charCodeAt(G++),De=I.charCodeAt(G++),Ye=re>>2,et=(re&3)<<4|J>>4,R=(J&15)<<2|De>>6,He=De&63,isNaN(J)?R=He=64:isNaN(De)&&(He=64),L=L+this._keyStr.charAt(Ye)+this._keyStr.charAt(et)+this._keyStr.charAt(R)+this._keyStr.charAt(He);return L}},{key:"decode",value:function(I){var L="",re,J,De,Ye,et,R,He,G=0;for(I=I.replace(/[^A-Za-z0-9+/=]/g,"");G<I.length;)Ye=this._keyStr.indexOf(I.charAt(G++)),et=this._keyStr.indexOf(I.charAt(G++)),R=this._keyStr.indexOf(I.charAt(G++)),He=this._keyStr.indexOf(I.charAt(G++)),re=Ye<<2|et>>4,J=(et&15)<<4|R>>2,De=(R&3)<<6|He,L=L+String.fromCharCode(re),R!==64&&(L=L+String.fromCharCode(J)),He!==64&&(L=L+String.fromCharCode(De));return L=this._utf8_decode(L),L}},{key:"_utf8_encode",value:function(I){I=I.replace(/\r\n/g,`
`);for(var L="",re=0;re<I.length;re++){var J=I.charCodeAt(re);J<128?L+=String.fromCharCode(J):J>127&&J<2048?(L+=String.fromCharCode(J>>6|192),L+=String.fromCharCode(J&63|128)):(L+=String.fromCharCode(J>>12|224),L+=String.fromCharCode(J>>6&63|128),L+=String.fromCharCode(J&63|128))}return L}},{key:"_utf8_decode",value:function(I){for(var L="",re=0,J=0,De=0;re<I.length;)if(J=I.charCodeAt(re),J<128)L+=String.fromCharCode(J),re++;else if(J>191&&J<224)De=I.charCodeAt(re+1),L+=String.fromCharCode((J&31)<<6|De&63),re+=2;else{De=I.charCodeAt(re+1);var Ye=I.charCodeAt(re+2);L+=String.fromCharCode((J&15)<<12|(De&63)<<6|Ye&63),re+=3}return L}},{key:"isFirefox",value:function(){var I=!1,L=navigator.userAgent.toLowerCase(),re="",J=-1;return L.match(/firefox\/([\d.]+)/)&&(re=L.match(/firefox\/([\d.]+)/)[1],J=parseInt(re.split(".")[0],10),J>-1&&(I=!0)),I}},{key:"isSafari",value:function(){var I=!1,L=navigator.userAgent.toLowerCase(),re="",J=-1;return L.match(/version\/([\d.]+).safari./)&&(re=L.match(/version\/([\d.]+).safari./)[1],J=parseInt(re.split(".")[0],10),J>-1&&(I=!0)),I}},{key:"isEdge",value:function(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1}},{key:"isIOS",value:function(){var I=navigator.userAgent,L=!!I.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return L}}]),N}(),de=new ae,ie=function(){var fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"https://open.ys7.com/assets/ezuikit_v3.6";return`(function() {
    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题
    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };
    importScripts = (function (globalEval) {
        var xhr = new XMLHttpRequest;
        return function importScripts() {
          var
            args = Array.prototype.slice.call(arguments)
            , len = args.length
            , i = 0
            , meta
            , data
            , content
            ;
          for (; i < len; i++) {
            if (args[i].substr(0, 5).toLowerCase() === "data:") {
              data = args[i];
              content = data.indexOf(",");
              meta = data.substr(5, content).toLowerCase();
              data = decodeURIComponent(data.substr(content + 1));
              if (/;s*base64s*[;,]/.test(meta)) {
                data = atob(data);
              }
              if (/;s*charset=[uU][tT][fF]-?8s*[;,]/.test(meta)) {
                data = decodeURIComponent(escape(data));
              }
            } else {
              xhr.open("GET", args[i], false);
              xhr.send(null);
              data = xhr.responseText;
            }
            globalEval(data);
          }
        };
      }(eval));
    importScripts('`.concat(fe,`/js/transform/SystemTransform.js');

    Module.postRun.push(function() {
        postMessage({type: "loaded"});
    });

    onmessage = function (e) {
        var data = e.data;

        if ("create" === data.type) {
            var iHeadLen = data.len;
            var pHead = Module._malloc(iHeadLen);

            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);
            aData.set(new Uint8Array(data.buf));

            var iTransType = data.packType;//目标格式 RTP->PS
            if (RECORDRTP) {
                postMessage({type: "created"});
                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);
            } else {
                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);
                if (iRet != 0) {
                    console.log("_ST_Create failed!");
                } else {
                    Module._ST_Start();
                    postMessage({type: "created"});
                }
            }

        } else if ("inputData" === data.type) {
            if (RECORDRTP) {
                var aFileData = new Uint8Array(data.buf);  // 拷贝一份
                var iBufferLen = aFileData.length;
                var szBufferLen = iBufferLen.toString(16);
                if (szBufferLen.length === 1) {
                    szBufferLen = "000" + szBufferLen;
                } else if (szBufferLen.length === 2) {
                    szBufferLen = "00" + szBufferLen;
                } else if (szBufferLen.length === 3) {
                    szBufferLen = "0" + szBufferLen;
                }
                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];
                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {
                    aData[iIndex + 4] = aFileData[iIndex]
                }
                var dataUint8 = new Uint8Array(aData);
                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);
            } else {
                var iDataLen = data.len;
                var pData = Module._malloc(iDataLen);

                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);
                aData.set(new Uint8Array(data.buf));

                var iRet = Module._ST_InputData(0, pData, iDataLen);
                if (iRet != 0) {
                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储
                }

                Module._free(pData);
            }
        } else if ("release" === data.type) {
            Module._ST_Stop();
            Module._ST_Release();

            close();
        }
    };

    function loadMemInitFile() {
        var req = new XMLHttpRequest();
        req.open('GET', '`).concat(fe,`/js/transform/SystemTransform.js.mem');
        req.responseType = 'arraybuffer';
        req.send();

        return req;
    }
})();`)},we="Web/RecordFiles/",Ve="Web/PlaybackFiles/",ue=1e3,x=1,O=3001;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.URL=window.URL||window.webkitURL;var ne=function(){function N(fe,I,L,re){En(this,N),this.szUUID=fe,this.szFileName=I,this.iStreamType=L,this.szPath="",this.bStart=!1,this.aStreamList=[],this.options=re}return Rn(N,[{key:"init",value:function(){var I=this;this.iStreamType===0?this.szPath=we:this.iStreamType===1&&(this.szPath=Ve),this.szPath+=this.getDateDir();var L=I.szPath.split("/"),re=new Promise(function(J){window.requestFileSystem(window.TEMPORARY,I.options.iFileSize,function(De){I.createDir(De.root,L,function(){J()})},I.errorHandler)});return re}},{key:"getDateDir",value:function(){return de.dateFormat(new Date,"yyyy-MM-dd")}},{key:"createDir",value:function(I,L,re){var J=this;L.length?I.getDirectory(L[0],{create:!0},function(De){J.createDir(De,L.slice(1),re)},J.errorHandler):re()}},{key:"errorHandler",value:function(){}},{key:"writeFileHeader",value:function(I){var L=this;window.requestFileSystem(window.TEMPORARY,L.options.iFileSize,function(re){re.root.getFile(L.szPath+"/"+L.szFileName,{create:!0},function(J){J.createWriter(function(De){De.onwriteend=function(){L.bStart=!0,L.writeFile(De)},De.onerror=function(){},De.seek(De.length);var Ye=new Blob([I]);De.write(Ye)},L.errorHandler)},L.errorHandler)},L.errorHandler)}},{key:"writeFileContent",value:function(I){this.aStreamList.push(I)}},{key:"writeFile",value:function(I){var L=this;if(this.bStart)if(this.aStreamList.length>0){var re=this.aStreamList.shift();if(I.seek(I.length),I.length>=this.options.iFileSize){this.options.cbEventHandler&&this.options.cbEventHandler(O,this.szUUID);return}var J=new Blob([re]);I.write(J)}else setTimeout(function(){L.writeFile(I)},ue)}},{key:"stopWriteFile",value:function(){var I=this;this.bStart=!1,this.aStreamList.length=0;var L=new Promise(function(re){window.requestFileSystem(window.TEMPORARY,I.options.iFileSize,function(J){J.root.getFile(I.szPath+"/"+I.szFileName,{create:!1},function(De){De.file(function(Ye){re(),de.downloadFile(Ye,Ye.name)})},I.errorHandler)},I.errorHandler)});return L}}]),N}(),Q=function(){function N(fe,I,L,re,J,De,Ye,et){En(this,N),this.szBasePath=fe,this.szUUID=I,this.szFileName=L,this.aHeadBuf=new Uint8Array(re),this.iPackType=J,this.iStreamType=De,this.oWorker=null,this.oFileSystem=null,this.options=Ye,this.bHead=!0,this.staticPath=et}return Rn(N,[{key:"init",value:function(){var I=this,L=new Promise(function(re,J){I.initFileSystem().then(function(){I.initWorker().then(function(){re(I.szUUID)},function(De){J(De)})},function(De){J(De)})});return L}},{key:"initFileSystem",value:function(){var I=this;this.oFileSystem=new ne(this.szUUID,this.szFileName,this.iStreamType,this.options);var L=new Promise(function(re,J){I.oFileSystem.init().then(function(){re()},function(De){J(De)})});return L}},{key:"initWorker",value:function(){var I=this,L=new Promise(function(re){var J=new Blob([ie(I.staticPath)]),De=URL.createObjectURL(J);I.oWorker=new Worker(De),I.oWorker.onmessage=function(Ye){var et=Ye.data,R=I.iPackType;if(I.options.iPackage===1&&(R=12),et.type==="loaded")I.oWorker.postMessage({type:"create",buf:I.aHeadBuf.buffer,len:40,packType:R},[I.aHeadBuf.buffer]);else if(et.type==="created")re();else if(et.type==="outputData"){var He=new Uint8Array(et.buf);I.options.iPackage===1?I.bHead?(I.oFileSystem.writeFileHeader(He),I.bHead=!1):I.oFileSystem.writeFileContent(He):x===et.dType?I.oFileSystem.writeFileHeader(He):I.oFileSystem.writeFileContent(He)}}});return L}},{key:"inputData",value:function(I){if(this.oWorker){var L=new Uint8Array(I);this.oWorker.postMessage({type:"inputData",buf:L.buffer,len:L.length},[L.buffer])}}},{key:"stopRecord",value:function(){var I=this,L=new Promise(function(re,J){I.oWorker?I.oWorker.postMessage({type:"release"}):J(),I.oFileSystem?I.oFileSystem.stopWriteFile().then(function(){I.bHead=!0,re()},function(){J()}):J()});return L}}]),N}(),ye=function(){var N=Symbol("STORAGELIST"),fe=function(){function I(L,re,J){En(this,I),this.szBasePath=L,this[N]={},this.options={iFileSize:1024*1024*1024},Object.assign(this.options,re),typeof re.staticPath=="string"&&(this.staticPath=re.staticPath)}return Rn(I,[{key:"startRecord",value:function(re,J,De,Ye,et){var R=this,He=te(),G=Object.assign({},this.options,et),ge=new Q(this.szBasePath,He,re,J,De,Ye,G,this.staticPath),xe=new Promise(function(ke,ce){ge.init().then(function(X){R[N][X]=ge,ke(X)},function(X){ce(X)})});return xe}},{key:"inputData",value:function(re,J){var De=this[N][re];De&&De.inputData(J)}},{key:"stopRecord",value:function(re){var J=this,De=new Promise(function(Ye,et){var R=J[N][re];R?R.stopRecord().then(function(){delete J[N][re],Ye()},function(){et()}):et()});return De}}]),I}();return fe}();function se(N,fe){if(!(N instanceof fe))throw new TypeError("Cannot call a class as a function")}function Ze(N,fe){for(var I=0;I<fe.length;I++){var L=fe[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(N,$e(L.key),L)}}function Qe(N,fe,I){return fe&&Ze(N.prototype,fe),I&&Ze(N,I),Object.defineProperty(N,"prototype",{writable:!1}),N}function M(N,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(fe&&fe.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),fe&&ze(N,fe)}function Te(N){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)},Te(N)}function ze(N,fe){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,re){return L.__proto__=re,L},ze(N,fe)}function oi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wi(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function ui(N,fe){if(fe&&(Ni(fe)==="object"||typeof fe=="function"))return fe;if(fe!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(N)}function di(N){var fe=oi();return function(){var L=Te(N),re;if(fe){var J=Te(this).constructor;re=Reflect.construct(L,arguments,J)}else re=L.apply(this,arguments);return ui(this,re)}}function zi(N,fe){if(Ni(N)!=="object"||N===null)return N;var I=N[Symbol.toPrimitive];if(I!==void 0){var L=I.call(N,fe||"default");if(Ni(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(fe==="string"?String:Number)(N)}function $e(N){var fe=zi(N,"string");return Ni(fe)==="symbol"?fe:String(fe)}var st={exports:{}};(function(N){(function(fe,I){N.exports=fe.document?I(fe,!0):function(L){if(!L.document)throw new Error("jQuery requires a window with a document");return I(L)}})(typeof window<"u"?window:t,function(fe,I){var L=[],re=Object.getPrototypeOf,J=L.slice,De=L.flat?function(q){return L.flat.call(q)}:function(q){return L.concat.apply([],q)},Ye=L.push,et=L.indexOf,R={},He=R.toString,G=R.hasOwnProperty,ge=G.toString,xe=ge.call(Object),ke={},ce=function(_){return typeof _=="function"&&typeof _.nodeType!="number"&&typeof _.item!="function"},X=function(_){return _!=null&&_===_.window},Be=fe.document,lt={type:!0,src:!0,nonce:!0,noModule:!0};function dt(q,_,U){U=U||Be;var W,pe,Ie=U.createElement("script");if(Ie.text=q,_)for(W in lt)pe=_[W]||_.getAttribute&&_.getAttribute(W),pe&&Ie.setAttribute(W,pe);U.head.appendChild(Ie).parentNode.removeChild(Ie)}function Lt(q){return q==null?q+"":Ni(q)==="object"||typeof q=="function"?R[He.call(q)]||"object":Ni(q)}var qt="3.7.1",Si=/HTML$/i,he=function q(_,U){return new q.fn.init(_,U)};he.fn=he.prototype={jquery:qt,constructor:he,length:0,toArray:function(){return J.call(this)},get:function(_){return _==null?J.call(this):_<0?this[_+this.length]:this[_]},pushStack:function(_){var U=he.merge(this.constructor(),_);return U.prevObject=this,U},each:function(_){return he.each(this,_)},map:function(_){return this.pushStack(he.map(this,function(U,W){return _.call(U,W,U)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(he.grep(this,function(_,U){return(U+1)%2}))},odd:function(){return this.pushStack(he.grep(this,function(_,U){return U%2}))},eq:function(_){var U=this.length,W=+_+(_<0?U:0);return this.pushStack(W>=0&&W<U?[this[W]]:[])},end:function(){return this.prevObject||this.constructor()},push:Ye,sort:L.sort,splice:L.splice},he.extend=he.fn.extend=function(){var q,_,U,W,pe,Ie,Le=arguments[0]||{},it=1,ut=arguments.length,Rt=!1;for(typeof Le=="boolean"&&(Rt=Le,Le=arguments[it]||{},it++),Ni(Le)!=="object"&&!ce(Le)&&(Le={}),it===ut&&(Le=this,it--);it<ut;it++)if((q=arguments[it])!=null)for(_ in q)W=q[_],!(_==="__proto__"||Le===W)&&(Rt&&W&&(he.isPlainObject(W)||(pe=Array.isArray(W)))?(U=Le[_],pe&&!Array.isArray(U)?Ie=[]:!pe&&!he.isPlainObject(U)?Ie={}:Ie=U,pe=!1,Le[_]=he.extend(Rt,Ie,W)):W!==void 0&&(Le[_]=W));return Le},he.extend({expando:"jQuery"+(qt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(_){throw new Error(_)},noop:function(){},isPlainObject:function(_){var U,W;return!_||He.call(_)!=="[object Object]"?!1:(U=re(_),U?(W=G.call(U,"constructor")&&U.constructor,typeof W=="function"&&ge.call(W)===xe):!0)},isEmptyObject:function(_){var U;for(U in _)return!1;return!0},globalEval:function(_,U,W){dt(_,{nonce:U&&U.nonce},W)},each:function(_,U){var W,pe=0;if(Bi(_))for(W=_.length;pe<W&&U.call(_[pe],pe,_[pe])!==!1;pe++);else for(pe in _)if(U.call(_[pe],pe,_[pe])===!1)break;return _},text:function(_){var U,W="",pe=0,Ie=_.nodeType;if(!Ie)for(;U=_[pe++];)W+=he.text(U);return Ie===1||Ie===11?_.textContent:Ie===9?_.documentElement.textContent:Ie===3||Ie===4?_.nodeValue:W},makeArray:function(_,U){var W=U||[];return _!=null&&(Bi(Object(_))?he.merge(W,typeof _=="string"?[_]:_):Ye.call(W,_)),W},inArray:function(_,U,W){return U==null?-1:et.call(U,_,W)},isXMLDoc:function(_){var U=_&&_.namespaceURI,W=_&&(_.ownerDocument||_).documentElement;return!Si.test(U||W&&W.nodeName||"HTML")},merge:function(_,U){for(var W=+U.length,pe=0,Ie=_.length;pe<W;pe++)_[Ie++]=U[pe];return _.length=Ie,_},grep:function(_,U,W){for(var pe,Ie=[],Le=0,it=_.length,ut=!W;Le<it;Le++)pe=!U(_[Le],Le),pe!==ut&&Ie.push(_[Le]);return Ie},map:function(_,U,W){var pe,Ie,Le=0,it=[];if(Bi(_))for(pe=_.length;Le<pe;Le++)Ie=U(_[Le],Le,W),Ie!=null&&it.push(Ie);else for(Le in _)Ie=U(_[Le],Le,W),Ie!=null&&it.push(Ie);return De(it)},guid:1,support:ke}),typeof Symbol=="function"&&(he.fn[Symbol.iterator]=L[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(q,_){R["[object "+_+"]"]=_.toLowerCase()});function Bi(q){var _=!!q&&"length"in q&&q.length,U=Lt(q);return ce(q)||X(q)?!1:U==="array"||_===0||typeof _=="number"&&_>0&&_-1 in q}function yt(q,_){return q.nodeName&&q.nodeName.toLowerCase()===_.toLowerCase()}var wt=L.pop,pt=L.sort,Dt=L.splice,St="[\\x20\\t\\r\\n\\f]",Et=new RegExp("^"+St+"+|((?:^|[^\\\\])(?:\\\\.)*)"+St+"+$","g");he.contains=function(q,_){var U=_&&_.parentNode;return q===U||!!(U&&U.nodeType===1&&(q.contains?q.contains(U):q.compareDocumentPosition&&q.compareDocumentPosition(U)&16))};var jt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function _t(q,_){return _?q==="\0"?"�":q.slice(0,-1)+"\\"+q.charCodeAt(q.length-1).toString(16)+" ":"\\"+q}he.escapeSelector=function(q){return(q+"").replace(jt,_t)};var Xt=Be,ot=Ye;(function(){var q,_,U,W,pe,Ie=ot,Le,it,ut,Rt,Qt,vi=he.expando,Di=0,pi=0,Oi=to(),Ot=to(),Ci=to(),ht=to(),mt=function(Bt,Ri){return Bt===Ri&&(pe=!0),0},$t="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ii="(?:\\\\[\\da-fA-F]{1,6}"+St+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Mi="\\["+St+"*("+ii+")(?:"+St+"*([*^$|!~]?=)"+St+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ii+"))|)"+St+"*\\]",Ti=":("+ii+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Mi+")*)|.*)\\)|)",rn=new RegExp(St+"+","g"),an=new RegExp("^"+St+"*,"+St+"*"),$i=new RegExp("^"+St+"*([>+~]|"+St+")"+St+"*"),sn=new RegExp(St+"|>"),An=new RegExp(Ti),mn=new RegExp("^"+ii+"$"),Mn={ID:new RegExp("^#("+ii+")"),CLASS:new RegExp("^\\.("+ii+")"),TAG:new RegExp("^("+ii+"|[*])"),ATTR:new RegExp("^"+Mi),PSEUDO:new RegExp("^"+Ti),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+St+"*(even|odd|(([+-]|)(\\d*)n|)"+St+"*(?:([+-]|)"+St+"*(\\d+)|))"+St+"*\\)|)","i"),bool:new RegExp("^(?:"+$t+")$","i"),needsContext:new RegExp("^"+St+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+St+"*((?:-\\d)?\\d*)"+St+"*\\)|)(?=[^-]|$)","i")},wn=/^(?:input|select|textarea|button)$/i,hn=/^h\d$/i,nr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,cr=/[+~]/,ur=new RegExp("\\\\[\\da-fA-F]{1,6}"+St+"?|\\\\([^\\r\\n\\f])","g"),Pr=function(Bt,Ri){var Ei="0x"+Bt.slice(1)-65536;return Ri||(Ei<0?String.fromCharCode(Ei+65536):String.fromCharCode(Ei>>10|55296,Ei&1023|56320))},eo=function(){na()},Wa=No(function(ni){return ni.disabled===!0&&yt(ni,"fieldset")},{dir:"parentNode",next:"legend"});function Mr(){try{return Le.activeElement}catch{}}try{Ie.apply(L=J.call(Xt.childNodes),Xt.childNodes),L[Xt.childNodes.length].nodeType}catch{Ie={apply:function(Ri,Ei){ot.apply(Ri,J.call(Ei))},call:function(Ri){ot.apply(Ri,J.call(arguments,1))}}}function $n(ni,Bt,Ri,Ei){var Wi,Qi,on,xn,cn,Sn,Bn,zn=Bt&&Bt.ownerDocument,Vn=Bt?Bt.nodeType:9;if(Ri=Ri||[],typeof ni!="string"||!ni||Vn!==1&&Vn!==9&&Vn!==11)return Ri;if(!Ei&&(na(Bt),Bt=Bt||Le,ut)){if(Vn!==11&&(cn=nr.exec(ni)))if(Wi=cn[1]){if(Vn===9)if(on=Bt.getElementById(Wi)){if(on.id===Wi)return Ie.call(Ri,on),Ri}else return Ri;else if(zn&&(on=zn.getElementById(Wi))&&$n.contains(Bt,on)&&on.id===Wi)return Ie.call(Ri,on),Ri}else{if(cn[2])return Ie.apply(Ri,Bt.getElementsByTagName(ni)),Ri;if((Wi=cn[3])&&Bt.getElementsByClassName)return Ie.apply(Ri,Bt.getElementsByClassName(Wi)),Ri}if(!ht[ni+" "]&&(!Rt||!Rt.test(ni))){if(Bn=ni,zn=Bt,Vn===1&&(sn.test(ni)||$i.test(ni))){for(zn=cr.test(ni)&&io(Bt.parentNode)||Bt,(zn!=Bt||!ke.scope)&&((xn=Bt.getAttribute("id"))?xn=he.escapeSelector(xn):Bt.setAttribute("id",xn=vi)),Sn=Eo(ni),Qi=Sn.length;Qi--;)Sn[Qi]=(xn?"#"+xn:":scope")+" "+Oo(Sn[Qi]);Bn=Sn.join(",")}try{return Ie.apply(Ri,zn.querySelectorAll(Bn)),Ri}catch{ht(ni,!0)}finally{xn===vi&&Bt.removeAttribute("id")}}}return Br(ni.replace(Et,"$1"),Bt,Ri,Ei)}function to(){var ni=[];function Bt(Ri,Ei){return ni.push(Ri+" ")>_.cacheLength&&delete Bt[ni.shift()],Bt[Ri+" "]=Ei}return Bt}function ua(ni){return ni[vi]=!0,ni}function Ma(ni){var Bt=Le.createElement("fieldset");try{return!!ni(Bt)}catch{return!1}finally{Bt.parentNode&&Bt.parentNode.removeChild(Bt),Bt=null}}function Bs(ni){return function(Bt){return yt(Bt,"input")&&Bt.type===ni}}function Ls(ni){return function(Bt){return(yt(Bt,"input")||yt(Bt,"button"))&&Bt.type===ni}}function Po(ni){return function(Bt){return"form"in Bt?Bt.parentNode&&Bt.disabled===!1?"label"in Bt?"label"in Bt.parentNode?Bt.parentNode.disabled===ni:Bt.disabled===ni:Bt.isDisabled===ni||Bt.isDisabled!==!ni&&Wa(Bt)===ni:Bt.disabled===ni:"label"in Bt?Bt.disabled===ni:!1}}function Za(ni){return ua(function(Bt){return Bt=+Bt,ua(function(Ri,Ei){for(var Wi,Qi=ni([],Ri.length,Bt),on=Qi.length;on--;)Ri[Wi=Qi[on]]&&(Ri[Wi]=!(Ei[Wi]=Ri[Wi]))})})}function io(ni){return ni&&typeof ni.getElementsByTagName<"u"&&ni}function na(ni){var Bt,Ri=ni?ni.ownerDocument||ni:Xt;return Ri==Le||Ri.nodeType!==9||!Ri.documentElement||(Le=Ri,it=Le.documentElement,ut=!he.isXMLDoc(Le),Qt=it.matches||it.webkitMatchesSelector||it.msMatchesSelector,it.msMatchesSelector&&Xt!=Le&&(Bt=Le.defaultView)&&Bt.top!==Bt&&Bt.addEventListener("unload",eo),ke.getById=Ma(function(Ei){return it.appendChild(Ei).id=he.expando,!Le.getElementsByName||!Le.getElementsByName(he.expando).length}),ke.disconnectedMatch=Ma(function(Ei){return Qt.call(Ei,"*")}),ke.scope=Ma(function(){return Le.querySelectorAll(":scope")}),ke.cssHas=Ma(function(){try{return Le.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),ke.getById?(_.filter.ID=function(Ei){var Wi=Ei.replace(ur,Pr);return function(Qi){return Qi.getAttribute("id")===Wi}},_.find.ID=function(Ei,Wi){if(typeof Wi.getElementById<"u"&&ut){var Qi=Wi.getElementById(Ei);return Qi?[Qi]:[]}}):(_.filter.ID=function(Ei){var Wi=Ei.replace(ur,Pr);return function(Qi){var on=typeof Qi.getAttributeNode<"u"&&Qi.getAttributeNode("id");return on&&on.value===Wi}},_.find.ID=function(Ei,Wi){if(typeof Wi.getElementById<"u"&&ut){var Qi,on,xn,cn=Wi.getElementById(Ei);if(cn){if(Qi=cn.getAttributeNode("id"),Qi&&Qi.value===Ei)return[cn];for(xn=Wi.getElementsByName(Ei),on=0;cn=xn[on++];)if(Qi=cn.getAttributeNode("id"),Qi&&Qi.value===Ei)return[cn]}return[]}}),_.find.TAG=function(Ei,Wi){return typeof Wi.getElementsByTagName<"u"?Wi.getElementsByTagName(Ei):Wi.querySelectorAll(Ei)},_.find.CLASS=function(Ei,Wi){if(typeof Wi.getElementsByClassName<"u"&&ut)return Wi.getElementsByClassName(Ei)},Rt=[],Ma(function(Ei){var Wi;it.appendChild(Ei).innerHTML="<a id='"+vi+"' href='' disabled='disabled'></a><select id='"+vi+"-\r\\' disabled='disabled'><option selected=''></option></select>",Ei.querySelectorAll("[selected]").length||Rt.push("\\["+St+"*(?:value|"+$t+")"),Ei.querySelectorAll("[id~="+vi+"-]").length||Rt.push("~="),Ei.querySelectorAll("a#"+vi+"+*").length||Rt.push(".#.+[+~]"),Ei.querySelectorAll(":checked").length||Rt.push(":checked"),Wi=Le.createElement("input"),Wi.setAttribute("type","hidden"),Ei.appendChild(Wi).setAttribute("name","D"),it.appendChild(Ei).disabled=!0,Ei.querySelectorAll(":disabled").length!==2&&Rt.push(":enabled",":disabled"),Wi=Le.createElement("input"),Wi.setAttribute("name",""),Ei.appendChild(Wi),Ei.querySelectorAll("[name='']").length||Rt.push("\\["+St+"*name"+St+"*="+St+`*(?:''|"")`)}),ke.cssHas||Rt.push(":has"),Rt=Rt.length&&new RegExp(Rt.join("|")),mt=function(Wi,Qi){if(Wi===Qi)return pe=!0,0;var on=!Wi.compareDocumentPosition-!Qi.compareDocumentPosition;return on||(on=(Wi.ownerDocument||Wi)==(Qi.ownerDocument||Qi)?Wi.compareDocumentPosition(Qi):1,on&1||!ke.sortDetached&&Qi.compareDocumentPosition(Wi)===on?Wi===Le||Wi.ownerDocument==Xt&&$n.contains(Xt,Wi)?-1:Qi===Le||Qi.ownerDocument==Xt&&$n.contains(Xt,Qi)?1:W?et.call(W,Wi)-et.call(W,Qi):0:on&4?-1:1)}),Le}$n.matches=function(ni,Bt){return $n(ni,null,null,Bt)},$n.matchesSelector=function(ni,Bt){if(na(ni),ut&&!ht[Bt+" "]&&(!Rt||!Rt.test(Bt)))try{var Ri=Qt.call(ni,Bt);if(Ri||ke.disconnectedMatch||ni.document&&ni.document.nodeType!==11)return Ri}catch{ht(Bt,!0)}return $n(Bt,Le,null,[ni]).length>0},$n.contains=function(ni,Bt){return(ni.ownerDocument||ni)!=Le&&na(ni),he.contains(ni,Bt)},$n.attr=function(ni,Bt){(ni.ownerDocument||ni)!=Le&&na(ni);var Ri=_.attrHandle[Bt.toLowerCase()],Ei=Ri&&G.call(_.attrHandle,Bt.toLowerCase())?Ri(ni,Bt,!ut):void 0;return Ei!==void 0?Ei:ni.getAttribute(Bt)},$n.error=function(ni){throw new Error("Syntax error, unrecognized expression: "+ni)},he.uniqueSort=function(ni){var Bt,Ri=[],Ei=0,Wi=0;if(pe=!ke.sortStable,W=!ke.sortStable&&J.call(ni,0),pt.call(ni,mt),pe){for(;Bt=ni[Wi++];)Bt===ni[Wi]&&(Ei=Ri.push(Wi));for(;Ei--;)Dt.call(ni,Ri[Ei],1)}return W=null,ni},he.fn.uniqueSort=function(){return this.pushStack(he.uniqueSort(J.apply(this)))},_=he.expr={cacheLength:50,createPseudo:ua,match:Mn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Bt){return Bt[1]=Bt[1].replace(ur,Pr),Bt[3]=(Bt[3]||Bt[4]||Bt[5]||"").replace(ur,Pr),Bt[2]==="~="&&(Bt[3]=" "+Bt[3]+" "),Bt.slice(0,4)},CHILD:function(Bt){return Bt[1]=Bt[1].toLowerCase(),Bt[1].slice(0,3)==="nth"?(Bt[3]||$n.error(Bt[0]),Bt[4]=+(Bt[4]?Bt[5]+(Bt[6]||1):2*(Bt[3]==="even"||Bt[3]==="odd")),Bt[5]=+(Bt[7]+Bt[8]||Bt[3]==="odd")):Bt[3]&&$n.error(Bt[0]),Bt},PSEUDO:function(Bt){var Ri,Ei=!Bt[6]&&Bt[2];return Mn.CHILD.test(Bt[0])?null:(Bt[3]?Bt[2]=Bt[4]||Bt[5]||"":Ei&&An.test(Ei)&&(Ri=Eo(Ei,!0))&&(Ri=Ei.indexOf(")",Ei.length-Ri)-Ei.length)&&(Bt[0]=Bt[0].slice(0,Ri),Bt[2]=Ei.slice(0,Ri)),Bt.slice(0,3))}},filter:{TAG:function(Bt){var Ri=Bt.replace(ur,Pr).toLowerCase();return Bt==="*"?function(){return!0}:function(Ei){return yt(Ei,Ri)}},CLASS:function(Bt){var Ri=Oi[Bt+" "];return Ri||(Ri=new RegExp("(^|"+St+")"+Bt+"("+St+"|$)"))&&Oi(Bt,function(Ei){return Ri.test(typeof Ei.className=="string"&&Ei.className||typeof Ei.getAttribute<"u"&&Ei.getAttribute("class")||"")})},ATTR:function(Bt,Ri,Ei){return function(Wi){var Qi=$n.attr(Wi,Bt);return Qi==null?Ri==="!=":Ri?(Qi+="",Ri==="="?Qi===Ei:Ri==="!="?Qi!==Ei:Ri==="^="?Ei&&Qi.indexOf(Ei)===0:Ri==="*="?Ei&&Qi.indexOf(Ei)>-1:Ri==="$="?Ei&&Qi.slice(-Ei.length)===Ei:Ri==="~="?(" "+Qi.replace(rn," ")+" ").indexOf(Ei)>-1:Ri==="|="?Qi===Ei||Qi.slice(0,Ei.length+1)===Ei+"-":!1):!0}},CHILD:function(Bt,Ri,Ei,Wi,Qi){var on=Bt.slice(0,3)!=="nth",xn=Bt.slice(-4)!=="last",cn=Ri==="of-type";return Wi===1&&Qi===0?function(Sn){return!!Sn.parentNode}:function(Sn,Bn,zn){var Vn,Zn,dr,br,aa,Xr=on!==xn?"nextSibling":"previousSibling",Hr=Sn.parentNode,Ba=cn&&Sn.nodeName.toLowerCase(),no=!zn&&!cn,xt=!1;if(Hr){if(on){for(;Xr;){for(dr=Sn;dr=dr[Xr];)if(cn?yt(dr,Ba):dr.nodeType===1)return!1;aa=Xr=Bt==="only"&&!aa&&"nextSibling"}return!0}if(aa=[xn?Hr.firstChild:Hr.lastChild],xn&&no){for(Zn=Hr[vi]||(Hr[vi]={}),Vn=Zn[Bt]||[],br=Vn[0]===Di&&Vn[1],xt=br&&Vn[2],dr=br&&Hr.childNodes[br];dr=++br&&dr&&dr[Xr]||(xt=br=0)||aa.pop();)if(dr.nodeType===1&&++xt&&dr===Sn){Zn[Bt]=[Di,br,xt];break}}else if(no&&(Zn=Sn[vi]||(Sn[vi]={}),Vn=Zn[Bt]||[],br=Vn[0]===Di&&Vn[1],xt=br),xt===!1)for(;(dr=++br&&dr&&dr[Xr]||(xt=br=0)||aa.pop())&&!((cn?yt(dr,Ba):dr.nodeType===1)&&++xt&&(no&&(Zn=dr[vi]||(dr[vi]={}),Zn[Bt]=[Di,xt]),dr===Sn)););return xt-=Qi,xt===Wi||xt%Wi===0&&xt/Wi>=0}}},PSEUDO:function(Bt,Ri){var Ei,Wi=_.pseudos[Bt]||_.setFilters[Bt.toLowerCase()]||$n.error("unsupported pseudo: "+Bt);return Wi[vi]?Wi(Ri):Wi.length>1?(Ei=[Bt,Bt,"",Ri],_.setFilters.hasOwnProperty(Bt.toLowerCase())?ua(function(Qi,on){for(var xn,cn=Wi(Qi,Ri),Sn=cn.length;Sn--;)xn=et.call(Qi,cn[Sn]),Qi[xn]=!(on[xn]=cn[Sn])}):function(Qi){return Wi(Qi,0,Ei)}):Wi}},pseudos:{not:ua(function(ni){var Bt=[],Ri=[],Ei=is(ni.replace(Et,"$1"));return Ei[vi]?ua(function(Wi,Qi,on,xn){for(var cn,Sn=Ei(Wi,null,xn,[]),Bn=Wi.length;Bn--;)(cn=Sn[Bn])&&(Wi[Bn]=!(Qi[Bn]=cn))}):function(Wi,Qi,on){return Bt[0]=Wi,Ei(Bt,null,on,Ri),Bt[0]=null,!Ri.pop()}}),has:ua(function(ni){return function(Bt){return $n(ni,Bt).length>0}}),contains:ua(function(ni){return ni=ni.replace(ur,Pr),function(Bt){return(Bt.textContent||he.text(Bt)).indexOf(ni)>-1}}),lang:ua(function(ni){return mn.test(ni||"")||$n.error("unsupported lang: "+ni),ni=ni.replace(ur,Pr).toLowerCase(),function(Bt){var Ri;do if(Ri=ut?Bt.lang:Bt.getAttribute("xml:lang")||Bt.getAttribute("lang"))return Ri=Ri.toLowerCase(),Ri===ni||Ri.indexOf(ni+"-")===0;while((Bt=Bt.parentNode)&&Bt.nodeType===1);return!1}}),target:function(Bt){var Ri=fe.location&&fe.location.hash;return Ri&&Ri.slice(1)===Bt.id},root:function(Bt){return Bt===it},focus:function(Bt){return Bt===Mr()&&Le.hasFocus()&&!!(Bt.type||Bt.href||~Bt.tabIndex)},enabled:Po(!1),disabled:Po(!0),checked:function(Bt){return yt(Bt,"input")&&!!Bt.checked||yt(Bt,"option")&&!!Bt.selected},selected:function(Bt){return Bt.parentNode&&Bt.parentNode.selectedIndex,Bt.selected===!0},empty:function(Bt){for(Bt=Bt.firstChild;Bt;Bt=Bt.nextSibling)if(Bt.nodeType<6)return!1;return!0},parent:function(Bt){return!_.pseudos.empty(Bt)},header:function(Bt){return hn.test(Bt.nodeName)},input:function(Bt){return wn.test(Bt.nodeName)},button:function(Bt){return yt(Bt,"input")&&Bt.type==="button"||yt(Bt,"button")},text:function(Bt){var Ri;return yt(Bt,"input")&&Bt.type==="text"&&((Ri=Bt.getAttribute("type"))==null||Ri.toLowerCase()==="text")},first:Za(function(){return[0]}),last:Za(function(ni,Bt){return[Bt-1]}),eq:Za(function(ni,Bt,Ri){return[Ri<0?Ri+Bt:Ri]}),even:Za(function(ni,Bt){for(var Ri=0;Ri<Bt;Ri+=2)ni.push(Ri);return ni}),odd:Za(function(ni,Bt){for(var Ri=1;Ri<Bt;Ri+=2)ni.push(Ri);return ni}),lt:Za(function(ni,Bt,Ri){var Ei;for(Ri<0?Ei=Ri+Bt:Ri>Bt?Ei=Bt:Ei=Ri;--Ei>=0;)ni.push(Ei);return ni}),gt:Za(function(ni,Bt,Ri){for(var Ei=Ri<0?Ri+Bt:Ri;++Ei<Bt;)ni.push(Ei);return ni})}},_.pseudos.nth=_.pseudos.eq;for(q in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[q]=Bs(q);for(q in{submit:!0,reset:!0})_.pseudos[q]=Ls(q);function wo(){}wo.prototype=_.filters=_.pseudos,_.setFilters=new wo;function Eo(ni,Bt){var Ri,Ei,Wi,Qi,on,xn,cn,Sn=Ot[ni+" "];if(Sn)return Bt?0:Sn.slice(0);for(on=ni,xn=[],cn=_.preFilter;on;){(!Ri||(Ei=an.exec(on)))&&(Ei&&(on=on.slice(Ei[0].length)||on),xn.push(Wi=[])),Ri=!1,(Ei=$i.exec(on))&&(Ri=Ei.shift(),Wi.push({value:Ri,type:Ei[0].replace(Et," ")}),on=on.slice(Ri.length));for(Qi in _.filter)(Ei=Mn[Qi].exec(on))&&(!cn[Qi]||(Ei=cn[Qi](Ei)))&&(Ri=Ei.shift(),Wi.push({value:Ri,type:Qi,matches:Ei}),on=on.slice(Ri.length));if(!Ri)break}return Bt?on.length:on?$n.error(ni):Ot(ni,xn).slice(0)}function Oo(ni){for(var Bt=0,Ri=ni.length,Ei="";Bt<Ri;Bt++)Ei+=ni[Bt].value;return Ei}function No(ni,Bt,Ri){var Ei=Bt.dir,Wi=Bt.next,Qi=Wi||Ei,on=Ri&&Qi==="parentNode",xn=pi++;return Bt.first?function(cn,Sn,Bn){for(;cn=cn[Ei];)if(cn.nodeType===1||on)return ni(cn,Sn,Bn);return!1}:function(cn,Sn,Bn){var zn,Vn,Zn=[Di,xn];if(Bn){for(;cn=cn[Ei];)if((cn.nodeType===1||on)&&ni(cn,Sn,Bn))return!0}else for(;cn=cn[Ei];)if(cn.nodeType===1||on)if(Vn=cn[vi]||(cn[vi]={}),Wi&&yt(cn,Wi))cn=cn[Ei]||cn;else{if((zn=Vn[Qi])&&zn[0]===Di&&zn[1]===xn)return Zn[2]=zn[2];if(Vn[Qi]=Zn,Zn[2]=ni(cn,Sn,Bn))return!0}return!1}}function _o(ni){return ni.length>1?function(Bt,Ri,Ei){for(var Wi=ni.length;Wi--;)if(!ni[Wi](Bt,Ri,Ei))return!1;return!0}:ni[0]}function jo(ni,Bt,Ri){for(var Ei=0,Wi=Bt.length;Ei<Wi;Ei++)$n(ni,Bt[Ei],Ri);return Ri}function go(ni,Bt,Ri,Ei,Wi){for(var Qi,on=[],xn=0,cn=ni.length,Sn=Bt!=null;xn<cn;xn++)(Qi=ni[xn])&&(!Ri||Ri(Qi,Ei,Wi))&&(on.push(Qi),Sn&&Bt.push(xn));return on}function ts(ni,Bt,Ri,Ei,Wi,Qi){return Ei&&!Ei[vi]&&(Ei=ts(Ei)),Wi&&!Wi[vi]&&(Wi=ts(Wi,Qi)),ua(function(on,xn,cn,Sn){var Bn,zn,Vn,Zn,dr=[],br=[],aa=xn.length,Xr=on||jo(Bt||"*",cn.nodeType?[cn]:cn,[]),Hr=ni&&(on||!Bt)?go(Xr,dr,ni,cn,Sn):Xr;if(Ri?(Zn=Wi||(on?ni:aa||Ei)?[]:xn,Ri(Hr,Zn,cn,Sn)):Zn=Hr,Ei)for(Bn=go(Zn,br),Ei(Bn,[],cn,Sn),zn=Bn.length;zn--;)(Vn=Bn[zn])&&(Zn[br[zn]]=!(Hr[br[zn]]=Vn));if(on){if(Wi||ni){if(Wi){for(Bn=[],zn=Zn.length;zn--;)(Vn=Zn[zn])&&Bn.push(Hr[zn]=Vn);Wi(null,Zn=[],Bn,Sn)}for(zn=Zn.length;zn--;)(Vn=Zn[zn])&&(Bn=Wi?et.call(on,Vn):dr[zn])>-1&&(on[Bn]=!(xn[Bn]=Vn))}}else Zn=go(Zn===xn?Zn.splice(aa,Zn.length):Zn),Wi?Wi(null,xn,Zn,Sn):Ie.apply(xn,Zn)})}function Uo(ni){for(var Bt,Ri,Ei,Wi=ni.length,Qi=_.relative[ni[0].type],on=Qi||_.relative[" "],xn=Qi?1:0,cn=No(function(zn){return zn===Bt},on,!0),Sn=No(function(zn){return et.call(Bt,zn)>-1},on,!0),Bn=[function(zn,Vn,Zn){var dr=!Qi&&(Zn||Vn!=U)||((Bt=Vn).nodeType?cn(zn,Vn,Zn):Sn(zn,Vn,Zn));return Bt=null,dr}];xn<Wi;xn++)if(Ri=_.relative[ni[xn].type])Bn=[No(_o(Bn),Ri)];else{if(Ri=_.filter[ni[xn].type].apply(null,ni[xn].matches),Ri[vi]){for(Ei=++xn;Ei<Wi&&!_.relative[ni[Ei].type];Ei++);return ts(xn>1&&_o(Bn),xn>1&&Oo(ni.slice(0,xn-1).concat({value:ni[xn-2].type===" "?"*":""})).replace(Et,"$1"),Ri,xn<Ei&&Uo(ni.slice(xn,Ei)),Ei<Wi&&Uo(ni=ni.slice(Ei)),Ei<Wi&&Oo(ni))}Bn.push(Ri)}return _o(Bn)}function P0(ni,Bt){var Ri=Bt.length>0,Ei=ni.length>0,Wi=function(on,xn,cn,Sn,Bn){var zn,Vn,Zn,dr=0,br="0",aa=on&&[],Xr=[],Hr=U,Ba=on||Ei&&_.find.TAG("*",Bn),no=Di+=Hr==null?1:Math.random()||.1,xt=Ba.length;for(Bn&&(U=xn==Le||xn||Bn);br!==xt&&(zn=Ba[br])!=null;br++){if(Ei&&zn){for(Vn=0,!xn&&zn.ownerDocument!=Le&&(na(zn),cn=!ut);Zn=ni[Vn++];)if(Zn(zn,xn||Le,cn)){Ie.call(Sn,zn);break}Bn&&(Di=no)}Ri&&((zn=!Zn&&zn)&&dr--,on&&aa.push(zn))}if(dr+=br,Ri&&br!==dr){for(Vn=0;Zn=Bt[Vn++];)Zn(aa,Xr,xn,cn);if(on){if(dr>0)for(;br--;)aa[br]||Xr[br]||(Xr[br]=wt.call(Sn));Xr=go(Xr)}Ie.apply(Sn,Xr),Bn&&!on&&Xr.length>0&&dr+Bt.length>1&&he.uniqueSort(Sn)}return Bn&&(Di=no,U=Hr),aa};return Ri?ua(Wi):Wi}function is(ni,Bt){var Ri,Ei=[],Wi=[],Qi=Ci[ni+" "];if(!Qi){for(Bt||(Bt=Eo(ni)),Ri=Bt.length;Ri--;)Qi=Uo(Bt[Ri]),Qi[vi]?Ei.push(Qi):Wi.push(Qi);Qi=Ci(ni,P0(Wi,Ei)),Qi.selector=ni}return Qi}function Br(ni,Bt,Ri,Ei){var Wi,Qi,on,xn,cn,Sn=typeof ni=="function"&&ni,Bn=!Ei&&Eo(ni=Sn.selector||ni);if(Ri=Ri||[],Bn.length===1){if(Qi=Bn[0]=Bn[0].slice(0),Qi.length>2&&(on=Qi[0]).type==="ID"&&Bt.nodeType===9&&ut&&_.relative[Qi[1].type]){if(Bt=(_.find.ID(on.matches[0].replace(ur,Pr),Bt)||[])[0],Bt)Sn&&(Bt=Bt.parentNode);else return Ri;ni=ni.slice(Qi.shift().value.length)}for(Wi=Mn.needsContext.test(ni)?0:Qi.length;Wi--&&(on=Qi[Wi],!_.relative[xn=on.type]);)if((cn=_.find[xn])&&(Ei=cn(on.matches[0].replace(ur,Pr),cr.test(Qi[0].type)&&io(Bt.parentNode)||Bt))){if(Qi.splice(Wi,1),ni=Ei.length&&Oo(Qi),!ni)return Ie.apply(Ri,Ei),Ri;break}}return(Sn||is(ni,Bn))(Ei,Bt,!ut,Ri,!Bt||cr.test(ni)&&io(Bt.parentNode)||Bt),Ri}ke.sortStable=vi.split("").sort(mt).join("")===vi,na(),ke.sortDetached=Ma(function(ni){return ni.compareDocumentPosition(Le.createElement("fieldset"))&1}),he.find=$n,he.expr[":"]=he.expr.pseudos,he.unique=he.uniqueSort,$n.compile=is,$n.select=Br,$n.setDocument=na,$n.tokenize=Eo,$n.escape=he.escapeSelector,$n.getText=he.text,$n.isXML=he.isXMLDoc,$n.selectors=he.expr,$n.support=he.support,$n.uniqueSort=he.uniqueSort})();var mi=function(_,U,W){for(var pe=[],Ie=W!==void 0;(_=_[U])&&_.nodeType!==9;)if(_.nodeType===1){if(Ie&&he(_).is(W))break;pe.push(_)}return pe},Pi=function(_,U){for(var W=[];_;_=_.nextSibling)_.nodeType===1&&_!==U&&W.push(_);return W},Ii=he.expr.match.needsContext,ti=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Vi(q,_,U){return ce(_)?he.grep(q,function(W,pe){return!!_.call(W,pe,W)!==U}):_.nodeType?he.grep(q,function(W){return W===_!==U}):typeof _!="string"?he.grep(q,function(W){return et.call(_,W)>-1!==U}):he.filter(_,q,U)}he.filter=function(q,_,U){var W=_[0];return U&&(q=":not("+q+")"),_.length===1&&W.nodeType===1?he.find.matchesSelector(W,q)?[W]:[]:he.find.matches(q,he.grep(_,function(pe){return pe.nodeType===1}))},he.fn.extend({find:function(_){var U,W,pe=this.length,Ie=this;if(typeof _!="string")return this.pushStack(he(_).filter(function(){for(U=0;U<pe;U++)if(he.contains(Ie[U],this))return!0}));for(W=this.pushStack([]),U=0;U<pe;U++)he.find(_,Ie[U],W);return pe>1?he.uniqueSort(W):W},filter:function(_){return this.pushStack(Vi(this,_||[],!1))},not:function(_){return this.pushStack(Vi(this,_||[],!0))},is:function(_){return!!Vi(this,typeof _=="string"&&Ii.test(_)?he(_):_||[],!1).length}});var Jt,At=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,j=he.fn.init=function(q,_,U){var W,pe;if(!q)return this;if(U=U||Jt,typeof q=="string")if(q[0]==="<"&&q[q.length-1]===">"&&q.length>=3?W=[null,q,null]:W=At.exec(q),W&&(W[1]||!_))if(W[1]){if(_=_ instanceof he?_[0]:_,he.merge(this,he.parseHTML(W[1],_&&_.nodeType?_.ownerDocument||_:Be,!0)),ti.test(W[1])&&he.isPlainObject(_))for(W in _)ce(this[W])?this[W](_[W]):this.attr(W,_[W]);return this}else return pe=Be.getElementById(W[2]),pe&&(this[0]=pe,this.length=1),this;else return!_||_.jquery?(_||U).find(q):this.constructor(_).find(q);else{if(q.nodeType)return this[0]=q,this.length=1,this;if(ce(q))return U.ready!==void 0?U.ready(q):q(he)}return he.makeArray(q,this)};j.prototype=he.fn,Jt=he(Be);var T=/^(?:parents|prev(?:Until|All))/,F={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(_){var U=he(_,this),W=U.length;return this.filter(function(){for(var pe=0;pe<W;pe++)if(he.contains(this,U[pe]))return!0})},closest:function(_,U){var W,pe=0,Ie=this.length,Le=[],it=typeof _!="string"&&he(_);if(!Ii.test(_)){for(;pe<Ie;pe++)for(W=this[pe];W&&W!==U;W=W.parentNode)if(W.nodeType<11&&(it?it.index(W)>-1:W.nodeType===1&&he.find.matchesSelector(W,_))){Le.push(W);break}}return this.pushStack(Le.length>1?he.uniqueSort(Le):Le)},index:function(_){return _?typeof _=="string"?et.call(he(_),this[0]):et.call(this,_.jquery?_[0]:_):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(_,U){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(_,U))))},addBack:function(_){return this.add(_==null?this.prevObject:this.prevObject.filter(_))}});function S(q,_){for(;(q=q[_])&&q.nodeType!==1;);return q}he.each({parent:function(_){var U=_.parentNode;return U&&U.nodeType!==11?U:null},parents:function(_){return mi(_,"parentNode")},parentsUntil:function(_,U,W){return mi(_,"parentNode",W)},next:function(_){return S(_,"nextSibling")},prev:function(_){return S(_,"previousSibling")},nextAll:function(_){return mi(_,"nextSibling")},prevAll:function(_){return mi(_,"previousSibling")},nextUntil:function(_,U,W){return mi(_,"nextSibling",W)},prevUntil:function(_,U,W){return mi(_,"previousSibling",W)},siblings:function(_){return Pi((_.parentNode||{}).firstChild,_)},children:function(_){return Pi(_.firstChild)},contents:function(_){return _.contentDocument!=null&&re(_.contentDocument)?_.contentDocument:(yt(_,"template")&&(_=_.content||_),he.merge([],_.childNodes))}},function(q,_){he.fn[q]=function(U,W){var pe=he.map(this,_,U);return q.slice(-5)!=="Until"&&(W=U),W&&typeof W=="string"&&(pe=he.filter(W,pe)),this.length>1&&(F[q]||he.uniqueSort(pe),T.test(q)&&pe.reverse()),this.pushStack(pe)}});var be=/[^\x20\t\r\n\f]+/g;function _e(q){var _={};return he.each(q.match(be)||[],function(U,W){_[W]=!0}),_}he.Callbacks=function(q){q=typeof q=="string"?_e(q):he.extend({},q);var _,U,W,pe,Ie=[],Le=[],it=-1,ut=function(){for(pe=pe||q.once,W=_=!0;Le.length;it=-1)for(U=Le.shift();++it<Ie.length;)Ie[it].apply(U[0],U[1])===!1&&q.stopOnFalse&&(it=Ie.length,U=!1);q.memory||(U=!1),_=!1,pe&&(U?Ie=[]:Ie="")},Rt={add:function(){return Ie&&(U&&!_&&(it=Ie.length-1,Le.push(U)),function vi(Di){he.each(Di,function(pi,Oi){ce(Oi)?(!q.unique||!Rt.has(Oi))&&Ie.push(Oi):Oi&&Oi.length&&Lt(Oi)!=="string"&&vi(Oi)})}(arguments),U&&!_&&ut()),this},remove:function(){return he.each(arguments,function(vi,Di){for(var pi;(pi=he.inArray(Di,Ie,pi))>-1;)Ie.splice(pi,1),pi<=it&&it--}),this},has:function(vi){return vi?he.inArray(vi,Ie)>-1:Ie.length>0},empty:function(){return Ie&&(Ie=[]),this},disable:function(){return pe=Le=[],Ie=U="",this},disabled:function(){return!Ie},lock:function(){return pe=Le=[],!U&&!_&&(Ie=U=""),this},locked:function(){return!!pe},fireWith:function(vi,Di){return pe||(Di=Di||[],Di=[vi,Di.slice?Di.slice():Di],Le.push(Di),_||ut()),this},fire:function(){return Rt.fireWith(this,arguments),this},fired:function(){return!!W}};return Rt};function Me(q){return q}function Ue(q){throw q}function ft(q,_,U,W){var pe;try{q&&ce(pe=q.promise)?pe.call(q).done(_).fail(U):q&&ce(pe=q.then)?pe.call(q,_,U):_.apply(void 0,[q].slice(W))}catch(Ie){U.apply(void 0,[Ie])}}he.extend({Deferred:function(_){var U=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],W="pending",pe={state:function(){return W},always:function(){return Ie.done(arguments).fail(arguments),this},catch:function(it){return pe.then(null,it)},pipe:function(){var it=arguments;return he.Deferred(function(ut){he.each(U,function(Rt,Qt){var vi=ce(it[Qt[4]])&&it[Qt[4]];Ie[Qt[1]](function(){var Di=vi&&vi.apply(this,arguments);Di&&ce(Di.promise)?Di.promise().progress(ut.notify).done(ut.resolve).fail(ut.reject):ut[Qt[0]+"With"](this,vi?[Di]:arguments)})}),it=null}).promise()},then:function(it,ut,Rt){var Qt=0;function vi(Di,pi,Oi,Ot){return function(){var Ci=this,ht=arguments,mt=function(){var Mi,Ti;if(!(Di<Qt)){if(Mi=Oi.apply(Ci,ht),Mi===pi.promise())throw new TypeError("Thenable self-resolution");Ti=Mi&&(Ni(Mi)==="object"||typeof Mi=="function")&&Mi.then,ce(Ti)?Ot?Ti.call(Mi,vi(Qt,pi,Me,Ot),vi(Qt,pi,Ue,Ot)):(Qt++,Ti.call(Mi,vi(Qt,pi,Me,Ot),vi(Qt,pi,Ue,Ot),vi(Qt,pi,Me,pi.notifyWith))):(Oi!==Me&&(Ci=void 0,ht=[Mi]),(Ot||pi.resolveWith)(Ci,ht))}},$t=Ot?mt:function(){try{mt()}catch(ii){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(ii,$t.error),Di+1>=Qt&&(Oi!==Ue&&(Ci=void 0,ht=[ii]),pi.rejectWith(Ci,ht))}};Di?$t():(he.Deferred.getErrorHook?$t.error=he.Deferred.getErrorHook():he.Deferred.getStackHook&&($t.error=he.Deferred.getStackHook()),fe.setTimeout($t))}}return he.Deferred(function(Di){U[0][3].add(vi(0,Di,ce(Rt)?Rt:Me,Di.notifyWith)),U[1][3].add(vi(0,Di,ce(it)?it:Me)),U[2][3].add(vi(0,Di,ce(ut)?ut:Ue))}).promise()},promise:function(it){return it!=null?he.extend(it,pe):pe}},Ie={};return he.each(U,function(Le,it){var ut=it[2],Rt=it[5];pe[it[1]]=ut.add,Rt&&ut.add(function(){W=Rt},U[3-Le][2].disable,U[3-Le][3].disable,U[0][2].lock,U[0][3].lock),ut.add(it[3].fire),Ie[it[0]]=function(){return Ie[it[0]+"With"](this===Ie?void 0:this,arguments),this},Ie[it[0]+"With"]=ut.fireWith}),pe.promise(Ie),_&&_.call(Ie,Ie),Ie},when:function(_){var U=arguments.length,W=U,pe=Array(W),Ie=J.call(arguments),Le=he.Deferred(),it=function(Rt){return function(Qt){pe[Rt]=this,Ie[Rt]=arguments.length>1?J.call(arguments):Qt,--U||Le.resolveWith(pe,Ie)}};if(U<=1&&(ft(_,Le.done(it(W)).resolve,Le.reject,!U),Le.state()==="pending"||ce(Ie[W]&&Ie[W].then)))return Le.then();for(;W--;)ft(Ie[W],it(W),Le.reject);return Le.promise()}});var Gt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(q,_){fe.console&&fe.console.warn&&q&&Gt.test(q.name)&&fe.console.warn("jQuery.Deferred exception: "+q.message,q.stack,_)},he.readyException=function(q){fe.setTimeout(function(){throw q})};var Ft=he.Deferred();he.fn.ready=function(q){return Ft.then(q).catch(function(_){he.readyException(_)}),this},he.extend({isReady:!1,readyWait:1,ready:function(_){(_===!0?--he.readyWait:he.isReady)||(he.isReady=!0,!(_!==!0&&--he.readyWait>0)&&Ft.resolveWith(Be,[he]))}}),he.ready.then=Ft.then;function Ee(){Be.removeEventListener("DOMContentLoaded",Ee),fe.removeEventListener("load",Ee),he.ready()}Be.readyState==="complete"||Be.readyState!=="loading"&&!Be.documentElement.doScroll?fe.setTimeout(he.ready):(Be.addEventListener("DOMContentLoaded",Ee),fe.addEventListener("load",Ee));var nt=function q(_,U,W,pe,Ie,Le,it){var ut=0,Rt=_.length,Qt=W==null;if(Lt(W)==="object"){Ie=!0;for(ut in W)q(_,U,ut,W[ut],!0,Le,it)}else if(pe!==void 0&&(Ie=!0,ce(pe)||(it=!0),Qt&&(it?(U.call(_,pe),U=null):(Qt=U,U=function(Di,pi,Oi){return Qt.call(he(Di),Oi)})),U))for(;ut<Rt;ut++)U(_[ut],W,it?pe:pe.call(_[ut],ut,U(_[ut],W)));return Ie?_:Qt?U.call(_):Rt?U(_[0],W):Le},Zt=/^-ms-/,bi=/-([a-z])/g;function Kt(q,_){return _.toUpperCase()}function ri(q){return q.replace(Zt,"ms-").replace(bi,Kt)}var Li=function(_){return _.nodeType===1||_.nodeType===9||!+_.nodeType};function li(){this.expando=he.expando+li.uid++}li.uid=1,li.prototype={cache:function(_){var U=_[this.expando];return U||(U={},Li(_)&&(_.nodeType?_[this.expando]=U:Object.defineProperty(_,this.expando,{value:U,configurable:!0}))),U},set:function(_,U,W){var pe,Ie=this.cache(_);if(typeof U=="string")Ie[ri(U)]=W;else for(pe in U)Ie[ri(pe)]=U[pe];return Ie},get:function(_,U){return U===void 0?this.cache(_):_[this.expando]&&_[this.expando][ri(U)]},access:function(_,U,W){return U===void 0||U&&typeof U=="string"&&W===void 0?this.get(_,U):(this.set(_,U,W),W!==void 0?W:U)},remove:function(_,U){var W,pe=_[this.expando];if(pe!==void 0){if(U!==void 0)for(Array.isArray(U)?U=U.map(ri):(U=ri(U),U=U in pe?[U]:U.match(be)||[]),W=U.length;W--;)delete pe[U[W]];(U===void 0||he.isEmptyObject(pe))&&(_.nodeType?_[this.expando]=void 0:delete _[this.expando])}},hasData:function(_){var U=_[this.expando];return U!==void 0&&!he.isEmptyObject(U)}};var Mt=new li,Nt=new li,ai=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ji=/[A-Z]/g;function tn(q){return q==="true"?!0:q==="false"?!1:q==="null"?null:q===+q+""?+q:ai.test(q)?JSON.parse(q):q}function Ui(q,_,U){var W;if(U===void 0&&q.nodeType===1)if(W="data-"+_.replace(ji,"-$&").toLowerCase(),U=q.getAttribute(W),typeof U=="string"){try{U=tn(U)}catch{}Nt.set(q,_,U)}else U=void 0;return U}he.extend({hasData:function(_){return Nt.hasData(_)||Mt.hasData(_)},data:function(_,U,W){return Nt.access(_,U,W)},removeData:function(_,U){Nt.remove(_,U)},_data:function(_,U,W){return Mt.access(_,U,W)},_removeData:function(_,U){Mt.remove(_,U)}}),he.fn.extend({data:function(_,U){var W,pe,Ie,Le=this[0],it=Le&&Le.attributes;if(_===void 0){if(this.length&&(Ie=Nt.get(Le),Le.nodeType===1&&!Mt.get(Le,"hasDataAttrs"))){for(W=it.length;W--;)it[W]&&(pe=it[W].name,pe.indexOf("data-")===0&&(pe=ri(pe.slice(5)),Ui(Le,pe,Ie[pe])));Mt.set(Le,"hasDataAttrs",!0)}return Ie}return Ni(_)==="object"?this.each(function(){Nt.set(this,_)}):nt(this,function(ut){var Rt;if(Le&&ut===void 0)return Rt=Nt.get(Le,_),Rt!==void 0||(Rt=Ui(Le,_),Rt!==void 0)?Rt:void 0;this.each(function(){Nt.set(this,_,ut)})},null,U,arguments.length>1,null,!0)},removeData:function(_){return this.each(function(){Nt.remove(this,_)})}}),he.extend({queue:function(_,U,W){var pe;if(_)return U=(U||"fx")+"queue",pe=Mt.get(_,U),W&&(!pe||Array.isArray(W)?pe=Mt.access(_,U,he.makeArray(W)):pe.push(W)),pe||[]},dequeue:function(_,U){U=U||"fx";var W=he.queue(_,U),pe=W.length,Ie=W.shift(),Le=he._queueHooks(_,U),it=function(){he.dequeue(_,U)};Ie==="inprogress"&&(Ie=W.shift(),pe--),Ie&&(U==="fx"&&W.unshift("inprogress"),delete Le.stop,Ie.call(_,it,Le)),!pe&&Le&&Le.empty.fire()},_queueHooks:function(_,U){var W=U+"queueHooks";return Mt.get(_,W)||Mt.access(_,W,{empty:he.Callbacks("once memory").add(function(){Mt.remove(_,[U+"queue",W])})})}}),he.fn.extend({queue:function(_,U){var W=2;return typeof _!="string"&&(U=_,_="fx",W--),arguments.length<W?he.queue(this[0],_):U===void 0?this:this.each(function(){var pe=he.queue(this,_,U);he._queueHooks(this,_),_==="fx"&&pe[0]!=="inprogress"&&he.dequeue(this,_)})},dequeue:function(_){return this.each(function(){he.dequeue(this,_)})},clearQueue:function(_){return this.queue(_||"fx",[])},promise:function(_,U){var W,pe=1,Ie=he.Deferred(),Le=this,it=this.length,ut=function(){--pe||Ie.resolveWith(Le,[Le])};for(typeof _!="string"&&(U=_,_=void 0),_=_||"fx";it--;)W=Mt.get(Le[it],_+"queueHooks"),W&&W.empty&&(pe++,W.empty.add(ut));return ut(),Ie.promise(U)}});var Gi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nn=new RegExp("^(?:([+-])=|)("+Gi+")([a-z%]*)$","i"),Zi=["Top","Right","Bottom","Left"],Yi=Be.documentElement,bn=function(_){return he.contains(_.ownerDocument,_)},vn={composed:!0};Yi.getRootNode&&(bn=function(_){return he.contains(_.ownerDocument,_)||_.getRootNode(vn)===_.ownerDocument});var jn=function(_,U){return _=U||_,_.style.display==="none"||_.style.display===""&&bn(_)&&he.css(_,"display")==="none"};function un(q,_,U,W){var pe,Ie,Le=20,it=W?function(){return W.cur()}:function(){return he.css(q,_,"")},ut=it(),Rt=U&&U[3]||(he.cssNumber[_]?"":"px"),Qt=q.nodeType&&(he.cssNumber[_]||Rt!=="px"&&+ut)&&nn.exec(he.css(q,_));if(Qt&&Qt[3]!==Rt){for(ut=ut/2,Rt=Rt||Qt[3],Qt=+ut||1;Le--;)he.style(q,_,Qt+Rt),(1-Ie)*(1-(Ie=it()/ut||.5))<=0&&(Le=0),Qt=Qt/Ie;Qt=Qt*2,he.style(q,_,Qt+Rt),U=U||[]}return U&&(Qt=+Qt||+ut||0,pe=U[1]?Qt+(U[1]+1)*U[2]:+U[2],W&&(W.unit=Rt,W.start=Qt,W.end=pe)),pe}var Un={};function Hn(q){var _,U=q.ownerDocument,W=q.nodeName,pe=Un[W];return pe||(_=U.body.appendChild(U.createElement(W)),pe=he.css(_,"display"),_.parentNode.removeChild(_),pe==="none"&&(pe="block"),Un[W]=pe,pe)}function yn(q,_){for(var U,W,pe=[],Ie=0,Le=q.length;Ie<Le;Ie++)W=q[Ie],W.style&&(U=W.style.display,_?(U==="none"&&(pe[Ie]=Mt.get(W,"display")||null,pe[Ie]||(W.style.display="")),W.style.display===""&&jn(W)&&(pe[Ie]=Hn(W))):U!=="none"&&(pe[Ie]="none",Mt.set(W,"display",U)));for(Ie=0;Ie<Le;Ie++)pe[Ie]!=null&&(q[Ie].style.display=pe[Ie]);return q}he.fn.extend({show:function(){return yn(this,!0)},hide:function(){return yn(this)},toggle:function(_){return typeof _=="boolean"?_?this.show():this.hide():this.each(function(){jn(this)?he(this).show():he(this).hide()})}});var fn=/^(?:checkbox|radio)$/i,Cn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,wr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var q=Be.createDocumentFragment(),_=q.appendChild(Be.createElement("div")),U=Be.createElement("input");U.setAttribute("type","radio"),U.setAttribute("checked","checked"),U.setAttribute("name","t"),_.appendChild(U),ke.checkClone=_.cloneNode(!0).cloneNode(!0).lastChild.checked,_.innerHTML="<textarea>x</textarea>",ke.noCloneChecked=!!_.cloneNode(!0).lastChild.defaultValue,_.innerHTML="<option></option>",ke.option=!!_.lastChild})();var tr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};tr.tbody=tr.tfoot=tr.colgroup=tr.caption=tr.thead,tr.th=tr.td,ke.option||(tr.optgroup=tr.option=[1,"<select multiple='multiple'>","</select>"]);function Nn(q,_){var U;return typeof q.getElementsByTagName<"u"?U=q.getElementsByTagName(_||"*"):typeof q.querySelectorAll<"u"?U=q.querySelectorAll(_||"*"):U=[],_===void 0||_&&yt(q,_)?he.merge([q],U):U}function lr(q,_){for(var U=0,W=q.length;U<W;U++)Mt.set(q[U],"globalEval",!_||Mt.get(_[U],"globalEval"))}var zr=/<|&#?\w+;/;function Ir(q,_,U,W,pe){for(var Ie,Le,it,ut,Rt,Qt,vi=_.createDocumentFragment(),Di=[],pi=0,Oi=q.length;pi<Oi;pi++)if(Ie=q[pi],Ie||Ie===0)if(Lt(Ie)==="object")he.merge(Di,Ie.nodeType?[Ie]:Ie);else if(!zr.test(Ie))Di.push(_.createTextNode(Ie));else{for(Le=Le||vi.appendChild(_.createElement("div")),it=(Cn.exec(Ie)||["",""])[1].toLowerCase(),ut=tr[it]||tr._default,Le.innerHTML=ut[1]+he.htmlPrefilter(Ie)+ut[2],Qt=ut[0];Qt--;)Le=Le.lastChild;he.merge(Di,Le.childNodes),Le=vi.firstChild,Le.textContent=""}for(vi.textContent="",pi=0;Ie=Di[pi++];){if(W&&he.inArray(Ie,W)>-1){pe&&pe.push(Ie);continue}if(Rt=bn(Ie),Le=Nn(vi.appendChild(Ie),"script"),Rt&&lr(Le),U)for(Qt=0;Ie=Le[Qt++];)wr.test(Ie.type||"")&&U.push(Ie)}return vi}var _n=/^([^.]*)(?:\.(.+)|)/;function fr(){return!0}function Jn(){return!1}function kn(q,_,U,W,pe,Ie){var Le,it;if(Ni(_)==="object"){typeof U!="string"&&(W=W||U,U=void 0);for(it in _)kn(q,it,U,W,_[it],Ie);return q}if(W==null&&pe==null?(pe=U,W=U=void 0):pe==null&&(typeof U=="string"?(pe=W,W=void 0):(pe=W,W=U,U=void 0)),pe===!1)pe=Jn;else if(!pe)return q;return Ie===1&&(Le=pe,pe=function(Rt){return he().off(Rt),Le.apply(this,arguments)},pe.guid=Le.guid||(Le.guid=he.guid++)),q.each(function(){he.event.add(this,_,pe,W,U)})}he.event={global:{},add:function(_,U,W,pe,Ie){var Le,it,ut,Rt,Qt,vi,Di,pi,Oi,Ot,Ci,ht=Mt.get(_);if(Li(_))for(W.handler&&(Le=W,W=Le.handler,Ie=Le.selector),Ie&&he.find.matchesSelector(Yi,Ie),W.guid||(W.guid=he.guid++),(Rt=ht.events)||(Rt=ht.events=Object.create(null)),(it=ht.handle)||(it=ht.handle=function(mt){return typeof he<"u"&&he.event.triggered!==mt.type?he.event.dispatch.apply(_,arguments):void 0}),U=(U||"").match(be)||[""],Qt=U.length;Qt--;)ut=_n.exec(U[Qt])||[],Oi=Ci=ut[1],Ot=(ut[2]||"").split(".").sort(),Oi&&(Di=he.event.special[Oi]||{},Oi=(Ie?Di.delegateType:Di.bindType)||Oi,Di=he.event.special[Oi]||{},vi=he.extend({type:Oi,origType:Ci,data:pe,handler:W,guid:W.guid,selector:Ie,needsContext:Ie&&he.expr.match.needsContext.test(Ie),namespace:Ot.join(".")},Le),(pi=Rt[Oi])||(pi=Rt[Oi]=[],pi.delegateCount=0,(!Di.setup||Di.setup.call(_,pe,Ot,it)===!1)&&_.addEventListener&&_.addEventListener(Oi,it)),Di.add&&(Di.add.call(_,vi),vi.handler.guid||(vi.handler.guid=W.guid)),Ie?pi.splice(pi.delegateCount++,0,vi):pi.push(vi),he.event.global[Oi]=!0)},remove:function(_,U,W,pe,Ie){var Le,it,ut,Rt,Qt,vi,Di,pi,Oi,Ot,Ci,ht=Mt.hasData(_)&&Mt.get(_);if(!(!ht||!(Rt=ht.events))){for(U=(U||"").match(be)||[""],Qt=U.length;Qt--;){if(ut=_n.exec(U[Qt])||[],Oi=Ci=ut[1],Ot=(ut[2]||"").split(".").sort(),!Oi){for(Oi in Rt)he.event.remove(_,Oi+U[Qt],W,pe,!0);continue}for(Di=he.event.special[Oi]||{},Oi=(pe?Di.delegateType:Di.bindType)||Oi,pi=Rt[Oi]||[],ut=ut[2]&&new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"),it=Le=pi.length;Le--;)vi=pi[Le],(Ie||Ci===vi.origType)&&(!W||W.guid===vi.guid)&&(!ut||ut.test(vi.namespace))&&(!pe||pe===vi.selector||pe==="**"&&vi.selector)&&(pi.splice(Le,1),vi.selector&&pi.delegateCount--,Di.remove&&Di.remove.call(_,vi));it&&!pi.length&&((!Di.teardown||Di.teardown.call(_,Ot,ht.handle)===!1)&&he.removeEvent(_,Oi,ht.handle),delete Rt[Oi])}he.isEmptyObject(Rt)&&Mt.remove(_,"handle events")}},dispatch:function(_){var U,W,pe,Ie,Le,it,ut=new Array(arguments.length),Rt=he.event.fix(_),Qt=(Mt.get(this,"events")||Object.create(null))[Rt.type]||[],vi=he.event.special[Rt.type]||{};for(ut[0]=Rt,U=1;U<arguments.length;U++)ut[U]=arguments[U];if(Rt.delegateTarget=this,!(vi.preDispatch&&vi.preDispatch.call(this,Rt)===!1)){for(it=he.event.handlers.call(this,Rt,Qt),U=0;(Ie=it[U++])&&!Rt.isPropagationStopped();)for(Rt.currentTarget=Ie.elem,W=0;(Le=Ie.handlers[W++])&&!Rt.isImmediatePropagationStopped();)(!Rt.rnamespace||Le.namespace===!1||Rt.rnamespace.test(Le.namespace))&&(Rt.handleObj=Le,Rt.data=Le.data,pe=((he.event.special[Le.origType]||{}).handle||Le.handler).apply(Ie.elem,ut),pe!==void 0&&(Rt.result=pe)===!1&&(Rt.preventDefault(),Rt.stopPropagation()));return vi.postDispatch&&vi.postDispatch.call(this,Rt),Rt.result}},handlers:function(_,U){var W,pe,Ie,Le,it,ut=[],Rt=U.delegateCount,Qt=_.target;if(Rt&&Qt.nodeType&&!(_.type==="click"&&_.button>=1)){for(;Qt!==this;Qt=Qt.parentNode||this)if(Qt.nodeType===1&&!(_.type==="click"&&Qt.disabled===!0)){for(Le=[],it={},W=0;W<Rt;W++)pe=U[W],Ie=pe.selector+" ",it[Ie]===void 0&&(it[Ie]=pe.needsContext?he(Ie,this).index(Qt)>-1:he.find(Ie,this,null,[Qt]).length),it[Ie]&&Le.push(pe);Le.length&&ut.push({elem:Qt,handlers:Le})}}return Qt=this,Rt<U.length&&ut.push({elem:Qt,handlers:U.slice(Rt)}),ut},addProp:function(_,U){Object.defineProperty(he.Event.prototype,_,{enumerable:!0,configurable:!0,get:ce(U)?function(){if(this.originalEvent)return U(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[_]},set:function(pe){Object.defineProperty(this,_,{enumerable:!0,configurable:!0,writable:!0,value:pe})}})},fix:function(_){return _[he.expando]?_:new he.Event(_)},special:{load:{noBubble:!0},click:{setup:function(_){var U=this||_;return fn.test(U.type)&&U.click&&yt(U,"input")&&mr(U,"click",!0),!1},trigger:function(_){var U=this||_;return fn.test(U.type)&&U.click&&yt(U,"input")&&mr(U,"click"),!0},_default:function(_){var U=_.target;return fn.test(U.type)&&U.click&&yt(U,"input")&&Mt.get(U,"click")||yt(U,"a")}},beforeunload:{postDispatch:function(_){_.result!==void 0&&_.originalEvent&&(_.originalEvent.returnValue=_.result)}}}};function mr(q,_,U){if(!U){Mt.get(q,_)===void 0&&he.event.add(q,_,fr);return}Mt.set(q,_,!1),he.event.add(q,_,{namespace:!1,handler:function(pe){var Ie,Le=Mt.get(this,_);if(pe.isTrigger&1&&this[_]){if(Le)(he.event.special[_]||{}).delegateType&&pe.stopPropagation();else if(Le=J.call(arguments),Mt.set(this,_,Le),this[_](),Ie=Mt.get(this,_),Mt.set(this,_,!1),Le!==Ie)return pe.stopImmediatePropagation(),pe.preventDefault(),Ie}else Le&&(Mt.set(this,_,he.event.trigger(Le[0],Le.slice(1),this)),pe.stopPropagation(),pe.isImmediatePropagationStopped=fr)}})}he.removeEvent=function(q,_,U){q.removeEventListener&&q.removeEventListener(_,U)},he.Event=function(q,_){if(!(this instanceof he.Event))return new he.Event(q,_);q&&q.type?(this.originalEvent=q,this.type=q.type,this.isDefaultPrevented=q.defaultPrevented||q.defaultPrevented===void 0&&q.returnValue===!1?fr:Jn,this.target=q.target&&q.target.nodeType===3?q.target.parentNode:q.target,this.currentTarget=q.currentTarget,this.relatedTarget=q.relatedTarget):this.type=q,_&&he.extend(this,_),this.timeStamp=q&&q.timeStamp||Date.now(),this[he.expando]=!0},he.Event.prototype={constructor:he.Event,isDefaultPrevented:Jn,isPropagationStopped:Jn,isImmediatePropagationStopped:Jn,isSimulated:!1,preventDefault:function(){var _=this.originalEvent;this.isDefaultPrevented=fr,_&&!this.isSimulated&&_.preventDefault()},stopPropagation:function(){var _=this.originalEvent;this.isPropagationStopped=fr,_&&!this.isSimulated&&_.stopPropagation()},stopImmediatePropagation:function(){var _=this.originalEvent;this.isImmediatePropagationStopped=fr,_&&!this.isSimulated&&_.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},he.event.addProp),he.each({focus:"focusin",blur:"focusout"},function(q,_){function U(W){if(Be.documentMode){var pe=Mt.get(this,"handle"),Ie=he.event.fix(W);Ie.type=W.type==="focusin"?"focus":"blur",Ie.isSimulated=!0,pe(W),Ie.target===Ie.currentTarget&&pe(Ie)}else he.event.simulate(_,W.target,he.event.fix(W))}he.event.special[q]={setup:function(){var pe;if(mr(this,q,!0),Be.documentMode)pe=Mt.get(this,_),pe||this.addEventListener(_,U),Mt.set(this,_,(pe||0)+1);else return!1},trigger:function(){return mr(this,q),!0},teardown:function(){var pe;if(Be.documentMode)pe=Mt.get(this,_)-1,pe?Mt.set(this,_,pe):(this.removeEventListener(_,U),Mt.remove(this,_));else return!1},_default:function(pe){return Mt.get(pe.target,q)},delegateType:_},he.event.special[_]={setup:function(){var pe=this.ownerDocument||this.document||this,Ie=Be.documentMode?this:pe,Le=Mt.get(Ie,_);Le||(Be.documentMode?this.addEventListener(_,U):pe.addEventListener(q,U,!0)),Mt.set(Ie,_,(Le||0)+1)},teardown:function(){var pe=this.ownerDocument||this.document||this,Ie=Be.documentMode?this:pe,Le=Mt.get(Ie,_)-1;Le?Mt.set(Ie,_,Le):(Be.documentMode?this.removeEventListener(_,U):pe.removeEventListener(q,U,!0),Mt.remove(Ie,_))}}}),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(q,_){he.event.special[q]={delegateType:_,bindType:_,handle:function(W){var pe,Ie=this,Le=W.relatedTarget,it=W.handleObj;return(!Le||Le!==Ie&&!he.contains(Ie,Le))&&(W.type=it.origType,pe=it.handler.apply(this,arguments),W.type=_),pe}}}),he.fn.extend({on:function(_,U,W,pe){return kn(this,_,U,W,pe)},one:function(_,U,W,pe){return kn(this,_,U,W,pe,1)},off:function(_,U,W){var pe,Ie;if(_&&_.preventDefault&&_.handleObj)return pe=_.handleObj,he(_.delegateTarget).off(pe.namespace?pe.origType+"."+pe.namespace:pe.origType,pe.selector,pe.handler),this;if(Ni(_)==="object"){for(Ie in _)this.off(Ie,U,_[Ie]);return this}return(U===!1||typeof U=="function")&&(W=U,U=void 0),W===!1&&(W=Jn),this.each(function(){he.event.remove(this,_,W,U)})}});var Yn=/<script|<style|<link/i,Dr=/checked\s*(?:[^=]|=\s*.checked.)/i,ta=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Vr(q,_){return yt(q,"table")&&yt(_.nodeType!==11?_:_.firstChild,"tr")&&he(q).children("tbody")[0]||q}function jr(q){return q.type=(q.getAttribute("type")!==null)+"/"+q.type,q}function ma(q){return(q.type||"").slice(0,5)==="true/"?q.type=q.type.slice(5):q.removeAttribute("type"),q}function ca(q,_){var U,W,pe,Ie,Le,it,ut;if(_.nodeType===1){if(Mt.hasData(q)&&(Ie=Mt.get(q),ut=Ie.events,ut)){Mt.remove(_,"handle events");for(pe in ut)for(U=0,W=ut[pe].length;U<W;U++)he.event.add(_,pe,ut[pe][U])}Nt.hasData(q)&&(Le=Nt.access(q),it=he.extend({},Le),Nt.set(_,it))}}function Ta(q,_){var U=_.nodeName.toLowerCase();U==="input"&&fn.test(q.type)?_.checked=q.checked:(U==="input"||U==="textarea")&&(_.defaultValue=q.defaultValue)}function ir(q,_,U,W){_=De(_);var pe,Ie,Le,it,ut,Rt,Qt=0,vi=q.length,Di=vi-1,pi=_[0],Oi=ce(pi);if(Oi||vi>1&&typeof pi=="string"&&!ke.checkClone&&Dr.test(pi))return q.each(function(Ot){var Ci=q.eq(Ot);Oi&&(_[0]=pi.call(this,Ot,Ci.html())),ir(Ci,_,U,W)});if(vi&&(pe=Ir(_,q[0].ownerDocument,!1,q,W),Ie=pe.firstChild,pe.childNodes.length===1&&(pe=Ie),Ie||W)){for(Le=he.map(Nn(pe,"script"),jr),it=Le.length;Qt<vi;Qt++)ut=pe,Qt!==Di&&(ut=he.clone(ut,!0,!0),it&&he.merge(Le,Nn(ut,"script"))),U.call(q[Qt],ut,Qt);if(it)for(Rt=Le[Le.length-1].ownerDocument,he.map(Le,ma),Qt=0;Qt<it;Qt++)ut=Le[Qt],wr.test(ut.type||"")&&!Mt.access(ut,"globalEval")&&he.contains(Rt,ut)&&(ut.src&&(ut.type||"").toLowerCase()!=="module"?he._evalUrl&&!ut.noModule&&he._evalUrl(ut.src,{nonce:ut.nonce||ut.getAttribute("nonce")},Rt):dt(ut.textContent.replace(ta,""),ut,Rt))}return q}function Tt(q,_,U){for(var W,pe=_?he.filter(_,q):q,Ie=0;(W=pe[Ie])!=null;Ie++)!U&&W.nodeType===1&&he.cleanData(Nn(W)),W.parentNode&&(U&&bn(W)&&lr(Nn(W,"script")),W.parentNode.removeChild(W));return q}he.extend({htmlPrefilter:function(_){return _},clone:function(_,U,W){var pe,Ie,Le,it,ut=_.cloneNode(!0),Rt=bn(_);if(!ke.noCloneChecked&&(_.nodeType===1||_.nodeType===11)&&!he.isXMLDoc(_))for(it=Nn(ut),Le=Nn(_),pe=0,Ie=Le.length;pe<Ie;pe++)Ta(Le[pe],it[pe]);if(U)if(W)for(Le=Le||Nn(_),it=it||Nn(ut),pe=0,Ie=Le.length;pe<Ie;pe++)ca(Le[pe],it[pe]);else ca(_,ut);return it=Nn(ut,"script"),it.length>0&&lr(it,!Rt&&Nn(_,"script")),ut},cleanData:function(_){for(var U,W,pe,Ie=he.event.special,Le=0;(W=_[Le])!==void 0;Le++)if(Li(W)){if(U=W[Mt.expando]){if(U.events)for(pe in U.events)Ie[pe]?he.event.remove(W,pe):he.removeEvent(W,pe,U.handle);W[Mt.expando]=void 0}W[Nt.expando]&&(W[Nt.expando]=void 0)}}}),he.fn.extend({detach:function(_){return Tt(this,_,!0)},remove:function(_){return Tt(this,_)},text:function(_){return nt(this,function(U){return U===void 0?he.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=U)})},null,_,arguments.length)},append:function(){return ir(this,arguments,function(_){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var U=Vr(this,_);U.appendChild(_)}})},prepend:function(){return ir(this,arguments,function(_){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var U=Vr(this,_);U.insertBefore(_,U.firstChild)}})},before:function(){return ir(this,arguments,function(_){this.parentNode&&this.parentNode.insertBefore(_,this)})},after:function(){return ir(this,arguments,function(_){this.parentNode&&this.parentNode.insertBefore(_,this.nextSibling)})},empty:function(){for(var _,U=0;(_=this[U])!=null;U++)_.nodeType===1&&(he.cleanData(Nn(_,!1)),_.textContent="");return this},clone:function(_,U){return _=_??!1,U=U??_,this.map(function(){return he.clone(this,_,U)})},html:function(_){return nt(this,function(U){var W=this[0]||{},pe=0,Ie=this.length;if(U===void 0&&W.nodeType===1)return W.innerHTML;if(typeof U=="string"&&!Yn.test(U)&&!tr[(Cn.exec(U)||["",""])[1].toLowerCase()]){U=he.htmlPrefilter(U);try{for(;pe<Ie;pe++)W=this[pe]||{},W.nodeType===1&&(he.cleanData(Nn(W,!1)),W.innerHTML=U);W=0}catch{}}W&&this.empty().append(U)},null,_,arguments.length)},replaceWith:function(){var _=[];return ir(this,arguments,function(U){var W=this.parentNode;he.inArray(this,_)<0&&(he.cleanData(Nn(this)),W&&W.replaceChild(U,this))},_)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(q,_){he.fn[q]=function(U){for(var W,pe=[],Ie=he(U),Le=Ie.length-1,it=0;it<=Le;it++)W=it===Le?this:this.clone(!0),he(Ie[it])[_](W),Ye.apply(pe,W.get());return this.pushStack(pe)}});var Gr=new RegExp("^("+Gi+")(?!px)[a-z%]+$","i"),Ar=/^--/,oe=function(_){var U=_.ownerDocument.defaultView;return(!U||!U.opener)&&(U=fe),U.getComputedStyle(_)},si=function(_,U,W){var pe,Ie,Le={};for(Ie in U)Le[Ie]=_.style[Ie],_.style[Ie]=U[Ie];pe=W.call(_);for(Ie in U)_.style[Ie]=Le[Ie];return pe},Ge=new RegExp(Zi.join("|"),"i");(function(){function q(){if(Rt){ut.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Rt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Yi.appendChild(ut).appendChild(Rt);var Qt=fe.getComputedStyle(Rt);U=Qt.top!=="1%",it=_(Qt.marginLeft)===12,Rt.style.right="60%",Ie=_(Qt.right)===36,W=_(Qt.width)===36,Rt.style.position="absolute",pe=_(Rt.offsetWidth/3)===12,Yi.removeChild(ut),Rt=null}}function _(Qt){return Math.round(parseFloat(Qt))}var U,W,pe,Ie,Le,it,ut=Be.createElement("div"),Rt=Be.createElement("div");Rt.style&&(Rt.style.backgroundClip="content-box",Rt.cloneNode(!0).style.backgroundClip="",ke.clearCloneStyle=Rt.style.backgroundClip==="content-box",he.extend(ke,{boxSizingReliable:function(){return q(),W},pixelBoxStyles:function(){return q(),Ie},pixelPosition:function(){return q(),U},reliableMarginLeft:function(){return q(),it},scrollboxSize:function(){return q(),pe},reliableTrDimensions:function(){var vi,Di,pi,Oi;return Le==null&&(vi=Be.createElement("table"),Di=Be.createElement("tr"),pi=Be.createElement("div"),vi.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Di.style.cssText="box-sizing:content-box;border:1px solid",Di.style.height="1px",pi.style.height="9px",pi.style.display="block",Yi.appendChild(vi).appendChild(Di).appendChild(pi),Oi=fe.getComputedStyle(Di),Le=parseInt(Oi.height,10)+parseInt(Oi.borderTopWidth,10)+parseInt(Oi.borderBottomWidth,10)===Di.offsetHeight,Yi.removeChild(vi)),Le}}))})();function u(q,_,U){var W,pe,Ie,Le,it=Ar.test(_),ut=q.style;return U=U||oe(q),U&&(Le=U.getPropertyValue(_)||U[_],it&&Le&&(Le=Le.replace(Et,"$1")||void 0),Le===""&&!bn(q)&&(Le=he.style(q,_)),!ke.pixelBoxStyles()&&Gr.test(Le)&&Ge.test(_)&&(W=ut.width,pe=ut.minWidth,Ie=ut.maxWidth,ut.minWidth=ut.maxWidth=ut.width=Le,Le=U.width,ut.width=W,ut.minWidth=pe,ut.maxWidth=Ie)),Le!==void 0?Le+"":Le}function s(q,_){return{get:function(){if(q()){delete this.get;return}return(this.get=_).apply(this,arguments)}}}var e=["Webkit","Moz","ms"],r=Be.createElement("div").style,b={};function A(q){for(var _=q[0].toUpperCase()+q.slice(1),U=e.length;U--;)if(q=e[U]+_,q in r)return q}function Ce(q){var _=he.cssProps[q]||b[q];return _||(q in r?q:b[q]=A(q)||q)}var Ae=/^(none|table(?!-c[ea]).+)/,zt={position:"absolute",visibility:"hidden",display:"block"},z={letterSpacing:"0",fontWeight:"400"};function H(q,_,U){var W=nn.exec(_);return W?Math.max(0,W[2]-(U||0))+(W[3]||"px"):_}function K(q,_,U,W,pe,Ie){var Le=_==="width"?1:0,it=0,ut=0,Rt=0;if(U===(W?"border":"content"))return 0;for(;Le<4;Le+=2)U==="margin"&&(Rt+=he.css(q,U+Zi[Le],!0,pe)),W?(U==="content"&&(ut-=he.css(q,"padding"+Zi[Le],!0,pe)),U!=="margin"&&(ut-=he.css(q,"border"+Zi[Le]+"Width",!0,pe))):(ut+=he.css(q,"padding"+Zi[Le],!0,pe),U!=="padding"?ut+=he.css(q,"border"+Zi[Le]+"Width",!0,pe):it+=he.css(q,"border"+Zi[Le]+"Width",!0,pe));return!W&&Ie>=0&&(ut+=Math.max(0,Math.ceil(q["offset"+_[0].toUpperCase()+_.slice(1)]-Ie-ut-it-.5))||0),ut+Rt}function le(q,_,U){var W=oe(q),pe=!ke.boxSizingReliable()||U,Ie=pe&&he.css(q,"boxSizing",!1,W)==="border-box",Le=Ie,it=u(q,_,W),ut="offset"+_[0].toUpperCase()+_.slice(1);if(Gr.test(it)){if(!U)return it;it="auto"}return(!ke.boxSizingReliable()&&Ie||!ke.reliableTrDimensions()&&yt(q,"tr")||it==="auto"||!parseFloat(it)&&he.css(q,"display",!1,W)==="inline")&&q.getClientRects().length&&(Ie=he.css(q,"boxSizing",!1,W)==="border-box",Le=ut in q,Le&&(it=q[ut])),it=parseFloat(it)||0,it+K(q,_,U||(Ie?"border":"content"),Le,W,it)+"px"}he.extend({cssHooks:{opacity:{get:function(_,U){if(U){var W=u(_,"opacity");return W===""?"1":W}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(_,U,W,pe){if(!(!_||_.nodeType===3||_.nodeType===8||!_.style)){var Ie,Le,it,ut=ri(U),Rt=Ar.test(U),Qt=_.style;if(Rt||(U=Ce(ut)),it=he.cssHooks[U]||he.cssHooks[ut],W!==void 0){if(Le=Ni(W),Le==="string"&&(Ie=nn.exec(W))&&Ie[1]&&(W=un(_,U,Ie),Le="number"),W==null||W!==W)return;Le==="number"&&!Rt&&(W+=Ie&&Ie[3]||(he.cssNumber[ut]?"":"px")),!ke.clearCloneStyle&&W===""&&U.indexOf("background")===0&&(Qt[U]="inherit"),(!it||!("set"in it)||(W=it.set(_,W,pe))!==void 0)&&(Rt?Qt.setProperty(U,W):Qt[U]=W)}else return it&&"get"in it&&(Ie=it.get(_,!1,pe))!==void 0?Ie:Qt[U]}},css:function(_,U,W,pe){var Ie,Le,it,ut=ri(U),Rt=Ar.test(U);return Rt||(U=Ce(ut)),it=he.cssHooks[U]||he.cssHooks[ut],it&&"get"in it&&(Ie=it.get(_,!0,W)),Ie===void 0&&(Ie=u(_,U,pe)),Ie==="normal"&&U in z&&(Ie=z[U]),W===""||W?(Le=parseFloat(Ie),W===!0||isFinite(Le)?Le||0:Ie):Ie}}),he.each(["height","width"],function(q,_){he.cssHooks[_]={get:function(W,pe,Ie){if(pe)return Ae.test(he.css(W,"display"))&&(!W.getClientRects().length||!W.getBoundingClientRect().width)?si(W,zt,function(){return le(W,_,Ie)}):le(W,_,Ie)},set:function(W,pe,Ie){var Le,it=oe(W),ut=!ke.scrollboxSize()&&it.position==="absolute",Rt=ut||Ie,Qt=Rt&&he.css(W,"boxSizing",!1,it)==="border-box",vi=Ie?K(W,_,Ie,Qt,it):0;return Qt&&ut&&(vi-=Math.ceil(W["offset"+_[0].toUpperCase()+_.slice(1)]-parseFloat(it[_])-K(W,_,"border",!1,it)-.5)),vi&&(Le=nn.exec(pe))&&(Le[3]||"px")!=="px"&&(W.style[_]=pe,pe=he.css(W,_)),H(W,pe,vi)}}}),he.cssHooks.marginLeft=s(ke.reliableMarginLeft,function(q,_){if(_)return(parseFloat(u(q,"marginLeft"))||q.getBoundingClientRect().left-si(q,{marginLeft:0},function(){return q.getBoundingClientRect().left}))+"px"}),he.each({margin:"",padding:"",border:"Width"},function(q,_){he.cssHooks[q+_]={expand:function(W){for(var pe=0,Ie={},Le=typeof W=="string"?W.split(" "):[W];pe<4;pe++)Ie[q+Zi[pe]+_]=Le[pe]||Le[pe-2]||Le[0];return Ie}},q!=="margin"&&(he.cssHooks[q+_].set=H)}),he.fn.extend({css:function(_,U){return nt(this,function(W,pe,Ie){var Le,it,ut={},Rt=0;if(Array.isArray(pe)){for(Le=oe(W),it=pe.length;Rt<it;Rt++)ut[pe[Rt]]=he.css(W,pe[Rt],!1,Le);return ut}return Ie!==void 0?he.style(W,pe,Ie):he.css(W,pe)},_,U,arguments.length>1)}});function Xe(q,_,U,W,pe){return new Xe.prototype.init(q,_,U,W,pe)}he.Tween=Xe,Xe.prototype={constructor:Xe,init:function(_,U,W,pe,Ie,Le){this.elem=_,this.prop=W,this.easing=Ie||he.easing._default,this.options=U,this.start=this.now=this.cur(),this.end=pe,this.unit=Le||(he.cssNumber[W]?"":"px")},cur:function(){var _=Xe.propHooks[this.prop];return _&&_.get?_.get(this):Xe.propHooks._default.get(this)},run:function(_){var U,W=Xe.propHooks[this.prop];return this.options.duration?this.pos=U=he.easing[this.easing](_,this.options.duration*_,0,1,this.options.duration):this.pos=U=_,this.now=(this.end-this.start)*U+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),W&&W.set?W.set(this):Xe.propHooks._default.set(this),this}},Xe.prototype.init.prototype=Xe.prototype,Xe.propHooks={_default:{get:function(_){var U;return _.elem.nodeType!==1||_.elem[_.prop]!=null&&_.elem.style[_.prop]==null?_.elem[_.prop]:(U=he.css(_.elem,_.prop,""),!U||U==="auto"?0:U)},set:function(_){he.fx.step[_.prop]?he.fx.step[_.prop](_):_.elem.nodeType===1&&(he.cssHooks[_.prop]||_.elem.style[Ce(_.prop)]!=null)?he.style(_.elem,_.prop,_.now+_.unit):_.elem[_.prop]=_.now}}},Xe.propHooks.scrollTop=Xe.propHooks.scrollLeft={set:function(_){_.elem.nodeType&&_.elem.parentNode&&(_.elem[_.prop]=_.now)}},he.easing={linear:function(_){return _},swing:function(_){return .5-Math.cos(_*Math.PI)/2},_default:"swing"},he.fx=Xe.prototype.init,he.fx.step={};var vt,bt,Ht=/^(?:toggle|show|hide)$/,gi=/queueHooks$/;function Hi(){bt&&(Be.hidden===!1&&fe.requestAnimationFrame?fe.requestAnimationFrame(Hi):fe.setTimeout(Hi,he.fx.interval),he.fx.tick())}function hi(){return fe.setTimeout(function(){vt=void 0}),vt=Date.now()}function Ai(q,_){var U,W=0,pe={height:q};for(_=_?1:0;W<4;W+=2-_)U=Zi[W],pe["margin"+U]=pe["padding"+U]=q;return _&&(pe.opacity=pe.width=q),pe}function fi(q,_,U){for(var W,pe=(k.tweeners[_]||[]).concat(k.tweeners["*"]),Ie=0,Le=pe.length;Ie<Le;Ie++)if(W=pe[Ie].call(U,_,q))return W}function D(q,_,U){var W,pe,Ie,Le,it,ut,Rt,Qt,vi="width"in _||"height"in _,Di=this,pi={},Oi=q.style,Ot=q.nodeType&&jn(q),Ci=Mt.get(q,"fxshow");U.queue||(Le=he._queueHooks(q,"fx"),Le.unqueued==null&&(Le.unqueued=0,it=Le.empty.fire,Le.empty.fire=function(){Le.unqueued||it()}),Le.unqueued++,Di.always(function(){Di.always(function(){Le.unqueued--,he.queue(q,"fx").length||Le.empty.fire()})}));for(W in _)if(pe=_[W],Ht.test(pe)){if(delete _[W],Ie=Ie||pe==="toggle",pe===(Ot?"hide":"show"))if(pe==="show"&&Ci&&Ci[W]!==void 0)Ot=!0;else continue;pi[W]=Ci&&Ci[W]||he.style(q,W)}if(ut=!he.isEmptyObject(_),!(!ut&&he.isEmptyObject(pi))){vi&&q.nodeType===1&&(U.overflow=[Oi.overflow,Oi.overflowX,Oi.overflowY],Rt=Ci&&Ci.display,Rt==null&&(Rt=Mt.get(q,"display")),Qt=he.css(q,"display"),Qt==="none"&&(Rt?Qt=Rt:(yn([q],!0),Rt=q.style.display||Rt,Qt=he.css(q,"display"),yn([q]))),(Qt==="inline"||Qt==="inline-block"&&Rt!=null)&&he.css(q,"float")==="none"&&(ut||(Di.done(function(){Oi.display=Rt}),Rt==null&&(Qt=Oi.display,Rt=Qt==="none"?"":Qt)),Oi.display="inline-block")),U.overflow&&(Oi.overflow="hidden",Di.always(function(){Oi.overflow=U.overflow[0],Oi.overflowX=U.overflow[1],Oi.overflowY=U.overflow[2]})),ut=!1;for(W in pi)ut||(Ci?"hidden"in Ci&&(Ot=Ci.hidden):Ci=Mt.access(q,"fxshow",{display:Rt}),Ie&&(Ci.hidden=!Ot),Ot&&yn([q],!0),Di.done(function(){Ot||yn([q]),Mt.remove(q,"fxshow");for(W in pi)he.style(q,W,pi[W])})),ut=fi(Ot?Ci[W]:0,W,Di),W in Ci||(Ci[W]=ut.start,Ot&&(ut.end=ut.start,ut.start=0))}}function h(q,_){var U,W,pe,Ie,Le;for(U in q)if(W=ri(U),pe=_[W],Ie=q[U],Array.isArray(Ie)&&(pe=Ie[1],Ie=q[U]=Ie[0]),U!==W&&(q[W]=Ie,delete q[U]),Le=he.cssHooks[W],Le&&"expand"in Le){Ie=Le.expand(Ie),delete q[W];for(U in Ie)U in q||(q[U]=Ie[U],_[U]=pe)}else _[W]=pe}function k(q,_,U){var W,pe,Ie=0,Le=k.prefilters.length,it=he.Deferred().always(function(){delete ut.elem}),ut=function(){if(pe)return!1;for(var Di=vt||hi(),pi=Math.max(0,Rt.startTime+Rt.duration-Di),Oi=pi/Rt.duration||0,Ot=1-Oi,Ci=0,ht=Rt.tweens.length;Ci<ht;Ci++)Rt.tweens[Ci].run(Ot);return it.notifyWith(q,[Rt,Ot,pi]),Ot<1&&ht?pi:(ht||it.notifyWith(q,[Rt,1,0]),it.resolveWith(q,[Rt]),!1)},Rt=it.promise({elem:q,props:he.extend({},_),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},U),originalProperties:_,originalOptions:U,startTime:vt||hi(),duration:U.duration,tweens:[],createTween:function(Di,pi){var Oi=he.Tween(q,Rt.opts,Di,pi,Rt.opts.specialEasing[Di]||Rt.opts.easing);return Rt.tweens.push(Oi),Oi},stop:function(Di){var pi=0,Oi=Di?Rt.tweens.length:0;if(pe)return this;for(pe=!0;pi<Oi;pi++)Rt.tweens[pi].run(1);return Di?(it.notifyWith(q,[Rt,1,0]),it.resolveWith(q,[Rt,Di])):it.rejectWith(q,[Rt,Di]),this}}),Qt=Rt.props;for(h(Qt,Rt.opts.specialEasing);Ie<Le;Ie++)if(W=k.prefilters[Ie].call(Rt,q,Qt,Rt.opts),W)return ce(W.stop)&&(he._queueHooks(Rt.elem,Rt.opts.queue).stop=W.stop.bind(W)),W;return he.map(Qt,fi,Rt),ce(Rt.opts.start)&&Rt.opts.start.call(q,Rt),Rt.progress(Rt.opts.progress).done(Rt.opts.done,Rt.opts.complete).fail(Rt.opts.fail).always(Rt.opts.always),he.fx.timer(he.extend(ut,{elem:q,anim:Rt,queue:Rt.opts.queue})),Rt}he.Animation=he.extend(k,{tweeners:{"*":[function(q,_){var U=this.createTween(q,_);return un(U.elem,q,nn.exec(_),U),U}]},tweener:function(_,U){ce(_)?(U=_,_=["*"]):_=_.match(be);for(var W,pe=0,Ie=_.length;pe<Ie;pe++)W=_[pe],k.tweeners[W]=k.tweeners[W]||[],k.tweeners[W].unshift(U)},prefilters:[D],prefilter:function(_,U){U?k.prefilters.unshift(_):k.prefilters.push(_)}}),he.speed=function(q,_,U){var W=q&&Ni(q)==="object"?he.extend({},q):{complete:U||!U&&_||ce(q)&&q,duration:q,easing:U&&_||_&&!ce(_)&&_};return he.fx.off?W.duration=0:typeof W.duration!="number"&&(W.duration in he.fx.speeds?W.duration=he.fx.speeds[W.duration]:W.duration=he.fx.speeds._default),(W.queue==null||W.queue===!0)&&(W.queue="fx"),W.old=W.complete,W.complete=function(){ce(W.old)&&W.old.call(this),W.queue&&he.dequeue(this,W.queue)},W},he.fn.extend({fadeTo:function(_,U,W,pe){return this.filter(jn).css("opacity",0).show().end().animate({opacity:U},_,W,pe)},animate:function(_,U,W,pe){var Ie=he.isEmptyObject(_),Le=he.speed(U,W,pe),it=function(){var Rt=k(this,he.extend({},_),Le);(Ie||Mt.get(this,"finish"))&&Rt.stop(!0)};return it.finish=it,Ie||Le.queue===!1?this.each(it):this.queue(Le.queue,it)},stop:function(_,U,W){var pe=function(Le){var it=Le.stop;delete Le.stop,it(W)};return typeof _!="string"&&(W=U,U=_,_=void 0),U&&this.queue(_||"fx",[]),this.each(function(){var Ie=!0,Le=_!=null&&_+"queueHooks",it=he.timers,ut=Mt.get(this);if(Le)ut[Le]&&ut[Le].stop&&pe(ut[Le]);else for(Le in ut)ut[Le]&&ut[Le].stop&&gi.test(Le)&&pe(ut[Le]);for(Le=it.length;Le--;)it[Le].elem===this&&(_==null||it[Le].queue===_)&&(it[Le].anim.stop(W),Ie=!1,it.splice(Le,1));(Ie||!W)&&he.dequeue(this,_)})},finish:function(_){return _!==!1&&(_=_||"fx"),this.each(function(){var U,W=Mt.get(this),pe=W[_+"queue"],Ie=W[_+"queueHooks"],Le=he.timers,it=pe?pe.length:0;for(W.finish=!0,he.queue(this,_,[]),Ie&&Ie.stop&&Ie.stop.call(this,!0),U=Le.length;U--;)Le[U].elem===this&&Le[U].queue===_&&(Le[U].anim.stop(!0),Le.splice(U,1));for(U=0;U<it;U++)pe[U]&&pe[U].finish&&pe[U].finish.call(this);delete W.finish})}}),he.each(["toggle","show","hide"],function(q,_){var U=he.fn[_];he.fn[_]=function(W,pe,Ie){return W==null||typeof W=="boolean"?U.apply(this,arguments):this.animate(Ai(_,!0),W,pe,Ie)}}),he.each({slideDown:Ai("show"),slideUp:Ai("hide"),slideToggle:Ai("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(q,_){he.fn[q]=function(U,W,pe){return this.animate(_,U,W,pe)}}),he.timers=[],he.fx.tick=function(){var q,_=0,U=he.timers;for(vt=Date.now();_<U.length;_++)q=U[_],!q()&&U[_]===q&&U.splice(_--,1);U.length||he.fx.stop(),vt=void 0},he.fx.timer=function(q){he.timers.push(q),he.fx.start()},he.fx.interval=13,he.fx.start=function(){bt||(bt=!0,Hi())},he.fx.stop=function(){bt=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(q,_){return q=he.fx&&he.fx.speeds[q]||q,_=_||"fx",this.queue(_,function(U,W){var pe=fe.setTimeout(U,q);W.stop=function(){fe.clearTimeout(pe)}})},function(){var q=Be.createElement("input"),_=Be.createElement("select"),U=_.appendChild(Be.createElement("option"));q.type="checkbox",ke.checkOn=q.value!=="",ke.optSelected=U.selected,q=Be.createElement("input"),q.value="t",q.type="radio",ke.radioValue=q.value==="t"}();var V,ve=he.expr.attrHandle;he.fn.extend({attr:function(_,U){return nt(this,he.attr,_,U,arguments.length>1)},removeAttr:function(_){return this.each(function(){he.removeAttr(this,_)})}}),he.extend({attr:function(_,U,W){var pe,Ie,Le=_.nodeType;if(!(Le===3||Le===8||Le===2)){if(typeof _.getAttribute>"u")return he.prop(_,U,W);if((Le!==1||!he.isXMLDoc(_))&&(Ie=he.attrHooks[U.toLowerCase()]||(he.expr.match.bool.test(U)?V:void 0)),W!==void 0){if(W===null){he.removeAttr(_,U);return}return Ie&&"set"in Ie&&(pe=Ie.set(_,W,U))!==void 0?pe:(_.setAttribute(U,W+""),W)}return Ie&&"get"in Ie&&(pe=Ie.get(_,U))!==null?pe:(pe=he.find.attr(_,U),pe??void 0)}},attrHooks:{type:{set:function(_,U){if(!ke.radioValue&&U==="radio"&&yt(_,"input")){var W=_.value;return _.setAttribute("type",U),W&&(_.value=W),U}}}},removeAttr:function(_,U){var W,pe=0,Ie=U&&U.match(be);if(Ie&&_.nodeType===1)for(;W=Ie[pe++];)_.removeAttribute(W)}}),V={set:function(_,U,W){return U===!1?he.removeAttr(_,W):_.setAttribute(W,W),W}},he.each(he.expr.match.bool.source.match(/\w+/g),function(q,_){var U=ve[_]||he.find.attr;ve[_]=function(W,pe,Ie){var Le,it,ut=pe.toLowerCase();return Ie||(it=ve[ut],ve[ut]=Le,Le=U(W,pe,Ie)!=null?ut:null,ve[ut]=it),Le}});var je=/^(?:input|select|textarea|button)$/i,We=/^(?:a|area)$/i;he.fn.extend({prop:function(_,U){return nt(this,he.prop,_,U,arguments.length>1)},removeProp:function(_){return this.each(function(){delete this[he.propFix[_]||_]})}}),he.extend({prop:function(_,U,W){var pe,Ie,Le=_.nodeType;if(!(Le===3||Le===8||Le===2))return(Le!==1||!he.isXMLDoc(_))&&(U=he.propFix[U]||U,Ie=he.propHooks[U]),W!==void 0?Ie&&"set"in Ie&&(pe=Ie.set(_,W,U))!==void 0?pe:_[U]=W:Ie&&"get"in Ie&&(pe=Ie.get(_,U))!==null?pe:_[U]},propHooks:{tabIndex:{get:function(_){var U=he.find.attr(_,"tabindex");return U?parseInt(U,10):je.test(_.nodeName)||We.test(_.nodeName)&&_.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ke.optSelected||(he.propHooks.selected={get:function(_){var U=_.parentNode;return U&&U.parentNode&&U.parentNode.selectedIndex,null},set:function(_){var U=_.parentNode;U&&(U.selectedIndex,U.parentNode&&U.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this});function ct(q){var _=q.match(be)||[];return _.join(" ")}function gt(q){return q.getAttribute&&q.getAttribute("class")||""}function It(q){return Array.isArray(q)?q:typeof q=="string"?q.match(be)||[]:[]}he.fn.extend({addClass:function(_){var U,W,pe,Ie,Le,it;return ce(_)?this.each(function(ut){he(this).addClass(_.call(this,ut,gt(this)))}):(U=It(_),U.length?this.each(function(){if(pe=gt(this),W=this.nodeType===1&&" "+ct(pe)+" ",W){for(Le=0;Le<U.length;Le++)Ie=U[Le],W.indexOf(" "+Ie+" ")<0&&(W+=Ie+" ");it=ct(W),pe!==it&&this.setAttribute("class",it)}}):this)},removeClass:function(_){var U,W,pe,Ie,Le,it;return ce(_)?this.each(function(ut){he(this).removeClass(_.call(this,ut,gt(this)))}):arguments.length?(U=It(_),U.length?this.each(function(){if(pe=gt(this),W=this.nodeType===1&&" "+ct(pe)+" ",W){for(Le=0;Le<U.length;Le++)for(Ie=U[Le];W.indexOf(" "+Ie+" ")>-1;)W=W.replace(" "+Ie+" "," ");it=ct(W),pe!==it&&this.setAttribute("class",it)}}):this):this.attr("class","")},toggleClass:function(_,U){var W,pe,Ie,Le,it=Ni(_),ut=it==="string"||Array.isArray(_);return ce(_)?this.each(function(Rt){he(this).toggleClass(_.call(this,Rt,gt(this),U),U)}):typeof U=="boolean"&&ut?U?this.addClass(_):this.removeClass(_):(W=It(_),this.each(function(){if(ut)for(Le=he(this),Ie=0;Ie<W.length;Ie++)pe=W[Ie],Le.hasClass(pe)?Le.removeClass(pe):Le.addClass(pe);else(_===void 0||it==="boolean")&&(pe=gt(this),pe&&Mt.set(this,"__className__",pe),this.setAttribute&&this.setAttribute("class",pe||_===!1?"":Mt.get(this,"__className__")||""))}))},hasClass:function(_){var U,W,pe=0;for(U=" "+_+" ";W=this[pe++];)if(W.nodeType===1&&(" "+ct(gt(W))+" ").indexOf(U)>-1)return!0;return!1}});var xi=/\r/g;he.fn.extend({val:function(_){var U,W,pe,Ie=this[0];return arguments.length?(pe=ce(_),this.each(function(Le){var it;this.nodeType===1&&(pe?it=_.call(this,Le,he(this).val()):it=_,it==null?it="":typeof it=="number"?it+="":Array.isArray(it)&&(it=he.map(it,function(ut){return ut==null?"":ut+""})),U=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()],(!U||!("set"in U)||U.set(this,it,"value")===void 0)&&(this.value=it))})):Ie?(U=he.valHooks[Ie.type]||he.valHooks[Ie.nodeName.toLowerCase()],U&&"get"in U&&(W=U.get(Ie,"value"))!==void 0?W:(W=Ie.value,typeof W=="string"?W.replace(xi,""):W??"")):void 0}}),he.extend({valHooks:{option:{get:function(_){var U=he.find.attr(_,"value");return U??ct(he.text(_))}},select:{get:function(_){var U,W,pe,Ie=_.options,Le=_.selectedIndex,it=_.type==="select-one",ut=it?null:[],Rt=it?Le+1:Ie.length;for(Le<0?pe=Rt:pe=it?Le:0;pe<Rt;pe++)if(W=Ie[pe],(W.selected||pe===Le)&&!W.disabled&&(!W.parentNode.disabled||!yt(W.parentNode,"optgroup"))){if(U=he(W).val(),it)return U;ut.push(U)}return ut},set:function(_,U){for(var W,pe,Ie=_.options,Le=he.makeArray(U),it=Ie.length;it--;)pe=Ie[it],(pe.selected=he.inArray(he.valHooks.option.get(pe),Le)>-1)&&(W=!0);return W||(_.selectedIndex=-1),Le}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(_,U){if(Array.isArray(U))return _.checked=he.inArray(he(_).val(),U)>-1}},ke.checkOn||(he.valHooks[this].get=function(q){return q.getAttribute("value")===null?"on":q.value})});var yi=fe.location,Ji={guid:Date.now()},ki=/\?/;he.parseXML=function(q){var _,U;if(!q||typeof q!="string")return null;try{_=new fe.DOMParser().parseFromString(q,"text/xml")}catch{}return U=_&&_.getElementsByTagName("parsererror")[0],(!_||U)&&he.error("Invalid XML: "+(U?he.map(U.childNodes,function(W){return W.textContent}).join(`
`):q)),_};var en=/^(?:focusinfocus|focusoutblur)$/,In=function(_){_.stopPropagation()};he.extend(he.event,{trigger:function(_,U,W,pe){var Ie,Le,it,ut,Rt,Qt,vi,Di,pi=[W||Be],Oi=G.call(_,"type")?_.type:_,Ot=G.call(_,"namespace")?_.namespace.split("."):[];if(Le=Di=it=W=W||Be,!(W.nodeType===3||W.nodeType===8)&&!en.test(Oi+he.event.triggered)&&(Oi.indexOf(".")>-1&&(Ot=Oi.split("."),Oi=Ot.shift(),Ot.sort()),Rt=Oi.indexOf(":")<0&&"on"+Oi,_=_[he.expando]?_:new he.Event(Oi,Ni(_)==="object"&&_),_.isTrigger=pe?2:3,_.namespace=Ot.join("."),_.rnamespace=_.namespace?new RegExp("(^|\\.)"+Ot.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,_.result=void 0,_.target||(_.target=W),U=U==null?[_]:he.makeArray(U,[_]),vi=he.event.special[Oi]||{},!(!pe&&vi.trigger&&vi.trigger.apply(W,U)===!1))){if(!pe&&!vi.noBubble&&!X(W)){for(ut=vi.delegateType||Oi,en.test(ut+Oi)||(Le=Le.parentNode);Le;Le=Le.parentNode)pi.push(Le),it=Le;it===(W.ownerDocument||Be)&&pi.push(it.defaultView||it.parentWindow||fe)}for(Ie=0;(Le=pi[Ie++])&&!_.isPropagationStopped();)Di=Le,_.type=Ie>1?ut:vi.bindType||Oi,Qt=(Mt.get(Le,"events")||Object.create(null))[_.type]&&Mt.get(Le,"handle"),Qt&&Qt.apply(Le,U),Qt=Rt&&Le[Rt],Qt&&Qt.apply&&Li(Le)&&(_.result=Qt.apply(Le,U),_.result===!1&&_.preventDefault());return _.type=Oi,!pe&&!_.isDefaultPrevented()&&(!vi._default||vi._default.apply(pi.pop(),U)===!1)&&Li(W)&&Rt&&ce(W[Oi])&&!X(W)&&(it=W[Rt],it&&(W[Rt]=null),he.event.triggered=Oi,_.isPropagationStopped()&&Di.addEventListener(Oi,In),W[Oi](),_.isPropagationStopped()&&Di.removeEventListener(Oi,In),he.event.triggered=void 0,it&&(W[Rt]=it)),_.result}},simulate:function(_,U,W){var pe=he.extend(new he.Event,W,{type:_,isSimulated:!0});he.event.trigger(pe,null,U)}}),he.fn.extend({trigger:function(_,U){return this.each(function(){he.event.trigger(_,U,this)})},triggerHandler:function(_,U){var W=this[0];if(W)return he.event.trigger(_,U,W,!0)}});var On=/\[\]$/,Qn=/\r?\n/g,Er=/^(?:submit|button|image|reset|file)$/i,$r=/^(?:input|select|textarea|keygen)/i;function Rr(q,_,U,W){var pe;if(Array.isArray(_))he.each(_,function(Ie,Le){U||On.test(q)?W(q,Le):Rr(q+"["+(Ni(Le)==="object"&&Le!=null?Ie:"")+"]",Le,U,W)});else if(!U&&Lt(_)==="object")for(pe in _)Rr(q+"["+pe+"]",_[pe],U,W);else W(q,_)}he.param=function(q,_){var U,W=[],pe=function(Le,it){var ut=ce(it)?it():it;W[W.length]=encodeURIComponent(Le)+"="+encodeURIComponent(ut??"")};if(q==null)return"";if(Array.isArray(q)||q.jquery&&!he.isPlainObject(q))he.each(q,function(){pe(this.name,this.value)});else for(U in q)Rr(U,q[U],_,pe);return W.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var _=he.prop(this,"elements");return _?he.makeArray(_):this}).filter(function(){var _=this.type;return this.name&&!he(this).is(":disabled")&&$r.test(this.nodeName)&&!Er.test(_)&&(this.checked||!fn.test(_))}).map(function(_,U){var W=he(this).val();return W==null?null:Array.isArray(W)?he.map(W,function(pe){return{name:U.name,value:pe.replace(Qn,`\r
`)}}):{name:U.name,value:W.replace(Qn,`\r
`)}}).get()}});var Sr=/%20/g,Tn=/#.*$/,ia=/([?&])_=[^&]*/,pr=/^(.*?):[ \t]*([^\r\n]*)$/gm,_r=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,hr=/^(?:GET|HEAD)$/,Aa=/^\/\//,Qr={},Wr={},Cr="*/".concat("*"),Zr=Be.createElement("a");Zr.href=yi.href;function Ur(q){return function(_,U){typeof _!="string"&&(U=_,_="*");var W,pe=0,Ie=_.toLowerCase().match(be)||[];if(ce(U))for(;W=Ie[pe++];)W[0]==="+"?(W=W.slice(1)||"*",(q[W]=q[W]||[]).unshift(U)):(q[W]=q[W]||[]).push(U)}}function Tr(q,_,U,W){var pe={},Ie=q===Wr;function Le(it){var ut;return pe[it]=!0,he.each(q[it]||[],function(Rt,Qt){var vi=Qt(_,U,W);if(typeof vi=="string"&&!Ie&&!pe[vi])return _.dataTypes.unshift(vi),Le(vi),!1;if(Ie)return!(ut=vi)}),ut}return Le(_.dataTypes[0])||!pe["*"]&&Le("*")}function Yr(q,_){var U,W,pe=he.ajaxSettings.flatOptions||{};for(U in _)_[U]!==void 0&&((pe[U]?q:W||(W={}))[U]=_[U]);return W&&he.extend(!0,q,W),q}function Se(q,_,U){for(var W,pe,Ie,Le,it=q.contents,ut=q.dataTypes;ut[0]==="*";)ut.shift(),W===void 0&&(W=q.mimeType||_.getResponseHeader("Content-Type"));if(W){for(pe in it)if(it[pe]&&it[pe].test(W)){ut.unshift(pe);break}}if(ut[0]in U)Ie=ut[0];else{for(pe in U){if(!ut[0]||q.converters[pe+" "+ut[0]]){Ie=pe;break}Le||(Le=pe)}Ie=Ie||Le}if(Ie)return Ie!==ut[0]&&ut.unshift(Ie),U[Ie]}function Pe(q,_,U,W){var pe,Ie,Le,it,ut,Rt={},Qt=q.dataTypes.slice();if(Qt[1])for(Le in q.converters)Rt[Le.toLowerCase()]=q.converters[Le];for(Ie=Qt.shift();Ie;)if(q.responseFields[Ie]&&(U[q.responseFields[Ie]]=_),!ut&&W&&q.dataFilter&&(_=q.dataFilter(_,q.dataType)),ut=Ie,Ie=Qt.shift(),Ie){if(Ie==="*")Ie=ut;else if(ut!=="*"&&ut!==Ie){if(Le=Rt[ut+" "+Ie]||Rt["* "+Ie],!Le){for(pe in Rt)if(it=pe.split(" "),it[1]===Ie&&(Le=Rt[ut+" "+it[0]]||Rt["* "+it[0]],Le)){Le===!0?Le=Rt[pe]:Rt[pe]!==!0&&(Ie=it[0],Qt.unshift(it[1]));break}}if(Le!==!0)if(Le&&q.throws)_=Le(_);else try{_=Le(_)}catch(vi){return{state:"parsererror",error:Le?vi:"No conversion from "+ut+" to "+Ie}}}}return{state:"success",data:_}}he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yi.href,type:"GET",isLocal:_r.test(yi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Cr,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(_,U){return U?Yr(Yr(_,he.ajaxSettings),U):Yr(he.ajaxSettings,_)},ajaxPrefilter:Ur(Qr),ajaxTransport:Ur(Wr),ajax:function(_,U){Ni(_)==="object"&&(U=_,_=void 0),U=U||{};var W,pe,Ie,Le,it,ut,Rt,Qt,vi,Di,pi=he.ajaxSetup({},U),Oi=pi.context||pi,Ot=pi.context&&(Oi.nodeType||Oi.jquery)?he(Oi):he.event,Ci=he.Deferred(),ht=he.Callbacks("once memory"),mt=pi.statusCode||{},$t={},ii={},Mi="canceled",Ti={readyState:0,getResponseHeader:function($i){var sn;if(Rt){if(!Le)for(Le={};sn=pr.exec(Ie);)Le[sn[1].toLowerCase()+" "]=(Le[sn[1].toLowerCase()+" "]||[]).concat(sn[2]);sn=Le[$i.toLowerCase()+" "]}return sn==null?null:sn.join(", ")},getAllResponseHeaders:function(){return Rt?Ie:null},setRequestHeader:function($i,sn){return Rt==null&&($i=ii[$i.toLowerCase()]=ii[$i.toLowerCase()]||$i,$t[$i]=sn),this},overrideMimeType:function($i){return Rt==null&&(pi.mimeType=$i),this},statusCode:function($i){var sn;if($i)if(Rt)Ti.always($i[Ti.status]);else for(sn in $i)mt[sn]=[mt[sn],$i[sn]];return this},abort:function($i){var sn=$i||Mi;return W&&W.abort(sn),rn(0,sn),this}};if(Ci.promise(Ti),pi.url=((_||pi.url||yi.href)+"").replace(Aa,yi.protocol+"//"),pi.type=U.method||U.type||pi.method||pi.type,pi.dataTypes=(pi.dataType||"*").toLowerCase().match(be)||[""],pi.crossDomain==null){ut=Be.createElement("a");try{ut.href=pi.url,ut.href=ut.href,pi.crossDomain=Zr.protocol+"//"+Zr.host!=ut.protocol+"//"+ut.host}catch{pi.crossDomain=!0}}if(pi.data&&pi.processData&&typeof pi.data!="string"&&(pi.data=he.param(pi.data,pi.traditional)),Tr(Qr,pi,U,Ti),Rt)return Ti;Qt=he.event&&pi.global,Qt&&he.active++===0&&he.event.trigger("ajaxStart"),pi.type=pi.type.toUpperCase(),pi.hasContent=!hr.test(pi.type),pe=pi.url.replace(Tn,""),pi.hasContent?pi.data&&pi.processData&&(pi.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(pi.data=pi.data.replace(Sr,"+")):(Di=pi.url.slice(pe.length),pi.data&&(pi.processData||typeof pi.data=="string")&&(pe+=(ki.test(pe)?"&":"?")+pi.data,delete pi.data),pi.cache===!1&&(pe=pe.replace(ia,"$1"),Di=(ki.test(pe)?"&":"?")+"_="+Ji.guid+++Di),pi.url=pe+Di),pi.ifModified&&(he.lastModified[pe]&&Ti.setRequestHeader("If-Modified-Since",he.lastModified[pe]),he.etag[pe]&&Ti.setRequestHeader("If-None-Match",he.etag[pe])),(pi.data&&pi.hasContent&&pi.contentType!==!1||U.contentType)&&Ti.setRequestHeader("Content-Type",pi.contentType),Ti.setRequestHeader("Accept",pi.dataTypes[0]&&pi.accepts[pi.dataTypes[0]]?pi.accepts[pi.dataTypes[0]]+(pi.dataTypes[0]!=="*"?", "+Cr+"; q=0.01":""):pi.accepts["*"]);for(vi in pi.headers)Ti.setRequestHeader(vi,pi.headers[vi]);if(pi.beforeSend&&(pi.beforeSend.call(Oi,Ti,pi)===!1||Rt))return Ti.abort();if(Mi="abort",ht.add(pi.complete),Ti.done(pi.success),Ti.fail(pi.error),W=Tr(Wr,pi,U,Ti),!W)rn(-1,"No Transport");else{if(Ti.readyState=1,Qt&&Ot.trigger("ajaxSend",[Ti,pi]),Rt)return Ti;pi.async&&pi.timeout>0&&(it=fe.setTimeout(function(){Ti.abort("timeout")},pi.timeout));try{Rt=!1,W.send($t,rn)}catch(an){if(Rt)throw an;rn(-1,an)}}function rn(an,$i,sn,An){var mn,Mn,wn,hn,nr,cr=$i;Rt||(Rt=!0,it&&fe.clearTimeout(it),W=void 0,Ie=An||"",Ti.readyState=an>0?4:0,mn=an>=200&&an<300||an===304,sn&&(hn=Se(pi,Ti,sn)),!mn&&he.inArray("script",pi.dataTypes)>-1&&he.inArray("json",pi.dataTypes)<0&&(pi.converters["text script"]=function(){}),hn=Pe(pi,hn,Ti,mn),mn?(pi.ifModified&&(nr=Ti.getResponseHeader("Last-Modified"),nr&&(he.lastModified[pe]=nr),nr=Ti.getResponseHeader("etag"),nr&&(he.etag[pe]=nr)),an===204||pi.type==="HEAD"?cr="nocontent":an===304?cr="notmodified":(cr=hn.state,Mn=hn.data,wn=hn.error,mn=!wn)):(wn=cr,(an||!cr)&&(cr="error",an<0&&(an=0))),Ti.status=an,Ti.statusText=($i||cr)+"",mn?Ci.resolveWith(Oi,[Mn,cr,Ti]):Ci.rejectWith(Oi,[Ti,cr,wn]),Ti.statusCode(mt),mt=void 0,Qt&&Ot.trigger(mn?"ajaxSuccess":"ajaxError",[Ti,pi,mn?Mn:wn]),ht.fireWith(Oi,[Ti,cr]),Qt&&(Ot.trigger("ajaxComplete",[Ti,pi]),--he.active||he.event.trigger("ajaxStop")))}return Ti},getJSON:function(_,U,W){return he.get(_,U,W,"json")},getScript:function(_,U){return he.get(_,void 0,U,"script")}}),he.each(["get","post"],function(q,_){he[_]=function(U,W,pe,Ie){return ce(W)&&(Ie=Ie||pe,pe=W,W=void 0),he.ajax(he.extend({url:U,type:_,dataType:Ie,data:W,success:pe},he.isPlainObject(U)&&U))}}),he.ajaxPrefilter(function(q){var _;for(_ in q.headers)_.toLowerCase()==="content-type"&&(q.contentType=q.headers[_]||"")}),he._evalUrl=function(q,_,U){return he.ajax({url:q,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(pe){he.globalEval(pe,_,U)}})},he.fn.extend({wrapAll:function(_){var U;return this[0]&&(ce(_)&&(_=_.call(this[0])),U=he(_,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&U.insertBefore(this[0]),U.map(function(){for(var W=this;W.firstElementChild;)W=W.firstElementChild;return W}).append(this)),this},wrapInner:function(_){return ce(_)?this.each(function(U){he(this).wrapInner(_.call(this,U))}):this.each(function(){var U=he(this),W=U.contents();W.length?W.wrapAll(_):U.append(_)})},wrap:function(_){var U=ce(_);return this.each(function(W){he(this).wrapAll(U?_.call(this,W):_)})},unwrap:function(_){return this.parent(_).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(q){return!he.expr.pseudos.visible(q)},he.expr.pseudos.visible=function(q){return!!(q.offsetWidth||q.offsetHeight||q.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new fe.XMLHttpRequest}catch{}};var Fe={0:200,1223:204},tt=he.ajaxSettings.xhr();ke.cors=!!tt&&"withCredentials"in tt,ke.ajax=tt=!!tt,he.ajaxTransport(function(q){var _,U;if(ke.cors||tt&&!q.crossDomain)return{send:function(pe,Ie){var Le,it=q.xhr();if(it.open(q.type,q.url,q.async,q.username,q.password),q.xhrFields)for(Le in q.xhrFields)it[Le]=q.xhrFields[Le];q.mimeType&&it.overrideMimeType&&it.overrideMimeType(q.mimeType),!q.crossDomain&&!pe["X-Requested-With"]&&(pe["X-Requested-With"]="XMLHttpRequest");for(Le in pe)it.setRequestHeader(Le,pe[Le]);_=function(Rt){return function(){_&&(_=U=it.onload=it.onerror=it.onabort=it.ontimeout=it.onreadystatechange=null,Rt==="abort"?it.abort():Rt==="error"?typeof it.status!="number"?Ie(0,"error"):Ie(it.status,it.statusText):Ie(Fe[it.status]||it.status,it.statusText,(it.responseType||"text")!=="text"||typeof it.responseText!="string"?{binary:it.response}:{text:it.responseText},it.getAllResponseHeaders()))}},it.onload=_(),U=it.onerror=it.ontimeout=_("error"),it.onabort!==void 0?it.onabort=U:it.onreadystatechange=function(){it.readyState===4&&fe.setTimeout(function(){_&&U()})},_=_("abort");try{it.send(q.hasContent&&q.data||null)}catch(ut){if(_)throw ut}},abort:function(){_&&_()}}}),he.ajaxPrefilter(function(q){q.crossDomain&&(q.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(_){return he.globalEval(_),_}}}),he.ajaxPrefilter("script",function(q){q.cache===void 0&&(q.cache=!1),q.crossDomain&&(q.type="GET")}),he.ajaxTransport("script",function(q){if(q.crossDomain||q.scriptAttrs){var _,U;return{send:function(pe,Ie){_=he("<script>").attr(q.scriptAttrs||{}).prop({charset:q.scriptCharset,src:q.url}).on("load error",U=function(it){_.remove(),U=null,it&&Ie(it.type==="error"?404:200,it.type)}),Be.head.appendChild(_[0])},abort:function(){U&&U()}}}});var Pt=[],Yt=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var _=Pt.pop()||he.expando+"_"+Ji.guid++;return this[_]=!0,_}}),he.ajaxPrefilter("json jsonp",function(q,_,U){var W,pe,Ie,Le=q.jsonp!==!1&&(Yt.test(q.url)?"url":typeof q.data=="string"&&(q.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Yt.test(q.data)&&"data");if(Le||q.dataTypes[0]==="jsonp")return W=q.jsonpCallback=ce(q.jsonpCallback)?q.jsonpCallback():q.jsonpCallback,Le?q[Le]=q[Le].replace(Yt,"$1"+W):q.jsonp!==!1&&(q.url+=(ki.test(q.url)?"&":"?")+q.jsonp+"="+W),q.converters["script json"]=function(){return Ie||he.error(W+" was not called"),Ie[0]},q.dataTypes[0]="json",pe=fe[W],fe[W]=function(){Ie=arguments},U.always(function(){pe===void 0?he(fe).removeProp(W):fe[W]=pe,q[W]&&(q.jsonpCallback=_.jsonpCallback,Pt.push(W)),Ie&&ce(pe)&&pe(Ie[0]),Ie=pe=void 0}),"script"}),ke.createHTMLDocument=function(){var q=Be.implementation.createHTMLDocument("").body;return q.innerHTML="<form></form><form></form>",q.childNodes.length===2}(),he.parseHTML=function(q,_,U){if(typeof q!="string")return[];typeof _=="boolean"&&(U=_,_=!1);var W,pe,Ie;return _||(ke.createHTMLDocument?(_=Be.implementation.createHTMLDocument(""),W=_.createElement("base"),W.href=Be.location.href,_.head.appendChild(W)):_=Be),pe=ti.exec(q),Ie=!U&&[],pe?[_.createElement(pe[1])]:(pe=Ir([q],_,Ie),Ie&&Ie.length&&he(Ie).remove(),he.merge([],pe.childNodes))},he.fn.load=function(q,_,U){var W,pe,Ie,Le=this,it=q.indexOf(" ");return it>-1&&(W=ct(q.slice(it)),q=q.slice(0,it)),ce(_)?(U=_,_=void 0):_&&Ni(_)==="object"&&(pe="POST"),Le.length>0&&he.ajax({url:q,type:pe||"GET",dataType:"html",data:_}).done(function(ut){Ie=arguments,Le.html(W?he("<div>").append(he.parseHTML(ut)).find(W):ut)}).always(U&&function(ut,Rt){Le.each(function(){U.apply(this,Ie||[ut.responseText,Rt,ut])})}),this},he.expr.pseudos.animated=function(q){return he.grep(he.timers,function(_){return q===_.elem}).length},he.offset={setOffset:function(_,U,W){var pe,Ie,Le,it,ut,Rt,Qt,vi=he.css(_,"position"),Di=he(_),pi={};vi==="static"&&(_.style.position="relative"),ut=Di.offset(),Le=he.css(_,"top"),Rt=he.css(_,"left"),Qt=(vi==="absolute"||vi==="fixed")&&(Le+Rt).indexOf("auto")>-1,Qt?(pe=Di.position(),it=pe.top,Ie=pe.left):(it=parseFloat(Le)||0,Ie=parseFloat(Rt)||0),ce(U)&&(U=U.call(_,W,he.extend({},ut))),U.top!=null&&(pi.top=U.top-ut.top+it),U.left!=null&&(pi.left=U.left-ut.left+Ie),"using"in U?U.using.call(_,pi):Di.css(pi)}},he.fn.extend({offset:function(_){if(arguments.length)return _===void 0?this:this.each(function(Ie){he.offset.setOffset(this,_,Ie)});var U,W,pe=this[0];if(pe)return pe.getClientRects().length?(U=pe.getBoundingClientRect(),W=pe.ownerDocument.defaultView,{top:U.top+W.pageYOffset,left:U.left+W.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var _,U,W,pe=this[0],Ie={top:0,left:0};if(he.css(pe,"position")==="fixed")U=pe.getBoundingClientRect();else{for(U=this.offset(),W=pe.ownerDocument,_=pe.offsetParent||W.documentElement;_&&(_===W.body||_===W.documentElement)&&he.css(_,"position")==="static";)_=_.parentNode;_&&_!==pe&&_.nodeType===1&&(Ie=he(_).offset(),Ie.top+=he.css(_,"borderTopWidth",!0),Ie.left+=he.css(_,"borderLeftWidth",!0))}return{top:U.top-Ie.top-he.css(pe,"marginTop",!0),left:U.left-Ie.left-he.css(pe,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var _=this.offsetParent;_&&he.css(_,"position")==="static";)_=_.offsetParent;return _||Yi})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(q,_){var U=_==="pageYOffset";he.fn[q]=function(W){return nt(this,function(pe,Ie,Le){var it;if(X(pe)?it=pe:pe.nodeType===9&&(it=pe.defaultView),Le===void 0)return it?it[_]:pe[Ie];it?it.scrollTo(U?it.pageXOffset:Le,U?Le:it.pageYOffset):pe[Ie]=Le},q,W,arguments.length)}}),he.each(["top","left"],function(q,_){he.cssHooks[_]=s(ke.pixelPosition,function(U,W){if(W)return W=u(U,_),Gr.test(W)?he(U).position()[_]+"px":W})}),he.each({Height:"height",Width:"width"},function(q,_){he.each({padding:"inner"+q,content:_,"":"outer"+q},function(U,W){he.fn[W]=function(pe,Ie){var Le=arguments.length&&(U||typeof pe!="boolean"),it=U||(pe===!0||Ie===!0?"margin":"border");return nt(this,function(ut,Rt,Qt){var vi;return X(ut)?W.indexOf("outer")===0?ut["inner"+q]:ut.document.documentElement["client"+q]:ut.nodeType===9?(vi=ut.documentElement,Math.max(ut.body["scroll"+q],vi["scroll"+q],ut.body["offset"+q],vi["offset"+q],vi["client"+q])):Qt===void 0?he.css(ut,Rt,it):he.style(ut,Rt,Qt,it)},_,Le?pe:void 0,Le)}})}),he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(q,_){he.fn[_]=function(U){return this.on(_,U)}}),he.fn.extend({bind:function(_,U,W){return this.on(_,null,U,W)},unbind:function(_,U){return this.off(_,null,U)},delegate:function(_,U,W,pe){return this.on(U,_,W,pe)},undelegate:function(_,U,W){return arguments.length===1?this.off(_,"**"):this.off(U,_||"**",W)},hover:function(_,U){return this.on("mouseenter",_).on("mouseleave",U||_)}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(q,_){he.fn[_]=function(U,W){return arguments.length>0?this.on(_,null,U,W):this.trigger(_)}});var ci=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;he.proxy=function(q,_){var U,W,pe;if(typeof _=="string"&&(U=q[_],_=q,q=U),!!ce(q))return W=J.call(arguments,2),pe=function(){return q.apply(_||this,W.concat(J.call(arguments)))},pe.guid=q.guid=q.guid||he.guid++,pe},he.holdReady=function(q){q?he.readyWait++:he.ready(!0)},he.isArray=Array.isArray,he.parseJSON=JSON.parse,he.nodeName=yt,he.isFunction=ce,he.isWindow=X,he.camelCase=ri,he.type=Lt,he.now=Date.now,he.isNumeric=function(q){var _=he.type(q);return(_==="number"||_==="string")&&!isNaN(q-parseFloat(q))},he.trim=function(q){return q==null?"":(q+"").replace(ci,"$1")};var Fi=fe.jQuery,Pn=fe.$;return he.noConflict=function(q){return fe.$===he&&(fe.$=Pn),q&&fe.jQuery===he&&(fe.jQuery=Fi),he},typeof I>"u"&&(fe.jQuery=fe.$=he),he})})(st);var Ke=st.exports,Ne=n(Ke),at=function(){var N=null,fe=Symbol("CANVAS"),I=Symbol("CONTEXT"),L=Symbol("SHAPES"),re=Symbol("DRAWSTATUS"),J=Symbol("SHAPETYPE"),De=Symbol("MAXSHAPENUMSUPPORT"),Ye=Symbol("SHAPESTYLE"),et=Symbol("POLYGONDRAWING"),R=Symbol("CURRENTSHAPEINFO"),He=Symbol("DRAWSHAPEMULTIONETIME"),G=Symbol("EVENTCALLBACK");function ge(){N[I].clearRect(0,0,N.m_iCanvasWidth,N.m_iCanvasHeight);for(var he=0,Bi=N[L].length;he<Bi;he++)N[L][he].draw()}function xe(he){var Bi=N[L].length;Bi<N[De]&&N[L].push(he)}function ke(){var he=!1,Bi={},yt=0,wt=0,pt=0,Dt=0,St=0,Et=0,jt="draw",_t=null;function Xt(){for(var ot=-1,mi=0,Pi=N[L].length;mi<Pi;mi++)if(N[L][mi].m_bChoosed){ot=mi;break}return ot}N[fe][0].oncontextmenu=function(){return!1},N[fe][0].onselectstart=function(){return!1},N[fe].unbind(),N[fe].bind("mousedown",function(ot){if(ot.button===2)N[et]&&_t&&_t.m_aPoint.length>=_t.m_iMinClosed&&(_t.m_bClosed=!0,N[et]=!1,_t.setPointInfo(_t.m_aPoint),xe(_t),ge(),he=!1,N[He]||(N[re]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(_t.m_szType,"onDrawEnd",_t.m_szId));else if(ot.button===0){if(he){if(Math.abs(ot.offsetX-yt)>2&&Math.abs(ot.offsetY-wt)>2&&(xe(_t),N[He]||(N[re]=!1)),N[G]){var mi={startPos:[],endPos:[]};mi.startPos=[yt,wt],mi.endPos=[ot.offsetX,ot.offsetY],N[G]&&N[G](mi),N.clearAllShape()}_t=null,he=!1;return}if(yt=ot.offsetX,wt=ot.offsetY,jt="draw",!N[et]){var Pi=Xt();if(Pi!==-1&&N[L][Pi].inArc(ot.offsetX,ot.offsetY,5)&&(jt="stretch"),jt!=="stretch")for(var Ii=0,ti=N[L].length;Ii<ti;Ii++)N[L][Ii].inShape(ot.offsetX,ot.offsetY)&&N[L][Ii].m_iEditType!==2?(N[L][Ii].m_bChoosed=!0,N[L][Ii].getMouseDownPoints(ot.offsetX,ot.offsetY),jt="drag",window.onDrawShapeEvent&&window.onDrawShapeEvent(N[L][Ii].m_szType,"onChoose",N[L][Ii].m_szId)):N[L][Ii].m_bChoosed=!1;jt==="drag"?N[fe][0].style.cursor="move":N[fe][0].style.cursor="default",jt==="draw"&&N[L].length===1&&N[L][0].m_iRedrawMode===1&&(N.deleteRepeatPolyonById(N[L][0].m_szId),N[re]=!0),N[re]&&!N[He]&&(jt="draw")}if(jt==="draw"&&N[re]){if(N[De]<=N[L].length&&N[J]!=="Grid"&&N[J]!=="Point")return;N[J]==="Rect"?(_t=new X,_t.m_szTips=N[R].szTips||""):N[J]==="Grid"?N[L].length===0&&(_t=new lt,xe(_t)):N[J]==="Polygon"?(N[et]||(N[et]=!0,_t=new Lt,_t.m_szId=N[R].szId||"",_t.m_szTips=N[R].szTips||"",_t.m_iMinClosed=N[R].iMinClosed||3,_t.m_iMaxPointNum=N[R].iMaxPointNum||11,_t.m_iPolygonType=N[R].iPolygonType,_t.m_szDrawColor=N[R].szDrawColor,_t.m_szFillColor=N[R].szFillColor,_t.m_iTranslucent=N[R].iTranslucent,_t.m_iRedrawMode=N[R].iRedrawMode),_t.m_iPolygonType===1&&(_t.addPoint(yt,wt),_t.m_aPoint.length===_t.m_iMaxPointNum&&(_t.m_bClosed=!0,N[et]=!1,xe(_t),ge(),he=!1,N[He]||(N[re]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(_t.m_szType,"onDrawEnd",_t.m_szId)))):N[J]==="Point"&&(N.clearShapeByType("Point"),_t=new qt,_t.m_szId=N[R].szId||"",_t.m_szDrawColor=N[R].szDrawColor,_t.setPointInfo([[yt,wt]]),xe(_t),ge())}he=!0}}),N[fe].bind("mouseenter",function(ot){Bi={isIn:!0,offsetX:ot.offsetX,offsetY:ot.offsetY},N[re]&&he&&(N[J]==="Rect"?_t.move([[yt,wt],[ot.offsetX,ot.offsetY]]):N[J]==="Grid"&&N[L][0].move(yt,wt,ot.offsetX,ot.offsetY))}),N[fe].bind("mouseleave",function(ot){Bi={isIn:!1,offsetX:ot.offsetX,offsetY:ot.offsetY}}),N[fe].bind("mousemove",function(ot){if(N[et])N[re]&&he&&(N[J]==="Polygon"&&_t.m_iPolygonType===0&&(_t.m_bClosed=!0),ge(),_t.move(ot.offsetX,ot.offsetY,yt,wt));else{var mi=Xt();mi>-1?he&&(jt==="drag"?(N[L][mi].drag(ot.offsetX,ot.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(N[L][mi].m_szType,"onDrag",N[L][mi].m_szId)):jt==="stretch"&&(N[L][mi].stretch(ot.offsetX,ot.offsetY),window.onDrawShapeEvent&&window.onDrawShapeEvent(N[L][mi].m_szType,"onStretch",N[L][mi].m_szId))):N[re]&&he&&Bi.isIn&&(N[J]==="Rect"?_t.move([[yt,wt],[ot.offsetX,ot.offsetY]]):N[J]==="Grid"&&N[L][0].move(yt,wt,ot.offsetX,ot.offsetY))}}),N[fe].bind("mouseup",function(ot){if(N[fe][0].style.cursor="default",_t!==null&&typeof _t<"u"&&jt==="draw")if(N[J]==="Rect"){if(Math.abs(ot.offsetX-yt)>2&&Math.abs(ot.offsetY-wt)>2&&(xe(_t),N[He]||(N[re]=!1)),N[G]){var mi={startPos:[],endPos:[]};mi.startPos=[yt,wt],mi.endPos=[ot.offsetX,ot.offsetY],N[G]&&N[G](mi),N.clearAllShape()}_t=null}else N[J]==="Polygon"&&_t.m_iPolygonType===0&&N[et]&&Math.abs(ot.offsetX-yt)>2&&Math.abs(ot.offsetY-wt)>2&&(xe(_t),N[et]=!1,N[He]||(N[re]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(_t.m_szType,"onDrawEnd",_t.m_szId));N[et]?he=!0:he=!1,N[et]||ge()}),N[fe].bind("dblclick",function(){N[re]&&N[J]==="Grid"&&(N[L][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",ge())}),N[fe].bind("touchstart",function(ot){var mi=ot.target.getBoundingClientRect();if(console.log("开始触摸：",ot,mi),ot.touches&&ot.touches[0]){if(pt=parseInt(ot.touches[0].clientX-mi.x)>0?parseInt(ot.touches[0].clientX-mi.x):0,Dt=parseInt(ot.touches[0].clientY-mi.y)>0?parseInt(ot.touches[0].clientY-mi.y):0,jt="draw",N[re]){if(N[De]<=N[L].length&&N[J]!=="Grid"&&N[J]!=="Point")return;N[J]==="Rect"?(_t=new X,_t.m_szTips=N[R].szTips||""):N[J]==="Grid"?N[L].length===0&&(_t=new lt,xe(_t)):N[J]==="Polygon"?(N[et]||(N[et]=!0,_t=new Lt,_t.m_szId=N[R].szId||"",_t.m_szTips=N[R].szTips||"",_t.m_iMinClosed=N[R].iMinClosed||3,_t.m_iMaxPointNum=N[R].iMaxPointNum||11,_t.m_iPolygonType=N[R].iPolygonType,_t.m_szDrawColor=N[R].szDrawColor,_t.m_szFillColor=N[R].szFillColor,_t.m_iTranslucent=N[R].iTranslucent,_t.m_iRedrawMode=N[R].iRedrawMode),_t.m_iPolygonType===1&&(_t.addPoint(pt,Dt),_t.m_aPoint.length===_t.m_iMaxPointNum&&(_t.m_bClosed=!0,N[et]=!1,xe(_t),ge(),he=!1,N[He]||(N[re]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(_t.m_szType,"onDrawEnd",_t.m_szId)))):N[J]==="Point"&&(N.clearShapeByType("Point"),_t=new qt,_t.m_szId=N[R].szId||"",_t.m_szDrawColor=N[R].szDrawColor,_t.setPointInfo([[pt,Dt]]),xe(_t),ge())}he=!0}}),N[fe].bind("touchmove",function(ot){var mi=ot.target.getBoundingClientRect();if(ot.touches&&ot.touches[0])if(St=parseInt(ot.touches[0].clientX-mi.x)>0?parseInt(ot.touches[0].clientX-mi.x):0,Et=parseInt(ot.touches[0].clientY-mi.y)>0?parseInt(ot.touches[0].clientY-mi.y):0,N[et])N[re]&&he&&(N[J]==="Polygon"&&_t.m_iPolygonType===0&&(_t.m_bClosed=!0),ge(),_t.move(ot.touches[0].offsetX,ot.touches[0].offsetY,pt,Dt));else{var Pi=Xt();Pi>-1?he&&(jt==="drag"?(N[L][Pi].drag(St,Et),window.onDrawShapeEvent&&window.onDrawShapeEvent(N[L][Pi].m_szType,"onDrag",N[L][Pi].m_szId)):jt==="stretch"&&(N[L][Pi].stretch(St,Et),window.onDrawShapeEvent&&window.onDrawShapeEvent(N[L][Pi].m_szType,"onStretch",N[L][Pi].m_szId))):N[re]&&he&&(N[J]==="Rect"?_t.move([[pt*2,Dt*2],[St*2,Et*2]]):N[J]==="Grid"&&N[L][0].move(pt,Dt,St,Et))}}),N[fe].bind("touchend",function(ot){if(!(pt==St&&Dt==Et)){if(N[fe][0].style.cursor="default",_t!==null&&typeof _t<"u"&&jt==="draw")if(N[J]==="Rect"){if(Math.abs(St-pt)>2&&Math.abs(Et-Dt)>2&&(xe(_t),N[He]||(N[re]=!1)),N[G]&&Math.abs(St-pt)>15&&Math.abs(Et-Dt)>15){var mi={startPos:[],endPos:[]};mi.startPos=[pt,Dt],mi.endPos=[St,Et],N[G]&&N[G](mi)}N.clearAllShape(),_t=null}else N[J]==="Polygon"&&_t.m_iPolygonType===0&&N[et]&&Math.abs(St-pt)>2&&Math.abs(Et-Dt)>2&&(xe(_t),N[et]=!1,N[He]||(N[re]=!1),window.onDrawShapeEvent&&window.onDrawShapeEvent(_t.m_szType,"onDrawEnd",_t.m_szId));N[et]?he=!0:he=!1,N[et]||ge()}})}var ce=function(){function he(){se(this,he),this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=N[Ye].szDrawColor,this.m_szFillColor=N[Ye].szFillColor,this.m_iTranslucent=N[Ye].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}return Qe(he,[{key:"draw",value:function(){}},{key:"drag",value:function(yt,wt){if(this.m_iEditType!==2){var pt=this.m_aPoint.length,Dt=0;for(Dt=0;Dt<pt;Dt++)if(this.m_aPoint[Dt][0]+yt-this.m_iDriftStartX>N.m_iCanvasWidth||this.m_aPoint[Dt][1]+wt-this.m_iDriftStartY>N.m_iCanvasHeight||this.m_aPoint[Dt][0]+yt-this.m_iDriftStartX<0||this.m_aPoint[Dt][1]+wt-this.m_iDriftStartY<0){this.m_iDriftStartX=yt,this.m_iDriftStartY=wt;return}for(Dt=0;Dt<pt;Dt++)this.m_aPoint[Dt][0]=this.m_aPoint[Dt][0]+yt-this.m_iDriftStartX,this.m_aPoint[Dt][1]=this.m_aPoint[Dt][1]+wt-this.m_iDriftStartY;this.m_iDriftStartX=yt,this.m_iDriftStartY=wt,this.setPointInfo(this.m_aPoint),ge()}}},{key:"stretch",value:function(yt,wt){this.m_iEditType===0&&(this.m_iIndexChoosePoint!==-1&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=yt,this.m_aPoint[this.m_iIndexChoosePoint][1]=wt),this.setPointInfo(this.m_aPoint),ge())}},{key:"inShape",value:function(yt,wt){for(var pt=!1,Dt=this.m_aPoint.length,St=0,Et=Dt-1;St<Dt;Et=St++)this.m_aPoint[St][1]>wt!=this.m_aPoint[Et][1]>wt&&yt<(this.m_aPoint[Et][0]-this.m_aPoint[St][0])*(wt-this.m_aPoint[St][1])/(this.m_aPoint[Et][1]-this.m_aPoint[St][1])+this.m_aPoint[St][0]&&(pt=!pt);return pt}},{key:"inArc",value:function(yt,wt,pt){for(var Dt=!1,St=0,Et=this.m_aPoint.length;St<Et;St++){var jt=Math.sqrt((yt-this.m_aPoint[St][0])*(yt-this.m_aPoint[St][0])+(wt-this.m_aPoint[St][1])*(wt-this.m_aPoint[St][1]));if(jt<pt){Dt=!0,this.m_iIndexChoosePoint=St;break}}return Dt}},{key:"getMouseDownPoints",value:function(yt,wt){this.m_iDriftStartX=yt,this.m_iDriftStartY=wt}},{key:"getPointInfo",value:function(){return this.m_aPoint}},{key:"setPointInfo",value:function(yt){yt!==null&&typeof yt<"u"&&yt.length>0&&(this.m_aPoint=yt,this.setEdgePoints(yt))}},{key:"addPoint",value:function(yt,wt){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([yt,wt]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)}},{key:"setEdgePoints",value:function(yt){for(var wt=0,pt=yt.length;wt<pt;wt++)wt===0?(this.m_oEdgePoints.top.x=yt[wt][0],this.m_oEdgePoints.top.y=yt[wt][1],this.m_oEdgePoints.left.x=yt[wt][0],this.m_oEdgePoints.left.y=yt[wt][1],this.m_oEdgePoints.right.x=yt[wt][0],this.m_oEdgePoints.right.y=yt[wt][1],this.m_oEdgePoints.bottom.x=yt[wt][0],this.m_oEdgePoints.bottom.y=yt[wt][1]):(yt[wt][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=yt[wt][0],this.m_oEdgePoints.top.y=yt[wt][1]),yt[wt][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=yt[wt][0],this.m_oEdgePoints.right.y=yt[wt][1]),yt[wt][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=yt[wt][0],this.m_oEdgePoints.bottom.y=yt[wt][1]),yt[wt][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=yt[wt][0],this.m_oEdgePoints.left.y=yt[wt][1]))}}]),he}(),X=function(he){M(yt,he);var Bi=di(yt);function yt(){var wt;return se(this,yt),wt=Bi.call(this),wt.m_szType="Rect",wt}return Qe(yt,[{key:"setPointInfo",value:function(pt){if(pt!==null&&typeof pt<"u"){for(var Dt=pt[0][0],St=pt[0][1],Et=pt[0][0],jt=pt[0][1],_t=0,Xt=pt.length;_t<Xt;_t++)Dt>pt[_t][0]&&(Dt=pt[_t][0]),St>pt[_t][1]&&(St=pt[_t][1]),Et<pt[_t][0]&&(Et=pt[_t][0]),jt<pt[_t][1]&&(jt=pt[_t][1]);this.m_aPoint=[[Dt,St],[Et,St],[Et,jt],[Dt,jt]]}}},{key:"draw",value:function(){N[I].fillStyle=this.m_szFillColor,N[I].strokeStyle=this.m_szDrawColor;var pt=this.m_aPoint[0][0],Dt=this.m_aPoint[0][1],St=this.m_aPoint[2][0]-pt,Et=this.m_aPoint[2][1]-Dt;if(N[I].globalAlpha=this.m_iTranslucent,N[I].fillRect(pt,Dt,St,Et),N[I].globalAlpha=1,N[I].fillText(this.m_szTips,(pt+this.m_aPoint[2][0])/2,(Dt+this.m_aPoint[2][1])/2),this.m_bChoosed){var jt=Math.round(St/2),_t=Math.round(Et/2);if(this.m_iEditType===0)for(var Xt=[pt,pt+jt,pt+St,pt,pt+St,pt,pt+jt,pt+St],ot=[Dt,Dt,Dt,Dt+_t,Dt+_t,Dt+Et,Dt+Et,Dt+Et],mi=0;mi<8;mi++)N[I].beginPath(),N[I].arc(Xt[mi],ot[mi],3,0,360,!1),N[I].fillStyle=this.m_szDrawColor,N[I].closePath(),N[I].fill()}N[I].strokeRect(pt,Dt,St,Et)}},{key:"stretch",value:function(pt,Dt){this.m_iEditType===0&&(this.m_iIndexChoosePoint===0?pt<this.m_aPoint[2][0]&&Dt<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=pt,this.m_aPoint[0][1]=Dt,this.m_aPoint[3][0]=pt,this.m_aPoint[1][1]=Dt):this.m_iIndexChoosePoint===1?Dt<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=Dt,this.m_aPoint[1][1]=Dt):this.m_iIndexChoosePoint===2?pt>this.m_aPoint[3][0]&&Dt<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=pt,this.m_aPoint[1][1]=Dt,this.m_aPoint[2][0]=pt,this.m_aPoint[0][1]=Dt):this.m_iIndexChoosePoint===3?pt<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=pt,this.m_aPoint[3][0]=pt):this.m_iIndexChoosePoint===4?pt>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=pt,this.m_aPoint[2][0]=pt):this.m_iIndexChoosePoint===5?pt<this.m_aPoint[1][0]&&Dt>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=pt,this.m_aPoint[3][1]=Dt,this.m_aPoint[0][0]=pt,this.m_aPoint[2][1]=Dt):this.m_iIndexChoosePoint===6?Dt>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=Dt,this.m_aPoint[3][1]=Dt):this.m_iIndexChoosePoint===7&&pt>this.m_aPoint[0][0]&&Dt>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=pt,this.m_aPoint[2][1]=Dt,this.m_aPoint[1][0]=pt,this.m_aPoint[3][1]=Dt),ge())}},{key:"move",value:function(pt){ge(),this.m_bChoosed=!0;var Dt=pt[0][0],St=pt[0][1],Et=pt[1][0],jt=pt[1][1];this.setPointInfo([[Dt,St],[Et,St],[Et,jt],[Dt,jt]]),this.draw()}},{key:"inArc",value:function(pt,Dt,St){for(var Et=this.m_aPoint[0][0],jt=this.m_aPoint[0][1],_t=this.m_aPoint[2][0]-Et,Xt=this.m_aPoint[2][1]-jt,ot=Math.round(_t/2),mi=Math.round(Xt/2),Pi=[Et,Et+ot,Et+_t,Et,Et+_t,Et,Et+ot,Et+_t],Ii=[jt,jt,jt,jt+mi,jt+mi,jt+Xt,jt+Xt,jt+Xt],ti=0;ti<8;ti++){var Vi=Math.sqrt((pt-Pi[ti])*(pt-Pi[ti])+(Dt-Ii[ti])*(Dt-Ii[ti]));if(Vi<St)return this.m_iIndexChoosePoint=ti,!0}return!1}}]),yt}(ce),Be=function(he){M(yt,he);var Bi=di(yt);function yt(wt,pt){var Dt;return se(this,yt),Dt=Bi.call(this),Dt.m_szType="RectOSD",Dt.m_szOSDType="overlay-date",Dt.m_szText=wt||"",Dt.m_szEnabled=pt||"",Dt.m_szDateStyle="",Dt.m_szClockType="",Dt.m_szDisplayWeek="",Dt.m_szId="",Dt.m_szAlignment="0",Dt}return Qe(yt,[{key:"draw",value:function(){if(this.m_szEnabled==="true"){var pt=this.m_aPoint[0][0],Dt=this.m_aPoint[0][1],St=this.m_aPoint[2][0]-pt,Et=this.m_aPoint[2][1]-Dt;N[I].beginPath(),N[I].strokeStyle=this.m_szDrawColor,N[I].globalAlpha=1,N[I].rect(pt,Dt,St,Et),N[I].font="15px serif",N[I].strokeText(this.m_szText,pt,Dt+15),N[I].stroke()}}},{key:"drag",value:function(pt,Dt){var St=this.m_aPoint.length,Et=0;if(this.m_szAlignment==="0"){for(Et=0;Et<St;Et++)if(this.m_aPoint[Et][1]+Dt-this.m_iDriftStartY>N.m_iCanvasHeight||this.m_aPoint[Et][0]+pt-this.m_iDriftStartX<0||this.m_aPoint[Et][1]+Dt-this.m_iDriftStartY<0){this.m_iDriftStartX=pt,this.m_iDriftStartY=Dt;return}for(Et=0;Et<St;Et++)this.m_aPoint[Et][0]=this.m_aPoint[Et][0]+pt-this.m_iDriftStartX,this.m_aPoint[Et][1]=this.m_aPoint[Et][1]+Dt-this.m_iDriftStartY}else if(this.m_szAlignment==="1"||this.m_szAlignment==="2"){for(Et=0;Et<St;Et++)if(this.m_aPoint[Et][1]+Dt-this.m_iDriftStartY>N.m_iCanvasHeight||this.m_aPoint[Et][1]+Dt-this.m_iDriftStartY<0){this.m_iDriftStartX=pt,this.m_iDriftStartY=Dt;return}for(Et=0;Et<St;Et++)this.m_aPoint[Et][1]=this.m_aPoint[Et][1]+Dt-this.m_iDriftStartY}this.m_iDriftStartX=pt,this.m_iDriftStartY=Dt,this.setEdgePoints(this.m_aPoint),ge()}},{key:"stretch",value:function(){}}]),yt}(ce),lt=function(he){M(yt,he);var Bi=di(yt);function yt(){var wt;return se(this,yt),wt=Bi.call(this),wt.m_szType="Grid",wt.m_iGridColNum=22,wt.m_iGridRowNum=18,wt.m_szGridMap="",wt.m_aAddGridMap=[],wt}return Qe(yt,[{key:"draw",value:function(){for(var pt=N.m_iCanvasWidth/this.m_iGridColNum,Dt=N.m_iCanvasHeight/this.m_iGridRowNum,St="",Et=0;Et<this.m_iGridRowNum;Et++){for(var jt=this.m_szGridMap.substring(Et*6,Et*6+6),_t=parseInt("f"+jt,16).toString(2).split("").slice(4),Xt="",ot=0;ot<this.m_iGridColNum;ot++){var mi="";_t[ot]==="1"?(N[I].strokeStyle=this.m_szDrawColor,N[I].globalAlpha=1,N[I].strokeRect(pt*ot,Dt*Et,pt,Dt),mi="1"):mi="0",this.m_aAddGridMap.length&&this.m_aAddGridMap[Et][ot]===1&&(N[I].strokeStyle=this.m_szDrawColor,N[I].strokeRect(pt*ot,Dt*Et,pt,Dt),mi="1"),Xt+=mi}St+=parseInt("1111"+Xt+"00",2).toString(16).substring(1)}this.m_szGridMap=St}},{key:"move",value:function(pt,Dt,St,Et){var jt=N.m_iCanvasWidth/this.m_iGridColNum,_t=N.m_iCanvasHeight/this.m_iGridRowNum,Xt=Math.floor(pt/jt),ot=Math.floor(Dt/_t),mi=Math.floor(Math.abs(St-pt)/jt),Pi=Math.floor(Math.abs(Et-Dt)/_t),Ii=1,ti=1;St-pt>0?Ii=1:Ii=-1,Et-Dt>0?ti=1:ti=-1;for(var Vi=[],Jt=0;Jt<this.m_iGridRowNum;Jt++){Vi[Jt]=[];for(var At=0;At<this.m_iGridColNum;At++)Ii===1?ti===1?Jt>=ot&&Jt<=ot+Pi&&At>=Xt&&At<=Xt+mi?Vi[Jt][At]=1:Vi[Jt][At]=0:Jt<=ot&&Jt>=ot-Pi&&At>=Xt&&At<=Xt+mi?Vi[Jt][At]=1:Vi[Jt][At]=0:ti===1?Jt>=ot&&Jt<=ot+Pi&&At<=Xt&&At>=Xt-mi?Vi[Jt][At]=1:Vi[Jt][At]=0:Jt<=ot&&Jt>=ot-Pi&&At<=Xt&&At>=Xt-mi?Vi[Jt][At]=1:Vi[Jt][At]=0}this.m_aAddGridMap=Vi,this.draw()}}]),yt}(ce),dt=function(he){M(yt,he);var Bi=di(yt);function yt(){var wt;return se(this,yt),wt=Bi.call(this),wt.m_szType="Line",wt.m_iLineType=0,wt.m_iDirection=0,wt.m_iArrowType=0,wt.m_aCrossArrowPoint=[],wt}return Qe(yt,[{key:"draw",value:function(){this.m_iLineType===0?this.drawNormalLine():this.m_iLineType===1?this.drawArrowLine():this.m_iLineType===3?this.drawCrossLine():this.m_iLineType===4&&this.drawLineCount()}},{key:"drawNormalLine",value:function(){if(N[I].globalAlpha=1,this.m_aPoint.length>0){N[I].beginPath(),N[I].strokeStyle=this.m_szDrawColor,N[I].lineWidth=2,N[I].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var pt=1,Dt=this.m_aPoint.length;pt<Dt;pt++)N[I].lineTo(this.m_aPoint[pt][0],this.m_aPoint[pt][1]);if(N[I].stroke(),this.m_bChoosed)for(var St=0,Et=this.m_aPoint.length;St<Et;St++)N[I].beginPath(),N[I].fillStyle=this.m_szDrawColor,N[I].arc(this.m_aPoint[St][0],this.m_aPoint[St][1],3,0,Math.PI*2,!0),N[I].closePath(),N[I].fill();this.m_szTips!==""&&(N[I].strokeStyle=this.m_szDrawColor,N[I].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}}},{key:"drawArrowLine",value:function(pt,Dt,St,Et,jt,_t,Xt,ot){_t=typeof _t<"u"?_t:30,Xt=typeof Xt<"u"?Xt:10,ot=typeof ot<"u"?ot:1;var mi=Math.atan2(St-jt,Dt-Et)*180/Math.PI,Pi=(mi+_t)*Math.PI/180,Ii=(mi-_t)*Math.PI/180,ti=Xt*Math.cos(Pi),Vi=Xt*Math.sin(Pi),Jt=Xt*Math.cos(Ii),At=Xt*Math.sin(Ii);N[I].save(),N[I].beginPath();var j=Dt-ti,T=St-Vi;N[I].moveTo(j,T),N[I].lineTo(Dt,St),j=Dt-Jt,T=St-At,N[I].lineTo(j,T),N[I].moveTo(Dt,St),N[I].lineTo(Et,jt),pt===1&&(j=Et+ti,T=jt+Vi,N[I].moveTo(j,T),N[I].lineTo(Et,jt),j=Et+Jt,T=jt+At,N[I].lineTo(j,T)),N[I].strokeStyle=this.m_szDrawColor,N[I].lineWidth=ot,N[I].stroke(),N[I].restore()}},{key:"drawCrossLine",value:function(){this.drawNormalLine();var pt=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,Dt=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,St=Math.atan2(Dt-this.m_aPoint[0][1],pt-this.m_aPoint[0][0])*180/Math.PI,Et=(St+90)*Math.PI/180,jt=(St-90)*Math.PI/180,_t=25*Math.cos(Et),Xt=25*Math.sin(Et),ot=25*Math.cos(jt),mi=25*Math.sin(jt),Pi=0,Ii=0;Pi=pt-_t,Ii=Dt-Xt;var ti=0,Vi=0;this.m_iDirection===0?(ti=-10,Vi=-15):this.m_iDirection===1?(ti=10,Vi=10):(ti=10,Vi=-15),this.m_iDirection!==0&&this.drawArrowLine(0,Pi,Ii,pt,Dt),N[I].strokeStyle=this.m_szDrawColor,N[I].font="8px",N[I].strokeText("A",Pi+ti,Ii+4),Pi=pt-ot,Ii=Dt-mi,this.m_iDirection!==1&&this.drawArrowLine(0,Pi,Ii,pt,Dt),N[I].strokeStyle=this.m_szDrawColor,N[I].font="8px",N[I].strokeText("B",Pi+Vi,Ii+4)}},{key:"drawLineCount",value:function(){this.drawNormalLine();var pt=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,Dt=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,St=Math.atan2(Dt-this.m_aPoint[0][1],pt-this.m_aPoint[0][0])*180/Math.PI,Et=(St+90)*Math.PI/180,jt=(St-90)*Math.PI/180,_t=25*Math.cos(Et),Xt=25*Math.sin(Et),ot=25*Math.cos(jt),mi=25*Math.sin(jt),Pi=0,Ii=0;Pi=pt-_t,Ii=Dt-Xt,this.m_iArrowType===1?(Pi=pt-ot,Ii=Dt-mi,this.drawArrowLine(0,Pi,Ii,pt,Dt)):this.m_iArrowType===0&&this.drawArrowLine(0,Pi,Ii,pt,Dt),this.m_aCrossArrowPoint=[[pt,Dt],[Pi,Ii]]}},{key:"inShape",value:function(pt,Dt){for(var St=!1,Et=0,jt=this.m_aPoint.length-1;Et<jt;Et++){var _t=Math.sqrt((this.m_aPoint[Et+1][0]-this.m_aPoint[Et][0])*(this.m_aPoint[Et+1][0]-this.m_aPoint[Et][0])+(this.m_aPoint[Et+1][1]-this.m_aPoint[Et][1])*(this.m_aPoint[Et+1][1]-this.m_aPoint[Et][1])),Xt=Math.sqrt((pt-this.m_aPoint[Et][0])*(pt-this.m_aPoint[Et][0])+(Dt-this.m_aPoint[Et][1])*(Dt-this.m_aPoint[Et][1])),ot=Math.sqrt((pt-this.m_aPoint[Et+1][0])*(pt-this.m_aPoint[Et+1][0])+(Dt-this.m_aPoint[Et+1][1])*(Dt-this.m_aPoint[Et+1][1]));Xt+ot-_t<1&&(St=!0)}return St}}]),yt}(ce),Lt=function(he){M(yt,he);var Bi=di(yt);function yt(){var wt;return se(this,yt),wt=Bi.call(this),wt.m_szType="Polygon",wt.m_iPolygonType=1,wt}return Qe(yt,[{key:"setPointInfo",value:function(pt){if(pt!==null&&typeof pt<"u"){if(this.m_iPolygonType===0){for(var Dt=pt[0][0],St=pt[0][1],Et=pt[0][0],jt=pt[0][1],_t=0,Xt=pt.length;_t<Xt;_t++)Dt>pt[_t][0]&&(Dt=pt[_t][0]),St>pt[_t][1]&&(St=pt[_t][1]),Et<pt[_t][0]&&(Et=pt[_t][0]),jt<pt[_t][1]&&(jt=pt[_t][1]);this.m_aPoint=[[Dt,St],[Et,St],[Et,jt],[Dt,jt]]}else this.m_iPolygonType===1?this.m_aPoint=pt:this.m_aPoint=pt;this.setEdgePoints(pt)}}},{key:"draw",value:function(){if(this.m_aPoint.length>0){N[I].fillStyle=this.m_szFillColor,N[I].strokeStyle=this.m_szDrawColor,N[I].globalAlpha=1;var pt=0,Dt=0;if(this.m_bChoosed)for(pt=0,Dt=this.m_aPoint.length;pt<Dt;pt++)N[I].beginPath(),N[I].arc(this.m_aPoint[pt][0],this.m_aPoint[pt][1],3,0,360,!1),N[I].fillStyle=this.m_szDrawColor,N[I].closePath(),N[I].fill();for(N[I].beginPath(),N[I].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),pt=0,Dt=this.m_aPoint.length;pt<Dt;pt++)pt!==0&&N[I].lineTo(this.m_aPoint[pt][0],this.m_aPoint[pt][1]);N[I].stroke(),this.m_bClosed&&(N[I].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),N[I].closePath(),N[I].stroke(),N[I].globalAlpha=this.m_iTranslucent,N[I].fill())}}},{key:"move",value:function(pt,Dt,St,Et){if(this.m_iPolygonType===1){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){N[I].fillStyle=this.m_szFillColor,N[I].strokeStyle=this.m_szDrawColor,N[I].globalAlpha=1;var jt=0,_t=0;for(jt=0,_t=this.m_aPoint.length;jt<_t;jt++)N[I].beginPath(),N[I].arc(this.m_aPoint[jt][0],this.m_aPoint[jt][1],3,0,360,!1),N[I].fillStyle=this.m_szDrawColor,N[I].closePath(),N[I].fill();for(N[I].beginPath(),N[I].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),jt=0,_t=this.m_aPoint.length;jt<_t;jt++)jt!==0&&N[I].lineTo(this.m_aPoint[jt][0],this.m_aPoint[jt][1]);N[I].lineTo(pt,Dt),N[I].closePath(),N[I].stroke()}}else if(this.m_iPolygonType===0){this.m_bChoosed=!0;var Xt=St,ot=Et,mi=pt,Pi=Dt;this.setPointInfo([[Xt,ot],[mi,ot],[mi,Pi],[Xt,Pi]]),this.draw()}}},{key:"stretch",value:function(pt,Dt){this.m_iEditType===0&&(this.m_iPolygonType===1?this.m_iIndexChoosePoint!==-1&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=pt,this.m_aPoint[this.m_iIndexChoosePoint][1]=Dt):this.m_iIndexChoosePoint===0?pt<this.m_aPoint[2][0]&&Dt<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=pt,this.m_aPoint[0][1]=Dt,this.m_aPoint[3][0]=pt,this.m_aPoint[1][1]=Dt):this.m_iIndexChoosePoint===1?pt>this.m_aPoint[3][0]&&Dt<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=pt,this.m_aPoint[1][1]=Dt,this.m_aPoint[2][0]=pt,this.m_aPoint[0][1]=Dt):this.m_iIndexChoosePoint===2?pt>this.m_aPoint[0][0]&&Dt>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=pt,this.m_aPoint[2][1]=Dt,this.m_aPoint[1][0]=pt,this.m_aPoint[3][1]=Dt):this.m_iIndexChoosePoint===3&&pt<this.m_aPoint[1][0]&&Dt>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=pt,this.m_aPoint[3][1]=Dt,this.m_aPoint[0][0]=pt,this.m_aPoint[2][1]=Dt),this.setPointInfo(this.m_aPoint),ge())}}]),yt}(ce),qt=function(he){M(yt,he);var Bi=di(yt);function yt(){var wt;return se(this,yt),wt=Bi.call(this),wt.m_szType="Point",wt.m_szId="",wt}return Qe(yt,[{key:"draw",value:function(){N[I].beginPath(),N[I].fillStyle=this.m_szDrawColor,N[I].globalAlpha=1,N[I].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,Math.PI*2,!0),N[I].closePath(),N[I].fill()}},{key:"drag",value:function(){}},{key:"stretch",value:function(){}}]),yt}(ce),Si=function(){function he(Bi){se(this,he),N=this,this[fe]=Ne("#"+Bi),this[I]=this[fe][0].getContext("2d"),this[L]=[],this[re]=!1,this[J]="Rect",this[De]=10,this[He]=!0,this[R]={},this[G]=null,this[Ye]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[et]=!1,this.m_iCanvasWidth=this[fe].width(),this.m_iCanvasHeight=this[fe].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",ke(),this[L].length=0}return Qe(he,[{key:"setDrawMutiShapeOneTime",value:function(yt){this[He]=yt}},{key:"setMaxShapeSupport",value:function(yt){this[De]=yt}},{key:"getMaxShapeSupport",value:function(){return this[De]}},{key:"setDrawStatus",value:function(yt,wt){this[re]=yt,wt&&yt&&(this[G]=wt),yt||(this[G]=null)}},{key:"setShapeType",value:function(yt){this[J]=yt,ge()}},{key:"setCurrentShapeInfo",value:function(yt){this[R]=yt||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}}},{key:"getShapeType",value:function(){return this[J]}},{key:"getAllShapesInfo",value:function(){for(var yt=[],wt=0,pt=this[L].length;wt<pt;wt++)this[L][wt].m_szType==="Grid"?yt.push({szType:this[L][wt].m_szType,szGridMap:this[L][wt].m_szGridMap,iGridColNum:this[L][wt].m_iGridColNum,iGridRowNum:this[L][wt].m_iGridRowNum}):this[L][wt].m_szType==="RectOSD"?yt.push({szType:this[L][wt].m_szType,szText:this[L][wt].m_szText,szEnabled:this[L][wt].m_szEnabled,szOSDType:this[L][wt].m_szOSDType,iPositionX:this[L][wt].m_aPoint[0][0],iPositionY:this[L][wt].m_aPoint[0][1],szDateStyle:this[L][wt].m_szDateStyle,szClockType:this[L][wt].m_szClockType,szDisplayWeek:this[L][wt].m_szDisplayWeek,szId:this[L][wt].m_szId,szAlignment:this[L][wt].m_szAlignment}):yt.push({szType:this[L][wt].m_szType,aPoint:this[L][wt].m_aPoint,szId:this[L][wt].m_szId,bChoosed:this[L][wt].m_bChoosed});return yt}},{key:"deleteRepeatPolyonById",value:function(yt){var wt=this.getAllShapesInfo(),pt=wt.length;if(pt>0)for(var Dt=0;Dt<pt;Dt++)wt[Dt].szType==="Polygon"&&wt[Dt].szId===yt&&this.deleteShape(Dt)}},{key:"getShapesInfoByType",value:function(yt){for(var wt=[],pt=0,Dt=this[L].length;pt<Dt;pt++)this[L][pt].m_szType===yt&&(this[L][pt].m_szType==="Grid"?wt.push({szType:this[L][pt].m_szType,szGridMap:this[L][pt].m_szGridMap,iGridColNum:this[L][pt].m_iGridColNum,iGridRowNum:this[L][pt].m_iGridRowNum}):this[L][pt].m_szType==="RectOSD"?wt.push({szType:this[L][pt].m_szType,szText:this[L][pt].m_szText,szEnabled:this[L][pt].m_szEnabled,szOSDType:this[L][pt].m_szOSDType,iPositionX:this[L][pt].m_aPoint[0][0],iPositionY:this[L][pt].m_aPoint[0][1],szDateStyle:this[L][pt].m_szDateStyle,szClockType:this[L][pt].m_szClockType,szDisplayWeek:this[L][pt].m_szDisplayWeek,szId:this[L][pt].m_szId,szAlignment:this[L][pt].m_szAlignment}):yt==="Polygon"?wt.push({szType:this[L][pt].m_szType,szId:this[L][pt].m_szId,iPolygonType:this[L][pt].m_iPolygonType,iMinClosed:this[L][pt].m_iMinClosed,iMaxPointNum:this[L][pt].m_iMaxPointNum,iEditType:this[L][pt].m_iEditType,aPoint:this[L][pt].m_aPoint,bClosed:this[L][pt].m_bClosed,szTips:this[L][pt].m_szTips,szDrawColor:this[L][pt].m_szDrawColor,szFillColor:this[L][pt].m_szFillColor,iTranslucent:this[L][pt].m_iTranslucent}):yt==="Line"?wt.push({szType:this[L][pt].m_szType,szId:this[L][pt].m_szId,aPoint:this[L][pt].m_aPoint,szTips:this[L][pt].m_szTips,iLineType:this[L][pt].m_iLineType,iDirection:this[L][pt].m_iDirection,iArrowType:this[L][pt].m_iArrowType,szDrawColor:this[L][pt].m_szDrawColor,aCrossArrowPoint:this[L][pt].m_aCrossArrowPoint}):yt==="Rect"?wt.push({szType:this[L][pt].m_szType,iEditType:this[L][pt].m_iEditType,aPoint:this[L][pt].m_aPoint,szTips:this[L][pt].m_szTips,szDrawColor:this[L][pt].m_szDrawColor,szFillColor:this[L][pt].m_szFillColor,iTranslucent:this[L][pt].m_iTranslucent}):wt.push({szType:this[L][pt].m_szType,aPoint:this[L][pt].m_aPoint}));return wt}},{key:"setShapesInfoByType",value:function(yt,wt){wt||(wt=[]);var pt=null;if(yt==="Rect"||yt==="Polygon"||yt==="Line"||yt==="Point")for(var Dt=0,St=wt.length;Dt<St;Dt++)yt==="Rect"?(pt=new X,pt.m_iEditType=wt[Dt].iEditType,pt.m_szTips=wt[Dt].szTips||"",pt.m_szDrawColor=wt[Dt].szDrawColor,pt.m_szFillColor=wt[Dt].szFillColor,pt.m_iTranslucent=wt[Dt].iTranslucent,pt.m_iRedrawMode=wt[Dt].iRedrawMode):yt==="Polygon"?(pt=new Lt,wt[Dt].iPolygonType===0?pt.m_bClosed=!0:pt.m_bClosed=wt[Dt].bClosed,pt.m_szTips=wt[Dt].szTips||"",pt.m_szId=wt[Dt].szId||"",pt.m_iPolygonType=wt[Dt].iPolygonType,pt.m_iMinClosed=wt[Dt].iMinClosed||3,pt.m_iMaxPointNum=wt[Dt].iMaxPointNum||11,pt.m_iEditType=wt[Dt].iEditType,pt.m_szDrawColor=wt[Dt].szDrawColor,pt.m_szFillColor=wt[Dt].szFillColor,pt.m_iTranslucent=wt[Dt].iTranslucent,pt.m_iRedrawMode=wt[Dt].iRedrawMode):yt==="Line"?(pt=new dt,pt.m_iLineType=wt[Dt].iLineType,pt.m_szTips=wt[Dt].szTips||"",pt.m_szId=wt[Dt].szId,pt.m_iDirection=wt[Dt].iDirection,pt.m_iArrowType=wt[Dt].iArrowType,pt.m_szDrawColor=wt[Dt].szDrawColor,pt.setPointInfo(wt[Dt].aPoint)):yt==="Point"&&(pt=new qt,pt.m_szId=wt[Dt].szId,pt.m_szDrawColor=wt[Dt].szDrawColor,pt.setPointInfo(wt[Dt].aPoint)),pt.setPointInfo(wt[Dt].aPoint),Dt===0&&(pt.m_bChoosed=!0),xe(pt);else yt==="Grid"&&(pt=new lt,pt.m_szGridMap=wt[0].szGridMap||"",pt.m_iGridColNum=wt[0].iGridColNum||22,pt.m_iGridRowNum=wt[0].iGridRowNum||18,xe(pt));ge()}},{key:"addOSDShape",value:function(yt,wt,pt,Dt,St){!pt&&!Dt&&(pt=0,Dt=0),St||(St={});var Et=new Be(yt,wt),jt=yt.replace(/[^x00-xff]/g,"rr").length*10;Et.m_szOSDType=St.szOSDType||"",Et.m_szDateStyle=St.szDateStyle||"",Et.m_szClockType=St.szClockType||"",Et.m_szDisplayWeek=St.szDisplayWeek||"",Et.m_szId=St.szId||"",Et.m_szAlignment=""+St.szAlignment||"0",Et.m_szAlignment==="0"?Et.m_aPoint=[[pt,Dt],[jt+pt,Dt],[jt+pt,Dt+20],[pt,Dt+20]]:Et.m_szAlignment==="1"?Et.m_aPoint=[[0,Dt],[jt,Dt],[jt,Dt+20],[0,Dt+20]]:Et.m_szAlignment==="2"?Et.m_aPoint=[[this.m_iCanvasWidth-jt,Dt],[this.m_iCanvasWidth,Dt],[this.m_iCanvasWidth,Dt+20],[this.m_iCanvasWidth-jt,Dt+20]]:Et.m_aPoint=[[pt,Dt],[jt+pt,Dt],[jt+pt,Dt+20],[pt,Dt+20]],xe(Et),ge()}},{key:"selectShapeById",value:function(yt,wt){for(var pt=0,Dt=N[L].length;pt<Dt;pt++)yt===N[L][pt].m_szType&&(wt===N[L][pt].m_szId?N[L][pt].m_bChoosed=!0:N[L][pt].m_bChoosed=!1);ge()}},{key:"setCanvasSize",value:function(yt,wt){yt>0&&wt>0&&(this.m_iCanvasWidth=yt,this.m_iCanvasHeight=wt,ge())}},{key:"setDrawStyle",value:function(yt,wt,pt){this[Ye]={szDrawColor:yt,szFillColor:wt,iTranslucent:pt}}},{key:"clearAllShape",value:function(){this[L].length=0,N[et]=!1,ge()}},{key:"clearShapeByType",value:function(yt){for(var wt=this[L].length,pt=wt;pt>0;pt--)this[L][pt-1].m_szType===yt&&(yt==="Grid"?(this[L][pt-1].m_szGridMap="",this[L][pt-1].m_aAddGridMap=[]):this[L].splice(pt-1,1));yt==="Polygon"&&(N[et]=!1),ge()}},{key:"deleteShape",value:function(yt){this[L].length>yt&&this[L].splice(yt,1),ge()}},{key:"updateCanvas",value:function(yt){this[fe]=Ne("#"+yt),this[I]=this[fe][0].getContext("2d"),this.m_iCanvasWidth=this[fe].width(),this.m_iCanvasHeight=this[fe].height(),ke()}},{key:"resizeCanvas",value:function(){this.m_iCanvasWidth=this[fe].width(),this.m_iCanvasHeight=this[fe].height()}},{key:"canvasRedraw",value:function(){ge()}}]),he}();return Si}(),Ut={exports:{}};Ut.exports,function(N,fe){function I(re,J){var De=L();return I=function(et,R){et=et-309;var He=De[et];return He},I(re,J)}(function(re,J){for(var De=I,Ye=re();;)try{var et=parseInt(De(410))/1*(parseInt(De(486))/2)+-parseInt(De(1354))/3+-parseInt(De(1104))/4+-parseInt(De(489))/5+parseInt(De(969))/6*(parseInt(De(916))/7)+-parseInt(De(1423))/8+parseInt(De(1269))/9*(parseInt(De(1397))/10);if(et===J)break;Ye.push(Ye.shift())}catch{Ye.push(Ye.shift())}})(L,841567),function(re,J){var De=I;if(De(1415)=="object"&&De(1415)=="object")N[De(509)]=J();else{var Ye,et=J();for(Ye in et)(De(1415)=="object"?fe:re)[Ye]=et[Ye]}}(self,function(){var re=I;return De={477:function(He){He.exports=function(G,ge,xe,ke){var ce=I,X,Be=self||window;try{try{try{X=new Be[ce(540)]([G])}catch{(X=new(Be[ce(1487)]||Be[ce(1403)]||Be.MozBlobBuilder||Be[ce(548)])).append(G),X=X.getBlob()}var lt=Be[ce(1244)]||Be[ce(1318)],dt=lt.createObjectURL(X),Lt=new Be[ge](dt,xe);return lt[ce(1261)](dt),Lt}catch{return new Be[ge](ce(544)[ce(1438)](encodeURIComponent(G)),xe)}}catch{if(ke)return new Be[ge](ke,xe);throw Error(ce(935))}}},61:function(He,G,ge){var xe=I,ke=ge(698).default;function ce(){var X=I;He[X(509)]=function(){return Be},He[X(509)][X(1249)]=!0,He[X(509)][X(1507)]=He[X(509)];var Be={},lt=Object[X(1178)],dt=lt[X(1340)],Et=X(1536)==(typeof Symbol>"u"?"undefined":Ni(Symbol))?Symbol:{},Lt=Et.iterator||X(1568),qt=Et.asyncIterator||X(931),Si=Et[X(1111)]||"@@toStringTag";function he(Jt,At,j){var T=X;return Object[T(645)](Jt,At,{value:j,enumerable:!0,configurable:!0,writable:!0}),Jt[At]}try{he({},"")}catch{he=function(j,T,F){return j[T]=F}}function Bi(Jt,Ue,j,ft){var F=X,S,be,_e,Me,Ue=Ue&&Ue[F(1178)]instanceof pt?Ue:pt,Ue=Object[F(1287)](Ue[F(1178)]),ft=new Ii(ft||[]);return Ue._invoke=(S=Jt,be=j,_e=ft,Me=F(1259),function(Gt,Ft){var Ee=F;if(Ee(1556)===Me)throw new Error(Ee(1391));if(Ee(611)===Me){if(Ee(1317)===Gt)throw Ft;return Vi()}for(_e[Ee(1515)]=Gt,_e.arg=Ft;;){var nt=_e[Ee(1218)];if(nt&&(nt=function Zt(bi,Kt){var ri=Ee,Li=bi[ri(1528)][Kt[ri(1515)]];if(Li===void 0){if(Kt[ri(1218)]=null,ri(1317)===Kt[ri(1515)]){if(bi[ri(1528)][ri(678)]&&(Kt[ri(1515)]="return",Kt[ri(529)]=void 0,Zt(bi,Kt),ri(1317)===Kt.method))return wt;Kt[ri(1515)]=ri(1317),Kt[ri(529)]=new TypeError(ri(1593))}return wt}return Li=yt(Li,bi[ri(1528)],Kt[ri(529)]),ri(1317)===Li[ri(1378)]?(Kt[ri(1515)]=ri(1317),Kt[ri(529)]=Li[ri(529)],Kt[ri(1218)]=null,wt):(Li=Li[ri(529)],Li?Li.done?(Kt[bi[ri(1100)]]=Li[ri(591)],Kt[ri(811)]=bi[ri(896)],ri(678)!==Kt[ri(1515)]&&(Kt[ri(1515)]="next",Kt[ri(529)]=void 0),Kt[ri(1218)]=null,wt):Li:(Kt[ri(1515)]=ri(1317),Kt[ri(529)]=new TypeError(ri(1377)),Kt[ri(1218)]=null,wt))}(nt,_e),nt)){if(nt===wt)continue;return nt}if(Ee(811)===_e[Ee(1515)])_e[Ee(1520)]=_e[Ee(1434)]=_e.arg;else if(Ee(1317)===_e[Ee(1515)]){if(Ee(1259)===Me)throw Me="completed",_e.arg;_e.dispatchException(_e[Ee(529)])}else _e[Ee(1515)]==="return"&&_e[Ee(341)]("return",_e[Ee(529)]);if(Me="executing",nt=yt(S,be,_e),Ee(655)===nt[Ee(1378)]){if(Me=_e.done?Ee(611):Ee(1525),nt.arg===wt)continue;return{value:nt[Ee(529)],done:_e[Ee(1251)]}}Ee(1317)===nt[Ee(1378)]&&(Me=Ee(611),_e.method=Ee(1317),_e[Ee(529)]=nt[Ee(529)])}}),Ue}function yt(Jt,At,j){var T=X;try{return{type:T(655),arg:Jt[T(1098)](At,j)}}catch(F){return{type:"throw",arg:F}}}Be[X(894)]=Bi;var wt={};function pt(){}function Dt(){}function St(){}var Et={},jt=(he(Et,Lt,function(){return this}),Object[X(1363)]),jt=jt&&jt(jt(ti([]))),_t=(jt&&jt!==lt&&dt[X(1098)](jt,Lt)&&(Et=jt),St[X(1178)]=pt[X(1178)]=Object[X(1287)](Et));function Xt(Jt){var At=X;[At(811),"throw",At(678)][At(689)](function(j){he(Jt,j,function(T){var F=I;return this[F(1352)](j,T)})})}function ot(Jt,At){var j=X,T;this[j(1352)]=function(F,S){var be=j;function _e(){return new At(function(Me,Ue){(function ft(Kt,Ft,Ee,nt){var Zt=I,bi,Kt=yt(Jt[Kt],Jt,Ft);if(Kt[Zt(1378)]!=="throw")return(Ft=(bi=Kt[Zt(529)])[Zt(591)])&&ke(Ft)=="object"&&dt[Zt(1098)](Ft,"__await")?At[Zt(1548)](Ft[Zt(1155)]).then(function(ri){ft("next",ri,Ee,nt)},function(ri){var Li=Zt;ft(Li(1317),ri,Ee,nt)}):At[Zt(1548)](Ft)[Zt(705)](function(ri){bi.value=ri,Ee(bi)},function(ri){var Li=Zt;return ft(Li(1317),ri,Ee,nt)});nt(Kt[Zt(529)])})(F,S,Me,Ue)})}return T=T?T[be(705)](_e,_e):_e()}}function mi(Jt){var At=X,j={tryLoc:Jt[0]};1 in Jt&&(j[At(932)]=Jt[1]),2 in Jt&&(j[At(1482)]=Jt[2],j.afterLoc=Jt[3]),this.tryEntries[At(962)](j)}function Pi(Jt){var At=X,j=Jt[At(929)]||{};j[At(1378)]=At(655),delete j[At(529)],Jt[At(929)]=j}function Ii(Jt){var At=X;this[At(1386)]=[{tryLoc:At(1157)}],Jt[At(689)](mi,this),this.reset(!0)}function ti(Jt){var At=X;if(Jt){var j,T=Jt[Lt];if(T)return T[At(1098)](Jt);if(At(1536)==Ni(Jt[At(811)]))return Jt;if(!isNaN(Jt[At(525)]))return j=-1,(T=function F(){for(var S=At;++j<Jt.length;)if(dt[S(1098)](Jt,j))return F[S(591)]=Jt[j],F[S(1251)]=!1,F;return F[S(591)]=void 0,F[S(1251)]=!0,F}).next=T}return{next:Vi}}function Vi(){return{value:void 0,done:!0}}return he(_t,X(370),Dt[X(1178)]=St),he(St,X(370),Dt),Dt.displayName=he(St,Si,X(570)),Be[X(885)]=function(Jt){var At=X;return Jt=At(1536)==Ni(Jt)&&Jt[At(370)],!!Jt&&(Jt===Dt||(Jt[At(519)]||Jt[At(642)])==="GeneratorFunction")},Be.mark=function(Jt){var At=X;return Object[At(767)]?Object[At(767)](Jt,St):(Jt[At(1323)]=St,he(Jt,Si,"GeneratorFunction")),Jt.prototype=Object[At(1287)](_t),Jt},Be[X(318)]=function(Jt){return{__await:Jt}},Xt(ot[X(1178)]),he(ot[X(1178)],qt,function(){return this}),Be[X(441)]=ot,Be.async=function(Jt,At,j,T,F){var S=X;F===void 0&&(F=Promise);var be=new ot(Bi(Jt,At,j,T),F);return Be.isGeneratorFunction(At)?be:be.next()[S(705)](function(_e){var Me=S;return _e[Me(1251)]?_e[Me(591)]:be[Me(811)]()})},Xt(_t),he(_t,Si,"Generator"),he(_t,Lt,function(){return this}),he(_t,X(1503),function(){return"[object Generator]"}),Be[X(743)]=function(Jt){var At=X,j,T=[];for(j in Jt)T[At(962)](j);return T[At(408)](),function F(){for(var S=At;T[S(525)];){var be=T[S(1162)]();if(be in Jt)return F[S(591)]=be,F[S(1251)]=!1,F}return F[S(1251)]=!0,F}},Be[X(1544)]=ti,Ii[X(1178)]={constructor:Ii,reset:function(At){var j=X;if(this.prev=0,this[j(811)]=0,this[j(1520)]=this[j(1434)]=void 0,this[j(1251)]=!1,this.delegate=null,this[j(1515)]="next",this[j(529)]=void 0,this[j(1386)][j(689)](Pi),!At)for(var T in this)T.charAt(0)==="t"&&dt[j(1098)](this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){var At=X;this[At(1251)]=!0;var j=this.tryEntries[0][At(929)];if(At(1317)===j[At(1378)])throw j[At(529)];return this[At(1472)]},dispatchException:function(At){var j=X;if(this[j(1251)])throw At;var T=this;function F(ft,Gt){var Ft=j;return _e[Ft(1378)]=Ft(1317),_e[Ft(529)]=At,T.next=ft,Gt&&(T.method=Ft(811),T[Ft(529)]=void 0),!!Gt}for(var S=this.tryEntries[j(525)]-1;0<=S;--S){var be=this[j(1386)][S],_e=be[j(929)];if(be[j(1061)]==="root")return F(j(974));if(be.tryLoc<=this[j(707)]){var Me=dt[j(1098)](be,j(932)),Ue=dt[j(1098)](be,j(1482));if(Me&&Ue){if(this[j(707)]<be[j(932)])return F(be.catchLoc,!0);if(this[j(707)]<be.finallyLoc)return F(be[j(1482)])}else if(Me){if(this.prev<be[j(932)])return F(be[j(932)],!0)}else{if(!Ue)throw new Error(j(946));if(this.prev<be.finallyLoc)return F(be[j(1482)])}}}},abrupt:function(At,j){for(var T=X,F=this[T(1386)].length-1;0<=F;--F){var S=this[T(1386)][F];if(S.tryLoc<=this[T(707)]&&dt[T(1098)](S,T(1482))&&this.prev<S[T(1482)]){var be=S;break}}var _e=(be=be&&(T(1478)===At||At==="continue")&&be[T(1061)]<=j&&j<=be[T(1482)]?null:be)?be[T(929)]:{};return _e[T(1378)]=At,_e[T(529)]=j,be?(this[T(1515)]="next",this[T(811)]=be[T(1482)],wt):this[T(1196)](_e)},complete:function(At,j){var T=X;if(T(1317)===At[T(1378)])throw At[T(529)];return At[T(1378)]==="break"||T(1187)===At[T(1378)]?this[T(811)]=At[T(529)]:T(678)===At[T(1378)]?(this[T(1472)]=this[T(529)]=At[T(529)],this[T(1515)]=T(678),this[T(811)]=T(974)):T(655)===At[T(1378)]&&j&&(this[T(811)]=j),wt},finish:function(At){for(var j=X,T=this[j(1386)].length-1;0<=T;--T){var F=this.tryEntries[T];if(F[j(1482)]===At)return this[j(1196)](F.completion,F[j(478)]),Pi(F),wt}},catch:function(At){for(var j=X,T=this.tryEntries.length-1;0<=T;--T){var F,S,be=this[j(1386)][T];if(be[j(1061)]===At)return(F=be.completion)[j(1378)]==="throw"&&(S=F.arg,Pi(be)),S}throw new Error(j(1279))},delegateYield:function(At,j,T){var F=X;return this.delegate={iterator:ti(At),resultName:j,nextLoc:T},F(811)===this[F(1515)]&&(this.arg=void 0),wt}},Be}He.exports=ce,He.exports[xe(1249)]=!0,He[xe(509)].default=He[xe(509)]},698:function(He){var G=I;function ge(xe){var ke=I;return He[ke(509)]=ge=ke(1536)==(typeof Symbol>"u"?"undefined":Ni(Symbol))&&ke(1142)==Ni(Symbol[ke(1528)])?function(ce){return Ni(ce)}:function(ce){var X=ke;return ce&&X(1536)==(typeof Symbol>"u"?"undefined":Ni(Symbol))&&ce[X(370)]===Symbol&&ce!==Symbol[X(1178)]?"symbol":Ni(ce)},He.exports[ke(1249)]=!0,He[ke(509)][ke(1507)]=He[ke(509)],ge(xe)}He[G(509)]=ge,He[G(509)].__esModule=!0,He[G(509)].default=He[G(509)]},687:function(He,G,ge){var xe=I;ge=ge(61)(),He.exports=ge;try{regeneratorRuntime=ge}catch{xe(1415)==(typeof globalThis>"u"?"undefined":Ni(globalThis))?globalThis[xe(731)]=ge:Function("r","regeneratorRuntime = r")(ge)}}},Ye={},J.n=function(R){var He=I,G=R&&R.__esModule?function(){return R[He(1507)]}:function(){return R};return J.d(G,{a:G}),G},J.d=function(R,He){var G=I;for(var ge in He)J.o(He,ge)&&!J.o(R,ge)&&Object[G(645)](R,ge,{enumerable:!0,get:He[ge]})},J.o=function(R,He){return Object[re(1178)][re(1340)][re(1098)](R,He)},J.r=function(R){var He=re;typeof Symbol<"u"&&Symbol[He(1111)]&&Object.defineProperty(R,Symbol.toStringTag,{value:He(384)}),Object.defineProperty(R,"__esModule",{value:!0})},et={},function(){var R=re;function He(oe,si,Ge,u,s,e,r){var b=I;try{var A=oe[e](r),Ce=A[b(591)]}catch(Ae){return void Ge(Ae)}A[b(1251)]?si(Ce):Promise[b(1548)](Ce)[b(705)](u,s)}function G(oe){return function(){var si=this,Ge=arguments;return new Promise(function(u,s){var e=I,r=oe[e(1089)](si,Ge);function b(Ce){He(r,u,s,b,A,"next",Ce)}function A(Ce){He(r,u,s,b,A,"throw",Ce)}b(void 0)})}}function ge(oe,si){if(!(oe instanceof si))throw new TypeError("Cannot call a class as a function")}function xe(oe,si){for(var Ge=I,u=0;u<si.length;u++){var s=si[u];s.enumerable=s[Ge(1296)]||!1,s[Ge(815)]=!0,Ge(591)in s&&(s[Ge(443)]=!0),Object[Ge(645)](oe,s.key,s)}}function ke(oe,si,Ge){var u=I;return si&&xe(oe[u(1178)],si),Ge&&xe(oe,Ge),Object[u(645)](oe,u(1178),{writable:!1}),oe}J.r(et),J.d(et,{JSPlayCtrl:function(){return Ar}});var X=J(687),ce=J.n(X),X=J(477),Be=J.n(X);function lt(){var oe=I;return Be()(oe(1586),oe(845),void 0,void 0)}var dt,Lt,qt,Si,he,Bi,yt=1281,wt=1282,pt=1285,Dt=1287,St=1288,Et=1289,jt=1302,_t=1,Xt=2,ot=3,mi=0,Pi=256,Ii=512,ti=768,Vi=1024,Jt=1280,At=1536,j=1792,T=2048,F=2304,S=2560,be=1,_e=2,Me=4,Ue=8,ft=16,Gt=32,Ft=function(){var oe=I;function si(Ge,u,s){var e=I;ge(this,si),this[e(1454)]=0,this[e(1384)]=0,this[e(1349)]=null,this[e(1561)]=!0,this[e(1113)]=[],this[e(1500)]=!0,this.sab=Ge,this[e(964)]=30,this.needSetPreSoft=!1,this[e(1416)]=2,this.decoderOutSuccess=!1,this.decoderObjNeedReset=!1,this.oVideoRenderHandle=u,this[e(602)]=this[e(602)].bind(this),this[e(312)]=this[e(312)][e(979)](this),(this[e(1376)]=null)!=s&&(this[e(1376)]=s)}return ke(si,[{key:oe(1271),value:function(){var u=oe,s;this.decoderObj==null&&(s={output:this[u(602)],error:this[u(312)]},this[u(1349)]=new VideoDecoder(s)),this[u(1500)]&&(this.underflow=!1,setTimeout(this[u(1439)][u(1141)](),0)),this.decoderCurStatus=2,this.FirstFrame=!0}},{key:oe(1545),value:function(u,s){var e=oe;this.decoderObj==null||e(600)!=this.decoderObj[e(1037)]&&!this[e(1561)]||this.decodeProcess(u,s),s[e(386)]&&this[e(1110)]()}},{key:oe(837),value:function(u){for(var s=oe,e=0,r=arguments[s(525)],b=new Array(1<r?r-1:0),A=1;A<r;A++)b[A-1]=arguments[A];for(var Ce=0,Ae=b;Ce<Ae[s(525)];Ce++)e+=Ae[Ce][s(525)];for(var zt=new u(e),z=0,H=0,K=b;H<K[s(525)];H++){var le=K[H];zt[s(483)](le,z),z+=le.length}return zt}},{key:oe(523),value:function(u){for(var s=oe,e=null,r=null,b=null,A=!1,Ce=!1,Ae=0,zt=0;zt<u.length-4;zt++){if(u[zt]!=0||u[zt+1]!=0||u[zt+2]!=0||u[zt+3]!=1||u[zt+4]!=103&&u[zt+4]!=39||(zt!=0?(Ce=!0,e=u[s(809)](zt),Ae=zt):e=u),u[zt]==0&&u[zt+1]==0&&u[zt+2]==0&&u[zt+3]==1&&(u[zt+4]==9||u[zt+4]==6)){if(e==null)continue;r==null&&(r=u.slice(Ae,zt),A=!0)}if(u[zt]==0&&u[zt+1]==0&&u[zt+2]==0&&u[zt+3]==1&&(u[zt+4]==101||u[zt+4]==37)){A&&(b=u[s(809)](zt));break}}return A?this.concatenate(Uint8Array,r,b):Ce?e:u}},{key:oe(1369),value:function(u){return u[0]!=0||u[1]!=0||u[2]!=0||u[3]!=1||u[4]!=9&&u[4]!=6?u:u.slice(5)}},{key:oe(622),value:function(u,s,e,r){var b=oe,A="";if(s==5)A=b(848),console[b(1590)]("265 hard decoder");else if(s==256){for(var Ce=0;Ce<u[b(525)];Ce++)if(u[Ce]===103||u[Ce]===39){for(var Ae=u.subarray(Ce+1,Ce+4),A=b(1510),zt=0;zt<3;zt++){var z=Ae[zt].toString(16);A+=z=z[b(525)]<2?"0"+z:z}break}console.log("264 hard decoder")}else console[b(1590)](b(876));var H={codec:A,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return s!=5&&this[b(1222)]&&(H[b(453)]="prefer-software"),H}},{key:oe(1358),value:function(u,s){var e=oe;this[e(964)]!=s[e(964)]&&(this[e(964)]=s.frameRate),this[e(1454)]!=s[e(1454)]&&(this[e(1454)]=s[e(1454)]),this[e(1384)]!=s.height&&(this[e(1384)]=s.height),s[e(1222)]&&(this[e(1222)]=s[e(1222)]);var r=u;if(this[e(1416)]!=4&&this[e(1349)]!=null){if(this[e(1349)][e(1037)]=="configured"){var b=new EncodedVideoChunk({data:r,timestamp:s[e(432)],type:s[e(1392)]?e(581):e(945)});this[e(1349)][e(1027)](b),u=r=null,s[e(952)]}else if(s[e(1392)]&&e(1283)==this[e(1349)][e(1037)]){if(b=this[e(622)](u,s[e(714)],s[e(1454)],s[e(1384)]),b.codec=="")return-1;this[e(1349)][e(1185)](b),r=this[e(523)](u),this[e(1561)]=!1,b=new EncodedVideoChunk({data:r,timestamp:s.timeStamp,type:s[e(1392)]?e(581):e(945)}),this[e(1349)][e(1027)](b),r=null}}}},{key:oe(602),value:function(u){var s=oe;this[s(1349)][s(1037)]=="configured"?(u.format,u.codedWidth,u.codedHeight,u.displayWidth,u.displayHeight,u.duration,u.timestamp,this[s(1113)][s(962)](u),this[s(345)]||(this[s(345)]=!0)):u.close()}},{key:oe(778),value:function(u){var s=oe,e=this;u[s(559)],createImageBitmap(u)[s(705)](function(r){var b=s;u[b(327)](),e[b(1113)][b(962)](r)})}},{key:oe(312),value:function(u){var s=oe;console[s(1590)]("hardDecode reportError:"+u[s(1321)]+s(1099)+this[s(1349)][s(1037)]+",frameRate:"+this.frameRate),this[s(345)]?this[s(503)]=!0:(this[s(1439)][s(598)](),console[s(1590)]("%cswitch hardVideoDecoder to softVideoDecoder",s(692)))}},{key:"destroyDecoder",value:function(){var u=this;return new Promise(function(s,e){var r=I;u.clearDecoderObjBuffer()[r(705)](function(){var b=r;u.decoderObj!=null&&(b(897)!=u[b(1349)][b(1037)]&&u[b(1349)].close(),console[b(1590)](b(1165)),u[b(1349)]=null),u[b(1416)]=4,u.decoderOutSuccess=!1,u[b(1561)]=!0,u[b(1500)]=!0,u[b(1222)]=!1,u[b(503)]=!1,s()},function(){e()})})}},{key:"resetDecoder",value:function(){var u=this;return new Promise(function(s,e){var r=I;u[r(437)]()[r(705)](function(){var b=r;u.initDecoder(),console[b(1590)](b(1073),"color:red"),s()},function(){e()})})}},{key:oe(1579),value:function(){var u=this;return new Promise(function(s,e){for(var r=I,b=u.ready_frames[r(525)],A=0;A<b;A++)u[r(1113)].shift()[r(327)]();u[r(1113)][r(387)](0,u[r(1113)][r(525)]),u[r(1349)]!=null&&r(600)==u[r(1349)][r(1037)]&&u[r(1349)].reset(),s()})}},{key:oe(1110),value:function(){var u=oe;return this[u(1349)][u(1537)]==0&&this[u(1113)].length==0&&(this.decoderObj[u(1468)](),console[u(1590)](u(1468))),1}}]),si}(),Ee={SR_OK:1,SR_ERR_NOT_SUPPORT:2147483649,SR_ERR_SUBPORT:2147483650,SR_ERR_ALLOC_MEMORY:2147483651,SR_ERR_CALL_ORDER:2147483652,SR_ERR_PARAM:2147483653,SR_ERR_CAPTURE:2147483654,SR_ERR_SUBPORT_FULL:2147483655,SR_ERR_SHADER:2147483656,SR_ERR_3D_MODEL:2147483657,SR_ERR_FONT:2147483658,SR_ERR_MEMORY_LIMIT:2147483659,SR_ERR_WEBGPU_RESOURCE:2147483660,SR_ERR_CANVAS:2147483661,SR_ERR_FREETYPE_INIT:2147483662,SR_ERR_FREETYPE_RESOURCE:2147483663},nt={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23},Zt=0,bi=1,Kt=2,ri=3,Li=4,li=0,Mt=1,Nt=2,ai=1,ji=2,tn=3,Ui=0,Gi=1,nn=1,Zi=2;function Yi(oe,si,Ge){var u=I;si in oe?Object[u(645)](oe,si,{value:Ge,enumerable:!0,configurable:!0,writable:!0}):oe[si]=Ge}function bn(oe,si,Ge,u){var s=I;return oe[s(494)](0)<<24|si[s(494)](0)<<16|Ge[s(494)](0)<<8|u[s(494)](0)}var vn=null,jn=ke(function oe(){var si=I;ge(this,oe),Yi(this,si(844),function(){var Ge=si,u=G(ce()[Ge(460)](function s(e,r,b){var A=Ge,Ce;return ce()[A(894)](function(Ae){for(var zt=A;;)switch(Ae.prev=Ae[zt(811)]){case 0:vn==null&&((Ce=document[zt(1546)](zt(1237)))[zt(1378)]=zt(953),Ce.src=e,Ce[zt(1173)]=function(){var z=zt;window[z(384)]()[z(705)](function(H){vn=H,r(b)})},document[zt(1051)][zt(1175)](Ce));case 1:case zt(974):return Ae[zt(1476)]()}},s)}));return function(s,e,r){var b=Ge;return u[b(1089)](this,arguments)}}()),Yi(this,"Error_String",function(Ge){var u=si;return vn[u(1401)](Ge)}),Yi(this,"Library_Version",function(Ge){var u=si,s=[0],e=[0],r=[0];return vn[u(1583)](Ge.bind,s,e,r),{major:s[0],minor:e[0],patch:r[0]}}),Yi(this,"Init_FreeType",function(Ge){var u=si;if(vn!=null)return vn[u(1375)](Ge[u(979)])}),Yi(this,"Done_FreeType",function(Ge){var u=si;if(vn!=null)return vn[u(792)](Ge[u(979)])}),Yi(this,si(883),function(Ge,u,s,e){var r=si;if(vn!=null)return vn[r(1338)](Ge[r(979)],u,s,e[r(979)])}),Yi(this,si(1310),function(Ge){var u=si;if(vn!=null)return vn[u(853)](Ge[u(979)])}),Yi(this,si(530),function(Ge,u){if(vn!=null)return vn.FT_Get_Char_Index(Ge.bind,u)}),Yi(this,si(1186),function(Ge,u){var s=si,e=2<arguments[s(525)]&&arguments[2]!==void 0?arguments[2]:he[s(971)];if(vn!=null)return vn.FT_Load_Char(Ge[s(979)],u,e)}),Yi(this,si(354),function(Ge,u,s,e,r){var b=si;if(vn!=null)return vn[b(1270)](Ge[b(979)],u,s,e,r)}),Yi(this,si(1431),function(Ge,u,s){var e=si;if(vn!=null)return vn[e(764)](Ge[e(979)],u,s)}),Yi(this,si(1273),function(Ge){var u=si,s=1<arguments[u(525)]&&arguments[1]!==void 0?arguments[1]:Bi[u(800)];if(vn!=null)return vn[u(1118)](Ge,s)}),Yi(this,si(623),function(Ge,u,s,e){var r=si,b=4<arguments[r(525)]&&arguments[4]!==void 0?arguments[4]:new Lt;if(vn!=null)return vn[r(740)](Ge.bind,u,s,e,b)}),Yi(this,si(889),function(Ge,u,s){var e=si;if(vn!=null)return vn[e(1007)](Ge,u,s)})}),un=((X=dt=dt||{})[X.Ok=0]="Ok",X[X[R(996)]=1]=R(996),X[X[R(653)]=2]="Unknown_File_Format",X[X[R(803)]=3]=R(803),X[X[R(807)]=4]=R(807),X[X[R(1059)]=5]="Lower_Module_Version",X[X[R(1481)]=6]=R(1481),X[X[R(688)]=7]="Unimplemented_Feature",X[X.Invalid_Table=8]=R(1448),X[X[R(1031)]=9]=R(1031),X[X[R(1289)]=10]=R(1289),X[X[R(1460)]=11]=R(1460),X[X[R(827)]=12]=R(827),X[X[R(1034)]=16]=R(1034),X[X[R(1013)]=17]="Invalid_Character_Code",X[X[R(627)]=18]=R(627),X[X[R(748)]=19]=R(748),X[X[R(1102)]=20]=R(1102),X[X[R(1471)]=21]=R(1471),X[X[R(557)]=22]="Too_Many_Hints",X[X[R(736)]=23]=R(736),X[X.Invalid_Handle=32]=R(542),X[X[R(1332)]=33]="Invalid_Library_Handle",X[X[R(887)]=34]="Invalid_Driver_Handle",X[X[R(859)]=35]=R(859),X[X.Invalid_Size_Handle=36]=R(392),X[X[R(1368)]=37]=R(1368),X[X[R(608)]=38]="Invalid_CharMap_Handle",X[X[R(511)]=39]="Invalid_Cache_Handle",X[X[R(898)]=40]=R(898),X[X[R(936)]=48]=R(936),X[X.Too_Many_Extensions=49]=R(679),X[X[R(1121)]=64]=R(1121),X[X[R(1390)]=65]=R(1390),X[X[R(638)]=81]=R(638),X[X[R(1513)]=82]=R(1513),X[X[R(524)]=83]=R(524),X[X[R(385)]=84]=R(385),X[X[R(821)]=85]=R(821),X[X.Invalid_Frame_Operation=86]=R(546),X[X[R(403)]=87]=R(403),X[X[R(1550)]=88]=R(1550),X[X.Raster_Uninitialized=96]="Raster_Uninitialized",X[X[R(1534)]=97]=R(1534),X[X[R(1493)]=98]=R(1493),X[X[R(1050)]=99]=R(1050),X[X.Too_Many_Caches=112]=R(1406),X[X[R(1191)]=128]=R(1191),X[X[R(1319)]=129]="Too_Few_Arguments",X[X.Stack_Overflow=130]=R(434),X[X[R(702)]=131]=R(702),X[X[R(538)]=132]="Bad_Argument",X[X[R(346)]=133]="Divide_By_Zero",X[X[R(1281)]=134]=R(1281),X[X[R(1495)]=135]=R(1495),X[X.ENDF_In_Exec_Stream=136]=R(849),X[X[R(553)]=137]=R(553),X[X[R(865)]=138]=R(865),X[X[R(637)]=139]=R(637),X[X[R(1428)]=140]="Too_Many_Function_Defs",X[X[R(1506)]=141]=R(1506),X[X[R(1560)]=142]="Table_Missing",X[X[R(1297)]=143]="Horiz_Header_Missing",X[X[R(910)]=144]=R(910),X[X[R(568)]=145]="Name_Table_Missing",X[X[R(1435)]=146]=R(1435),X[X[R(1389)]=147]="Hmtx_Table_Missing",X[X[R(975)]=148]="Post_Table_Missing",X[X.Invalid_Horiz_Metrics=149]=R(382),X[X[R(324)]=150]="Invalid_CharMap_Format",X[X[R(620)]=151]=R(620),X[X.Invalid_Vert_Metrics=152]="Invalid_Vert_Metrics",X[X[R(1008)]=153]=R(1008),X[X[R(1213)]=154]=R(1213),X[X[R(1449)]=155]=R(1449),X[X.DEF_In_Glyf_Bytecode=156]=R(1231),X[X.Missing_Bitmap=157]=R(495),X[X[R(566)]=160]=R(566),X[X[R(718)]=161]=R(718),X[X[R(1225)]=162]=R(1225),X[X[R(1234)]=163]=R(1234),X[X[R(662)]=164]="Glyph_Too_Big",X[X[R(442)]=176]="Missing_Startfont_Field",X[X[R(618)]=177]=R(618),X[X[R(464)]=178]="Missing_Size_Field",X[X[R(888)]=179]=R(888),X[X.Missing_Chars_Field=180]=R(999),X[X[R(1144)]=181]="Missing_Startchar_Field",X[X[R(788)]=182]=R(788),X[X[R(1093)]=183]=R(1093),X[X.Bbx_Too_Big=184]=R(895),X[X[R(1288)]=185]="Corrupted_Font_Header",X[X[R(735)]=186]=R(735),(X={NONE:0,0:R(672)})[X[R(1412)]=bn("c","o","m","p")]=R(1412),X[X[R(339)]=bn("b","i","t","s")]="BITMAP",X[X[R(1022)]=bn("o","u","t","l")]="OUTLINE",X[X[R(477)]=bn("p","l","o","t")]=R(477),Lt=ke(function oe(){ge(this,oe),this.x=0,this.y=0}),qt=function(){var oe=R;function si(){ge(this,si),this.bind=[null]}return ke(si,[{key:oe(520),value:function(){var u=oe,s=bind.FT_Init_FreeType(this[u(979)]);if(s!==dt.Ok)throw new Error("Library:init "+s[u(1503)]())}},{key:"done",value:function(){var u=oe,s=bind[u(792)](this[u(979)]);if(s!==dt.Ok)throw new Error("Library:done "+s[u(1503)]())}}]),si}(),Si=function(){var oe=R;function si(){var Ge=I;ge(this,si),this[Ge(979)]=[null]}return ke(si,[{key:oe(1479),get:function(){var u=oe;if(this[u(979)][0]===null)throw new Error;return this.bind[0]}},{key:oe(1518),get:function(){var u=oe;return this[u(1479)][u(1518)]}},{key:oe(709),get:function(){var u=oe;return this._bind[u(709)]}},{key:oe(1276),get:function(){var u=oe;return this[u(1479)][u(1276)]}},{key:oe(797),get:function(){var u=oe;return this[u(1479)][u(797)]}},{key:oe(1293),get:function(){var u=oe;return this[u(1479)][u(1293)]}},{key:oe(1312),get:function(){var u=oe;return this[u(1479)][u(1312)]}},{key:oe(1489),get:function(){var u=oe;return this[u(1479)][u(1489)]}},{key:oe(673),get:function(){var u=oe;return this[u(1479)][u(673)]}},{key:oe(475),get:function(){var u=oe;return this[u(1479)].units_per_EM}},{key:oe(1143),get:function(){var u=oe;return this[u(1479)][u(1143)]}},{key:oe(470),get:function(){return this._bind.descender}},{key:"height",get:function(){var u=oe;return this[u(1479)].height}},{key:"max_advance_width",get:function(){var u=oe;return this[u(1479)][u(1496)]}},{key:oe(860),get:function(){var u=oe;return this[u(1479)][u(860)]}},{key:oe(417),get:function(){var u=oe;return this[u(1479)][u(417)]}},{key:oe(590),get:function(){var u=oe;return this[u(1479)][u(590)]}},{key:oe(347),get:function(){var u=oe;return this[u(1479)].glyph}}]),si}(),(X=he=he||{})[X[R(971)]=0]=R(971),X[X[R(1526)]=1]=R(1526),X[X[R(861)]=2]=R(861),X[X[R(851)]=4]="RENDER",X[X[R(913)]=8]=R(913),X[X.VERTICAL_LAYOUT=16]=R(1223),X[X[R(615)]=32]="FORCE_AUTOHINT",X[X.CROP_BITMAP=64]=R(1320),X[X[R(340)]=128]=R(340),X[X[R(425)]=512]="IGNORE_GLOBAL_ADVANCE_WIDTH",X[X[R(1253)]=1024]="NO_RECURSE",X[X[R(1543)]=2048]="IGNORE_TRANSFORM",X[X.MONOCHROME=4096]=R(1393),X[X.LINEAR_DESIGN=8192]=R(1202),X[X[R(1445)]=32768]=R(1445),X[X[R(1071)]=1048576]=R(1071),X[X.COMPUTE_METRICS=2097152]=R(1017),X[X.BITMAP_METRICS_ONLY=4194304]="BITMAP_METRICS_ONLY",X[X[R(455)]=256]=R(455),X[X[R(377)]=16384]=R(377),(X=Bi=Bi||{})[X[R(800)]=0]=R(800),X[X[R(1413)]=1]=R(1413),X[X[R(872)]=2]=R(872),X[X.LCD=3]=R(1587),X[X[R(808)]=4]=R(808),X[X[R(701)]=5]=R(701),R(1475)),Un=R(641),Hn=R(1035),yn=.05,fn=1e-6,Cn=3.1415926,wr=.78539815,tr=1e-6,Nn=R(1011)!=(typeof Float32Array>"u"?"undefined":Ni(Float32Array))?Float32Array:Array;Math.hypot||(Math[R(378)]=function(){for(var oe=0,si=arguments.length;si--;)oe+=arguments[si]*arguments[si];return Math.sqrt(oe)});function lr(){var oe=new Nn(16);return Nn!=Float32Array&&(oe[1]=0,oe[2]=0,oe[3]=0,oe[4]=0,oe[6]=0,oe[7]=0,oe[8]=0,oe[9]=0,oe[11]=0,oe[12]=0,oe[13]=0,oe[14]=0),oe[0]=1,oe[5]=1,oe[10]=1,oe[15]=1,oe}function zr(oe,bt,Ge){var u=bt[0],s=bt[1],e=bt[2],r=bt[3],b=bt[4],A=bt[5],Ce=bt[6],Ae=bt[7],zt=bt[8],z=bt[9],H=bt[10],K=bt[11],le=bt[12],Xe=bt[13],vt=bt[14],bt=bt[15],Ht=Ge[0],gi=Ge[1],Hi=Ge[2],hi=Ge[3];return oe[0]=Ht*u+gi*b+Hi*zt+hi*le,oe[1]=Ht*s+gi*A+Hi*z+hi*Xe,oe[2]=Ht*e+gi*Ce+Hi*H+hi*vt,oe[3]=Ht*r+gi*Ae+Hi*K+hi*bt,Ht=Ge[4],gi=Ge[5],Hi=Ge[6],hi=Ge[7],oe[4]=Ht*u+gi*b+Hi*zt+hi*le,oe[5]=Ht*s+gi*A+Hi*z+hi*Xe,oe[6]=Ht*e+gi*Ce+Hi*H+hi*vt,oe[7]=Ht*r+gi*Ae+Hi*K+hi*bt,Ht=Ge[8],gi=Ge[9],Hi=Ge[10],hi=Ge[11],oe[8]=Ht*u+gi*b+Hi*zt+hi*le,oe[9]=Ht*s+gi*A+Hi*z+hi*Xe,oe[10]=Ht*e+gi*Ce+Hi*H+hi*vt,oe[11]=Ht*r+gi*Ae+Hi*K+hi*bt,Ht=Ge[12],gi=Ge[13],Hi=Ge[14],hi=Ge[15],oe[12]=Ht*u+gi*b+Hi*zt+hi*le,oe[13]=Ht*s+gi*A+Hi*z+hi*Xe,oe[14]=Ht*e+gi*Ce+Hi*H+hi*vt,oe[15]=Ht*r+gi*Ae+Hi*K+hi*bt,oe}function Ir(oe,si,Ge,k){var s=R,e,r,b,A,Ce,Ae,zt,z,H,K,le,Xe,vt,bt,Ht,gi,Hi,hi,Ai,fi,D=k[0],h=k[1],k=k[2],V=Math.hypot(D,h,k);V<tr||(D*=V=1/V,h*=V,k*=V,V=Math[s(514)](Ge),Ge=Math[s(1268)](Ge),r=si[0],b=si[1],A=si[2],Ce=si[3],Ae=si[4],zt=si[5],z=si[6],H=si[7],K=si[8],le=si[9],Xe=si[10],vt=si[11],Ht=D*h*(e=1-Ge)-k*V,gi=h*h*e+Ge,Hi=k*h*e+D*V,hi=D*k*e+h*V,Ai=h*k*e-D*V,fi=k*k*e+Ge,oe[0]=r*(Ge=D*D*e+Ge)+Ae*(bt=h*D*e+k*V)+K*(k=k*D*e-h*V),oe[1]=b*Ge+zt*bt+le*k,oe[2]=A*Ge+z*bt+Xe*k,oe[3]=Ce*Ge+H*bt+vt*k,oe[4]=r*Ht+Ae*gi+K*Hi,oe[5]=b*Ht+zt*gi+le*Hi,oe[6]=A*Ht+z*gi+Xe*Hi,oe[7]=Ce*Ht+H*gi+vt*Hi,oe[8]=r*hi+Ae*Ai+K*fi,oe[9]=b*hi+zt*Ai+le*fi,oe[10]=A*hi+z*Ai+Xe*fi,oe[11]=Ce*hi+H*Ai+vt*fi,si!==oe&&(oe[12]=si[12],oe[13]=si[13],oe[14]=si[14],oe[15]=si[15]))}var _n=function(si,Ge,u,s,e){var r=R;return Ge=1/Math[r(616)](Ge/2),si[0]=Ge/u,si[1]=0,si[2]=0,si[3]=0,si[4]=0,si[5]=Ge,si[6]=0,si[7]=0,si[8]=0,si[9]=0,si[11]=-1,si[12]=0,si[13]=0,si[15]=0,e!=null&&e!==1/0?(si[10]=(e+s)*(u=1/(s-e)),si[14]=2*e*s*u):(si[10]=-1,si[14]=-2*s),si},fr=function(si,Ge,u,s,e,r,b){var A=1/(Ge-u),Ce=1/(s-e),Ae=1/(r-b);return si[0]=-2*A,si[1]=0,si[2]=0,si[3]=0,si[4]=0,si[5]=-2*Ce,si[6]=0,si[7]=0,si[8]=0,si[9]=0,si[10]=2*Ae,si[11]=0,si[12]=(Ge+u)*A,si[13]=(e+s)*Ce,si[14]=(b+r)*Ae,si[15]=1,si};function Jn(){var oe=new Nn(3);return Nn!=Float32Array&&(oe[0]=0,oe[1]=0,oe[2]=0),oe}function kn(oe,si,Ge){var u=new Nn(3);return u[0]=oe,u[1]=si,u[2]=Ge,u}Jn(),X=new Nn(4),Nn!=Float32Array&&(X[0]=0,X[1]=0,X[2]=0,X[3]=0);function mr(){var oe=new Nn(4);return Nn!=Float32Array&&(oe[0]=0,oe[1]=0,oe[2]=0),oe[3]=1,oe}Jn(),kn(1,0,0),kn(0,1,0),mr(),mr(),X=new Nn(9),Nn!=Float32Array&&(X[1]=0,X[2]=0,X[3]=0,X[5]=0,X[6]=0,X[7]=0),X[0]=1,X[4]=1,X[8]=1,X=new Nn(2),Nn!=Float32Array&&(X[0]=0,X[1]=0);var Yn=function(){var oe=R;function si(){var Ge=I;ge(this,si),this[Ge(852)]=.785,this[Ge(1488)]=1,this[Ge(1240)]=.02,this[Ge(1505)]=1e3,this[Ge(1337)]=0,this[Ge(1095)]=0,this[Ge(970)]=0,this[Ge(649)]=1,this.bOrtho=!1,this.matView=lr(),this[Ge(1308)]=lr(),this[Ge(1169)]=kn(0,0,0),this.vecCenter=kn(0,0,100),this[Ge(1581)]=kn(0,1,0)}return ke(si,[{key:oe(338),value:function(u){this.fTheta=u}},{key:"GetYaw",value:function(){var u=oe;return this[u(1337)]}},{key:"SetPitch",value:function(u){var s=oe;this[s(1095)]=u}},{key:oe(1177),value:function(){return this.fAlpha}},{key:"SetRoll",value:function(u){var s=oe;this[s(970)]=u}},{key:oe(348),value:function(){return this.fBeta}},{key:oe(995),value:function(u){var s=oe;this[s(649)]=u}},{key:"GetScale",value:function(){var u=oe;return this[u(649)]}},{key:oe(659),value:function(u){var s=oe;this[s(852)]=u}},{key:oe(791),value:function(u){this.fAspect=u}},{key:oe(1400),value:function(u){var s=oe;this[s(1240)]=u}},{key:"SetFar",value:function(u){var s=oe;this[s(1505)]=u}},{key:oe(1136),value:function(u){var s=oe;this[s(1517)]=u}},{key:oe(311),value:function(u,s){var e=oe,r,b,A,Ce,Ae,zt;u<=0||s<=0||(this[e(1517)]==1?fr(this.matProj,0,u,s,0,this[e(1240)],this[e(1505)]):(r=this[e(852)]/Cn*180,_n(this.matProj,r,u/s,this[e(1240)],this[e(1505)])),this[e(1169)]=kn(0,0,this.fScale),this[e(506)]=kn(0,0,0),this[e(1581)]=kn(0,1,0),r=kn(1,0,0),u=kn(0,1,0),s=kn(0,0,1),function(z,Ai,ve,h){var Xe=e,vt,bt,Ht,gi,Hi=Ai[0],hi=Ai[1],Ai=Ai[2],fi=h[0],D=h[1],h=h[2],k=ve[0],V=ve[1],ve=ve[2];if(Math[Xe(1502)](Hi-k)<tr&&Math[Xe(1502)](hi-V)<tr&&Math.abs(Ai-ve)<tr)return(gi=z)[0]=1,gi[1]=0,gi[2]=0,gi[3]=0,gi[4]=0,gi[5]=1,gi[6]=0,gi[7]=0,gi[8]=0,gi[9]=0,gi[10]=1,gi[11]=0,gi[12]=0,gi[13]=0,gi[14]=0,gi[15]=1;gi=Ai-ve,vt=D*(gi*=V=1/Math[Xe(378)](ve=Hi-k,k=hi-V,gi))-h*(k*=V),h=h*(ve*=V)-fi*gi,fi=fi*k-D*ve,(V=Math[Xe(378)](vt,h,fi))?(vt*=V=1/V,h*=V,fi*=V):fi=h=vt=0,D=k*fi-gi*h,bt=gi*vt-ve*fi,Ht=ve*h-k*vt,(V=Math[Xe(378)](D,bt,Ht))?(D*=V=1/V,bt*=V,Ht*=V):Ht=bt=D=0,z[0]=vt,z[1]=D,z[2]=ve,z[3]=0,z[4]=h,z[5]=bt,z[6]=k,z[7]=0,z[8]=fi,z[9]=Ht,z[10]=gi,z[11]=0,z[12]=-(vt*Hi+h*hi+fi*Ai),z[13]=-(D*Hi+bt*hi+Ht*Ai),z[14]=-(ve*Hi+k*hi+gi*Ai),z[15]=1}(b=lr(),this[e(1169)],this.vecCenter,this[e(1581)]),A=lr(),Ce=lr(),Ae=lr(),zt=lr(),Ir(Ce,A,-this[e(1095)],r),Ir(Ae,Ce,-this[e(1337)],u),Ir(zt,Ae,-this[e(970)],s),zr(this[e(956)],b,zt))}},{key:oe(998),value:function(){var u=oe;return this[u(956)]}},{key:oe(1210),value:function(){var u=oe;return this[u(1308)]}}]),si}(),Dr=function(){var oe=R;function si(){var u=I;ge(this,si),this[u(863)]=null,this.ctx=null,this.videoShaderProgram=0,this[u(309)]=0,this[u(775)]=0,this.frameDisplayWidth=0,this[u(320)]=0,this[u(978)]=!1,this[u(355)]=!1,this[u(1023)]=!0,this[u(1571)]=0,this.nMaxPointNum=0,this[u(522)]=null,this[u(1394)]=null,this[u(1014)]=0,this.glLineClrBuffer=0,this[u(1256)]=0,this[u(1108)]=0,this[u(1065)]=null,this[u(603)]=null,this.nMaxFillBlockTriNum=0,this[u(1130)]=0,this[u(1085)]=0,this[u(560)]=0,this[u(1096)]=!1,this[u(782)]=null,this.FreetypeLibHandle=null,this.FTFace=null,this[u(411)]=null,this[u(890)]=0,this[u(1313)]=0,this.nFontColorTexture=0,this[u(644)]=0,this[u(551)]=0,this[u(1328)]=0,this[u(941)]=[],this[u(828)]=!1,this[u(429)]=null,this.enDisplayEffect=nt.SR_DE_NULL,this[u(1491)]=-1,this[u(582)]=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this[u(1566)]=0,this.nSemiSphereTexSize=0,this[u(334)]=null,this[u(371)]=null,this[u(801)]=0,this[u(1109)]=0,this[u(749)]=0,this.fCylinderHeight=0,this[u(493)]=0,this[u(983)]=!1,this[u(482)]=null,this.fRotateX=0,this[u(669)]=0,this.fScale=0,this[u(1333)]=null,this[u(1075)]=null,this[u(1230)]=null,this[u(1411)]=null,this[u(762)]=!0}var Ge;return ke(si,[{key:oe(1359),value:function(s,e){var r=oe,b=this[r(926)];if(b==null||s==null||e==null)return-1;var A=b[r(855)](b[r(353)]);return b.shaderSource(A,s),b[r(1307)](A),b.getShaderParameter(A,b[r(629)])?(s=b.createShader(b[r(539)]),b[r(532)](s,e),b[r(1307)](s),b[r(757)](s,b[r(629)])?(e=b.createProgram(),b[r(730)](e,A),b[r(730)](e,s),b[r(1573)](e),b.getProgramParameter(e,b[r(1149)])?(b[r(1205)](A),b[r(1205)](s),e):(console[r(1590)]("Program failed to compile: "+b[r(950)](e)),-1)):(console[r(1590)](r(906)+b[r(813)](s)),-1)):(console[r(1590)](r(407)+b[r(813)](A)),-1)}},{key:oe(1483),value:function(s){var e=oe;return s==null?Ee[e(650)]:(this[e(863)]=s,this[e(926)]=this[e(863)].getContext(e(1549)),this[e(926)]||(this[e(926)]=this[e(863)][e(1021)]("webgl")||this[e(863)].getContext(e(763)),this[e(978)]=!0,console[e(1590)]("only support webgl1")),this[e(926)]?Ee.SR_OK:(console[e(1590)]("your browser does not support WebGL"),Ee[e(1129)]))}},{key:"SR_Draw",value:function(s){var e=oe;if(this[e(926)]==null)return Ee.SR_ERR_CALL_ORDER;if(s==null)return Ee.SR_ERR_PARAM;if(this.videoShaderProgram==0||this[e(309)]==0||this[e(775)]==0)return Ee[e(1538)];if(this[e(1584)]==s[e(1501)]&&this[e(320)]==s[e(526)]||(this[e(1584)]=s[e(1501)],this[e(320)]=s[e(526)]),this.bRecreateTex==1){this[e(1571)]!=0&&(r=this[e(1571)],this.ctx.deleteTexture(r),this[e(1571)]=0);var r=this[e(926)][e(1514)]();if(r<=0)return Ee[e(528)];this[e(926)].bindTexture(this[e(926)].TEXTURE_2D,r),this.bAntialias==1?this[e(926)][e(760)](this[e(926)][e(588)],this.ctx[e(373)],this[e(926)].LINEAR_MIPMAP_NEAREST):this[e(926)][e(760)](this[e(926)][e(588)],this.ctx[e(373)],this[e(926)].LINEAR),this[e(926)][e(760)](this[e(926)].TEXTURE_2D,this[e(926)][e(715)],this[e(926)][e(406)]),this[e(926)][e(760)](this[e(926)][e(588)],this[e(926)][e(976)],this[e(926)].CLAMP_TO_EDGE),this[e(926)].texParameteri(this[e(926)][e(588)],this[e(926)].TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this[e(1571)]=r,this[e(1023)]=!1}if(this[e(926)][e(756)](this[e(1257)]),this.ctx[e(1044)](this.ctx[e(1331)],this[e(309)]),r=this[e(926)][e(416)](this[e(1257)],"xy"),r<0)return Ee[e(528)];if(this[e(926)].vertexAttribPointer(r,3,this[e(926)][e(1473)],!1,0,0),this[e(926)][e(1362)](r),this.ctx[e(1044)](this[e(926)][e(1331)],this[e(775)]),r=this[e(926)][e(416)](this.videoShaderProgram,"uv"),r<0)return Ee.SR_ERR_WEBGL_RESOURCE;this[e(926)][e(1193)](r,2,this.ctx[e(1473)],!1,0,0),this[e(926)][e(1362)](r),this[e(926)][e(1044)](this[e(926)][e(1331)],null);var b=this.enDisplayEffect;switch(b){case nt[e(1347)]:break;case nt.SR_DE_FISH_ORIGINAL:case nt[e(1282)]:case nt[e(474)]:case nt[e(994)]:case nt[e(1379)]:case nt[e(1212)]:case nt[e(472)]:case nt.SR_DE_FISH_PANORAMA_FLOOR_180:case nt.SR_DE_FISH_PANORAMA_WALL:if(this[e(429)]==null)return Ee[e(1538)];var Ce=[],A=this.pFishParamManager[e(796)](this[e(1491)],Ce);if(Ee[e(593)]!=A)return A;if(nt[e(677)]==b){if(A=this.ctx[e(893)](this.videoShaderProgram,e(368)),A<=0||(this[e(926)][e(871)](A,Ce.bBlack),A=this[e(926)].getUniformLocation(this[e(1257)],e(818)),A<=0))return Ee[e(528)];this.ctx[e(871)](A,Ce[e(818)])}if(nt.SR_DE_FISH_PTZ_CEILING==b||nt[e(474)]==b||nt.SR_DE_FISH_PTZ_WALL==b){if(A=this[e(926)][e(893)](this[e(1257)],e(988)),A<=0||(this.ctx.uniform1f(A,Ce[e(780)]),A=this[e(926)].getUniformLocation(this.videoShaderProgram,e(1211)),A<=0)||(this[e(926)].uniform1f(A,Ce.fSinH),A=this.ctx.getUniformLocation(this.videoShaderProgram,e(927)),A<=0)||(this[e(926)].uniform1f(A,Ce[e(1025)]),A=this[e(926)][e(893)](this.videoShaderProgram,e(451)),A<=0)||(this[e(926)].uniform1f(A,Ce.fSinV),A=this[e(926)][e(893)](this[e(1257)],e(1580)),A<=0))return Ee[e(528)];this[e(926)][e(375)](A,Ce[e(1580)])}if(nt[e(1379)]==b||nt[e(1212)]==b||nt[e(472)]==b||nt.SR_DE_FISH_PANORAMA_FLOOR_180==b){if(A=this[e(926)].getUniformLocation(this.videoShaderProgram,"fAngle"),A<=0)return Ee.SR_ERR_WEBGL_RESOURCE;this[e(926)][e(375)](A,Ce[e(1485)])}if(A=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1"),A<=0)return Ee[e(528)];if(this.ctx[e(375)](A,Ce[e(473)]),A=this[e(926)][e(893)](this.videoShaderProgram,e(332)),A<=0)return Ee.SR_ERR_WEBGL_RESOURCE;if(this.ctx[e(375)](A,Ce[e(919)]),A=this[e(926)][e(893)](this[e(1257)],e(737)),A<=0||(this[e(926)].uniform1f(A,Ce[e(1171)]),A=this.ctx[e(893)](this[e(1257)],"fRY2"),A<=0))return Ee[e(528)];this[e(926)][e(375)](A,Ce[e(825)]);break;case nt[e(1010)]:this[e(482)][e(995)](this[e(649)]),this[e(482)].SetPitch(3.14-this[e(420)]),this[e(482)].SetYaw(-this[e(669)]),this.pCamera[e(311)](this[e(863)][e(1454)],this[e(863)][e(1384)]);var A=this[e(482)][e(998)](),Ce=this[e(482)][e(1210)](),Ae=this.ctx[e(893)](this[e(1257)],e(956));if(Ae<=0||(this[e(926)][e(1541)](Ae,!1,A),Ae=this[e(926)][e(893)](this.videoShaderProgram,e(1308)),Ae<=0))return Ee[e(528)];this.ctx.uniformMatrix4fv(Ae,!1,Ce);break;case nt.SR_DE_FISH_CYLINDER_CEILING:case nt[e(405)]:if(this.pCamera[e(995)](this.fScale),this[e(482)][e(515)](-this.fRotateX),this[e(482)][e(338)](-this[e(669)]),this.pCamera[e(311)](this[e(863)][e(1454)],this[e(863)][e(1384)]),A=this[e(482)][e(998)](),Ae=this[e(482)][e(1210)](),Ce=this.ctx.getUniformLocation(this[e(1257)],e(956)),Ce<=0||(this[e(926)].uniformMatrix4fv(Ce,!1,A),Ce=this[e(926)][e(893)](this[e(1257)],e(1308)),Ce<=0))return Ee[e(528)];this[e(926)].uniformMatrix4fv(Ce,!1,Ae)}if(this.canvas.width<=0||this.canvas[e(1384)]<=0)return Ee[e(1129)];if(this[e(926)][e(349)](0,0,this[e(863)][e(1454)],this[e(863)][e(1384)]),this.ctx.clearColor(0,0,0,1),this[e(926)].clear(this[e(926)][e(744)]|this[e(926)].DEPTH_BUFFER_BIT),this[e(983)]&&(this[e(926)][e(326)](this[e(926)].DEPTH_TEST),this[e(926)][e(610)](this.ctx.LESS),this.ctx[e(1383)](!0),this[e(762)]==1?this.ctx[e(326)](this[e(926)][e(533)]):this[e(926)].disable(this.ctx[e(533)])),this.ctx[e(1227)](this[e(926)].TEXTURE_2D,0,this[e(926)].RGBA,this.ctx[e(917)],this.ctx[e(1084)],s),this[e(355)]==1&&this[e(926)][e(450)](this.ctx[e(588)]),this.onlySupportedWebGL1||this[e(926)][e(314)](this[e(926)][e(1078)],0,1,0),this[e(983)]==0)this.ctx[e(908)](this.ctx[e(424)],0,4);else if(this[e(1198)]==nt[e(1010)]){if(this[e(794)]<=0)return Ee.SR_ERR_CALL_ORDER;this.ctx[e(908)](this[e(926)][e(1381)],0,this.nSemiSpherePosNum)}else if(this[e(1198)]==nt[e(364)]){if(this[e(801)]<=0)return Ee.SR_ERR_CALL_ORDER;this[e(926)].drawArrays(this[e(926)].TRIANGLES,0,this[e(801)])}return this[e(926)][e(756)](null),this[e(582)]==0&&this[e(429)]!=null&&(r=this.pFishParamManager[e(631)]())!=-1&&r==this[e(1491)]&&this[e(617)](),this[e(1333)]!=null&&this[e(1333)](this[e(1230)]),this[e(1075)]!=null&&this[e(1075)](this[e(1411)]),Ee[e(593)]}},{key:oe(617),value:function(){var s=oe;if(this[s(429)]==null)return Ee.SR_ERR_CALL_ORDER;for(var e=this[s(429)][s(1062)](),r=0,b=[],A=(b.fR=0,b.fG=0,b.fB=0,b.fA=0,Ee[s(593)]),Ce=0;Ce<32;++Ce)if(this[s(429)].IsPortAllocated(Ce)!=0){if(r=2,A=this[s(429)][s(613)](Ce,b),Ee[s(593)]!=A)return A;this[s(429)][s(954)](Ce)==1&&(r+=1);var Ae=this[s(429)][s(631)]();if(Ce!=Ae&&Nt==e){if(nt[s(677)]==this.pFishParamManager.GetDisplayEffect(Ae)){var zt=[],A=this[s(429)][s(802)](Ce,zt,Nt);if(Ee.SR_OK!=A||zt[s(319)]!=null&&zt.nPointNum!=0&&(A=this.SR_DrawLines(zt[s(319)],zt[s(665)],!0,b,r,!1),Ee[s(593)]!=A))return A}}else if(Ce!=Ae&&Mt==e&&(zt=[],A=this[s(429)][s(802)](Ce,zt,Mt),Ee[s(593)]!=A||zt[s(319)]!=null&&zt.nPointNum!=0&&(A=this[s(691)](zt.pstPoints,zt[s(665)],!0,b,r,!1),Ee[s(593)]!=A)))return A}return Ee.SR_OK}},{key:oe(508),value:function(s,e,r){var b=oe;if(this.ctx==null)return Ee[b(1538)];if(s==null||e<1||r<2)return Ee[b(650)];for(var A=0,Ce=0;Ce<e;++Ce){if(s[Ce][b(319)]==null||s[Ce].nPointNum<3||s[Ce][b(667)]!==!0||s[Ce][b(556)]==null)return Ee[b(650)];A+=s[Ce][b(665)]}if(A!==r)return Ee[b(650)];if(r-=2*e,r>this[b(1038)]&&(this.pFillBlockPosVertices=null,this[b(603)]=null,this[b(1038)]=r),this[b(1130)]==0&&(this[b(1130)]=this[b(926)].createBuffer(),this.glBlockPosBuffer==0)||this[b(1085)]==0&&(this.glBlockClrBuffer=this[b(926)][b(1450)](),this[b(1085)]==0))return Ee[b(528)];if(this[b(1065)]==null){var Ae=this.nMaxFillBlockTriNum;if(this[b(1065)]=new Float32Array(3*Ae*3),this[b(1065)]==null)return Ee[b(694)]}if(this.pFillBlockPosVertices[b(329)](0),this[b(603)]==null&&(Ae=this.nMaxFillBlockTriNum,this[b(603)]=new Float32Array(4*Ae*3),this[b(603)]==null))return Ee[b(694)];this[b(603)][b(329)](0);for(var zt,z,H,K=0,le=0,Xe={},vt={},bt={},Ht=0;Ht<e;++Ht){zt=s[Ht].nPointNum,z=s[Ht].pstPoints,H=s[Ht][b(556)],Xe.fX=2*z[0].fX-1,Xe.fY=1-2*z[0].fY;for(var gi=1;gi<zt-1;gi++)vt.fX=2*z[gi].fX-1,vt.fY=1-2*z[gi].fY,bt.fX=2*z[gi+1].fX-1,bt.fY=1-2*z[gi+1].fY,this[b(1065)][K++]=Xe.fX,this[b(1065)][K++]=Xe.fY,this[b(1065)][K++]=0,this[b(603)][le++]=H.fR,this[b(603)][le++]=H.fG,this[b(603)][le++]=H.fB,this[b(603)][le++]=H.fA,this.pFillBlockPosVertices[K++]=vt.fX,this.pFillBlockPosVertices[K++]=vt.fY,this[b(1065)][K++]=0,this[b(603)][le++]=H.fR,this[b(603)][le++]=H.fG,this.pFillBlockClrVertices[le++]=H.fB,this.pFillBlockClrVertices[le++]=H.fA,this.pFillBlockPosVertices[K++]=bt.fX,this.pFillBlockPosVertices[K++]=bt.fY,this[b(1065)][K++]=0,this[b(603)][le++]=H.fR,this[b(603)][le++]=H.fG,this.pFillBlockClrVertices[le++]=H.fB,this[b(603)][le++]=H.fA}return this.nBlockShaderProgram==0&&(this.nBlockShaderProgram=this.CompileProgram(Un,Hn),this[b(560)]==0)?Ee.SR_ERR_WEBGL_RESOURCE:(this[b(926)][b(326)](this.ctx.BLEND),this[b(926)].blendFunc(this[b(926)][b(858)],this[b(926)][b(921)]),this.ctx.bindBuffer(this[b(926)][b(1331)],this[b(1130)]),this[b(926)].bufferData(this[b(926)][b(1331)],this[b(1065)],this[b(926)][b(914)]),this.ctx[b(1044)](this[b(926)].ARRAY_BUFFER,null),this[b(926)][b(1044)](this[b(926)].ARRAY_BUFFER,this[b(1085)]),this[b(926)][b(724)](this.ctx[b(1331)],this[b(603)],this[b(926)][b(914)]),this[b(926)][b(1044)](this.ctx[b(1331)],null),this[b(926)].useProgram(this.nBlockShaderProgram),this[b(926)].bindBuffer(this.ctx[b(1331)],this[b(1130)]),Ae=this[b(926)][b(416)](this[b(560)],b(1052)),this[b(926)][b(1362)](Ae),this[b(926)][b(1193)](Ae,3,this[b(926)][b(1473)],!1,0,0),this[b(926)][b(1044)](this[b(926)][b(1331)],null),this[b(926)][b(1044)](this[b(926)][b(1331)],this[b(1085)]),Ae=this.ctx.getAttribLocation(this[b(560)],b(882)),this.ctx[b(1362)](Ae),this[b(926)][b(1193)](Ae,4,this[b(926)][b(1473)],!1,0,0),this.ctx[b(1044)](this.ctx[b(1331)],null),this[b(926)].drawArrays(this[b(926)].TRIANGLES,0,3*r),this[b(926)].useProgram(null),this[b(926)][b(1076)](this[b(926)][b(661)]),Ee[b(593)])}},{key:"ComputeLinePoint",value:function(s,e){var r=oe;if(s==null||e<1)return Ee[r(650)];if(this[r(522)]==null||this[r(1394)]==null)return Ee[r(1538)];for(var b,A,Ce=0,Ae=0,zt=0,z=0,H=0,K=0,le=0,Xe=0,vt=0;vt<e;++vt){var bt=[],Ht=s[vt][r(665)];if(!(Ht<=0)){for(var gi=0;gi<Ht;++gi){var Hi={};Hi.fX=s[vt][r(319)][gi].fX,Hi.fX=2*Hi.fX-1,Hi.fY=s[vt].pstPoints[gi].fY,Hi.fY=1-2*Hi.fY,bt.push(Hi)}if(this.canvas[r(1454)]<=0||this[r(863)][r(1384)]<=0)return Ee.SR_ERR_CANVAS;if(b=3.5*s[vt][r(609)]/this.canvas[r(1454)],A=3.5*s[vt][r(609)]/this[r(863)].height,b<=0||A<=0)return Ee[r(650)];var hi=s[vt][r(556)];if(hi==null)return Ee.SR_ERR_PARAM;for(var Ai=0;Ai<Ht-1;++Ai)Ae=bt[Ai+1].fX-bt[Ai].fX,zt=bt[Ai+1].fY-bt[Ai].fY,Ce=Math[r(1540)](Ae*Ae+zt*zt),Math[r(1502)](+Ce)<1e-6||(H=A*Ae/Ce/2,this[r(522)][le++]=bt[Ai].fX+(z=-b*zt/Ce/2),this[r(522)][le++]=bt[Ai].fY+H,this.pLinePosVertices[le++]=-1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ai+1].fX-z,this[r(522)][le++]=bt[Ai+1].fY-H,this[r(522)][le++]=1,this[r(1394)][Xe++]=hi.fR,this.pLineClrVertices[Xe++]=hi.fG,this.pLineClrVertices[Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ai].fX-z,this[r(522)][le++]=bt[Ai].fY-H,this.pLinePosVertices[le++]=1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this.pLineClrVertices[Xe++]=hi.fA,this[r(522)][le++]=bt[Ai].fX+z,this.pLinePosVertices[le++]=bt[Ai].fY+H,this[r(522)][le++]=-1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ai+1].fX+z,this[r(522)][le++]=bt[Ai+1].fY+H,this.pLinePosVertices[le++]=-1,this.pLineClrVertices[Xe++]=hi.fR,this.pLineClrVertices[Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ai+1].fX-z,this.pLinePosVertices[le++]=bt[Ai+1].fY-H,this.pLinePosVertices[le++]=1,this.pLineClrVertices[Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this.pLineClrVertices[Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,K+=2);s[vt][r(667)]==1&&2<Ht&&(Ae=bt[Ht-1].fX-bt[0].fX,zt=bt[Ht-1].fY-bt[0].fY,Ce=Math[r(1540)](Ae*Ae+zt*zt),1e-6<Math[r(1502)](+Ce)&&(H=A*Ae/Ce/2,this[r(522)][le++]=bt[0].fX+(z=-b*zt/Ce/2),this[r(522)][le++]=bt[0].fY+H,this[r(522)][le++]=-1,this.pLineClrVertices[Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ht-1].fX-z,this[r(522)][le++]=bt[Ht-1].fY-H,this[r(522)][le++]=1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[0].fX-z,this[r(522)][le++]=bt[0].fY-H,this[r(522)][le++]=1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this.pLineClrVertices[Xe++]=hi.fB,this.pLineClrVertices[Xe++]=hi.fA,this[r(522)][le++]=bt[0].fX+z,this.pLinePosVertices[le++]=bt[0].fY+H,this.pLinePosVertices[le++]=-1,this[r(1394)][Xe++]=hi.fR,this.pLineClrVertices[Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ht-1].fX+z,this.pLinePosVertices[le++]=bt[Ht-1].fY+H,this[r(522)][le++]=-1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,this[r(522)][le++]=bt[Ht-1].fX-z,this[r(522)][le++]=bt[Ht-1].fY-H,this[r(522)][le++]=1,this[r(1394)][Xe++]=hi.fR,this[r(1394)][Xe++]=hi.fG,this[r(1394)][Xe++]=hi.fB,this[r(1394)][Xe++]=hi.fA,K+=2))}}return K==0?Ee[r(650)]:(this[r(1256)]=K,Ee[r(593)])}},{key:"SR_DrawLines",value:function(s,e,r,b,A,Ce){var Ae=oe,zt=[],z=[];return z[Ae(319)]=s,z[Ae(665)]=e,z[Ae(667)]=r,z.pstColor=b,z[Ae(609)]=A,zt[Ae(962)](z),this.SR_DrawLinesEx(zt,1,e,Ce)}},{key:oe(1521),value:function(s,e,le,zt){var A=oe;if(this[A(926)]==null)return Ee[A(1538)];if(s==null||e<1||le<2)return Ee[A(650)];if(this[A(1108)]==0){var z=this[A(1359)](Un,Hn);if(z<=0)return Ee.SR_ERR_WEBGL_RESOURCE;this[A(1108)]=z}if(zt==1)return this[A(508)](s,e,le);for(var Ce=0,Ae=0;Ae<e;++Ae){if(s[Ae][A(319)]==null||s[Ae].nPointNum<=1||1024<=s[Ae][A(665)]||s[Ae][A(609)]<=0||s[Ae][A(556)]==null)return Ee[A(650)];Ce+=s[Ae][A(665)]}if(Ce!=le)return Ee[A(650)];if((Ce+=e)>this[A(607)]&&(this[A(607)]=Ce,this[A(522)]=null,this.pLineClrVertices=null),this[A(522)]==null&&(this[A(522)]=new Float32Array(6*this.nMaxPointNum*3),this.pLinePosVertices==null)||(this[A(522)][A(329)](0),this[A(1394)]==null&&(this[A(1394)]=new Float32Array(6*this[A(607)]*4),this.pLineClrVertices==null)))return Ee[A(694)];if(this[A(1394)][A(329)](0),this[A(1014)]==0&&(this.glLinePosBuffer=this[A(926)][A(1450)](),this[A(1014)]==0)||this[A(541)]==0&&(this[A(541)]=this[A(926)].createBuffer(),this[A(541)]==0))return Ee[A(528)];if(z=this[A(1189)](s,e),Ee.SR_OK!=z)return z;this.ctx[A(326)](this.ctx.BLEND),this[A(926)].blendFunc(this[A(926)][A(858)],this[A(926)][A(921)]);var zt=this[A(1108)],le=(this.ctx.useProgram(zt),this[A(1014)]),z=this.glLineClrBuffer,H=this[A(1256)],Xe=this[A(522)],K=this.pLineClrVertices,le=(this[A(926)].bindBuffer(this[A(926)][A(1331)],le),this[A(926)][A(724)](this[A(926)][A(1331)],Xe,this.ctx[A(914)]),this[A(926)][A(416)](zt,"position")),Xe=(this[A(926)][A(1362)](le),this[A(926)].vertexAttribPointer(le,3,this[A(926)].FLOAT,!1,0,0),this[A(926)][A(1044)](this.ctx[A(1331)],z),this.ctx[A(724)](this[A(926)].ARRAY_BUFFER,K,this.ctx[A(914)]),this[A(926)][A(416)](zt,A(882)));return this.ctx.enableVertexAttribArray(Xe),this.ctx.vertexAttribPointer(Xe,4,this[A(926)][A(1473)],!1,0,0),this[A(926)][A(1044)](this[A(926)][A(1331)],null),this[A(926)][A(349)](0,0,this[A(863)][A(1454)],this[A(863)][A(1384)]),this[A(926)].drawArrays(this[A(926)][A(1381)],0,3*H),this.ctx[A(756)](null),this[A(926)].disable(this.ctx[A(661)]),Ee.SR_OK}},{key:oe(1408),value:(Ge=G(ce()[oe(460)](function u(s){var e=oe,r,b,A,Ce,Ae,zt,z,H;return ce()[e(894)](function(K){for(var le=e;;)switch(K[le(707)]=K[le(811)]){case 0:if(s==null)return K[le(341)]("return");K[le(811)]=2;break;case 2:if((b=(r=s).FreetypeLibHandle)==null)return K.abrupt(le(678),Ee.SR_ERR_PARAM);K.next=6;break;case 6:if((A=new qt)==null)return K[le(341)](le(678),Ee[le(694)]);K.next=9;break;case 9:if((Ce=b[le(436)](A))!==dt.Ok)throw new Error(b[le(754)](Ce));K[le(811)]=12;break;case 12:if(r[le(782)]==null||r[le(782)]==null)return K.abrupt(le(678),Ee.SR_ERR_CALL_ORDER);K.next=14;break;case 14:return K[le(811)]=16,fetch(r[le(782)]);case 16:if((Ae=K[le(1520)])==null)return K[le(341)](le(678),Ee[le(713)]);K.next=19;break;case 19:return K[le(811)]=21,Ae[le(415)]();case 21:if((zt=K[le(1520)])==null)return K.abrupt(le(678),Ee[le(713)]);K.next=24;break;case 24:if((z=new Uint8Array(zt))==null)return K[le(341)](le(678),Ee.SR_ERR_FREETYPE_INIT);K[le(811)]=27;break;case 27:if((H=new Si)==null)return K[le(341)]("return",Ee[le(713)]);K.next=30;break;case 30:if((Ce=b[le(883)](A,z,0,H))!==dt.Ok)throw r.FreetypeLibHandle=null,new Error(b[le(754)](Ce));K[le(811)]=34;break;case 34:r[le(411)]=A,r[le(1043)]=H;case 36:case"end":return K[le(1476)]()}},u)})),function(u){var s=oe;return Ge[s(1089)](this,arguments)})},{key:oe(578),value:function(s,e){var r=oe;if(e==null)return Ee[r(650)];if(!this[r(1096)]){var b=new jn;if(b==null)return Ee[r(366)];this.pFontPath=e,e=this[r(1408)],(this[r(1522)]=b).loadWasm(s,e,this),this[r(1096)]=!0}return Ee.SR_OK}},{key:"SR_DrawFont",value:function(s,e,r,b,A,Ce,Ae){var zt=oe;if(s==null||e==null||r==null||b<=1||A<=1||Ce==1&&Ae==null)return Ee[zt(650)];var z=[],H=[];return H[zt(1002)]=Ce,H.nFontWidth=b,H.nFontHeight=A,H.pstBGColor=Ae,H[zt(1474)]=r,H[zt(400)]=s,H[zt(1267)]=e,z[zt(962)](H),this[zt(1419)](z,1)}},{key:oe(1419),value:function(s,e){var r=oe;if(this[r(926)]==null||this.FreetypeLibHandle==null)return Ee[r(1538)];if(e<0||s==null)return Ee[r(650)];if(this.nDrawFontWidth==this[r(863)][r(1454)]/4*4&&this[r(863)][r(1384)]==this[r(1277)]/4*4||(this[r(644)]=null,this[r(835)]=0,this.nDrawFontWidth=this[r(863)].width/4*4,this[r(1313)]=this.canvas[r(1384)]/4*4),this[r(644)]==null||this[r(835)]==0){if(this[r(644)]=new Uint8Array(this[r(890)]*this[r(1313)]*4),this.pFontColorBuffer==null)return Ee.SR_ERR_ALLOC_MEMORY;if(this.pFontColorBuffer[r(329)](0),this[r(835)]=this.ctx[r(1514)](),this[r(835)]==0)return Ee[r(528)];this[r(926)].bindTexture(this.ctx.TEXTURE_2D,this[r(835)]),this.ctx.texParameteri(this[r(926)][r(588)],this[r(926)][r(715)],this.ctx.LINEAR),this[r(926)].texParameteri(this[r(926)][r(588)],this[r(926)][r(373)],this[r(926)][r(406)]),this[r(926)].texParameteri(this[r(926)][r(588)],this[r(926)][r(976)],this[r(926)][r(597)]),this[r(926)].texParameteri(this[r(926)].TEXTURE_2D,this.ctx[r(1132)],this[r(926)].CLAMP_TO_EDGE)}for(var b=0,A=0;A<e;A++)s[A][r(452)]&&b++;if(this[r(1328)]<b){for(var Ce=0;Ce<this.nFontBGNum;++Ce)this[r(941)][Ce][r(319)]=null,this[r(941)][Ce][r(556)]=null;this.pstFontBGLines=null,this[r(941)]=[];for(var Ae=0;Ae<b;++Ae)this[r(941)][Ae][r(319)]=[],this[r(941)][Ae][r(556)]=[];this[r(1328)]=b}for(var b=0,zt=0;zt<e;++zt){var z=s[zt].pstStartPos.fX*this.nDrawFontWidth,H=s[zt][r(1267)].fY*this[r(1313)],K=s[zt][r(400)][r(525)],le=(s[zt].nFontWidth==s[zt].nFontHeight&&(s[zt][r(1570)]=s[zt].nFontHeight-1),this[r(1313)]),Xe=0,vt=255*s[zt][r(1474)].fA,bt=255*s[zt][r(1474)].fR,Ht=255*s[zt][r(1474)].fG,gi=255*s[zt].pstFontColor.fB;if((hi=this.FreetypeLibHandle[r(354)](this[r(1043)],64*this.nDrawFontWidth,64*this[r(1313)],300,300))!==dt.Ok)throw new Error(this.FreetypeLibHandle.Error_String(hi));for(var Hi=0;Hi<K;++Hi){var hi,Ai=s[zt][r(400)][r(494)](Hi);if((hi=this[r(1522)][r(1186)](this.FTFace,Ai,he[r(1526)]))!=dt.Ok)throw new Error(this[r(1522)][r(754)](hi));var fi=this[r(1043)][r(347)];if((hi=this[r(1522)][r(1273)](fi,Bi[r(800)]))!==dt.Ok)throw new Error(jn[r(754)](hi));var D=fi[r(1555)];z+=fi[r(1348)],(Ai=this[r(1313)]-fi[r(654)])<le&&(le=Ai),Xe<(Ai=D.row)&&(Xe=Ai);for(var h=0;h<D[r(419)]*D.width;++h){var k,V=Math[r(1265)](s[zt][r(1570)]-fi[r(654)]+H+h/D[r(1454)]);V>=this[r(1313)]||(V=z+V*this[r(890)]+h%D.width)<0||V>=this[r(890)]*this[r(1313)]||0<D.buffer[h]&&((k=this.pFontColorBuffer)[4*V]=gi,k[4*V+1]=Ht,k[4*V+2]=bt,k[4*V+3]=vt)}z+=D[r(1454)]}var ve=[];ve[r(1575)]=s[zt][r(1267)].fX,ve[r(322)]=s[zt].pstStartPos.fY+le/this.nDrawFontHeight,ve[r(518)]=z/this[r(890)],ve[r(1209)]=Xe/this[r(1313)]+ve[r(322)],ve[r(1575)]-=.01,ve[r(322)]-=.01,ve.fRight+=.01,ve[r(1209)]+=.01,s[zt][r(452)]==1&&(this.pstFontBGLines[b][r(319)]=ve,this[r(941)][b][r(665)]=4,this.pstFontBGLines[b][r(667)]=!0,this.pstFontBGLines[b][r(556)]=s[zt][r(940)],b+=this[r(941)][b].nLineWidth=1)}b!=0&&this[r(1521)](this[r(941)],b,4*b,!1),this[r(926)][r(317)](this.ctx[r(588)],this[r(835)]),this[r(926)].texImage2D(this[r(926)][r(588)],0,this.ctx[r(917)],this[r(890)],this.nDrawFontHeight,0,this[r(926)][r(917)],this[r(926)][r(1084)],this[r(644)]),this[r(551)]==0&&(this.nFontShaderProgram=this[r(1359)](r(676),r(766))),this.ctx[r(349)](0,0,this[r(863)][r(1454)],this[r(863)][r(1384)]),this[r(926)][r(326)](this[r(926)][r(661)]),this[r(926)][r(823)](this[r(926)][r(858)],this[r(926)].ONE_MINUS_SRC_ALPHA),this[r(926)].useProgram(this[r(551)]),this[r(926)].activeTexture(this.ctx[r(599)]),this[r(926)].bindTexture(this[r(926)].TEXTURE_2D,this[r(835)]);var je=this[r(926)][r(893)](this[r(551)],r(1236)),je=(this[r(926)][r(871)](je,0),this.ctx[r(1044)](this[r(926)][r(1331)],this.vertexPosBuffer),this[r(926)].getAttribLocation(this[r(551)],r(1052))),je=(this[r(926)][r(1362)](je),this[r(926)][r(1193)](je,3,this[r(926)][r(1473)],!1,0,0),this[r(926)][r(1044)](this[r(926)][r(1331)],this[r(775)]),this[r(926)][r(416)](this[r(551)],r(567)));return this.ctx[r(1362)](je),this[r(926)][r(1193)](je,2,this[r(926)][r(1473)],!1,0,0),this[r(926)].bindBuffer(this[r(926)][r(1331)],null),this[r(926)][r(908)](this[r(926)][r(1381)],0,6),this[r(926)][r(756)](null),this[r(926)][r(1076)](this[r(926)].BLEND),Ee[r(593)]}},{key:"SR_AddSubPort",value:function(s){var e=oe;if(this.ctx==null)return Ee[e(1538)];var r,b,Ce=-1;if(s==nt.SR_DE_NULL)Ce=0;else if((Ce=this[e(429)]!=null?this[e(429)].GetFECPort(s):Ce)==-1)return Ce;switch(this[e(1491)]=Ce,s){case nt[e(1347)]:r=un,this[e(983)]=!(b=`
varying highp vec2 v_uv;
uniform sampler2D texture;
void main(void) {
  gl_FragColor = texture2D(texture, v_uv);
}
`);break;case nt[e(677)]:r=un,b=`
precision mediump float;
varying vec2 v_uv;
uniform sampler2D texture;
uniform float fRX1;
uniform float fRX2;
uniform float fRY1;
uniform float fRY2;
uniform int bBlack; 
uniform int bCut;

void main()
{ 
	float r,g,b;
	vec4 origin;

	float  w;
	float  h;
	float  fCenterX;
	float  fCenterY;
	float  fRadius;
	w = 1.0;
	h = (fRX2 - fRX1) / (fRY2 - fRY1);
	fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标
	fCenterY = (fRY1 + fRY2) / 2.0 * h;
	fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度
	float  leftCut = 0.0;
	float  rightCut = 1.0;
	float  topCut = 0.0;
	float  bottomCut = 1.0;
	if(bCut == 1)
	{
		if(fRX1 > 0.0)
		{
			leftCut = fRX1;
		}
		if(fRX2 < 1.0)
		{
			rightCut = fRX2;
		}
		if(fRY1 > 0.0)
		{
			topCut = fRY1;
		}
		if(fRY2 < 1.0)
		{
			bottomCut = fRY2;
		}
	}
	origin.s = v_uv.s * (rightCut-leftCut) + leftCut;
	origin.t = v_uv.t * (bottomCut-topCut) + topCut;

	r = texture2D(texture, origin.st).r; 
	g = texture2D(texture, origin.st).g; 
	b = texture2D(texture, origin.st).b; 

	if(bBlack == 1)
	{
		float tmpX, tmpY;
		tmpX = origin.s * w; 
		tmpY = origin.t * h; 
		float d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);
		if(d2 > fRadius*fRadius)
		{
			r = 0.0; 
			g = 0.0; 
			b = 0.0; 
		}
	}

	gl_FragColor = vec4(r ,g ,b , 1.0);
}
`,this[e(828)]=!0,this[e(983)]=!1;break;case nt[e(1282)]:r=un,b=e(1082),this[e(828)]=!0,this[e(983)]=!1;break;case nt[e(474)]:r=un,b=e(1087),this[e(828)]=!0;break;case nt[e(994)]:r=un,b=`
precision mediump float;
varying vec2 v_uv;
uniform sampler2D texture;
uniform float fHAngleCos;
uniform float fHAngleSin;  
uniform float fVAngleCos;  
uniform float fVAngleSin;  
uniform float fZoom;

uniform float fRX1; 
uniform float fRX2; 
uniform float fRY1; 
uniform float fRY2; 

void main()
{
    float r,g,b;  

    vec4 origin1;
    vec4 origin2;
    vec4 origin3;
    vec4 result;
    float  z1;
    float  z2;
    float  z3;
    float  dnew;

    float  w;
    float  h;
    float  fCenterX;
    float  fCenterY;
    float  fRadius;
    w = 1.0;
    h = (fRX2 - fRX1) / (fRY2 - fRY1);
    fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<Բ��ʵ������
    fCenterY = (fRY1 + fRY2) / 2.0 * h;
    fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<�뾶ʵ�ʳ���

    origin1.s = v_uv.s - 0.5;
    origin1.t = v_uv.t - 0.5;
    z1 = fZoom ;

    origin2.s = origin1.s ;
    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);
    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;

    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;
    origin3.t = origin2.y;
    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;

    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;
    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);
    float theta = asin(dnew/d);
    float tmp = theta / 1.5707963 * 0.5;
    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;
    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;

    r = texture2D(texture, result.st).r; 
    g = texture2D(texture, result.st).g; 
    b = texture2D(texture, result.st).b; 
    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
    {
        r = 0.0; 
        g = 0.0; 
        b = 0.0; 
    }
    gl_FragColor = vec4(r ,g ,b , 1.0);
} 
`,this[e(828)]=!0,this.b3DPort=!1;break;case nt[e(1379)]:r=un,b=e(830),this[e(828)]=!0,this[e(983)]=!1;break;case nt[e(1212)]:r=un,b=`
    precision highp float;
    varying vec2 v_uv;
    uniform sampler2D texture;
    uniform float fAngle;
    uniform float fRX1; 
    uniform float fRX2; 
    uniform float fRY1; 
    uniform float fRY2; 
    
    void main()
    {
        float r,g,b;  
    
        vec4 origin;
        vec4 result;
        float  thetabase;
        float  d;
    
        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点
        if (v_uv.t  <= 0.5)
        {
            newpp.s =  v_uv.s / 2.0 + 0.5;
            newpp.t =  v_uv.t * 2.0;
        }
        else
        {
            newpp.s =  v_uv.s / 2.0;
            newpp.t =  (v_uv.t - 0.5) * 2.0;
        }
        float  w;
        float  h;
        float  fCenterX;
        float  fCenterY;
        float  fRadius;
        w = 1.0;
        h = (fRX2 - fRX1) / (fRY2 - fRY1);
        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标
        fCenterY = (fRY1 + fRY2) / 2.0 * h;
        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度
        float fMax = 0.0;
        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆
        {
            float tmp;
            if(fRX1 < 0.0)
            {
                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRX2 > 1.0)
            {
                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY1 < 0.0)
            {
                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY2 > 1.0)
            {
                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
        }
        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切
        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分
        origin.s = newpp.s;
        origin.t = (bottomCut - topCut) * newpp.t + topCut;
        thetabase = 6.2831853 * origin.s + fAngle;
        d = fRadius * (1.0 - origin.t);
        result.s = (fCenterX - d*sin(thetabase)) / w;
        result.t = (fCenterY + d*cos(thetabase)) / h;
    
        r = texture2D(texture, result.st).r;
        g = texture2D(texture, result.st).g;
        b = texture2D(texture, result.st).b;
        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
        {
            r = 0.0;
            g = 0.0;
            b = 0.0;
        }
        gl_FragColor = vec4(r ,g ,b , 1.0);
    }
`,this.bFECHandle=!0,this[e(983)]=!1;break;case nt[e(472)]:r=un,b=e(1067),this[e(828)]=!0,this[e(983)]=!1;break;case nt[e(1366)]:r=un,b=e(1101),this[e(828)]=!0,this[e(983)]=!1;break;case nt[e(1018)]:r=un,b=SHADER_PS_RGBA_PANORAMA_WALL,this[e(828)]=!0,this.b3DPort=!1;break;case nt[e(1010)]:case nt.SR_DE_FISH_CYLINDER_CEILING:case nt[e(405)]:r=e(335),b=e(1535),this[e(828)]=!0,this[e(983)]=!0}var Ce=this[e(1359)](r,b),Ce=(this.videoShaderProgram=Ce,null),A=null,Ae=(this.b3DPort==0?(Ce=new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),A=new Float32Array([0,1,0,0,1,0,1,1])):s==nt[e(1010)]&&(this.CreateSemiSphere(0,1,0,1),Ce=this[e(881)],A=this[e(1524)]),this.ctx.createBuffer()),Ce=(this[e(926)].bindBuffer(this[e(926)][e(1331)],Ae),this[e(926)][e(724)](this[e(926)].ARRAY_BUFFER,Ce,this[e(926)][e(914)]),this.vertexPosBuffer=Ae,this[e(926)].createBuffer()),Ae=(this[e(926)].bindBuffer(this.ctx.ARRAY_BUFFER,Ce),this[e(926)][e(724)](this.ctx[e(1331)],A,this[e(926)][e(914)]),this[e(775)]=Ce,this.ctx.bindBuffer(this.ctx[e(1331)],null),this.InitCamera(s));return Ee.SR_OK!=Ae?-1:(this[e(1198)]=s,this[e(1491)])}},{key:oe(943),value:function(s){var e=oe;return this[e(926)]==null?Ee.SR_ERR_CALL_ORDER:(this.pFishParamManager!=null&&this[e(429)][e(1360)](s),this.bFECHandle=!1,this[e(1198)]=nt[e(1347)],this[e(1257)]!=0&&this[e(926)]!=null&&(this[e(926)][e(1124)](this[e(1257)]),this.videoShaderProgram=0),this[e(309)]!=0&&this[e(926)]!=null&&(this.ctx.deleteBuffer(this[e(309)]),this[e(309)]=0),this[e(775)]!=0&&this[e(926)]!=null&&(this[e(926)].deleteBuffer(this.texturePosBuffer),this[e(775)]=0),this[e(607)]=0,this[e(522)]=null,this.pLineClrVertices=null,this[e(1014)]!=0&&this[e(926)]!=null&&(this.ctx[e(1443)](this[e(1014)]),this[e(1014)]=0),this[e(1539)]!=0&&this[e(926)]!=null&&(this.ctx[e(1443)](this[e(1539)]),this[e(1539)]=0),(this.nLineTriangleNum=0)!=this[e(1108)]&&this.ctx!=null&&(this[e(926)][e(1124)](this.nLineShaderProgram),this[e(1108)]=0),this.pFillBlockPosVertices=null,this[e(603)]=null,(this[e(1038)]=0)!=this[e(1130)]&&this[e(926)]!=null&&(this[e(926)].deleteBuffer(this[e(1130)]),this[e(1130)]=0),this.glBlockClrBuffer!=0&&this[e(926)]!=null&&(this[e(926)].deleteBuffer(this[e(1085)]),this[e(1085)]=0),this[e(560)]!=0&&this[e(926)]!=null&&(this[e(926)][e(1124)](this[e(560)]),this[e(560)]=0),this[e(1522)]!=null&&this[e(1043)]!=null&&(this[e(1522)][e(1310)](this[e(1043)]),this[e(1043)]=null),this.FreetypeLibHandle!=null&&this[e(411)]!=null&&(this[e(1522)].Done_FreeType(this[e(411)]),this[e(411)]=null),this[e(1096)]=!1,this.pFontPath=null,this.FreetypeLibHandle=null,this[e(890)]=0,(this[e(1313)]=0)!=this[e(835)]&&this[e(926)]!=null&&(this[e(926)][e(1470)](this.nFontColorTexture),this.nFontColorTexture=0),(this[e(644)]=0)!=this[e(551)]&&this[e(926)]!=null&&(this[e(926)].deleteProgram(this[e(551)]),this[e(551)]=0),this.nFontBGNum=0,this[e(941)]=null,this.pSemiSpherePos=null,this[e(1524)]=null,this[e(794)]=0,this[e(1566)]=0,this[e(1229)]=0,this[e(334)]=null,this[e(371)]=null,this[e(801)]=0,this[e(1109)]=0,this[e(749)]=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this[e(983)]=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this[e(1333)]=null,this[e(1075)]=null,this[e(1230)]=null,this.pUserOut=null,this[e(926)][e(1076)](this.ctx[e(533)]),this[e(926)].disable(this[e(926)].DEPTH_TEST),Ee[e(593)])}},{key:oe(1116),value:function(s){var e=oe;return s==null?Ee[e(650)]:this[e(429)]==null?Ee[e(1538)]:this[e(429)][e(444)](this.nFECPort,s)}},{key:oe(412),value:function(s){var e=oe;return s==null?Ee[e(650)]:this[e(429)]==null?Ee.SR_ERR_CALL_ORDER:this[e(429)][e(1057)](this[e(1491)],s)}},{key:"SR_SetDisplayRect",value:function(s,e,r,b){var A=oe;if(this[A(926)]==null)return Ee[A(1538)];var Ce,Ae,zt=null;return zt=0<this[A(1584)]&&0<this[A(320)]?(Ce=s/this[A(1584)],Ae=e/this[A(320)],s=(s+r)/this[A(1584)],r=(e+b)/this[A(320)],new Float32Array([Ce,r,Ce,Ae,s,Ae,s,r])):new Float32Array([0,1,0,0,1,0,1,1]),this[A(926)][A(1044)](this[A(926)].ARRAY_BUFFER,this[A(775)]),this[A(926)][A(440)](this[A(926)][A(1331)],0,zt),this[A(926)][A(1044)](this[A(926)][A(1331)],null),Ee.SR_OK}},{key:oe(1577),value:function(){var s=oe;return this[s(926)]==null?Ee[s(1538)]:(this[s(1584)]=0,(this.frameDisplayHeight=0)!=this.nSurfaceTexture&&this[s(926)]!=null&&(this[s(926)][s(1470)](this[s(1571)]),this[s(1571)]=0),this[s(828)]==0?this[s(943)](0):this[s(1491)]!=-1&&this[s(943)](this[s(1491)]),this[s(978)]=!1,this[s(355)]=!1,this[s(1023)]=!0,this.pFishParamManager=null,this.canvas=null,this.ctx=null,Ee[s(593)])}},{key:oe(422),value:function(s,e){var r=oe;return this.canvas.width=s,this[r(863)][r(1384)]=e,Ee[r(593)]}},{key:oe(918),value:function(){var s=oe;return console[s(1590)](s(720)+this[s(863)].width+s(468)+this[s(863)][s(1384)]),Ee[s(593)]}},{key:oe(552),value:function(s){var e=oe;return this[e(978)]==1?Ee[e(1112)]:(this[e(355)]!=s&&(this[e(1023)]=!0,this[e(355)]=s),Ee[e(593)])}},{key:oe(328),value:function(s){var e=oe;return this[e(429)]==null?Ee[e(1538)]:this.pFishParamManager[e(728)](s)}},{key:oe(1299),value:function(s){var e=oe;return this.pFishParamManager!=null?Ee[e(1112)]:(this[e(429)]=s,Ee[e(593)])}},{key:oe(1322),value:function(s,e,r,b){var A=oe;if(this.pSemiSpherePos!=null||this[A(1524)]!=null)return Ee[A(1538)];this[A(881)]=new Float32Array(43200),this[A(1524)]=new Float32Array(28800);for(var Ce=(e-s)/(b-r),Ae=(e-s)/2*1,zt=2*Cn/60,z=Cn/2/40,H=0,K=0,le=0,Xe=0;Xe<60;++Xe)for(var vt=0;vt<40;++vt){var bt,Ht,gi=Xe*zt,Hi=(Xe==0&&(H=gi),Xe==59?H:(Xe+1)*zt),hi=-vt*z,Ai=-(vt+1)*z;this[A(881)][K]=-1*Math[A(1268)](hi)*Math[A(1268)](gi),this[A(881)][K+1]=+Math[A(514)](hi),this[A(881)][K+2]=-1*Math.cos(hi)*Math[A(514)](gi),Ht=.5-.5*(1+hi/(Cn/2))*Math[A(514)](gi),bt=.5-.5*(1+hi/(Cn/2))*Math[A(1268)](gi),this[A(1524)][le++]=2*bt*Ae+ +s,this[A(1524)][le++]=(2*Ht*Ae+r*Ce)/Ce,K+=3,this[A(881)][K]=-1*Math[A(1268)](Ai)*Math.cos(gi),this.pSemiSpherePos[K+1]=+Math[A(514)](Ai),this[A(881)][K+2]=-1*Math[A(1268)](Ai)*Math[A(514)](gi),Ht=.5-.5*(1+Ai/(Cn/2))*Math[A(514)](gi),bt=.5-.5*(1+Ai/(Cn/2))*Math[A(1268)](gi),this[A(1524)][le++]=2*bt*Ae+ +s,this[A(1524)][le++]=(2*Ht*Ae+r*Ce)/Ce,K+=3,this[A(881)][K]=-1*Math.cos(hi)*Math[A(1268)](Hi),this[A(881)][K+1]=+Math[A(514)](hi),this.pSemiSpherePos[K+2]=-1*Math[A(1268)](hi)*Math[A(514)](Hi),Ht=.5-.5*(1+hi/(Cn/2))*Math.sin(Hi),bt=.5-.5*(1+hi/(Cn/2))*Math[A(1268)](Hi),this[A(1524)][le++]=2*bt*Ae+ +s,this.pSemiSphereTex[le++]=(2*Ht*Ae+r*Ce)/Ce,K+=3,this[A(881)][K]=-1*Math[A(1268)](hi)*Math[A(1268)](Hi),this[A(881)][K+1]=+Math[A(514)](hi),this[A(881)][K+2]=-1*Math[A(1268)](hi)*Math[A(514)](Hi),Ht=.5-.5*(1+hi/(Cn/2))*Math[A(514)](Hi),bt=.5-.5*(1+hi/(Cn/2))*Math[A(1268)](Hi),this.pSemiSphereTex[le++]=2*bt*Ae+ +s,this[A(1524)][le++]=(2*Ht*Ae+r*Ce)/Ce,K+=3,this[A(881)][K]=-1*Math[A(1268)](Ai)*Math[A(1268)](gi),this[A(881)][K+1]=+Math[A(514)](Ai),this.pSemiSpherePos[K+2]=-1*Math.cos(Ai)*Math[A(514)](gi),Ht=.5-.5*(1+Ai/(Cn/2))*Math[A(514)](gi),bt=.5-.5*(1+Ai/(Cn/2))*Math[A(1268)](gi),this.pSemiSphereTex[le++]=2*bt*Ae+ +s,this.pSemiSphereTex[le++]=(2*Ht*Ae+r*Ce)/Ce,K+=3,this[A(881)][K]=-1*Math[A(1268)](Ai)*Math[A(1268)](Hi),this[A(881)][K+1]=+Math[A(514)](Ai),this[A(881)][K+2]=-1*Math[A(1268)](Ai)*Math[A(514)](Hi),Ht=.5-.5*(1+Ai/(Cn/2))*Math[A(514)](Hi),bt=.5-.5*(1+Ai/(Cn/2))*Math[A(1268)](Hi),this.pSemiSphereTex[le++]=2*bt*Ae+ +s,this[A(1524)][le++]=(2*Ht*Ae+r*Ce)/Ce,K+=3}return this[A(794)]=K/3,this[A(1566)]=3,this[A(1229)]=2,Ee[A(593)]}},{key:oe(742),value:function(s){var e=oe;if(this.pCamera!=null)return SR_ERR_CALL_ORDER;switch(s){case nt[e(1347)]:case nt[e(677)]:case nt[e(1282)]:case nt.SR_DE_FISH_PTZ_FLOOR:case nt.SR_DE_FISH_PTZ_WALL:case nt[e(1379)]:case nt[e(1212)]:case nt.SR_DE_FISH_PANORAMA_FLOOR_360:case nt[e(1366)]:case nt[e(1018)]:return Ee.SR_OK;case nt[e(1010)]:if(this[e(482)]=new Yn,this[e(482)]==null)return Ee[e(694)];this[e(482)].SetFov(wr),this.pCamera.SetNear(.02),this[e(482)][e(824)](1e3),this[e(420)]=1.57,this[e(482)][e(515)](3.14-this.fRotateX),this[e(649)]=3,this[e(482)][e(995)](this[e(649)]);break;case nt[e(364)]:case nt.SR_DE_FISH_CYLINDER_FLOOR:if(this[e(482)]=new Yn,this[e(482)]==null)return Ee[e(694)];this[e(482)][e(659)](wr),this[e(482)][e(1400)](.02),this[e(482)][e(824)](1e3),this.fRotateX=-.785,this[e(482)][e(515)](-this.fRotateX),this[e(649)]=6,this[e(482)][e(995)](this[e(649)]);break;case nt[e(414)]:case nt[e(1139)]:if(this[e(482)]=new Yn,this[e(482)]==null)return Ee[e(694)];this[e(482)][e(1136)](!0),this[e(482)][e(1400)](.02),this.pCamera.SetFar(1e3),this[e(649)]=3,this[e(482)][e(995)](this[e(649)]);break;default:return Ee[e(1112)]}return Ee[e(593)]}},{key:oe(1294),value:function(s,e){var r=oe;if(!this[r(983)])return Ee.SR_ERR_NOT_SUPPORT;switch(s){case ai:this[r(420)]=e;break;case ji:this[r(669)]=e;break;case tn:if(this[r(1198)]==nt[r(1010)]){if(e<-.8||900<e)return Ee[r(650)]}else if((this[r(1198)]==nt[r(405)]||this.enDisplayEffect==nt[r(364)])&&(e<0||900<e))return Ee[r(650)];this[r(649)]=e;break;default:return Ee[r(1112)]}return Ee[r(593)]}},{key:oe(418),value:function(s){var e=oe;if(!this[e(983)])return Ee[e(1112)];var r=0;switch(s){case ai:r=this[e(420)];break;case ji:r=this[e(669)];break;case tn:r=this[e(649)]}return r}},{key:oe(504),value:function(s,e,r){var b=oe;switch(r){case Ui:this[b(1333)]=s,this.pUserIn=e;break;case Gi:this[b(1075)]=s,this[b(1411)]=e;break;default:return Ee[b(1112)]}return Ee[b(593)]}},{key:"SR_SetRenderState",value:function(s,e){var r=oe;switch(s){case nn:if(this[r(983)])return Ee[r(1112)];break;case Zi:if(!this[r(983)])return Ee[r(1112)];Math[r(1502)](+e)<fn?this[r(762)]=!1:this[r(762)]=!0;break;default:return Ee[r(1112)]}return Ee.SR_OK}},{key:oe(1372),value:function(s,e){var r=oe;return this.pFishParamManager==null?Ee.SR_ERR_CALL_ORDER:this[r(429)][r(1486)](s,e)}},{key:"SR_GetPTZColor",value:function(s,e){var r=oe;return this[r(429)]==null?Ee[r(1538)]:this[r(429)][r(613)](s,e)}},{key:oe(1551),value:function(s){var e=oe;return this.pFishParamManager==null?Ee[e(1538)]:this[e(429)][e(430)](s)}},{key:"SR_GetPTZPort",value:function(s,e){var r=oe;return this[r(429)]==null?Ee.SR_ERR_CALL_ORDER:this[r(429)][r(993)](s,e)}}]),si}(),ta=function(){var oe=R;function si(){var Ge=I;ge(this,si),this[Ge(863)]=null,this[Ge(926)]=null,this[Ge(795)]=0,this[Ge(521)]=0,this[Ge(379)]=0,this.regionSh=0,this[Ge(1009)]=!1,this[Ge(355)]=!1,this[Ge(668)]=!1}return ke(si,[{key:"SR_Init",value:function(u){var s=I;this[s(863)]=u,this[s(926)]=this[s(863)][s(1021)]("2d"),this[s(926)]||console[s(1590)](s(944))}},{key:"SR_Draw",value:function(u){var s=I;this[s(1009)]?this[s(926)][s(1079)](u,this[s(795)],this[s(521)],this[s(379)],this[s(1365)],0,0,this[s(863)][s(1454)],this[s(863)][s(1384)]):this[s(926)][s(1079)](u,0,0,u[s(1501)],u[s(526)],0,0,this[s(863)][s(1454)],this.canvas[s(1384)])}},{key:oe(943),value:function(u){return 0}},{key:oe(856),value:function(u){return 0}},{key:oe(1166),value:function(u,s,e,r){var b=oe;this[b(795)]=u,this[b(521)]=s,this[b(379)]=e,this.regionSh=r,this[b(1009)]=!0}},{key:oe(1577),value:function(){var u=oe;this.canvas=null,this[u(926)]=null,this[u(795)]=0,this.regionSy=0,this[u(379)]=0,this.regionSh=0,this[u(1009)]=!1}},{key:oe(422),value:function(u,s){var e=oe;this[e(863)][e(1454)]=u,this[e(863)].height=s}},{key:oe(918),value:function(){var u=oe;console[u(1590)](u(720)+this.canvas[u(1454)]+",height:"+this[u(863)][u(1384)])}},{key:oe(552),value:function(u){var s=oe;return u!=this[s(355)]?(this.bAntialias=u,this[s(668)]=!0):this[s(668)]=!1,this[s(668)]&&(this[s(355)]?(this.canvas[s(1454)]=5*this[s(863)][s(1454)],this[s(863)][s(1384)]=5*this[s(863)].height,this[s(863)][s(396)].transform=s(1199)):(this.canvas[s(1454)]=this.canvas[s(1454)]/5,this[s(863)][s(1384)]=this[s(863)].height/5,this.canvas[s(396)][s(1492)]="scale(1)"),this.canvas.style[s(390)]=s(706)),1}}]),si}(),Vr=function(){var oe=R;function si(){var Ge=I;ge(this,si),this[Ge(1105)]=[],this.pRenderParam=[],this[Ge(812)]=[],this[Ge(1208)]=[],this[Ge(739)]=null,this[Ge(1042)]=[],this[Ge(652)]=[],this[Ge(1405)]=[],this.nPTZFragmentNum=[],this[Ge(884)]=[],this[Ge(1325)]=[],this[Ge(1459)]=[],this[Ge(1343)]=[],this[Ge(1120)]=li,this[Ge(915)]=0,this[Ge(332)]=1,this[Ge(737)]=0,this[Ge(402)]=1,this[Ge(368)]=!1,this.pOriPTZPoints=[],this[Ge(884)]=[],this[Ge(1398)]=-1,this[Ge(1252)]=0,this[Ge(1138)]=[],this[Ge(646)]=[],this.nPTZDisplayMode=Nt;for(var u=0;u<32;++u){this[Ge(1105)][u]=!1,this.bPTZSelected[u]=!1,this[Ge(675)][u]=[],this.pRenderParam[u][Ge(780)]=1,this[Ge(675)][u][Ge(1181)]=0,this[Ge(675)][u][Ge(1025)]=1,this.pRenderParam[u][Ge(810)]=0,this[Ge(675)][u].fAngle=0,this[Ge(675)][u][Ge(1580)]=0,this.pRenderParam[u][Ge(915)]=0,this[Ge(675)][u][Ge(332)]=1,this[Ge(675)][u].fRY1=0,this[Ge(675)][u][Ge(402)]=1,this.pRenderParam[u].nDisplayEffect=0,this[Ge(675)][u][Ge(368)]=!1,this[Ge(675)][u].bCut=!1,this[Ge(812)][u]=[],this[Ge(812)][u].nFishParamType=0,this[Ge(812)][u].fRXLeft=0,this[Ge(812)][u][Ge(919)]=1,this[Ge(812)][u].fRYTop=0,this[Ge(812)][u][Ge(825)]=1,this[Ge(812)][u].bBlack=!1,this.pFishParam[u][Ge(818)]=!1,this[Ge(812)][u][Ge(1485)]=0,this[Ge(812)][u][Ge(1580)]=0,this.pFishParam[u].fPTZX=.5,this[Ge(812)][u][Ge(660)]=.5,this.stPTZColor[u]=[],this.stPTZColor[u].fR=0,this[Ge(1208)][u].fG=0,this[Ge(1208)][u].fB=0,this[Ge(1208)][u].fA=0,this[Ge(1042)][u]=0,this.nOriPTZPointNum[u]=0,this[Ge(1405)][u]=0,this[Ge(1343)][u]=0,this[Ge(1325)][u]=[],this[Ge(1459)][u]=[],this[Ge(884)][u]=[],this[Ge(1183)][u]=[];for(var s=0;s<4;++s)this[Ge(1459)][u][s]=[],this[Ge(1459)][u][s].fX=0,this[Ge(1459)][u][s].fY=0;for(var e=0;e<1024;++e)this[Ge(884)][u][e]=[],this[Ge(884)][u][e].fX=0,this[Ge(884)][u][e].fY=0,this[Ge(1183)][u][e]=[],this[Ge(1183)][u][e].fX=0,this[Ge(1183)][u][e].fY=0,this[Ge(1325)][u][e]=[],this[Ge(1325)][u][e].fX=0,this[Ge(1325)][u][e].fY=0;this[Ge(733)][u]=0,this.nPTZFragmentNode[u]=[];for(var r=0;r<100;++r)this[Ge(1138)][u][r]=0}this[Ge(948)]()}return ke(si,[{key:oe(1385),value:function(u){for(var s=oe,e=-1,r=0;r<32;++r)if(this[s(1105)][r]==0){e=r;break}if(e!=-1){var b=this[s(817)](u);if(Ee[s(593)]!=b)return this[s(1360)](e),e=-1;if(nt[s(1379)]==u||nt[s(1212)]==u||nt[s(472)]==u||nt[s(1366)]==u||nt[s(1018)]==u||nt[s(677)]==u){if(this[s(1398)]!=-1)return this.FreeFECPort(e),e=-1;this[s(1398)]=e}if(!(nt[s(1282)]!=u&&nt[s(474)]!=u&&nt[s(994)]!=u||this[s(1398)]==-1||this[s(675)][this[s(1398)]]==null||nt.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[this[s(1398)]][s(310)]&&nt.SR_DE_FISH_PANORAMA_FLOOR_180!=this[s(675)][this[s(1398)]].nDisplayEffect))return this[s(1360)](e),e=-1;if(nt[s(1212)]==u||nt[s(1366)]==u){for(var A=0;A<32;++A)if(this[s(675)][A]!=null&&(nt[s(1282)]==this[s(675)][A][s(310)]||nt.SR_DE_FISH_PTZ_FLOOR==this[s(675)][A].nDisplayEffect||nt[s(994)]==this[s(675)][A].nDisplayEffect))return this[s(1360)](e),e=-1}if(nt.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==u){for(var Ce=0;Ce<32;++Ce)if(this[s(675)][Ce]!=null&&nt[s(614)]==this[s(675)][Ce].nDisplayEffect)return this[s(1360)](e),e=-1}if(nt[s(614)]==u){for(var Ae=0;Ae<32;++Ae)if(this.pRenderParam[Ae]!=null&&nt.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this[s(675)][Ae].nDisplayEffect)return this[s(1360)](e),e=-1}this.pRenderParam[e][s(780)]=1,this[s(675)][e][s(1181)]=0,this.pRenderParam[e][s(1025)]=1,this[s(675)][e][s(1181)]=0,this[s(675)][e].fAngle=0,this[s(675)][e][s(915)]=this.fRX1,this[s(675)][e][s(332)]=this[s(332)],this.pRenderParam[e][s(737)]=this.fRY1,this[s(675)][e][s(402)]=this.fRY2,this.pRenderParam[e][s(368)]=this[s(368)],this[s(675)][e][s(1580)]=.035+.8,this[s(675)][e][s(310)]=u,this[s(812)][e][s(1485)]=this.pRenderParam[e].fAngle,this[s(812)][e][s(875)]=.5,this[s(812)][e][s(660)]=.5,this[s(812)][e][s(473)]=this[s(675)][e][s(915)],this.pFishParam[e][s(919)]=this[s(675)][e].fRX2,this[s(812)][e][s(1171)]=this[s(675)][e][s(737)],this.pFishParam[e].fRYBottom=this.pRenderParam[e].fRY2,this[s(812)][e][s(368)]=this[s(675)][e][s(368)],this[s(812)][e][s(1580)]=(this[s(675)][e][s(1580)]-.8)/7,this[s(1105)][e]=!0}return e}},{key:oe(1360),value:function(u){var s=oe;if(u<0||32<=u)return Ee[s(650)];this[s(1398)]==u&&(this[s(1398)]=-1),this[s(675)][u][s(780)]=1,this[s(675)][u].fSinH=0,this[s(675)][u][s(1025)]=1,this[s(675)][u][s(810)]=0,this[s(675)][u].fAngle=0,this[s(675)][u][s(1580)]=0,this[s(675)][u][s(915)]=0,this.pRenderParam[u][s(332)]=1,this[s(675)][u][s(737)]=0,this[s(675)][u].fRY2=1,this[s(675)][u][s(310)]=0,this[s(675)][u].bBlack=!1,this.pRenderParam[u][s(818)]=!1,this[s(812)][u][s(572)]=0,this.pFishParam[u][s(473)]=0,this[s(812)][u][s(919)]=1,this[s(812)][u][s(1171)]=0,this[s(812)][u][s(825)]=1,this[s(812)][u].bBlack=!1,this[s(812)][u].bCut=!1,this.pFishParam[u][s(1485)]=0,this[s(812)][u][s(1580)]=0,this.pFishParam[u][s(875)]=.5,this[s(812)][u][s(660)]=.5,this[s(1042)][u]=0,this[s(652)][u]=0,this[s(1405)][u]=0;for(var e=this[s(1343)][u]=0;e<4;++e)this[s(1459)][u][e].fX=0,this.pRectPoints[u][e].fY=0;for(var r=0;r<1024;++r)this[s(884)][u][r].fX=0,this.pBasePTZPoints[u][r].fY=0,this[s(1183)][u][r].fX=0,this[s(1183)][u][r].fY=0,this.pPanoPTZPoints[u][r].fX=0,this[s(1325)][u][r].fY=0;if(this[s(739)]!=null&&(this[s(739)][u].fA=0,this.pPTZSetColor[u].fR=0,this.pPTZSetColor[u].fG=0,this.pPTZSetColor[u].fB=0),this[s(646)][u]=!1,this[s(1252)]!=0){var b=!1;if(this[s(675)][i]!=null){for(var A=0;A<32;++A)if(this[s(675)][A]!=null&&(nt.SR_DE_FISH_PTZ_CEILING==this[s(675)][A].nDisplayEffect||nt[s(474)]==this.pRenderParam[A][s(310)]||nt[s(994)]==this[s(675)][A][s(310)]||nt.SR_DE_FISH_PANORAMA_CEILING_360==this[s(675)][A][s(310)]||nt.SR_DE_FISH_PANORAMA_CEILING_180==this[s(675)][A].nDisplayEffect||nt[s(472)]==this.pRenderParam[A].nDisplayEffect||nt[s(1366)]==this.pRenderParam[A][s(310)]||nt[s(1018)]==this.pRenderParam[A].nDisplayEffect||nt[s(364)]==this.pRenderParam[A][s(310)]||nt[s(405)]==this[s(675)][A][s(310)]||nt[s(414)]==this[s(675)][A][s(310)]||nt[s(1139)]==this.pRenderParam[A][s(310)]||nt.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[A].nDisplayEffect||nt[s(614)]==this[s(675)][A][s(310)])){b=!0;break}}b||(this.nPlaceType=0)}for(var Ce=!1,Ae=0;Ae<32;++Ae)if(this[s(675)][Ae]!=null){Ce=!0;break}Ce||(this[s(915)]=0,this[s(332)]=1,this[s(737)]=0,this[s(402)]=1,this[s(368)]=!1);for(var zt=this.nPTZFragmentNum[u]=0;zt<100;++zt)this[s(1138)][u][zt]=0;return this[s(1105)][u]=!1,Ee[s(593)]}},{key:oe(505),value:function(){for(var u=oe,s=0;s<32;++s){for(var e=0;e<4;++e)this[u(1459)][s][e]=null;for(var r=0;r<1024;++r)this.pBasePTZPoints[s][r]=null,this[u(1183)][s][r]=null,this.pPanoPTZPoints[s][r]=null;this[u(733)][s]=0,this.nPTZFragmentNode[s]=null,this.bPortAllocated[s]=!1,this[u(646)][s]=!1,this.pRenderParam[s]=null,this[u(812)][s]=null,this[u(1208)][s]=null,this[u(1042)][s]=0,this[u(652)][s]=0,this.nPanoPTZPointNum[s]=0,this[u(1343)][s]=0,this.pPanoPTZPoints[s]=null,this.pRectPoints[s]=null,this[u(884)][s]=null,this[u(1183)][s]=null}this[u(1105)]=null,this.pRenderParam=null,this[u(812)]=null,this[u(1208)]=null,this[u(739)]=null,this.nBasePTZPointNum=null,this[u(652)]=null,this[u(1405)]=null,this.nPTZFragmentNum=null,this.pBasePTZPoints=null,this.pPanoPTZPoints=null,this[u(1459)]=null,this.nPTZRectNum=null,this[u(1120)]=li,this[u(915)]=0,this[u(332)]=1,this.fRY1=0,this[u(402)]=1,this[u(368)]=!1,this.pOriPTZPoints=null,this.pBasePTZPoints=null,this[u(1398)]=-1,this.nPlaceType=0,this[u(1138)]=null,this[u(646)]=null,this[u(1120)]=Nt}},{key:"InitColorList",value:function(){var u=oe;this.stPTZColor[0].fR=.5,this[u(1208)][0].fG=.5,this[u(1208)][0].fB=0,this.stPTZColor[0].fA=1,this[u(1208)][1].fR=1,this[u(1208)][1].fG=0,this[u(1208)][1].fB=0,this[u(1208)][1].fA=1,this[u(1208)][2].fR=0,this.stPTZColor[2].fG=1,this[u(1208)][2].fB=0,this.stPTZColor[2].fA=1,this[u(1208)][3].fR=0,this[u(1208)][3].fG=0,this.stPTZColor[3].fB=1,this[u(1208)][3].fA=1,this.stPTZColor[4].fR=1,this.stPTZColor[4].fG=1,this[u(1208)][4].fB=0,this[u(1208)][4].fA=1,this[u(1208)][5].fR=.5,this.stPTZColor[5].fG=0,this[u(1208)][5].fB=1,this[u(1208)][5].fA=1,this[u(1208)][6].fR=0,this.stPTZColor[6].fG=1,this[u(1208)][6].fB=1,this[u(1208)][6].fA=1,this[u(1208)][7].fR=1,this[u(1208)][7].fG=.5,this.stPTZColor[7].fB=0,this[u(1208)][7].fA=1,this[u(1208)][8].fR=0,this[u(1208)][8].fG=.5,this[u(1208)][8].fB=.5,this[u(1208)][8].fA=1;for(var s=9;s<32;s++)this[u(1208)][s].fR=+s/32,this[u(1208)][s].fG=+s/32,this[u(1208)][s].fB=+s/32,this[u(1208)][s].fA=1;return Ee[u(593)]}},{key:oe(391),value:function(u){var s=oe;if(u<0||32<=u)return Ee.SR_ERR_PARAM;if(this[s(675)][u]==null)return Ee.SR_ERR_CALL_ORDER;var e=0,r=0;switch(this[s(652)][u]=0,this[s(1042)][u]=0,this.pRenderParam[u][s(310)]){case nt[s(1282)]:for(r=0;r<1;r+=.01)this[s(1003)](e,r,u);for(r=.9995,e=0;e<1;e+=.02)this.GetFishPTZCeiling(e,r,u);for(e=.999,r=.9995;0<=r;r-=.01)this[s(1003)](e,r,u);for(r=0,e=.999;0<=e;e-=.02)this.GetFishPTZCeiling(e,r,u);break;case nt[s(474)]:for(r=0;r<1;r+=.01)this[s(576)](e,r,u);for(r=.9995,e=0;e<1;e+=.02)this[s(576)](e,r,u);for(e=.999,r=.9995;0<=r;r-=.01)this.GetFishPTZFloor(e,r,u);for(r=0,e=.999;0<=e;e-=.02)this[s(576)](e,r,u);break;case nt[s(994)]:for(r=0;r<1;r+=.01)this[s(1090)](e,r,u);for(r=.9995,e=0;e<1;e+=.02)this[s(1090)](e,r,u);for(e=.999,r=.9995;0<=r;r-=.01)this.GetFishPTZWALL(e,r,u);for(r=0,e=.999;0<=e;e-=.02)this.GetFishPTZWALL(e,r,u)}return Ee[s(593)]}},{key:oe(838),value:function(u){var s=oe;if(this.nWndPort==-1||this[s(884)][u]==null||this[s(675)][this[s(1398)]]==null)return Ee[s(1538)];this[s(1405)][u]=0;var e=Ee[s(593)],r=this[s(1398)];switch(this[s(675)][r][s(310)]){case nt[s(1018)]:if(e=this[s(1024)](u),Ee[s(593)]!=e)return e;break;case nt[s(472)]:if(e=this[s(1356)](u),Ee[s(593)]!=e)return e;break;case nt[s(1379)]:if(e=this[s(1091)](u),Ee.SR_OK!=e)return e;break;default:return Ee[s(1112)]}return this[s(779)](u),Ee[s(593)]}},{key:"GetRectPoints",value:function(u){var s=oe;if(u<0||32<=u)return Ee[s(650)];if(this[s(1398)]==-1||this[s(675)][this[s(1398)]]==null||this[s(812)][u]==null)return Ee.SR_ERR_CALL_ORDER;var e=this[s(675)][this[s(1398)]][s(310)],r=Ee[s(593)],b=[];switch(b.fX=0,b.fY=0,e){case nt.SR_DE_FISH_PANORAMA_WALL:if(r=this[s(1238)](b,this[s(812)][u][s(875)],this.pFishParam[u][s(660)]),Ee[s(593)]!=r)return r;break;case nt[s(472)]:if(r=this[s(1077)](b,this[s(812)][u][s(875)],this[s(812)][u][s(660)]),Ee[s(593)]!=r)return Ee[s(1112)]==r&&(this.pRectPoints[u]=null),r;break;case nt[s(1379)]:if(r=this.GetPointFish2PanoCeiling(b,this[s(812)][u][s(875)],this[s(812)][u].fPTZY),Ee[s(593)]!=r)return Ee[s(1112)]==r&&(this.pRectPoints[u]=null),r;break;case nt.SR_DE_FISH_ORIGINAL:b.fX=this.pFishParam[u].fPTZX,b.fY=this[s(812)][u][s(660)];break;default:return Ee.SR_ERR_NOT_SUPPORT}if(this[s(1459)][u]==null){this[s(1459)][u]=[];for(var A=0;A<4;++A)this[s(1459)][u][A]=[],this.pRectPoints[u][A].fX=0,this.pRectPoints[u][A].fY=0}return this[s(1459)][u][0].fX=b.fX-yn,this[s(1459)][u][0].fY=b.fY-yn,this[s(1459)][u][1].fX=b.fX+yn,this[s(1459)][u][1].fY=b.fY-yn,this[s(1459)][u][2].fX=b.fX+yn,this[s(1459)][u][2].fY=b.fY+yn,this.pRectPoints[u][3].fX=b.fX-yn,this.pRectPoints[u][3].fY=b.fY+yn,this[s(1343)][u]=4,Ee[s(593)]}},{key:oe(1003),value:function(H,K,e){var r=oe,z=[],le=(z.fX=0,z.fY=0,[]),b=(le.fX=0,le.fY=0,[]),A=(b.fX=0,b.fY=0,[]),Ce=(this.fRX2-this[r(915)])/(this[r(402)]-this[r(737)]),Xe=(this.fRX1+this[r(332)])/2*1,Ae=(this[r(737)]+this[r(402)])/2*Ce,zt=(this.fRX2-this[r(915)])/2*1,H=(z.fX=K-.5,z.fY=.5-H,K=this[r(675)][e][r(1580)],le.fX=z.fX,le.fY=z.fY*this[r(675)][e][r(1025)]+K*this[r(675)][e].fSinV,K*this[r(675)][e][r(1025)]-z.fY*this[r(675)][e].fSinV),K=Math[r(1540)](le.fX*le.fX+le.fY*le.fY),z=Math[r(1540)](le.fX*le.fX+le.fY*le.fY+H*H),H=Math[r(925)](K/z)/1.5707963*.5,z=(le.fX=H*le.fX/K,le.fY=H*le.fY/K,b.fX=le.fX*this.pRenderParam[e][r(780)]-le.fY*this[r(675)][e][r(1181)],b.fY=le.fX*this.pRenderParam[e][r(1181)]+le.fY*this.pRenderParam[e][r(780)],A.fX=2*b.fX*zt+Xe,A.fY=2*-b.fY*zt+Ae,this[r(1042)][e]),H=(this.pBasePTZPoints[e][z].fX=b.fX+.5,this[r(884)][e][z].fY=.5-b.fY,this.nBasePTZPointNum[e]=this[r(1042)][e]+1,this[r(915)]<=0?0:+this.fRX1),K=this[r(737)]<=0?0:this.fRY1*Ce,le=1<=this[r(332)]?1-H:+this[r(332)]-H,Xe=1<=this[r(402)]?Ce-K:this[r(402)]*Ce-K;return A.fX=(A.fX-H)/le,A.fY=(A.fY-K)/Xe,A.fX<=1&&A.fY<=1&&0<=A.fX&&0<=A.fY&&(zt=this[r(652)][e],this[r(1183)][e][zt].fX=A.fX,this.pOriPTZPoints[e][zt].fY=A.fY,this[r(652)][e]=this[r(652)][e]+1),Ee[r(593)]}},{key:oe(576),value:function(K,H,e){var r=oe,z=[],le=(z.fX=0,z.fY=0,[]),b=(le.fX=0,le.fY=0,[]),A=(b.fX=0,b.fY=0,[]),Ce=(this[r(332)]-this[r(915)])/(this.fRY2-this[r(737)]),Xe=(this[r(915)]+this.fRX2)/2*1,Ae=(this.fRY1+this[r(402)])/2*Ce,zt=(this[r(332)]-this.fRX1)/2*1,H=(z.fX=K-.5,z.fY=H-.5,K=this[r(675)][e][r(1580)],le.fX=z.fX,le.fY=z.fY*this.pRenderParam[e][r(1025)]+K*this.pRenderParam[e].fSinV,K*this.pRenderParam[e][r(1025)]-z.fY*this[r(675)][e][r(810)]),K=Math[r(1540)](le.fX*le.fX+le.fY*le.fY),z=Math[r(1540)](le.fX*le.fX+le.fY*le.fY+H*H),H=Math.asin(K/z)/1.5707963*.5,z=(le.fX=H*le.fX/K,le.fY=H*le.fY/K,b.fX=le.fX*this[r(675)][e].fCosH-le.fY*this[r(675)][e][r(1181)],b.fY=le.fX*this[r(675)][e][r(1181)]+le.fY*this.pRenderParam[e][r(780)],A.fX=2*b.fX*zt+Xe,A.fY=2*b.fY*zt+Ae,this[r(1042)][e]),H=(this[r(884)][e][z].fX=b.fX+.5,this.pBasePTZPoints[e][z].fY=b.fY+.5,this[r(1042)][e]=this.nBasePTZPointNum[e]+1,this[r(915)]<=0?0:+this[r(915)]),K=this[r(737)]<=0?0:this[r(737)]*Ce,le=1<=this[r(332)]?1-H:+this[r(332)]-H,Xe=1<=this[r(402)]?Ce-K:this[r(402)]*Ce-K;return A.fX=(A.fX-H)/le,A.fY=(A.fY-K)/Xe,A.fX<=1&&A.fY<=1&&0<=A.fX&&0<=A.fY&&(zt=this[r(652)][e],this[r(1183)][e][zt].fX=A.fX,this.pOriPTZPoints[e][zt].fY=A.fY,this[r(652)][e]=this[r(652)][e]+1),Ee[r(593)]}},{key:oe(1090),value:function(H,z,e){var r=oe,Ae=[],zt=(Ae.fX=0,Ae.fY=0,[]),b=(zt.fX=0,zt.fY=0,[]),A=(b.fX=0,b.fY=0,[]),Ce=(this[r(332)]-this.fRX1)/(this[r(402)]-this[r(737)]),K=(this.fRX1+this[r(332)])/2*1,Xe=(this[r(737)]+this.fRY2)/2*Ce,le=(this[r(332)]-this.fRX1)/2*1,z=(Ae.fX=z-.5,Ae.fY=H-.5,z=this[r(675)][e].fZoom,zt.fX=Ae.fX,zt.fY=Ae.fY*this[r(675)][e][r(1025)]+z*this[r(675)][e][r(810)],H=z*this[r(675)][e][r(1025)]-Ae.fY*this[r(675)][e][r(810)],b.fX=zt.fX*this[r(675)][e][r(780)]+H*this[r(675)][e][r(1181)],b.fY=zt.fY,H*this[r(675)][e][r(780)]-zt.fX*this[r(675)][e][r(1181)]),Ae=Math.sqrt(b.fX*b.fX+b.fY*b.fY),H=Math.sqrt(b.fX*b.fX+b.fY*b.fY+z*z),zt=Math.asin(Ae/H)/1.5707963*.5,z=(A.fX=zt*b.fX/Ae*le*2+K,A.fY=zt*b.fY/Ae*le*2+Xe,this.nBasePTZPointNum[e]),H=(this[r(884)][e][z].fX=zt*b.fX/Ae+.5,this.pBasePTZPoints[e][z].fY=zt*b.fY/Ae+.5,this[r(1042)][e]=this.nBasePTZPointNum[e]+1,this[r(915)]<=0?0:+this[r(915)]),K=this.fRY1<=0?0:this[r(737)]*Ce,le=1<=this[r(332)]?1-H:+this.fRX2-H,Xe=1<=this[r(402)]?Ce-K:this[r(402)]*Ce-K;return A.fX=(A.fX-H)/le,A.fY=(A.fY-K)/Xe,A.fX<=1&&A.fY<=1&&0<=A.fX&&0<=A.fY&&(z=this[r(652)][e],this[r(1183)][e][z].fX=A.fX,this[r(1183)][e][z].fY=A.fY,this[r(652)][e]=this[r(652)][e]+1),Ee[r(593)]}},{key:oe(1091),value:function(u){var s=oe;if(this.pRenderParam[u]==null||this.pRenderParam[this[s(1398)]]==null)return Ee.SR_ERR_CALL_ORDER;if(this[s(884)][u]==null)return Ee[s(1538)];var e,r=this[s(1042)][u],b=(this[s(332)]-this[s(915)])/(this[s(402)]-this[s(737)]),A=(this.fRX2-this[s(915)])/2*1,Ce=0,Ae=((1<this.fRX2||1<this[s(402)]||this[s(737)]<0||this[s(915)]<0)&&(this[s(915)]<0&&Ce<(e=-this[s(915)])&&(Ce=e),1<this[s(332)]&&Ce<(e=this.fRX2-1)&&(Ce=e),this.fRY1<0&&Ce<(e=-this[s(737)]*b)&&(Ce=e),1<this[s(402)]&&Ce<(e=(this[s(402)]-1)*b)&&(Ce=e)),Ce/A),zt=[],z=(zt.fX=0,zt.fY=0,[]);z.fX=0;for(var H,K,le,Xe,vt=z.fY=0;vt<r;++vt)z.fX=this[s(884)][u][vt].fX,z.fY=this[s(884)][u][vt].fY,Math[s(1502)](z.fX-.5)<fn&&Math[s(1502)](z.fY-.5)<fn||((le=[]).fX=0,le.fY=0,(H=[]).fX=0,H.fY=0,le.fX=z.fX-.5,le.fY=z.fY-.5,H.fX=-.5*Math.sin(this[s(675)][this[s(1398)]].fAngle),H.fY=.5*Math[s(1268)](this[s(675)][this.nWndPort].fAngle),K=Math[s(1540)](le.fX*le.fX+le.fY*le.fY),Xe=Math[s(1540)](H.fX*H.fX+H.fY*H.fY),Xe=Math[s(1200)]((le.fX*H.fX+le.fY*H.fY)/(K*Xe)),0<le.fX*H.fY-le.fY*H.fX&&(Xe=6.2831852-Xe),zt.fX=Xe/6.2831853,zt.fY=(2*(.5-K)-Ae)/(.8-Ae),0<=zt.fY&&0<=zt.fX&&zt.fY<=1&&zt.fX<=1&&(le=this.nPanoPTZPointNum[u],this[s(1325)][u][le].fX=zt.fX,this.pPanoPTZPoints[u][le].fY=zt.fY,this[s(1405)][u]=this[s(1405)][u]+1));return Ee.SR_OK}},{key:"GetPanoPTZFloor",value:function(u){var s=oe;if(this[s(675)][u]==null||this.pRenderParam[this.nWndPort]==null||this[s(884)][u]==null)return Ee[s(1538)];var e,r=this[s(1042)][u],b=(this[s(332)]-this[s(915)])/(this[s(402)]-this[s(737)]),A=(this.fRX2-this.fRX1)/2*1,Ce=0,Ae=((1<this[s(332)]||1<this[s(402)]||this[s(737)]<0||this[s(915)]<0)&&(this[s(915)]<0&&Ce<(e=-this.fRX1)&&(Ce=e),1<this.fRX2&&Ce<(e=this.fRX2-1)&&(Ce=e),this[s(737)]<0&&Ce<(e=-this.fRY1*b)&&(Ce=e),1<this.fRY2&&Ce<(e=(this[s(402)]-1)*b)&&(Ce=e)),Ce/A),zt=[],z=(zt.fX=0,zt.fY=0,[]);z.fX=0;for(var H,K,le,Xe,vt=z.fY=0;vt<r;++vt)z.fX=this.pBasePTZPoints[u][vt].fX,z.fY=this[s(884)][u][vt].fY,Math[s(1502)](z.fX-.5)<fn&&Math.abs(z.fY-.5)<fn||((le=[]).fX=0,le.fY=0,(H=[]).fX=0,H.fY=0,le.fX=z.fX-.5,le.fY=z.fY-.5,H.fX=-.5*Math[s(514)](this[s(675)][this[s(1398)]][s(1485)]),H.fY=.5*Math[s(1268)](this[s(675)][this[s(1398)]][s(1485)]),K=Math.sqrt(le.fX*le.fX+le.fY*le.fY),Xe=Math[s(1540)](H.fX*H.fX+H.fY*H.fY),Xe=Math.acos((le.fX*H.fX+le.fY*H.fY)/(K*Xe)),0<le.fX*H.fY-le.fY*H.fX&&(Xe=6.2831852-Xe),zt.fX=1-Xe/6.2831853,zt.fY=1-(2*(.5-K)-Ae)/(.8-Ae),0<=zt.fY&&0<=zt.fX&&zt.fY<=1&&zt.fX<=1&&(le=this[s(1405)][u],this[s(1325)][u][le].fX=zt.fX,this[s(1325)][u][le].fY=zt.fY,this[s(1405)][u]=this[s(1405)][u]+1));return Ee[s(593)]}},{key:oe(1024),value:function(u){var s=oe;if(this[s(675)][u]==null||this[s(675)][this.nWndPort]==null||this[s(884)][u]==null)return Ee[s(1538)];var e,r=this[s(1042)][u],b=(this[s(332)]-this[s(915)])/(this[s(402)]-this.fRY1),A=(this[s(332)]-this.fRX1)/2*1,Ce=0,Ae=1,zt=.1,z=.9,H=(this[s(915)]<0&&(e=-this[s(915)],Ce=e/=2*A),1<this[s(332)]&&(e=this.fRX2-1,Ae=1-(e/=2*A)),this[s(737)]<0&&(e=-this.fRY1*b,zt=.1<(e/=2*A)?e:.1),1<this.fRY2&&(e=(this[s(402)]-1)*b,z=1-.9<(e/=2*A)?1-e:.9),[]),K=(H.fX=0,H.fY=0,[]);K.fX=0;for(var le=K.fY=0;le<r;++le){K.fX=this[s(884)][u][le].fX,K.fY=this[s(884)][u][le].fY;var Xe=2*K.fX*A,vt=2*K.fY*A,bt=Math.sqrt(A*A-(vt-A)*(vt-A));Math[s(1502)](bt)<fn||(K.fX=A*(Xe-A)/bt+A,K.fY=vt,H.fX=(K.fX-2*Ce*A)/(2*(Ae-Ce)*A),H.fY=(K.fY-2*zt*A)/(2*(z-zt)*A),0<=H.fY&&0<=H.fX&&H.fY<=1&&H.fX<=1&&(Xe=this[s(1405)][u],this[s(1325)][u][Xe].fX=H.fX,this[s(1325)][u][Xe].fY=H.fY,this[s(1405)][u]=this[s(1405)][u]+1))}return Ee.SR_OK}},{key:oe(1436),value:function(u,s,e){var r=oe;if(u==null||this[r(675)][this.nWndPort]==null)return Ee[r(1538)];var Ce=(this[r(332)]-this[r(915)])/(this[r(402)]-this.fRY1),b=(this[r(332)]-this[r(915)])/2*1,A=0,Ce=((1<this.fRX2||1<this[r(402)]||this.fRX1<0||this.fRY1<0)&&(this[r(915)]<0&&A<(Ae=-this[r(915)])&&(A=Ae),1<this[r(332)]&&A<(Ae=this.fRX2-1)&&(A=Ae),this[r(737)]<0&&A<(Ae=-this[r(737)]*Ce)&&(A=Ae),1<this.fRY2&&A<(Ae=(this.fRY2-1)*Ce)&&(A=Ae)),A/b),Ae=[];return Math[r(1502)](s-.5)<fn&&Math[r(1502)](e-.5)<fn?Ee.SR_ERR_NOT_SUPPORT:(A=[],A.fX=0,A.fY=0,b=[],b.fX=0,A.fX=s-.5,A.fY=e-.5,b.fX=-.5*Math[r(514)](this[r(675)][this[r(1398)]][r(1485)]),b.fY=.5*Math[r(1268)](this[r(675)][this[r(1398)]][r(1485)]),s=Math[r(1540)](A.fX*A.fX+A.fY*A.fY),e=Math[r(1540)](b.fX*b.fX+b.fY*b.fY),e=Math.acos((A.fX*b.fX+A.fY*b.fY)/(s*e)),0<A.fX*b.fY-A.fY*b.fX&&(e=6.2831852-e),Ae.fX=e/6.2861853,Ae.fY=(2*(.5-s)-Ce)/(.8-Ce),0<=Ae.fY&&0<=Ae.fX&&Ae.fY<=1&&Ae.fX<=1?(u.fX=Ae.fX,u.fY=Ae.fY,Ee[r(593)]):Ee[r(650)])}},{key:oe(690),value:function(u,s,e){var r=oe;if(this[r(675)][this.nWndPort]==null)return Ee[r(1538)];if(u==null)return Ee[r(650)];var z=(this[r(332)]-this[r(915)])/(this[r(402)]-this[r(737)]),b=(this[r(332)]-this.fRX1)/2*1,A=0,Ce=1,Ae=0,zt=1,K=0,z=((1<this[r(332)]||1<this[r(402)]||this[r(915)]<0||this[r(737)]<0)&&(this[r(915)]<0&&(K<(H=-this[r(915)])&&(K=H),A=H/=2*b),1<this[r(332)]&&(K<(H=this[r(332)]-1)&&(K=H),Ce=1-(H/=2*b)),this[r(737)]<0&&(K<(H=-this[r(737)]*z)&&(K=H),Ae=H/=2*b),1<this[r(402)]&&(K<(H=(this[r(402)]-1)*z)&&(K=H),zt=1-(H/=2*b))),K/b),H=[],K=[];return H.fX=1-s,H.fY=(.8-z)*(1-e)+z,b=6.2831853*H.fX+this[r(675)][this.nWndPort][r(1485)],s=.5*(1-H.fY),K.fX=.5-s*Math.sin(b),K.fY=.5+s*Math[r(1268)](b),K.fX=(K.fX-A)/(Ce-A),K.fY=(K.fY-Ae)/(zt-Ae),u.fX=K.fX,u.fY=K.fY,Ee[r(593)]}},{key:oe(630),value:function(u,s,e){var r=oe;if(this.pRenderParam[this.nWndPort]==null)return Ee[r(1538)];if(u==null)return Ee[r(650)];var z=(this.fRX2-this[r(915)])/(this[r(402)]-this[r(737)]),b=(this.fRX2-this[r(915)])/2*1,A=0,Ce=1,Ae=.1,zt=.9,z=(this[r(915)]<0&&(H=-this[r(915)],A=H/=2*b),1<this.fRX2&&(H=this[r(332)]-1,Ce=1-(H/=2*b)),this[r(737)]<0&&(H=-this[r(737)]*z,Ae=.1<(H/=2*b)?H:.1),1<this[r(402)]&&(H=(this[r(402)]-1)*z,zt=1-.9<(H/=2*b)?1-H:.9),[]),H=2*s*b,K=2*e*b,le=Math[r(1540)](b*b-(K-b)*(K-b));return Math[r(1502)](le)<fn?Ee[r(650)]:(e=K,z.fX=((s=b*(H-b)/le+b)-2*A*b)/(2*(Ce-A)*b),z.fY=(e-2*Ae*b)/(2*(zt-Ae)*b),0<=z.fY&&0<=z.fX&&z.fY<=1&&z.fX<=1?(u.fX=z.fX,u.fY=z.fY,Ee[r(593)]):Ee[r(650)])}},{key:oe(1361),value:function(u,s,e){var r=oe;if(this[r(675)][u]==null)return Ee[r(1538)];var b=[],A=(b.fHAngleSin=0,b[r(988)]=0,b[r(451)]=0,b[r(927)]=0,Ee.SR_OK);if(nt.SR_DE_FISH_PTZ_FLOOR==this[r(675)][u][r(310)]||nt[r(1282)]==this[r(675)][u].nDisplayEffect){if((A=this[r(331)](s,e,b,this[r(675)][u][r(310)]))!=Ee.SR_OK)return A}else{if(nt[r(994)]!=this[r(675)][u].nDisplayEffect)return Ee[r(1112)];if((A=this.ComputeAngleHorizontal(s,e,b))!=Ee[r(593)])return A}return this[r(725)](this[r(915)],this[r(332)],this[r(737)],this[r(402)],b,this[r(675)][u][r(1580)],this[r(675)][u].nDisplayEffect)==0?Ee[r(650)]:(this.pRenderParam[u][r(780)]=b[r(988)],this.pRenderParam[u][r(1181)]=b[r(1211)],this[r(675)][u][r(1025)]=b[r(927)],this[r(675)][u][r(810)]=b.fVAngleSin,Ee[r(593)])}},{key:oe(817),value:function(u){var s=oe,e=0;switch(e){case 0:return e=this[s(841)](u),this[s(1252)]==4&&(this[s(1252)]=0),Ee.SR_OK;case 3:return(e=this[s(841)](u))==this[s(1252)]||this[s(1252)]==4?Ee[s(593)]:Ee[s(1112)];case 2:case 1:return(e=this.GetPlaceType(u))==this[s(1252)]||e==4?Ee[s(593)]:Ee[s(1112)];default:return Ee.SR_ERR_NOT_SUPPORT}return Ee.SR_ERR_NOT_SUPPORT}},{key:oe(841),value:function(u){var s=oe;switch(u){case nt[s(1282)]:case nt.SR_DE_FISH_PANORAMA_CEILING_360:case nt[s(1212)]:case nt.SR_DE_FISH_CYLINDER_CEILING:case nt[s(414)]:return 3;case nt[s(474)]:case nt[s(472)]:case nt[s(563)]:case nt[s(405)]:case nt[s(1139)]:return 2;case nt.SR_DE_FISH_PTZ_WALL:case nt[s(1018)]:case nt.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case nt.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:return 1;case nt.SR_DE_FISH_SEMISPHERE:case nt[s(677)]:case nt[s(1262)]:case nt[s(1046)]:case nt[s(1262)]:return 4;default:return 0}return 0}},{key:oe(1057),value:function(u,s){var e=oe;if(u<0||32<=u||s==null)return Ee[e(650)];if(this[e(675)][u]==null)return Ee[e(1538)];var r=Ee[e(593)];switch(s[e(572)]){case bi:if((r=this[e(922)](s[e(473)],s[e(919)],s[e(1171)],s[e(825)]))!=Ee[e(593)])return r;this[e(675)][u][e(818)]=s[e(818)],this[e(368)]=s[e(368)];break;case Kt:if(nt[e(1379)]!=this[e(675)][u][e(310)]&&nt[e(1212)]!=this.pRenderParam[u][e(310)]&&nt[e(472)]!=this[e(675)][u][e(310)]&&nt[e(1366)]!=this.pRenderParam[u][e(310)])return Ee.SR_ERR_NOT_SUPPORT;if((r=this[e(955)](u,s[e(1485)]))!=Ee[e(593)])return r;this[e(812)][u][e(1485)]=s[e(1485)];break;case ri:if(nt[e(994)]!=this[e(675)][u][e(310)]&&nt.SR_DE_FISH_PTZ_CEILING!=this[e(675)][u][e(310)]&&nt[e(474)]!=this[e(675)][u][e(310)])return Ee[e(1112)];if((r=this[e(891)](u,s[e(1580)]))!=Ee[e(593)])return r;this[e(812)][u][e(1580)]=s.fZoom;break;case Li:if(nt[e(994)]!=this[e(675)][u].nDisplayEffect&&nt.SR_DE_FISH_PTZ_CEILING!=this[e(675)][u][e(310)]&&nt.SR_DE_FISH_PTZ_FLOOR!=this[e(675)][u][e(310)])return Ee[e(1112)];if((r=this.UpdatePTZPosition(u,s[e(875)],s[e(660)],this[e(675)][u][e(1580)],!0))!=Ee[e(593)])return r;this[e(812)][u].fPTZX=s[e(875)],this[e(812)][u][e(660)]=s[e(660)];break;case Zt:return Ee[e(1112)]}return r=this[e(439)]()}},{key:oe(444),value:function(u,s){var e=oe;return u<0||32<=u||s==null||this[e(812)][u]==null?Ee[e(650)]:(s.fRXLeft=this[e(915)],s[e(919)]=this[e(332)],s[e(1171)]=this.fRY1,s[e(825)]=this[e(402)],s[e(368)]=this[e(368)],s[e(818)]=this[e(675)][u][e(818)],s.nFishParamType=this[e(812)][u][e(572)],s.fAngle=this[e(812)][u][e(1485)],s[e(1580)]=this.pFishParam[u].fZoom,s.fPTZX=this.pFishParam[u][e(875)],s[e(660)]=this[e(812)][u].fPTZY,Ee[e(593)])}},{key:oe(796),value:function(u,s){var e=oe;return u<0||32<=u||s==null||this[e(675)][u]==null?Ee[e(650)]:(s[e(473)]=this[e(915)],s[e(919)]=this.fRX2,s.fRYTop=this.fRY1,s[e(825)]=this[e(402)],s[e(368)]=this[e(368)],s.fCosH=this[e(675)][u][e(780)],s[e(1181)]=this[e(675)][u][e(1181)],s[e(1025)]=this[e(675)][u][e(1025)],s[e(810)]=this[e(675)][u][e(810)],s.fAngle=this[e(675)][u].fAngle,s[e(1580)]=this[e(675)][u][e(1580)],s.nDisplayEffect=this.pRenderParam[u][e(310)],s[e(818)]=this[e(675)][u][e(818)],Ee[e(593)])}},{key:oe(922),value:function(u,s,e,r){var b=oe;if(u<=-.5||.4<=u||s<=.6||1.5<=s||e<=-.5||.4<=e||r<=.6||1.5<=r||u+s<=.8||1.2<=u+s||e+r<=.8||1.2<=e+r)return Ee[b(650)];if(u<0||1<s||e<0||1<r){for(var A=0;A<32;++A)if(nt[b(1282)]==this[b(675)][A][b(310)]||nt.SR_DE_FISH_PTZ_FLOOR==this[b(675)][A].nDisplayEffect||nt[b(994)]==this[b(675)][A].nDisplayEffect){var Ce=[];if(Ce.fHAngleCos=this.pRenderParam[A].fCosH,Ce.fHAngleSin=this[b(675)][A].fSinH,Ce[b(927)]=this[b(675)][A][b(1025)],Ce[b(451)]=this.pRenderParam[A][b(810)],this[b(725)](u,s,e,r,Ce,this[b(675)][A][b(1580)],this[b(675)][A].nDisplayEffect)==0)return Ee[b(650)]}}return this[b(915)]=u,this[b(332)]=s,this.fRY1=e,this[b(402)]=r,Ee[b(593)]}},{key:oe(955),value:function(u,s){var e=oe;return this[e(675)][u]==null?Ee[e(1538)]:(nt[e(472)]==this[e(675)][u][e(310)]||nt[e(1366)]==this[e(675)][u][e(310)]?this.pRenderParam[u][e(1485)]=s:nt[e(1379)]!=this.pRenderParam[u][e(310)]&&nt.SR_DE_FISH_PANORAMA_CEILING_180!=this[e(675)][u][e(310)]||(this[e(675)][u][e(1485)]=-s),Ee.SR_OK)}},{key:"ComputeAngleVertical",value:function(u,s,e,r){var b=oe,A=Math[b(1540)]((s-.5)*(s-.5)+(u-.5)*(u-.5));if(.5<A)return Ee[b(650)];if(A<.001)return e[b(927)]=1,e[b(451)]=0,e[b(988)]=1,e.fHAngleSin=0,Ee[b(593)];if(r==nt[b(1282)]){e[b(988)]=(.5-s)/A,e[b(1211)]=(.5-u)/A;var Ce=A*Cn;e[b(927)]=Math[b(1268)](Ce),e[b(451)]=Math[b(514)](Ce)}else{if(r!=nt[b(474)])return Ee[b(650)];e[b(988)]=(s-.5)/A,e[b(1211)]=(.5-u)/A,Ce=A*Cn,e[b(927)]=Math[b(1268)](Ce),e[b(451)]=Math.sin(Ce)}return Ee[b(593)]}},{key:oe(456),value:function(u,s,e){var r=oe,b,A;return .25<(s-.5)*(s-.5)+(u-.5)*(u-.5)?Ee[r(650)]:(s=(s-.5)/.5*Cn/2,b=Math.cos(s),s=Math.sin(s),1<(u-.5)/.5/b||(u-.5)/.5/b<-1?SR_ERR_PARAM:(u=(u-.5)/.5/b*Cn/2,A=Math[r(1268)](u),u=Math[r(514)](u),e[r(927)]=b,e[r(451)]=s,e[r(988)]=A,e[r(1211)]=u,Ee[r(593)]))}},{key:oe(725),value:function(u,s,e,r,b,A,Ce){var Ae=oe;return this[Ae(656)](u,s,e,r,b[Ae(988)],b[Ae(1211)],b[Ae(927)],b.fVAngleSin,A,1,.5,Ce)!=1&&this[Ae(656)](u,s,e,r,b.fHAngleCos,b[Ae(1211)],b.fVAngleCos,b[Ae(451)],A,0,.5,Ce)!=1&&this[Ae(656)](u,s,e,r,b.fHAngleCos,b[Ae(1211)],b[Ae(927)],b.fVAngleSin,A,.5,1,Ce)!=1&&this.IsOutofImage(u,s,e,r,b[Ae(988)],b[Ae(1211)],b[Ae(927)],b[Ae(451)],A,.5,0,Ce)!=1&&this[Ae(656)](u,s,e,r,b[Ae(988)],b.fHAngleSin,b[Ae(927)],b[Ae(451)],A,0,0,Ce)!=1&&this[Ae(656)](u,s,e,r,b[Ae(988)],b.fHAngleSin,b[Ae(927)],b[Ae(451)],A,0,1,Ce)!=1&&this[Ae(656)](u,s,e,r,b.fHAngleCos,b[Ae(1211)],b[Ae(927)],b[Ae(451)],A,1,1,Ce)!=1&&this[Ae(656)](u,s,e,r,b[Ae(988)],b[Ae(1211)],b[Ae(927)],b.fVAngleSin,A,1,0,Ce)!=1}},{key:oe(656),value:function(u,s,Hi,hi,b,A,Ce,Ae,zt,z,H,K){var le=oe,Xe,vt,bt,Ht=(s-u)/(hi-Hi),gi=(u+s)/2*1,Hi=(Hi+hi)/2*Ht,hi=(s-u)/2*1;if(K==SR_DE_FISH_PTZ_CEILING){if(Ai=z-.5,fi=(Xe=.5-H)*Ce+(vt=zt)*Ae,(bt=vt*Ce-Xe*Ae)<=0)return!0;var Ai,fi,D,h=Math[le(1540)](Ai*Ai+fi*fi),s=Math.sqrt(Ai*Ai+fi*fi+bt*bt),u=Math[le(925)](h/s)/1.5707963*.5,k=(-((Ai=u*Ai/h)*A+(fi=u*fi/h)*b)*hi*2+Hi)/Ht;if((D=(Ai*b-fi*A)*hi*2+gi)<0||1<D||k<0||1<k)return!0}return K==SR_DE_FISH_PTZ_FLOOR&&(Ai=z-.5,fi=(Xe=H-.5)*Ce+(vt=zt)*Ae,(bt=vt*Ce-Xe*Ae)<=0||(h=Math[le(1540)](Ai*Ai+fi*fi),s=Math[le(1540)](Ai*Ai+fi*fi+bt*bt),u=Math.asin(h/s)/1.5707963*.5,k=(((Ai=u*Ai/h)*A+(fi=u*fi/h)*b)*hi*2+Hi)/Ht,(D=(Ai*b-fi*A)*hi*2+gi)<0||1<D||k<0||1<k))||K==SR_DE_FISH_PTZ_WALL&&(D=(Ai=z-.5)*b+(bt=(vt=zt)*Ce-(Xe=H-.5)*Ae)*A,k=fi=Xe*Ce+vt*Ae,(s=bt*b-Ai*A)<=0||(h=Math[le(1540)](D*D+k*k),u=Math[le(1540)](D*D+k*k+s*s),K=Math[le(925)](h/u)/1.5707963*.5,k=(K*k/h*hi*2+Hi)/Ht,(D=K*D/h*hi*2+gi)<0||1<D||k<0||1<k))}},{key:oe(439),value:function(){var u=oe;if(this.nWndPort==-1)return Ee[u(1538)];for(var s,e=0;e<32;++e)this[u(675)][e]==null||nt[u(1282)]!=this[u(675)][e].nDisplayEffect&&nt[u(474)]!=this[u(675)][e][u(310)]&&nt[u(994)]!=this.pRenderParam[e].nDisplayEffect||(s=Ee[u(593)],this[u(1120)]==Nt?(s=this[u(391)](e),Ee[u(593)]==s&&(s=this[u(838)](e))):this.nPTZDisplayMode==Mt&&(s=this[u(755)](e)));return Ee[u(593)]}},{key:oe(631),value:function(){var u=oe;return this[u(1398)]}},{key:oe(1062),value:function(){var u=oe;return this[u(1120)]}},{key:"GetPTZColor",value:function(u,s){var e=oe;return u<0||32<=u||s==null?Ee.SR_ERR_PARAM:(s.fA=this[e(1208)][u].fA,s.fR=this[e(1208)][u].fR,s.fG=this.stPTZColor[u].fG,s.fB=this[e(1208)][u].fB,this[e(739)]!=null&&(Math.abs(this.pPTZSetColor[u].fA)<fn||Math[e(1502)](this[e(739)][u].fR)<fn||Math[e(1502)](this[e(739)][u].fG)<fn||Math.abs(this[e(739)][u].fB)<fn)&&(s.fA=this.pPTZSetColor[u].fA,s.fR=this[e(739)][u].fR,s.fG=this[e(739)][u].fG,s.fB=this[e(739)][u].fB),Ee.SR_OK)}},{key:oe(1486),value:function(u,s){var e=oe;if(u<0||32<=u||s==null)return Ee[e(650)];if(this[e(739)]==null){this.pPTZSetColor=[];for(var r=0;r<32;++r)this[e(739)][r]=[],this[e(739)][r].fR=0,this[e(739)][r].fG=0,this.pPTZSetColor[r].fB=0,this[e(739)][r].fA=1}return this[e(739)][u].fR=s.fR,this.pPTZSetColor[u].fG=s.fG,this.pPTZSetColor[u].fB=s.fB,this.pPTZSetColor[u].fA=s.fA,Ee.SR_OK}},{key:"IsPTZSelected",value:function(u){return!(u<0||32<=u)&&this.bPTZSelected[u]}},{key:oe(993),value:function(u,s){var e=oe;if(this[e(1398)]==-1||this[e(675)][this.nWndPort]==null)return-1;var r=32,b=[];b.fX=u,b.fY=s;for(var A=0;A<32;++A)this[e(646)][A]=!1;if(this[e(1120)]==Nt){switch(this.pRenderParam[this.nWndPort][e(310)]){case nt[e(472)]:this[e(690)](b,u,s);break;case nt.SR_DE_FISH_PANORAMA_CEILING_360:this[e(1436)](b,u,s);break;case nt[e(1018)]:this[e(630)](b,u,s)}for(var Ce=0;Ce<32;++Ce)if(this[e(652)][Ce]!=0){var Ae=[],zt=(Ae.fX=this[e(1183)][Ce][0].fX,Ae.fY=this[e(1183)][Ce][0].fY,[]);zt.fX=this[e(1183)][Ce][0].fX,zt.fY=this[e(1183)][Ce][0].fY;for(var z=1;z<this[e(652)][Ce];++z)this[e(640)](Ae,zt,this[e(1183)][Ce][z]);if(b.fX<=Ae.fX&&b.fX>=zt.fX&&b.fY>=zt.fY&&b.fY<=Ae.fY){r=Ce;break}}}else{if(this.nPTZDisplayMode!=Mt)return-1;for(var H=0;H<32;++H)if(b.fX<=this[e(1459)][H][2].fX&&b.fX>=this[e(1459)][H][0].fX&&b.fY>=this.pRectPoints[H][0].fY&&b.fY<=this[e(1459)][H][2].fY){r=H;break}}return r<32?(this.bPTZSelected[r]=!0,r):-1}},{key:oe(430),value:function(u){var s=oe;if(u<0||32<=u)return Ee.SR_ERR_PARAM;for(var e=0;e<32;++e)this[s(646)][e]=!1;if(this.nPTZDisplayMode==Nt){if(this[s(652)][u]==0)return Ee[s(650)];this.bPTZSelected[u]=!0}else{if(this[s(1343)][u]==0)return Ee.SR_ERR_PARAM;this.bPTZSelected[u]=!0}return Ee.SR_OK}},{key:oe(640),value:function(u,s,e){var r=oe;return e.fX<s.fX&&(s.fX=e.fX),e.fY<s.fY&&(s.fY=e.fY),e.fX>u.fX&&(u.fX=e.fX),e.fY>u.fY&&(u.fY=e.fY),Ee[r(593)]}},{key:oe(802),value:function(u,s,e){var r=oe;return u<0||32<=u?Ee[r(650)]:this[r(675)][this[r(1398)]]==null?Ee[r(1538)]:(Nt==e?this[r(1183)][u]!=null&&this.nOriPTZPointNum[u]!=0&&(s.pstPoints=this[r(1183)][u],s.nPointNum=this[r(652)][u]):Mt==e&&this[r(1459)][u]!=null&&(s[r(319)]=this[r(1459)][u],s[r(665)]=4),Ee[r(593)])}},{key:oe(728),value:function(u){var s=oe;return this[s(1120)]=u,this[s(439)]()}},{key:oe(1154),value:function(u){var s=oe;return u<0||32<=u?Ee[s(650)]:this[s(675)]==null?Ee[s(1538)]:this.pRenderParam[u][s(310)]}},{key:oe(1504),value:function(u,s,e){var r=oe;if(u<0||32<=u)return Ee.SR_ERR_PARAM;if(this[r(1325)][u]==null||this[r(1405)][u]==0)return Ee[r(650)];var b=this[r(1138)][u][e];if(s.nPointNum=this[r(1138)][u][e+1]-this[r(1138)][u][e],s.nPointNum<0)return Ee[r(1538)];s[r(319)]=[];for(var A=0;A<s[r(665)];++A){var Ce=[];Ce.fX=this[r(1325)][u][b+A].fX,Ce.fY=this[r(1325)][u][b+A].fY,s[r(319)][r(962)](Ce)}return Ee[r(593)]}},{key:"GetPTZFragmentNum",value:function(u){var s=oe;return u<0||32<=u?Ee[s(650)]:this[s(733)][u]==0?Ee[s(1538)]:this[s(733)][u]}},{key:oe(779),value:function(u){var s=oe;if(u<0||32<=u)return Ee.SR_ERR_PARAM;if(this[s(1325)][u]==null||this[s(1405)][u]==0)return Ee.SR_ERR_CALL_ORDER;this[s(1138)][u][0]=0,this[s(733)][u]=1;for(var e=0,r=0;r<this[s(1405)][u]-1;r++).5<Math[s(1502)](this[s(1325)][u][r+1].fX-this[s(1325)][u][r].fX)&&(e=this[s(733)][u],this.nPTZFragmentNode[u][e]=r+1,this.nPTZFragmentNum[u]=this[s(733)][u]+1);var b=this[s(1405)][u];return Math[s(1502)](this.pPanoPTZPoints[u][0].fX-this[s(1325)][u][b-1].fX)<.5&&(this[s(1325)][u][b].fX=this[s(1325)][u][0].fX,this[s(1325)][u][b].fY=this[s(1325)][u][0].fY,this.nPanoPTZPointNum[u]=this[s(1405)][u]+1),e=this[s(733)][u],this[s(1138)][u][e]=this.nPanoPTZPointNum[u],Ee[s(593)]}},{key:oe(433),value:function(u){var s=oe;return this[s(1105)][u]}},{key:oe(886),value:function(u,s,e){var r=oe;if(this.pRenderParam[this[r(1398)]]==null)return Ee[r(1538)];if(u==null)return Ee.SR_ERR_PARAM;var Ce=(this.fRX2-this[r(915)])/(this[r(402)]-this[r(737)]),b=(this.fRX2-this.fRX1)/2*1,A=0,Ce=((1<this[r(332)]||1<this.fRY2||this.fRX1<0||this[r(737)]<0)&&(this[r(915)]<0&&A<(Ae=-this[r(915)])&&(A=Ae),1<this[r(332)]&&A<(Ae=this[r(332)]-1)&&(A=Ae),this[r(737)]<0&&A<(Ae=-this[r(737)]*Ce)&&(A=Ae),1<this[r(402)]&&A<(Ae=(this.fRY2-1)*Ce)&&(A=Ae)),A/b),Ae=[];return Ae.fX=0,Ae.fY=0,Math[r(1502)](s-.5)<fn&&Math[r(1502)](e-.5)<fn?Ee[r(1112)]:(A=[],b=[],A.fX=s-.5,A.fY=e-.5,b.fX=-.5*Math[r(514)](this[r(675)][this[r(1398)]][r(1485)]),b.fY=.5*Math[r(1268)](this[r(675)][this[r(1398)]].fAngle),s=Math.sqrt(A.fX*A.fX+A.fY*A.fY),e=Math[r(1540)](b.fX*b.fX+b.fY*b.fY),e=Math[r(1200)]((A.fX*b.fX+A.fY*b.fY)/(s*e)),0<A.fX*b.fY-A.fY*b.fX&&(e=6.2831852-e),Ae.fX=e/6.2831853,Ae.fY=(2*(.5-s)-Ce)/(.8-Ce),0<=Ae.fY&&0<=Ae.fX&&Ae.fY<=1&&Ae.fX<=1?(u.fX=Ae.fX,u.fY=Ae.fY,Ee[r(593)]):Ee[r(650)])}},{key:oe(1077),value:function(u,s,e){var r=oe;if(this[r(675)][this[r(1398)]]==null)return Ee[r(1538)];if(u==null)return Ee[r(650)];var Ce=(this.fRX2-this.fRX1)/(this[r(402)]-this[r(737)]),b=(this[r(332)]-this.fRX1)/2*1,A=0,Ce=((1<this[r(332)]||1<this.fRY2||this.fRX1<0||this[r(737)]<0)&&(this.fRX1<0&&A<(Ae=-this[r(915)])&&(A=Ae),1<this[r(332)]&&A<(Ae=this[r(332)]-1)&&(A=Ae),this[r(737)]<0&&A<(Ae=-this[r(737)]*Ce)&&(A=Ae),1<this[r(402)]&&A<(Ae=(this.fRY2-1)*Ce)&&(A=Ae)),A/b),Ae=[];return Ae.fX=0,Ae.fY=0,Math.abs(s-.5)<fn&&Math[r(1502)](e-.5)<fn?Ee[r(1112)]:(A=[],b=[],A.fX=s-.5,A.fY=e-.5,b.fX=-.5*Math[r(514)](this.pRenderParam[this[r(1398)]][r(1485)]),b.fY=.5*Math[r(1268)](this.pRenderParam[this[r(1398)]][r(1485)]),s=Math[r(1540)](A.fX*A.fX+A.fY*A.fY),e=Math[r(1540)](b.fX*b.fX+b.fY*b.fY),e=Math[r(1200)]((A.fX*b.fX+A.fY*b.fY)/(s*e)),0<A.fX*b.fY-A.fY*b.fX&&(e=6.2831852-e),Ae.fX=1-e/6.2831853,Ae.fY=1-(2*(.5-s)-Ce)/(.8-Ce),0<=Ae.fY&&0<=Ae.fX&&Ae.fY<=1&&Ae.fX<=1?(u.fX=Ae.fX,u.fY=Ae.fY,Ee[r(593)]):Ee[r(650)])}},{key:"GetPointFish2PanoWall",value:function(u,s,e){var r=oe;if(this[r(675)][this[r(1398)]]==null)return Ee[r(1538)];if(u==null)return Ee[r(650)];var z=(this[r(332)]-this.fRX1)/(this.fRY2-this[r(737)]),b=(this[r(332)]-this[r(915)])/2*1,A=0,Ce=1,Ae=.1,zt=.9,z=(this[r(915)]<0&&(H=-this[r(915)],A=H/=2*b),1<this.fRX2&&(H=this.fRX2-1,Ce=1-(H/=2*b)),this.fRY1<0&&(H=-this.fRY1*z,Ae=.1<(H/=2*b)?H:.1),1<this[r(402)]&&(H=(this[r(402)]-1)*z,zt=1-.9<(H/=2*b)?1-H:.9),[]),H=(z.fX=0,z.fY=0,2*s*b),K=2*e*b,le=Math.sqrt(b*b-(K-b)*(K-b));return Math[r(1502)](le)<fn?SR_ERR_PARAM:(e=K,z.fX=((s=b*(H-b)/le+b)-2*A*b)/(2*(Ce-A)*b),z.fY=(e-2*Ae*b)/(2*(zt-Ae)*b),0<=z.fY&&0<=z.fX&&z.fY<=1&&z.fX<=1?(u.fX=z.fX,u.fY=z.fY,Ee[r(593)]):Ee.SR_ERR_PARAM)}}]),si}(),jr=function(){var oe=R;function si(){var Ge=I;ge(this,si),this[Ge(1264)]=Ge(1258),this[Ge(1128)]=null,this.mainCanvasID="",this[Ge(1233)]=0,this[Ge(359)]=nt[Ge(1347)],this[Ge(752)]=0,this[Ge(723)]=0,this[Ge(1346)]=0,this[Ge(429)],this[Ge(867)]()}return ke(si,[{key:oe(867),value:function(){var u=oe;this[u(902)]=[];for(var s=0;s<32;s++)this[u(902)][s]={},this.stFishEyeManager[s][u(1512)]=null,this[u(902)][s][u(1404)]=0,this[u(902)][s][u(352)]="",this.stFishEyeManager[s][u(960)]=0,this[u(902)][s].bInit=0,this[u(902)][s][u(1305)]=0,this[u(902)][s][u(985)]=ot,this[u(902)][s][u(1490)]=mi,this[u(902)][s][u(776)]=nt.SR_DE_FISH_ORIGINAL;this.stFishParam=[];for(var e=0;e<32;e++)this.stFishParam[e]={},this[u(1324)][e][u(1278)]=0,this[u(1324)][e].stPTZParam={},this[u(1324)][e].stPTZParam.fPTZPositionX=0,this.stFishParam[e][u(1458)][u(1357)]=0,this.stFishParam[e][u(612)]={},this.stFishParam[e].stCycleParam[u(313)]=0,this[u(1324)][e].stCycleParam[u(586)]=0,this[u(1324)][e][u(612)][u(554)]=0,this[u(1324)][e][u(612)][u(550)]=0,this.stFishParam[e][u(1580)]=0,this[u(1324)][e][u(545)]=0,this[u(1324)][e].stPTZColor={},this.stFishParam[e][u(1208)].nR=0,this[u(1324)][e].stPTZColor.nG=0,this[u(1324)][e][u(1208)].nB=0,this[u(1324)][e].stPTZColor[u(991)]=0,this[u(1324)][e][u(750)]={},this[u(1324)][e][u(750)][u(322)]=0,this[u(1324)][e][u(750)][u(1209)]=0,this[u(1324)][e][u(750)][u(1575)]=0,this[u(1324)][e][u(750)][u(518)]=0,this[u(1324)][e][u(834)]=0}},{key:oe(814),value:function(u){return 1}},{key:oe(1480),value:function(u,s){var e=oe;return this[e(1264)]=s,this[e(831)]=u,this[e(429)]==null&&(this.pFishParamManager=new Vr),this[e(1264)]==="2d"||this[e(1264)]==="2D"?(this[e(1128)]=new ta,console[e(1590)]("2d render")):(this[e(1128)]=new Dr,this[e(1128)][e(1299)](this[e(429)]),console.log(e(873))),this.oVideoHandle.SR_Init(u),this[e(1233)]=this[e(1128)][e(856)](this[e(359)]),this[e(902)][0].pRender==null&&this.mainFECCorrect!==nt[e(1347)]&&(this[e(902)][0][e(1512)]=this.oVideoHandle,this.stFishEyeManager[0][e(1404)]=0,this[e(902)][0][e(352)]=this[e(831)],this[e(902)][0][e(960)]=1,this[e(902)][0][e(1033)]=1,this[e(902)][0].nValidSubPort=0),this.mainSubPort==-1?(console[e(786)](e(1529),e(692),this[e(1233)]),0):1}},{key:oe(785),value:function(){var u=oe;this[u(1128)]!=null&&(this[u(1128)][u(943)](this[u(1233)]),this.oVideoHandle.SR_Destroy(),this[u(1128)]=null);for(var s=0;s<32;s++)this[u(902)][s][u(1512)]=null;return this[u(902)][u(387)](0,this[u(902)][u(525)]),this[u(1324)][u(387)](0,this.stFishParam[u(525)]),this[u(429)][u(505)](),this[u(429)]=null,1}},{key:oe(700),value:function(u){var s=oe;return this[s(1128)]!=null?this[s(1128)][s(658)](u):0}},{key:oe(399),value:function(u,s,e,r){var b=oe;return this[b(1128)]!=null?this[b(1128)].SR_SetDisplayRect(u,s,e,r):0}},{key:oe(343),value:function(u,s){var e=oe;return this[e(1128)]!=null?this[e(1128)][e(422)](u,s):0}},{key:"GetCanvasSize",value:function(){var u=oe;return this.oVideoHandle!=null?this[u(1128)][u(918)]():0}},{key:"SetAntialias",value:function(u){var s=oe;return this[s(1128)]!=null?this[s(1128)][s(552)](u):0}},{key:oe(1206),value:function(u,s,e){var r=oe;if(e!=mi&&e!=Ii&&e!=ti&&e!=Jt)return console.log("%c 20230516 hardDecoder not support correctType:%d",r(657),e),16;var b=this[r(1457)](s,e);return u==0?(this[r(1128)]!=null&&(this.oVideoHandle[r(943)](this[r(1233)]),this[r(1233)]=this[r(1128)][r(856)](b),this[r(902)][u][r(1512)]==null&&(this.stFishEyeManager[u].pRender=this[r(1128)],this.stFishEyeManager[u][r(1404)]=0,this[r(902)][u][r(352)]=this[r(831)],this[r(902)][u][r(960)]=1,this[r(902)][u][r(1033)]=1,this[r(902)][u].nValidSubPort=this[r(1233)])),this[r(902)][u][r(985)]=s,this[r(902)][u][r(1490)]=e,this[r(902)][u][r(776)]=b,this.mainFECCorrect=b,Jt<=this[r(902)][u][r(1490)]&&(s=this[r(902)][u][r(1512)].SR_SetRenderState(Zi,0),Ee.SR_OK!=s&&console.log(r(487),s))):this[r(902)][u][r(1512)]!=null?(this[r(902)][u][r(1512)].SR_DelSubPort(this[r(902)][u][r(1305)]),this[r(902)][u][r(1305)]=this[r(902)][u].pRender[r(856)](b)):console[r(786)](r(492),r(657)),1}},{key:"FEC_GetPort",value:function(u,s){var e=oe;if((Xt==u||ot==u)&&Vi==s)return this[e(752)]=pt,-1;if(_t==u&&At==s)return this[e(752)]=pt,-1;if(_t==u&&j==s)return this[e(752)]=pt,-1;if((Xt==u||ot==u)&&F==s)return this[e(752)]=pt,-1;if((Xt==u||ot==u)&&S==s)return this[e(752)]=pt,-1;if(_t!=u&&Xt!=u&&ot!=u)return this.FECErrorCode=MP_E_SUPPORT,-1;if(s!=0&&s!=Pi&&s!=Ii&&s!=ti&&s!=Vi&&s!=Jt&&s!=At&&s!=j&&s!=T&&s!=F&&s!=S)return this[e(752)]=MP_E_SUPPORT,-1;for(var r=0,b=1;b<32;b++){if(this[e(902)][b][e(960)]&&this[e(902)][b][e(985)]!=u)return this.FECErrorCode=1303,-1;if(this[e(902)][b][e(960)]&&this.stFishEyeManager[b][e(1490)]!=Pi&&this[e(902)][b][e(1490)]!=Jt&&this[e(902)][b][e(1490)]!=At&&this[e(902)][b][e(1490)]!=j&&this[e(902)][b][e(1490)]!=T&&this[e(902)][b].emCorrectType!=F&&this[e(902)][b][e(1490)]!=S&&s!=Pi&&s!=Jt&&s!=At&&s!=j&&s!=T&&s!=F&&s!=S)return this[e(752)]=1304,-1;if(this[e(902)][b][e(960)]&&(this.stFishEyeManager[b][e(1490)]==Pi&&s==Ii||this[e(902)][b].emCorrectType==Ii&&s==Pi))return this[e(752)]=1304,-1;if(S==s&&(this[e(1324)][0][e(612)].fRadiusLeft<=-.5||0<this[e(1324)][0].stCycleParam[e(313)]||this.stFishParam[0][e(612)][e(586)]<1||1.5<=this[e(1324)][0][e(612)][e(586)]||this.stFishParam[0][e(612)].fRadiusTop<=-.5||.4<=this.stFishParam[0][e(612)][e(554)]||this.stFishParam[0][e(612)].fRadiusBottom<=.6||1.5<=this.stFishParam[0][e(612)][e(550)]||this[e(1324)][0][e(612)][e(313)]+this[e(1324)][0][e(612)][e(586)]<=.8||1.2<=this.stFishParam[0][e(612)][e(313)]+this.stFishParam[0][e(612)][e(586)]||this[e(1324)][0][e(612)][e(554)]+this[e(1324)][0][e(612)][e(550)]<=.8||1.2<=this[e(1324)][0].stCycleParam.fRadiusTop+this.stFishParam[0].stCycleParam[e(550)]))return this[e(752)]=St,-1}for(b=1;b<32;b++)if(this.stFishEyeManager[b][e(1404)]==0&&this[e(902)][b].bUsed==0){this.stFishEyeManager[b][e(1404)]=b,this[e(902)][r][e(1305)]=-1,this[e(902)][b][e(960)]=1,this[e(902)][b][e(985)]=u,this[e(902)][b][e(1490)]=s,r=b;break}if(b==32)return this[e(752)]=1284,-1;var A=this[e(1457)](this[e(902)][r][e(985)],this[e(902)][r][e(1490)]);return nt[e(677)]!=A?(this[e(902)][r][e(761)]==0&&(this.stFishEyeManager[r][e(776)]=A,this[e(902)][r][e(761)]=0,this.stFishParam[r].fZoom=.005,this[e(1324)][r][e(1458)][e(989)]=.5,this[e(1324)][r][e(1458)][e(1357)]=.5,this[e(1324)][r].fWideScanOffset=0),this.FECErrorCode=0,this.subPortNum++,b):r<32&&this[e(902)][r][e(761)]==0?(this[e(902)][r].emEffect=A,this[e(902)][r][e(761)]=0,this[e(1324)][r][e(1580)]=0,this[e(1324)][r][e(1458)][e(989)]=0,this[e(1324)][r][e(1458)][e(1357)]=0,this[e(1324)][r][e(545)]=0,this[e(752)]=0,this[e(723)]++,b):(this[e(902)][b][e(1512)]=null,this[e(902)][b][e(1404)]=0,this[e(902)][b][e(352)]="",this[e(902)][b][e(960)]=0,this[e(902)][b].bInit=0,this.stFishEyeManager[b][e(1305)]=0,this[e(902)][b][e(985)]=ot,this[e(902)][b].emCorrectType=mi,this[e(902)][b].emEffect=nt[e(677)],this.FECErrorCode=pt,-1)}},{key:oe(1015),value:function(u){var s=oe;return this.stFishEyeManager[u][s(1512)]!==null&&(this[s(752)]=1301,returnmpCtrlDefine[s(1275)]),this[s(902)][u][s(1512)]==null&&(this[s(902)][u][s(1512)]=new Dr,this[s(902)][u][s(1512)].SR_SetFishParamManager(this[s(429)])),1}},{key:oe(1145),value:function(u,s){var e=oe;if(this[e(902)][u][e(1512)]==null)return this[e(752)]=yt;if(u<1||31<u)return this[e(752)]=1298;if(this[e(902)][u][e(960)]==0)return this[e(752)]=wt;if(s==null)return this.FECErrorCode=1305;if(this[e(902)][u][e(1404)]==0||this[e(902)][u][e(960)]==0)return this[e(752)]=wt;if(this[e(902)][u][e(761)]!=0&&this[e(902)][u][e(352)]!=null)return s!=this[e(902)][u][e(352)]?this[e(752)]=1286:1;SR_DE_FISH_ORIGINAL;var r=this[e(1457)](this[e(902)][u][e(985)],this[e(902)][u][e(1490)]),b=this[e(902)][u][e(1512)][e(1483)](s);return this[e(902)][u].nValidSubPort=this[e(902)][u][e(1512)].SR_AddSubPort(r),Ee[e(593)]!=b||Ee[e(593)]!=retSASP?(this[e(902)][u].bInited=0,this.stFishEyeManager[u].sCanvasID=null,this[e(752)]=wt):(this[e(902)][u][e(761)]=1,this.stFishEyeManager[u][e(352)]=s,Jt<=this.stFishEyeManager[u].emCorrectType&&(r=this[e(902)][u][e(1512)][e(924)](Zi,0),Ee[e(593)]!=r&&console[e(1590)](e(487),r)),0<this[e(1346)]&&(this[e(902)][u][e(1512)][e(328)](this[e(1346)]),this.FECShowMode=0),1)}},{key:oe(1582),value:function(u,s,e){var r=oe;return u!=0&&(this.stFishEyeManager[u][r(761)]==1&&(Ee[r(593)]==this[r(902)][u][r(1512)].SR_DelSubPort(this[r(902)][u][r(1305)])&&(this[r(902)][u].bInited=0,this[r(902)][u][r(1305)]=-1),this[r(902)][u][r(1512)][r(1577)]()),this.stFishEyeManager[u][r(1512)]=null,this[r(902)][u].nSubPort=0,this[r(902)][u][r(352)]="",this.stFishEyeManager[u][r(960)]=0,this[r(902)][u][r(1033)]=0,this[r(902)][u][r(1305)]=0,this[r(902)][u][r(985)]=ot,this[r(902)][u][r(1490)]=mi,this.stFishEyeManager[u].emEffect=nt.SR_DE_FISH_ORIGINAL),1}},{key:"FEC_DelPort",value:function(u){var s=oe;if(u!=0){if(u<1||31<u)return this[s(752)]=1298;if(this.stFishEyeManager[u][s(960)]==0)return this.FECErrorCode=wt;this.stFishParam[u][s(612)][s(313)]=0,this[s(1324)][u][s(612)][s(586)]=1,this[s(1324)][u][s(612)].fRadiusTop=0,this[s(1324)][u][s(612)].fRadiusBottom=1,this[s(752)]=0,(this[s(1346)]=0)<this[s(723)]&&this.subPortNum--}return 1}},{key:oe(671),value:function(u,s){var e=oe;if(this.FECErrorCode=0,this[e(902)][u][e(1512)]==null)return this.FECErrorCode=yt;if(this.stFishEyeManager[u][e(960)]==0)return this[e(752)]=wt;if(this[e(902)][u].emCorrectType>=Jt&&this.stFishEyeManager[u].emCorrectType<=S&&30&s.upDateType)return this[e(752)]=Et;if(be&s[e(457)]){if(s[e(612)]==null)return St;for(var r=1;r<32;r++){if(this[e(902)][r].bUsed&&this.stFishEyeManager[r][e(1404)]&&F==this[e(902)][r][e(1490)]&&(s[e(612)][e(313)]<=-.5||.4<=s[e(612)][e(313)]||s[e(612)][e(586)]<=.6||1.5<=s[e(612)][e(586)]||s[e(612)][e(554)]<=-.5||0<s.stCycleParam[e(554)]||s[e(612)][e(550)]<1||1.5<=s[e(612)][e(550)]||s[e(612)][e(313)]+s[e(612)][e(586)]<=.8||1.2<=s[e(612)][e(313)]+s[e(612)][e(586)]||s[e(612)][e(554)]+s[e(612)][e(550)]<=.8||1.2<=s.stCycleParam.fRadiusTop+s[e(612)].fRadiusBottom))return this[e(752)]=St;if(this[e(902)][r][e(960)]&&this[e(902)][r][e(1404)]&&S==this.stFishEyeManager[r][e(1490)]&&(s[e(612)][e(313)]<=-.5||0<s.stCycleParam[e(313)]||s[e(612)].fRadiusRight<1||1.5<=s[e(612)][e(586)]||s[e(612)].fRadiusTop<=-.5||.4<=s[e(612)][e(554)]||s[e(612)][e(550)]<=.6||1.5<=s[e(612)][e(550)]||s.stCycleParam.fRadiusLeft+s[e(612)][e(586)]<=.8||1.2<=s.stCycleParam.fRadiusLeft+s[e(612)][e(586)]||s[e(612)].fRadiusTop+s[e(612)][e(550)]<=.8||1.2<=s.stCycleParam.fRadiusTop+s.stCycleParam[e(550)]))return this[e(752)]=St}}if(this.stFishEyeManager[u][e(761)]==0){if(Me&s[e(457)]){if(Ii!=this[e(902)][u][e(1490)]&&ti!=this[e(902)][u][e(1490)]||_t==this[e(902)][u][e(985)])return this.FECErrorCode=Et;for(var b=1;b<32;b++)if(this.stFishEyeManager[b][e(1404)]&&this[e(902)][b][e(960)]&&this[e(902)][b][e(1490)]==Pi)return this[e(752)]=Dt;this[e(1324)][u][e(545)]=s[e(1303)]}if(ft&s[e(457)]){if(s[e(1208)]==null)return St;if(255<s[e(1208)].nR||255<s.stPTZColor.nG||255<s.stPTZColor.nB||255<s[e(1208)][e(991)])return this[e(752)]=Et;this[e(1324)][u][e(1208)].nR=s[e(1208)].nR,this[e(1324)][u][e(1208)].nG=s[e(1208)].nG,this.stFishParam[u][e(1208)].nB=s[e(1208)].nB,this[e(1324)][u].stPTZColor.nAlpha=s.stPTZColor[e(991)]}if(Ue&s[e(457)]){if(Pi!=this[e(902)][u][e(1490)])return this[e(752)]=Et;this.stFishParam[u][e(1458)].fPTZPositionX=s.fPTZParam[e(989)],this[e(1324)][u][e(1458)][e(1357)]=s[e(626)][e(1357)]}if(_e&s.upDateType){if(Pi!=this.stFishEyeManager[u][e(1490)])return this[e(752)]=Et;this[e(1324)][u].fZoom=s[e(431)]}if(Gt&s.upDateType){if(this.stFishParam[e(750)]==null)return Et;if(Pi!=this[e(902)][u][e(1490)])return this[e(752)]=Et;this.stFishParam[e(750)][e(322)]=s[e(750)].fTop,this.stFishParam[e(750)][e(1209)]=s.stPTZSelect[e(1209)],this.stFishParam[e(750)][e(1575)]=s.stPTZSelect[e(1575)],this.stFishParam[e(750)][e(518)]=s.stPTZSelect[e(518)]}if(be&s[e(457)]){if(s[e(612)]==null)return St;if(this[e(1094)](s[e(612)])==0)return this[e(752)]=St;this[e(1324)][0][e(612)][e(313)]=s[e(612)][e(313)],this[e(1324)][0][e(612)][e(586)]=s[e(612)].fRadiusRight,this.stFishParam[0].stCycleParam[e(554)]=s[e(612)].fRadiusTop,this.stFishParam[0][e(612)][e(550)]=s[e(612)][e(550)]}return 1}if(Me&s.upDateType){if(Ii!=this[e(902)][u].emCorrectType&&ti!=this[e(902)][u][e(1490)]||_t==this[e(902)][u][e(985)])return this[e(752)]=Et;for(var A=1;A<32;A++)if(this[e(902)][A][e(1404)]&&this.stFishEyeManager[A][e(960)]&&this[e(902)][A][e(1490)]==Pi)return this[e(752)]=Dt;var Ce={};if(Ce[e(572)]=Kt,Ce.bBlack=0,Ce[e(1485)]=s[e(1303)],Ee.SR_OK!=this[e(902)][u][e(1512)][e(412)](Ce))return this.FECErrorCode=Dt;this[e(1324)][u][e(545)]=s[e(1303)]}if(ft&s[e(457)]){if(s[e(1208)]==null)return Et;if(255<s[e(1208)].nR||255<s[e(1208)].nG||255<s[e(1208)].nB||255<s[e(1208)][e(991)])return this[e(752)]=Et;Ce={},Ce.fR=float(s.stPTZColor.nR/255),Ce.fG=float(s[e(1208)].nG/255),Ce.fB=float(s[e(1208)].nB/255),Ce.fA=float(s[e(1208)][e(991)]/255),this[e(1324)][u][e(1208)].nR=s.stPTZColor.nR,this.stFishParam[u].stPTZColor.nG=s.stPTZColor.nG,this[e(1324)][u][e(1208)].nB=s[e(1208)].nB,this[e(1324)][u].stPTZColor[e(991)]=s.stPTZColor[e(991)]}if(Ue&s[e(457)]){if(Pi!=this[e(902)][u].emCorrectType)return this.FECErrorCode=Et;if(Ce={},Ce[e(572)]=Li,Ce[e(368)]=0,Ce.fPTZX=s[e(626)][e(989)],Ce[e(660)]=s[e(626)][e(1357)],Ee[e(593)]!=this.stFishEyeManager[u].pRender[e(412)](Ce))return this.FECErrorCode=Dt;this[e(1324)][u][e(1458)].fPTZPositionX=s.fPTZParam.fPTZPositionX,this[e(1324)][u][e(1458)][e(1357)]=s[e(626)][e(1357)]}if(_e&s[e(457)]){if(Pi!=this.stFishEyeManager[u].emCorrectType)return this[e(752)]=Et;if(Ce={},Ce[e(572)]=ri,Ce[e(368)]=0,Ce[e(1580)]=s[e(431)],Ee.SR_OK!=this[e(902)][u].pRender[e(412)](Ce))return this.FECErrorCode=Dt;this[e(1324)][u][e(1580)]=s[e(431)]}if(be&s.upDateType){if(this[e(1094)](s[e(612)])==0)return this.FECErrorCode=St;if(Ce={},Ce.nFishParamType=bi,Ce[e(368)]=1,Ce[e(473)]=s[e(612)][e(313)],Ce[e(919)]=s[e(612)][e(586)],Ce[e(1171)]=s[e(612)][e(554)],Ce.fRYBottom=s.stCycleParam[e(550)],Ee[e(593)]!=this[e(902)][u][e(1512)].SR_SetFishParam(this[e(902)][u].nValidSubPort,Ce))return this.FECErrorCode=St;this[e(1324)][0][e(612)].fRadiusLeft=s[e(612)][e(313)],this[e(1324)][0][e(612)][e(586)]=s[e(612)][e(586)],this[e(1324)][0][e(612)].fRadiusTop=s.stCycleParam[e(554)],this[e(1324)][0][e(612)][e(550)]=s.stCycleParam[e(550)]}return Gt&s[e(457)]&&Pi==this[e(902)][u][e(1490)]&&Ee[e(593)]!=this[e(902)][u][e(1512)][e(412)](this[e(902)][u][e(750)])?this.FECErrorCode=1299:1}},{key:"IsValidRadiusParam",value:function(u){var s=oe;return u.fRadiusBottom<=u[s(554)]||u[s(586)]<=u[s(313)]?0:1}},{key:"FEC_SetViewParam",value:function(u,s,e){var r=oe;return s<ai||tn<s?this[r(752)]=jt:(this[r(752)]=0,this.stFishEyeManager[u].pRender==null?this[r(752)]=yt:this[r(902)][u][r(761)]==0?this[r(752)]=wt:Jt<=this[r(902)][u][r(1490)]?Ee[r(593)]!=this[r(902)][u][r(1512)][r(1294)](s,e)?this.FECErrorCode=jt:1:this[r(752)]=Et)}},{key:oe(1578),value:function(u,s){var e=oe;return!(s<1||3<s||this[e(902)][u][e(761)]==0)&&Jt<=this.stFishEyeManager[u][e(1490)]?this[e(902)][u][e(1512)][e(418)](s):-1}},{key:oe(1345),value:function(u,s,e,r,b,A,Ce){var Ae=oe;return this[Ae(902)][u][Ae(1512)]==null?this[Ae(752)]=yt:s!=0||e!=0?jt:this[Ae(902)][u].emCorrectType!=mi&&this[Ae(902)][u][Ae(1490)]!=Ii&&this[Ae(902)][u][Ae(1490)]!=ti&&this.stFishEyeManager[u].emCorrectType!=Vi?pt:this.stFishEyeManager[u].bInited==0?this[Ae(752)]=wt:r<0||b<0||A<0||Ce<0?jt:Ee[Ae(593)]!=this[Ae(902)][u][Ae(1512)][Ae(1166)](r,b,A,Ce)?this.FECErrorCode=1297:1}},{key:oe(1020),value:function(u,s){var e=oe;return this[e(902)][u][e(1512)]==null?this[e(752)]=yt:this.stFishEyeManager[u][e(761)]==0?this[e(752)]=wt:Ee[e(593)]!=this[e(902)][u][e(1512)][e(924)](Zi,s)?this[e(752)]=1297:1}},{key:"_ConvertDisplayEffect",value:function(u,s){var e=oe;switch(u){case _t:return Pi==s?nt.SR_DE_FISH_PTZ_WALL:ti==s||Vi==s?nt[e(1018)]:Jt==s?nt[e(1010)]:T==s?nt.SR_DE_FISH_PLANET:F==s?nt[e(1174)]:S==s?nt[e(614)]:nt[e(677)];case Xt:return Pi==s?nt[e(474)]:ti==s?nt[e(472)]:Ii==s?nt[e(1366)]:Vi==s?nt.SR_DE_FISH_PANORAMA_WALL:Jt==s?nt[e(1010)]:At==s?nt[e(405)]:j==s?nt[e(1139)]:T==s?nt[e(1262)]:nt[e(677)];case ot:return Pi==s?nt[e(1282)]:ti==s?nt[e(1379)]:Ii==s?nt.SR_DE_FISH_PANORAMA_CEILING_180:Vi==s?nt[e(1018)]:Jt==s?nt.SR_DE_FISH_SEMISPHERE:At==s?nt[e(364)]:j==s?nt[e(414)]:T==s?nt[e(1262)]:nt[e(677)];default:return nt.SR_DE_FISH_ORIGINAL}}}]),si}(),ma=function(){var oe=R;function si(){var Ge=I;ge(this,si),this[Ge(491)]=0,this[Ge(587)]=0,this[Ge(745)]=0,this[Ge(1274)]=0,this[Ge(606)]=0}return ke(si,[{key:oe(577),value:function(){var u=oe;this.startTime=this[u(687)]()}},{key:oe(687),value:function(){var u=oe;return this[u(587)]=60*new Date()[u(697)]()*60*1e3+60*new Date()[u(721)]()*1e3+1e3*new Date().getSeconds()+new Date()[u(1216)](),this[u(1274)]=new Date()[u(734)](),this[u(587)]}},{key:oe(536),value:function(){var u=oe,s=this[u(687)]()-this[u(491)];return this[u(1274)]!==new Date()[u(734)]()&&(s+=24*(new Date().getDate()-this.lastDate)*60*60*1e3),s}},{key:"timerReset",value:function(){var u=oe;this.startTime=0,this[u(587)]=0,this[u(745)]=0,this[u(1274)]=0,this.preTimerStamp=0}}]),si}(),ca=function(){var oe=R;function si(){var Ge=I,u=0<arguments[Ge(525)]&&arguments[0]!==void 0?arguments[0]:null;ge(this,si),this[Ge(863)]=null,this[Ge(1326)]=0,this[Ge(857)]=null,this[Ge(1215)]=null,this[Ge(1569)]=[],this.initTimer=!1,this[Ge(1133)]=0,this.baseTimeStamp=0,this.resetTimer=!0,this.RenderFrame=this[Ge(1141)][Ge(979)](this),this.renderCurStatus=2,this[Ge(1147)]=1,this[Ge(555)]=1,this[Ge(1498)]=14,this[Ge(949)]=!1,this[Ge(942)]=!0,this.getImageType="",this.getImageJPEG=!1,this[Ge(1302)]=!1,this[Ge(1501)]=0,this[Ge(526)]=0,this[Ge(1424)]=null,this[Ge(1254)]=[],this.curFrameInfo={},this[Ge(1030)][Ge(432)]=0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this[Ge(595)]=!1,this[Ge(980)]=!1,this[Ge(1295)]=!0,this[Ge(704)]=null,this[Ge(1048)]=0,this[Ge(1246)]=this[Ge(1501)]*this[Ge(526)]*3/2,this[Ge(703)]=!0,(this[Ge(1376)]=null)!=u&&(this[Ge(1376)]=u),this[Ge(1264)]=Ge(1258),this[Ge(774)]=null}return ke(si,[{key:oe(520),value:function(u,s,e,r){var b=oe;this[b(863)]=u,this.streamOpenMode=s,this.renderEngine=r,this[b(774)]=new jr,this.oVideoRender[b(1480)](this[b(863)],this[b(1264)]),this.SetCurStatus(2),this[b(1215)]==null&&(this[b(1215)]=new Ft(e,this,this[b(1376)]),this[b(1569)]=this.oVideoDecoder[b(1113)],this[b(1215)]!==null&&this[b(1215)][b(1271)]()),this[b(704)]==null&&(this[b(704)]=new ma)}},{key:"HardDecodeError",value:function(){var u=oe;this[u(1376)][u(806)](),this.player[u(682)](0),this[u(1376)][u(772)]()}},{key:oe(1545),value:function(u,s){var e=oe,r={};r[e(798)]=s.port,r.codecType=s[e(714)],r.frameType=s[e(952)],r[e(1119)]=s.frameSize,r.width=s.width,r.height=s[e(1384)],r.timeStamp=s[e(432)],r[e(964)]=s[e(964)],r[e(666)]=s.frameNum,r[e(389)]=s.interlace,r[e(1070)]=s.streamEnd,r.cropLeft=s[e(1444)],r[e(1552)]=s[e(1552)],r.cropTop=s.cropTop,r[e(1429)]=s.cropBottom,r[e(628)]=s[e(628)],r[e(500)]=s[e(500)],r[e(727)]=s[e(727)],r[e(394)]=s[e(394)],r[e(1380)]=s.hour,r[e(1088)]=s.minute,r[e(939)]=s.second,r[e(1221)]=s.milliseconds,this[e(1254)][e(962)](r),this[e(1215)][e(1545)](u,s)}},{key:oe(854),value:function(){var u=this;return new Promise(function(s,e){var r=I;u[r(1215)][r(564)]()[r(705)](function(){var b=r;u[b(1254)][b(387)](0,u[b(1254)][b(525)]),u.curFrameInfo={},u.renderCurStatus=2,u[b(1376)]?u.player[b(1103)]():postMessage({function:b(1123)}),s()},function(){e()})})}},{key:oe(1446),value:function(){var u=oe;this.initTimer=!1,this[u(1133)]=0,this.baseTimeStamp=0,this.resetTimer=!0,this[u(704)]!=null&&this[u(704)].timerReset(),this[u(1141)]=this[u(1141)][u(979)](this),this[u(1335)]=2,this[u(1418)]=0,this[u(879)]=null,this[u(1266)]=!1,this[u(1302)]=!1,this[u(595)]=!1,this.getCropImageBMP=!1,this.curFrameIsDisplay=!0,this[u(1424)]=null,this.displayFrameInfo[u(387)](0,this[u(1254)].length),this.curFrameInfo={}}},{key:oe(722),value:function(){var u=oe,s=this;this[u(1215)][u(437)]()[u(705)](function(){var e=u;(s[e(1215)]=null)!=s[e(774)]&&(s[e(774)][e(785)](),s.oVideoRender=null),s[e(1446)](),s[e(704)]=null,console.log(e(461)),s[e(1295)]=!1},function(){var e=u;console[e(1590)](e(1140))})}},{key:oe(1141),value:function(){var u=oe,s,e,r,b=this;switch(this[u(1335)]){case 0:this._resetRenderTimer(),this._resetDecoder()[u(705)](function(){setTimeout(function(){var A=I;b[A(1141)]()},1)},function(){});break;case 2:this.displayRunning?(this[u(879)]=this[u(1272)](),this[u(1498)]==-1||this[u(1326)]==0?(this.chosenFrame!=null&&(this.curTimeStamp=this[u(879)][u(559)],this[u(963)](this[u(879)])),requestAnimationFrame(this[u(1141)])):this[u(879)]!=null?(this[u(1364)]&&!this.resetTimer||(this[u(704)][u(577)](),this[u(1364)]=!0,this.resetTimer=!1,this[u(1133)]=this[u(879)].timestamp,this[u(1334)]=this[u(879)].timestamp),this[u(1418)]=this.chosenFrame[u(559)],s=this[u(1418)]-this[u(1133)],r=this.curTimeStamp-this[u(1334)],(5e3<s||s<0||r<0)&&(this[u(704)][u(577)](),this.preTimeStamp=this[u(879)][u(559)],this[u(1334)]=this[u(1418)]),(s=(this.curTimeStamp-this.baseTimeStamp)/this.playSpeed-this[u(704)][u(536)]())<15&&-15<s?(this[u(963)](this.chosenFrame),this[u(1133)]=this[u(1418)],this[u(1141)]()):s<0?(setTimeout(this[u(963)](this[u(879)]),1),this.preTimeStamp=this[u(1418)],this.RenderFrame()):e=setTimeout(function(){var A=u;b.renderCurStatus==2?(b[A(963)](b.chosenFrame),b.preTimeStamp=b[A(1418)]):b[A(703)]=!1,b[A(1141)](),clearTimeout(e)},s-5)):(r=5,2<this.playSpeed&&(r=1),setTimeout(function(){var A=u;b[A(1141)]()},r))):setTimeout(function(){var A=u;b[A(1141)]()},5);break;case 3:setTimeout(function(){var A=u;b[A(643)](),b[A(1141)]()},5);break;case 5:this.needForward&&(this[u(879)]=this.chooseFrame(),this[u(879)]!=null&&setTimeout(function(){var A=u;b[A(963)](b[A(879)]),b[A(949)]=!1},1)),setTimeout(function(){var A=u;b[A(643)](),b.RenderFrame()},5);break;case 4:return void this[u(722)]();default:return}}},{key:"paint",value:function(u){var s=oe,e,r,b=this;this[s(1447)]!=4&&u!=null&&(this[s(1048)]===u[s(559)]&&(this.resetTimer=!0),this[s(774)]!=null&&(this[s(774)][s(700)](u),this[s(1424)]!==null&&this[s(648)](u.timestamp),(this[s(1266)]||this[s(1302)]||this[s(595)]||this[s(980)])&&(this[s(1501)]===u[s(1501)]&&this[s(526)]==u[s(526)]||(this.displayWidth=u[s(1501)],this[s(526)]=u[s(526)],this[s(1246)]=this[s(1501)]*this[s(526)]*3/2),e=new Uint8Array(this[s(1246)]),r=u[s(959)],u[s(685)](e).then(function(){var A=s;b[A(454)](e,r)})),this[s(942)]&&(this[s(1376)]!=null?this.player[s(409)]!=null&&this[s(1376)][s(409)]():postMessage({function:"firstFrameCB",value:!0}),this.firstFrame=!1)))}},{key:oe(648),value:function(u){var s=oe;if(this[s(1254)][s(525)]!=0&&this[s(1030)][s(432)]!==u){for(var e={},r=0;r<this.displayFrameInfo.length&&(e=this[s(1254)].shift()).timeStamp!=u;r++);this[s(1030)][s(798)]=e.port,this[s(1030)].codecType=e.codecType,this.curFrameInfo[s(952)]=e[s(952)],this[s(1030)][s(1119)]=e[s(1119)],this[s(1030)][s(1454)]=e[s(1454)],this[s(1030)][s(1384)]=e[s(1384)],this.curFrameInfo[s(432)]=e[s(432)],this.curFrameInfo.frameRate=e.frameRate,this.curFrameInfo[s(666)]=e[s(666)],this.curFrameInfo[s(389)]=e[s(389)],this.curFrameInfo[s(1070)]=e[s(1070)],this[s(1030)][s(1444)]=e[s(1444)],this[s(1030)][s(1552)]=e[s(1552)],this[s(1030)][s(633)]=e[s(633)],this[s(1030)][s(1429)]=e[s(1429)],this[s(1030)][s(628)]=e[s(628)],this[s(1030)][s(500)]=e[s(500)],this[s(1030)][s(727)]=e[s(727)],this.curFrameInfo[s(394)]=e[s(394)],this[s(1030)][s(1380)]=e.hour,this.curFrameInfo.minute=e[s(1088)],this[s(1030)].second=e[s(939)],this[s(1030)][s(1221)]=e[s(1221)],this.displayFrameInfoCB(this.curFrameInfo)}}},{key:oe(454),value:function(u,s){var e=oe;this[e(1376)]?(this[e(1266)]&&(this.getImageJPEG=!1,this[e(1376)][e(625)](u,this[e(1246)],this[e(1501)],this[e(526)],"jpeg",s,0,0,0,0)),this[e(1302)]&&(this[e(1302)]=!1,this[e(1376)]._GetImage2(u,this[e(1246)],this[e(1501)],this[e(526)],e(1292),s,0,0,0,0)),this[e(595)]&&(this[e(595)]=!1,this[e(1376)][e(625)](u,this[e(1246)],this[e(1501)],this[e(526)],e(1239),s,this.sx,this.sy,this.sw,this.sh)),this[e(980)]&&(this[e(980)]=!1,this[e(1376)]._GetImage2(u,this[e(1246)],this.displayWidth,this[e(526)],"bmp",s,this.sx,this.sy,this.sw,this.sh))):(this.getImageJPEG&&(this[e(1266)]=!1,postMessage({function:e(934),value:u[e(1074)],size:this[e(1246)],width:this[e(1501)],height:this.displayHeight,type:"jpeg",yuvType:s,sx:0,sy:0,sw:0,sh:0},[u[e(1074)]])),this[e(1302)]&&(this[e(1302)]=!1,postMessage({function:e(934),value:u[e(1074)],size:this.yuvLength,width:this[e(1501)],height:this[e(526)],type:e(1292),yuvType:s,sx:0,sy:0,sw:0,sh:0},[u.buffer])),this.getCropImageJPEG&&(this[e(595)]=!1,postMessage({function:e(934),value:u[e(1074)],size:this[e(1246)],width:this.displayWidth,height:this[e(526)],type:e(1239),yuvType:s,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[u.buffer])),this[e(980)]&&(this[e(980)]=!1,postMessage({function:e(934),value:u[e(1074)],size:this[e(1246)],width:this.displayWidth,height:this.displayHeight,type:"bmp",yuvType:s,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[u[e(1074)]])))}},{key:oe(1272),value:function(){var u=oe,s=this;if(this[u(1326)]==1){if(this[u(1569)][u(525)]<2)return null}else if(this.frameBuffers[u(525)]<1)return null;if(!this[u(703)])return this[u(703)]=!0,this[u(1569)][0];{if(this.chosenFrame!=null&&(this.frameBuffers[u(1158)]()[u(327)](),this[u(879)][u(327)](),this.chosenFrame=null),!this[u(1215)].decoderObjNeedReset)return this[u(1569)][u(525)]<1?null:this[u(1569)][0];this.oVideoDecoder.resetDecoder().then(function(){var e=u;return s.oVideoDecoder[e(503)]=!1,null},function(){return null})}}},{key:oe(1053),value:function(u,s,e,r){var b=oe;return this[b(774)]==null?0:(this.sx=u,this.sy=s,this.sw=e,this.sh=r,this.oVideoRender[b(399)](u,s,e,r))}},{key:"SetCurStatus",value:function(u){this.renderCurStatus=u}},{key:"fast",value:function(){var u=oe,s=this[u(862)](this[u(555)]);return this._SetPlaySpeed(s)}},{key:oe(1207),value:function(){var u=oe,s=this[u(1395)](this[u(555)]);return this._SetPlaySpeed(s)}},{key:oe(1080),value:function(u){var s=oe;if(u)this[s(1315)](3);else{if(this[s(1335)]!==3)return-1;this[s(1315)](2),this[s(1516)]=!0}return 1}},{key:oe(643),value:function(){var u=oe;this[u(1569)][u(525)]!=0&&this[u(963)](this[u(1569)][0])}},{key:oe(869),value:function(u){var s=oe;if(u)this[s(1315)](5),this.needForward=!0;else{if(this[s(1335)]!==5)return-1;this[s(1315)](2),this.resetTimer=!0,this[s(949)]=!1,this[s(716)](1)}return 1}},{key:oe(343),value:function(u,s){var e=oe;return this[e(774)]!=null&&this[e(774)][e(343)](u,s)}},{key:"GetCanvasSize",value:function(){var u=oe;return this.oVideoRender!=null&&this[u(774)][u(1370)]()}},{key:"GetPlayedTime",value:function(){var u=oe;return this[u(1418)]}},{key:oe(716),value:function(u){var s=oe;switch(u){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return u!==this[s(555)]&&(this[s(555)]=u,this[s(1147)]=0<u?u:-1/u,console[s(1590)](s(1005)+this[s(1147)]),this.resetTimer=!0,this.needForward=!1,this[s(1335)]!=2&&this[s(1315)](2)),1}},{key:"_GetFastSpeed",value:function(u){var s=0;switch(u){case-16:s=-8;break;case-8:s=-4;break;case-4:s=-2;break;case-2:s=1;break;case 1:s=2;break;case 2:s=4;break;case 4:s=8;break;case 8:s=16;break;case 16:s=32;break;case 32:s=64;break;default:s=0}return s}},{key:oe(1395),value:function(u){var s=0;switch(u){case-8:s=-16;break;case-4:s=-8;break;case-2:s=-4;break;case 1:s=-2;break;case 2:s=1;break;case 4:s=2;break;case 8:s=4;break;case 16:s=8;break;case 32:s=16;break;case 64:s=32;break;default:s=0}return s}},{key:"SetDisplayBuf",value:function(u){var s=oe;return this[s(1498)]=u,1}},{key:oe(784),value:function(){var u=oe;return this[u(1266)]=!0,this[u(325)]=u(1239),1}},{key:"GetBMP",value:function(){var u=oe;return this[u(1302)]=!0,this[u(325)]=u(1292),1}},{key:oe(1125),value:function(){var u=oe;return this[u(595)]=!0,this[u(325)]=u(1060),1}},{key:oe(1417),value:function(){var u=oe;return this.getCropImageBMP=!0,this.getImageType=u(981),1}},{key:"SetDecodeFrameType",value:function(u){var s=oe;return this[s(1048)]=u,1}},{key:"SetStreamEnd",value:function(){var u=oe;return this.oVideoDecoder[u(1110)](),1}},{key:oe(558),value:function(u){var s=oe;return this[s(774)]!=null?this[s(774)][s(558)](u):0}},{key:oe(1203),value:function(u,s){var e=oe;return this[e(1424)]=s?u:null,1}},{key:oe(814),value:function(u){var s=oe;return this.renderEngine==="2d"||this[s(1264)]==="2D"?(console[s(1590)](s(1342),s(657)),0):this[s(774)]!=null?this[s(774)].FEC_SetCanvasID(u):0}},{key:oe(1206),value:function(u,s,e){var r=oe;return this[r(1264)]==="2d"||this[r(1264)]==="2D"?(console.log(r(1342),r(657)),0):this[r(774)]!=null?this.oVideoRender[r(1206)](u,s,e):0}},{key:"FEC_GetPort",value:function(u,s){var e=oe;return this[e(1264)]==="2d"||this[e(1264)]==="2D"?(console.log(e(1342),"color:red"),0):this.oVideoRender!=null?this[e(774)][e(1012)](u,s):0}},{key:oe(1015),value:function(u){var s=oe;return this[s(1264)]==="2d"||this[s(1264)]==="2D"?(console[s(1590)]("%c 2D render not support FEC correct",s(657)),0):this[s(774)]!=null?this[s(774)][s(1015)](u):0}},{key:oe(671),value:function(u,s){var e=oe;return this[e(1264)]==="2d"||this[e(1264)]==="2D"?(console[e(1590)](e(1342),e(657)),0):this[e(774)]!=null?this[e(774)][e(671)](u,s):0}},{key:oe(992),value:function(u,s,e){var r=oe;return this[r(1264)]==="2d"||this[r(1264)]==="2D"?(console.log(r(1342),r(657)),0):this.oVideoRender!=null?this[r(774)][r(992)](u,s,e):0}},{key:"FEC_GetViewParam",value:function(u,s){var e=oe;return this[e(1264)]==="2d"||this.renderEngine==="2D"?(console[e(1590)](e(1342),e(657)),0):this[e(774)]!=null?this[e(774)][e(1578)](u,s):0}},{key:oe(1145),value:function(u,s){var e=oe;return this[e(1264)]==="2d"||this[e(1264)]==="2D"?(console.log(e(1342),e(657)),0):this[e(774)]!=null?this[e(774)].FEC_SetWnd(u,s):0}},{key:oe(1582),value:function(u,s,e){var r=oe;return this[r(1264)]==="2d"||this[r(1264)]==="2D"?(console.log(r(1342),r(657)),0):this.oVideoRender!=null?this[r(774)][r(1582)](u,s,e):0}},{key:oe(832),value:function(u){var s=oe;return this[s(1264)]==="2d"||this[s(1264)]==="2D"?(console[s(1590)](s(1342),s(657)),0):this.oVideoRender!=null?this[s(774)][s(832)](u):0}},{key:oe(1345),value:function(u,s,e,r,b,A,Ce){var Ae=oe;return this[Ae(1264)]==="2d"||this[Ae(1264)]==="2D"?(console[Ae(1590)](Ae(1342),Ae(657)),0):this[Ae(774)]!=null?this[Ae(774)][Ae(1345)](u,s,e,r,b,A,Ce):0}},{key:oe(1020),value:function(u,s){var e=oe;return this[e(1264)]==="2d"||this.renderEngine==="2D"?(console[e(1590)]("%c 2D render not support FEC correct",e(657)),0):this.oVideoRender!=null?this[e(774)].FEC_SetBackCilling(u,s):0}}]),si}(),Ta=function(){var oe=R;function si(Ge){var u=I;ge(this,si),this[u(1376)]=Ge,this[u(1565)]=new ca(Ge)}return ke(si,[{key:oe(520),value:function(u,s,e,r){var b=oe;if(this[b(1565)]===null)return 0;this[b(1565)][b(520)](u,s,e,r)}},{key:oe(1545),value:function(u,s){var e=oe;this.oVideoPlayCtrl[e(1545)](u,s)}},{key:"SetDisplayRegion",value:function(u,s,e,r){var b=oe;if(this[b(1565)]===null)return 0;this.oVideoPlayCtrl[b(1053)](u,s,e,r)}},{key:oe(1476),value:function(){var u=oe,s=this;if(this[u(1565)]===null)return 0;this[u(1565)][u(1315)](4);var e=setInterval(function(){var r=u;s[r(1565)].displayRunning||(s[r(1565)]=null,clearInterval(e),e=null,console[r(1590)](">>>JS 03 destroy oVideoPlayCtrl"))},2)}},{key:"fast",value:function(){var u=oe;return this[u(1565)]===null||this[u(1565)][u(1589)]()!==1?0:void 0}},{key:oe(1207),value:function(){var u=oe;return this.oVideoPlayCtrl===null||this.oVideoPlayCtrl[u(1207)]()!==1?0:void 0}},{key:oe(1047),value:function(u){var s=oe;return this[s(1565)]===null||this.oVideoPlayCtrl.SetDisplayBuf(u)!==1?0:void 0}},{key:"Pause",value:function(u){var s=oe;return this.oVideoPlayCtrl===null||this[s(1565)][s(1080)](u)!==1?0:void 0}},{key:oe(869),value:function(u){var s=oe;return this.oVideoPlayCtrl===null||this.oVideoPlayCtrl[s(869)](u)!==1?0:void 0}},{key:oe(343),value:function(u,s){var e=oe;return this[e(1565)]===null||this.oVideoPlayCtrl[e(343)](u,s)!==1?0:void 0}},{key:"GetCanvasSize",value:function(){var u=oe;return this[u(1565)]===null||this[u(1565)].GetCanvasSize()!==1?0:void 0}},{key:oe(768),value:function(){var u=oe;return this.oVideoPlayCtrl===null?0:this.oVideoPlayCtrl[u(768)]()}},{key:oe(1388),value:function(){var u=oe;this[u(1565)][u(1315)](0)}},{key:oe(784),value:function(){var u=oe;this[u(1565)][u(784)]()}},{key:oe(1351),value:function(){var u=oe;this.oVideoPlayCtrl[u(1351)]()}},{key:"GetCropJPEG",value:function(){var u=oe;this[u(1565)].GetCropJPEG()}},{key:"GetCropBMP",value:function(){var u=oe;this[u(1565)][u(1417)]()}},{key:oe(1564),value:function(u){var s=oe;this[s(1565)][s(1564)](u)}},{key:oe(1070),value:function(){this.oVideoPlayCtrl.SetStreamEnd()}},{key:oe(558),value:function(u){var s=oe;return this[s(1565)][s(558)](u)}},{key:oe(1203),value:function(u,s){var e=oe;return this[e(1565)][e(1203)](u,s)}},{key:oe(814),value:function(u){var s=oe;return this[s(1565)][s(814)](u)}},{key:"FEC_ResetCorrectType",value:function(u,s,e){var r=oe;return this[r(1565)][r(1206)](u,s,e)}},{key:oe(1012),value:function(u,s){var e=oe;return this[e(1565)][e(1012)](u,s)}},{key:oe(1015),value:function(u){var s=oe;return this[s(1565)][s(1015)](u)}},{key:oe(671),value:function(u,s){var e=oe;return this.oVideoPlayCtrl[e(671)](u,s)}},{key:oe(992),value:function(u,s,e){var r=oe;return this[r(1565)].FEC_SetViewParam(u,s,e)}},{key:"FEC_GetViewParam",value:function(u,s){var e=oe;return this[e(1565)][e(1578)](u,s)}},{key:oe(1145),value:function(u,s){var e=oe;return this[e(1565)][e(1145)](u,s)}},{key:oe(1582),value:function(u,s,e){var r=oe;return this[r(1565)].FEC_Disable(u,s,e)}},{key:oe(832),value:function(u){var s=oe;return this.oVideoPlayCtrl[s(832)](u)}},{key:"FEC_SetDisplayRegion",value:function(u,s,e,r,b,A,Ce){var Ae=oe;return this[Ae(1565)][Ae(1345)](u,s,e,r,b,A,Ce)}},{key:oe(1020),value:function(u,s){return this.oVideoPlayCtrl.FEC_SetBackCilling(u,s)}}]),si}(),ir=new Array(8)[R(329)](0)[R(458)](function(oe){return new Array(128)}),Tt=null,Gr={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0},Ar=(window[R(1232)]=function(oe,si,Ge,u){ir[u][oe].JSPlayM4_InputRawData(oe,si,Ge)},function(){var oe=R;function si(s,e){var r=I,b=this,A=2<arguments[r(525)]&&arguments[2]!==void 0?arguments[2]:0,Ce=3<arguments.length&&arguments[3]!==void 0?arguments[3]:r(1258),Ae=4<arguments[r(525)]&&arguments[4]!==void 0?arguments[4]:0,zt=5<arguments[r(525)]&&arguments[5]!==void 0?arguments[5]:-1,z=(ge(this,si),this.szBasePath=s,(this[r(816)]=this)[r(798)]=-1,this[r(549)]=Ae,this[r(1591)]=A,this[r(1264)]=Ce,this[r(1058)]=null,this.decodeWorker=null,this.offscreen=null,this[r(1159)]="",this[r(1201)]=null,this[r(1081)]=1,this.hevcDecodeEngine=1,this[r(1106)]=1,this[r(868)]=null,this[r(490)]=204800,this.canvasIDData=null,this[r(1156)]=!1,this[r(1326)]=0,this[r(1454)]=0,this[r(1384)]=0,this.rawDataFrameInfoBuffer=null,this[r(1226)]={},this[r(1254)]={},this[r(512)]=0,this.decodeFrameType=0,this[r(537)]=!1,this[r(1498)]=0,this[r(1561)]=!0,this[r(714)]=0,this[r(1463)]=0,this[r(1147)]=1,this[r(569)]=!1,this[r(531)]=!1,this[r(892)]=0,this[r(829)]=0,this[r(501)]=0,this[r(846)]=0,this[r(1429)]=0,this.cropLeft=0,this[r(1552)]=0,this[r(633)]=0,this[r(363)]=960,this[r(1421)]=480,this.NoHIKHead=1,this[r(481)]=0,this.setHasThread=zt,this[r(997)]=0,this.aTotalBuffer=[],this[r(1255)]=0,this[r(1467)]=!0,this.downloadFlag=!1,this[r(664)]=!0,this[r(1260)]=[],this.iAudioANRFrameNum=0,this.bWriteAudioBefDecData=!0,this[r(1462)]=[],this[r(1180)]=0,this[r(928)]=!0,this.audioAfDecOUTBuffer=[],this[r(1440)]=0,this[r(1559)]=!0,this[r(1530)]=[],this.iAudioBeRenOUTFrameNum=0,this[r(664)]=!0,this[r(1131)]=[],this[r(383)]=0,this[r(990)]=null,this[r(947)]=0,this[r(463)]=null,this[r(1107)]=null,this[r(589)]=!1,this[r(372)]=null,this[r(1542)]=0,this[r(1040)]=null,this[r(488)]=null,this[r(1146)]=!1,this[r(459)]=[],this[r(1554)]=2097152,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this[r(621)]=0,this[r(397)]=1,this[r(435)]=1,this[r(1068)]=null,this[r(357)]=0,this[r(1451)]=0,this[r(575)]=1,this[r(1469)]=1,this[r(874)]={top:0,left:0,right:0,bottom:0},this.currentFishSubPort=-1,this[r(1176)]=[],this[r(398)]=null,this[r(409)]=null,this[r(367)]=null,this[r(1327)]=null,this.decCallBackFun=null,this[r(476)]=null,this[r(448)]=null,this.fn=e,this[r(965)]=!!window[r(741)],this[r(1179)]=Gr,this[r(710)]());z==-1?(console[r(786)]("%c1>your browser does not support hard Decoder,please install chrome",r(692)),this[r(1106)]=0,this[r(1041)]=0,this[r(1179)][r(1092)]=!1,this[r(1179)][r(1e3)]=!1,this[r(965)]?this[r(1179)][r(547)]=!0:this.callBackParameter[r(547)]=!1):z<94?(console[r(786)](r(958),r(692),z),this[r(1106)]=0,this[r(1041)]=0,this[r(1179)][r(1092)]=!1,this[r(1179)][r(1e3)]=!1,this[r(965)]?this.callBackParameter[r(547)]=!0:this[r(1179)][r(547)]=!1):(z<107&&(console.info(r(1001),r(692),z),this[r(1041)]=0),this[r(1179)].bSupHardDecAVC=!0,this[r(1179)][r(1e3)]=!1,this[r(1179)][r(547)]=!0),console.log(r(485)+new Date()[r(721)]()+":"+new Date()[r(579)]()+"."+new Date().getMilliseconds(),r(1063)),Tt==null&&this.callBackParameter.bSupHardOrSoft?(s=this[r(984)],(Ae=document[r(1546)](r(1237)))[r(1378)]=r(953),Ae[r(510)]=s,console[r(786)](r(1410),"color: green",s),Ae[r(1173)]=function(){var H=r;window.JSPlayerModule()[H(705)](function(K){var le=H;Tt=K,b._decoderLoaded=!0,console.log(le(843)+new Date()[le(721)]()+":"+new Date()[le(579)]()+"."+new Date().getMilliseconds(),"color: blue"),94<=z?VideoDecoder[le(699)]({codec:le(848),hardwareAcceleration:le(356)}).then(function(Xe){var vt=le;Xe.supported?(b[vt(1179)].bSupHardDecHEVC=!0,console[vt(786)](vt(977),"color: green")):(console[vt(1414)]("%c1>your PC does not support 265 hard Decoder, if you want to hard decode 265 ,try to update the GPU driver","color: red"),b[vt(1041)]=0),b.fn(b.callBackParameter)})[le(1301)](function(){var Xe=le;b.fn(b[Xe(1179)]),console[Xe(1590)]("%c hevc supported error",Xe(692))}):b.fn(b[le(1179)])})},document[r(1051)].appendChild(Ae)):new Promise(function(H,K){H()})[r(705)](function(){var H=r;b.fn(b[H(1179)])})}function Ge(s,e){return u.apply(this,arguments)}var u;return ke(si,[{key:oe(712),value:(u=function(e,r){var b=oe;if(window[b(845)]){if(r[b(877)]==null){if(r.decodeWorker=new lt,r[b(877)]==null)return 0;console[b(1590)](b(708))}r[b(1201)]=document[b(380)](e),r[b(820)]=r[b(1201)][b(957)](),r[b(877)].postMessage({command:b(520),streamOpenMode:r[b(1326)],canvas:r[b(820)],sab:r[b(965)],renderEngine:r[b(1264)]},[r[b(820)]]),r[b(1498)]!=0&&r[b(877)][b(1086)]({command:b(1047),value:r[b(1498)]}),r[b(877)][b(1066)]=function(A){var Ce=b,Ae=A[Ce(864)];switch(Ae[Ce(1536)]){case Ce(1235):startWorker(r[Ce(1159)],r);break;case Ce(663):var z=new Uint8Array(Ae.data);r[Ce(1367)](z);break;case"GetRawData":r[Ce(850)]();break;case Ce(1309):console[Ce(1590)](Ce(507));break;case Ce(768):z=Ae[Ce(591)],r[Ce(476)]&&r[Ce(476)](z-r[Ce(512)]);break;case Ce(1123):r[Ce(1103)]();break;case Ce(1555):var z=Ae.value,zt=Ae[Ce(1378)];r[Ce(787)](z,zt);break;case"imageYUV":var z=new Uint8Array(Ae.value),zt=Ae[Ce(1242)],z=new Uint8Array(z),H=Ae.type,K=Ae[Ce(1454)],le=Ae[Ce(1384)],Xe=Ae[Ce(840)],vt=Ae.sx,bt=Ae.sy,Ht=Ae.sw,gi=Ae.sh;r[Ce(625)](z,zt,K,le,H,Xe,vt,bt,Ht,gi),Ae[Ce(591)]=null;break;case Ce(1476):r.decodeWorker=null,console.log("HardWorker is null");break;case Ce(1350):r[Ce(409)]!=null&&r[Ce(409)]();break;case Ce(1203):r[Ce(1254)][Ce(798)]=Ae.curFrameInfo.port,r[Ce(1254)][Ce(714)]=Ae.curFrameInfo[Ce(714)],r[Ce(1254)].frameType=Ae[Ce(1030)].frameType,r[Ce(1254)].frameSize=Ae[Ce(1030)].frameSize,r[Ce(1254)][Ce(1454)]=Ae[Ce(1030)].width,r.displayFrameInfo.height=Ae[Ce(1030)][Ce(1384)],r[Ce(1254)][Ce(432)]=Ae[Ce(1030)][Ce(432)],r[Ce(1254)][Ce(964)]=Ae.curFrameInfo[Ce(964)],r[Ce(1254)][Ce(666)]=Ae[Ce(1030)][Ce(666)],r.displayFrameInfo.interlace=Ae[Ce(1030)].interlace,r[Ce(1254)].streamEnd=Ae[Ce(1030)][Ce(1070)],r[Ce(1254)][Ce(1444)]=Ae.curFrameInfo[Ce(1444)],r.displayFrameInfo[Ce(1552)]=Ae[Ce(1030)][Ce(1552)],r[Ce(1254)].cropTop=Ae[Ce(1030)].cropTop,r[Ce(1254)][Ce(1429)]=Ae[Ce(1030)][Ce(1429)],r[Ce(1254)][Ce(628)]=Ae.curFrameInfo.year,r[Ce(1254)].month=Ae.curFrameInfo[Ce(500)],r[Ce(1254)][Ce(727)]=Ae[Ce(1030)][Ce(727)],r.displayFrameInfo[Ce(394)]=Ae[Ce(1030)][Ce(394)],r[Ce(1254)][Ce(1380)]=Ae.curFrameInfo[Ce(1380)],r[Ce(1254)][Ce(1088)]=Ae.curFrameInfo.minute,r[Ce(1254)][Ce(939)]=Ae[Ce(1030)][Ce(939)],r.displayFrameInfo.milliseconds=Ae[Ce(1030)][Ce(1221)];break;case"FECGetViewParam":z=Ae[Ce(1303)],r.FECViewParamCB!=null&&r[Ce(398)](z)}},r[b(877)][b(1153)]("error",function(A){var Ce=b;console[Ce(1235)](A)})}},Ge[oe(1503)]=function(){var s=oe;return u[s(1503)]()},Ge)},{key:oe(1137),value:function(){return 0}},{key:oe(804),value:function(){var e=oe;return this[e(531)]&&console.log(e(315)),Tt===null?0:(this[e(798)]=Tt[e(670)](),ir[this[e(1591)]][this[e(798)]]=this[e(816)],this[e(531)]&&console[e(1590)](">>>>>yff>>> JSPlayM4_GetPort 2"),this[e(549)]==0&&(this[e(1058)]=new Ta(this)),1)}},{key:oe(1508),value:function(e){var r=oe;return this[r(531)]&&console[r(1590)](r(907)+e),Tt===null?0:(this[r(1326)]=e,this[r(531)]&&console[r(1590)](">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+e),Tt._JSPlayM4_SetStreamOpenMode(this[r(798)],e))}},{key:oe(1399),value:function(e,r,b){var A=oe;if(this[A(531)]&&console[A(1590)](">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+e),Tt===null)return 0;var Ce=Tt._malloc(r);if(Ce===null)return console.log(A(1072)),0;this[A(531)]&&console[A(1590)](A(746)+e);var Ae=new Uint8Array(e[A(1074)]);if(e[0]==73&&e[1]==77&&e[2]==75&&e[3]==72&&(this[A(362)]=0),e[10]==5&&e[11]==0){if(this[A(714)]=5,!this.callBackParameter[A(1e3)]&&!this[A(965)])return 16;this.printfFlag&&console[A(1590)](">>>>>yff>>>>> JSPlayM4_OpenStream 3:"+e)}else e[10]==1&&e[11]==0?(this[A(714)]=1,this[A(531)]&&console.log(A(1382)+e)):e[10]==0&&e[11]==1?(this.codecType=256,this.printfFlag&&console[A(1590)](A(480)+e)):this[A(714)]=0;return Tt[A(1523)](Ae,Ce),e=Tt[A(717)](this[A(798)],Ce,r,b),Ce!==null&&Tt[A(573)](Ce),e}},{key:oe(682),value:function(e){var r=oe;return this[r(531)]&&console.log(r(1127)+e),e!=0&&e!=1?(console[r(1590)](r(1387)+e),0):(this[r(1081)]=e,1)}},{key:oe(1533),value:function(){var e=oe;return this[e(1054)]=!0,1}},{key:oe(987),value:function(e,r,b){var A=oe;if(this[A(1588)]=b,this.rawDataFrameInfo[A(798)]=e,this[A(1226)][A(714)]=Tt.HEAP32[this[A(1588)]+4>>2],this[A(1226)][A(952)]=Tt[A(1039)][this.rawDataFrameInfoBuffer+12>>2],this[A(1226)][A(1119)]=Tt[A(1039)][this[A(1588)]+16>>2],this.rawDataFrameInfo[A(1454)]=Tt[A(1039)][this.rawDataFrameInfoBuffer+20>>2],this[A(1226)][A(1384)]=Tt[A(1039)][this[A(1588)]+24>>2],this[A(1226)].timeStamp=Tt.HEAP32[this[A(1588)]+28>>2],this.rawDataFrameInfo[A(964)]=Tt.HEAP32[this[A(1588)]+32>>2],this[A(1226)].frameNum=Tt[A(1039)][this[A(1588)]+36>>2],this[A(1226)][A(1392)]=Tt[A(1039)][this[A(1588)]+40>>2],this.rawDataFrameInfo[A(389)]=Tt[A(1039)][this[A(1588)]+44>>2],this[A(1226)][A(1070)]=Tt[A(1039)][this[A(1588)]+48>>2],this[A(1226)][A(1444)]=Tt[A(1039)][this[A(1588)]+52>>2],this[A(1226)][A(1552)]=Tt[A(1039)][this[A(1588)]+56>>2],this[A(1226)][A(633)]=Tt[A(1039)][this[A(1588)]+60>>2],this[A(1226)][A(1429)]=Tt[A(1039)][this.rawDataFrameInfoBuffer+64>>2],this[A(1226)].year=Tt[A(1006)][this[A(1588)]+68>>1],this.rawDataFrameInfo.month=Tt.HEAP16[this[A(1588)]+70>>1],this[A(1226)][A(727)]=Tt.HEAP16[this[A(1588)]+72>>1],this[A(1226)].day=Tt[A(1006)][this[A(1588)]+74>>1],this.rawDataFrameInfo[A(1380)]=Tt[A(1006)][this[A(1588)]+76>>1],this[A(1226)][A(1088)]=Tt[A(1006)][this[A(1588)]+78>>1],this[A(1226)][A(939)]=Tt[A(1006)][this[A(1588)]+80>>1],this.rawDataFrameInfo[A(1221)]=Tt[A(1006)][this[A(1588)]+82>>1],this[A(1226)].needSetPreSoft=!1,(this.rawDataFrameInfo[A(964)]<1||this.rawDataFrameInfo[A(389)]==1)&&(this.rawDataFrameInfo[A(1222)]=!0),this[A(1454)]!=0&&this[A(1384)]!=0||(this.width=this[A(1226)].width,this.height=this[A(1226)][A(1384)],this[A(512)]=this[A(1226)][A(432)],this[A(1561)]=!1),this[A(1226)][A(1444)]==0&&this[A(1226)].cropRight==0&&this[A(1226)].cropTop==0&&this[A(1226)].cropBottom==0||(this[A(1429)]=this[A(1226)][A(1429)],this[A(1444)]=this[A(1226)].cropLeft,this[A(1552)]=this[A(1226)][A(1552)],this[A(633)]=this[A(1226)][A(633)]),this[A(469)]==1){if(this[A(1226)][A(1392)]!==1)return 1;this[A(569)]&&(this.hasWebWorker?this[A(877)][A(1086)]({command:A(1564),timestamp:this.rawDataFrameInfo[A(432)]}):this[A(1058)][A(1564)](this[A(1226)][A(432)]),this[A(569)]=!1)}if(this[A(469)]==0&&this.switchDecodeFrame==1){if(this[A(1226)][A(1392)]!==1)return 1;this[A(537)]=!1}if(this[A(1054)]&&this.downloadRTPData(r),this[A(549)]){if(this[A(877)]===null)return r=null,0;this[A(877)].postMessage({command:"inputData",rawData:r[A(1074)],rawDataFrameInfo:this.rawDataFrameInfo},[r[A(1074)]])}else this[A(1058)][A(1545)](r,this[A(1226)])}},{key:oe(850),value:function(){Tt._JSPlayM4_GetRawData(this.port)}},{key:oe(1103),value:function(){var e=oe;return Tt[e(920)](this[e(798)])}},{key:oe(1574),value:function(e,r,b){var A=oe;return console.log(A(961)),this.hasWebWorker?ir[b][e].decodeWorker!=null&&ir[b][e].decodeWorker[A(1086)]({command:"needReset"}):this[A(1058)][A(1388)](),1}},{key:oe(1329),value:function(e){var r=oe;return Tt===null?0:Tt[r(880)](this.port,e)}},{key:oe(772),value:function(){var e=oe,r=0<arguments[e(525)]&&arguments[0]!==void 0?arguments[0]:null;if(this[e(531)]&&console.log(">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this.canvasID+",this.sab:"+this.sab),Tt===null)return 0;if(this[e(531)]&&console.log(e(870)+decodeEngine),this[e(1041)]===0&&this[e(714)]===5?(this[e(1081)]=0,console[e(786)](e(639),"color: green")):this[e(1106)]!==0||this[e(714)]!==256&&this[e(714)]!==1||(this[e(1081)]=0,console[e(786)](e(1311),e(1464))),!this.sab&&this[e(1081)]===0)return console[e(786)](e(1126),"color: red"),0;if(this[e(1190)]!=-1&&(this[e(997)]=this.setHasThread),Tt[e(426)](this[e(798)],this.decodeEngine,this[e(997)]),console.log(e(1170),e(1464),this.decodeEngine,this[e(714)]),r!=null&&(this[e(1159)]=r,this[e(363)]=document.getElementById(this[e(1159)])[e(1454)],this[e(1421)]=document[e(380)](this.canvasID).height),this[e(1159)]!=null&&(r=document[e(380)](this[e(1159)]))&&(this[e(360)]=r[e(1402)](!0),this.clonedCanvasParentNode=r[e(467)],this[e(471)][e(777)](this.clonedCanvas,r)),this.printfFlag&&console.log(e(904)+this[e(1159)]+",this.sab:"+this[e(965)]+",this.decodeEngine:"+this[e(1081)]),r=1,this[e(1081)]===1){this.hasWebWorker?this.startWorker(this.canvasID,this):(this[e(1201)]=document[e(380)](this[e(1159)]),this[e(1058)][e(520)](this[e(1201)],this[e(1326)],this[e(965)],this[e(1264)]),this[e(1498)]!=0&&this[e(1058)][e(1047)](this[e(1498)])),Tt[e(1553)](this[e(798)],this[e(1591)]);var b=Tt.addFunction(this[e(1574)],e(388));Tt[e(937)](this[e(798)],b,this[e(1591)]),(r=Tt[e(842)](this[e(798)],null))==1&&(this[e(1463)]=2)}else if(this[e(1081)]===0){if(this[e(1159)]!=""&&this[e(1159)]!=null){var b=this._stringToBytes("#"+this[e(1159)]),Ce=2*(this[e(1159)][e(525)]+1);if(this.canvasIDData=Tt._malloc(Ce),this[e(1433)]===null)return 0;var A=Tt[e(447)][e(350)](this.canvasIDData,this.canvasIDData+Ce),Ce=new Uint8Array(Ce);A[e(483)](Ce,0),A[e(483)](new Uint8Array(b)),A=null}(r=Tt[e(842)](this[e(798)],this.canvasIDData))==1&&(this[e(1463)]=2)}return this[e(459)].length!=0&&(this[e(1432)](new Uint8Array(this[e(459)]),this[e(459)][e(525)]),this[e(459)][e(387)](0,this[e(459)].length)),this[e(1519)](1),r}},{key:oe(1432),value:function(e,r){var b=oe;if(this.printfFlag&&console[b(1590)](">>>>>yff>>>>> JSPlayM4_InputData 1 res:"+z+",inputSize:"+r),Tt===null){var A=this[b(459)].length;if(A+r>this.iInputMaxBufSize)return console.log(b(938)),0;for(var Ce=0;Ce<r;Ce++)this[b(459)][A+Ce]=e[Ce];return 0}if(this[b(490)]<r&&(this[b(868)]!==null&&(Tt[b(573)](this.inputDataBuffer),this.inputDataBuffer=null),this.inputDataBufferSize=r),this.inputDataBuffer===null&&(this[b(868)]=Tt[b(1420)](this[b(490)])),this[b(868)]===null)return console[b(1590)](b(365)),0;this[b(481)]==1&&(this.JSPlayM4_SetCanvasSize(this[b(363)],this[b(1421)]),this[b(481)]=0),this.NoHIKHead&&(zt=(Ae=this.JSPlayM4_GetFrameInfo())[b(1454)],Ae=Ae[b(1384)],zt&&Ae&&(this.JSPlayM4_SetCanvasSize(this[b(363)],this[b(1421)]-1),this[b(362)]=0,this[b(481)]=1));var Ae,zt=new Uint8Array(e[b(1074)]),z=(Tt[b(1523)](zt,this[b(868)]),Tt._JSPlayM4_InputData(this[b(798)],this[b(868)],r));return this[b(531)]&&console[b(1590)](b(1243)+z+b(604)+r),z}},{key:oe(806),value:function(){var e=oe,r=!(0<arguments[e(525)]&&arguments[0]!==void 0)||arguments[0];if(Tt===null)return 0;if(this.hasWebWorker?this.decodeWorker!=null&&this.decodeWorker.postMessage({command:e(1476)}):this[e(1058)]!=null&&this.pcVideoManager[e(1476)](),this[e(1467)]&&0<this[e(1255)]&&(console.log(e(369)+this[e(1255)]+e(900)),b=new Uint8Array(this[e(601)]),this[e(1163)](b,e(930)),this[e(601)][e(387)](0,this[e(601)][e(525)]),this[e(1467)]=!1,this[e(1255)]=0,b=null),this[e(1463)]!=2&&this[e(1463)]!=5)return 1;var b=Tt[e(903)](this.port);if(b==1&&(this[e(1463)]=4),b==1&&r&&(r=document[e(380)](this[e(1159)]),r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r[e(467)],this[e(471)][e(777)](this[e(360)],r)),this[e(1176)][e(525)]!=0))for(var A=0;A<this.FECcanvasIDArray.length;A++){var Ce=document.getElementById(this[e(1176)][A]);Ce&&(this.clonedCanvas=Ce[e(1402)](!0),this[e(471)]=Ce.parentNode,this[e(471)].replaceChild(this[e(360)],Ce))}return b}},{key:"JSPlayM4_CloseStream",value:function(){var e=oe;return Tt===null?0:Tt._JSPlayM4_CloseStream(this[e(798)])}},{key:oe(1306),value:function(){var e=oe;return Tt===null?0:(this[e(868)]!==null&&(Tt[e(573)](this[e(868)]),this[e(868)]=null),this.canvasIDData!==null&&(Tt._free(this[e(1433)]),this[e(1433)]=null,this[e(1561)]=!0),this[e(1068)]!=null&&(Tt._free(this[e(1068)]),this[e(1068)]=null),this[e(990)]!=null&&(Tt[e(573)](this[e(990)]),this[e(990)]=null),this[e(463)]!=null&&(Tt[e(573)](this.pBmpSizeData),this[e(463)]=null),this[e(372)]!=null&&(Tt[e(573)](this[e(372)]),this[e(372)]=null),this.pJPEGSizeData!=null&&(Tt[e(573)](this[e(1040)]),this[e(1040)]=null),this[e(1107)]=null,this[e(488)]=null,this[e(601)].splice(0,this[e(601)][e(525)]),this[e(1260)].splice(0,this[e(1260)].length),this.audioBefDecBuffer[e(387)](0,this.audioBefDecBuffer[e(525)]),this[e(1016)].splice(0,this[e(1016)].length),this[e(1530)].splice(0,this[e(1530)].length),this[e(1131)].splice(0,this[e(1131)][e(525)]),this[e(459)].splice(0,this[e(459)][e(525)]),this[e(1454)]=0,this[e(1384)]=0,this[e(1463)]=1,this[e(1058)]=null,this[e(621)]=0,this[e(1588)]=null,this[e(1254)]={},this[e(1226)]={},Tt[e(729)](this[e(798)]))}},{key:oe(819),value:function(e){var r=oe;return Tt===null?0:this[r(1081)]===1?(e==0&&this[r(469)]==1&&(this.switchDecodeFrame=!0),(this[r(469)]=e)==1&&(this.needWaitIFrame=!0),1):Tt[r(674)](this[r(798)],e)}},{key:oe(711),value:function(){var e=oe;return Tt===null?0:Tt[e(1341)](this.port)}},{key:oe(381),value:function(e,r,b){return new Promise(function(){var A=I,Ce=G(ce()[A(460)](function Ae(zt,z){var H=A,K;return ce()[H(894)](function(le){for(var Xe=H;;)switch(le[Xe(707)]=le[Xe(811)]){case 0:(K=document[Xe(1546)]("img"))[Xe(1173)]=function(){var vt=Xe,bt=document[vt(1546)](vt(863)),Ht=bt[vt(1021)]("2d"),Ht=(bt[vt(1454)]=r,bt[vt(1384)]=b,Ht[vt(1079)](this,0,0,r,b),bt.toDataURL());zt(Ht)},K.src=e;case 3:case Xe(974):return le[Xe(1476)]()}},Ae)}));return function(Ae,zt){var z=A;return Ce[z(1089)](this,arguments)}}())}},{key:oe(787),value:function(e,r){var b=oe,A,Ce,Ae;this.decodeEngine===1&&e[b(1454)]&&e[b(1384)]&&(A="image/"+r,Ce=document[b(1546)](b(863)),Ae=Ce[b(1021)]("2d"),Ce[b(1454)]=e.width,Ce[b(1384)]=e[b(1384)],Ae[b(1079)](e,0,0,e[b(1454)],e[b(1384)]),Ce[b(783)](function(H){var z=b;console[z(1590)](z(1195)+H);var H=window[z(1244)].createObjectURL(H),K=document[z(1546)]("a");K[z(369)]=new Date().getTime()+"."+r,K[z(1531)]=H,K.dataset.downloadurl=[A,K[z(369)],K[z(1531)]][z(462)](":"),document[z(1051)].appendChild(K),K[z(1168)](),document[z(1051)][z(1026)](K),e[z(327)](),Ae=null},A))}},{key:"_GetImage2",value:function(e,r,b,A,Ce,Ae,zt,z,H,K){var le=this;setTimeout(function(){var Xe=I;if(b!=0&&A!=0){var vt=Tt[Xe(1420)](r);if(vt!==null){Tt.writeArrayToMemory(new Uint8Array(e,0,r),vt);var bt=0,bt=b!=704||A!=288&&A!=240?b*A*4+60:b*A*8+60,Ht=Tt[Xe(1420)](bt),gi=Tt[Xe(1420)](4);if(Ht===null||gi===null)return Tt[Xe(573)](vt),(vt=null)!=Ht&&(Tt[Xe(573)](Ht),Ht=null),void(gi!=null&&(Tt[Xe(573)](gi),gi=null));Tt[Xe(496)](gi,bt,Xe(1298)),bt=2,vt=(Ae==="nv12"?bt=2:Xe(624)===Ae&&(bt=3),Ce=="jpeg"?Tt[Xe(1194)](le[Xe(798)],vt,r,Ht,gi,b,A,bt,zt,z,H,K):Xe(1292)==Ce&&Tt[Xe(527)](le[Xe(798)],vt,r,Ht,gi,b,A,bt,zt,z,H,K),Tt[Xe(1461)](gi,Xe(1298))),bt=new Uint8Array(vt),bt[Xe(483)](Tt.HEAPU8[Xe(350)](Ht,Ht+vt)),zt==0&&z==0&&H==0&&K==0?Xe(1239)==Ce?(le.jpegDataCallback!=null&&le.jpegDataCallback(bt,vt),le.jpegDownloadFlag&&le[Xe(1163)](bt,Xe(561)+Ce),le.jpegDataCallback=null,le[Xe(1146)]=!1):Xe(1292)==Ce&&(le[Xe(1107)]!=null&&le[Xe(1107)](bt,vt),le[Xe(589)]&&le[Xe(1163)](bt,Xe(561)+Ce),le[Xe(1107)]=null,le.bmpDownloadFlag=!1):le[Xe(1163)](bt,"GetCropImage."+Ce),(bt=null)!=Ht&&(Tt._free(Ht),Ht=null),gi!=null&&Tt[Xe(573)](gi)}}},0)}},{key:oe(1547),value:function(){var e=oe,r=0<arguments[e(525)]&&arguments[0]!==void 0?arguments[0]:null,b=!(1<arguments[e(525)]&&arguments[1]!==void 0)||arguments[1];if(this.jpegDataCallback=r,this[e(1146)]=b,this[e(1081)]===1)return this[e(549)]?this[e(877)][e(1086)]({command:e(784)}):this[e(1058)]!=null&&this[e(1058)].GetJPEG(),1;var Ae=Tt._JSPlayM4_GetFrameInfo(this.port);if(this.width=Tt[e(1039)][Ae+12>>2],this[e(1384)]=Tt[e(1039)][Ae+16>>2],this[e(1454)]==0||this.height==0)return 0;var A,Ce,Ae=this.width*this.height*4+60;if(!(this.pJpegData==null||this[e(1247)]<Ae)||(this[e(372)]!=null&&(Tt[e(573)](this[e(372)]),this[e(372)]=null),this.nJPEGDataSize=Ae,this[e(372)]=Tt[e(1420)](this.nJPEGDataSize),this[e(372)]!==null))return this.pJPEGSizeData==null&&(this.pJPEGSizeData=Tt[e(1420)](4)),Ae=Tt[e(498)](this[e(798)],this[e(372)],this[e(1247)],this.pJPEGSizeData),Ae!=1&&(A=Tt[e(972)](this.port),console[e(1590)](e(695)+A)),Ae==1&&(A=Tt[e(1461)](this[e(1040)],e(1298)),(Ce=new Uint8Array(A))[e(483)](Tt[e(447)][e(350)](this[e(372)],this.pJpegData+A)),r!=null&&r(Ce,A),b&&this._downloadFile(Ce,"GetJPEG.jpeg"),this.jpegDataCallback=Ce=null,this[e(1146)]=!1),Ae}},{key:oe(1114),value:function(){var e=oe,r=0<arguments[e(525)]&&arguments[0]!==void 0?arguments[0]:null,b=!(1<arguments[e(525)]&&arguments[1]!==void 0)||arguments[1];if(this.bmpDataCallback=r,this[e(589)]=b,this[e(1081)]===1)return this.hasWebWorker?this.decodeWorker.postMessage({command:e(1351)}):this[e(1058)]!=null&&this[e(1058)][e(1351)](),1;var Ce=Tt[e(635)](this.port);if(this[e(1454)]=Tt[e(1039)][Ce+12>>2],this[e(1384)]=Tt[e(1039)][Ce+16>>2],this[e(1454)]==0||this[e(1384)]==0)return 0;var A,Ce=0,Ce=this[e(1454)]!=704||this[e(1384)]!=288&&this[e(1384)]!=240?this[e(1454)]*this[e(1384)]*4+60:this.width*this[e(1384)]*8+60;if(!(this[e(990)]==null||this.nBmpDataSize<Ce)||(this.pBmpData!=null&&(Tt[e(573)](this[e(990)]),this[e(990)]=null),this[e(947)]=Ce,this[e(990)]=Tt[e(1420)](this[e(947)]),this.pBmpData!==null))return this[e(463)]==null&&(this[e(463)]=Tt._malloc(4)),Ce=Tt[e(693)](this.port,this[e(990)],this.nBmpDataSize,this.pBmpSizeData),Ce!=1&&(A=Tt[e(972)](this[e(798)]),console[e(1590)](e(695)+A)),Ce==1&&(A=Tt.getValue(this[e(463)],e(1298)),(Ce=new Uint8Array(A))[e(483)](Tt[e(447)][e(350)](this[e(990)],this[e(990)]+A)),r!=null&&r(Ce,A),b&&this[e(1163)](Ce,e(594)),this[e(1107)]=Ce=null,this[e(589)]=!1),1}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=oe;if(this[e(1081)]===1)return this[e(549)]?this.decodeWorker.postMessage({command:e(1125)}):this[e(1058)]!=null&&this[e(1058)][e(1125)](),1;var r=Tt[e(635)](this[e(798)]);if(this[e(1454)]=Tt[e(1039)][r+12>>2],this[e(1384)]=Tt.HEAP32[r+16>>2],this.width==0||this[e(1384)]==0)return 0;var r=this[e(1454)]*this[e(1384)]*4+60,b=Tt._malloc(r),A=Tt[e(1420)](4),Ce=this[e(892)],Ae=this.SetDisRegionLeft,zt=this[e(501)],z=this.SetDisRegionTop;if(b!==null)return r=Tt[e(1494)](this.port,b,r,A,0,0,Ae,z,zt,Ce),r!=1&&(Ae=Tt[e(972)](this[e(798)]),console.log(e(695)+Ae)),r==1&&(z=Tt[e(1461)](A,e(1298)),(zt=new Uint8Array(z)).set(Tt[e(447)][e(350)](b,b+z)),this[e(1163)](zt,e(1045)),zt=null),b!=null&&(Tt[e(573)](b),b=null),A!=null&&(Tt._free(A),A=null),r}},{key:oe(1314),value:function(){var e=oe;if(this[e(1081)]===1)return this[e(549)]?this.decodeWorker[e(1086)]({command:e(1417)}):this.pcVideoManager!=null&&this[e(1058)][e(1417)](),1;var r=Tt[e(635)](this.port);if(this[e(1454)]=Tt.HEAP32[r+12>>2],this[e(1384)]=Tt.HEAP32[r+16>>2],this[e(1454)]==0||this[e(1384)]==0)return 0;var r=this[e(1454)]*this[e(1384)]*4+60,b=Tt[e(1420)](r),A=Tt._malloc(4),Ce=this[e(892)],Ae=this.SetDisRegionLeft,zt=this[e(501)],z=this[e(846)];if(b!==null)return r=Tt[e(951)](this[e(798)],b,r,A,0,0,Ae,z,zt,Ce),r!=1&&(Ae=Tt[e(972)](this[e(798)]),console[e(1590)](e(695)+Ae)),r==1&&(z=Tt[e(1461)](A,"i32"),(zt=new Uint8Array(z))[e(483)](Tt[e(447)][e(350)](b,b+z)),this[e(1163)](zt,"GetCropBmp.bmp"),zt=null),b!=null&&(Tt._free(b),b=null),A!=null&&(Tt[e(573)](A),A=null),1}},{key:oe(1285),value:function(){var e=oe;return Tt===null?0:Tt[e(421)]()}},{key:oe(1250),value:function(){var e=oe;return Tt===null?0:Tt[e(401)]()}},{key:"JSPlayM4_GetBuildDate",value:function(){return Tt===null?0:Tt._JSPlayM4_GetBuildDate()}},{key:"JSPlayM4_GetLastError",value:function(){var e=oe;return Tt===null?0:Tt[e(972)](this[e(798)])}},{key:oe(773),value:function(){var e=oe;if(Tt===null)return 0;if(this[e(1326)]===0)return 1;if(this[e(1081)]===1)if(this[e(549)]){if(this[e(877)]===null)return 0;this[e(877)][e(1086)]({command:e(1589)})}else this.pcVideoManager!=null&&this[e(1058)].fast();var r=Tt[e(543)](this[e(798)]);return r==1&&(this[e(1147)]=2*this[e(1147)]),r}},{key:oe(1220),value:function(){var e=oe;if(Tt===null)return 0;if(this[e(1326)]===0)return 1;if(this[e(1081)]===1)if(this[e(549)]){if(this[e(877)]===null)return 0;this[e(877)].postMessage({command:"slow"})}else this.pcVideoManager!=null&&this[e(1058)].slow();var r=Tt._JSPlayM4_Slow(this.port);return r==1&&(this[e(1147)]=this[e(1147)]/2),console[e(1590)](e(1263)+this.playSpeed),r}},{key:oe(793),value:function(e){var r=oe;return Tt===null?0:this.decodeEngine===1?1:Tt[r(1115)](this[r(798)],e)}},{key:oe(1055),value:function(e){var r=oe;return Tt===null?0:Tt[r(751)](this[r(798)],e)}},{key:oe(966),value:function(e){var r=oe;return Tt===null?0:this[r(1326)]===0?1:(this[r(1081)]===1&&(this.hasWebWorker?this.decodeWorker[r(1086)]({command:r(1080),value:e}):this.pcVideoManager!=null&&this[r(1058)].Pause(e)),Tt._JSPlayM4_Pause(this[r(798)],e))}},{key:"JSPlayM4_OneByOne",value:function(){var e=oe;return Tt===null?0:this.streamOpenMode===0?1:(this[e(1463)]=5,this[e(1081)]===1&&(this.hasWebWorker?this[e(877)][e(1086)]({command:e(869),value:1}):this[e(1058)]!=null&&this.pcVideoManager[e(869)](1)),Tt[e(799)](this[e(798)]))}},{key:"JSPlayM4_OneByOneResume",value:function(){var e=oe;return Tt===null?0:this[e(1326)]===0?1:(this[e(1463)]=2,this[e(1081)]===1&&(this.hasWebWorker?this.decodeWorker[e(1086)]({command:"OneByOne",value:0}):this[e(1058)]!=null&&this[e(1058)][e(869)](0)),Tt._JSPlayM4_Play(this[e(798)],this[e(1433)]))}},{key:oe(1452),value:function(e){var r=oe;return Tt===null?0:Tt[r(499)](this[r(798)],e)}},{key:oe(330),value:function(){var e=oe;return Tt===null?0:Tt[e(912)](this.port)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,r,b,A,Ce){var Ae=oe,zt=5<arguments[Ae(525)]&&arguments[5]!==void 0&&arguments[5],z=!(6<arguments.length&&arguments[6]!==void 0)||arguments[6];if(Tt===null)return 0;var H=1,K=r,le=A,Xe=b,vt=Ce;if(typeof r!="number"||Ae(911)!=Ni(A)||Ae(911)!=Ni(b)||typeof Ce!="number")return console.log(Ae(681)),0;if(zt)Xe=this[Ae(363)],vt=this[Ae(1421)],this.iZoomNum=le=K=0,this[Ae(397)]=1,this[Ae(435)]=1;else if(z){if(K<0||Xe<0||le<0||vt<0)return 0;this[Ae(621)]!==0&&(K=Math[Ae(1437)](K/this.iRatio_x)+this[Ae(847)][Ae(1161)],le=Math[Ae(1437)](le/this[Ae(435)])+this[Ae(847)][Ae(449)],Xe=Math[Ae(1437)](Xe/this[Ae(397)])+this[Ae(847)][Ae(1161)],vt=Math[Ae(1437)](vt/this[Ae(435)])+this[Ae(847)][Ae(449)])}if(this[Ae(847)]={top:le,left:K,right:Xe,bottom:vt},Xe-K<16||vt-le<16||Xe-K>this[Ae(363)]||vt-le>this[Ae(1421)])return console.log(Ae(686)+r+Ae(905)+b+Ae(632)+A+Ae(833)+Ce+",bClose:"+zt+Ae(1344)+z+Ae(1284)+this[Ae(621)]+Ae(574)+this.canvasWidth+Ae(933)+this.canvasHeight),0;if(this[Ae(1081)]===1)if(this[Ae(892)]=vt/this[Ae(1421)]*this[Ae(1384)],this.SetDisRegionLeft=K/this.canvasWidth*this[Ae(1454)],this[Ae(501)]=Xe/this.canvasWidth*this.width,this[Ae(846)]=le/this[Ae(1421)]*this[Ae(1384)],this.hasWebWorker){if(this[Ae(877)]===null)return 0;this[Ae(877)].postMessage({command:Ae(1053),sx:this[Ae(829)],sy:this[Ae(846)],sw:this.SetDisRegionRight-this[Ae(829)],sh:this.SetDisRegionBottom-this[Ae(846)]})}else this[Ae(1058)]!=null&&this[Ae(1058)][Ae(1053)](this.SetDisRegionLeft,this[Ae(846)],this.SetDisRegionRight-this[Ae(829)],this[Ae(892)]-this[Ae(846)]);else r=Tt[Ae(635)](this[Ae(798)]),this.width=Tt[Ae(1039)][r+12>>2],this[Ae(1384)]=Tt[Ae(1039)][r+16>>2],this[Ae(892)]=vt/this[Ae(1421)]*this.height,this[Ae(829)]=K/this.canvasWidth*this[Ae(1454)],this[Ae(501)]=Xe/this[Ae(363)]*this.width,this.SetDisRegionTop=le/this[Ae(1421)]*this[Ae(1384)],H=Tt[Ae(465)](this.port,this[Ae(1159)],this[Ae(829)],this[Ae(501)],this[Ae(846)],this.SetDisRegionBottom);return z&&(this[Ae(397)]=this[Ae(363)]/(Xe-K),this[Ae(435)]=this[Ae(1421)]/(vt-le),this.iZoomNum++),H}},{key:oe(427),value:function(e){var r=oe;return Tt===null?0:(this[r(531)]=Number(e),Tt[r(1064)](this[r(798)],e))}},{key:oe(1160),value:function(e,r){var b=oe;return Tt===null?0:Tt[b(790)](this[b(798)],e,r)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,r,b){var A=oe;return Tt===null?0:Tt[A(1219)](this[A(798)],e,r,b)}},{key:oe(438),value:function(e,r){var b=oe,A=2<arguments[b(525)]&&arguments[2]!==void 0?arguments[2]:0;if(e<16||r<16||this[b(1159)]===null)return 0;if(this[b(363)]=e,this[b(1421)]=r,this[b(1081)]!==1)return Tt===null?0:Tt._JSPlayM4_SetCanvasSize(this[b(798)],e,r,A);if(this[b(549)]){if(this.decodeWorker==null)return 0;this.decodeWorker[b(1086)]({command:"SetCanvasSize",width:e,height:r})}else this[b(1058)]!=null&&this[b(1058)].SetCanvasSize(e,r);return 1}},{key:oe(1466),value:function(e){var r=oe;return Tt===null?0:(this[r(1081)]===1&&(this[r(549)]?this[r(877)]===null?this[r(1498)]=e:this[r(877)][r(1086)]({command:r(1047),value:e}):this.pcVideoManager!=null&&this[r(1058)].SetDisplayBuf(e)),Tt._JSPlayM4_SetDisplayBuf(this[r(798)],e))}},{key:oe(404),value:function(){var e=oe;return Tt===null?0:Tt[e(680)](this[e(798)])}},{key:oe(973),value:function(e){var r=oe;return Tt===null?0:Tt[r(923)](this.port,e)}},{key:oe(1151),value:function(){var e=oe;return Tt===null?0:this[e(1326)]===0?1:Tt._JSPlayM4_ReversePlay(this[e(798)])}},{key:oe(1562),value:function(e){return Tt===null?0:Tt._JSPlayM4_SetDecodeThreadNum(this.port,e)}},{key:oe(1509),value:function(){var e=oe,r=0<arguments[e(525)]&&arguments[0]!==void 0?arguments[0]:0;return Tt===null?0:this[e(1081)]===1?(this[e(549)]?this.decodeWorker[e(1086)]({command:e(1370)}):this.pcVideoManager!=null&&this.pcVideoManager[e(1370)](),1):Tt[e(753)](this[e(798)],r)}},{key:oe(1291),value:function(e,r,b){var A=oe;return Tt===null?0:Tt._JSPlayM4_DisplayLostFrames(this[A(798)],e,r,b)}},{key:"JSPlayM4_SetANRParam",value:function(e,r){var b=oe;return Tt===null?0:Tt[b(651)](this[b(798)],e,r)}},{key:"JSPlayM4_SetResampleValue",value:function(e,r){var b=oe;return Tt===null?0:Tt[b(423)](this.port,e,r)}},{key:"JSPlayM4_SetAntialias",value:function(e){var r=oe,b=1;if(this[r(1081)]===1)this[r(549)]?this[r(877)]!=null&&this[r(877)][r(1086)]({command:r(558),value:e}):this[r(1058)]!=null&&(b=this.pcVideoManager[r(558)](e));else{if(Tt===null)return 0;b=Tt[r(1353)](this[r(798)],e)}return b}},{key:oe(361),value:function(e){var r=oe;return Tt===null?0:Tt[r(333)](this[r(798)],e)}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){return Tt===null?0:Tt._JSPlayM4_SetAudioThreadModel(this.port,e)}},{key:"JSPlayM4_SetDecodeERC",value:function(e){var r=oe;return Tt===null?0:Tt[r(1499)](this[r(798)],e)}},{key:"JSPlayM4_SkipErrorData",value:function(e){var r=oe;return Tt===null?0:Tt._JSPlayM4_SkipErrorData(this[r(798)],e)}},{key:oe(899),value:function(e,r){var b=oe;return Tt===null?0:Tt[b(1484)](this[b(798)],e,r)}},{key:oe(1214),value:function(e,r){var b=oe;return Tt===null?0:Tt._JSPlayM4_SetD3DPostProcess(this[b(798)],e,r)}},{key:oe(323),value:function(e,r){var b=oe;return!(r&&typeof r=="function"||r===null)||(this[b(409)]=r,Tt===null)?0:(r=1,r=this[b(1081)]===0?Tt._JSPlayM4_SetFirstFrameCallBack(this[b(798)],e,this[b(1591)]):r)}},{key:oe(967),value:function(e,r){var b=oe;return r&&b(1536)==Ni(r)||r===null?(this[b(1164)]=r,Tt===null?0:Tt._JSPlayM4_SetDecCallBack(this.port,e,this[b(1591)])):0}},{key:oe(316),value:function(e,r){var b=oe;return r&&b(1536)==Ni(r)||r===null?(this[b(1327)]=r,Tt===null?0:Tt[b(636)](this[b(798)],e,this[b(1591)])):0}},{key:oe(1519),value:function(e){var r=oe,b=this,A=1;return this[r(1081)]===1?this.hasWebWorker?this[r(877)]!=null&&this[r(877)][r(1086)]({command:r(1203),value:e}):this[r(1058)]!=null&&(A=this[r(1058)][r(1203)](function(Ce){var Ae=r;b[Ae(1254)].port=Ce[Ae(798)],b[Ae(1254)][Ae(714)]=Ce.codecType,b[Ae(1254)][Ae(952)]=Ce.frameType,b[Ae(1254)][Ae(1119)]=Ce[Ae(1119)],b[Ae(1254)][Ae(1454)]=Ce[Ae(1454)],b[Ae(1254)][Ae(1384)]=Ce[Ae(1384)],b[Ae(1254)][Ae(432)]=Ce[Ae(432)],b[Ae(1254)].frameRate=Ce.frameRate,b[Ae(1254)][Ae(666)]=Ce.frameNum,b[Ae(1254)][Ae(389)]=Ce[Ae(389)],b[Ae(1254)][Ae(1070)]=Ce[Ae(1070)],b[Ae(1254)].cropLeft=Ce[Ae(1444)],b[Ae(1254)][Ae(1552)]=Ce[Ae(1552)],b[Ae(1254)][Ae(633)]=Ce[Ae(633)],b[Ae(1254)][Ae(1429)]=Ce[Ae(1429)],b.displayFrameInfo[Ae(628)]=Ce[Ae(628)],b[Ae(1254)][Ae(500)]=Ce[Ae(500)],b[Ae(1254)].week=Ce[Ae(727)],b.displayFrameInfo[Ae(394)]=Ce.day,b[Ae(1254)][Ae(1380)]=Ce.hour,b[Ae(1254)][Ae(1088)]=Ce[Ae(1088)],b[Ae(1254)][Ae(939)]=Ce.second,b.displayFrameInfo[Ae(1221)]=Ce[Ae(1221)]},e)):A=Tt[r(968)](this[r(798)],e),A}},{key:oe(805),value:function(e){var r=oe;return Tt===null?0:Tt[r(571)](this[r(798)],e)}},{key:oe(1135),value:function(){var e=oe;if(Tt===null)return 0;var r,b={};return this[e(1081)]==0?(r=Tt[e(635)](this.port),b[e(798)]=Tt[e(1039)][r>>2],b.frameType=Tt[e(1039)][r+4>>2],b[e(1119)]=Tt[e(1039)][r+8>>2],b[e(1454)]=Tt[e(1039)][r+12>>2],b.height=Tt.HEAP32[r+16>>2],b[e(432)]=Tt[e(1039)][r+20>>2],b[e(964)]=Tt.HEAP32[r+24>>2],b[e(1248)]=Tt.HEAP32[r+28>>2],b[e(1316)]=Tt[e(1039)][r+32>>2],b[e(1371)]=Tt.HEAP32[r+36>>2],b.frameNum=Tt[e(1039)][r+40>>2],b[e(1444)]=Tt[e(1039)][r+44>>2],b[e(1552)]=Tt[e(1039)][r+48>>2],b[e(633)]=Tt[e(1039)][r+52>>2],b.cropBottom=Tt[e(1039)][r+56>>2],b[e(628)]=Tt.HEAP16[r+60>>1],b.month=Tt[e(1006)][r+62>>1],b.week=Tt[e(1006)][r+64>>1],b[e(394)]=Tt[e(1006)][r+66>>1],b.hour=Tt[e(1006)][r+68>>1],b.minute=Tt.HEAP16[r+70>>1],b.second=Tt[e(1006)][r+72>>1],b.milliseconds=Tt[e(1006)][r+74>>1],this[e(1454)]=b.width,this[e(1384)]=b[e(1384)]):b=this[e(1254)],b}},{key:oe(878),value:function(){var e=oe;if(Tt===null)return 0;var r=Tt[e(1122)](this[e(798)]);return null[e(1290)]=Tt[e(1039)][r>>2],null[e(758)]=Tt[e(1039)][r+4>>2],null[e(1148)]=Tt[e(1039)][r+8>>2],null[e(596)]=Tt[e(1039)][r+12>>2],null[e(1567)]=Tt[e(1039)][r+16>>2],null[e(1592)]=new Uint8Array(dataLength),additionDataBuffer.set(Tt[e(447)][e(350)](pData,pData+dataLength)),null}},{key:oe(1557),value:function(e,r,b){var A=oe;return Tt!==null&&(b&&A(1536)==Ni(b)||b===null)?(this[A(367)]=b,Tt._JSPlayM4_SetAdditionDataCallBack(this[A(798)],e,r,this[A(1591)])):0}},{key:oe(428),value:function(e){var r=oe;return Tt!==null&&(e&&r(1536)==Ni(e)||e===null)?(this.getPlayTimeCallBackFun=e,void(this[r(1081)]===1?this[r(549)]?this[r(877)][r(1086)]({command:r(768)}):this[r(1058)]!=null&&(e=this.pcVideoManager[r(768)](),this.getPlayTimeCallBackFun&&this[r(476)](e-this.startTimeStamp)):(e=Tt[r(1028)](this[r(798)]),this.getPlayTimeCallBackFun(e)))):0}},{key:oe(909),value:function(){var e=oe;return Tt===null?0:Tt._JSPlayM4_GetFileTime(this[e(798)])}},{key:oe(839),value:function(e){var r=oe;return Tt===null?0:this[r(909)]()<e?-1:(this.decodeEngine===1&&(this.hasWebWorker?this[r(877)][r(1086)]({command:r(1388)}):this[r(1058)]!=null&&this[r(1058)][r(1388)]()),Tt[r(770)](this[r(798)],e))}},{key:oe(592),value:function(e){return Tt===null?0:Tt._JSPlayM4_ResetBuffer(this.port,e)}},{key:oe(822),value:function(e,r,b,A,Ce,Ae,zt){var z=oe;return Tt===null?0:Tt._JSPlayM4_SetGlobalBaseTime(this[z(798)],e,r,b,A,Ce,Ae,zt)}},{key:"JSPlayM4_SetSecretKey",value:function(Ce){var r=oe,b,A,Ce=this[r(619)](Ce),Ae=Tt[r(1420)](128);if(Ae!==null)return b=Tt[r(447)].subarray(Ae,Ae+128),A=new Uint8Array(128),b.set(A,0),b[r(483)](new Uint8Array(Ce)),A=b=null,Ce=Tt[r(769)](this.port,1,Ae,128),Ae!==null&&Tt[r(573)](Ae),Ce}},{key:oe(344),value:function(e,r){var b=oe;return this[b(448)]=r,Tt[b(738)](this[b(798)],e,this[b(1591)])}},{key:oe(583),value:function(e){var r=oe;return this[r(1081)]==0?Tt._JSPlayM4_SetPlayOrBackSwitchMode(this.port,e):0}},{key:oe(395),value:function(e){var r=oe;return Tt[r(789)](this[r(798)],e)}},{key:oe(1330),value:function(e){var r=oe;return Tt[r(771)](this[r(798)],e)}},{key:oe(866),value:function(){var e=oe,r=0<arguments[e(525)]&&arguments[0]!==void 0?arguments[0]:null,b=1;if(r!=null&&r!=""){if(this[e(1176)]=r.split(","),this[e(1081)]!==1){for(var A="",Ce=0;Ce<this[e(1176)][e(525)];Ce++)Ce==this[e(1176)].length-1?A+="#"+this[e(1176)][Ce]:A+="#"+this.FECcanvasIDArray[Ce]+",";if(this[e(1176)][e(525)]!=0)for(var Ae=0;Ae<this[e(1176)].length;Ae++){var zt,z=document[e(380)](this[e(1176)][Ae]);z&&(zt=z[e(1402)](!0),z.parentNode.replaceChild(zt,z))}var H=this[e(619)](A),le=2*A[e(525)];if(this.pFECTotalCanvasIDData=Tt[e(1420)](le),this[e(1068)]===null)return 0;var K=Tt[e(447)][e(350)](this.pFECTotalCanvasIDData,this[e(1068)]+le),le=new Uint8Array(le);K[e(483)](le,0),K[e(483)](new Uint8Array(H)),K=null,b=Tt[e(765)](this[e(798)],this[e(1068)])}}else console[e(1590)](e(1056)+r),b=0;return b}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,r,b){var A=oe,Ce=1;return this.decodeEngine===1?this.hasWebWorker?this[A(877)]!=null?this[A(877)][A(1086)]({command:A(1280),fishSubPort:e,placeType:r,correctType:b}):Ce=0:Ce=this[A(1058)]!=null?this[A(1058)][A(1206)](e,r,b):0:Ce=Tt[A(1339)](this[A(798)],e,r,b),Ce}},{key:oe(1576),value:function(e,r){var b=oe;this[b(531)]&&console[b(1590)](b(781)+this[b(1081)]+b(513)+e+",correctType:"+r);var A=1;return this[b(696)]==0?(console.log(b(516)),A=Tt[b(1339)](this[b(798)],0,e,r)):this[b(1081)]===1?this[b(549)]?this[b(877)]!=null?this.decodeWorker[b(1086)]({command:b(445),placeType:e,correctType:r}):A=0:A=this[b(1058)]!=null?this[b(1058)][b(1012)](e,r):0:A=Tt[b(1032)](this.port,e,r),A}},{key:oe(1241),value:function(e){var r=oe;this[r(696)]=e,this.printfFlag&&console[r(1590)](r(1197)+this[r(1081)]+r(1172)+e);var b=1;return e==0?console[r(1590)](r(1217)):this.decodeEngine===1?this[r(549)]?this[r(877)]!=null?this[r(877)][r(1086)]({command:r(584),fishSubPort:e}):b=0:b=this.pcVideoManager!=null?this[r(1058)].FEC_Enable(e):0:b=Tt[r(1336)](this.port,e),b}},{key:oe(479),value:function(e,r){var b=oe;this[b(531)]&&console.log(b(1572)+this[b(1081)]+b(1172)+e+b(647)+r[b(457)]+b(1097)+r[b(1303)]);var A,Ce=1;return this[b(1081)]===1?this.hasWebWorker?this[b(877)]!=null?this.decodeWorker.postMessage({command:b(1477),fishSubPort:e,param2d:r}):Ce=0:Ce=this.pcVideoManager!=null?this.pcVideoManager[b(671)](e,r):0:(A=Tt[b(342)](),r[b(457)]!=null&&(Tt[b(1039)][A>>2]=r[b(457)]),r.fPTZParam!=null&&r[b(626)][b(989)]!=null&&r[b(626)].fPTZPositionY!=null&&(Tt[b(683)][A+8>>2]=r.fPTZParam[b(989)],Tt.HEAPF32[A+12>>2]=r[b(626)][b(1357)]),r[b(626)]!=null&&(Tt.HEAPF32[A+32>>2]=r[b(431)]),r[b(1303)]!=null&&(Tt.HEAPF32[A+36>>2]=r[b(1303)]),Ce=Tt[b(585)](this[b(798)],e)),Ce}},{key:oe(826),value:function(e,r,b){var A=oe;this[A(531)]&&console[A(1590)](A(336)+this[A(1081)]+A(1172)+e+A(647)+r+A(1097)+b);var Ce=1;return this[A(1081)]===1?this[A(549)]?this[A(877)]!=null?this[A(877)].postMessage({command:A(1355),fishSubPort:e,upDateType:r,fValue:b}):Ce=0:Ce=this[A(1058)]!=null?this[A(1058)][A(992)](e,r,b):0:Ce=Tt[A(719)](this[A(798)],e,r,b),Ce}},{key:oe(1409),value:function(e,r,b){var A=oe,Ce=1;return this[A(398)]=b,this.decodeEngine===1?this.hasWebWorker?this.decodeWorker!=null?this.decodeWorker[A(1086)]({command:A(1286),fishSubPort:e,upDateType:r}):Ce=0:(Ce=this.pcVideoManager!=null?this[A(1058)][A(1578)](e,r):0,this[A(398)]!=null&&this.FECViewParamCB(Ce)):(Ce=Tt[A(1374)](this[A(798)],e,r),this.FECViewParamCB!=null&&this.FECViewParamCB(Ce)),Ce}},{key:oe(1425),value:function(e,r){var b=oe;this[b(531)]&&console[b(1590)](b(732)+this[b(1081)]+b(1172)+e+b(747)+r);var A,Ce,Ae,zt,z=1;return e==0?console[b(1590)]("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd"):r!=null?this[b(1081)]===1?(A=document[b(380)](r),this[b(549)]?(Ce=A[b(957)](),this.decodeWorker!=null?this[b(877)][b(1086)]({command:b(1184),fishSubPort:e,offscrrenCnv:Ce},[Ce]):z=0):z=this.pcVideoManager!=null?this[b(1058)].FEC_SetWnd(e,A):0):((Ce=null)!=r&&(A=this[b(619)]("#"+r),zt=2*(r[b(525)]+1),Ce=Tt._malloc(zt),Ae=Tt[b(447)][b(350)](Ce,Ce+zt),zt=new Uint8Array(zt),Ae[b(483)](zt,0),Ae[b(483)](new Uint8Array(A)),zt=Ae=null),z=Tt[b(565)](this[b(798)],e,Ce),Ce!=null&&(Tt[b(573)](Ce),Ce=null)):(console[b(1590)](b(1029)+this[b(1081)]+b(1172)+e+",hWnd:"+r),z=0),z}},{key:oe(535),value:function(){var e=oe,r=0<arguments[e(525)]&&arguments[0]!==void 0?arguments[0]:0,b=!(1<arguments[e(525)]&&arguments[1]!==void 0)||arguments[1],A=2<arguments[e(525)]&&arguments[2]!==void 0&&arguments[2],Ce=1;return r==0?console[e(1590)]("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):this[e(1081)]===1?this[e(549)]?this[e(877)]!=null?this[e(877)][e(1086)]({command:e(1134),fishSubPort:r,clearFECCanvas:b,clearContext:A}):Ce=0:Ce=this[e(1058)]!=null?this[e(1058)][e(1582)](r,b,A):0:Ce=Tt[e(982)](this.port,r,b,A),Ce}},{key:oe(1036),value:function(e){var r=oe;this[r(531)]&&console[r(1590)](r(759)+this.decodeEngine+r(1172)+e);var b=1;return e==0?(this[r(696)]=e,console.log(r(1019)),1):(this.decodeEngine===1?this[r(549)]?this[r(877)]!=null?this.decodeWorker[r(1086)]({command:r(358),fishSubPort:e}):b=0:b=this[r(1058)]!=null?this.pcVideoManager[r(832)](e):0:b=Tt._JSPlayM4_FEC_DelPort(this[r(798)],e),b)}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var r=oe,b,A,Ce,Ae,zt=1<arguments[r(525)]&&arguments[1]!==void 0?arguments[1]:0,z=2<arguments[r(525)]&&arguments[2]!==void 0?arguments[2]:0,gi=3<arguments[r(525)]?arguments[3]:void 0,H=4<arguments[r(525)]&&arguments[4]!==void 0?arguments[4]:null,K=5<arguments.length?arguments[5]:void 0,le=6<arguments[r(525)]?arguments[6]:void 0,Xe=(this[r(531)]&&console[r(1590)](">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this[r(1081)]+r(1172)+e+r(517)+gi[r(1161)]+",right:"+gi[r(1422)]+",top:"+gi[r(449)]+r(833)+gi[r(497)]),1),vt=gi.left,bt=gi.right,Ht=gi[r(449)],gi=gi.bottom;if(typeof vt!="number"||r(911)!=Ni(bt)||typeof gi!="number"||r(911)!=Ni(Ht))return console.log(r(681)),0;if(K){if(le){if(vt<0||bt<0||Ht<0||gi<0)return 0;this[r(1451)]!==0&&(vt=Math[r(1437)](vt/this[r(575)])+this[r(874)][r(1161)],Ht=Math[r(1437)](Ht/this[r(1469)])+this[r(874)][r(449)],bt=Math.round(bt/this[r(575)])+this.stFECDisplayRect[r(1161)],gi=Math[r(1437)](gi/this[r(1469)])+this[r(874)][r(449)])}}else bt=this[r(363)],gi=this[r(1421)],this[r(1451)]=Ht=vt=0,this[r(575)]=1,this[r(1469)]=1;return this[r(874)]={top:Ht,left:vt,right:bt,bottom:gi},bt-vt<16||gi-Ht<16||bt-vt>this[r(363)]||gi-Ht>this.canvasHeight?0:(this[r(1081)]===1?(A=vt/this[r(363)]*this[r(1454)],b=bt/this.canvasWidth*this[r(1454)],Ae=Ht/this[r(1421)]*this[r(1384)],Ce=gi/this[r(1421)]*this[r(1384)],this[r(549)]?this[r(877)]!=null?this[r(877)][r(1086)]({command:r(562),fishSubPort:e,type:zt,regionNum:z,sx:A,sy:Ae,sw:b-A,sh:Ce-Ae}):Xe=0:Xe=this.pcVideoManager!=null?this[r(1058)][r(1345)](e,zt,z,A,Ae,b-A,Ce-Ae):0):Xe=Tt!==null?(b=vt/this[r(363)]*1e3,A=bt/this[r(363)]*1e3,Ce=Ht/this.canvasHeight*1e3,Ae=gi/this[r(1421)]*1e3,K?Tt[r(446)](this[r(798)],e,zt,z,b,A,Ce,Ae,H,K):Tt[r(446)](this[r(798)],e,0,0,0,0,0,0,null,K)):0,le&&(this[r(575)]=this.canvasWidth/(bt-vt),this.iFECRatio_y=this[r(1421)]/(gi-Ht),this[r(1451)]++),Xe)}},{key:oe(986),value:function(e,r){var b=oe,A=1;return this[b(1081)]===1?this[b(549)]?this[b(877)]!=null?this[b(877)].postMessage({command:b(1396),fishSubPort:e,bValue:r}):A=0:A=this[b(1058)]!=null?this.pcVideoManager[b(1020)](e,r):0:A=Tt[b(1150)](this[b(798)],e,r),A}},{key:oe(710),value:function(){var e=oe,r,b={},A=navigator[e(1426)][e(1558)]();return(r=A[e(1300)](/rv:([\d.]+)\) like gecko/))||(r=A.match(/msie ([\d\.]+)/))?b.ie=r[1]:(r=A[e(1300)](/edge\/([\d\.]+)/))?b[e(684)]=r[1]:(r=A[e(1300)](/firefox\/([\d\.]+)/))?b[e(605)]=r[1]:(r=A[e(1300)](/(?:opera|opr).([\d\.]+)/))?b[e(1427)]=r[1]:(r=A[e(1300)](/chrome\/([\d\.]+)/))?b[e(1497)]=r[1]:(r=A.match(/version\/([\d\.]+).*safari/))&&(b[e(413)]=r[1]),b[e(1497)]?(r=(A=b[e(1497)]).indexOf("."),Number(A.substring(0,r))):(b.ie?console[e(786)](e(484),e(692)):b[e(413)]?console[e(786)](e(1407),e(692)):b.firefox?console[e(786)](e(1441),"color: red"):console.info(e(1224),e(692)),-1)}},{key:oe(619),value:function(e){for(var r=oe,b,A,Ce=[],Ae=0;Ae<e[r(525)];Ae++){for(b=e[r(494)](Ae),A=[];A[r(962)](255&b),b>>=8;);Ce=Ce[r(1438)](A[r(408)]())}return Ce}},{key:oe(1163),value:function(Ce,r){var b=oe,A=Ce,Ce=(Ce instanceof Blob||Ce instanceof File||(A=new Blob([Ce])),window[b(1244)][b(1245)](A)),A=window[b(502)][b(1546)]("a"),Ce=(A[b(1531)]=Ce,A.download=r,document[b(1117)](b(1585)));Ce[b(1152)](b(1168),!0,!0),A[b(534)](Ce)}},{key:"downloadRTPData",value:function(e){var r=oe;if(this.bWriteData){var b=e,A=this[r(601)][r(525)];console[r(1590)](r(1167)+A);for(var Ce=0,Ae=b[r(525)];Ce<Ae;Ce++)this.aTotalBuffer[A+Ce]=b[Ce];this.iFrameNum++,b=null,console.log("downloadRTPdata iFrameNum:"+this[r(1255)])}this[r(1467)]&&600<=this[r(1255)]&&(console[r(1590)](r(726)),e=new Uint8Array(this[r(601)]),this._downloadFile(e,r(1430)),this.aTotalBuffer[r(387)](0,this.aTotalBuffer[r(525)]),this[r(1467)]=!1,this[r(1255)]=0)}},{key:oe(1453),value:function(e){var r=oe;if(this[r(1455)]){for(var b=e,A=this.audioANRBuffer[r(525)],Ce=0,Ae=b[r(525)];Ce<Ae;Ce++)this.audioANRBuffer[A+Ce]=b[Ce];this.iAudioANRFrameNum++,b=null,console.log(r(1465)+this[r(1182)])}this[r(1455)]&&this.iAudioANRFrameNum>=WRITE_PCM_NUM&&(console[r(1590)](r(369)+WRITE_PCM_NUM+r(1228)),e=new Uint8Array(this[r(1260)]),this[r(1163)](e,r(1373)),this[r(1260)][r(387)](0,this[r(1260)][r(525)]),this.bWriteAudioANRData=!1,this[r(1182)]=0)}},{key:oe(1069),value:function(e){var r=oe;if(this[r(1188)]){for(var b=e,A=this.audioBefDecBuffer[r(525)],Ce=0,Ae=b.length;Ce<Ae;Ce++)this.audioBefDecBuffer[A+Ce]=b[Ce];this.iAudioBefDecFrameNum++,b=null,console.log(r(374)+this[r(1180)])}this[r(1188)]&&this[r(1180)]>=WRITE_PCM_NUM&&(console.log("download"+WRITE_PCM_NUM+"this.audioBefDecBuffer"),e=new Uint8Array(this[r(1462)]),this[r(1163)](e,r(351)),this.audioBefDecBuffer.splice(0,this[r(1462)][r(525)]),this[r(1188)]=!1,this[r(1180)]=0)}},{key:oe(1192),value:function(e){var r=oe;if(this[r(928)]){for(var b=e,A=this[r(1016)].length,Ce=0,Ae=b[r(525)];Ce<Ae;Ce++)this.audioAfDecOUTBuffer[A+Ce]=b[Ce];this[r(1440)]++,b=null,console[r(1590)]("download 2 After Decode AudioData FrameNum:"+this.iAudioAfDecOUTFrameNum)}this[r(928)]&&this[r(1440)]>=WRITE_PCM_NUM&&(console[r(1590)](r(369)+WRITE_PCM_NUM+"this.audioAfDecOUTBuffer"),e=new Uint8Array(this[r(1016)]),this[r(1163)](e,r(1563)),this[r(1016)][r(387)](0,this[r(1016)][r(525)]),this[r(928)]=!1,this[r(1440)]=0)}},{key:oe(321),value:function(e){var r=oe;if(this[r(1559)]){for(var b=e,A=this[r(1530)][r(525)],Ce=0,Ae=b.length;Ce<Ae;Ce++)this[r(1530)][A+Ce]=b[Ce];this[r(1456)]++,b=null,console[r(1590)](r(393)+this.iAudioBeRenOUTFrameNum)}this[r(1559)]&&this[r(1456)]>=WRITE_PCM_NUM&&(console[r(1590)](r(369)+WRITE_PCM_NUM+r(1527)),e=new Uint8Array(this.audioBeRenOUTBuffer),this._downloadFile(e,r(1442)),this[r(1530)][r(387)](0,this[r(1530)][r(525)]),this.bWriteAudioBeforeRender=!1,this[r(1456)]=0)}},{key:"downloadAudioResampleData",value:function(e){var r=oe;if(this[r(664)]){for(var b=e,A=this[r(1131)][r(525)],Ce=0,Ae=b[r(525)];Ce<Ae;Ce++)this[r(1131)][A+Ce]=b[Ce];this[r(383)]++,b=null,console[r(1590)](r(1083)+this[r(383)])}this[r(664)]&&this[r(383)]>=WRITE_PCM_NUM&&(console.log("download"+WRITE_PCM_NUM+r(1532)),e=new Uint8Array(this[r(1131)]),this[r(1163)](e,"AudioResampleData.data"),this[r(1131)][r(387)](0,this[r(1131)][r(525)]),this.bWriteAudioResampleData=!1,this[r(383)]=0)}}]),si}());window[R(1304)]=function(oe,si,Ge){var u=R,s={};s[u(1290)]=Tt.HEAP32[si>>2],s[u(758)]=Tt.HEAP32[si+4>>2],s[u(1148)]=Tt.HEAP32[si+8>>2],s.dataLength=Tt[u(1039)][si+12>>2],s[u(1567)]=Tt[u(1039)][si+16>>2],s[u(1592)]=new Uint8Array(s[u(596)]),s.additionDataBuffer[u(483)](Tt[u(447)][u(350)](s[u(1567)],s[u(1567)]+s[u(596)])),ir[Ge][oe].addtionCallBackFun!=null&&ir[Ge][oe][u(367)](s)},window[R(337)]=function(oe,si,Ge,u,s){var e=R,r={};r[e(1511)]=si,r[e(1049)]=Ge,r.timeStamp=u,ir[s][oe].displayCallBackFun!=null&&ir[s][oe][e(1327)](r)},window[R(580)]=function(oe,si,Ge,u,s,e){var r=R,b={};b[r(798)]=oe,b.Data=si,b.isize=Ge,b[r(901)]=u,b[r(466)]=s,ir[e][oe].decCallBackFun!=null&&ir[e][oe][r(1164)](b)},window[R(376)]=function(oe,si,Ge){var u=R,s,e,r,b;ir[Ge][oe][u(448)]!=null&&(s=Tt[u(1039)][si>>2],e=Tt[u(1039)][si+4>>2],r=Tt[u(1039)][si+8>>2],b=Tt[u(1039)][si+12>>2],si=Tt[u(1039)][si+16>>2],ir[Ge][oe].runtimeCBFun(s,e,r,b,si))},window[R(836)]=function(oe,si){var Ge=R;ir[si][oe][Ge(409)]!=null&&ir[si][oe][Ge(409)]()},window.JSPlayM4_AudioANRCallBack=function(oe,si,Ge,u){var s=R;ir[u][oe][s(1453)](si)},window[R(1004)]=function(oe,si,Ge,u){var s=R;ir[u][oe][s(1069)](si)},window.JSPlayM4_AudioAfterDecodeCallBack=function(oe,si,Ge,u){var s=R;ir[u][oe][s(1192)](si)},window[R(698)]=function(oe,si,Ge,u){ir[u][oe].downloadAudioBeforeRenderData(si)},window[R(634)]=function(oe,si,Ge,u){ir[u][oe].downloadAudioResampleData(si)},window[R(1204)]=function(oe,si,Ge){ir[Ge][port].downloadRTPData(oe)}}(),et;function J(R){var He=re,G=Ye[R];return G!==void 0||(G=Ye[R]={exports:{}},De[R](G,G[He(509)],J)),G[He(509)]}var De,Ye,et});function L(){var re=["Too_Few_Arguments","CROP_BITMAP","message","CreateSemiSphere","__proto__","stFishParam","pPanoPTZPoints","streamOpenMode","displayCallBackFun","nFontBGNum","JSPlayM4_SetAudioDisplayBuf","JSPlayM4_SetSycGroup","ARRAY_BUFFER","Invalid_Library_Handle","pfuncCBIn","baseTimeStamp","renderCurStatus","_JSPlayM4_FEC_Enable","fTheta","FT_New_Memory_Face","_JSPlayM4_FEC_ResetCorrectType","hasOwnProperty","_JSPlayM4_PlaySound","%c 2D render not support FEC correct","nPTZRectNum",",bZoomEnable:","FEC_SetDisplayRegion","FECShowMode","SR_DE_NULL","bitmap_left","decoderObj","firstFrameCB","GetBMP","_invoke","_JSPlayM4_SetAntialias","4848423qxTZsW","FECSetViewParam","GetPanoPTZFloor","fPTZPositionY","decodeProcess","CompileProgram","FreeFECPort","UpdatePTZPosition","enableVertexAttribArray","getPrototypeOf","initTimer","regionSh","SR_DE_FISH_PANORAMA_FLOOR_180","downloadRTPData","Invalid_Slot_Handle","processData1","GetCanvasSize","channel","SR_SetPTZColor","AudioANR.data","_JSPlayM4_GetViewParam","FT_Init_FreeType","player","iterator result is not an object","type","SR_DE_FISH_PANORAMA_CEILING_360","hour","TRIANGLES",">>>>>yff>>>>> JSPlayM4_OpenStream 4:","depthMask","height","GetFECPort","tryEntries","0 is softDecode, 1 is hardDecoder,decodeEngine:","needReset","Hmtx_Table_Missing","Unlisted_Object","Generator is already running","isKeyFrame","MONOCHROME","pLineClrVertices","_GetSlowSpeed","FECSetBackCilling","174710DkIqze","nWndPort","JSPlayM4_OpenStream","SetNear","FT_Error_String","cloneNode","WebKitBlobBuilder","nSubPort","nPanoPTZPointNum","Too_Many_Caches","%c1>your browser is safari ,it does not support softV2.0 or hard decode","FreetypeWasmLoadedCB","JSPlayM4_FEC_GetViewParam","%c>>>>The Decoder.js path:%s","pUserOut","COMPOSITE","LIGHT","warn","object","decoderCurStatus","GetCropBMP","curTimeStamp","SR_DrawFontEx","_malloc","canvasHeight","right","7607872XSOPqC","displayFrameInfoCB","JSPlayM4_FEC_SetWnd","userAgent","opera","Too_Many_Function_Defs","cropBottom","Raw600.data","Set_Pixel_Size","JSPlayM4_InputData","canvasIDData","_sent","CMap_Table_Missing","GetPointPano2FishCeiling","round","concat","oVideoRenderHandle","iAudioAfDecOUTFrameNum","%c1>your browser is Firefox ,it only support soft decode","AudioBeforeRender.data","deleteBuffer","cropLeft","NO_AUTOHINT","_resetRenderTimer","curstatus","Invalid_Table","Invalid_Post_Table","createBuffer","iFECZoomNum","JSPlayM4_SetVolume","downloadAudioANRData","width","bWriteAudioANRData","iAudioBeRenOUTFrameNum","_ConvertDisplayEffect","stPTZParam","pRectPoints","Missing_Module","getValue","audioBefDecBuffer","curStatus","color: green","download ANR Decode AudioData FrameNum:","JSPlayM4_SetDisplayBuf","bWriteData","flush","iFECRatio_y","deleteTexture","Invalid_Composite","rval","FLOAT","pstFontColor",`
attribute vec3 xy;
attribute vec2 uv;
varying highp vec2 v_uv;
void main(void) {
  gl_Position = vec4(xy, 1.0);
  // Map vertex coordinates (-1 to +1) to UV coordinates (0 to 1).
  // UV coordinates are Y-flipped relative to vertex coordinates.
  //v_uv = vec2((1.0 + xy.x) / 2.0, (1.0 - xy.y) / 2.0);
  v_uv = uv;
}
`,"stop","FECSetParam","break","_bind","InitDisplay","Invalid_Argument","finallyLoc","SR_Init","_JSPlayM4_SetDemuxModel","fAngle","SetPTZColor","BlobBuilder","fAspect","style_name","emCorrectType","nFECPort","transform","Raster_Overflow","_JSPlayM4_GetCropJPEG","Debug_OpCode","max_advance_width","chrome","displayBuf","_JSPlayM4_SetDecodeERC","underflow","displayWidth","abs","toString","GetPTZFragmentPoints","fFar","Too_Many_Instruction_Defs","default","JSPlayM4_SetStreamOpenMode","JSPlayM4_GetCanvasSize","avc1.","yuvData","pRender","Invalid_Stream_Seek","createTexture","method","resetTimer","bOrtho","num_faces","JSPlayM4_SetFrameInfoCallBack","sent","SR_DrawLinesEx","FreetypeLibHandle","writeArrayToMemory","pSemiSphereTex","suspendedYield","NO_SCALE","this.audioBeRenOUTBuffer","iterator","%c SR_AddSubPort error subport:%d","audioBeRenOUTBuffer","href","this.audioResampleBuffer","JSPlayM4_DownloadData","Raster_Corrupted",`
    varying highp vec2 v_uv;
    uniform sampler2D texture;
    void main(void) {
        gl_FragColor = texture2D(texture, v_uv);
    }
`,"function","decodeQueueSize","SR_ERR_CALL_ORDER","glLineTexBuffer","sqrt","uniformMatrix4fv","nJpegDataSize","IGNORE_TRANSFORM","values","inputData","createElement","JSPlayM4_GetJPEG","resolve","webgl2","Invalid_Frame_Read","SR_SetPTZPort","cropRight","_JSPlayM4_SetVideoRawDataCallBack","iInputMaxBufSize","bitmap","executing","JSPlayM4_SetAdditionDataCallBack","toLowerCase","bWriteAudioBeforeRender","Table_Missing","FirstFrame","JSPlayM4_SetDecodeThreadNum","AudioAfterDecode.data","SetDecodeFrameType","oVideoPlayCtrl","nSemiSpherePosSize","pData","@@iterator","frameBuffers","nFontHeight","nSurfaceTexture",">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine：","linkProgram","JSPlayM4_NeedReset","fLeft","JSPlayM4_FEC_GetPort","SR_Destroy","FEC_GetViewParam","clearDecoderObjBuffer","fZoom","vecUp","FEC_Disable","FT_Library_Version","frameDisplayWidth","MouseEvents","function a0_0x1593(_0x3ac32f,_0x2aab05){var _0xd9f682=a0_0xd9f6();return a0_0x1593=function(_0x1593c7,_0x596b7f){_0x1593c7=_0x1593c7-0x1cd;var _0x58f871=_0xd9f682[_0x1593c7];return _0x58f871;},a0_0x1593(_0x3ac32f,_0x2aab05);}(function(_0xff34d7,_0x5d32c1){var _0x135cc6=a0_0x1593,_0x177edd=_0xff34d7();while(!![]){try{var _0x399e07=parseInt(_0x135cc6(0x4be))/0x1*(parseInt(_0x135cc6(0x228))/0x2)+parseInt(_0x135cc6(0x3d3))/0x3+parseInt(_0x135cc6(0x2a8))/0x4*(-parseInt(_0x135cc6(0x517))/0x5)+parseInt(_0x135cc6(0x3f1))/0x6+-parseInt(_0x135cc6(0x2ed))/0x7+-parseInt(_0x135cc6(0x1ea))/0x8*(parseInt(_0x135cc6(0x45e))/0x9)+parseInt(_0x135cc6(0x48c))/0xa;if(_0x399e07===_0x5d32c1)break;else _0x177edd['push'](_0x177edd['shift']());}catch(_0x317d5a){_0x177edd['push'](_0x177edd['shift']());}}}(a0_0xd9f6,0xed8e4),((()=>{var _0x52413b=a0_0x1593,_0x38a18c={0x3d:(_0x26085d,_0xd23b54,_0x356d53)=>{var _0x211884=a0_0x1593,_0x40e387=_0x356d53(0x2ba)[_0x211884(0x54c)];function _0x538fb2(){'use strict';var _0x5c588c=_0x211884;_0x26085d[_0x5c588c(0x237)]=function(){return _0x1cf6ba;},_0x26085d[_0x5c588c(0x237)][_0x5c588c(0x4fb)]=!0x0,_0x26085d['exports']['default']=_0x26085d[_0x5c588c(0x237)];var _0x1cf6ba={},_0x3249e2=Object['prototype'],_0x435078=_0x3249e2[_0x5c588c(0x246)],_0x2c4240='function'==typeof Symbol?Symbol:{},_0x8f6e32=_0x2c4240['iterator']||_0x5c588c(0x438),_0x56c7d0=_0x2c4240['asyncIterator']||_0x5c588c(0x2a4),_0x51a062=_0x2c4240[_0x5c588c(0x40d)]||_0x5c588c(0x356);function _0x533e29(_0x247309,_0x33c917,_0x41f390){var _0x584901=_0x5c588c;return Object[_0x584901(0x256)](_0x247309,_0x33c917,{'value':_0x41f390,'enumerable':!0x0,'configurable':!0x0,'writable':!0x0}),_0x247309[_0x33c917];}try{_0x533e29({},'');}catch(_0x43fa3a){_0x533e29=function(_0x4b14f5,_0x1cab2a,_0x18eb3e){return _0x4b14f5[_0x1cab2a]=_0x18eb3e;};}function _0x291ae3(_0x45b4e,_0xdf225f,_0x1a71fe,_0x1f3a84){var _0x100d17=_0x5c588c,_0x5f70f1,_0x326a7d,_0x3bf0ec,_0x346ee7,_0xdf225f=_0xdf225f&&_0xdf225f['prototype']instanceof _0x20fb7f?_0xdf225f:_0x20fb7f,_0xdf225f=Object[_0x100d17(0x3e9)](_0xdf225f[_0x100d17(0x532)]),_0x1f3a84=new _0xe43bcf(_0x1f3a84||[]);return _0xdf225f[_0x100d17(0x226)]=(_0x5f70f1=_0x45b4e,_0x326a7d=_0x1a71fe,_0x3bf0ec=_0x1f3a84,_0x346ee7='suspendedStart',function(_0xb4f0a9,_0x3f6c2e){var _0x3d6bd7=_0x100d17;if(_0x3d6bd7(0x223)===_0x346ee7)throw new Error(_0x3d6bd7(0x3e8));if(_0x3d6bd7(0x240)===_0x346ee7){if(_0x3d6bd7(0x21d)===_0xb4f0a9)throw _0x3f6c2e;return _0x5245cd();}for(_0x3bf0ec[_0x3d6bd7(0x47e)]=_0xb4f0a9,_0x3bf0ec[_0x3d6bd7(0x42f)]=_0x3f6c2e;;){var _0x219670=_0x3bf0ec['delegate'];if(_0x219670){_0x219670=function _0x37b610(_0x415971,_0x4ef61a){var _0x2b5cf6=_0x3d6bd7,_0x4f4eec=_0x415971['iterator'][_0x4ef61a['method']];if(void 0x0===_0x4f4eec){if(_0x4ef61a['delegate']=null,_0x2b5cf6(0x21d)===_0x4ef61a[_0x2b5cf6(0x47e)]){if(_0x415971[_0x2b5cf6(0x29a)][_0x2b5cf6(0x26c)]&&(_0x4ef61a[_0x2b5cf6(0x47e)]=_0x2b5cf6(0x26c),_0x4ef61a['arg']=void 0x0,_0x37b610(_0x415971,_0x4ef61a),_0x2b5cf6(0x21d)===_0x4ef61a[_0x2b5cf6(0x47e)]))return _0x2e601f;_0x4ef61a[_0x2b5cf6(0x47e)]=_0x2b5cf6(0x21d),_0x4ef61a[_0x2b5cf6(0x42f)]=new TypeError(_0x2b5cf6(0x2db));}return _0x2e601f;}_0x4f4eec=_0x438e11(_0x4f4eec,_0x415971[_0x2b5cf6(0x29a)],_0x4ef61a[_0x2b5cf6(0x42f)]);if('throw'===_0x4f4eec[_0x2b5cf6(0x50c)])return _0x4ef61a['method']='throw',_0x4ef61a[_0x2b5cf6(0x42f)]=_0x4f4eec['arg'],_0x4ef61a['delegate']=null,_0x2e601f;return _0x4f4eec=_0x4f4eec['arg'],_0x4f4eec?_0x4f4eec[_0x2b5cf6(0x3e6)]?(_0x4ef61a[_0x415971[_0x2b5cf6(0x53b)]]=_0x4f4eec['value'],_0x4ef61a[_0x2b5cf6(0x500)]=_0x415971['nextLoc'],_0x2b5cf6(0x26c)!==_0x4ef61a['method']&&(_0x4ef61a[_0x2b5cf6(0x47e)]=_0x2b5cf6(0x500),_0x4ef61a['arg']=void 0x0),_0x4ef61a[_0x2b5cf6(0x290)]=null,_0x2e601f):_0x4f4eec:(_0x4ef61a['method']='throw',_0x4ef61a['arg']=new TypeError('iterator\\x20result\\x20is\\x20not\\x20an\\x20object'),_0x4ef61a[_0x2b5cf6(0x290)]=null,_0x2e601f);}(_0x219670,_0x3bf0ec);if(_0x219670){if(_0x219670===_0x2e601f)continue;return _0x219670;}}if(_0x3d6bd7(0x500)===_0x3bf0ec[_0x3d6bd7(0x47e)])_0x3bf0ec['sent']=_0x3bf0ec[_0x3d6bd7(0x2e5)]=_0x3bf0ec[_0x3d6bd7(0x42f)];else{if(_0x3d6bd7(0x21d)===_0x3bf0ec[_0x3d6bd7(0x47e)]){if('suspendedStart'===_0x346ee7)throw _0x346ee7=_0x3d6bd7(0x240),_0x3bf0ec['arg'];_0x3bf0ec[_0x3d6bd7(0x201)](_0x3bf0ec['arg']);}else _0x3d6bd7(0x26c)===_0x3bf0ec[_0x3d6bd7(0x47e)]&&_0x3bf0ec[_0x3d6bd7(0x413)]('return',_0x3bf0ec[_0x3d6bd7(0x42f)]);}_0x346ee7=_0x3d6bd7(0x223),_0x219670=_0x438e11(_0x5f70f1,_0x326a7d,_0x3bf0ec);if(_0x3d6bd7(0x2fe)===_0x219670[_0x3d6bd7(0x50c)]){if(_0x346ee7=_0x3bf0ec[_0x3d6bd7(0x3e6)]?'completed':_0x3d6bd7(0x499),_0x219670[_0x3d6bd7(0x42f)]===_0x2e601f)continue;return{'value':_0x219670[_0x3d6bd7(0x42f)],'done':_0x3bf0ec[_0x3d6bd7(0x3e6)]};}_0x3d6bd7(0x21d)===_0x219670['type']&&(_0x346ee7='completed',_0x3bf0ec[_0x3d6bd7(0x47e)]='throw',_0x3bf0ec['arg']=_0x219670[_0x3d6bd7(0x42f)]);}}),_0xdf225f;}function _0x438e11(_0xf71ceb,_0x2421fb,_0x119de7){var _0x186f7b=_0x5c588c;try{return{'type':_0x186f7b(0x2fe),'arg':_0xf71ceb[_0x186f7b(0x311)](_0x2421fb,_0x119de7)};}catch(_0x2c8b23){return{'type':_0x186f7b(0x21d),'arg':_0x2c8b23};}}_0x1cf6ba[_0x5c588c(0x398)]=_0x291ae3;var _0x2e601f={};function _0x20fb7f(){}function _0x556fec(){}function _0x156e85(){}var _0x2c4240={},_0x133298=(_0x533e29(_0x2c4240,_0x8f6e32,function(){return this;}),Object[_0x5c588c(0x24d)]),_0x133298=_0x133298&&_0x133298(_0x133298(_0x3a7058([]))),_0x3ab301=(_0x133298&&_0x133298!==_0x3249e2&&_0x435078[_0x5c588c(0x311)](_0x133298,_0x8f6e32)&&(_0x2c4240=_0x133298),_0x156e85[_0x5c588c(0x532)]=_0x20fb7f[_0x5c588c(0x532)]=Object[_0x5c588c(0x3e9)](_0x2c4240));function _0x5bbc10(_0x2aba93){var _0x5bff5e=_0x5c588c;[_0x5bff5e(0x500),_0x5bff5e(0x21d),_0x5bff5e(0x26c)][_0x5bff5e(0x247)](function(_0x5d214d){_0x533e29(_0x2aba93,_0x5d214d,function(_0x1c7ef4){return this['_invoke'](_0x5d214d,_0x1c7ef4);});});}function _0x15ae5d(_0x14f141,_0x563b13){var _0x355791=_0x5c588c,_0x4f1245;this[_0x355791(0x226)]=function(_0x3c097a,_0x1edb24){var _0x32218f=_0x355791;function _0x49214c(){return new _0x563b13(function(_0xdc74ce,_0x1322d2){!function _0x226bb5(_0x5d0dc3,_0x257a6a,_0x32a677,_0x30297a){var _0x3af315=a0_0x1593,_0x1d85fe,_0x5d0dc3=_0x438e11(_0x14f141[_0x5d0dc3],_0x14f141,_0x257a6a);if('throw'!==_0x5d0dc3['type'])return(_0x257a6a=(_0x1d85fe=_0x5d0dc3[_0x3af315(0x42f)])[_0x3af315(0x38a)])&&'object'==_0x40e387(_0x257a6a)&&_0x435078['call'](_0x257a6a,'__await')?_0x563b13[_0x3af315(0x51c)](_0x257a6a[_0x3af315(0x39f)])[_0x3af315(0x39e)](function(_0x3dd567){var _0x524ce3=_0x3af315;_0x226bb5(_0x524ce3(0x500),_0x3dd567,_0x32a677,_0x30297a);},function(_0x4eb35c){var _0x361cb4=_0x3af315;_0x226bb5(_0x361cb4(0x21d),_0x4eb35c,_0x32a677,_0x30297a);}):_0x563b13[_0x3af315(0x51c)](_0x257a6a)[_0x3af315(0x39e)](function(_0x321ee0){var _0x3c964e=_0x3af315;_0x1d85fe[_0x3c964e(0x38a)]=_0x321ee0,_0x32a677(_0x1d85fe);},function(_0x23c1ea){var _0x5498bf=_0x3af315;return _0x226bb5(_0x5498bf(0x21d),_0x23c1ea,_0x32a677,_0x30297a);});_0x30297a(_0x5d0dc3[_0x3af315(0x42f)]);}(_0x3c097a,_0x1edb24,_0xdc74ce,_0x1322d2);});}return _0x4f1245=_0x4f1245?_0x4f1245[_0x32218f(0x39e)](_0x49214c,_0x49214c):_0x49214c();};}function _0x7a42d7(_0x1f7a50){var _0x2ca759=_0x5c588c,_0x42011a={'tryLoc':_0x1f7a50[0x0]};0x1 in _0x1f7a50&&(_0x42011a['catchLoc']=_0x1f7a50[0x1]),0x2 in _0x1f7a50&&(_0x42011a['finallyLoc']=_0x1f7a50[0x2],_0x42011a[_0x2ca759(0x4a9)]=_0x1f7a50[0x3]),this[_0x2ca759(0x1e7)][_0x2ca759(0x51d)](_0x42011a);}function _0x148345(_0x2ca036){var _0x1131b6=_0x5c588c,_0x28960b=_0x2ca036[_0x1131b6(0x42e)]||{};_0x28960b['type']=_0x1131b6(0x2fe),delete _0x28960b[_0x1131b6(0x42f)],_0x2ca036[_0x1131b6(0x42e)]=_0x28960b;}function _0xe43bcf(_0x3726b4){var _0x479902=_0x5c588c;this[_0x479902(0x1e7)]=[{'tryLoc':_0x479902(0x4ac)}],_0x3726b4[_0x479902(0x247)](_0x7a42d7,this),this[_0x479902(0x33e)](!0x0);}function _0x3a7058(_0x3ae540){var _0x40d738=_0x5c588c;if(_0x3ae540){var _0x4900d4,_0x24da41=_0x3ae540[_0x8f6e32];if(_0x24da41)return _0x24da41['call'](_0x3ae540);if(_0x40d738(0x3d0)==typeof _0x3ae540[_0x40d738(0x500)])return _0x3ae540;if(!isNaN(_0x3ae540['length']))return _0x4900d4=-0x1,(_0x24da41=function _0x271e97(){var _0x6b212b=_0x40d738;for(;++_0x4900d4<_0x3ae540[_0x6b212b(0x4f1)];)if(_0x435078['call'](_0x3ae540,_0x4900d4))return _0x271e97[_0x6b212b(0x38a)]=_0x3ae540[_0x4900d4],_0x271e97[_0x6b212b(0x3e6)]=!0x1,_0x271e97;return _0x271e97[_0x6b212b(0x38a)]=void 0x0,_0x271e97[_0x6b212b(0x3e6)]=!0x0,_0x271e97;})[_0x40d738(0x500)]=_0x24da41;}return{'next':_0x5245cd};}function _0x5245cd(){return{'value':void 0x0,'done':!0x0};}return _0x533e29(_0x3ab301,_0x5c588c(0x2c2),_0x556fec[_0x5c588c(0x532)]=_0x156e85),_0x533e29(_0x156e85,_0x5c588c(0x2c2),_0x556fec),_0x556fec['displayName']=_0x533e29(_0x156e85,_0x51a062,_0x5c588c(0x1f1)),_0x1cf6ba[_0x5c588c(0x49f)]=function(_0x152c96){var _0x1889ed=_0x5c588c;return _0x152c96='function'==typeof _0x152c96&&_0x152c96[_0x1889ed(0x2c2)],!!_0x152c96&&(_0x152c96===_0x556fec||_0x1889ed(0x1f1)===(_0x152c96[_0x1889ed(0x3a3)]||_0x152c96[_0x1889ed(0x37c)]));},_0x1cf6ba[_0x5c588c(0x230)]=function(_0x18acf3){var _0x34a244=_0x5c588c;return Object[_0x34a244(0x437)]?Object[_0x34a244(0x437)](_0x18acf3,_0x156e85):(_0x18acf3[_0x34a244(0x515)]=_0x156e85,_0x533e29(_0x18acf3,_0x51a062,_0x34a244(0x1f1))),_0x18acf3[_0x34a244(0x532)]=Object['create'](_0x3ab301),_0x18acf3;},_0x1cf6ba['awrap']=function(_0xb9287a){return{'__await':_0xb9287a};},_0x5bbc10(_0x15ae5d[_0x5c588c(0x532)]),_0x533e29(_0x15ae5d[_0x5c588c(0x532)],_0x56c7d0,function(){return this;}),_0x1cf6ba['AsyncIterator']=_0x15ae5d,_0x1cf6ba[_0x5c588c(0x4fd)]=function(_0xa97d80,_0x103eec,_0x45af82,_0x312a80,_0x53f898){var _0x48ad8f=_0x5c588c;void 0x0===_0x53f898&&(_0x53f898=Promise);var _0x2d5244=new _0x15ae5d(_0x291ae3(_0xa97d80,_0x103eec,_0x45af82,_0x312a80),_0x53f898);return _0x1cf6ba[_0x48ad8f(0x49f)](_0x103eec)?_0x2d5244:_0x2d5244[_0x48ad8f(0x500)]()[_0x48ad8f(0x39e)](function(_0x1c8f28){var _0x3c8bc4=_0x48ad8f;return _0x1c8f28[_0x3c8bc4(0x3e6)]?_0x1c8f28['value']:_0x2d5244[_0x3c8bc4(0x500)]();});},_0x5bbc10(_0x3ab301),_0x533e29(_0x3ab301,_0x51a062,'Generator'),_0x533e29(_0x3ab301,_0x8f6e32,function(){return this;}),_0x533e29(_0x3ab301,_0x5c588c(0x258),function(){var _0xdaaddc=_0x5c588c;return _0xdaaddc(0x531);}),_0x1cf6ba[_0x5c588c(0x378)]=function(_0x3cbc03){var _0x58a5a9,_0x591a7f=[];for(_0x58a5a9 in _0x3cbc03)_0x591a7f['push'](_0x58a5a9);return _0x591a7f['reverse'](),function _0x435214(){var _0x6d544d=a0_0x1593;for(;_0x591a7f[_0x6d544d(0x4f1)];){var _0x9effb9=_0x591a7f[_0x6d544d(0x382)]();if(_0x9effb9 in _0x3cbc03)return _0x435214[_0x6d544d(0x38a)]=_0x9effb9,_0x435214['done']=!0x1,_0x435214;}return _0x435214[_0x6d544d(0x3e6)]=!0x0,_0x435214;};},_0x1cf6ba[_0x5c588c(0x225)]=_0x3a7058,_0xe43bcf[_0x5c588c(0x532)]={'constructor':_0xe43bcf,'reset':function(_0x4f715d){var _0x14334b=_0x5c588c;if(this[_0x14334b(0x4e1)]=0x0,this[_0x14334b(0x500)]=0x0,this[_0x14334b(0x20c)]=this[_0x14334b(0x2e5)]=void 0x0,this[_0x14334b(0x3e6)]=!0x1,this[_0x14334b(0x290)]=null,this[_0x14334b(0x47e)]='next',this['arg']=void 0x0,this['tryEntries'][_0x14334b(0x247)](_0x148345),!_0x4f715d){for(var _0xed6f80 in this)'t'===_0xed6f80['charAt'](0x0)&&_0x435078[_0x14334b(0x311)](this,_0xed6f80)&&!isNaN(+_0xed6f80[_0x14334b(0x28b)](0x1))&&(this[_0xed6f80]=void 0x0);}},'stop':function(){var _0x214cb4=_0x5c588c;this[_0x214cb4(0x3e6)]=!0x0;var _0x52d9e5=this[_0x214cb4(0x1e7)][0x0][_0x214cb4(0x42e)];if('throw'===_0x52d9e5[_0x214cb4(0x50c)])throw _0x52d9e5[_0x214cb4(0x42f)];return this[_0x214cb4(0x200)];},'dispatchException':function(_0x591ddf){var _0x5e4901=_0x5c588c;if(this[_0x5e4901(0x3e6)])throw _0x591ddf;var _0x4f45db=this;function _0x2fbb33(_0x10bfbb,_0x48391b){var _0x51472b=_0x5e4901;return _0x370176[_0x51472b(0x50c)]='throw',_0x370176[_0x51472b(0x42f)]=_0x591ddf,_0x4f45db[_0x51472b(0x500)]=_0x10bfbb,_0x48391b&&(_0x4f45db[_0x51472b(0x47e)]=_0x51472b(0x500),_0x4f45db[_0x51472b(0x42f)]=void 0x0),!!_0x48391b;}for(var _0x59331d=this[_0x5e4901(0x1e7)][_0x5e4901(0x4f1)]-0x1;0x0<=_0x59331d;--_0x59331d){var _0x56f9ca=this[_0x5e4901(0x1e7)][_0x59331d],_0x370176=_0x56f9ca[_0x5e4901(0x42e)];if('root'===_0x56f9ca[_0x5e4901(0x381)])return _0x2fbb33(_0x5e4901(0x30a));if(_0x56f9ca[_0x5e4901(0x381)]<=this['prev']){var _0x45a8d7=_0x435078[_0x5e4901(0x311)](_0x56f9ca,'catchLoc'),_0x3b24bf=_0x435078[_0x5e4901(0x311)](_0x56f9ca,'finallyLoc');if(_0x45a8d7&&_0x3b24bf){if(this[_0x5e4901(0x4e1)]<_0x56f9ca[_0x5e4901(0x325)])return _0x2fbb33(_0x56f9ca[_0x5e4901(0x325)],!0x0);if(this['prev']<_0x56f9ca['finallyLoc'])return _0x2fbb33(_0x56f9ca[_0x5e4901(0x24e)]);}else{if(_0x45a8d7){if(this[_0x5e4901(0x4e1)]<_0x56f9ca[_0x5e4901(0x325)])return _0x2fbb33(_0x56f9ca[_0x5e4901(0x325)],!0x0);}else{if(!_0x3b24bf)throw new Error('try\\x20statement\\x20without\\x20catch\\x20or\\x20finally');if(this[_0x5e4901(0x4e1)]<_0x56f9ca['finallyLoc'])return _0x2fbb33(_0x56f9ca['finallyLoc']);}}}}},'abrupt':function(_0x56ed36,_0x561db8){var _0x57d8b1=_0x5c588c;for(var _0x1b83ed=this['tryEntries'][_0x57d8b1(0x4f1)]-0x1;0x0<=_0x1b83ed;--_0x1b83ed){var _0x559693=this[_0x57d8b1(0x1e7)][_0x1b83ed];if(_0x559693[_0x57d8b1(0x381)]<=this[_0x57d8b1(0x4e1)]&&_0x435078['call'](_0x559693,_0x57d8b1(0x24e))&&this['prev']<_0x559693[_0x57d8b1(0x24e)]){var _0x323966=_0x559693;break;}}var _0x31dc02=(_0x323966=_0x323966&&(_0x57d8b1(0x335)===_0x56ed36||'continue'===_0x56ed36)&&_0x323966[_0x57d8b1(0x381)]<=_0x561db8&&_0x561db8<=_0x323966[_0x57d8b1(0x24e)]?null:_0x323966)?_0x323966[_0x57d8b1(0x42e)]:{};return _0x31dc02[_0x57d8b1(0x50c)]=_0x56ed36,_0x31dc02['arg']=_0x561db8,_0x323966?(this[_0x57d8b1(0x47e)]=_0x57d8b1(0x500),this[_0x57d8b1(0x500)]=_0x323966[_0x57d8b1(0x24e)],_0x2e601f):this[_0x57d8b1(0x4bd)](_0x31dc02);},'complete':function(_0x2f4825,_0x30f25f){var _0x5dad5f=_0x5c588c;if('throw'===_0x2f4825['type'])throw _0x2f4825[_0x5dad5f(0x42f)];return _0x5dad5f(0x335)===_0x2f4825[_0x5dad5f(0x50c)]||'continue'===_0x2f4825[_0x5dad5f(0x50c)]?this[_0x5dad5f(0x500)]=_0x2f4825[_0x5dad5f(0x42f)]:_0x5dad5f(0x26c)===_0x2f4825[_0x5dad5f(0x50c)]?(this[_0x5dad5f(0x200)]=this[_0x5dad5f(0x42f)]=_0x2f4825['arg'],this[_0x5dad5f(0x47e)]='return',this['next']=_0x5dad5f(0x30a)):_0x5dad5f(0x2fe)===_0x2f4825[_0x5dad5f(0x50c)]&&_0x30f25f&&(this[_0x5dad5f(0x500)]=_0x30f25f),_0x2e601f;},'finish':function(_0x2ba9b4){var _0x32fbaf=_0x5c588c;for(var _0x5e9c76=this[_0x32fbaf(0x1e7)][_0x32fbaf(0x4f1)]-0x1;0x0<=_0x5e9c76;--_0x5e9c76){var _0x5565a5=this[_0x32fbaf(0x1e7)][_0x5e9c76];if(_0x5565a5[_0x32fbaf(0x24e)]===_0x2ba9b4)return this[_0x32fbaf(0x4bd)](_0x5565a5[_0x32fbaf(0x42e)],_0x5565a5[_0x32fbaf(0x4a9)]),_0x148345(_0x5565a5),_0x2e601f;}},'catch':function(_0x215f9d){var _0x18ce69=_0x5c588c;for(var _0x37101f=this[_0x18ce69(0x1e7)][_0x18ce69(0x4f1)]-0x1;0x0<=_0x37101f;--_0x37101f){var _0x4418a7,_0x3a1b7e,_0x2ea67a=this[_0x18ce69(0x1e7)][_0x37101f];if(_0x2ea67a['tryLoc']===_0x215f9d)return _0x18ce69(0x21d)===(_0x4418a7=_0x2ea67a[_0x18ce69(0x42e)])[_0x18ce69(0x50c)]&&(_0x3a1b7e=_0x4418a7[_0x18ce69(0x42f)],_0x148345(_0x2ea67a)),_0x3a1b7e;}throw new Error('illegal\\x20catch\\x20attempt');},'delegateYield':function(_0x42863c,_0x5e73cc,_0x37ec2c){var _0x2755d1=_0x5c588c;return this[_0x2755d1(0x290)]={'iterator':_0x3a7058(_0x42863c),'resultName':_0x5e73cc,'nextLoc':_0x37ec2c},_0x2755d1(0x500)===this[_0x2755d1(0x47e)]&&(this[_0x2755d1(0x42f)]=void 0x0),_0x2e601f;}},_0x1cf6ba;}_0x26085d[_0x211884(0x237)]=_0x538fb2,_0x26085d[_0x211884(0x237)][_0x211884(0x4fb)]=!0x0,_0x26085d['exports'][_0x211884(0x54c)]=_0x26085d[_0x211884(0x237)];},0x2ba:_0xa7af5a=>{var _0x293180=a0_0x1593;function _0x4c4ea4(_0x1ea86b){var _0xe63ac7=a0_0x1593;return _0xa7af5a[_0xe63ac7(0x237)]=_0x4c4ea4=_0xe63ac7(0x3d0)==typeof Symbol&&'symbol'==typeof Symbol[_0xe63ac7(0x29a)]?function(_0x23fbef){return typeof _0x23fbef;}:function(_0x2d9276){var _0x399616=_0xe63ac7;return _0x2d9276&&_0x399616(0x3d0)==typeof Symbol&&_0x2d9276[_0x399616(0x2c2)]===Symbol&&_0x2d9276!==Symbol[_0x399616(0x532)]?_0x399616(0x44e):typeof _0x2d9276;},_0xa7af5a[_0xe63ac7(0x237)][_0xe63ac7(0x4fb)]=!0x0,_0xa7af5a[_0xe63ac7(0x237)][_0xe63ac7(0x54c)]=_0xa7af5a[_0xe63ac7(0x237)],_0x4c4ea4(_0x1ea86b);}_0xa7af5a['exports']=_0x4c4ea4,_0xa7af5a[_0x293180(0x237)][_0x293180(0x4fb)]=!0x0,_0xa7af5a[_0x293180(0x237)][_0x293180(0x54c)]=_0xa7af5a[_0x293180(0x237)];},0x2af:(_0x44ccaa,_0x169265,_0x2ebdd7)=>{var _0x50498b=a0_0x1593;_0x2ebdd7=_0x2ebdd7(0x3d)(),_0x44ccaa['exports']=_0x2ebdd7;try{regeneratorRuntime=_0x2ebdd7;}catch(_0x33d90f){'object'==typeof globalThis?globalThis[_0x50498b(0x4e9)]=_0x2ebdd7:Function('r',_0x50498b(0x212))(_0x2ebdd7);}}},_0x55ce50={};function _0x165a0a(_0x595555){var _0x69f8c4=a0_0x1593,_0x4d8375=_0x55ce50[_0x595555];if(void 0x0!==_0x4d8375)return _0x4d8375[_0x69f8c4(0x237)];return _0x4d8375=_0x55ce50[_0x595555]={'exports':{}},(_0x38a18c[_0x595555](_0x4d8375,_0x4d8375['exports'],_0x165a0a),_0x4d8375[_0x69f8c4(0x237)]);}_0x165a0a['n']=_0x43cacc=>{var _0x464277=a0_0x1593,_0x395b2d=_0x43cacc&&_0x43cacc[_0x464277(0x4fb)]?()=>_0x43cacc[_0x464277(0x54c)]:()=>_0x43cacc;return _0x165a0a['d'](_0x395b2d,{'a':_0x395b2d}),_0x395b2d;},_0x165a0a['d']=(_0x2cf797,_0xdffbaa)=>{var _0x13dbdc=a0_0x1593;for(var _0x392600 in _0xdffbaa)_0x165a0a['o'](_0xdffbaa,_0x392600)&&!_0x165a0a['o'](_0x2cf797,_0x392600)&&Object[_0x13dbdc(0x256)](_0x2cf797,_0x392600,{'enumerable':!0x0,'get':_0xdffbaa[_0x392600]});},_0x165a0a['o']=(_0x10deda,_0x4a6183)=>Object['prototype']['hasOwnProperty'][_0x52413b(0x311)](_0x10deda,_0x4a6183),((()=>{'use strict';var _0x99d5a2=_0x52413b;function _0x160316(_0x57d44c,_0x537f90){var _0x11fb93=a0_0x1593;if(!(_0x57d44c instanceof _0x537f90))throw new TypeError(_0x11fb93(0x3c9));}function _0x3a005f(_0x11ba05,_0x55594e){var _0x19292f=a0_0x1593;for(var _0x5cf8fa=0x0;_0x5cf8fa<_0x55594e[_0x19292f(0x4f1)];_0x5cf8fa++){var _0x1bd792=_0x55594e[_0x5cf8fa];_0x1bd792[_0x19292f(0x3ad)]=_0x1bd792['enumerable']||!0x1,_0x1bd792[_0x19292f(0x2f2)]=!0x0,_0x19292f(0x38a)in _0x1bd792&&(_0x1bd792['writable']=!0x0),Object[_0x19292f(0x256)](_0x11ba05,_0x1bd792[_0x19292f(0x543)],_0x1bd792);}}function _0x5a3b91(_0x333810,_0x4fca5d,_0x5c4de0){var _0x21a363=a0_0x1593;return _0x4fca5d&&_0x3a005f(_0x333810[_0x21a363(0x532)],_0x4fca5d),_0x5c4de0&&_0x3a005f(_0x333810,_0x5c4de0),Object[_0x21a363(0x256)](_0x333810,_0x21a363(0x532),{'writable':!0x1}),_0x333810;}var _0x5a306e=0x501,_0xa54871=0x502,_0x332ff6=0x505,_0x127bf2=0x507,_0x36832c=0x508,_0x566fd6=0x509,_0x14f925=0x516,_0x40926f=0x1,_0x3b95c4=0x2,_0xf574bd=0x3,_0x462c41=0x0,_0x4ebb4e=0x100,_0x4beee9=0x200,_0x316080=0x300,_0x1ae667=0x400,_0x17c71b=0x500,_0x3ccddf=0x600,_0x1a4011=0x700,_0x396f7c=0x800,_0x11da1d=0x900,_0x5357b0=0xa00,_0x367f2=0x1,_0x168627=0x2,_0x142076=0x4,_0x2802b6=0x8,_0x42215a=0x10,_0x3db8be=0x20,_0x4c7866=(function(){var _0x3be5b4=a0_0x1593;function _0x5cccce(_0x487370,_0x245cd9,_0x4b1046){var _0x3a56b5=a0_0x1593;_0x160316(this,_0x5cccce),this[_0x3a56b5(0x36f)]=0x0,this[_0x3a56b5(0x483)]=0x0,this[_0x3a56b5(0x48e)]=null,this[_0x3a56b5(0x36c)]=!0x0,this[_0x3a56b5(0x541)]=[],this['underflow']=!0x0,this[_0x3a56b5(0x4b5)]=_0x487370,this[_0x3a56b5(0x4d9)]=0x1e,this[_0x3a56b5(0x373)]=!0x1,this[_0x3a56b5(0x52b)]=0x2,this[_0x3a56b5(0x274)]=!0x1,this[_0x3a56b5(0x2e4)]=!0x1,this[_0x3a56b5(0x319)]=_0x245cd9,this['output']=this[_0x3a56b5(0x255)][_0x3a56b5(0x336)](this),this[_0x3a56b5(0x4c5)]=this[_0x3a56b5(0x4c5)][_0x3a56b5(0x336)](this),(this[_0x3a56b5(0x4c3)]=null)!=_0x4b1046&&(this['player']=_0x4b1046);}return _0x5a3b91(_0x5cccce,[{'key':_0x3be5b4(0x217),'value':function(){var _0x1bfaa8=_0x3be5b4,_0x315f09;null==this['decoderObj']&&(_0x315f09={'output':this[_0x1bfaa8(0x255)],'error':this[_0x1bfaa8(0x4c5)]},this[_0x1bfaa8(0x48e)]=new VideoDecoder(_0x315f09)),this[_0x1bfaa8(0x53c)]&&(this[_0x1bfaa8(0x53c)]=!0x1,setTimeout(this[_0x1bfaa8(0x319)][_0x1bfaa8(0x24f)](),0x0)),this[_0x1bfaa8(0x52b)]=0x2,this[_0x1bfaa8(0x36c)]=!0x0;}},{'key':_0x3be5b4(0x2cd),'value':function(_0x4898e1,_0x25c383){var _0x4009ca=_0x3be5b4;null==this[_0x4009ca(0x48e)]||_0x4009ca(0x468)!=this[_0x4009ca(0x48e)][_0x4009ca(0x234)]&&!this[_0x4009ca(0x36c)]||this[_0x4009ca(0x445)](_0x4898e1,_0x25c383),_0x25c383[_0x4009ca(0x209)]&&this[_0x4009ca(0x49c)]();}},{'key':_0x3be5b4(0x23a),'value':function(_0x3a042f){var _0x274cca=_0x3be5b4;for(var _0x94f198=0x0,_0x3516a7=arguments[_0x274cca(0x4f1)],_0x1054db=new Array(0x1<_0x3516a7?_0x3516a7-0x1:0x0),_0x2593b4=0x1;_0x2593b4<_0x3516a7;_0x2593b4++)_0x1054db[_0x2593b4-0x1]=arguments[_0x2593b4];for(var _0x17b83d=0x0,_0x444519=_0x1054db;_0x17b83d<_0x444519[_0x274cca(0x4f1)];_0x17b83d++)_0x94f198+=_0x444519[_0x17b83d][_0x274cca(0x4f1)];for(var _0x395dc0=new _0x3a042f(_0x94f198),_0x4b4718=0x0,_0x38c4b2=0x0,_0x2b40e5=_0x1054db;_0x38c4b2<_0x2b40e5[_0x274cca(0x4f1)];_0x38c4b2++){var _0x1a97d3=_0x2b40e5[_0x38c4b2];_0x395dc0[_0x274cca(0x2d5)](_0x1a97d3,_0x4b4718),_0x4b4718+=_0x1a97d3[_0x274cca(0x4f1)];}return _0x395dc0;}},{'key':_0x3be5b4(0x2cb),'value':function(_0x25fe69){var _0x16b581=_0x3be5b4;for(var _0x3796c9=null,_0xe3042f=null,_0x4339ac=null,_0x4d9965=!0x1,_0x2d93e5=!0x1,_0x3aa0b8=0x0,_0x43f3af=0x0;_0x43f3af<_0x25fe69[_0x16b581(0x4f1)]-0x4;_0x43f3af++){if(0x0!=_0x25fe69[_0x43f3af]||0x0!=_0x25fe69[_0x43f3af+0x1]||0x0!=_0x25fe69[_0x43f3af+0x2]||0x1!=_0x25fe69[_0x43f3af+0x3]||0x67!=_0x25fe69[_0x43f3af+0x4]&&0x27!=_0x25fe69[_0x43f3af+0x4]||(0x0!=_0x43f3af?(_0x2d93e5=!0x0,_0x3796c9=_0x25fe69[_0x16b581(0x28b)](_0x43f3af),_0x3aa0b8=_0x43f3af):_0x3796c9=_0x25fe69),0x0==_0x25fe69[_0x43f3af]&&0x0==_0x25fe69[_0x43f3af+0x1]&&0x0==_0x25fe69[_0x43f3af+0x2]&&0x1==_0x25fe69[_0x43f3af+0x3]&&(0x9==_0x25fe69[_0x43f3af+0x4]||0x6==_0x25fe69[_0x43f3af+0x4])){if(null==_0x3796c9)continue;null==_0xe3042f&&(_0xe3042f=_0x25fe69[_0x16b581(0x28b)](_0x3aa0b8,_0x43f3af),_0x4d9965=!0x0);}if(0x0==_0x25fe69[_0x43f3af]&&0x0==_0x25fe69[_0x43f3af+0x1]&&0x0==_0x25fe69[_0x43f3af+0x2]&&0x1==_0x25fe69[_0x43f3af+0x3]&&(0x65==_0x25fe69[_0x43f3af+0x4]||0x25==_0x25fe69[_0x43f3af+0x4])){_0x4d9965&&(_0x4339ac=_0x25fe69[_0x16b581(0x28b)](_0x43f3af));break;}}return _0x4d9965?this[_0x16b581(0x23a)](Uint8Array,_0xe3042f,_0x4339ac):_0x2d93e5?_0x3796c9:_0x25fe69;}},{'key':_0x3be5b4(0x4b3),'value':function(_0x54df6c){var _0x36d262=_0x3be5b4;return 0x0!=_0x54df6c[0x0]||0x0!=_0x54df6c[0x1]||0x0!=_0x54df6c[0x2]||0x1!=_0x54df6c[0x3]||0x9!=_0x54df6c[0x4]&&0x6!=_0x54df6c[0x4]?_0x54df6c:_0x54df6c[_0x36d262(0x28b)](0x5);}},{'key':_0x3be5b4(0x4d8),'value':function(_0x3ab890,_0x5eeb40,_0x12e401,_0x4d6ead){var _0x4260e0=_0x3be5b4,_0x5cb76c='';if(0x5==_0x5eeb40)_0x5cb76c=_0x4260e0(0x32b),console['log']('265\\x20hard\\x20decoder');else{if(0x100==_0x5eeb40){for(var _0x539fa4=0x0;_0x539fa4<_0x3ab890[_0x4260e0(0x4f1)];_0x539fa4++)if(0x67===_0x3ab890[_0x539fa4]||0x27===_0x3ab890[_0x539fa4]){for(var _0x14401e=_0x3ab890[_0x4260e0(0x54a)](_0x539fa4+0x1,_0x539fa4+0x4),_0x5cb76c=_0x4260e0(0x366),_0x4a51d5=0x0;_0x4a51d5<0x3;_0x4a51d5++){var _0x32d419=_0x14401e[_0x4a51d5][_0x4260e0(0x258)](0x10);_0x5cb76c+=_0x32d419=_0x32d419[_0x4260e0(0x4f1)]<0x2?'0'+_0x32d419:_0x32d419;}break;}console[_0x4260e0(0x514)](_0x4260e0(0x44d));}else console[_0x4260e0(0x514)](_0x4260e0(0x38e));}var _0x276311={'codec':_0x5cb76c,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x5eeb40&&this[_0x4260e0(0x373)]&&(_0x276311[_0x4260e0(0x1ec)]=_0x4260e0(0x545)),_0x276311;}},{'key':_0x3be5b4(0x445),'value':function(_0x3072de,_0x4895a7){var _0x2ea637=_0x3be5b4;this[_0x2ea637(0x4d9)]!=_0x4895a7[_0x2ea637(0x4d9)]&&(this['frameRate']=_0x4895a7['frameRate']),this[_0x2ea637(0x36f)]!=_0x4895a7['width']&&(this[_0x2ea637(0x36f)]=_0x4895a7['width']),this[_0x2ea637(0x483)]!=_0x4895a7[_0x2ea637(0x483)]&&(this['height']=_0x4895a7['height']),_0x4895a7['needSetPreSoft']&&(this[_0x2ea637(0x373)]=_0x4895a7['needSetPreSoft']);var _0x926b73=_0x3072de;if(0x4!=this[_0x2ea637(0x52b)]&&null!=this[_0x2ea637(0x48e)]){if(_0x2ea637(0x468)==this[_0x2ea637(0x48e)][_0x2ea637(0x234)]){var _0x35a30d=new EncodedVideoChunk({'data':_0x926b73,'timestamp':_0x4895a7['timeStamp'],'type':_0x4895a7[_0x2ea637(0x243)]?_0x2ea637(0x543):_0x2ea637(0x369)});this[_0x2ea637(0x48e)][_0x2ea637(0x31f)](_0x35a30d),_0x3072de=_0x926b73=null,_0x4895a7[_0x2ea637(0x3fd)];}else{if(_0x4895a7[_0x2ea637(0x243)]&&_0x2ea637(0x30c)==this['decoderObj'][_0x2ea637(0x234)]){_0x35a30d=this[_0x2ea637(0x4d8)](_0x3072de,_0x4895a7[_0x2ea637(0x272)],_0x4895a7[_0x2ea637(0x36f)],_0x4895a7[_0x2ea637(0x483)]);if(''==_0x35a30d[_0x2ea637(0x2de)])return-0x1;this[_0x2ea637(0x48e)][_0x2ea637(0x4d2)](_0x35a30d),_0x926b73=this[_0x2ea637(0x2cb)](_0x3072de),this[_0x2ea637(0x36c)]=!0x1,_0x35a30d=new EncodedVideoChunk({'data':_0x926b73,'timestamp':_0x4895a7[_0x2ea637(0x37a)],'type':_0x4895a7[_0x2ea637(0x243)]?'key':_0x2ea637(0x369)}),(this['decoderObj'][_0x2ea637(0x31f)](_0x35a30d),_0x926b73=null);}}}}},{'key':_0x3be5b4(0x255),'value':function(_0x23558e){var _0x41bbab=_0x3be5b4;_0x41bbab(0x468)==this[_0x41bbab(0x48e)]['state']?(_0x23558e[_0x41bbab(0x32a)],_0x23558e[_0x41bbab(0x316)],_0x23558e[_0x41bbab(0x4cc)],_0x23558e[_0x41bbab(0x455)],_0x23558e[_0x41bbab(0x436)],_0x23558e['duration'],_0x23558e[_0x41bbab(0x264)],this['ready_frames'][_0x41bbab(0x51d)](_0x23558e),this[_0x41bbab(0x274)]||(this['decoderOutSuccess']=!0x0)):_0x23558e[_0x41bbab(0x493)]();}},{'key':'output2','value':function(_0x16cc73){var _0x1b8693=_0x3be5b4,_0x5d44c7=this;_0x16cc73[_0x1b8693(0x264)],createImageBitmap(_0x16cc73)[_0x1b8693(0x39e)](function(_0x1186b0){var _0x5d79e5=_0x1b8693;_0x16cc73[_0x5d79e5(0x493)](),_0x5d44c7[_0x5d79e5(0x541)]['push'](_0x1186b0);});}},{'key':_0x3be5b4(0x4c5),'value':function(_0x2f2450){var _0x2ffcdb=_0x3be5b4;console[_0x2ffcdb(0x514)](_0x2ffcdb(0x50e)+_0x2f2450[_0x2ffcdb(0x435)]+_0x2ffcdb(0x284)+this[_0x2ffcdb(0x48e)][_0x2ffcdb(0x234)]+_0x2ffcdb(0x277)+this[_0x2ffcdb(0x4d9)]),this[_0x2ffcdb(0x274)]?this['decoderObjNeedReset']=!0x0:(this[_0x2ffcdb(0x319)]['HardDecodeError'](),console[_0x2ffcdb(0x514)](_0x2ffcdb(0x27c),_0x2ffcdb(0x309)));}},{'key':'destroyDecoder','value':function(){var _0x11d226=this;return new Promise(function(_0x217ecd,_0x176e35){var _0x46bbfd=a0_0x1593;_0x11d226[_0x46bbfd(0x29f)]()[_0x46bbfd(0x39e)](function(){var _0x435a5a=_0x46bbfd;null!=_0x11d226[_0x435a5a(0x48e)]&&('closed'!=_0x11d226[_0x435a5a(0x48e)][_0x435a5a(0x234)]&&_0x11d226[_0x435a5a(0x48e)][_0x435a5a(0x493)](),console[_0x435a5a(0x514)](_0x435a5a(0x1db)),_0x11d226[_0x435a5a(0x48e)]=null),_0x11d226[_0x435a5a(0x52b)]=0x4,_0x11d226['decoderOutSuccess']=!0x1,_0x11d226[_0x435a5a(0x36c)]=!0x0,_0x11d226[_0x435a5a(0x53c)]=!0x0,_0x11d226[_0x435a5a(0x373)]=!0x1,_0x11d226[_0x435a5a(0x2e4)]=!0x1,_0x217ecd();},function(){_0x176e35();});});}},{'key':_0x3be5b4(0x3b7),'value':function(){var _0x255f34=this;return new Promise(function(_0x45c248,_0x1d1555){var _0x35310e=a0_0x1593;_0x255f34[_0x35310e(0x409)]()[_0x35310e(0x39e)](function(){var _0x4decee=_0x35310e;_0x255f34[_0x4decee(0x217)](),console[_0x4decee(0x514)](_0x4decee(0x221),_0x4decee(0x4cf)),_0x45c248();},function(){_0x1d1555();});});}},{'key':_0x3be5b4(0x29f),'value':function(){var _0x2c6a8d=this;return new Promise(function(_0x41fb33,_0x422247){var _0x359386=a0_0x1593;for(var _0x39d4ff=_0x2c6a8d[_0x359386(0x541)][_0x359386(0x4f1)],_0x325315=0x0;_0x325315<_0x39d4ff;_0x325315++)_0x2c6a8d[_0x359386(0x541)][_0x359386(0x21b)]()[_0x359386(0x493)]();_0x2c6a8d['ready_frames'][_0x359386(0x21a)](0x0,_0x2c6a8d[_0x359386(0x541)][_0x359386(0x4f1)]),null!=_0x2c6a8d[_0x359386(0x48e)]&&_0x359386(0x468)==_0x2c6a8d[_0x359386(0x48e)][_0x359386(0x234)]&&_0x2c6a8d[_0x359386(0x48e)]['reset'](),_0x41fb33();});}},{'key':'SetStreamEnd','value':function(){var _0x59b11a=_0x3be5b4;return 0x0==this[_0x59b11a(0x48e)][_0x59b11a(0x25c)]&&0x0==this[_0x59b11a(0x541)]['length']&&(this[_0x59b11a(0x48e)][_0x59b11a(0x3fc)](),console[_0x59b11a(0x514)](_0x59b11a(0x3fc))),0x1;}}]),_0x5cccce;}()),_0x13949e={'SR_OK':0x1,'SR_ERR_NOT_SUPPORT':0x80000001,'SR_ERR_SUBPORT':0x80000002,'SR_ERR_ALLOC_MEMORY':0x80000003,'SR_ERR_CALL_ORDER':0x80000004,'SR_ERR_PARAM':0x80000005,'SR_ERR_CAPTURE':0x80000006,'SR_ERR_SUBPORT_FULL':0x80000007,'SR_ERR_SHADER':0x80000008,'SR_ERR_3D_MODEL':0x80000009,'SR_ERR_FONT':0x8000000a,'SR_ERR_MEMORY_LIMIT':0x8000000b,'SR_ERR_WEBGPU_RESOURCE':0x8000000c,'SR_ERR_CANVAS':0x8000000d,'SR_ERR_FREETYPE_INIT':0x8000000e,'SR_ERR_FREETYPE_RESOURCE':0x8000000f},_0x3468da={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17},_0x3c8826=0x0,_0x3b5c80=0x1,_0x1e8e38=0x2,_0x2b1fa6=0x3,_0x1d678a=0x4,_0x366953=0x0,_0xba837=0x1,_0x46c232=0x2,_0x30de30=0x1,_0x4d39af=0x2,_0x1ab3fe=0x3,_0x158a35=0x0,_0x3b9975=0x1,_0x17dd0b=0x1,_0x45c70b=0x2;function _0x238f72(_0x1f94be,_0x4c2316,_0x55dd03,_0x41bf55,_0x442097,_0x32a2f9,_0x4bd14b){var _0x31a54b=a0_0x1593;try{var _0xfd0406=_0x1f94be[_0x32a2f9](_0x4bd14b),_0x4cdea7=_0xfd0406['value'];}catch(_0x5cbe4a){return void _0x55dd03(_0x5cbe4a);}_0xfd0406[_0x31a54b(0x3e6)]?_0x4c2316(_0x4cdea7):Promise[_0x31a54b(0x51c)](_0x4cdea7)[_0x31a54b(0x39e)](_0x41bf55,_0x442097);}function _0x30bbb2(_0x27f3d4){return function(){var _0x1d80d6=this,_0x13ed0f=arguments;return new Promise(function(_0xdd49e4,_0x195185){var _0x2a3af2=_0x27f3d4['apply'](_0x1d80d6,_0x13ed0f);function _0x2a8370(_0x1cf860){var _0x56d8ef=a0_0x1593;_0x238f72(_0x2a3af2,_0xdd49e4,_0x195185,_0x2a8370,_0xcdbf4,_0x56d8ef(0x500),_0x1cf860);}function _0xcdbf4(_0x372d44){_0x238f72(_0x2a3af2,_0xdd49e4,_0x195185,_0x2a8370,_0xcdbf4,'throw',_0x372d44);}_0x2a8370(void 0x0);});};}var _0x5342a5,_0x4f76fc,_0x1bf079,_0x125374,_0x151f60,_0x2afdcd,_0x27d008=_0x165a0a(0x2af),_0x148935=_0x165a0a['n'](_0x27d008);function _0x88c779(_0x375065,_0x5b1587,_0x47584d){var _0xec6465=a0_0x1593;_0x5b1587 in _0x375065?Object[_0xec6465(0x256)](_0x375065,_0x5b1587,{'value':_0x47584d,'enumerable':!0x0,'configurable':!0x0,'writable':!0x0}):_0x375065[_0x5b1587]=_0x47584d;}function _0x49c293(_0x3e9167,_0x4b688c,_0x289973,_0x35cee1){var _0x57eb45=a0_0x1593;return _0x3e9167[_0x57eb45(0x27a)](0x0)<<0x18|_0x4b688c['charCodeAt'](0x0)<<0x10|_0x289973['charCodeAt'](0x0)<<0x8|_0x35cee1[_0x57eb45(0x27a)](0x0);}var _0x5338d8=null,_0x30397f=_0x5a3b91(function _0x2cabee(){var _0x4a2d1a=a0_0x1593;_0x160316(this,_0x2cabee),_0x88c779(this,_0x4a2d1a(0x297),(function(){var _0x46f26a=_0x30bbb2(_0x148935()['mark'](function _0x7f8ef5(_0x28b098,_0x12ede3,_0x510526){var _0x199de3=a0_0x1593,_0x3fe32f;return _0x148935()[_0x199de3(0x398)](function(_0x8885bf){var _0x326aaf=_0x199de3;for(;;)switch(_0x8885bf['prev']=_0x8885bf[_0x326aaf(0x500)]){case 0x0:null==_0x5338d8&&((_0x3fe32f=document[_0x326aaf(0x2d1)](_0x326aaf(0x4e4)))[_0x326aaf(0x50c)]=_0x326aaf(0x51a),_0x3fe32f[_0x326aaf(0x269)]=_0x28b098,_0x3fe32f[_0x326aaf(0x48f)]=function(){var _0x5f423f=_0x326aaf;window[_0x5f423f(0x1cd)]()[_0x5f423f(0x39e)](function(_0x3332e5){_0x5338d8=_0x3332e5,_0x12ede3(_0x510526);});},document[_0x326aaf(0x1d8)][_0x326aaf(0x359)](_0x3fe32f));case 0x1:case'end':return _0x8885bf[_0x326aaf(0x43b)]();}},_0x7f8ef5);}));return function(_0x57b552,_0x96c00c,_0x420f8c){var _0x4557ee=a0_0x1593;return _0x46f26a[_0x4557ee(0x4f6)](this,arguments);};}())),_0x88c779(this,_0x4a2d1a(0x2d0),function(_0x245364){var _0x3ceb1c=_0x4a2d1a;return _0x5338d8[_0x3ceb1c(0x33b)](_0x245364);}),_0x88c779(this,_0x4a2d1a(0x250),function(_0xc8abd8){var _0x22228d=_0x4a2d1a,_0x2183bf=[0x0],_0x2156ed=[0x0],_0x4faa39=[0x0];return _0x5338d8[_0x22228d(0x245)](_0xc8abd8[_0x22228d(0x336)],_0x2183bf,_0x2156ed,_0x4faa39),{'major':_0x2183bf[0x0],'minor':_0x2156ed[0x0],'patch':_0x4faa39[0x0]};}),_0x88c779(this,_0x4a2d1a(0x2bd),function(_0x596592){var _0x451f77=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x451f77(0x444)](_0x596592[_0x451f77(0x336)]);}),_0x88c779(this,'Done_FreeType',function(_0x461db4){var _0x531b17=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x531b17(0x2b4)](_0x461db4[_0x531b17(0x336)]);}),_0x88c779(this,'New_Memory_Face',function(_0x1966f3,_0x309c80,_0x407a37,_0x5f5ca6){var _0x227efd=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8['FT_New_Memory_Face'](_0x1966f3[_0x227efd(0x336)],_0x309c80,_0x407a37,_0x5f5ca6['bind']);}),_0x88c779(this,_0x4a2d1a(0x278),function(_0x32d236){var _0xd0ed18=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0xd0ed18(0x34e)](_0x32d236['bind']);}),_0x88c779(this,_0x4a2d1a(0x3e2),function(_0x4be041,_0x50855c){var _0x3c5c5b=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x3c5c5b(0x4ec)](_0x4be041[_0x3c5c5b(0x336)],_0x50855c);}),_0x88c779(this,'Load_Char',function(_0x14a803,_0x5a9937){var _0x589e80=_0x4a2d1a,_0x2c062b=0x2<arguments['length']&&void 0x0!==arguments[0x2]?arguments[0x2]:_0x151f60[_0x589e80(0x401)];if(null!=_0x5338d8)return _0x5338d8[_0x589e80(0x537)](_0x14a803[_0x589e80(0x336)],_0x5a9937,_0x2c062b);}),_0x88c779(this,_0x4a2d1a(0x4b0),function(_0xfa7ad0,_0x40f563,_0x4bb0d8,_0x2492ab,_0x349dd2){var _0x2b4145=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8['FT_Set_Char_Size'](_0xfa7ad0[_0x2b4145(0x336)],_0x40f563,_0x4bb0d8,_0x2492ab,_0x349dd2);}),_0x88c779(this,'Set_Pixel_Size',function(_0x47a1cc,_0x197740,_0x29f552){var _0x20300e=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0x20300e(0x397)](_0x47a1cc[_0x20300e(0x336)],_0x197740,_0x29f552);}),_0x88c779(this,_0x4a2d1a(0x4af),function(_0x57f635){var _0x50b595=_0x4a2d1a,_0x45887b=0x1<arguments[_0x50b595(0x4f1)]&&void 0x0!==arguments[0x1]?arguments[0x1]:_0x2afdcd[_0x50b595(0x4da)];if(null!=_0x5338d8)return _0x5338d8[_0x50b595(0x4cb)](_0x57f635,_0x45887b);}),_0x88c779(this,_0x4a2d1a(0x23c),function(_0x2be896,_0xe07356,_0x46fa75,_0x63996d){var _0x38d24a=_0x4a2d1a,_0x17e511=0x4<arguments[_0x38d24a(0x4f1)]&&void 0x0!==arguments[0x4]?arguments[0x4]:new _0x4f76fc();if(null!=_0x5338d8)return _0x5338d8[_0x38d24a(0x47d)](_0x2be896[_0x38d24a(0x336)],_0xe07356,_0x46fa75,_0x63996d,_0x17e511);}),_0x88c779(this,_0x4a2d1a(0x318),function(_0x5e1d6e,_0x2178f9,_0x252d9f){var _0xb220df=_0x4a2d1a;if(null!=_0x5338d8)return _0x5338d8[_0xb220df(0x387)](_0x5e1d6e,_0x2178f9,_0x252d9f);});}),_0xe651be=((_0x27d008=_0x5342a5=_0x5342a5||{})[_0x27d008['Ok']=0x0]='Ok',_0x27d008[_0x27d008[_0x99d5a2(0x35f)]=0x1]=_0x99d5a2(0x35f),_0x27d008[_0x27d008[_0x99d5a2(0x2eb)]=0x2]=_0x99d5a2(0x2eb),_0x27d008[_0x27d008[_0x99d5a2(0x2d9)]=0x3]='Invalid_File_Format',_0x27d008[_0x27d008[_0x99d5a2(0x291)]=0x4]='Invalid_Version',_0x27d008[_0x27d008[_0x99d5a2(0x244)]=0x5]='Lower_Module_Version',_0x27d008[_0x27d008['Invalid_Argument']=0x6]=_0x99d5a2(0x3f0),_0x27d008[_0x27d008['Unimplemented_Feature']=0x7]=_0x99d5a2(0x322),_0x27d008[_0x27d008[_0x99d5a2(0x4ae)]=0x8]='Invalid_Table',_0x27d008[_0x27d008[_0x99d5a2(0x328)]=0x9]=_0x99d5a2(0x328),_0x27d008[_0x27d008[_0x99d5a2(0x2ff)]=0xa]=_0x99d5a2(0x2ff),_0x27d008[_0x27d008[_0x99d5a2(0x3dc)]=0xb]=_0x99d5a2(0x3dc),_0x27d008[_0x27d008[_0x99d5a2(0x219)]=0xc]='Missing_Property',_0x27d008[_0x27d008[_0x99d5a2(0x48b)]=0x10]=_0x99d5a2(0x48b),_0x27d008[_0x27d008['Invalid_Character_Code']=0x11]=_0x99d5a2(0x2fa),_0x27d008[_0x27d008[_0x99d5a2(0x481)]=0x12]='Invalid_Glyph_Format',_0x27d008[_0x27d008['Cannot_Render_Glyph']=0x13]=_0x99d5a2(0x508),_0x27d008[_0x27d008['Invalid_Outline']=0x14]='Invalid_Outline',_0x27d008[_0x27d008['Invalid_Composite']=0x15]=_0x99d5a2(0x4c1),_0x27d008[_0x27d008[_0x99d5a2(0x4d0)]=0x16]=_0x99d5a2(0x4d0),_0x27d008[_0x27d008[_0x99d5a2(0x261)]=0x17]=_0x99d5a2(0x261),_0x27d008[_0x27d008[_0x99d5a2(0x2ef)]=0x20]=_0x99d5a2(0x2ef),_0x27d008[_0x27d008['Invalid_Library_Handle']=0x21]=_0x99d5a2(0x473),_0x27d008[_0x27d008['Invalid_Driver_Handle']=0x22]='Invalid_Driver_Handle',_0x27d008[_0x27d008[_0x99d5a2(0x463)]=0x23]=_0x99d5a2(0x463),_0x27d008[_0x27d008['Invalid_Size_Handle']=0x24]='Invalid_Size_Handle',_0x27d008[_0x27d008[_0x99d5a2(0x1ce)]=0x25]=_0x99d5a2(0x1ce),_0x27d008[_0x27d008[_0x99d5a2(0x47a)]=0x26]=_0x99d5a2(0x47a),_0x27d008[_0x27d008[_0x99d5a2(0x38c)]=0x27]=_0x99d5a2(0x38c),_0x27d008[_0x27d008[_0x99d5a2(0x421)]=0x28]='Invalid_Stream_Handle',_0x27d008[_0x27d008[_0x99d5a2(0x466)]=0x30]=_0x99d5a2(0x466),_0x27d008[_0x27d008[_0x99d5a2(0x204)]=0x31]=_0x99d5a2(0x204),_0x27d008[_0x27d008[_0x99d5a2(0x426)]=0x40]=_0x99d5a2(0x426),_0x27d008[_0x27d008[_0x99d5a2(0x46e)]=0x41]='Unlisted_Object',_0x27d008[_0x27d008[_0x99d5a2(0x474)]=0x51]='Cannot_Open_Stream',_0x27d008[_0x27d008[_0x99d5a2(0x4ea)]=0x52]=_0x99d5a2(0x4ea),_0x27d008[_0x27d008[_0x99d5a2(0x253)]=0x53]='Invalid_Stream_Skip',_0x27d008[_0x27d008[_0x99d5a2(0x467)]=0x54]='Invalid_Stream_Read',_0x27d008[_0x27d008[_0x99d5a2(0x3c7)]=0x55]=_0x99d5a2(0x3c7),_0x27d008[_0x27d008[_0x99d5a2(0x44f)]=0x56]='Invalid_Frame_Operation',_0x27d008[_0x27d008[_0x99d5a2(0x23e)]=0x57]=_0x99d5a2(0x23e),_0x27d008[_0x27d008[_0x99d5a2(0x1d1)]=0x58]=_0x99d5a2(0x1d1),_0x27d008[_0x27d008[_0x99d5a2(0x411)]=0x60]=_0x99d5a2(0x411),_0x27d008[_0x27d008[_0x99d5a2(0x424)]=0x61]=_0x99d5a2(0x424),_0x27d008[_0x27d008[_0x99d5a2(0x43f)]=0x62]=_0x99d5a2(0x43f),_0x27d008[_0x27d008[_0x99d5a2(0x472)]=0x63]=_0x99d5a2(0x472),_0x27d008[_0x27d008[_0x99d5a2(0x33f)]=0x70]='Too_Many_Caches',_0x27d008[_0x27d008[_0x99d5a2(0x3de)]=0x80]=_0x99d5a2(0x3de),_0x27d008[_0x27d008[_0x99d5a2(0x1e8)]=0x81]='Too_Few_Arguments',_0x27d008[_0x27d008[_0x99d5a2(0x298)]=0x82]=_0x99d5a2(0x298),_0x27d008[_0x27d008['Code_Overflow']=0x83]=_0x99d5a2(0x26e),_0x27d008[_0x27d008['Bad_Argument']=0x84]='Bad_Argument',_0x27d008[_0x27d008[_0x99d5a2(0x25d)]=0x85]='Divide_By_Zero',_0x27d008[_0x27d008['Invalid_Reference']=0x86]=_0x99d5a2(0x282),_0x27d008[_0x27d008['Debug_OpCode']=0x87]=_0x99d5a2(0x385),_0x27d008[_0x27d008[_0x99d5a2(0x27f)]=0x88]=_0x99d5a2(0x27f),_0x27d008[_0x27d008[_0x99d5a2(0x2b1)]=0x89]=_0x99d5a2(0x2b1),_0x27d008[_0x27d008[_0x99d5a2(0x37e)]=0x8a]=_0x99d5a2(0x37e),_0x27d008[_0x27d008[_0x99d5a2(0x2ca)]=0x8b]=_0x99d5a2(0x2ca),_0x27d008[_0x27d008[_0x99d5a2(0x452)]=0x8c]=_0x99d5a2(0x452),_0x27d008[_0x27d008[_0x99d5a2(0x43c)]=0x8d]=_0x99d5a2(0x43c),_0x27d008[_0x27d008['Table_Missing']=0x8e]=_0x99d5a2(0x295),_0x27d008[_0x27d008['Horiz_Header_Missing']=0x8f]=_0x99d5a2(0x346),_0x27d008[_0x27d008[_0x99d5a2(0x494)]=0x90]=_0x99d5a2(0x494),_0x27d008[_0x27d008[_0x99d5a2(0x20f)]=0x91]=_0x99d5a2(0x20f),_0x27d008[_0x27d008['CMap_Table_Missing']=0x92]=_0x99d5a2(0x2a0),_0x27d008[_0x27d008['Hmtx_Table_Missing']=0x93]=_0x99d5a2(0x374),_0x27d008[_0x27d008[_0x99d5a2(0x4f4)]=0x94]=_0x99d5a2(0x4f4),_0x27d008[_0x27d008[_0x99d5a2(0x384)]=0x95]=_0x99d5a2(0x384),_0x27d008[_0x27d008['Invalid_CharMap_Format']=0x96]=_0x99d5a2(0x44c),_0x27d008[_0x27d008[_0x99d5a2(0x35a)]=0x97]='Invalid_PPem',_0x27d008[_0x27d008[_0x99d5a2(0x2d6)]=0x98]=_0x99d5a2(0x2d6),_0x27d008[_0x27d008[_0x99d5a2(0x471)]=0x99]=_0x99d5a2(0x471),_0x27d008[_0x27d008[_0x99d5a2(0x3a2)]=0x9a]='Invalid_Post_Table_Format',_0x27d008[_0x27d008[_0x99d5a2(0x3cf)]=0x9b]=_0x99d5a2(0x3cf),_0x27d008[_0x27d008[_0x99d5a2(0x42a)]=0x9c]='DEF_In_Glyf_Bytecode',_0x27d008[_0x27d008['Missing_Bitmap']=0x9d]=_0x99d5a2(0x456),_0x27d008[_0x27d008['Syntax_Error']=0xa0]=_0x99d5a2(0x31c),_0x27d008[_0x27d008[_0x99d5a2(0x1d7)]=0xa1]=_0x99d5a2(0x1d7),_0x27d008[_0x27d008[_0x99d5a2(0x2f7)]=0xa2]=_0x99d5a2(0x2f7),_0x27d008[_0x27d008[_0x99d5a2(0x24c)]=0xa3]=_0x99d5a2(0x24c),_0x27d008[_0x27d008[_0x99d5a2(0x333)]=0xa4]=_0x99d5a2(0x333),_0x27d008[_0x27d008['Missing_Startfont_Field']=0xb0]=_0x99d5a2(0x239),_0x27d008[_0x27d008[_0x99d5a2(0x3b9)]=0xb1]=_0x99d5a2(0x3b9),_0x27d008[_0x27d008[_0x99d5a2(0x23b)]=0xb2]=_0x99d5a2(0x23b),_0x27d008[_0x27d008[_0x99d5a2(0x1f4)]=0xb3]=_0x99d5a2(0x1f4),_0x27d008[_0x27d008[_0x99d5a2(0x2a5)]=0xb4]=_0x99d5a2(0x2a5),_0x27d008[_0x27d008['Missing_Startchar_Field']=0xb5]=_0x99d5a2(0x2f8),_0x27d008[_0x27d008[_0x99d5a2(0x35d)]=0xb6]=_0x99d5a2(0x35d),_0x27d008[_0x27d008[_0x99d5a2(0x377)]=0xb7]=_0x99d5a2(0x377),_0x27d008[_0x27d008['Bbx_Too_Big']=0xb8]=_0x99d5a2(0x449),_0x27d008[_0x27d008['Corrupted_Font_Header']=0xb9]=_0x99d5a2(0x242),_0x27d008[_0x27d008[_0x99d5a2(0x4d3)]=0xba]=_0x99d5a2(0x4d3),(_0x27d008={'NONE':0x0,0x0:_0x99d5a2(0x1da)})[_0x27d008[_0x99d5a2(0x20b)]=_0x49c293('c','o','m','p')]=_0x99d5a2(0x20b),_0x27d008[_0x27d008['BITMAP']=_0x49c293('b','i','t','s')]=_0x99d5a2(0x293),_0x27d008[_0x27d008['OUTLINE']=_0x49c293('o','u','t','l')]='OUTLINE',_0x27d008[_0x27d008[_0x99d5a2(0x35c)]=_0x49c293('p','l','o','t')]=_0x99d5a2(0x35c),_0x4f76fc=_0x5a3b91(function _0x5bad77(){_0x160316(this,_0x5bad77),this['x']=0x0,this['y']=0x0;}),0x0,_0x1bf079=(function(){var _0x59149e=_0x99d5a2;function _0x357cc6(){var _0x4b32e4=a0_0x1593;_0x160316(this,_0x357cc6),this[_0x4b32e4(0x336)]=[null];}return _0x5a3b91(_0x357cc6,[{'key':'init','value':function(){var _0x2436b6=a0_0x1593,_0x2255c7=bind[_0x2436b6(0x444)](this['bind']);if(_0x2255c7!==_0x5342a5['Ok'])throw new Error(_0x2436b6(0x535)+_0x2255c7[_0x2436b6(0x258)]());}},{'key':_0x59149e(0x3e6),'value':function(){var _0x5ed2d1=_0x59149e,_0x4e4cf2=bind[_0x5ed2d1(0x2b4)](this[_0x5ed2d1(0x336)]);if(_0x4e4cf2!==_0x5342a5['Ok'])throw new Error(_0x5ed2d1(0x1f3)+_0x4e4cf2[_0x5ed2d1(0x258)]());}}]),_0x357cc6;}()),_0x125374=(function(){var _0x22397f=_0x99d5a2;function _0x4b0363(){var _0x2e1c61=a0_0x1593;_0x160316(this,_0x4b0363),this[_0x2e1c61(0x336)]=[null];}return _0x5a3b91(_0x4b0363,[{'key':_0x22397f(0x4a8),'get':function(){if(null===this['bind'][0x0])throw new Error();return this['bind'][0x0];}},{'key':_0x22397f(0x3e4),'get':function(){return this['_bind']['num_faces'];}},{'key':_0x22397f(0x3bf),'get':function(){var _0x297487=_0x22397f;return this['_bind'][_0x297487(0x3bf)];}},{'key':_0x22397f(0x2e2),'get':function(){var _0x504c21=_0x22397f;return this[_0x504c21(0x4a8)]['face_flags'];}},{'key':'style_flags','get':function(){var _0x596e14=_0x22397f;return this[_0x596e14(0x4a8)][_0x596e14(0x403)];}},{'key':_0x22397f(0x211),'get':function(){var _0x5955ba=_0x22397f;return this[_0x5955ba(0x4a8)]['num_glyphs'];}},{'key':_0x22397f(0x30d),'get':function(){var _0x50edb9=_0x22397f;return this[_0x50edb9(0x4a8)][_0x50edb9(0x30d)];}},{'key':_0x22397f(0x521),'get':function(){var _0x42d7f=_0x22397f;return this[_0x42d7f(0x4a8)][_0x42d7f(0x521)];}},{'key':_0x22397f(0x1e0),'get':function(){var _0x35e165=_0x22397f;return this[_0x35e165(0x4a8)][_0x35e165(0x1e0)];}},{'key':_0x22397f(0x2c5),'get':function(){var _0x555a50=_0x22397f;return this[_0x555a50(0x4a8)][_0x555a50(0x2c5)];}},{'key':_0x22397f(0x476),'get':function(){var _0x13fa38=_0x22397f;return this[_0x13fa38(0x4a8)][_0x13fa38(0x476)];}},{'key':_0x22397f(0x301),'get':function(){var _0x3799c9=_0x22397f;return this[_0x3799c9(0x4a8)]['descender'];}},{'key':_0x22397f(0x483),'get':function(){var _0x1d2220=_0x22397f;return this['_bind'][_0x1d2220(0x483)];}},{'key':'max_advance_width','get':function(){var _0x105daa=_0x22397f;return this['_bind'][_0x105daa(0x496)];}},{'key':_0x22397f(0x22c),'get':function(){var _0x4e74f1=_0x22397f;return this[_0x4e74f1(0x4a8)][_0x4e74f1(0x22c)];}},{'key':_0x22397f(0x549),'get':function(){var _0x181e20=_0x22397f;return this[_0x181e20(0x4a8)]['underline_position'];}},{'key':'underline_thickness','get':function(){var _0xa2b222=_0x22397f;return this['_bind'][_0xa2b222(0x28e)];}},{'key':_0x22397f(0x43e),'get':function(){var _0x531177=_0x22397f;return this[_0x531177(0x4a8)][_0x531177(0x43e)];}}]),_0x4b0363;}()),(_0x27d008=_0x151f60=_0x151f60||{})[_0x27d008[_0x99d5a2(0x401)]=0x0]=_0x99d5a2(0x401),_0x27d008[_0x27d008['NO_SCALE']=0x1]=_0x99d5a2(0x4f7),_0x27d008[_0x27d008[_0x99d5a2(0x32e)]=0x2]=_0x99d5a2(0x32e),_0x27d008[_0x27d008[_0x99d5a2(0x2ec)]=0x4]=_0x99d5a2(0x2ec),_0x27d008[_0x27d008[_0x99d5a2(0x3ac)]=0x8]='NO_BITMAP',_0x27d008[_0x27d008[_0x99d5a2(0x233)]=0x10]=_0x99d5a2(0x233),_0x27d008[_0x27d008[_0x99d5a2(0x1d5)]=0x20]=_0x99d5a2(0x1d5),_0x27d008[_0x27d008[_0x99d5a2(0x372)]=0x40]='CROP_BITMAP',_0x27d008[_0x27d008[_0x99d5a2(0x461)]=0x80]='PEDANTIC',_0x27d008[_0x27d008[_0x99d5a2(0x308)]=0x200]=_0x99d5a2(0x308),_0x27d008[_0x27d008[_0x99d5a2(0x25b)]=0x400]=_0x99d5a2(0x25b),_0x27d008[_0x27d008[_0x99d5a2(0x418)]=0x800]='IGNORE_TRANSFORM',_0x27d008[_0x27d008[_0x99d5a2(0x389)]=0x1000]='MONOCHROME',_0x27d008[_0x27d008[_0x99d5a2(0x518)]=0x2000]='LINEAR_DESIGN',_0x27d008[_0x27d008['NO_AUTOHINT']=0x8000]=_0x99d5a2(0x4ca),_0x27d008[_0x27d008[_0x99d5a2(0x30b)]=0x100000]=_0x99d5a2(0x30b),_0x27d008[_0x27d008[_0x99d5a2(0x428)]=0x200000]=_0x99d5a2(0x428),_0x27d008[_0x27d008[_0x99d5a2(0x1f9)]=0x400000]='BITMAP_METRICS_ONLY',_0x27d008[_0x27d008[_0x99d5a2(0x29d)]=0x100]=_0x99d5a2(0x29d),_0x27d008[_0x27d008[_0x99d5a2(0x365)]=0x4000]=_0x99d5a2(0x365),(_0x27d008=_0x2afdcd=_0x2afdcd||{})[_0x27d008['NORMAL']=0x0]=_0x99d5a2(0x4da),_0x27d008[_0x27d008[_0x99d5a2(0x49b)]=0x1]=_0x99d5a2(0x49b),_0x27d008[_0x27d008[_0x99d5a2(0x2b5)]=0x2]=_0x99d5a2(0x2b5),_0x27d008[_0x27d008[_0x99d5a2(0x1f0)]=0x3]='LCD',_0x27d008[_0x27d008[_0x99d5a2(0x315)]=0x4]=_0x99d5a2(0x315),_0x27d008[_0x27d008[_0x99d5a2(0x42c)]=0x5]=_0x99d5a2(0x42c),0x0,_0x99d5a2(0x512)),_0x5971cc=_0x99d5a2(0x443),_0x466d10='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x473777=0.05,_0x3e9a49=0.000001,_0x48e6bf=3.1415926,_0x479a0f=0.78539815,_0x1ec236=0.000001,_0x1096f2=_0x99d5a2(0x294)!=typeof Float32Array?Float32Array:Array;Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){var _0x2f0633=_0x99d5a2;for(var _0x502a4a=0x0,_0x2dc010=arguments[_0x2f0633(0x4f1)];_0x2dc010--;)_0x502a4a+=arguments[_0x2dc010]*arguments[_0x2dc010];return Math[_0x2f0633(0x41c)](_0x502a4a);});function _0x1189d8(){var _0x1dc269=new _0x1096f2(0x10);return _0x1096f2!=Float32Array&&(_0x1dc269[0x1]=0x0,_0x1dc269[0x2]=0x0,_0x1dc269[0x3]=0x0,_0x1dc269[0x4]=0x0,_0x1dc269[0x6]=0x0,_0x1dc269[0x7]=0x0,_0x1dc269[0x8]=0x0,_0x1dc269[0x9]=0x0,_0x1dc269[0xb]=0x0,_0x1dc269[0xc]=0x0,_0x1dc269[0xd]=0x0,_0x1dc269[0xe]=0x0),_0x1dc269[0x0]=0x1,_0x1dc269[0x5]=0x1,_0x1dc269[0xa]=0x1,_0x1dc269[0xf]=0x1,_0x1dc269;}function _0x28ce33(_0x2d7c40,_0x56ab10,_0x209785){var _0x2bb9d0=_0x56ab10[0x0],_0x1439e6=_0x56ab10[0x1],_0x142a16=_0x56ab10[0x2],_0x1ab07e=_0x56ab10[0x3],_0x31345e=_0x56ab10[0x4],_0x39d9f0=_0x56ab10[0x5],_0x15d623=_0x56ab10[0x6],_0x27bf4a=_0x56ab10[0x7],_0x43d798=_0x56ab10[0x8],_0x2bbfd4=_0x56ab10[0x9],_0x9b149f=_0x56ab10[0xa],_0x3f48b3=_0x56ab10[0xb],_0x226daf=_0x56ab10[0xc],_0x54b94b=_0x56ab10[0xd],_0x5098e6=_0x56ab10[0xe],_0x56ab10=_0x56ab10[0xf],_0x490bfd=_0x209785[0x0],_0x1d5c1a=_0x209785[0x1],_0x251250=_0x209785[0x2],_0x17e8d9=_0x209785[0x3];return _0x2d7c40[0x0]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0x1]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0x2]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0x3]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x490bfd=_0x209785[0x4],_0x1d5c1a=_0x209785[0x5],_0x251250=_0x209785[0x6],_0x17e8d9=_0x209785[0x7],_0x2d7c40[0x4]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0x5]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0x6]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0x7]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x490bfd=_0x209785[0x8],_0x1d5c1a=_0x209785[0x9],_0x251250=_0x209785[0xa],_0x17e8d9=_0x209785[0xb],_0x2d7c40[0x8]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0x9]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0xa]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0xb]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x490bfd=_0x209785[0xc],_0x1d5c1a=_0x209785[0xd],_0x251250=_0x209785[0xe],_0x17e8d9=_0x209785[0xf],_0x2d7c40[0xc]=_0x490bfd*_0x2bb9d0+_0x1d5c1a*_0x31345e+_0x251250*_0x43d798+_0x17e8d9*_0x226daf,_0x2d7c40[0xd]=_0x490bfd*_0x1439e6+_0x1d5c1a*_0x39d9f0+_0x251250*_0x2bbfd4+_0x17e8d9*_0x54b94b,_0x2d7c40[0xe]=_0x490bfd*_0x142a16+_0x1d5c1a*_0x15d623+_0x251250*_0x9b149f+_0x17e8d9*_0x5098e6,_0x2d7c40[0xf]=_0x490bfd*_0x1ab07e+_0x1d5c1a*_0x27bf4a+_0x251250*_0x3f48b3+_0x17e8d9*_0x56ab10,_0x2d7c40;}function _0x4e0779(_0x4b7f1b,_0x3660fe,_0x16ba13,_0x269d9a){var _0x2834dd=_0x99d5a2,_0x52c017,_0x10b949,_0x5058ee,_0x2a7f13,_0x2b6f50,_0x1b5b36,_0x488897,_0x87dada,_0x5cae01,_0x11ff8d,_0x326684,_0x3f726e,_0x40cba0,_0x3a8a23,_0x4160d2,_0x55ef08,_0x5564ca,_0x5eb7ed,_0x575c15,_0x1df085,_0x3fc2c9=_0x269d9a[0x0],_0x2f5b6a=_0x269d9a[0x1],_0x269d9a=_0x269d9a[0x2],_0x17af05=Math[_0x2834dd(0x241)](_0x3fc2c9,_0x2f5b6a,_0x269d9a);_0x17af05<_0x1ec236||(_0x3fc2c9*=_0x17af05=0x1/_0x17af05,_0x2f5b6a*=_0x17af05,_0x269d9a*=_0x17af05,_0x17af05=Math['sin'](_0x16ba13),_0x16ba13=Math[_0x2834dd(0x34b)](_0x16ba13),_0x10b949=_0x3660fe[0x0],_0x5058ee=_0x3660fe[0x1],_0x2a7f13=_0x3660fe[0x2],_0x2b6f50=_0x3660fe[0x3],_0x1b5b36=_0x3660fe[0x4],_0x488897=_0x3660fe[0x5],_0x87dada=_0x3660fe[0x6],_0x5cae01=_0x3660fe[0x7],_0x11ff8d=_0x3660fe[0x8],_0x326684=_0x3660fe[0x9],_0x3f726e=_0x3660fe[0xa],_0x40cba0=_0x3660fe[0xb],_0x4160d2=_0x3fc2c9*_0x2f5b6a*(_0x52c017=0x1-_0x16ba13)-_0x269d9a*_0x17af05,_0x55ef08=_0x2f5b6a*_0x2f5b6a*_0x52c017+_0x16ba13,_0x5564ca=_0x269d9a*_0x2f5b6a*_0x52c017+_0x3fc2c9*_0x17af05,_0x5eb7ed=_0x3fc2c9*_0x269d9a*_0x52c017+_0x2f5b6a*_0x17af05,_0x575c15=_0x2f5b6a*_0x269d9a*_0x52c017-_0x3fc2c9*_0x17af05,_0x1df085=_0x269d9a*_0x269d9a*_0x52c017+_0x16ba13,_0x4b7f1b[0x0]=_0x10b949*(_0x16ba13=_0x3fc2c9*_0x3fc2c9*_0x52c017+_0x16ba13)+_0x1b5b36*(_0x3a8a23=_0x2f5b6a*_0x3fc2c9*_0x52c017+_0x269d9a*_0x17af05)+_0x11ff8d*(_0x269d9a=_0x269d9a*_0x3fc2c9*_0x52c017-_0x2f5b6a*_0x17af05),_0x4b7f1b[0x1]=_0x5058ee*_0x16ba13+_0x488897*_0x3a8a23+_0x326684*_0x269d9a,_0x4b7f1b[0x2]=_0x2a7f13*_0x16ba13+_0x87dada*_0x3a8a23+_0x3f726e*_0x269d9a,_0x4b7f1b[0x3]=_0x2b6f50*_0x16ba13+_0x5cae01*_0x3a8a23+_0x40cba0*_0x269d9a,_0x4b7f1b[0x4]=_0x10b949*_0x4160d2+_0x1b5b36*_0x55ef08+_0x11ff8d*_0x5564ca,_0x4b7f1b[0x5]=_0x5058ee*_0x4160d2+_0x488897*_0x55ef08+_0x326684*_0x5564ca,_0x4b7f1b[0x6]=_0x2a7f13*_0x4160d2+_0x87dada*_0x55ef08+_0x3f726e*_0x5564ca,_0x4b7f1b[0x7]=_0x2b6f50*_0x4160d2+_0x5cae01*_0x55ef08+_0x40cba0*_0x5564ca,_0x4b7f1b[0x8]=_0x10b949*_0x5eb7ed+_0x1b5b36*_0x575c15+_0x11ff8d*_0x1df085,_0x4b7f1b[0x9]=_0x5058ee*_0x5eb7ed+_0x488897*_0x575c15+_0x326684*_0x1df085,_0x4b7f1b[0xa]=_0x2a7f13*_0x5eb7ed+_0x87dada*_0x575c15+_0x3f726e*_0x1df085,_0x4b7f1b[0xb]=_0x2b6f50*_0x5eb7ed+_0x5cae01*_0x575c15+_0x40cba0*_0x1df085,_0x3660fe!==_0x4b7f1b&&(_0x4b7f1b[0xc]=_0x3660fe[0xc],_0x4b7f1b[0xd]=_0x3660fe[0xd],_0x4b7f1b[0xe]=_0x3660fe[0xe],_0x4b7f1b[0xf]=_0x3660fe[0xf]));}var _0x1b7aa6=function(_0x52d41e,_0x5c0ec5,_0x20391b,_0x42750a,_0x3b24cb){var _0x171452=_0x99d5a2;return _0x5c0ec5=0x1/Math[_0x171452(0x343)](_0x5c0ec5/0x2),_0x52d41e[0x0]=_0x5c0ec5/_0x20391b,_0x52d41e[0x1]=0x0,_0x52d41e[0x2]=0x0,_0x52d41e[0x3]=0x0,_0x52d41e[0x4]=0x0,_0x52d41e[0x5]=_0x5c0ec5,_0x52d41e[0x6]=0x0,_0x52d41e[0x7]=0x0,_0x52d41e[0x8]=0x0,_0x52d41e[0x9]=0x0,_0x52d41e[0xb]=-0x1,_0x52d41e[0xc]=0x0,_0x52d41e[0xd]=0x0,_0x52d41e[0xf]=0x0,null!=_0x3b24cb&&_0x3b24cb!==0x1/0x0?(_0x52d41e[0xa]=(_0x3b24cb+_0x42750a)*(_0x20391b=0x1/(_0x42750a-_0x3b24cb)),_0x52d41e[0xe]=0x2*_0x3b24cb*_0x42750a*_0x20391b):(_0x52d41e[0xa]=-0x1,_0x52d41e[0xe]=-0x2*_0x42750a),_0x52d41e;},_0x2500fe=function(_0xb3bf13,_0x448f76,_0x14bf99,_0x24a439,_0x455e24,_0x462b21,_0x41a8b5){var _0x5285d6=0x1/(_0x448f76-_0x14bf99),_0x1bf7d7=0x1/(_0x24a439-_0x455e24),_0x5ac5ef=0x1/(_0x462b21-_0x41a8b5);return _0xb3bf13[0x0]=-0x2*_0x5285d6,_0xb3bf13[0x1]=0x0,_0xb3bf13[0x2]=0x0,_0xb3bf13[0x3]=0x0,_0xb3bf13[0x4]=0x0,_0xb3bf13[0x5]=-0x2*_0x1bf7d7,_0xb3bf13[0x6]=0x0,_0xb3bf13[0x7]=0x0,_0xb3bf13[0x8]=0x0,_0xb3bf13[0x9]=0x0,_0xb3bf13[0xa]=0x2*_0x5ac5ef,_0xb3bf13[0xb]=0x0,_0xb3bf13[0xc]=(_0x448f76+_0x14bf99)*_0x5285d6,_0xb3bf13[0xd]=(_0x455e24+_0x24a439)*_0x1bf7d7,_0xb3bf13[0xe]=(_0x41a8b5+_0x462b21)*_0x5ac5ef,_0xb3bf13[0xf]=0x1,_0xb3bf13;};function _0x18c8c9(){var _0x26597c=new _0x1096f2(0x3);return _0x1096f2!=Float32Array&&(_0x26597c[0x0]=0x0,_0x26597c[0x1]=0x0,_0x26597c[0x2]=0x0),_0x26597c;}function _0x56305e(_0x5b84f7,_0x22e570,_0x20f9b9){var _0x573a0f=new _0x1096f2(0x3);return _0x573a0f[0x0]=_0x5b84f7,_0x573a0f[0x1]=_0x22e570,_0x573a0f[0x2]=_0x20f9b9,_0x573a0f;}_0x18c8c9(),(_0x27d008=new _0x1096f2(0x4),_0x1096f2!=Float32Array&&(_0x27d008[0x0]=0x0,_0x27d008[0x1]=0x0,_0x27d008[0x2]=0x0,_0x27d008[0x3]=0x0));function _0x4c98bb(){var _0x12b267=new _0x1096f2(0x4);return _0x1096f2!=Float32Array&&(_0x12b267[0x0]=0x0,_0x12b267[0x1]=0x0,_0x12b267[0x2]=0x0),_0x12b267[0x3]=0x1,_0x12b267;}_0x18c8c9(),_0x56305e(0x1,0x0,0x0),_0x56305e(0x0,0x1,0x0),_0x4c98bb(),_0x4c98bb(),_0x27d008=new _0x1096f2(0x9),_0x1096f2!=Float32Array&&(_0x27d008[0x1]=0x0,_0x27d008[0x2]=0x0,_0x27d008[0x3]=0x0,_0x27d008[0x5]=0x0,_0x27d008[0x6]=0x0,_0x27d008[0x7]=0x0),_0x27d008[0x0]=0x1,_0x27d008[0x4]=0x1,_0x27d008[0x8]=0x1,(_0x27d008=new _0x1096f2(0x2),_0x1096f2!=Float32Array&&(_0x27d008[0x0]=0x0,_0x27d008[0x1]=0x0));var _0x95cd63,_0x53ee33=(function(){var _0x2c4b4d=_0x99d5a2;function _0x415ef1(){var _0x3a66c1=a0_0x1593;_0x160316(this,_0x415ef1),this[_0x3a66c1(0x3ba)]=0.785,this[_0x3a66c1(0x227)]=0x1,this[_0x3a66c1(0x4ef)]=0.02,this['fFar']=0x3e8,this['fTheta']=0x0,this[_0x3a66c1(0x498)]=0x0,this['fBeta']=0x0,this[_0x3a66c1(0x44a)]=0x1,this[_0x3a66c1(0x3d8)]=!0x1,this['matView']=_0x1189d8(),this[_0x3a66c1(0x1d6)]=_0x1189d8(),this[_0x3a66c1(0x337)]=_0x56305e(0x0,0x0,0x0),this['vecCenter']=_0x56305e(0x0,0x0,0x64),this[_0x3a66c1(0x1ef)]=_0x56305e(0x0,0x1,0x0);}return _0x5a3b91(_0x415ef1,[{'key':_0x2c4b4d(0x210),'value':function(_0x660a1a){var _0x5e6f56=_0x2c4b4d;this[_0x5e6f56(0x39c)]=_0x660a1a;}},{'key':'GetYaw','value':function(){var _0x2ba25b=_0x2c4b4d;return this[_0x2ba25b(0x39c)];}},{'key':_0x2c4b4d(0x458),'value':function(_0x531ad9){var _0x37e999=_0x2c4b4d;this[_0x37e999(0x498)]=_0x531ad9;}},{'key':_0x2c4b4d(0x480),'value':function(){return this['fAlpha'];}},{'key':_0x2c4b4d(0x45c),'value':function(_0x3d657e){this['fBeta']=_0x3d657e;}},{'key':_0x2c4b4d(0x351),'value':function(){var _0x237606=_0x2c4b4d;return this[_0x237606(0x273)];}},{'key':_0x2c4b4d(0x26d),'value':function(_0x1df02d){var _0xdc8df5=_0x2c4b4d;this[_0xdc8df5(0x44a)]=_0x1df02d;}},{'key':_0x2c4b4d(0x484),'value':function(){var _0x5cf5ba=_0x2c4b4d;return this[_0x5cf5ba(0x44a)];}},{'key':_0x2c4b4d(0x3a6),'value':function(_0x43f759){var _0xa7cc7b=_0x2c4b4d;this[_0xa7cc7b(0x3ba)]=_0x43f759;}},{'key':'SetAspect','value':function(_0x52e423){var _0x267b63=_0x2c4b4d;this[_0x267b63(0x227)]=_0x52e423;}},{'key':_0x2c4b4d(0x420),'value':function(_0x4b3844){this['fNear']=_0x4b3844;}},{'key':_0x2c4b4d(0x3af),'value':function(_0x1c98cd){var _0xee9d33=_0x2c4b4d;this[_0xee9d33(0x345)]=_0x1c98cd;}},{'key':_0x2c4b4d(0x43a),'value':function(_0x5a92b4){var _0xed8cd3=_0x2c4b4d;this[_0xed8cd3(0x3d8)]=_0x5a92b4;}},{'key':_0x2c4b4d(0x34a),'value':function(_0x481a1c,_0x3d5dc9){var _0x2b5393=_0x2c4b4d,_0xaca978,_0xc4dc36,_0x5c603e,_0x47c201,_0x154893,_0x5c2d3b;_0x481a1c<=0x0||_0x3d5dc9<=0x0||(0x1==this['bOrtho']?_0x2500fe(this[_0x2b5393(0x1d6)],0x0,_0x481a1c,_0x3d5dc9,0x0,this[_0x2b5393(0x4ef)],this[_0x2b5393(0x345)]):(_0xaca978=this['fFov']/_0x48e6bf*0xb4,_0x1b7aa6(this[_0x2b5393(0x1d6)],_0xaca978,_0x481a1c/_0x3d5dc9,this[_0x2b5393(0x4ef)],this[_0x2b5393(0x345)])),this[_0x2b5393(0x337)]=_0x56305e(0x0,0x0,this[_0x2b5393(0x44a)]),this[_0x2b5393(0x32c)]=_0x56305e(0x0,0x0,0x0),this[_0x2b5393(0x1ef)]=_0x56305e(0x0,0x1,0x0),_0xaca978=_0x56305e(0x1,0x0,0x0),_0x481a1c=_0x56305e(0x0,0x1,0x0),_0x3d5dc9=_0x56305e(0x0,0x0,0x1),function(_0x111f03,_0xdc1831,_0x229b70,_0x21b0e4){var _0x463328=_0x2b5393,_0x4b8d6c,_0x257e6f,_0x41eaaf,_0x243a15,_0x1bcdd7=_0xdc1831[0x0],_0x29159f=_0xdc1831[0x1],_0xdc1831=_0xdc1831[0x2],_0xead032=_0x21b0e4[0x0],_0x974d6d=_0x21b0e4[0x1],_0x21b0e4=_0x21b0e4[0x2],_0x51af13=_0x229b70[0x0],_0x55dd27=_0x229b70[0x1],_0x229b70=_0x229b70[0x2];if(Math[_0x463328(0x1e6)](_0x1bcdd7-_0x51af13)<_0x1ec236&&Math[_0x463328(0x1e6)](_0x29159f-_0x55dd27)<_0x1ec236&&Math['abs'](_0xdc1831-_0x229b70)<_0x1ec236)return(_0x243a15=_0x111f03)[0x0]=0x1,_0x243a15[0x1]=0x0,_0x243a15[0x2]=0x0,_0x243a15[0x3]=0x0,_0x243a15[0x4]=0x0,_0x243a15[0x5]=0x1,_0x243a15[0x6]=0x0,_0x243a15[0x7]=0x0,_0x243a15[0x8]=0x0,_0x243a15[0x9]=0x0,_0x243a15[0xa]=0x1,_0x243a15[0xb]=0x0,_0x243a15[0xc]=0x0,_0x243a15[0xd]=0x0,_0x243a15[0xe]=0x0,_0x243a15[0xf]=0x1;_0x243a15=_0xdc1831-_0x229b70,_0x4b8d6c=_0x974d6d*(_0x243a15*=_0x55dd27=0x1/Math['hypot'](_0x229b70=_0x1bcdd7-_0x51af13,_0x51af13=_0x29159f-_0x55dd27,_0x243a15))-_0x21b0e4*(_0x51af13*=_0x55dd27),_0x21b0e4=_0x21b0e4*(_0x229b70*=_0x55dd27)-_0xead032*_0x243a15,_0xead032=_0xead032*_0x51af13-_0x974d6d*_0x229b70,(_0x55dd27=Math[_0x463328(0x241)](_0x4b8d6c,_0x21b0e4,_0xead032))?(_0x4b8d6c*=_0x55dd27=0x1/_0x55dd27,_0x21b0e4*=_0x55dd27,_0xead032*=_0x55dd27):_0xead032=_0x21b0e4=_0x4b8d6c=0x0,_0x974d6d=_0x51af13*_0xead032-_0x243a15*_0x21b0e4,_0x257e6f=_0x243a15*_0x4b8d6c-_0x229b70*_0xead032,_0x41eaaf=_0x229b70*_0x21b0e4-_0x51af13*_0x4b8d6c,(_0x55dd27=Math[_0x463328(0x241)](_0x974d6d,_0x257e6f,_0x41eaaf))?(_0x974d6d*=_0x55dd27=0x1/_0x55dd27,_0x257e6f*=_0x55dd27,_0x41eaaf*=_0x55dd27):_0x41eaaf=_0x257e6f=_0x974d6d=0x0,_0x111f03[0x0]=_0x4b8d6c,_0x111f03[0x1]=_0x974d6d,_0x111f03[0x2]=_0x229b70,_0x111f03[0x3]=0x0,_0x111f03[0x4]=_0x21b0e4,_0x111f03[0x5]=_0x257e6f,_0x111f03[0x6]=_0x51af13,_0x111f03[0x7]=0x0,_0x111f03[0x8]=_0xead032,_0x111f03[0x9]=_0x41eaaf,_0x111f03[0xa]=_0x243a15,_0x111f03[0xb]=0x0,_0x111f03[0xc]=-(_0x4b8d6c*_0x1bcdd7+_0x21b0e4*_0x29159f+_0xead032*_0xdc1831),_0x111f03[0xd]=-(_0x974d6d*_0x1bcdd7+_0x257e6f*_0x29159f+_0x41eaaf*_0xdc1831),_0x111f03[0xe]=-(_0x229b70*_0x1bcdd7+_0x51af13*_0x29159f+_0x243a15*_0xdc1831),_0x111f03[0xf]=0x1;}(_0xc4dc36=_0x1189d8(),this['vecEye'],this['vecCenter'],this[_0x2b5393(0x1ef)]),_0x5c603e=_0x1189d8(),_0x47c201=_0x1189d8(),_0x154893=_0x1189d8(),_0x5c2d3b=_0x1189d8(),_0x4e0779(_0x47c201,_0x5c603e,-this[_0x2b5393(0x498)],_0xaca978),_0x4e0779(_0x154893,_0x47c201,-this[_0x2b5393(0x39c)],_0x481a1c),_0x4e0779(_0x5c2d3b,_0x154893,-this[_0x2b5393(0x273)],_0x3d5dc9),_0x28ce33(this[_0x2b5393(0x1f7)],_0xc4dc36,_0x5c2d3b));}},{'key':_0x2c4b4d(0x522),'value':function(){return this['matView'];}},{'key':_0x2c4b4d(0x25a),'value':function(){var _0x482dca=_0x2c4b4d;return this[_0x482dca(0x1d6)];}}]),_0x415ef1;}()),_0x50f103=(function(){var _0x41470a=_0x99d5a2;function _0x27b1ac(){var _0x5253ad=a0_0x1593;_0x160316(this,_0x27b1ac),this[_0x5253ad(0x42d)]=null,this[_0x5253ad(0x51e)]=null,this[_0x5253ad(0x1e9)]=0x0,this[_0x5253ad(0x52e)]=0x0,this[_0x5253ad(0x53d)]=0x0,this[_0x5253ad(0x502)]=0x0,this[_0x5253ad(0x3b0)]=0x0,this[_0x5253ad(0x1f2)]=!0x1,this[_0x5253ad(0x4a5)]=!0x1,this[_0x5253ad(0x4c4)]=!0x0,this['nSurfaceTexture']=0x0,this[_0x5253ad(0x540)]=0x0,this[_0x5253ad(0x2a7)]=null,this[_0x5253ad(0x232)]=null,this['glLinePosBuffer']=0x0,this[_0x5253ad(0x4fc)]=0x0,this[_0x5253ad(0x350)]=0x0,this['nLineShaderProgram']=0x0,this[_0x5253ad(0x38b)]=null,this[_0x5253ad(0x23d)]=null,this['nMaxFillBlockTriNum']=0x0,this[_0x5253ad(0x383)]=0x0,this[_0x5253ad(0x50b)]=0x0,this[_0x5253ad(0x470)]=0x0,this[_0x5253ad(0x215)]=!0x1,this[_0x5253ad(0x2c3)]=null,this[_0x5253ad(0x53e)]=null,this['FTFace']=null,this[_0x5253ad(0x327)]=null,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this[_0x5253ad(0x2f6)]=0x0,this['pFontColorBuffer']=0x0,this[_0x5253ad(0x3c8)]=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this[_0x5253ad(0x2bc)]=!0x1,this[_0x5253ad(0x292)]=null,this[_0x5253ad(0x4d6)]=_0x3468da[_0x5253ad(0x3c1)],this[_0x5253ad(0x29e)]=-0x1,this[_0x5253ad(0x330)]=!0x1,this[_0x5253ad(0x2ea)]=null,this[_0x5253ad(0x2d7)]=null,this[_0x5253ad(0x340)]=0x0,this[_0x5253ad(0x53a)]=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this[_0x5253ad(0x4c0)]=null,this['nCylinderPosNum']=0x0,this[_0x5253ad(0x3ff)]=0x0,this[_0x5253ad(0x4f8)]=0x0,this[_0x5253ad(0x2c1)]=0x0,this['fCylinderRadius']=0x0,this[_0x5253ad(0x367)]=!0x1,this['pCamera']=null,this[_0x5253ad(0x3da)]=0x0,this[_0x5253ad(0x2a3)]=0x0,this[_0x5253ad(0x44a)]=0x0,this[_0x5253ad(0x229)]=null,this[_0x5253ad(0x46c)]=null,this[_0x5253ad(0x252)]=null,this[_0x5253ad(0x4d5)]=null,this[_0x5253ad(0x3dd)]=!0x0;}var _0xeda133;return _0x5a3b91(_0x27b1ac,[{'key':_0x41470a(0x2b3),'value':function(_0x463b67,_0x36ef02){var _0x102e79=_0x41470a,_0x183858=this['ctx'];if(null==_0x183858||null==_0x463b67||null==_0x36ef02)return-0x1;var _0x3b91c2=_0x183858[_0x102e79(0x4b9)](_0x183858[_0x102e79(0x45d)]);if(_0x183858[_0x102e79(0x2b9)](_0x3b91c2,_0x463b67),_0x183858[_0x102e79(0x305)](_0x3b91c2),!_0x183858[_0x102e79(0x218)](_0x3b91c2,_0x183858[_0x102e79(0x2aa)]))return console[_0x102e79(0x514)]('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x183858[_0x102e79(0x475)](_0x3b91c2)),-0x1;_0x463b67=_0x183858[_0x102e79(0x4b9)](_0x183858[_0x102e79(0x368)]);if(_0x183858[_0x102e79(0x2b9)](_0x463b67,_0x36ef02),_0x183858['compileShader'](_0x463b67),!_0x183858['getShaderParameter'](_0x463b67,_0x183858['COMPILE_STATUS']))return console[_0x102e79(0x514)](_0x102e79(0x347)+_0x183858['getShaderInfoLog'](_0x463b67)),-0x1;return _0x36ef02=_0x183858[_0x102e79(0x527)](),(_0x183858[_0x102e79(0x2f9)](_0x36ef02,_0x3b91c2),_0x183858[_0x102e79(0x2f9)](_0x36ef02,_0x463b67),_0x183858[_0x102e79(0x28f)](_0x36ef02),_0x183858[_0x102e79(0x348)](_0x36ef02,_0x183858[_0x102e79(0x3b4)])?(_0x183858[_0x102e79(0x30f)](_0x3b91c2),_0x183858[_0x102e79(0x30f)](_0x463b67),_0x36ef02):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x183858[_0x102e79(0x4df)](_0x36ef02)),-0x1));}},{'key':_0x41470a(0x3e5),'value':function(_0x505490){var _0x3f8e8b=_0x41470a;return null==_0x505490?_0x13949e['SR_ERR_PARAM']:(this[_0x3f8e8b(0x42d)]=_0x505490,this[_0x3f8e8b(0x51e)]=this[_0x3f8e8b(0x42d)]['getContext'](_0x3f8e8b(0x412)),this[_0x3f8e8b(0x51e)]||(this[_0x3f8e8b(0x51e)]=this['canvas'][_0x3f8e8b(0x2b2)]('webgl')||this[_0x3f8e8b(0x42d)][_0x3f8e8b(0x2b2)](_0x3f8e8b(0x1e4)),this[_0x3f8e8b(0x1f2)]=!0x0,console[_0x3f8e8b(0x514)](_0x3f8e8b(0x2ad))),this[_0x3f8e8b(0x51e)]?_0x13949e[_0x3f8e8b(0x4a6)]:(console['log'](_0x3f8e8b(0x3d2)),_0x13949e[_0x3f8e8b(0x4e3)]));}},{'key':_0x41470a(0x28d),'value':function(_0x4f5373){var _0x143117=_0x41470a;if(null==this['ctx'])return _0x13949e[_0x143117(0x2cf)];if(null==_0x4f5373)return _0x13949e[_0x143117(0x203)];if(0x0==this[_0x143117(0x1e9)]||0x0==this[_0x143117(0x52e)]||0x0==this['texturePosBuffer'])return _0x13949e['SR_ERR_CALL_ORDER'];if(this['frameDisplayWidth']==_0x4f5373[_0x143117(0x455)]&&this[_0x143117(0x3b0)]==_0x4f5373[_0x143117(0x436)]||(this[_0x143117(0x502)]=_0x4f5373['displayWidth'],this['frameDisplayHeight']=_0x4f5373[_0x143117(0x436)]),0x1==this['bRecreateTex']){0x0!=this[_0x143117(0x516)]&&(_0x47f13=this['nSurfaceTexture'],this[_0x143117(0x51e)][_0x143117(0x300)](_0x47f13),this['nSurfaceTexture']=0x0);var _0x47f13=this[_0x143117(0x51e)]['createTexture']();if(_0x47f13<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x310)](this[_0x143117(0x51e)][_0x143117(0x352)],_0x47f13),0x1==this['bAntialias']?this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx'][_0x143117(0x440)]):this[_0x143117(0x51e)][_0x143117(0x2af)](this['ctx'][_0x143117(0x352)],this[_0x143117(0x51e)][_0x143117(0x1d4)],this[_0x143117(0x51e)][_0x143117(0x20a)]),this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this['ctx'][_0x143117(0x4b4)],this[_0x143117(0x51e)][_0x143117(0x20a)]),this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this[_0x143117(0x51e)][_0x143117(0x4a0)],this['ctx'][_0x143117(0x3e7)]),this[_0x143117(0x51e)][_0x143117(0x2af)](this[_0x143117(0x51e)][_0x143117(0x352)],this['ctx'][_0x143117(0x3b5)],this[_0x143117(0x51e)]['CLAMP_TO_EDGE']),this[_0x143117(0x516)]=_0x47f13,this['bRecreateTex']=!0x1;}this[_0x143117(0x51e)][_0x143117(0x288)](this['videoShaderProgram']),this[_0x143117(0x51e)][_0x143117(0x408)](this['ctx'][_0x143117(0x2f4)],this[_0x143117(0x52e)]),_0x47f13=this[_0x143117(0x51e)][_0x143117(0x1ff)](this[_0x143117(0x1e9)],'xy');if(_0x47f13<0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)]['vertexAttribPointer'](_0x47f13,0x3,this['ctx'][_0x143117(0x4f2)],!0x1,0x0,0x0),this['ctx'][_0x143117(0x2e6)](_0x47f13),this[_0x143117(0x51e)][_0x143117(0x408)](this[_0x143117(0x51e)][_0x143117(0x2f4)],this['texturePosBuffer']),_0x47f13=this[_0x143117(0x51e)][_0x143117(0x1ff)](this[_0x143117(0x1e9)],'uv');if(_0x47f13<0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x3c2)](_0x47f13,0x2,this[_0x143117(0x51e)][_0x143117(0x4f2)],!0x1,0x0,0x0),this[_0x143117(0x51e)]['enableVertexAttribArray'](_0x47f13),this[_0x143117(0x51e)]['bindBuffer'](this[_0x143117(0x51e)][_0x143117(0x2f4)],null);var _0x5c403e=this[_0x143117(0x4d6)];switch(_0x5c403e){case _0x3468da[_0x143117(0x3c1)]:break;case _0x3468da[_0x143117(0x224)]:case _0x3468da[_0x143117(0x2b7)]:case _0x3468da[_0x143117(0x4c2)]:case _0x3468da['SR_DE_FISH_PTZ_WALL']:case _0x3468da[_0x143117(0x208)]:case _0x3468da[_0x143117(0x4f5)]:case _0x3468da[_0x143117(0x2f5)]:case _0x3468da[_0x143117(0x3a8)]:case _0x3468da['SR_DE_FISH_PANORAMA_WALL']:if(null==this[_0x143117(0x292)])return _0x13949e['SR_ERR_CALL_ORDER'];var _0x3d2401=[],_0x3980fd=this[_0x143117(0x292)]['GetRenderParam'](this[_0x143117(0x29e)],_0x3d2401);if(_0x13949e[_0x143117(0x4a6)]!=_0x3980fd)return _0x3980fd;if(_0x3468da[_0x143117(0x224)]==_0x5c403e){_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this['videoShaderProgram'],_0x143117(0x40f));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x2cc)](_0x3980fd,_0x3d2401['bBlack']),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x324));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x2cc)](_0x3980fd,_0x3d2401[_0x143117(0x324)]);}if(_0x3468da['SR_DE_FISH_PTZ_CEILING']==_0x5c403e||_0x3468da[_0x143117(0x4c2)]==_0x5c403e||_0x3468da['SR_DE_FISH_PTZ_WALL']==_0x5c403e){_0x3980fd=this['ctx'][_0x143117(0x2b6)](this[_0x143117(0x1e9)],'fHAngleCos');if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401['fCosH']),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x1e2));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)]['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x2ee)]),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],'fVAngleCos');if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401['fCosV']),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x528));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this['ctx']['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x3e0)]),_0x3980fd=this['ctx'][_0x143117(0x2b6)](this['videoShaderProgram'],_0x143117(0x3f4));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)]['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x3f4)]);}if(_0x3468da[_0x143117(0x208)]==_0x5c403e||_0x3468da[_0x143117(0x4f5)]==_0x5c403e||_0x3468da[_0x143117(0x2f5)]==_0x5c403e||_0x3468da[_0x143117(0x3a8)]==_0x5c403e){_0x3980fd=this['ctx']['getUniformLocation'](this[_0x143117(0x1e9)],_0x143117(0x314));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x314)]);}_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x1f8));if(_0x3980fd<=0x0)return _0x13949e['SR_ERR_WEBGL_RESOURCE'];this[_0x143117(0x51e)]['uniform1f'](_0x3980fd,_0x3d2401[_0x143117(0x27e)]),_0x3980fd=this['ctx']['getUniformLocation'](this[_0x143117(0x1e9)],_0x143117(0x3aa));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this['ctx'][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x469)]),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x34c));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x2bb)]),_0x3980fd=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x4ed));if(_0x3980fd<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x271)](_0x3980fd,_0x3d2401[_0x143117(0x2e9)]);break;case _0x3468da[_0x143117(0x2e3)]:this[_0x143117(0x2e1)][_0x143117(0x26d)](this['fScale']),this[_0x143117(0x2e1)][_0x143117(0x458)](3.14-this['fRotateX']),this[_0x143117(0x2e1)][_0x143117(0x210)](-this[_0x143117(0x2a3)]),this[_0x143117(0x2e1)][_0x143117(0x34a)](this[_0x143117(0x42d)]['width'],this['canvas'][_0x143117(0x483)]);var _0x3980fd=this['pCamera'][_0x143117(0x522)](),_0x3d2401=this['pCamera'][_0x143117(0x25a)](),_0x44bf90=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],'matView');if(_0x44bf90<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x479)](_0x44bf90,!0x1,_0x3980fd),_0x44bf90=this['ctx']['getUniformLocation'](this[_0x143117(0x1e9)],_0x143117(0x1d6));if(_0x44bf90<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x479)](_0x44bf90,!0x1,_0x3d2401);break;case _0x3468da['SR_DE_FISH_CYLINDER_CEILING']:case _0x3468da[_0x143117(0x3a9)]:this[_0x143117(0x2e1)][_0x143117(0x26d)](this['fScale']),this[_0x143117(0x2e1)][_0x143117(0x458)](-this[_0x143117(0x3da)]),this[_0x143117(0x2e1)][_0x143117(0x210)](-this[_0x143117(0x2a3)]),this[_0x143117(0x2e1)][_0x143117(0x34a)](this['canvas'][_0x143117(0x36f)],this['canvas'][_0x143117(0x483)]),(_0x3980fd=this['pCamera'][_0x143117(0x522)](),_0x44bf90=this['pCamera'][_0x143117(0x25a)](),_0x3d2401=this[_0x143117(0x51e)][_0x143117(0x2b6)](this[_0x143117(0x1e9)],_0x143117(0x1f7)));if(_0x3d2401<=0x0)return _0x13949e[_0x143117(0x392)];this[_0x143117(0x51e)][_0x143117(0x479)](_0x3d2401,!0x1,_0x3980fd),_0x3d2401=this[_0x143117(0x51e)][_0x143117(0x2b6)](this['videoShaderProgram'],_0x143117(0x1d6));if(_0x3d2401<=0x0)return _0x13949e[_0x143117(0x392)];this['ctx']['uniformMatrix4fv'](_0x3d2401,!0x1,_0x44bf90);}if(this['canvas'][_0x143117(0x36f)]<=0x0||this[_0x143117(0x42d)][_0x143117(0x483)]<=0x0)return _0x13949e['SR_ERR_CANVAS'];if(this[_0x143117(0x51e)][_0x143117(0x2e8)](0x0,0x0,this['canvas'][_0x143117(0x36f)],this[_0x143117(0x42d)][_0x143117(0x483)]),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx'][_0x143117(0x3c3)](this[_0x143117(0x51e)][_0x143117(0x546)]|this['ctx'][_0x143117(0x2ce)]),this[_0x143117(0x367)]&&(this[_0x143117(0x51e)][_0x143117(0x3ce)](this[_0x143117(0x51e)][_0x143117(0x3cb)]),this[_0x143117(0x51e)][_0x143117(0x4ce)](this[_0x143117(0x51e)][_0x143117(0x36a)]),this[_0x143117(0x51e)]['depthMask'](!0x0),0x1==this[_0x143117(0x3dd)]?this[_0x143117(0x51e)][_0x143117(0x3ce)](this[_0x143117(0x51e)][_0x143117(0x238)]):this[_0x143117(0x51e)]['disable'](this[_0x143117(0x51e)]['CULL_FACE'])),this['ctx'][_0x143117(0x27d)](this[_0x143117(0x51e)][_0x143117(0x352)],0x0,this[_0x143117(0x51e)][_0x143117(0x45a)],this[_0x143117(0x51e)][_0x143117(0x45a)],this['ctx'][_0x143117(0x22b)],_0x4f5373),0x1==this[_0x143117(0x4a5)]&&this[_0x143117(0x51e)][_0x143117(0x22a)](this[_0x143117(0x51e)][_0x143117(0x352)]),this[_0x143117(0x1f2)]||this[_0x143117(0x51e)][_0x143117(0x446)](this[_0x143117(0x51e)][_0x143117(0x361)],0x0,0x1,0x0),0x0==this[_0x143117(0x367)])this[_0x143117(0x51e)][_0x143117(0x52a)](this[_0x143117(0x51e)]['TRIANGLE_FAN'],0x0,0x4);else{if(this[_0x143117(0x4d6)]==_0x3468da[_0x143117(0x2e3)]){if(this[_0x143117(0x340)]<=0x0)return _0x13949e[_0x143117(0x2cf)];this[_0x143117(0x51e)]['drawArrays'](this['ctx'][_0x143117(0x526)],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x3468da[_0x143117(0x4dc)]){if(this[_0x143117(0x312)]<=0x0)return _0x13949e[_0x143117(0x2cf)];this[_0x143117(0x51e)][_0x143117(0x52a)](this[_0x143117(0x51e)][_0x143117(0x526)],0x0,this[_0x143117(0x312)]);}}}return this[_0x143117(0x51e)][_0x143117(0x288)](null),0x0==this[_0x143117(0x330)]&&null!=this[_0x143117(0x292)]&&-0x1!=(_0x47f13=this[_0x143117(0x292)]['GetWndPort']())&&_0x47f13==this['nFECPort']&&this['DrawPTZLines'](),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this[_0x143117(0x252)]),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this[_0x143117(0x4d5)]),_0x13949e[_0x143117(0x4a6)];}},{'key':_0x41470a(0x22f),'value':function(){var _0x21e98b=_0x41470a;if(null==this[_0x21e98b(0x292)])return _0x13949e['SR_ERR_CALL_ORDER'];for(var _0x5c7f1e=this['pFishParamManager'][_0x21e98b(0x40b)](),_0x2db678=0x0,_0x40dedc=[],_0x418a7a=(_0x40dedc['fR']=0x0,_0x40dedc['fG']=0x0,_0x40dedc['fB']=0x0,_0x40dedc['fA']=0x0,_0x13949e[_0x21e98b(0x4a6)]),_0x11b4fb=0x0;_0x11b4fb<0x20;++_0x11b4fb)if(0x0!=this[_0x21e98b(0x292)][_0x21e98b(0x1dd)](_0x11b4fb)){if(_0x2db678=0x2,_0x418a7a=this[_0x21e98b(0x292)][_0x21e98b(0x1f6)](_0x11b4fb,_0x40dedc),_0x13949e[_0x21e98b(0x4a6)]!=_0x418a7a)return _0x418a7a;0x1==this[_0x21e98b(0x292)][_0x21e98b(0x303)](_0x11b4fb)&&(_0x2db678+=0x1);var _0x138fa4=this[_0x21e98b(0x292)][_0x21e98b(0x289)]();if(_0x11b4fb!=_0x138fa4&&_0x46c232==_0x5c7f1e){if(_0x3468da[_0x21e98b(0x224)]==this['pFishParamManager'][_0x21e98b(0x4ad)](_0x138fa4)){var _0x4ac4c6=[],_0x418a7a=this[_0x21e98b(0x292)][_0x21e98b(0x4a4)](_0x11b4fb,_0x4ac4c6,_0x46c232);if(_0x13949e['SR_OK']!=_0x418a7a)return _0x418a7a;if(null!=_0x4ac4c6[_0x21e98b(0x2f3)]&&0x0!=_0x4ac4c6[_0x21e98b(0x216)]&&(_0x418a7a=this[_0x21e98b(0x3ec)](_0x4ac4c6[_0x21e98b(0x2f3)],_0x4ac4c6[_0x21e98b(0x216)],!0x0,_0x40dedc,_0x2db678,!0x1),_0x13949e[_0x21e98b(0x4a6)]!=_0x418a7a))return _0x418a7a;}}else{if(_0x11b4fb!=_0x138fa4&&_0xba837==_0x5c7f1e){_0x4ac4c6=[];if(_0x418a7a=this['pFishParamManager'][_0x21e98b(0x4a4)](_0x11b4fb,_0x4ac4c6,_0xba837),_0x13949e[_0x21e98b(0x4a6)]!=_0x418a7a)return _0x418a7a;if(null!=_0x4ac4c6['pstPoints']&&0x0!=_0x4ac4c6[_0x21e98b(0x216)]&&(_0x418a7a=this[_0x21e98b(0x3ec)](_0x4ac4c6[_0x21e98b(0x2f3)],_0x4ac4c6['nPointNum'],!0x0,_0x40dedc,_0x2db678,!0x1),_0x13949e['SR_OK']!=_0x418a7a))return _0x418a7a;}}}return _0x13949e['SR_OK'];}},{'key':_0x41470a(0x259),'value':function(_0x4ffb5a,_0x516320,_0xdba9c2){var _0x5754c5=_0x41470a;if(null==this[_0x5754c5(0x51e)])return _0x13949e[_0x5754c5(0x2cf)];if(null==_0x4ffb5a||_0x516320<0x1||_0xdba9c2<0x2)return _0x13949e[_0x5754c5(0x203)];for(var _0x9b8d10=0x0,_0x2fc8f5=0x0;_0x2fc8f5<_0x516320;++_0x2fc8f5){if(null==_0x4ffb5a[_0x2fc8f5][_0x5754c5(0x2f3)]||_0x4ffb5a[_0x2fc8f5]['nPointNum']<0x3||!0x0!==_0x4ffb5a[_0x2fc8f5]['bLoop']||null==_0x4ffb5a[_0x2fc8f5][_0x5754c5(0x36d)])return _0x13949e[_0x5754c5(0x203)];_0x9b8d10+=_0x4ffb5a[_0x2fc8f5][_0x5754c5(0x216)];}if(_0x9b8d10!==_0xdba9c2)return _0x13949e['SR_ERR_PARAM'];_0xdba9c2-=0x2*_0x516320;if(_0xdba9c2>this[_0x5754c5(0x453)]&&(this[_0x5754c5(0x38b)]=null,this[_0x5754c5(0x23d)]=null,this['nMaxFillBlockTriNum']=_0xdba9c2),0x0==this[_0x5754c5(0x383)]&&(this[_0x5754c5(0x383)]=this[_0x5754c5(0x51e)]['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x13949e['SR_ERR_WEBGL_RESOURCE'];if(0x0==this['glBlockClrBuffer']&&(this[_0x5754c5(0x50b)]=this[_0x5754c5(0x51e)][_0x5754c5(0x33d)](),0x0==this['glBlockClrBuffer']))return _0x13949e[_0x5754c5(0x392)];if(null==this['pFillBlockPosVertices']){var _0x55889b=this[_0x5754c5(0x453)];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x55889b*0x3),null==this['pFillBlockPosVertices'])return _0x13949e[_0x5754c5(0x37b)];}if(this[_0x5754c5(0x38b)][_0x5754c5(0x542)](0x0),null==this['pFillBlockClrVertices']){_0x55889b=this[_0x5754c5(0x453)];if(this[_0x5754c5(0x23d)]=new Float32Array(0x4*_0x55889b*0x3),null==this['pFillBlockClrVertices'])return _0x13949e['SR_ERR_ALLOC_MEMORY'];}this[_0x5754c5(0x23d)][_0x5754c5(0x542)](0x0);for(var _0x62c238,_0x556e0e,_0x3049d4,_0x40a2cd=0x0,_0x4a74bd=0x0,_0x432cca={},_0x54c665={},_0x127802={},_0x1d4117=0x0;_0x1d4117<_0x516320;++_0x1d4117){_0x62c238=_0x4ffb5a[_0x1d4117][_0x5754c5(0x216)],_0x556e0e=_0x4ffb5a[_0x1d4117]['pstPoints'],_0x3049d4=_0x4ffb5a[_0x1d4117]['pstColor'],_0x432cca['fX']=0x2*_0x556e0e[0x0]['fX']-0x1,_0x432cca['fY']=0x1-0x2*_0x556e0e[0x0]['fY'];for(var _0xf077f4=0x1;_0xf077f4<_0x62c238-0x1;_0xf077f4++)_0x54c665['fX']=0x2*_0x556e0e[_0xf077f4]['fX']-0x1,_0x54c665['fY']=0x1-0x2*_0x556e0e[_0xf077f4]['fY'],_0x127802['fX']=0x2*_0x556e0e[_0xf077f4+0x1]['fX']-0x1,_0x127802['fY']=0x1-0x2*_0x556e0e[_0xf077f4+0x1]['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x432cca['fX'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x432cca['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=0x0,this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fR'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fG'],this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fB'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fA'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x54c665['fX'],this['pFillBlockPosVertices'][_0x40a2cd++]=_0x54c665['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=0x0,this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fR'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fG'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fB'],this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fA'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x127802['fX'],this[_0x5754c5(0x38b)][_0x40a2cd++]=_0x127802['fY'],this[_0x5754c5(0x38b)][_0x40a2cd++]=0x0,this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fR'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fG'],this['pFillBlockClrVertices'][_0x4a74bd++]=_0x3049d4['fB'],this[_0x5754c5(0x23d)][_0x4a74bd++]=_0x3049d4['fA'];}if(0x0==this[_0x5754c5(0x470)]&&(this[_0x5754c5(0x470)]=this['CompileProgram'](_0x5971cc,_0x466d10),0x0==this[_0x5754c5(0x470)]))return _0x13949e[_0x5754c5(0x392)];return this[_0x5754c5(0x51e)]['enable'](this[_0x5754c5(0x51e)]['BLEND']),this['ctx'][_0x5754c5(0x263)](this['ctx'][_0x5754c5(0x275)],this[_0x5754c5(0x51e)][_0x5754c5(0x231)]),this[_0x5754c5(0x51e)][_0x5754c5(0x408)](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],this[_0x5754c5(0x383)]),this['ctx'][_0x5754c5(0x416)](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],this['pFillBlockPosVertices'],this['ctx'][_0x5754c5(0x33a)]),this['ctx']['bindBuffer'](this['ctx'][_0x5754c5(0x2f4)],null),this[_0x5754c5(0x51e)][_0x5754c5(0x408)](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],this['glBlockClrBuffer']),this[_0x5754c5(0x51e)]['bufferData'](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],this[_0x5754c5(0x23d)],this[_0x5754c5(0x51e)][_0x5754c5(0x33a)]),this['ctx']['bindBuffer'](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],null),this['ctx'][_0x5754c5(0x288)](this[_0x5754c5(0x470)]),this['ctx']['bindBuffer'](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],this[_0x5754c5(0x383)]),(_0x55889b=this[_0x5754c5(0x51e)]['getAttribLocation'](this[_0x5754c5(0x470)],_0x5754c5(0x3ef)),this['ctx'][_0x5754c5(0x2e6)](_0x55889b),this['ctx'][_0x5754c5(0x3c2)](_0x55889b,0x3,this[_0x5754c5(0x51e)]['FLOAT'],!0x1,0x0,0x0),this[_0x5754c5(0x51e)]['bindBuffer'](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],null),this['ctx'][_0x5754c5(0x408)](this[_0x5754c5(0x51e)][_0x5754c5(0x2f4)],this['glBlockClrBuffer']),_0x55889b=this['ctx'][_0x5754c5(0x1ff)](this['nBlockShaderProgram'],_0x5754c5(0x35e))),(this[_0x5754c5(0x51e)]['enableVertexAttribArray'](_0x55889b),this[_0x5754c5(0x51e)][_0x5754c5(0x3c2)](_0x55889b,0x4,this[_0x5754c5(0x51e)]['FLOAT'],!0x1,0x0,0x0),this['ctx'][_0x5754c5(0x408)](this[_0x5754c5(0x51e)]['ARRAY_BUFFER'],null),this['ctx'][_0x5754c5(0x52a)](this[_0x5754c5(0x51e)][_0x5754c5(0x526)],0x0,0x3*_0xdba9c2),this[_0x5754c5(0x51e)]['useProgram'](null),this[_0x5754c5(0x51e)][_0x5754c5(0x54d)](this[_0x5754c5(0x51e)]['BLEND']),_0x13949e[_0x5754c5(0x4a6)]);}},{'key':_0x41470a(0x34d),'value':function(_0x28db65,_0x57df95){var _0x2eb24d=_0x41470a;if(null==_0x28db65||_0x57df95<0x1)return _0x13949e['SR_ERR_PARAM'];if(null==this[_0x2eb24d(0x2a7)]||null==this[_0x2eb24d(0x232)])return _0x13949e['SR_ERR_CALL_ORDER'];for(var _0x5593d4,_0x4b76b4,_0x524d66=0x0,_0x407140=0x0,_0x45c10c=0x0,_0xed833=0x0,_0x4eace5=0x0,_0x5a4396=0x0,_0x59928b=0x0,_0x55d38a=0x0,_0x3c5f70=0x0;_0x3c5f70<_0x57df95;++_0x3c5f70){var _0x2a48b3=[],_0x3ab94b=_0x28db65[_0x3c5f70][_0x2eb24d(0x216)];if(!(_0x3ab94b<=0x0)){for(var _0x4ac18a=0x0;_0x4ac18a<_0x3ab94b;++_0x4ac18a){var _0x584e8d={};_0x584e8d['fX']=_0x28db65[_0x3c5f70]['pstPoints'][_0x4ac18a]['fX'],_0x584e8d['fX']=0x2*_0x584e8d['fX']-0x1,_0x584e8d['fY']=_0x28db65[_0x3c5f70]['pstPoints'][_0x4ac18a]['fY'],_0x584e8d['fY']=0x1-0x2*_0x584e8d['fY'],_0x2a48b3[_0x2eb24d(0x51d)](_0x584e8d);}if(this[_0x2eb24d(0x42d)][_0x2eb24d(0x36f)]<=0x0||this[_0x2eb24d(0x42d)][_0x2eb24d(0x483)]<=0x0)return _0x13949e[_0x2eb24d(0x4e3)];if(_0x5593d4=3.5*_0x28db65[_0x3c5f70][_0x2eb24d(0x205)]/this[_0x2eb24d(0x42d)][_0x2eb24d(0x36f)],_0x4b76b4=3.5*_0x28db65[_0x3c5f70][_0x2eb24d(0x205)]/this[_0x2eb24d(0x42d)]['height'],_0x5593d4<=0x0||_0x4b76b4<=0x0)return _0x13949e['SR_ERR_PARAM'];var _0x34199d=_0x28db65[_0x3c5f70][_0x2eb24d(0x36d)];if(null==_0x34199d)return _0x13949e[_0x2eb24d(0x203)];for(var _0x57e7a3=0x0;_0x57e7a3<_0x3ab94b-0x1;++_0x57e7a3)_0x407140=_0x2a48b3[_0x57e7a3+0x1]['fX']-_0x2a48b3[_0x57e7a3]['fX'],_0x45c10c=_0x2a48b3[_0x57e7a3+0x1]['fY']-_0x2a48b3[_0x57e7a3]['fY'],_0x524d66=Math[_0x2eb24d(0x41c)](_0x407140*_0x407140+_0x45c10c*_0x45c10c),Math['abs'](+_0x524d66)<0.000001||(_0x4eace5=_0x4b76b4*_0x407140/_0x524d66/0x2,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fX']+(_0xed833=-_0x5593d4*_0x45c10c/_0x524d66/0x2),this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fY']+_0x4eace5,this['pLinePosVertices'][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x57e7a3+0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],_0x5a4396+=0x2);0x1==_0x28db65[_0x3c5f70][_0x2eb24d(0x431)]&&0x2<_0x3ab94b&&(_0x407140=_0x2a48b3[_0x3ab94b-0x1]['fX']-_0x2a48b3[0x0]['fX'],_0x45c10c=_0x2a48b3[_0x3ab94b-0x1]['fY']-_0x2a48b3[0x0]['fY'],_0x524d66=Math[_0x2eb24d(0x41c)](_0x407140*_0x407140+_0x45c10c*_0x45c10c),0.000001<Math[_0x2eb24d(0x1e6)](+_0x524d66)&&(_0x4eace5=_0x4b76b4*_0x407140/_0x524d66/0x2,this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[0x0]['fX']+(_0xed833=-_0x5593d4*_0x45c10c/_0x524d66/0x2),this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fX']-_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[0x0]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[0x0]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fA'],this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fX']+_0xed833,this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fY']+_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=-0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fG'],this['pLineClrVertices'][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],this[_0x2eb24d(0x2a7)][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fX']-_0xed833,this['pLinePosVertices'][_0x59928b++]=_0x2a48b3[_0x3ab94b-0x1]['fY']-_0x4eace5,this[_0x2eb24d(0x2a7)][_0x59928b++]=0x1,this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fR'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fG'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fB'],this[_0x2eb24d(0x232)][_0x55d38a++]=_0x34199d['fA'],_0x5a4396+=0x2));}}return 0x0==_0x5a4396?_0x13949e[_0x2eb24d(0x203)]:(this[_0x2eb24d(0x350)]=_0x5a4396,_0x13949e['SR_OK']);}},{'key':_0x41470a(0x3ec),'value':function(_0x4a4177,_0x34d8db,_0xccb171,_0x4fa834,_0x405218,_0x5c4f68){var _0xd97f84=_0x41470a,_0x222e90=[],_0x3a1a9f=[];return _0x3a1a9f[_0xd97f84(0x2f3)]=_0x4a4177,_0x3a1a9f[_0xd97f84(0x216)]=_0x34d8db,_0x3a1a9f['bLoop']=_0xccb171,_0x3a1a9f[_0xd97f84(0x36d)]=_0x4fa834,_0x3a1a9f[_0xd97f84(0x205)]=_0x405218,_0x222e90[_0xd97f84(0x51d)](_0x3a1a9f),this[_0xd97f84(0x267)](_0x222e90,0x1,_0x34d8db,_0x5c4f68);}},{'key':_0x41470a(0x267),'value':function(_0xaafb4d,_0x2e3bb7,_0x165451,_0x1094cc){var _0x20ab7d=_0x41470a;if(null==this[_0x20ab7d(0x51e)])return _0x13949e[_0x20ab7d(0x2cf)];if(null==_0xaafb4d||_0x2e3bb7<0x1||_0x165451<0x2)return _0x13949e[_0x20ab7d(0x203)];if(0x0==this[_0x20ab7d(0x37f)]){var _0x528a0a=this[_0x20ab7d(0x2b3)](_0x5971cc,_0x466d10);if(_0x528a0a<=0x0)return _0x13949e['SR_ERR_WEBGL_RESOURCE'];this[_0x20ab7d(0x37f)]=_0x528a0a;}if(0x1==_0x1094cc)return this['DrawFillBlock'](_0xaafb4d,_0x2e3bb7,_0x165451);for(var _0x22b4cb=0x0,_0x2bc3e4=0x0;_0x2bc3e4<_0x2e3bb7;++_0x2bc3e4){if(null==_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x2f3)]||_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x216)]<=0x1||0x400<=_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x216)]||_0xaafb4d[_0x2bc3e4]['nLineWidth']<=0x0||null==_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x36d)])return _0x13949e['SR_ERR_PARAM'];_0x22b4cb+=_0xaafb4d[_0x2bc3e4][_0x20ab7d(0x216)];}if(_0x22b4cb!=_0x165451)return _0x13949e[_0x20ab7d(0x203)];if((_0x22b4cb+=_0x2e3bb7)>this[_0x20ab7d(0x540)]&&(this[_0x20ab7d(0x540)]=_0x22b4cb,this['pLinePosVertices']=null,this[_0x20ab7d(0x232)]=null),null==this['pLinePosVertices']&&(this[_0x20ab7d(0x2a7)]=new Float32Array(0x6*this[_0x20ab7d(0x540)]*0x3),null==this['pLinePosVertices']))return _0x13949e[_0x20ab7d(0x37b)];if(this[_0x20ab7d(0x2a7)][_0x20ab7d(0x542)](0x0),null==this['pLineClrVertices']&&(this[_0x20ab7d(0x232)]=new Float32Array(0x6*this[_0x20ab7d(0x540)]*0x4),null==this[_0x20ab7d(0x232)]))return _0x13949e[_0x20ab7d(0x37b)];if(this[_0x20ab7d(0x232)][_0x20ab7d(0x542)](0x0),0x0==this[_0x20ab7d(0x442)]&&(this[_0x20ab7d(0x442)]=this[_0x20ab7d(0x51e)][_0x20ab7d(0x33d)](),0x0==this['glLinePosBuffer']))return _0x13949e[_0x20ab7d(0x392)];if(0x0==this[_0x20ab7d(0x4fc)]&&(this[_0x20ab7d(0x4fc)]=this[_0x20ab7d(0x51e)]['createBuffer'](),0x0==this[_0x20ab7d(0x4fc)]))return _0x13949e[_0x20ab7d(0x392)];_0x528a0a=this[_0x20ab7d(0x34d)](_0xaafb4d,_0x2e3bb7);if(_0x13949e[_0x20ab7d(0x4a6)]!=_0x528a0a)return _0x528a0a;this[_0x20ab7d(0x51e)][_0x20ab7d(0x3ce)](this[_0x20ab7d(0x51e)]['BLEND']),this['ctx'][_0x20ab7d(0x263)](this[_0x20ab7d(0x51e)]['SRC_ALPHA'],this[_0x20ab7d(0x51e)][_0x20ab7d(0x231)]);var _0x1094cc=this[_0x20ab7d(0x37f)],_0x165451=(this['ctx']['useProgram'](_0x1094cc),this[_0x20ab7d(0x442)]),_0x528a0a=this[_0x20ab7d(0x4fc)],_0x3bbd21=this[_0x20ab7d(0x350)],_0x3023ba=this[_0x20ab7d(0x2a7)],_0x25978a=this[_0x20ab7d(0x232)],_0x165451=(this[_0x20ab7d(0x51e)]['bindBuffer'](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x165451),this[_0x20ab7d(0x51e)][_0x20ab7d(0x416)](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x3023ba,this[_0x20ab7d(0x51e)][_0x20ab7d(0x33a)]),this[_0x20ab7d(0x51e)]['getAttribLocation'](_0x1094cc,_0x20ab7d(0x3ef))),_0x3023ba=(this[_0x20ab7d(0x51e)][_0x20ab7d(0x2e6)](_0x165451),this[_0x20ab7d(0x51e)]['vertexAttribPointer'](_0x165451,0x3,this[_0x20ab7d(0x51e)][_0x20ab7d(0x4f2)],!0x1,0x0,0x0),this[_0x20ab7d(0x51e)]['bindBuffer'](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x528a0a),this[_0x20ab7d(0x51e)][_0x20ab7d(0x416)](this[_0x20ab7d(0x51e)][_0x20ab7d(0x2f4)],_0x25978a,this[_0x20ab7d(0x51e)][_0x20ab7d(0x33a)]),this[_0x20ab7d(0x51e)][_0x20ab7d(0x1ff)](_0x1094cc,_0x20ab7d(0x35e)));return this[_0x20ab7d(0x51e)][_0x20ab7d(0x2e6)](_0x3023ba),this[_0x20ab7d(0x51e)]['vertexAttribPointer'](_0x3023ba,0x4,this[_0x20ab7d(0x51e)][_0x20ab7d(0x4f2)],!0x1,0x0,0x0),this['ctx'][_0x20ab7d(0x408)](this[_0x20ab7d(0x51e)]['ARRAY_BUFFER'],null),this['ctx'][_0x20ab7d(0x2e8)](0x0,0x0,this['canvas'][_0x20ab7d(0x36f)],this['canvas']['height']),this['ctx'][_0x20ab7d(0x52a)](this[_0x20ab7d(0x51e)][_0x20ab7d(0x526)],0x0,0x3*_0x3bbd21),this[_0x20ab7d(0x51e)][_0x20ab7d(0x288)](null),this['ctx'][_0x20ab7d(0x54d)](this[_0x20ab7d(0x51e)]['BLEND']),_0x13949e['SR_OK'];}},{'key':'FreetypeWasmLoadedCB','value':(_0xeda133=_0x30bbb2(_0x148935()[_0x41470a(0x230)](function _0x2b5372(_0x47f994){var _0x375965=_0x41470a,_0x1f3bcb,_0x5ce856,_0x4d82c7,_0x510b2e,_0x23723e,_0x28c851,_0x532f41,_0x55abd6;return _0x148935()[_0x375965(0x398)](function(_0x30bfe0){var _0x56e15d=_0x375965;for(;;)switch(_0x30bfe0[_0x56e15d(0x4e1)]=_0x30bfe0[_0x56e15d(0x500)]){case 0x0:if(null==_0x47f994)return _0x30bfe0[_0x56e15d(0x413)]('return');_0x30bfe0[_0x56e15d(0x500)]=0x2;break;case 0x2:if(null==(_0x5ce856=(_0x1f3bcb=_0x47f994)[_0x56e15d(0x53e)]))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x203)]);_0x30bfe0['next']=0x6;break;case 0x6:if(null==(_0x4d82c7=new _0x1bf079()))return _0x30bfe0[_0x56e15d(0x413)]('return',_0x13949e['SR_ERR_ALLOC_MEMORY']);_0x30bfe0[_0x56e15d(0x500)]=0x9;break;case 0x9:if((_0x510b2e=_0x5ce856[_0x56e15d(0x2bd)](_0x4d82c7))!==_0x5342a5['Ok'])throw new Error(_0x5ce856[_0x56e15d(0x2d0)](_0x510b2e));_0x30bfe0['next']=0xc;break;case 0xc:if(null==_0x1f3bcb['pFontPath']||null==_0x1f3bcb[_0x56e15d(0x2c3)])return _0x30bfe0[_0x56e15d(0x413)]('return',_0x13949e['SR_ERR_CALL_ORDER']);_0x30bfe0[_0x56e15d(0x500)]=0xe;break;case 0xe:return _0x30bfe0['next']=0x10,fetch(_0x1f3bcb[_0x56e15d(0x2c3)]);case 0x10:if(null==(_0x23723e=_0x30bfe0['sent']))return _0x30bfe0['abrupt'](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x1fd)]);_0x30bfe0[_0x56e15d(0x500)]=0x13;break;case 0x13:return _0x30bfe0[_0x56e15d(0x500)]=0x15,_0x23723e[_0x56e15d(0x505)]();case 0x15:if(null==(_0x28c851=_0x30bfe0[_0x56e15d(0x20c)]))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e['SR_ERR_FREETYPE_INIT']);_0x30bfe0[_0x56e15d(0x500)]=0x18;break;case 0x18:if(null==(_0x532f41=new Uint8Array(_0x28c851)))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x1fd)]);_0x30bfe0[_0x56e15d(0x500)]=0x1b;break;case 0x1b:if(null==(_0x55abd6=new _0x125374()))return _0x30bfe0[_0x56e15d(0x413)](_0x56e15d(0x26c),_0x13949e[_0x56e15d(0x1fd)]);_0x30bfe0[_0x56e15d(0x500)]=0x1e;break;case 0x1e:if((_0x510b2e=_0x5ce856['New_Memory_Face'](_0x4d82c7,_0x532f41,0x0,_0x55abd6))!==_0x5342a5['Ok'])throw _0x1f3bcb[_0x56e15d(0x53e)]=null,new Error(_0x5ce856['Error_String'](_0x510b2e));_0x30bfe0[_0x56e15d(0x500)]=0x22;break;case 0x22:_0x1f3bcb['FTLibrary']=_0x4d82c7,_0x1f3bcb[_0x56e15d(0x395)]=_0x55abd6;case 0x24:case _0x56e15d(0x30a):return _0x30bfe0[_0x56e15d(0x43b)]();}},_0x2b5372);})),function(_0x39716a){var _0x437f2d=_0x41470a;return _0xeda133[_0x437f2d(0x4f6)](this,arguments);})},{'key':'SR_SetFontPath','value':function(_0x46c401,_0x18051d){var _0x532d8c=_0x41470a;if(null==_0x18051d)return _0x13949e[_0x532d8c(0x203)];if(!this[_0x532d8c(0x215)]){var _0x1f5dff=new _0x30397f();if(null==_0x1f5dff)return _0x13949e[_0x532d8c(0x3ea)];this[_0x532d8c(0x2c3)]=_0x18051d,_0x18051d=this[_0x532d8c(0x488)],((this[_0x532d8c(0x53e)]=_0x1f5dff)[_0x532d8c(0x297)](_0x46c401,_0x18051d,this),this[_0x532d8c(0x215)]=!0x0);}return _0x13949e['SR_OK'];}},{'key':_0x41470a(0x379),'value':function(_0x3e4f00,_0x3689e6,_0x4c723c,_0x28420d,_0x146901,_0x204aaa,_0x1bd6b4){var _0x1071b4=_0x41470a;if(null==_0x3e4f00||null==_0x3689e6||null==_0x4c723c||_0x28420d<=0x1||_0x146901<=0x1)return _0x13949e[_0x1071b4(0x203)];if(0x1==_0x204aaa&&null==_0x1bd6b4)return _0x13949e['SR_ERR_PARAM'];var _0x512635=[],_0x34cf0f=[];return _0x34cf0f[_0x1071b4(0x4c6)]=_0x204aaa,_0x34cf0f[_0x1071b4(0x1de)]=_0x28420d,_0x34cf0f['nFontHeight']=_0x146901,_0x34cf0f[_0x1071b4(0x251)]=_0x1bd6b4,_0x34cf0f[_0x1071b4(0x50f)]=_0x4c723c,_0x34cf0f[_0x1071b4(0x26a)]=_0x3e4f00,_0x34cf0f[_0x1071b4(0x386)]=_0x3689e6,_0x512635[_0x1071b4(0x51d)](_0x34cf0f),this['SR_DrawFontEx'](_0x512635,0x1);}},{'key':'SR_DrawFontEx','value':function(_0x2b650a,_0x4dd772){var _0x884ebc=_0x41470a;if(null==this[_0x884ebc(0x51e)]||null==this[_0x884ebc(0x53e)])return _0x13949e['SR_ERR_CALL_ORDER'];if(_0x4dd772<0x0||null==_0x2b650a)return _0x13949e['SR_ERR_PARAM'];if(this[_0x884ebc(0x391)]==this[_0x884ebc(0x42d)][_0x884ebc(0x36f)]/0x4*0x4&&this['canvas'][_0x884ebc(0x483)]==this[_0x884ebc(0x2f1)]/0x4*0x4||(this[_0x884ebc(0x2a6)]=null,this[_0x884ebc(0x2f6)]=0x0,this[_0x884ebc(0x391)]=this[_0x884ebc(0x42d)]['width']/0x4*0x4,this[_0x884ebc(0x457)]=this[_0x884ebc(0x42d)][_0x884ebc(0x483)]/0x4*0x4),null==this[_0x884ebc(0x2a6)]||0x0==this[_0x884ebc(0x2f6)]){if(this[_0x884ebc(0x2a6)]=new Uint8Array(this[_0x884ebc(0x391)]*this['nDrawFontHeight']*0x4),null==this['pFontColorBuffer'])return _0x13949e[_0x884ebc(0x37b)];if(this[_0x884ebc(0x2a6)][_0x884ebc(0x542)](0x0),this['nFontColorTexture']=this[_0x884ebc(0x51e)][_0x884ebc(0x415)](),0x0==this[_0x884ebc(0x2f6)])return _0x13949e[_0x884ebc(0x392)];this[_0x884ebc(0x51e)][_0x884ebc(0x310)](this[_0x884ebc(0x51e)][_0x884ebc(0x352)],this[_0x884ebc(0x2f6)]),this['ctx'][_0x884ebc(0x2af)](this[_0x884ebc(0x51e)][_0x884ebc(0x352)],this[_0x884ebc(0x51e)][_0x884ebc(0x4b4)],this[_0x884ebc(0x51e)][_0x884ebc(0x20a)]),this[_0x884ebc(0x51e)]['texParameteri'](this['ctx'][_0x884ebc(0x352)],this[_0x884ebc(0x51e)][_0x884ebc(0x1d4)],this['ctx'][_0x884ebc(0x20a)]),this[_0x884ebc(0x51e)][_0x884ebc(0x2af)](this['ctx'][_0x884ebc(0x352)],this[_0x884ebc(0x51e)]['TEXTURE_WRAP_S'],this[_0x884ebc(0x51e)][_0x884ebc(0x3e7)]),this[_0x884ebc(0x51e)][_0x884ebc(0x2af)](this[_0x884ebc(0x51e)][_0x884ebc(0x352)],this[_0x884ebc(0x51e)][_0x884ebc(0x3b5)],this['ctx']['CLAMP_TO_EDGE']);}for(var _0x2c2a19=0x0,_0x2320a4=0x0;_0x2320a4<_0x4dd772;_0x2320a4++)_0x2b650a[_0x2320a4][_0x884ebc(0x513)]&&_0x2c2a19++;if(this['nFontBGNum']<_0x2c2a19){for(var _0xf285ee=0x0;_0xf285ee<this[_0x884ebc(0x31b)];++_0xf285ee)this[_0x884ebc(0x520)][_0xf285ee]['pstPoints']=null,this[_0x884ebc(0x520)][_0xf285ee][_0x884ebc(0x36d)]=null;this['pstFontBGLines']=null,this[_0x884ebc(0x520)]=[];for(var _0x239e34=0x0;_0x239e34<_0x2c2a19;++_0x239e34)this['pstFontBGLines'][_0x239e34]['pstPoints']=[],this['pstFontBGLines'][_0x239e34]['pstColor']=[];this[_0x884ebc(0x31b)]=_0x2c2a19;}for(var _0x2c2a19=0x0,_0x5ce3f0=0x0;_0x5ce3f0<_0x4dd772;++_0x5ce3f0){var _0x4aa3d8=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fX']*this[_0x884ebc(0x391)],_0x3255b2=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fY']*this[_0x884ebc(0x457)],_0x58129c=_0x2b650a[_0x5ce3f0]['pString'][_0x884ebc(0x4f1)],_0x19d542=(_0x2b650a[_0x5ce3f0][_0x884ebc(0x1de)]==_0x2b650a[_0x5ce3f0][_0x884ebc(0x2a2)]&&(_0x2b650a[_0x5ce3f0][_0x884ebc(0x2a2)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x2a2)]-0x1),this[_0x884ebc(0x457)]),_0x49db03=0x0,_0x544a59=0xff*_0x2b650a[_0x5ce3f0][_0x884ebc(0x50f)]['fA'],_0x1c4f2e=0xff*_0x2b650a[_0x5ce3f0][_0x884ebc(0x50f)]['fR'],_0x538032=0xff*_0x2b650a[_0x5ce3f0][_0x884ebc(0x50f)]['fG'],_0x774127=0xff*_0x2b650a[_0x5ce3f0]['pstFontColor']['fB'];if((_0x33fcec=this[_0x884ebc(0x53e)][_0x884ebc(0x4b0)](this[_0x884ebc(0x395)],0x40*this[_0x884ebc(0x391)],0x40*this[_0x884ebc(0x457)],0x12c,0x12c))!==_0x5342a5['Ok'])throw new Error(this['FreetypeLibHandle'][_0x884ebc(0x2d0)](_0x33fcec));for(var _0x54134a=0x0;_0x54134a<_0x58129c;++_0x54134a){var _0x33fcec,_0x8f414e=_0x2b650a[_0x5ce3f0][_0x884ebc(0x26a)]['charCodeAt'](_0x54134a);if((_0x33fcec=this[_0x884ebc(0x53e)][_0x884ebc(0x4cd)](this[_0x884ebc(0x395)],_0x8f414e,_0x151f60['NO_SCALE']))!=_0x5342a5['Ok'])throw new Error(this['FreetypeLibHandle'][_0x884ebc(0x2d0)](_0x33fcec));var _0x4b50f6=this['FTFace'][_0x884ebc(0x43e)];if((_0x33fcec=this[_0x884ebc(0x53e)][_0x884ebc(0x4af)](_0x4b50f6,_0x2afdcd[_0x884ebc(0x4da)]))!==_0x5342a5['Ok'])throw new Error(_0x30397f[_0x884ebc(0x2d0)](_0x33fcec));var _0x50aa40=_0x4b50f6[_0x884ebc(0x504)];_0x4aa3d8+=_0x4b50f6[_0x884ebc(0x2c6)],(_0x8f414e=this['nDrawFontHeight']-_0x4b50f6[_0x884ebc(0x27b)])<_0x19d542&&(_0x19d542=_0x8f414e),_0x49db03<(_0x8f414e=_0x50aa40[_0x884ebc(0x4a1)])&&(_0x49db03=_0x8f414e);for(var _0x3f98a1=0x0;_0x3f98a1<_0x50aa40[_0x884ebc(0x2dd)]*_0x50aa40[_0x884ebc(0x36f)];++_0x3f98a1){var _0x3391d9,_0x14a609=Math[_0x884ebc(0x3f7)](_0x2b650a[_0x5ce3f0]['nFontHeight']-_0x4b50f6[_0x884ebc(0x27b)]+_0x3255b2+_0x3f98a1/_0x50aa40[_0x884ebc(0x36f)]);_0x14a609>=this['nDrawFontHeight']||((_0x14a609=_0x4aa3d8+_0x14a609*this[_0x884ebc(0x391)]+_0x3f98a1%_0x50aa40['width'])<0x0||_0x14a609>=this[_0x884ebc(0x391)]*this['nDrawFontHeight']||0x0<_0x50aa40['buffer'][_0x3f98a1]&&((_0x3391d9=this[_0x884ebc(0x2a6)])[0x4*_0x14a609]=_0x774127,_0x3391d9[0x4*_0x14a609+0x1]=_0x538032,_0x3391d9[0x4*_0x14a609+0x2]=_0x1c4f2e,_0x3391d9[0x4*_0x14a609+0x3]=_0x544a59));}_0x4aa3d8+=_0x50aa40[_0x884ebc(0x36f)];}var _0x224ed7=[];_0x224ed7[_0x884ebc(0x478)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fX'],_0x224ed7[_0x884ebc(0x24a)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x386)]['fY']+_0x19d542/this[_0x884ebc(0x457)],_0x224ed7['fRight']=_0x4aa3d8/this[_0x884ebc(0x391)],_0x224ed7['fBottom']=_0x49db03/this[_0x884ebc(0x457)]+_0x224ed7[_0x884ebc(0x24a)],_0x224ed7[_0x884ebc(0x478)]-=0.01,_0x224ed7['fTop']-=0.01,_0x224ed7[_0x884ebc(0x2d2)]+=0.01,_0x224ed7[_0x884ebc(0x339)]+=0.01,0x1==_0x2b650a[_0x5ce3f0]['bBackGround']&&(this[_0x884ebc(0x520)][_0x2c2a19][_0x884ebc(0x2f3)]=_0x224ed7,this[_0x884ebc(0x520)][_0x2c2a19][_0x884ebc(0x216)]=0x4,this[_0x884ebc(0x520)][_0x2c2a19][_0x884ebc(0x431)]=!0x0,this['pstFontBGLines'][_0x2c2a19][_0x884ebc(0x36d)]=_0x2b650a[_0x5ce3f0][_0x884ebc(0x251)],_0x2c2a19+=this[_0x884ebc(0x520)][_0x2c2a19]['nLineWidth']=0x1);}0x0!=_0x2c2a19&&this[_0x884ebc(0x267)](this[_0x884ebc(0x520)],_0x2c2a19,0x4*_0x2c2a19,!0x1),this['ctx']['bindTexture'](this[_0x884ebc(0x51e)]['TEXTURE_2D'],this['nFontColorTexture']),this[_0x884ebc(0x51e)][_0x884ebc(0x27d)](this[_0x884ebc(0x51e)]['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this[_0x884ebc(0x391)],this[_0x884ebc(0x457)],0x0,this[_0x884ebc(0x51e)]['RGBA'],this[_0x884ebc(0x51e)][_0x884ebc(0x22b)],this[_0x884ebc(0x2a6)]),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this[_0x884ebc(0x2b3)](_0x884ebc(0x506),'\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a')),this[_0x884ebc(0x51e)]['viewport'](0x0,0x0,this[_0x884ebc(0x42d)]['width'],this[_0x884ebc(0x42d)][_0x884ebc(0x483)]),this[_0x884ebc(0x51e)][_0x884ebc(0x3ce)](this[_0x884ebc(0x51e)][_0x884ebc(0x487)]),this[_0x884ebc(0x51e)][_0x884ebc(0x263)](this[_0x884ebc(0x51e)][_0x884ebc(0x275)],this[_0x884ebc(0x51e)][_0x884ebc(0x231)]),this['ctx'][_0x884ebc(0x288)](this[_0x884ebc(0x3c8)]),this[_0x884ebc(0x51e)][_0x884ebc(0x425)](this[_0x884ebc(0x51e)][_0x884ebc(0x30e)]),this[_0x884ebc(0x51e)]['bindTexture'](this[_0x884ebc(0x51e)]['TEXTURE_2D'],this[_0x884ebc(0x2f6)]);var _0x2f820a=this[_0x884ebc(0x51e)]['getUniformLocation'](this[_0x884ebc(0x3c8)],_0x884ebc(0x4ee)),_0x2f820a=(this['ctx'][_0x884ebc(0x2cc)](_0x2f820a,0x0),this[_0x884ebc(0x51e)][_0x884ebc(0x408)](this['ctx']['ARRAY_BUFFER'],this[_0x884ebc(0x52e)]),this[_0x884ebc(0x51e)][_0x884ebc(0x1ff)](this[_0x884ebc(0x3c8)],'position')),_0x2f820a=(this[_0x884ebc(0x51e)][_0x884ebc(0x2e6)](_0x2f820a),this[_0x884ebc(0x51e)][_0x884ebc(0x3c2)](_0x2f820a,0x3,this[_0x884ebc(0x51e)][_0x884ebc(0x4f2)],!0x1,0x0,0x0),this[_0x884ebc(0x51e)][_0x884ebc(0x408)](this[_0x884ebc(0x51e)][_0x884ebc(0x2f4)],this[_0x884ebc(0x53d)]),this['ctx'][_0x884ebc(0x1ff)](this[_0x884ebc(0x3c8)],_0x884ebc(0x34f)));return this[_0x884ebc(0x51e)][_0x884ebc(0x2e6)](_0x2f820a),this[_0x884ebc(0x51e)][_0x884ebc(0x3c2)](_0x2f820a,0x2,this[_0x884ebc(0x51e)][_0x884ebc(0x4f2)],!0x1,0x0,0x0),this['ctx'][_0x884ebc(0x408)](this[_0x884ebc(0x51e)][_0x884ebc(0x2f4)],null),this[_0x884ebc(0x51e)][_0x884ebc(0x52a)](this[_0x884ebc(0x51e)]['TRIANGLES'],0x0,0x6),this[_0x884ebc(0x51e)][_0x884ebc(0x288)](null),this[_0x884ebc(0x51e)][_0x884ebc(0x54d)](this[_0x884ebc(0x51e)][_0x884ebc(0x487)]),_0x13949e[_0x884ebc(0x4a6)];}},{'key':_0x41470a(0x485),'value':function(_0x2ec840){var _0x1e3d1c=_0x41470a;if(null==this[_0x1e3d1c(0x51e)])return _0x13949e['SR_ERR_CALL_ORDER'];var _0x12592a,_0x5c2048,_0x2d3c80=-0x1;if(_0x2ec840==_0x3468da[_0x1e3d1c(0x3c1)])_0x2d3c80=0x0;else{if(-0x1==(_0x2d3c80=null!=this[_0x1e3d1c(0x292)]?this[_0x1e3d1c(0x292)][_0x1e3d1c(0x276)](_0x2ec840):_0x2d3c80))return _0x2d3c80;}switch(this[_0x1e3d1c(0x29e)]=_0x2d3c80,_0x2ec840){case _0x3468da['SR_DE_NULL']:_0x12592a=_0xe651be,this[_0x1e3d1c(0x367)]=!(_0x5c2048=_0x1e3d1c(0x4b8));break;case _0x3468da[_0x1e3d1c(0x224)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x2c9),this['bFECHandle']=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da['SR_DE_FISH_PTZ_CEILING']:_0x12592a=_0xe651be,_0x5c2048='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20v_uv.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this[_0x1e3d1c(0x2bc)]=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da[_0x1e3d1c(0x4c2)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x21f),this[_0x1e3d1c(0x2bc)]=!0x0;break;case _0x3468da[_0x1e3d1c(0x4bf)]:_0x12592a=_0xe651be,_0x5c2048='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['bFECHandle']=!0x0,this['b3DPort']=!0x1;break;case _0x3468da[_0x1e3d1c(0x208)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x388),this[_0x1e3d1c(0x2bc)]=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da[_0x1e3d1c(0x4f5)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x364),this['bFECHandle']=!0x0,this[_0x1e3d1c(0x367)]=!0x1;break;case _0x3468da[_0x1e3d1c(0x2f5)]:_0x12592a=_0xe651be,_0x5c2048=_0x1e3d1c(0x2be),this[_0x1e3d1c(0x2bc)]=!0x0,this['b3DPort']=!0x1;break;case _0x3468da[_0x1e3d1c(0x3a8)]:_0x12592a=_0xe651be,_0x5c2048='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',this[_0x1e3d1c(0x2bc)]=!0x0,this['b3DPort']=!0x1;break;case _0x3468da[_0x1e3d1c(0x33c)]:_0x12592a=_0xe651be,_0x5c2048=SHADER_PS_RGBA_PANORAMA_WALL,this[_0x1e3d1c(0x2bc)]=!0x0,this['b3DPort']=!0x1;break;case _0x3468da['SR_DE_FISH_SEMISPHERE']:case _0x3468da[_0x1e3d1c(0x4dc)]:case _0x3468da[_0x1e3d1c(0x3a9)]:_0x12592a=_0x1e3d1c(0x332),_0x5c2048=_0x1e3d1c(0x423),this[_0x1e3d1c(0x2bc)]=!0x0,this[_0x1e3d1c(0x367)]=!0x0;}var _0x2d3c80=this[_0x1e3d1c(0x2b3)](_0x12592a,_0x5c2048),_0x2d3c80=(this[_0x1e3d1c(0x1e9)]=_0x2d3c80,null),_0x1a3228=null,_0x4fb145=(0x0==this[_0x1e3d1c(0x367)]?(_0x2d3c80=new Float32Array([-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,0x1,0x0,0x1,-0x1,0x0]),_0x1a3228=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1])):_0x2ec840==_0x3468da[_0x1e3d1c(0x2e3)]&&(this[_0x1e3d1c(0x354)](0x0,0x1,0x0,0x1),_0x2d3c80=this[_0x1e3d1c(0x2ea)],_0x1a3228=this[_0x1e3d1c(0x2d7)]),this[_0x1e3d1c(0x51e)]['createBuffer']()),_0x2d3c80=(this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x408)](this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x2f4)],_0x4fb145),this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x416)](this['ctx'][_0x1e3d1c(0x2f4)],_0x2d3c80,this[_0x1e3d1c(0x51e)]['STATIC_DRAW']),this[_0x1e3d1c(0x52e)]=_0x4fb145,this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x33d)]()),_0x4fb145=(this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x408)](this['ctx'][_0x1e3d1c(0x2f4)],_0x2d3c80),this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x416)](this[_0x1e3d1c(0x51e)]['ARRAY_BUFFER'],_0x1a3228,this['ctx'][_0x1e3d1c(0x33a)]),this[_0x1e3d1c(0x53d)]=_0x2d3c80,this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x408)](this[_0x1e3d1c(0x51e)][_0x1e3d1c(0x2f4)],null),this['InitCamera'](_0x2ec840));return _0x13949e[_0x1e3d1c(0x4a6)]!=_0x4fb145?-0x1:(this[_0x1e3d1c(0x4d6)]=_0x2ec840,this['nFECPort']);}},{'key':_0x41470a(0x41e),'value':function(_0x2a4887){var _0x316efb=_0x41470a;return null==this['ctx']?_0x13949e[_0x316efb(0x2cf)]:(null!=this[_0x316efb(0x292)]&&this[_0x316efb(0x292)][_0x316efb(0x32d)](_0x2a4887),this['bFECHandle']=!0x1,this['enDisplayEffect']=_0x3468da[_0x316efb(0x3c1)],0x0!=this[_0x316efb(0x1e9)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x482)](this[_0x316efb(0x1e9)]),this['videoShaderProgram']=0x0),0x0!=this[_0x316efb(0x52e)]&&null!=this[_0x316efb(0x51e)]&&(this['ctx'][_0x316efb(0x459)](this['vertexPosBuffer']),this[_0x316efb(0x52e)]=0x0),0x0!=this[_0x316efb(0x53d)]&&null!=this['ctx']&&(this[_0x316efb(0x51e)][_0x316efb(0x459)](this[_0x316efb(0x53d)]),this[_0x316efb(0x53d)]=0x0),this[_0x316efb(0x540)]=0x0,this[_0x316efb(0x2a7)]=null,this[_0x316efb(0x232)]=null,0x0!=this['glLinePosBuffer']&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)]['deleteBuffer'](this[_0x316efb(0x442)]),this[_0x316efb(0x442)]=0x0),0x0!=this['glLineTexBuffer']&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)]['deleteBuffer'](this[_0x316efb(0x29c)]),this[_0x316efb(0x29c)]=0x0),(this[_0x316efb(0x350)]=0x0)!=this[_0x316efb(0x37f)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)]['deleteProgram'](this[_0x316efb(0x37f)]),this[_0x316efb(0x37f)]=0x0),this[_0x316efb(0x38b)]=null,this[_0x316efb(0x23d)]=null,(this[_0x316efb(0x453)]=0x0)!=this[_0x316efb(0x383)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x459)](this[_0x316efb(0x383)]),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this[_0x316efb(0x51e)]&&(this['ctx'][_0x316efb(0x459)](this[_0x316efb(0x50b)]),this[_0x316efb(0x50b)]=0x0),0x0!=this[_0x316efb(0x470)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x482)](this[_0x316efb(0x470)]),this[_0x316efb(0x470)]=0x0),null!=this['FreetypeLibHandle']&&null!=this[_0x316efb(0x395)]&&(this[_0x316efb(0x53e)]['Done_Face'](this[_0x316efb(0x395)]),this[_0x316efb(0x395)]=null),null!=this[_0x316efb(0x53e)]&&null!=this[_0x316efb(0x327)]&&(this[_0x316efb(0x53e)][_0x316efb(0x357)](this[_0x316efb(0x327)]),this[_0x316efb(0x327)]=null),this[_0x316efb(0x215)]=!0x1,this[_0x316efb(0x2c3)]=null,this[_0x316efb(0x53e)]=null,this[_0x316efb(0x391)]=0x0,(this['nDrawFontHeight']=0x0)!=this[_0x316efb(0x2f6)]&&null!=this[_0x316efb(0x51e)]&&(this[_0x316efb(0x51e)][_0x316efb(0x300)](this[_0x316efb(0x2f6)]),this[_0x316efb(0x2f6)]=0x0),(this[_0x316efb(0x2a6)]=0x0)!=this[_0x316efb(0x3c8)]&&null!=this['ctx']&&(this['ctx'][_0x316efb(0x482)](this[_0x316efb(0x3c8)]),this[_0x316efb(0x3c8)]=0x0),this['nFontBGNum']=0x0,this[_0x316efb(0x520)]=null,this[_0x316efb(0x2ea)]=null,this[_0x316efb(0x2d7)]=null,this[_0x316efb(0x340)]=0x0,this['nSemiSpherePosSize']=0x0,this[_0x316efb(0x406)]=0x0,this[_0x316efb(0x441)]=null,this[_0x316efb(0x4c0)]=null,this[_0x316efb(0x312)]=0x0,this[_0x316efb(0x3ff)]=0x0,this[_0x316efb(0x4f8)]=0x0,this[_0x316efb(0x2c1)]=0x0,this[_0x316efb(0x338)]=0x0,this[_0x316efb(0x367)]=!0x1,this[_0x316efb(0x2e1)]=null,this[_0x316efb(0x3da)]=0x0,this[_0x316efb(0x2a3)]=0x0,this[_0x316efb(0x44a)]=0x0,this[_0x316efb(0x229)]=null,this[_0x316efb(0x46c)]=null,this[_0x316efb(0x252)]=null,this[_0x316efb(0x4d5)]=null,this[_0x316efb(0x51e)][_0x316efb(0x54d)](this[_0x316efb(0x51e)]['CULL_FACE']),this[_0x316efb(0x51e)][_0x316efb(0x54d)](this[_0x316efb(0x51e)][_0x316efb(0x3cb)]),_0x13949e['SR_OK']);}},{'key':_0x41470a(0x511),'value':function(_0x30a173){var _0x52b312=_0x41470a;return null==_0x30a173?_0x13949e[_0x52b312(0x203)]:null==this[_0x52b312(0x292)]?_0x13949e[_0x52b312(0x2cf)]:this[_0x52b312(0x292)][_0x52b312(0x3e3)](this[_0x52b312(0x29e)],_0x30a173);}},{'key':_0x41470a(0x4f0),'value':function(_0x322778){var _0x1aa028=_0x41470a;return null==_0x322778?_0x13949e[_0x1aa028(0x203)]:null==this[_0x1aa028(0x292)]?_0x13949e[_0x1aa028(0x2cf)]:this['pFishParamManager']['SetFishParam'](this[_0x1aa028(0x29e)],_0x322778);}},{'key':'SR_SetDisplayRect','value':function(_0x2b0089,_0x6076ae,_0x183e35,_0x475f0e){var _0x307de6=_0x41470a;if(null==this[_0x307de6(0x51e)])return _0x13949e[_0x307de6(0x2cf)];var _0x58b1ac,_0x48adad,_0x3d05f0=null;return _0x3d05f0=0x0<this['frameDisplayWidth']&&0x0<this['frameDisplayHeight']?(_0x58b1ac=_0x2b0089/this[_0x307de6(0x502)],_0x48adad=_0x6076ae/this[_0x307de6(0x3b0)],_0x2b0089=(_0x2b0089+_0x183e35)/this[_0x307de6(0x502)],_0x183e35=(_0x6076ae+_0x475f0e)/this[_0x307de6(0x3b0)],new Float32Array([_0x58b1ac,_0x183e35,_0x58b1ac,_0x48adad,_0x2b0089,_0x48adad,_0x2b0089,_0x183e35])):new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]),this[_0x307de6(0x51e)][_0x307de6(0x408)](this[_0x307de6(0x51e)][_0x307de6(0x2f4)],this[_0x307de6(0x53d)]),this[_0x307de6(0x51e)][_0x307de6(0x306)](this[_0x307de6(0x51e)][_0x307de6(0x2f4)],0x0,_0x3d05f0),this['ctx'][_0x307de6(0x408)](this['ctx'][_0x307de6(0x2f4)],null),_0x13949e[_0x307de6(0x4a6)];}},{'key':_0x41470a(0x4b2),'value':function(){var _0x33b71d=_0x41470a;return null==this[_0x33b71d(0x51e)]?_0x13949e[_0x33b71d(0x2cf)]:(this['frameDisplayWidth']=0x0,(this[_0x33b71d(0x3b0)]=0x0)!=this[_0x33b71d(0x516)]&&null!=this[_0x33b71d(0x51e)]&&(this[_0x33b71d(0x51e)][_0x33b71d(0x300)](this['nSurfaceTexture']),this[_0x33b71d(0x516)]=0x0),0x0==this['bFECHandle']?this[_0x33b71d(0x41e)](0x0):-0x1!=this[_0x33b71d(0x29e)]&&this[_0x33b71d(0x41e)](this[_0x33b71d(0x29e)]),this[_0x33b71d(0x1f2)]=!0x1,this[_0x33b71d(0x4a5)]=!0x1,this['bRecreateTex']=!0x0,this[_0x33b71d(0x292)]=null,this[_0x33b71d(0x42d)]=null,this[_0x33b71d(0x51e)]=null,_0x13949e['SR_OK']);}},{'key':'SR_SetCanvasSize','value':function(_0x207390,_0x1713c2){var _0x24221c=_0x41470a;return this[_0x24221c(0x42d)][_0x24221c(0x36f)]=_0x207390,this[_0x24221c(0x42d)][_0x24221c(0x483)]=_0x1713c2,_0x13949e[_0x24221c(0x4a6)];}},{'key':_0x41470a(0x547),'value':function(){var _0x4eca94=_0x41470a;return console[_0x4eca94(0x514)]('canvas\\x20width:'+this[_0x4eca94(0x42d)][_0x4eca94(0x36f)]+_0x4eca94(0x254)+this['canvas'][_0x4eca94(0x483)]),_0x13949e[_0x4eca94(0x4a6)];}},{'key':'SR_SetAntialias','value':function(_0x1679a2){var _0x46f517=_0x41470a;return 0x1==this[_0x46f517(0x1f2)]?_0x13949e[_0x46f517(0x38d)]:(this['bAntialias']!=_0x1679a2&&(this['bRecreateTex']=!0x0,this[_0x46f517(0x4a5)]=_0x1679a2),_0x13949e[_0x46f517(0x4a6)]);}},{'key':_0x41470a(0x2e7),'value':function(_0x317974){var _0x445de9=_0x41470a;return null==this[_0x445de9(0x292)]?_0x13949e[_0x445de9(0x2cf)]:this[_0x445de9(0x292)][_0x445de9(0x524)](_0x317974);}},{'key':_0x41470a(0x32f),'value':function(_0x2131ed){var _0x49d7dd=_0x41470a;return null!=this[_0x49d7dd(0x292)]?_0x13949e['SR_ERR_NOT_SUPPORT']:(this[_0x49d7dd(0x292)]=_0x2131ed,_0x13949e[_0x49d7dd(0x4a6)]);}},{'key':'CreateSemiSphere','value':function(_0x588ab8,_0x1c765f,_0x5931b2,_0x3aff66){var _0x11a651=_0x41470a;if(null!=this[_0x11a651(0x2ea)]||null!=this[_0x11a651(0x2d7)])return _0x13949e['SR_ERR_CALL_ORDER'];this['pSemiSpherePos']=new Float32Array(0xa8c0),this[_0x11a651(0x2d7)]=new Float32Array(0x7080);for(var _0x89f603=(_0x1c765f-_0x588ab8)/(_0x3aff66-_0x5931b2),_0x2dc0d6=(_0x1c765f-_0x588ab8)/0x2*0x1,_0x29f8b8=0x2*_0x48e6bf/0x3c,_0x477a78=_0x48e6bf/0x2/0x28,_0x565c8b=0x0,_0x979fe=0x0,_0x2b59f3=0x0,_0x36fa65=0x0;_0x36fa65<0x3c;++_0x36fa65)for(var _0x1fea2a=0x0;_0x1fea2a<0x28;++_0x1fea2a){var _0x386255,_0x229ce8,_0x52e92e=_0x36fa65*_0x29f8b8,_0x493bfb=(0x0==_0x36fa65&&(_0x565c8b=_0x52e92e),0x3b==_0x36fa65?_0x565c8b:(_0x36fa65+0x1)*_0x29f8b8),_0x528b78=-_0x1fea2a*_0x477a78,_0x4246b9=-(_0x1fea2a+0x1)*_0x477a78;this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math['sin'](_0x528b78),this['pSemiSpherePos'][_0x979fe+0x2]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math['sin'](_0x52e92e),_0x229ce8=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x52e92e),_0x386255=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this['pSemiSpherePos'][_0x979fe]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math['sin'](_0x4246b9),this['pSemiSpherePos'][_0x979fe+0x2]=-0x1*Math[_0x11a651(0x34b)](_0x4246b9)*Math[_0x11a651(0x202)](_0x52e92e),_0x229ce8=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x52e92e),_0x386255=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math[_0x11a651(0x202)](_0x528b78),this[_0x11a651(0x2ea)][_0x979fe+0x2]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math['sin'](_0x493bfb),_0x229ce8=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x493bfb),_0x386255=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x528b78)*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math[_0x11a651(0x202)](_0x528b78),this[_0x11a651(0x2ea)][_0x979fe+0x2]=-0x1*Math['cos'](_0x528b78)*Math[_0x11a651(0x202)](_0x493bfb),_0x229ce8=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math['sin'](_0x493bfb),_0x386255=0.5-0.5*(0x1+_0x528b78/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math[_0x11a651(0x34b)](_0x4246b9)*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math[_0x11a651(0x202)](_0x4246b9),this['pSemiSpherePos'][_0x979fe+0x2]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x202)](_0x52e92e),_0x229ce8=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x52e92e),_0x386255=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x52e92e),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3,this[_0x11a651(0x2ea)][_0x979fe]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2ea)][_0x979fe+0x1]=+Math['sin'](_0x4246b9),this[_0x11a651(0x2ea)][_0x979fe+0x2]=-0x1*Math['cos'](_0x4246b9)*Math[_0x11a651(0x202)](_0x493bfb),_0x229ce8=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x202)](_0x493bfb),_0x386255=0.5-0.5*(0x1+_0x4246b9/(_0x48e6bf/0x2))*Math[_0x11a651(0x34b)](_0x493bfb),this[_0x11a651(0x2d7)][_0x2b59f3++]=0x2*_0x386255*_0x2dc0d6+ +_0x588ab8,this[_0x11a651(0x2d7)][_0x2b59f3++]=(0x2*_0x229ce8*_0x2dc0d6+_0x5931b2*_0x89f603)/_0x89f603,_0x979fe+=0x3;}return this[_0x11a651(0x340)]=_0x979fe/0x3,this['nSemiSpherePosSize']=0x3,this[_0x11a651(0x406)]=0x2,_0x13949e[_0x11a651(0x4a6)];}},{'key':_0x41470a(0x41d),'value':function(_0x47413c){var _0x591aa0=_0x41470a;if(null!=this[_0x591aa0(0x2e1)])return SR_ERR_CALL_ORDER;switch(_0x47413c){case _0x3468da['SR_DE_NULL']:case _0x3468da[_0x591aa0(0x224)]:case _0x3468da[_0x591aa0(0x2b7)]:case _0x3468da['SR_DE_FISH_PTZ_FLOOR']:case _0x3468da['SR_DE_FISH_PTZ_WALL']:case _0x3468da[_0x591aa0(0x208)]:case _0x3468da[_0x591aa0(0x4f5)]:case _0x3468da['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x3468da['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x3468da[_0x591aa0(0x33c)]:return _0x13949e[_0x591aa0(0x4a6)];case _0x3468da['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0x53ee33(),null==this[_0x591aa0(0x2e1)])return _0x13949e[_0x591aa0(0x37b)];this[_0x591aa0(0x2e1)]['SetFov'](_0x479a0f),this[_0x591aa0(0x2e1)][_0x591aa0(0x420)](0.02),this['pCamera'][_0x591aa0(0x3af)](0x3e8),this[_0x591aa0(0x3da)]=1.57,this[_0x591aa0(0x2e1)][_0x591aa0(0x458)](3.14-this[_0x591aa0(0x3da)]),this['fScale']=0x3,this[_0x591aa0(0x2e1)][_0x591aa0(0x26d)](this[_0x591aa0(0x44a)]);break;case _0x3468da[_0x591aa0(0x4dc)]:case _0x3468da[_0x591aa0(0x3a9)]:if(this[_0x591aa0(0x2e1)]=new _0x53ee33(),null==this['pCamera'])return _0x13949e[_0x591aa0(0x37b)];this[_0x591aa0(0x2e1)][_0x591aa0(0x3a6)](_0x479a0f),this[_0x591aa0(0x2e1)][_0x591aa0(0x420)](0.02),this[_0x591aa0(0x2e1)]['SetFar'](0x3e8),this[_0x591aa0(0x3da)]=-0.785,this['pCamera'][_0x591aa0(0x458)](-this[_0x591aa0(0x3da)]),this[_0x591aa0(0x44a)]=0x6,this['pCamera'][_0x591aa0(0x26d)](this[_0x591aa0(0x44a)]);break;case _0x3468da[_0x591aa0(0x3f3)]:case _0x3468da[_0x591aa0(0x4f9)]:if(this['pCamera']=new _0x53ee33(),null==this[_0x591aa0(0x2e1)])return _0x13949e[_0x591aa0(0x37b)];this[_0x591aa0(0x2e1)][_0x591aa0(0x43a)](!0x0),this['pCamera']['SetNear'](0.02),this['pCamera'][_0x591aa0(0x3af)](0x3e8),this[_0x591aa0(0x44a)]=0x3,this[_0x591aa0(0x2e1)][_0x591aa0(0x26d)](this[_0x591aa0(0x44a)]);break;default:return _0x13949e['SR_ERR_NOT_SUPPORT'];}return _0x13949e[_0x591aa0(0x4a6)];}},{'key':'SR_SetViewParam','value':function(_0x1fe8af,_0x595f9f){var _0x46cae3=_0x41470a;if(!this[_0x46cae3(0x367)])return _0x13949e[_0x46cae3(0x38d)];switch(_0x1fe8af){case _0x30de30:this[_0x46cae3(0x3da)]=_0x595f9f;break;case _0x4d39af:this['fRotateY']=_0x595f9f;break;case _0x1ab3fe:if(this['enDisplayEffect']==_0x3468da['SR_DE_FISH_SEMISPHERE']){if(_0x595f9f<-0.8||0x384<_0x595f9f)return _0x13949e['SR_ERR_PARAM'];}else{if((this['enDisplayEffect']==_0x3468da[_0x46cae3(0x3a9)]||this['enDisplayEffect']==_0x3468da[_0x46cae3(0x4dc)])&&(_0x595f9f<0x0||0x384<_0x595f9f))return _0x13949e[_0x46cae3(0x203)];}this[_0x46cae3(0x44a)]=_0x595f9f;break;default:return _0x13949e['SR_ERR_NOT_SUPPORT'];}return _0x13949e['SR_OK'];}},{'key':'SR_GetViewParam','value':function(_0x4441eb){var _0x5ea28a=_0x41470a;if(!this[_0x5ea28a(0x367)])return _0x13949e[_0x5ea28a(0x38d)];var _0x33a1bc=0x0;switch(_0x4441eb){case _0x30de30:_0x33a1bc=this[_0x5ea28a(0x3da)];break;case _0x4d39af:_0x33a1bc=this[_0x5ea28a(0x2a3)];break;case _0x1ab3fe:_0x33a1bc=this[_0x5ea28a(0x44a)];}return _0x33a1bc;}},{'key':_0x41470a(0x1cf),'value':function(_0x46c4c9,_0x3fd11a,_0x1dc6f8){var _0x5c215d=_0x41470a;switch(_0x1dc6f8){case _0x158a35:this[_0x5c215d(0x229)]=_0x46c4c9,this[_0x5c215d(0x252)]=_0x3fd11a;break;case _0x3b9975:this[_0x5c215d(0x46c)]=_0x46c4c9,this[_0x5c215d(0x4d5)]=_0x3fd11a;break;default:return _0x13949e[_0x5c215d(0x38d)];}return _0x13949e[_0x5c215d(0x4a6)];}},{'key':_0x41470a(0x3a7),'value':function(_0x602221,_0x550a34){var _0x2dac91=_0x41470a;switch(_0x602221){case _0x17dd0b:if(this['b3DPort'])return _0x13949e['SR_ERR_NOT_SUPPORT'];break;case _0x45c70b:if(!this[_0x2dac91(0x367)])return _0x13949e['SR_ERR_NOT_SUPPORT'];Math[_0x2dac91(0x1e6)](+_0x550a34)<_0x3e9a49?this[_0x2dac91(0x3dd)]=!0x1:this[_0x2dac91(0x3dd)]=!0x0;break;default:return _0x13949e['SR_ERR_NOT_SUPPORT'];}return _0x13949e['SR_OK'];}},{'key':_0x41470a(0x4a2),'value':function(_0xe205e6,_0x20791a){var _0x1c3566=_0x41470a;return null==this[_0x1c3566(0x292)]?_0x13949e['SR_ERR_CALL_ORDER']:this['pFishParamManager'][_0x1c3566(0x52c)](_0xe205e6,_0x20791a);}},{'key':_0x41470a(0x222),'value':function(_0x29e130,_0x2e3087){var _0x540248=_0x41470a;return null==this['pFishParamManager']?_0x13949e[_0x540248(0x2cf)]:this['pFishParamManager'][_0x540248(0x1f6)](_0x29e130,_0x2e3087);}},{'key':_0x41470a(0x235),'value':function(_0x5a6d67){var _0x55929a=_0x41470a;return null==this[_0x55929a(0x292)]?_0x13949e[_0x55929a(0x2cf)]:this[_0x55929a(0x292)][_0x55929a(0x3ca)](_0x5a6d67);}},{'key':_0x41470a(0x400),'value':function(_0x12abc9,_0x117dd9){var _0x5119f3=_0x41470a;return null==this[_0x5119f3(0x292)]?_0x13949e[_0x5119f3(0x2cf)]:this['pFishParamManager'][_0x5119f3(0x533)](_0x12abc9,_0x117dd9);}}]),_0x27b1ac;}()),_0x56d25f=(function(){var _0x194ca7=_0x99d5a2;function _0x396cfd(){var _0xc5ce7f=a0_0x1593;_0x160316(this,_0x396cfd),this[_0xc5ce7f(0x42d)]=null,this[_0xc5ce7f(0x51e)]=null,this[_0xc5ce7f(0x45f)]=0x0,this[_0xc5ce7f(0x3d7)]=0x0,this['regionSw']=0x0,this[_0xc5ce7f(0x206)]=0x0,this[_0xc5ce7f(0x1fc)]=!0x1,this['bAntialias']=!0x1,this[_0xc5ce7f(0x3fa)]=!0x1;}return _0x5a3b91(_0x396cfd,[{'key':'SR_Init','value':function(_0x4f15ab){var _0x143e71=a0_0x1593;this[_0x143e71(0x42d)]=_0x4f15ab,this['ctx']=this['canvas'][_0x143e71(0x2b2)]('2d'),this[_0x143e71(0x51e)]||console['log'](_0x143e71(0x236));}},{'key':_0x194ca7(0x28d),'value':function(_0x5f4a25){var _0x315fd6=_0x194ca7;this[_0x315fd6(0x1fc)]?this['ctx'][_0x315fd6(0x283)](_0x5f4a25,this['regionSx'],this[_0x315fd6(0x3d7)],this['regionSw'],this[_0x315fd6(0x206)],0x0,0x0,this[_0x315fd6(0x42d)][_0x315fd6(0x36f)],this['canvas'][_0x315fd6(0x483)]):this[_0x315fd6(0x51e)][_0x315fd6(0x283)](_0x5f4a25,0x0,0x0,_0x5f4a25['displayWidth'],_0x5f4a25['displayHeight'],0x0,0x0,this['canvas'][_0x315fd6(0x36f)],this[_0x315fd6(0x42d)][_0x315fd6(0x483)]);}},{'key':_0x194ca7(0x41e),'value':function(_0xfa3fbc){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x37b347){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x1b52b1,_0x25a882,_0x4089d7,_0x57c4c0){var _0x35e773=_0x194ca7;this['regionSx']=_0x1b52b1,this[_0x35e773(0x3d7)]=_0x25a882,this[_0x35e773(0x214)]=_0x4089d7,this[_0x35e773(0x206)]=_0x57c4c0,this[_0x35e773(0x1fc)]=!0x0;}},{'key':_0x194ca7(0x4b2),'value':function(){var _0x1354c2=_0x194ca7;this['canvas']=null,this[_0x1354c2(0x51e)]=null,this[_0x1354c2(0x45f)]=0x0,this[_0x1354c2(0x3d7)]=0x0,this[_0x1354c2(0x214)]=0x0,this[_0x1354c2(0x206)]=0x0,this[_0x1354c2(0x1fc)]=!0x1;}},{'key':_0x194ca7(0x375),'value':function(_0x2a45c5,_0x4547c6){var _0x457b41=_0x194ca7;this[_0x457b41(0x42d)][_0x457b41(0x36f)]=_0x2a45c5,this[_0x457b41(0x42d)]['height']=_0x4547c6;}},{'key':'SR_GetCanvasSize','value':function(){var _0x383cab=_0x194ca7;console[_0x383cab(0x514)](_0x383cab(0x4bb)+this[_0x383cab(0x42d)][_0x383cab(0x36f)]+_0x383cab(0x254)+this[_0x383cab(0x42d)][_0x383cab(0x483)]);}},{'key':_0x194ca7(0x49d),'value':function(_0x515c7b){var _0x3308cd=_0x194ca7;return _0x515c7b!=this[_0x3308cd(0x4a5)]?(this['bAntialias']=_0x515c7b,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this[_0x3308cd(0x3fa)]&&(this['bAntialias']?(this[_0x3308cd(0x42d)]['width']=0x5*this[_0x3308cd(0x42d)]['width'],this[_0x3308cd(0x42d)][_0x3308cd(0x483)]=0x5*this[_0x3308cd(0x42d)][_0x3308cd(0x483)],this['canvas'][_0x3308cd(0x21e)]['transform']=_0x3308cd(0x262)):(this['canvas'][_0x3308cd(0x36f)]=this[_0x3308cd(0x42d)][_0x3308cd(0x36f)]/0x5,this[_0x3308cd(0x42d)][_0x3308cd(0x483)]=this[_0x3308cd(0x42d)][_0x3308cd(0x483)]/0x5,this[_0x3308cd(0x42d)][_0x3308cd(0x21e)]['transform']=_0x3308cd(0x51f)),this['canvas'][_0x3308cd(0x21e)]['transformOrigin']=_0x3308cd(0x2f0)),0x1;}}]),_0x396cfd;}()),_0x30e60b=(function(){var _0x22f0ab=_0x99d5a2;function _0x92cc8d(){var _0x4f934c=a0_0x1593;_0x160316(this,_0x92cc8d),this[_0x4f934c(0x3ee)]=[],this[_0x4f934c(0x45b)]=[],this[_0x4f934c(0x1ee)]=[],this[_0x4f934c(0x320)]=[],this['pPTZSetColor']=null,this[_0x4f934c(0x43d)]=[],this[_0x4f934c(0x21c)]=[],this[_0x4f934c(0x538)]=[],this[_0x4f934c(0x371)]=[],this['pBasePTZPoints']=[],this[_0x4f934c(0x3ab)]=[],this[_0x4f934c(0x47b)]=[],this[_0x4f934c(0x4bc)]=[],this[_0x4f934c(0x334)]=_0x366953,this[_0x4f934c(0x1f8)]=0x0,this[_0x4f934c(0x3aa)]=0x1,this[_0x4f934c(0x34c)]=0x0,this[_0x4f934c(0x4ed)]=0x1,this[_0x4f934c(0x40f)]=!0x1,this[_0x4f934c(0x22d)]=[],this[_0x4f934c(0x3bb)]=[],this[_0x4f934c(0x270)]=-0x1,this[_0x4f934c(0x344)]=0x0,this[_0x4f934c(0x3ae)]=[],this[_0x4f934c(0x447)]=[],this['nPTZDisplayMode']=_0x46c232;for(var _0xf4bb4d=0x0;_0xf4bb4d<0x20;++_0xf4bb4d){this[_0x4f934c(0x3ee)][_0xf4bb4d]=!0x1,this[_0x4f934c(0x447)][_0xf4bb4d]=!0x1,this['pRenderParam'][_0xf4bb4d]=[],this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x265)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d]['fSinH']=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x405)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d]['fSinV']=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x314)]=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x3f4)]=0x0,this['pRenderParam'][_0xf4bb4d]['fRX1']=0x0,this['pRenderParam'][_0xf4bb4d][_0x4f934c(0x3aa)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x34c)]=0x0,this['pRenderParam'][_0xf4bb4d][_0x4f934c(0x4ed)]=0x1,this[_0x4f934c(0x45b)][_0xf4bb4d]['nDisplayEffect']=0x0,this[_0x4f934c(0x45b)][_0xf4bb4d]['bBlack']=!0x1,this[_0x4f934c(0x45b)][_0xf4bb4d][_0x4f934c(0x324)]=!0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d]=[],this[_0x4f934c(0x1ee)][_0xf4bb4d]['nFishParamType']=0x0,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x27e)]=0x0,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x469)]=0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x2bb)]=0x0,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x2e9)]=0x1,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x40f)]=!0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d]['bCut']=!0x1,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x314)]=0x0,this[_0x4f934c(0x1ee)][_0xf4bb4d][_0x4f934c(0x3f4)]=0x0,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x3d6)]=0.5,this['pFishParam'][_0xf4bb4d][_0x4f934c(0x40c)]=0.5,this[_0x4f934c(0x320)][_0xf4bb4d]=[],this[_0x4f934c(0x320)][_0xf4bb4d]['fR']=0x0,this[_0x4f934c(0x320)][_0xf4bb4d]['fG']=0x0,this['stPTZColor'][_0xf4bb4d]['fB']=0x0,this[_0x4f934c(0x320)][_0xf4bb4d]['fA']=0x0,this['nBasePTZPointNum'][_0xf4bb4d]=0x0,this[_0x4f934c(0x21c)][_0xf4bb4d]=0x0,this[_0x4f934c(0x538)][_0xf4bb4d]=0x0,this['nPTZRectNum'][_0xf4bb4d]=0x0,this[_0x4f934c(0x3ab)][_0xf4bb4d]=[],this[_0x4f934c(0x47b)][_0xf4bb4d]=[],this[_0x4f934c(0x3bb)][_0xf4bb4d]=[],this[_0x4f934c(0x22d)][_0xf4bb4d]=[];for(var _0x28d702=0x0;_0x28d702<0x4;++_0x28d702)this['pRectPoints'][_0xf4bb4d][_0x28d702]=[],this[_0x4f934c(0x47b)][_0xf4bb4d][_0x28d702]['fX']=0x0,this['pRectPoints'][_0xf4bb4d][_0x28d702]['fY']=0x0;for(var _0xbb769f=0x0;_0xbb769f<0x400;++_0xbb769f)this[_0x4f934c(0x3bb)][_0xf4bb4d][_0xbb769f]=[],this[_0x4f934c(0x3bb)][_0xf4bb4d][_0xbb769f]['fX']=0x0,this[_0x4f934c(0x3bb)][_0xf4bb4d][_0xbb769f]['fY']=0x0,this[_0x4f934c(0x22d)][_0xf4bb4d][_0xbb769f]=[],this[_0x4f934c(0x22d)][_0xf4bb4d][_0xbb769f]['fX']=0x0,this[_0x4f934c(0x22d)][_0xf4bb4d][_0xbb769f]['fY']=0x0,this[_0x4f934c(0x3ab)][_0xf4bb4d][_0xbb769f]=[],this[_0x4f934c(0x3ab)][_0xf4bb4d][_0xbb769f]['fX']=0x0,this[_0x4f934c(0x3ab)][_0xf4bb4d][_0xbb769f]['fY']=0x0;this[_0x4f934c(0x371)][_0xf4bb4d]=0x0,this[_0x4f934c(0x3ae)][_0xf4bb4d]=[];for(var _0x1897e7=0x0;_0x1897e7<0x64;++_0x1897e7)this[_0x4f934c(0x3ae)][_0xf4bb4d][_0x1897e7]=0x0;}this[_0x4f934c(0x331)]();}return _0x5a3b91(_0x92cc8d,[{'key':_0x22f0ab(0x276),'value':function(_0x56bf04){var _0x87e280=_0x22f0ab;for(var _0x2a3532=-0x1,_0x3e7f70=0x0;_0x3e7f70<0x20;++_0x3e7f70)if(0x0==this[_0x87e280(0x3ee)][_0x3e7f70]){_0x2a3532=_0x3e7f70;break;}if(-0x1!=_0x2a3532){var _0x4f8a2f=this['JudgeDisplayEffect'](_0x56bf04);if(_0x13949e[_0x87e280(0x4a6)]!=_0x4f8a2f)return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;if(_0x3468da['SR_DE_FISH_PANORAMA_CEILING_360']==_0x56bf04||_0x3468da[_0x87e280(0x4f5)]==_0x56bf04||_0x3468da[_0x87e280(0x2f5)]==_0x56bf04||_0x3468da[_0x87e280(0x3a8)]==_0x56bf04||_0x3468da['SR_DE_FISH_PANORAMA_WALL']==_0x56bf04||_0x3468da[_0x87e280(0x224)]==_0x56bf04){if(-0x1!=this[_0x87e280(0x270)])return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;this['nWndPort']=_0x2a3532;}if(!(_0x3468da[_0x87e280(0x2b7)]!=_0x56bf04&&_0x3468da[_0x87e280(0x4c2)]!=_0x56bf04&&_0x3468da['SR_DE_FISH_PTZ_WALL']!=_0x56bf04||-0x1==this[_0x87e280(0x270)]||null==this['pRenderParam'][this[_0x87e280(0x270)]]||_0x3468da[_0x87e280(0x4f5)]!=this['pRenderParam'][this[_0x87e280(0x270)]][_0x87e280(0x1fe)]&&_0x3468da[_0x87e280(0x3a8)]!=this[_0x87e280(0x45b)][this[_0x87e280(0x270)]][_0x87e280(0x1fe)]))return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;if(_0x3468da[_0x87e280(0x4f5)]==_0x56bf04||_0x3468da[_0x87e280(0x3a8)]==_0x56bf04){for(var _0x3cbb7b=0x0;_0x3cbb7b<0x20;++_0x3cbb7b)if(null!=this[_0x87e280(0x45b)][_0x3cbb7b]&&(_0x3468da[_0x87e280(0x2b7)]==this[_0x87e280(0x45b)][_0x3cbb7b][_0x87e280(0x1fe)]||_0x3468da[_0x87e280(0x4c2)]==this['pRenderParam'][_0x3cbb7b]['nDisplayEffect']||_0x3468da[_0x87e280(0x4bf)]==this[_0x87e280(0x45b)][_0x3cbb7b][_0x87e280(0x1fe)]))return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;}if(_0x3468da['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x56bf04){for(var _0x31b750=0x0;_0x31b750<0x20;++_0x31b750)if(null!=this['pRenderParam'][_0x31b750]&&_0x3468da[_0x87e280(0x26f)]==this['pRenderParam'][_0x31b750][_0x87e280(0x1fe)])return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;}if(_0x3468da[_0x87e280(0x26f)]==_0x56bf04){for(var _0x2938a6=0x0;_0x2938a6<0x20;++_0x2938a6)if(null!=this[_0x87e280(0x45b)][_0x2938a6]&&_0x3468da[_0x87e280(0x36e)]==this[_0x87e280(0x45b)][_0x2938a6][_0x87e280(0x1fe)])return this[_0x87e280(0x32d)](_0x2a3532),_0x2a3532=-0x1;}this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x265)]=0x1,this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x2ee)]=0x0,this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x405)]=0x1,this[_0x87e280(0x45b)][_0x2a3532]['fSinH']=0x0,this['pRenderParam'][_0x2a3532][_0x87e280(0x314)]=0x0,this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x1f8)]=this[_0x87e280(0x1f8)],this['pRenderParam'][_0x2a3532][_0x87e280(0x3aa)]=this[_0x87e280(0x3aa)],this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x34c)]=this[_0x87e280(0x34c)],this['pRenderParam'][_0x2a3532][_0x87e280(0x4ed)]=this['fRY2'],this[_0x87e280(0x45b)][_0x2a3532]['bBlack']=this[_0x87e280(0x40f)],this['pRenderParam'][_0x2a3532][_0x87e280(0x3f4)]=0.035+0.8,this[_0x87e280(0x45b)][_0x2a3532]['nDisplayEffect']=_0x56bf04,this['pFishParam'][_0x2a3532][_0x87e280(0x314)]=this['pRenderParam'][_0x2a3532][_0x87e280(0x314)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x3d6)]=0.5,this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x40c)]=0.5,this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x27e)]=this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x1f8)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x469)]=this['pRenderParam'][_0x2a3532][_0x87e280(0x3aa)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x2bb)]=this[_0x87e280(0x45b)][_0x2a3532][_0x87e280(0x34c)],this['pFishParam'][_0x2a3532][_0x87e280(0x2e9)]=this['pRenderParam'][_0x2a3532]['fRY2'],this[_0x87e280(0x1ee)][_0x2a3532]['bBlack']=this['pRenderParam'][_0x2a3532][_0x87e280(0x40f)],this[_0x87e280(0x1ee)][_0x2a3532][_0x87e280(0x3f4)]=(this[_0x87e280(0x45b)][_0x2a3532]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0x2a3532]=!0x0;}return _0x2a3532;}},{'key':_0x22f0ab(0x32d),'value':function(_0x19122a){var _0x44bf54=_0x22f0ab;if(_0x19122a<0x0||0x20<=_0x19122a)return _0x13949e[_0x44bf54(0x203)];this[_0x44bf54(0x270)]==_0x19122a&&(this['nWndPort']=-0x1),this['pRenderParam'][_0x19122a][_0x44bf54(0x265)]=0x1,this['pRenderParam'][_0x19122a][_0x44bf54(0x2ee)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x405)]=0x1,this['pRenderParam'][_0x19122a][_0x44bf54(0x3e0)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x314)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x3f4)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x1f8)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x3aa)]=0x1,this['pRenderParam'][_0x19122a][_0x44bf54(0x34c)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x4ed)]=0x1,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x1fe)]=0x0,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x40f)]=!0x1,this[_0x44bf54(0x45b)][_0x19122a][_0x44bf54(0x324)]=!0x1,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x260)]=0x0,this[_0x44bf54(0x1ee)][_0x19122a]['fRXLeft']=0x0,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x469)]=0x1,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x2bb)]=0x0,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x2e9)]=0x1,this[_0x44bf54(0x1ee)][_0x19122a]['bBlack']=!0x1,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x324)]=!0x1,this['pFishParam'][_0x19122a]['fAngle']=0x0,this[_0x44bf54(0x1ee)][_0x19122a]['fZoom']=0x0,this[_0x44bf54(0x1ee)][_0x19122a][_0x44bf54(0x3d6)]=0.5,this['pFishParam'][_0x19122a][_0x44bf54(0x40c)]=0.5,this['nBasePTZPointNum'][_0x19122a]=0x0,this[_0x44bf54(0x21c)][_0x19122a]=0x0,this[_0x44bf54(0x538)][_0x19122a]=0x0;for(var _0x3f4ea3=this[_0x44bf54(0x4bc)][_0x19122a]=0x0;_0x3f4ea3<0x4;++_0x3f4ea3)this[_0x44bf54(0x47b)][_0x19122a][_0x3f4ea3]['fX']=0x0,this[_0x44bf54(0x47b)][_0x19122a][_0x3f4ea3]['fY']=0x0;for(var _0x3d5dd5=0x0;_0x3d5dd5<0x400;++_0x3d5dd5)this['pBasePTZPoints'][_0x19122a][_0x3d5dd5]['fX']=0x0,this[_0x44bf54(0x3bb)][_0x19122a][_0x3d5dd5]['fY']=0x0,this[_0x44bf54(0x22d)][_0x19122a][_0x3d5dd5]['fX']=0x0,this[_0x44bf54(0x22d)][_0x19122a][_0x3d5dd5]['fY']=0x0,this['pPanoPTZPoints'][_0x19122a][_0x3d5dd5]['fX']=0x0,this['pPanoPTZPoints'][_0x19122a][_0x3d5dd5]['fY']=0x0;if(null!=this[_0x44bf54(0x3eb)]&&(this[_0x44bf54(0x3eb)][_0x19122a]['fA']=0x0,this['pPTZSetColor'][_0x19122a]['fR']=0x0,this[_0x44bf54(0x3eb)][_0x19122a]['fG']=0x0,this[_0x44bf54(0x3eb)][_0x19122a]['fB']=0x0),this['bPTZSelected'][_0x19122a]=!0x1,0x0!=this['nPlaceType']){var _0x188ac5=!0x1;if(null!=this['pRenderParam'][i]){for(var _0x565c4d=0x0;_0x565c4d<0x20;++_0x565c4d)if(null!=this[_0x44bf54(0x45b)][_0x565c4d]&&(_0x3468da[_0x44bf54(0x2b7)]==this['pRenderParam'][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da['SR_DE_FISH_PTZ_FLOOR']==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x4bf)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x208)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da['SR_DE_FISH_PANORAMA_CEILING_180']==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x2f5)]==this[_0x44bf54(0x45b)][_0x565c4d]['nDisplayEffect']||_0x3468da[_0x44bf54(0x3a8)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x33c)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x4dc)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x3a9)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x3f3)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da[_0x44bf54(0x4f9)]==this['pRenderParam'][_0x565c4d]['nDisplayEffect']||_0x3468da[_0x44bf54(0x36e)]==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)]||_0x3468da['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this[_0x44bf54(0x45b)][_0x565c4d][_0x44bf54(0x1fe)])){_0x188ac5=!0x0;break;}}_0x188ac5||(this['nPlaceType']=0x0);}for(var _0x6f6c24=!0x1,_0x2650a4=0x0;_0x2650a4<0x20;++_0x2650a4)if(null!=this['pRenderParam'][_0x2650a4]){_0x6f6c24=!0x0;break;}_0x6f6c24||(this[_0x44bf54(0x1f8)]=0x0,this[_0x44bf54(0x3aa)]=0x1,this[_0x44bf54(0x34c)]=0x0,this[_0x44bf54(0x4ed)]=0x1,this['bBlack']=!0x1);for(var _0x2d2ee9=this[_0x44bf54(0x371)][_0x19122a]=0x0;_0x2d2ee9<0x64;++_0x2d2ee9)this[_0x44bf54(0x3ae)][_0x19122a][_0x2d2ee9]=0x0;return this[_0x44bf54(0x3ee)][_0x19122a]=!0x1,_0x13949e[_0x44bf54(0x4a6)];}},{'key':'DeInit','value':function(){var _0x19548c=_0x22f0ab;for(var _0xcd4be7=0x0;_0xcd4be7<0x20;++_0xcd4be7){for(var _0x52fa88=0x0;_0x52fa88<0x4;++_0x52fa88)this[_0x19548c(0x47b)][_0xcd4be7][_0x52fa88]=null;for(var _0xcd362f=0x0;_0xcd362f<0x400;++_0xcd362f)this[_0x19548c(0x3bb)][_0xcd4be7][_0xcd362f]=null,this[_0x19548c(0x22d)][_0xcd4be7][_0xcd362f]=null,this[_0x19548c(0x3ab)][_0xcd4be7][_0xcd362f]=null;this[_0x19548c(0x371)][_0xcd4be7]=0x0,this[_0x19548c(0x3ae)][_0xcd4be7]=null,this[_0x19548c(0x3ee)][_0xcd4be7]=!0x1,this[_0x19548c(0x447)][_0xcd4be7]=!0x1,this[_0x19548c(0x45b)][_0xcd4be7]=null,this['pFishParam'][_0xcd4be7]=null,this[_0x19548c(0x320)][_0xcd4be7]=null,this[_0x19548c(0x43d)][_0xcd4be7]=0x0,this['nOriPTZPointNum'][_0xcd4be7]=0x0,this[_0x19548c(0x538)][_0xcd4be7]=0x0,this[_0x19548c(0x4bc)][_0xcd4be7]=0x0,this[_0x19548c(0x3ab)][_0xcd4be7]=null,this[_0x19548c(0x47b)][_0xcd4be7]=null,this[_0x19548c(0x3bb)][_0xcd4be7]=null,this['pOriPTZPoints'][_0xcd4be7]=null;}this[_0x19548c(0x3ee)]=null,this[_0x19548c(0x45b)]=null,this['pFishParam']=null,this[_0x19548c(0x320)]=null,this[_0x19548c(0x3eb)]=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this[_0x19548c(0x538)]=null,this[_0x19548c(0x371)]=null,this[_0x19548c(0x3bb)]=null,this[_0x19548c(0x3ab)]=null,this[_0x19548c(0x47b)]=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x366953,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this[_0x19548c(0x4ed)]=0x1,this[_0x19548c(0x40f)]=!0x1,this[_0x19548c(0x22d)]=null,this[_0x19548c(0x3bb)]=null,this[_0x19548c(0x270)]=-0x1,this[_0x19548c(0x344)]=0x0,this[_0x19548c(0x3ae)]=null,this[_0x19548c(0x447)]=null,this[_0x19548c(0x334)]=_0x46c232;}},{'key':'InitColorList','value':function(){var _0x32ea58=_0x22f0ab;this[_0x32ea58(0x320)][0x0]['fR']=0.5,this[_0x32ea58(0x320)][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this[_0x32ea58(0x320)][0x0]['fA']=0x1,this[_0x32ea58(0x320)][0x1]['fR']=0x1,this[_0x32ea58(0x320)][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this[_0x32ea58(0x320)][0x1]['fA']=0x1,this[_0x32ea58(0x320)][0x2]['fR']=0x0,this[_0x32ea58(0x320)][0x2]['fG']=0x1,this[_0x32ea58(0x320)][0x2]['fB']=0x0,this[_0x32ea58(0x320)][0x2]['fA']=0x1,this[_0x32ea58(0x320)][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this[_0x32ea58(0x320)][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this[_0x32ea58(0x320)][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this[_0x32ea58(0x320)][0x4]['fB']=0x0,this[_0x32ea58(0x320)][0x4]['fA']=0x1,this[_0x32ea58(0x320)][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this[_0x32ea58(0x320)][0x5]['fB']=0x1,this[_0x32ea58(0x320)][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this[_0x32ea58(0x320)][0x6]['fG']=0x1,this[_0x32ea58(0x320)][0x6]['fB']=0x1,this[_0x32ea58(0x320)][0x6]['fA']=0x1,this[_0x32ea58(0x320)][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this[_0x32ea58(0x320)][0x7]['fB']=0x0,this[_0x32ea58(0x320)][0x7]['fA']=0x1,this[_0x32ea58(0x320)][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this[_0x32ea58(0x320)][0x8]['fB']=0.5,this[_0x32ea58(0x320)][0x8]['fA']=0x1;for(var _0x4bf059=0x9;_0x4bf059<0x20;_0x4bf059++)this['stPTZColor'][_0x4bf059]['fR']=+_0x4bf059/0x20,this[_0x32ea58(0x320)][_0x4bf059]['fG']=+_0x4bf059/0x20,this[_0x32ea58(0x320)][_0x4bf059]['fB']=+_0x4bf059/0x20,this[_0x32ea58(0x320)][_0x4bf059]['fA']=0x1;return _0x13949e['SR_OK'];}},{'key':'GetRangePoints','value':function(_0x300580){var _0x1c92d6=_0x22f0ab;if(_0x300580<0x0||0x20<=_0x300580)return _0x13949e['SR_ERR_PARAM'];if(null==this[_0x1c92d6(0x45b)][_0x300580])return _0x13949e[_0x1c92d6(0x2cf)];var _0x31586b=0x0,_0x5c2563=0x0;switch(this[_0x1c92d6(0x21c)][_0x300580]=0x0,this[_0x1c92d6(0x43d)][_0x300580]=0x0,this[_0x1c92d6(0x45b)][_0x300580][_0x1c92d6(0x1fe)]){case _0x3468da['SR_DE_FISH_PTZ_CEILING']:for(_0x5c2563=0x0;_0x5c2563<0x1;_0x5c2563+=0.01)this[_0x1c92d6(0x1eb)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0.9995,_0x31586b=0x0;_0x31586b<0x1;_0x31586b+=0.02)this[_0x1c92d6(0x1eb)](_0x31586b,_0x5c2563,_0x300580);for(_0x31586b=0.999,_0x5c2563=0.9995;0x0<=_0x5c2563;_0x5c2563-=0.01)this[_0x1c92d6(0x1eb)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0x0,_0x31586b=0.999;0x0<=_0x31586b;_0x31586b-=0.02)this['GetFishPTZCeiling'](_0x31586b,_0x5c2563,_0x300580);break;case _0x3468da[_0x1c92d6(0x4c2)]:for(_0x5c2563=0x0;_0x5c2563<0x1;_0x5c2563+=0.01)this[_0x1c92d6(0x486)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0.9995,_0x31586b=0x0;_0x31586b<0x1;_0x31586b+=0.02)this['GetFishPTZFloor'](_0x31586b,_0x5c2563,_0x300580);for(_0x31586b=0.999,_0x5c2563=0.9995;0x0<=_0x5c2563;_0x5c2563-=0.01)this['GetFishPTZFloor'](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0x0,_0x31586b=0.999;0x0<=_0x31586b;_0x31586b-=0.02)this['GetFishPTZFloor'](_0x31586b,_0x5c2563,_0x300580);break;case _0x3468da[_0x1c92d6(0x4bf)]:for(_0x5c2563=0x0;_0x5c2563<0x1;_0x5c2563+=0.01)this['GetFishPTZWALL'](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0.9995,_0x31586b=0x0;_0x31586b<0x1;_0x31586b+=0.02)this[_0x1c92d6(0x25e)](_0x31586b,_0x5c2563,_0x300580);for(_0x31586b=0.999,_0x5c2563=0.9995;0x0<=_0x5c2563;_0x5c2563-=0.01)this[_0x1c92d6(0x25e)](_0x31586b,_0x5c2563,_0x300580);for(_0x5c2563=0x0,_0x31586b=0.999;0x0<=_0x31586b;_0x31586b-=0.02)this[_0x1c92d6(0x25e)](_0x31586b,_0x5c2563,_0x300580);}return _0x13949e[_0x1c92d6(0x4a6)];}},{'key':_0x22f0ab(0x38f),'value':function(_0x1509b5){var _0x4d100a=_0x22f0ab;if(-0x1==this[_0x4d100a(0x270)])return _0x13949e[_0x4d100a(0x2cf)];if(null==this[_0x4d100a(0x3bb)][_0x1509b5]||null==this['pRenderParam'][this[_0x4d100a(0x270)]])return _0x13949e['SR_ERR_CALL_ORDER'];this[_0x4d100a(0x538)][_0x1509b5]=0x0;var _0x6702aa=_0x13949e['SR_OK'],_0x38fa33=this['nWndPort'];switch(this[_0x4d100a(0x45b)][_0x38fa33][_0x4d100a(0x1fe)]){case _0x3468da['SR_DE_FISH_PANORAMA_WALL']:if(_0x6702aa=this[_0x4d100a(0x4e2)](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)]!=_0x6702aa)return _0x6702aa;break;case _0x3468da['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x6702aa=this[_0x4d100a(0x490)](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)]!=_0x6702aa)return _0x6702aa;break;case _0x3468da[_0x4d100a(0x208)]:if(_0x6702aa=this[_0x4d100a(0x220)](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)]!=_0x6702aa)return _0x6702aa;break;default:return _0x13949e[_0x4d100a(0x38d)];}return this['CalcPTZFragmentPoints'](_0x1509b5),_0x13949e[_0x4d100a(0x4a6)];}},{'key':'GetRectPoints','value':function(_0x32f114){var _0x248c9f=_0x22f0ab;if(_0x32f114<0x0||0x20<=_0x32f114)return _0x13949e[_0x248c9f(0x203)];if(-0x1==this[_0x248c9f(0x270)])return _0x13949e[_0x248c9f(0x2cf)];if(null==this[_0x248c9f(0x45b)][this[_0x248c9f(0x270)]]||null==this['pFishParam'][_0x32f114])return _0x13949e[_0x248c9f(0x2cf)];var _0xefc3=this[_0x248c9f(0x45b)][this['nWndPort']]['nDisplayEffect'],_0x195b20=_0x13949e['SR_OK'],_0x3c0e67=[];switch(_0x3c0e67['fX']=0x0,_0x3c0e67['fY']=0x0,_0xefc3){case _0x3468da['SR_DE_FISH_PANORAMA_WALL']:if(_0x195b20=this[_0x248c9f(0x3bd)](_0x3c0e67,this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x3d6)],this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)]),_0x13949e[_0x248c9f(0x4a6)]!=_0x195b20)return _0x195b20;break;case _0x3468da[_0x248c9f(0x2f5)]:if(_0x195b20=this['GetPointFish2PanoFloor'](_0x3c0e67,this[_0x248c9f(0x1ee)][_0x32f114]['fPTZX'],this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)]),_0x13949e[_0x248c9f(0x4a6)]!=_0x195b20)return _0x13949e['SR_ERR_NOT_SUPPORT']==_0x195b20&&(this[_0x248c9f(0x47b)][_0x32f114]=null),_0x195b20;break;case _0x3468da['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x195b20=this[_0x248c9f(0x523)](_0x3c0e67,this[_0x248c9f(0x1ee)][_0x32f114]['fPTZX'],this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)]),_0x13949e['SR_OK']!=_0x195b20)return _0x13949e[_0x248c9f(0x38d)]==_0x195b20&&(this[_0x248c9f(0x47b)][_0x32f114]=null),_0x195b20;break;case _0x3468da[_0x248c9f(0x224)]:_0x3c0e67['fX']=this[_0x248c9f(0x1ee)][_0x32f114]['fPTZX'],_0x3c0e67['fY']=this[_0x248c9f(0x1ee)][_0x32f114][_0x248c9f(0x40c)];break;default:return _0x13949e[_0x248c9f(0x38d)];}if(null==this[_0x248c9f(0x47b)][_0x32f114]){this['pRectPoints'][_0x32f114]=[];for(var _0x1a8285=0x0;_0x1a8285<0x4;++_0x1a8285)this[_0x248c9f(0x47b)][_0x32f114][_0x1a8285]=[],this[_0x248c9f(0x47b)][_0x32f114][_0x1a8285]['fX']=0x0,this['pRectPoints'][_0x32f114][_0x1a8285]['fY']=0x0;}return this[_0x248c9f(0x47b)][_0x32f114][0x0]['fX']=_0x3c0e67['fX']-_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x0]['fY']=_0x3c0e67['fY']-_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x1]['fX']=_0x3c0e67['fX']+_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x1]['fY']=_0x3c0e67['fY']-_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x2]['fX']=_0x3c0e67['fX']+_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x2]['fY']=_0x3c0e67['fY']+_0x473777,this[_0x248c9f(0x47b)][_0x32f114][0x3]['fX']=_0x3c0e67['fX']-_0x473777,this['pRectPoints'][_0x32f114][0x3]['fY']=_0x3c0e67['fY']+_0x473777,this[_0x248c9f(0x4bc)][_0x32f114]=0x4,_0x13949e['SR_OK'];}},{'key':_0x22f0ab(0x1eb),'value':function(_0xc4cf39,_0x3e0af4,_0x5dd1d0){var _0x3866dc=_0x22f0ab,_0x449b7d=[],_0x25a237=(_0x449b7d['fX']=0x0,_0x449b7d['fY']=0x0,[]),_0x128fe1=(_0x25a237['fX']=0x0,_0x25a237['fY']=0x0,[]),_0x8e09c3=(_0x128fe1['fX']=0x0,_0x128fe1['fY']=0x0,[]),_0x124c1c=(this['fRX2']-this[_0x3866dc(0x1f8)])/(this['fRY2']-this['fRY1']),_0x42c2aa=(this[_0x3866dc(0x1f8)]+this[_0x3866dc(0x3aa)])/0x2*0x1,_0x5ab76b=(this[_0x3866dc(0x34c)]+this[_0x3866dc(0x4ed)])/0x2*_0x124c1c,_0x48241c=(this[_0x3866dc(0x3aa)]-this['fRX1'])/0x2*0x1,_0xc4cf39=(_0x449b7d['fX']=_0x3e0af4-0.5,_0x449b7d['fY']=0.5-_0xc4cf39,_0x3e0af4=this['pRenderParam'][_0x5dd1d0]['fZoom'],_0x25a237['fX']=_0x449b7d['fX'],_0x25a237['fY']=_0x449b7d['fY']*this['pRenderParam'][_0x5dd1d0][_0x3866dc(0x405)]+_0x3e0af4*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x3e0)],_0x3e0af4*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x405)]-_0x449b7d['fY']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x3e0)]),_0x3e0af4=Math[_0x3866dc(0x41c)](_0x25a237['fX']*_0x25a237['fX']+_0x25a237['fY']*_0x25a237['fY']),_0x449b7d=Math[_0x3866dc(0x41c)](_0x25a237['fX']*_0x25a237['fX']+_0x25a237['fY']*_0x25a237['fY']+_0xc4cf39*_0xc4cf39),_0xc4cf39=Math['asin'](_0x3e0af4/_0x449b7d)/1.5707963*0.5,_0x449b7d=(_0x25a237['fX']=_0xc4cf39*_0x25a237['fX']/_0x3e0af4,_0x25a237['fY']=_0xc4cf39*_0x25a237['fY']/_0x3e0af4,_0x128fe1['fX']=_0x25a237['fX']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x265)]-_0x25a237['fY']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x2ee)],_0x128fe1['fY']=_0x25a237['fX']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x2ee)]+_0x25a237['fY']*this[_0x3866dc(0x45b)][_0x5dd1d0][_0x3866dc(0x265)],_0x8e09c3['fX']=0x2*_0x128fe1['fX']*_0x48241c+_0x42c2aa,_0x8e09c3['fY']=0x2*-_0x128fe1['fY']*_0x48241c+_0x5ab76b,this[_0x3866dc(0x43d)][_0x5dd1d0]),_0xc4cf39=(this[_0x3866dc(0x3bb)][_0x5dd1d0][_0x449b7d]['fX']=_0x128fe1['fX']+0.5,this[_0x3866dc(0x3bb)][_0x5dd1d0][_0x449b7d]['fY']=0.5-_0x128fe1['fY'],this[_0x3866dc(0x43d)][_0x5dd1d0]=this[_0x3866dc(0x43d)][_0x5dd1d0]+0x1,this[_0x3866dc(0x1f8)]<=0x0?0x0:+this[_0x3866dc(0x1f8)]),_0x3e0af4=this[_0x3866dc(0x34c)]<=0x0?0x0:this[_0x3866dc(0x34c)]*_0x124c1c,_0x25a237=0x1<=this[_0x3866dc(0x3aa)]?0x1-_0xc4cf39:+this['fRX2']-_0xc4cf39,_0x42c2aa=0x1<=this[_0x3866dc(0x4ed)]?_0x124c1c-_0x3e0af4:this[_0x3866dc(0x4ed)]*_0x124c1c-_0x3e0af4;return _0x8e09c3['fX']=(_0x8e09c3['fX']-_0xc4cf39)/_0x25a237,_0x8e09c3['fY']=(_0x8e09c3['fY']-_0x3e0af4)/_0x42c2aa,_0x8e09c3['fX']<=0x1&&_0x8e09c3['fY']<=0x1&&0x0<=_0x8e09c3['fX']&&0x0<=_0x8e09c3['fY']&&(_0x48241c=this['nOriPTZPointNum'][_0x5dd1d0],this[_0x3866dc(0x22d)][_0x5dd1d0][_0x48241c]['fX']=_0x8e09c3['fX'],this['pOriPTZPoints'][_0x5dd1d0][_0x48241c]['fY']=_0x8e09c3['fY'],this[_0x3866dc(0x21c)][_0x5dd1d0]=this[_0x3866dc(0x21c)][_0x5dd1d0]+0x1),_0x13949e[_0x3866dc(0x4a6)];}},{'key':_0x22f0ab(0x486),'value':function(_0x328e50,_0x36324b,_0x37f64a){var _0x182c99=_0x22f0ab,_0x69f57e=[],_0x874c3c=(_0x69f57e['fX']=0x0,_0x69f57e['fY']=0x0,[]),_0x52b303=(_0x874c3c['fX']=0x0,_0x874c3c['fY']=0x0,[]),_0x5e6c32=(_0x52b303['fX']=0x0,_0x52b303['fY']=0x0,[]),_0x2a6b73=(this[_0x182c99(0x3aa)]-this[_0x182c99(0x1f8)])/(this[_0x182c99(0x4ed)]-this[_0x182c99(0x34c)]),_0x569474=(this[_0x182c99(0x1f8)]+this[_0x182c99(0x3aa)])/0x2*0x1,_0x2ea78=(this[_0x182c99(0x34c)]+this['fRY2'])/0x2*_0x2a6b73,_0x3fe769=(this[_0x182c99(0x3aa)]-this['fRX1'])/0x2*0x1,_0x36324b=(_0x69f57e['fX']=_0x328e50-0.5,_0x69f57e['fY']=_0x36324b-0.5,_0x328e50=this[_0x182c99(0x45b)][_0x37f64a]['fZoom'],_0x874c3c['fX']=_0x69f57e['fX'],_0x874c3c['fY']=_0x69f57e['fY']*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x405)]+_0x328e50*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x3e0)],_0x328e50*this[_0x182c99(0x45b)][_0x37f64a]['fCosV']-_0x69f57e['fY']*this[_0x182c99(0x45b)][_0x37f64a]['fSinV']),_0x328e50=Math[_0x182c99(0x41c)](_0x874c3c['fX']*_0x874c3c['fX']+_0x874c3c['fY']*_0x874c3c['fY']),_0x69f57e=Math['sqrt'](_0x874c3c['fX']*_0x874c3c['fX']+_0x874c3c['fY']*_0x874c3c['fY']+_0x36324b*_0x36324b),_0x36324b=Math[_0x182c99(0x2c8)](_0x328e50/_0x69f57e)/1.5707963*0.5,_0x69f57e=(_0x874c3c['fX']=_0x36324b*_0x874c3c['fX']/_0x328e50,_0x874c3c['fY']=_0x36324b*_0x874c3c['fY']/_0x328e50,_0x52b303['fX']=_0x874c3c['fX']*this['pRenderParam'][_0x37f64a]['fCosH']-_0x874c3c['fY']*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x2ee)],_0x52b303['fY']=_0x874c3c['fX']*this[_0x182c99(0x45b)][_0x37f64a][_0x182c99(0x2ee)]+_0x874c3c['fY']*this['pRenderParam'][_0x37f64a][_0x182c99(0x265)],_0x5e6c32['fX']=0x2*_0x52b303['fX']*_0x3fe769+_0x569474,_0x5e6c32['fY']=0x2*_0x52b303['fY']*_0x3fe769+_0x2ea78,this[_0x182c99(0x43d)][_0x37f64a]),_0x36324b=(this['pBasePTZPoints'][_0x37f64a][_0x69f57e]['fX']=_0x52b303['fX']+0.5,this[_0x182c99(0x3bb)][_0x37f64a][_0x69f57e]['fY']=_0x52b303['fY']+0.5,this[_0x182c99(0x43d)][_0x37f64a]=this[_0x182c99(0x43d)][_0x37f64a]+0x1,this['fRX1']<=0x0?0x0:+this[_0x182c99(0x1f8)]),_0x328e50=this[_0x182c99(0x34c)]<=0x0?0x0:this['fRY1']*_0x2a6b73,_0x874c3c=0x1<=this['fRX2']?0x1-_0x36324b:+this[_0x182c99(0x3aa)]-_0x36324b,_0x569474=0x1<=this[_0x182c99(0x4ed)]?_0x2a6b73-_0x328e50:this[_0x182c99(0x4ed)]*_0x2a6b73-_0x328e50;return _0x5e6c32['fX']=(_0x5e6c32['fX']-_0x36324b)/_0x874c3c,_0x5e6c32['fY']=(_0x5e6c32['fY']-_0x328e50)/_0x569474,_0x5e6c32['fX']<=0x1&&_0x5e6c32['fY']<=0x1&&0x0<=_0x5e6c32['fX']&&0x0<=_0x5e6c32['fY']&&(_0x3fe769=this[_0x182c99(0x21c)][_0x37f64a],this[_0x182c99(0x22d)][_0x37f64a][_0x3fe769]['fX']=_0x5e6c32['fX'],this[_0x182c99(0x22d)][_0x37f64a][_0x3fe769]['fY']=_0x5e6c32['fY'],this[_0x182c99(0x21c)][_0x37f64a]=this[_0x182c99(0x21c)][_0x37f64a]+0x1),_0x13949e[_0x182c99(0x4a6)];}},{'key':_0x22f0ab(0x25e),'value':function(_0x22fa02,_0x2b3be5,_0x7bfbc8){var _0x45b53a=_0x22f0ab,_0x2022f3=[],_0xd1701f=(_0x2022f3['fX']=0x0,_0x2022f3['fY']=0x0,[]),_0x19ab1c=(_0xd1701f['fX']=0x0,_0xd1701f['fY']=0x0,[]),_0x4a0a53=(_0x19ab1c['fX']=0x0,_0x19ab1c['fY']=0x0,[]),_0x243f3a=(this[_0x45b53a(0x3aa)]-this[_0x45b53a(0x1f8)])/(this[_0x45b53a(0x4ed)]-this['fRY1']),_0x1233e0=(this[_0x45b53a(0x1f8)]+this[_0x45b53a(0x3aa)])/0x2*0x1,_0x2b29d7=(this['fRY1']+this[_0x45b53a(0x4ed)])/0x2*_0x243f3a,_0x3fe90d=(this[_0x45b53a(0x3aa)]-this[_0x45b53a(0x1f8)])/0x2*0x1,_0x2b3be5=(_0x2022f3['fX']=_0x2b3be5-0.5,_0x2022f3['fY']=_0x22fa02-0.5,_0x2b3be5=this[_0x45b53a(0x45b)][_0x7bfbc8]['fZoom'],_0xd1701f['fX']=_0x2022f3['fX'],_0xd1701f['fY']=_0x2022f3['fY']*this[_0x45b53a(0x45b)][_0x7bfbc8]['fCosV']+_0x2b3be5*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x3e0)],_0x22fa02=_0x2b3be5*this['pRenderParam'][_0x7bfbc8]['fCosV']-_0x2022f3['fY']*this['pRenderParam'][_0x7bfbc8][_0x45b53a(0x3e0)],_0x19ab1c['fX']=_0xd1701f['fX']*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x265)]+_0x22fa02*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x2ee)],_0x19ab1c['fY']=_0xd1701f['fY'],_0x22fa02*this[_0x45b53a(0x45b)][_0x7bfbc8][_0x45b53a(0x265)]-_0xd1701f['fX']*this['pRenderParam'][_0x7bfbc8]['fSinH']),_0x2022f3=Math[_0x45b53a(0x41c)](_0x19ab1c['fX']*_0x19ab1c['fX']+_0x19ab1c['fY']*_0x19ab1c['fY']),_0x22fa02=Math[_0x45b53a(0x41c)](_0x19ab1c['fX']*_0x19ab1c['fX']+_0x19ab1c['fY']*_0x19ab1c['fY']+_0x2b3be5*_0x2b3be5),_0xd1701f=Math[_0x45b53a(0x2c8)](_0x2022f3/_0x22fa02)/1.5707963*0.5,_0x2b3be5=(_0x4a0a53['fX']=_0xd1701f*_0x19ab1c['fX']/_0x2022f3*_0x3fe90d*0x2+_0x1233e0,_0x4a0a53['fY']=_0xd1701f*_0x19ab1c['fY']/_0x2022f3*_0x3fe90d*0x2+_0x2b29d7,this[_0x45b53a(0x43d)][_0x7bfbc8]),_0x22fa02=(this['pBasePTZPoints'][_0x7bfbc8][_0x2b3be5]['fX']=_0xd1701f*_0x19ab1c['fX']/_0x2022f3+0.5,this[_0x45b53a(0x3bb)][_0x7bfbc8][_0x2b3be5]['fY']=_0xd1701f*_0x19ab1c['fY']/_0x2022f3+0.5,this[_0x45b53a(0x43d)][_0x7bfbc8]=this['nBasePTZPointNum'][_0x7bfbc8]+0x1,this[_0x45b53a(0x1f8)]<=0x0?0x0:+this['fRX1']),_0x1233e0=this['fRY1']<=0x0?0x0:this[_0x45b53a(0x34c)]*_0x243f3a,_0x3fe90d=0x1<=this['fRX2']?0x1-_0x22fa02:+this[_0x45b53a(0x3aa)]-_0x22fa02,_0x2b29d7=0x1<=this[_0x45b53a(0x4ed)]?_0x243f3a-_0x1233e0:this[_0x45b53a(0x4ed)]*_0x243f3a-_0x1233e0;return _0x4a0a53['fX']=(_0x4a0a53['fX']-_0x22fa02)/_0x3fe90d,_0x4a0a53['fY']=(_0x4a0a53['fY']-_0x1233e0)/_0x2b29d7,_0x4a0a53['fX']<=0x1&&_0x4a0a53['fY']<=0x1&&0x0<=_0x4a0a53['fX']&&0x0<=_0x4a0a53['fY']&&(_0x2b3be5=this[_0x45b53a(0x21c)][_0x7bfbc8],this[_0x45b53a(0x22d)][_0x7bfbc8][_0x2b3be5]['fX']=_0x4a0a53['fX'],this[_0x45b53a(0x22d)][_0x7bfbc8][_0x2b3be5]['fY']=_0x4a0a53['fY'],this[_0x45b53a(0x21c)][_0x7bfbc8]=this[_0x45b53a(0x21c)][_0x7bfbc8]+0x1),_0x13949e['SR_OK'];}},{'key':'GetPanoPTZCeiling','value':function(_0x175dcd){var _0x4b76af=_0x22f0ab;if(null==this['pRenderParam'][_0x175dcd]||null==this[_0x4b76af(0x45b)][this[_0x4b76af(0x270)]])return _0x13949e['SR_ERR_CALL_ORDER'];if(null==this[_0x4b76af(0x3bb)][_0x175dcd])return _0x13949e[_0x4b76af(0x2cf)];var _0x2631e9,_0x4d8e0d=this[_0x4b76af(0x43d)][_0x175dcd],_0x330989=(this['fRX2']-this['fRX1'])/(this[_0x4b76af(0x4ed)]-this['fRY1']),_0x475f41=(this['fRX2']-this[_0x4b76af(0x1f8)])/0x2*0x1,_0x3fff26=0x0,_0x583088=((0x1<this[_0x4b76af(0x3aa)]||0x1<this[_0x4b76af(0x4ed)]||this[_0x4b76af(0x34c)]<0x0||this['fRX1']<0x0)&&(this[_0x4b76af(0x1f8)]<0x0&&_0x3fff26<(_0x2631e9=-this['fRX1'])&&(_0x3fff26=_0x2631e9),0x1<this['fRX2']&&_0x3fff26<(_0x2631e9=this[_0x4b76af(0x3aa)]-0x1)&&(_0x3fff26=_0x2631e9),this['fRY1']<0x0&&_0x3fff26<(_0x2631e9=-this[_0x4b76af(0x34c)]*_0x330989)&&(_0x3fff26=_0x2631e9),0x1<this['fRY2']&&_0x3fff26<(_0x2631e9=(this['fRY2']-0x1)*_0x330989)&&(_0x3fff26=_0x2631e9)),_0x3fff26/_0x475f41),_0x5bc94b=[],_0x305081=(_0x5bc94b['fX']=0x0,_0x5bc94b['fY']=0x0,[]);_0x305081['fX']=0x0;for(var _0x54c260,_0xa064c6,_0x57afb4,_0x1b589d,_0x2cfa31=_0x305081['fY']=0x0;_0x2cfa31<_0x4d8e0d;++_0x2cfa31)_0x305081['fX']=this[_0x4b76af(0x3bb)][_0x175dcd][_0x2cfa31]['fX'],_0x305081['fY']=this[_0x4b76af(0x3bb)][_0x175dcd][_0x2cfa31]['fY'],Math[_0x4b76af(0x1e6)](_0x305081['fX']-0.5)<_0x3e9a49&&Math[_0x4b76af(0x1e6)](_0x305081['fY']-0.5)<_0x3e9a49||((_0x57afb4=[])['fX']=0x0,_0x57afb4['fY']=0x0,(_0x54c260=[])['fX']=0x0,_0x54c260['fY']=0x0,_0x57afb4['fX']=_0x305081['fX']-0.5,_0x57afb4['fY']=_0x305081['fY']-0.5,_0x54c260['fX']=-0.5*Math[_0x4b76af(0x202)](this['pRenderParam'][this['nWndPort']][_0x4b76af(0x314)]),_0x54c260['fY']=0.5*Math['cos'](this[_0x4b76af(0x45b)][this[_0x4b76af(0x270)]][_0x4b76af(0x314)]),_0xa064c6=Math['sqrt'](_0x57afb4['fX']*_0x57afb4['fX']+_0x57afb4['fY']*_0x57afb4['fY']),_0x1b589d=Math['sqrt'](_0x54c260['fX']*_0x54c260['fX']+_0x54c260['fY']*_0x54c260['fY']),_0x1b589d=Math[_0x4b76af(0x432)]((_0x57afb4['fX']*_0x54c260['fX']+_0x57afb4['fY']*_0x54c260['fY'])/(_0xa064c6*_0x1b589d)),0x0<_0x57afb4['fX']*_0x54c260['fY']-_0x57afb4['fY']*_0x54c260['fX']&&(_0x1b589d=6.2831852-_0x1b589d),_0x5bc94b['fX']=_0x1b589d/6.2831853,_0x5bc94b['fY']=(0x2*(0.5-_0xa064c6)-_0x583088)/(0.8-_0x583088),0x0<=_0x5bc94b['fY']&&0x0<=_0x5bc94b['fX']&&_0x5bc94b['fY']<=0x1&&_0x5bc94b['fX']<=0x1&&(_0x57afb4=this[_0x4b76af(0x538)][_0x175dcd],this['pPanoPTZPoints'][_0x175dcd][_0x57afb4]['fX']=_0x5bc94b['fX'],this[_0x4b76af(0x3ab)][_0x175dcd][_0x57afb4]['fY']=_0x5bc94b['fY'],this[_0x4b76af(0x538)][_0x175dcd]=this[_0x4b76af(0x538)][_0x175dcd]+0x1));return _0x13949e[_0x4b76af(0x4a6)];}},{'key':'GetPanoPTZFloor','value':function(_0x8dcfbf){var _0x4f4c24=_0x22f0ab;if(null==this['pRenderParam'][_0x8dcfbf]||null==this[_0x4f4c24(0x45b)][this[_0x4f4c24(0x270)]])return _0x13949e['SR_ERR_CALL_ORDER'];if(null==this['pBasePTZPoints'][_0x8dcfbf])return _0x13949e[_0x4f4c24(0x2cf)];var _0x1f3af0,_0x41fad2=this[_0x4f4c24(0x43d)][_0x8dcfbf],_0x124557=(this[_0x4f4c24(0x3aa)]-this[_0x4f4c24(0x1f8)])/(this[_0x4f4c24(0x4ed)]-this[_0x4f4c24(0x34c)]),_0x54b645=(this['fRX2']-this[_0x4f4c24(0x1f8)])/0x2*0x1,_0x3c5ce1=0x0,_0x446175=((0x1<this[_0x4f4c24(0x3aa)]||0x1<this[_0x4f4c24(0x4ed)]||this[_0x4f4c24(0x34c)]<0x0||this[_0x4f4c24(0x1f8)]<0x0)&&(this[_0x4f4c24(0x1f8)]<0x0&&_0x3c5ce1<(_0x1f3af0=-this[_0x4f4c24(0x1f8)])&&(_0x3c5ce1=_0x1f3af0),0x1<this['fRX2']&&_0x3c5ce1<(_0x1f3af0=this['fRX2']-0x1)&&(_0x3c5ce1=_0x1f3af0),this[_0x4f4c24(0x34c)]<0x0&&_0x3c5ce1<(_0x1f3af0=-this[_0x4f4c24(0x34c)]*_0x124557)&&(_0x3c5ce1=_0x1f3af0),0x1<this[_0x4f4c24(0x4ed)]&&_0x3c5ce1<(_0x1f3af0=(this[_0x4f4c24(0x4ed)]-0x1)*_0x124557)&&(_0x3c5ce1=_0x1f3af0)),_0x3c5ce1/_0x54b645),_0xb401bf=[],_0x7470e2=(_0xb401bf['fX']=0x0,_0xb401bf['fY']=0x0,[]);_0x7470e2['fX']=0x0;for(var _0x95d1ca,_0x436efe,_0x452569,_0x56a612,_0x2b996d=_0x7470e2['fY']=0x0;_0x2b996d<_0x41fad2;++_0x2b996d)_0x7470e2['fX']=this['pBasePTZPoints'][_0x8dcfbf][_0x2b996d]['fX'],_0x7470e2['fY']=this['pBasePTZPoints'][_0x8dcfbf][_0x2b996d]['fY'],Math[_0x4f4c24(0x1e6)](_0x7470e2['fX']-0.5)<_0x3e9a49&&Math[_0x4f4c24(0x1e6)](_0x7470e2['fY']-0.5)<_0x3e9a49||((_0x452569=[])['fX']=0x0,_0x452569['fY']=0x0,(_0x95d1ca=[])['fX']=0x0,_0x95d1ca['fY']=0x0,_0x452569['fX']=_0x7470e2['fX']-0.5,_0x452569['fY']=_0x7470e2['fY']-0.5,_0x95d1ca['fX']=-0.5*Math[_0x4f4c24(0x202)](this['pRenderParam'][this['nWndPort']][_0x4f4c24(0x314)]),_0x95d1ca['fY']=0.5*Math[_0x4f4c24(0x34b)](this[_0x4f4c24(0x45b)][this[_0x4f4c24(0x270)]][_0x4f4c24(0x314)]),_0x436efe=Math[_0x4f4c24(0x41c)](_0x452569['fX']*_0x452569['fX']+_0x452569['fY']*_0x452569['fY']),_0x56a612=Math[_0x4f4c24(0x41c)](_0x95d1ca['fX']*_0x95d1ca['fX']+_0x95d1ca['fY']*_0x95d1ca['fY']),_0x56a612=Math['acos']((_0x452569['fX']*_0x95d1ca['fX']+_0x452569['fY']*_0x95d1ca['fY'])/(_0x436efe*_0x56a612)),0x0<_0x452569['fX']*_0x95d1ca['fY']-_0x452569['fY']*_0x95d1ca['fX']&&(_0x56a612=6.2831852-_0x56a612),_0xb401bf['fX']=0x1-_0x56a612/6.2831853,_0xb401bf['fY']=0x1-(0x2*(0.5-_0x436efe)-_0x446175)/(0.8-_0x446175),0x0<=_0xb401bf['fY']&&0x0<=_0xb401bf['fX']&&_0xb401bf['fY']<=0x1&&_0xb401bf['fX']<=0x1&&(_0x452569=this[_0x4f4c24(0x538)][_0x8dcfbf],this['pPanoPTZPoints'][_0x8dcfbf][_0x452569]['fX']=_0xb401bf['fX'],this['pPanoPTZPoints'][_0x8dcfbf][_0x452569]['fY']=_0xb401bf['fY'],this[_0x4f4c24(0x538)][_0x8dcfbf]=this[_0x4f4c24(0x538)][_0x8dcfbf]+0x1));return _0x13949e['SR_OK'];}},{'key':_0x22f0ab(0x4e2),'value':function(_0x40ad31){var _0x265690=_0x22f0ab;if(null==this[_0x265690(0x45b)][_0x40ad31]||null==this['pRenderParam'][this[_0x265690(0x270)]])return _0x13949e[_0x265690(0x2cf)];if(null==this[_0x265690(0x3bb)][_0x40ad31])return _0x13949e[_0x265690(0x2cf)];var _0x2319a0,_0x266be0=this[_0x265690(0x43d)][_0x40ad31],_0x501f9a=(this['fRX2']-this[_0x265690(0x1f8)])/(this[_0x265690(0x4ed)]-this[_0x265690(0x34c)]),_0x550125=(this['fRX2']-this[_0x265690(0x1f8)])/0x2*0x1,_0x4d5753=0x0,_0x1948bd=0x1,_0x579887=0.1,_0x1bd7c9=0.9,_0x1d1cca=(this[_0x265690(0x1f8)]<0x0&&(_0x2319a0=-this['fRX1'],_0x4d5753=_0x2319a0/=0x2*_0x550125),0x1<this[_0x265690(0x3aa)]&&(_0x2319a0=this[_0x265690(0x3aa)]-0x1,_0x1948bd=0x1-(_0x2319a0/=0x2*_0x550125)),this['fRY1']<0x0&&(_0x2319a0=-this[_0x265690(0x34c)]*_0x501f9a,_0x579887=0.1<(_0x2319a0/=0x2*_0x550125)?_0x2319a0:0.1),0x1<this[_0x265690(0x4ed)]&&(_0x2319a0=(this[_0x265690(0x4ed)]-0x1)*_0x501f9a,_0x1bd7c9=0x1-0.9<(_0x2319a0/=0x2*_0x550125)?0x1-_0x2319a0:0.9),[]),_0x90f489=(_0x1d1cca['fX']=0x0,_0x1d1cca['fY']=0x0,[]);_0x90f489['fX']=0x0;for(var _0x47c336=_0x90f489['fY']=0x0;_0x47c336<_0x266be0;++_0x47c336){_0x90f489['fX']=this[_0x265690(0x3bb)][_0x40ad31][_0x47c336]['fX'],_0x90f489['fY']=this[_0x265690(0x3bb)][_0x40ad31][_0x47c336]['fY'];var _0x17b290=0x2*_0x90f489['fX']*_0x550125,_0x14ab03=0x2*_0x90f489['fY']*_0x550125,_0x30823c=Math[_0x265690(0x41c)](_0x550125*_0x550125-(_0x14ab03-_0x550125)*(_0x14ab03-_0x550125));Math[_0x265690(0x1e6)](_0x30823c)<_0x3e9a49||(_0x90f489['fX']=_0x550125*(_0x17b290-_0x550125)/_0x30823c+_0x550125,_0x90f489['fY']=_0x14ab03,_0x1d1cca['fX']=(_0x90f489['fX']-0x2*_0x4d5753*_0x550125)/(0x2*(_0x1948bd-_0x4d5753)*_0x550125),_0x1d1cca['fY']=(_0x90f489['fY']-0x2*_0x579887*_0x550125)/(0x2*(_0x1bd7c9-_0x579887)*_0x550125),0x0<=_0x1d1cca['fY']&&0x0<=_0x1d1cca['fX']&&_0x1d1cca['fY']<=0x1&&_0x1d1cca['fX']<=0x1&&(_0x17b290=this['nPanoPTZPointNum'][_0x40ad31],this[_0x265690(0x3ab)][_0x40ad31][_0x17b290]['fX']=_0x1d1cca['fX'],this['pPanoPTZPoints'][_0x40ad31][_0x17b290]['fY']=_0x1d1cca['fY'],this['nPanoPTZPointNum'][_0x40ad31]=this[_0x265690(0x538)][_0x40ad31]+0x1));}return _0x13949e[_0x265690(0x4a6)];}},{'key':_0x22f0ab(0x1d9),'value':function(_0x70619e,_0x3be3a2,_0x11f844){var _0x48c64e=_0x22f0ab;if(null==_0x70619e||null==this[_0x48c64e(0x45b)][this[_0x48c64e(0x270)]])return _0x13949e[_0x48c64e(0x2cf)];var _0x15aba3=(this[_0x48c64e(0x3aa)]-this['fRX1'])/(this[_0x48c64e(0x4ed)]-this[_0x48c64e(0x34c)]),_0x51f570=(this[_0x48c64e(0x3aa)]-this['fRX1'])/0x2*0x1,_0x40a1ba=0x0,_0x15aba3=((0x1<this[_0x48c64e(0x3aa)]||0x1<this[_0x48c64e(0x4ed)]||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&_0x40a1ba<(_0x186799=-this[_0x48c64e(0x1f8)])&&(_0x40a1ba=_0x186799),0x1<this[_0x48c64e(0x3aa)]&&_0x40a1ba<(_0x186799=this[_0x48c64e(0x3aa)]-0x1)&&(_0x40a1ba=_0x186799),this[_0x48c64e(0x34c)]<0x0&&_0x40a1ba<(_0x186799=-this[_0x48c64e(0x34c)]*_0x15aba3)&&(_0x40a1ba=_0x186799),0x1<this[_0x48c64e(0x4ed)]&&_0x40a1ba<(_0x186799=(this[_0x48c64e(0x4ed)]-0x1)*_0x15aba3)&&(_0x40a1ba=_0x186799)),_0x40a1ba/_0x51f570),_0x186799=[];if(Math[_0x48c64e(0x1e6)](_0x3be3a2-0.5)<_0x3e9a49&&Math[_0x48c64e(0x1e6)](_0x11f844-0.5)<_0x3e9a49)return _0x13949e[_0x48c64e(0x38d)];return _0x40a1ba=[],_0x40a1ba['fX']=0x0,_0x40a1ba['fY']=0x0,_0x51f570=[],_0x51f570['fX']=0x0,_0x40a1ba['fX']=_0x3be3a2-0.5,_0x40a1ba['fY']=_0x11f844-0.5,_0x51f570['fX']=-0.5*Math['sin'](this['pRenderParam'][this[_0x48c64e(0x270)]][_0x48c64e(0x314)]),_0x51f570['fY']=0.5*Math[_0x48c64e(0x34b)](this[_0x48c64e(0x45b)][this[_0x48c64e(0x270)]][_0x48c64e(0x314)]),_0x3be3a2=Math[_0x48c64e(0x41c)](_0x40a1ba['fX']*_0x40a1ba['fX']+_0x40a1ba['fY']*_0x40a1ba['fY']),_0x11f844=Math['sqrt'](_0x51f570['fX']*_0x51f570['fX']+_0x51f570['fY']*_0x51f570['fY']),_0x11f844=Math[_0x48c64e(0x432)]((_0x40a1ba['fX']*_0x51f570['fX']+_0x40a1ba['fY']*_0x51f570['fY'])/(_0x3be3a2*_0x11f844)),(0x0<_0x40a1ba['fX']*_0x51f570['fY']-_0x40a1ba['fY']*_0x51f570['fX']&&(_0x11f844=6.2831852-_0x11f844),_0x186799['fX']=_0x11f844/6.2861853,_0x186799['fY']=(0x2*(0.5-_0x3be3a2)-_0x15aba3)/(0.8-_0x15aba3),0x0<=_0x186799['fY']&&0x0<=_0x186799['fX']&&_0x186799['fY']<=0x1&&_0x186799['fX']<=0x1?(_0x70619e['fX']=_0x186799['fX'],_0x70619e['fY']=_0x186799['fY'],_0x13949e[_0x48c64e(0x4a6)]):_0x13949e[_0x48c64e(0x203)]);}},{'key':_0x22f0ab(0x510),'value':function(_0x1260ad,_0x6e91ea,_0x412b2f){var _0x3b1220=_0x22f0ab;if(null==this[_0x3b1220(0x45b)][this[_0x3b1220(0x270)]])return _0x13949e[_0x3b1220(0x2cf)];if(null==_0x1260ad)return _0x13949e[_0x3b1220(0x203)];var _0x346002=(this['fRX2']-this[_0x3b1220(0x1f8)])/(this['fRY2']-this['fRY1']),_0x47c81f=(this[_0x3b1220(0x3aa)]-this['fRX1'])/0x2*0x1,_0x4dcf12=0x0,_0x5ef05d=0x1,_0x48221e=0x0,_0x29a943=0x1,_0x6c8a76=0x0,_0x346002=((0x1<this[_0x3b1220(0x3aa)]||0x1<this[_0x3b1220(0x4ed)]||this[_0x3b1220(0x1f8)]<0x0||this[_0x3b1220(0x34c)]<0x0)&&(this[_0x3b1220(0x1f8)]<0x0&&(_0x6c8a76<(_0x1e9f9f=-this[_0x3b1220(0x1f8)])&&(_0x6c8a76=_0x1e9f9f),_0x4dcf12=_0x1e9f9f/=0x2*_0x47c81f),0x1<this[_0x3b1220(0x3aa)]&&(_0x6c8a76<(_0x1e9f9f=this[_0x3b1220(0x3aa)]-0x1)&&(_0x6c8a76=_0x1e9f9f),_0x5ef05d=0x1-(_0x1e9f9f/=0x2*_0x47c81f)),this['fRY1']<0x0&&(_0x6c8a76<(_0x1e9f9f=-this[_0x3b1220(0x34c)]*_0x346002)&&(_0x6c8a76=_0x1e9f9f),_0x48221e=_0x1e9f9f/=0x2*_0x47c81f),0x1<this[_0x3b1220(0x4ed)]&&(_0x6c8a76<(_0x1e9f9f=(this[_0x3b1220(0x4ed)]-0x1)*_0x346002)&&(_0x6c8a76=_0x1e9f9f),_0x29a943=0x1-(_0x1e9f9f/=0x2*_0x47c81f))),_0x6c8a76/_0x47c81f),_0x1e9f9f=[],_0x6c8a76=[];return _0x1e9f9f['fX']=0x1-_0x6e91ea,_0x1e9f9f['fY']=(0.8-_0x346002)*(0x1-_0x412b2f)+_0x346002,_0x47c81f=6.2831853*_0x1e9f9f['fX']+this['pRenderParam'][this['nWndPort']][_0x3b1220(0x314)],_0x6e91ea=0.5*(0x1-_0x1e9f9f['fY']),_0x6c8a76['fX']=0.5-_0x6e91ea*Math['sin'](_0x47c81f),_0x6c8a76['fY']=0.5+_0x6e91ea*Math[_0x3b1220(0x34b)](_0x47c81f),_0x6c8a76['fX']=(_0x6c8a76['fX']-_0x4dcf12)/(_0x5ef05d-_0x4dcf12),_0x6c8a76['fY']=(_0x6c8a76['fY']-_0x48221e)/(_0x29a943-_0x48221e),_0x1260ad['fX']=_0x6c8a76['fX'],_0x1260ad['fY']=_0x6c8a76['fY'],_0x13949e[_0x3b1220(0x4a6)];}},{'key':_0x22f0ab(0x548),'value':function(_0x42c74f,_0x3186d2,_0x308acc){var _0x3017de=_0x22f0ab;if(null==this[_0x3017de(0x45b)][this[_0x3017de(0x270)]])return _0x13949e[_0x3017de(0x2cf)];if(null==_0x42c74f)return _0x13949e['SR_ERR_PARAM'];var _0x15a2de=(this[_0x3017de(0x3aa)]-this[_0x3017de(0x1f8)])/(this['fRY2']-this[_0x3017de(0x34c)]),_0x5c8031=(this['fRX2']-this[_0x3017de(0x1f8)])/0x2*0x1,_0xbfd907=0x0,_0x23a02c=0x1,_0x405ea8=0.1,_0xf4bbd3=0.9,_0x15a2de=(this['fRX1']<0x0&&(_0x37ddc3=-this['fRX1'],_0xbfd907=_0x37ddc3/=0x2*_0x5c8031),0x1<this[_0x3017de(0x3aa)]&&(_0x37ddc3=this['fRX2']-0x1,_0x23a02c=0x1-(_0x37ddc3/=0x2*_0x5c8031)),this[_0x3017de(0x34c)]<0x0&&(_0x37ddc3=-this[_0x3017de(0x34c)]*_0x15a2de,_0x405ea8=0.1<(_0x37ddc3/=0x2*_0x5c8031)?_0x37ddc3:0.1),0x1<this[_0x3017de(0x4ed)]&&(_0x37ddc3=(this[_0x3017de(0x4ed)]-0x1)*_0x15a2de,_0xf4bbd3=0x1-0.9<(_0x37ddc3/=0x2*_0x5c8031)?0x1-_0x37ddc3:0.9),[]),_0x37ddc3=0x2*_0x3186d2*_0x5c8031,_0x23c0bb=0x2*_0x308acc*_0x5c8031,_0x1fe403=Math[_0x3017de(0x41c)](_0x5c8031*_0x5c8031-(_0x23c0bb-_0x5c8031)*(_0x23c0bb-_0x5c8031));return Math[_0x3017de(0x1e6)](_0x1fe403)<_0x3e9a49?_0x13949e['SR_ERR_PARAM']:(_0x308acc=_0x23c0bb,_0x15a2de['fX']=((_0x3186d2=_0x5c8031*(_0x37ddc3-_0x5c8031)/_0x1fe403+_0x5c8031)-0x2*_0xbfd907*_0x5c8031)/(0x2*(_0x23a02c-_0xbfd907)*_0x5c8031),_0x15a2de['fY']=(_0x308acc-0x2*_0x405ea8*_0x5c8031)/(0x2*(_0xf4bbd3-_0x405ea8)*_0x5c8031),0x0<=_0x15a2de['fY']&&0x0<=_0x15a2de['fX']&&_0x15a2de['fY']<=0x1&&_0x15a2de['fX']<=0x1?(_0x42c74f['fX']=_0x15a2de['fX'],_0x42c74f['fY']=_0x15a2de['fY'],_0x13949e[_0x3017de(0x4a6)]):_0x13949e[_0x3017de(0x203)]);}},{'key':'UpdatePTZPosition','value':function(_0x3b30a6,_0x7f0329,_0x2cae23){var _0x147548=_0x22f0ab;if(null==this['pRenderParam'][_0x3b30a6])return _0x13949e[_0x147548(0x2cf)];var _0x265c03=[],_0x53303d=(_0x265c03[_0x147548(0x1e2)]=0x0,_0x265c03[_0x147548(0x25f)]=0x0,_0x265c03[_0x147548(0x528)]=0x0,_0x265c03[_0x147548(0x299)]=0x0,_0x13949e[_0x147548(0x4a6)]);if(_0x3468da['SR_DE_FISH_PTZ_FLOOR']==this[_0x147548(0x45b)][_0x3b30a6]['nDisplayEffect']||_0x3468da[_0x147548(0x2b7)]==this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)]){if((_0x53303d=this[_0x147548(0x207)](_0x7f0329,_0x2cae23,_0x265c03,this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)]))!=_0x13949e[_0x147548(0x4a6)])return _0x53303d;}else{if(_0x3468da[_0x147548(0x4bf)]!=this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)])return _0x13949e['SR_ERR_NOT_SUPPORT'];if((_0x53303d=this[_0x147548(0x525)](_0x7f0329,_0x2cae23,_0x265c03))!=_0x13949e[_0x147548(0x4a6)])return _0x53303d;}return 0x0==this[_0x147548(0x2ac)](this[_0x147548(0x1f8)],this[_0x147548(0x3aa)],this[_0x147548(0x34c)],this[_0x147548(0x4ed)],_0x265c03,this[_0x147548(0x45b)][_0x3b30a6]['fZoom'],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x1fe)])?_0x13949e[_0x147548(0x203)]:(this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x265)]=_0x265c03[_0x147548(0x25f)],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x2ee)]=_0x265c03[_0x147548(0x1e2)],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x405)]=_0x265c03[_0x147548(0x299)],this[_0x147548(0x45b)][_0x3b30a6][_0x147548(0x3e0)]=_0x265c03[_0x147548(0x528)],_0x13949e['SR_OK']);}},{'key':'JudgeDisplayEffect','value':function(_0x10e182){var _0xae0cd8=_0x22f0ab,_0x4f9b01=0x0;switch(_0x4f9b01){case 0x0:return _0x4f9b01=this[_0xae0cd8(0x4f3)](_0x10e182),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0x13949e[_0xae0cd8(0x4a6)];case 0x3:return(_0x4f9b01=this[_0xae0cd8(0x4f3)](_0x10e182))==this[_0xae0cd8(0x344)]||0x4==this['nPlaceType']?_0x13949e[_0xae0cd8(0x4a6)]:_0x13949e[_0xae0cd8(0x38d)];case 0x2:case 0x1:return(_0x4f9b01=this['GetPlaceType'](_0x10e182))==this[_0xae0cd8(0x344)]||0x4==_0x4f9b01?_0x13949e['SR_OK']:_0x13949e[_0xae0cd8(0x38d)];default:return _0x13949e[_0xae0cd8(0x38d)];}return _0x13949e['SR_ERR_NOT_SUPPORT'];}},{'key':_0x22f0ab(0x4f3),'value':function(_0x1e0375){var _0x375394=_0x22f0ab;switch(_0x1e0375){case _0x3468da['SR_DE_FISH_PTZ_CEILING']:case _0x3468da[_0x375394(0x208)]:case _0x3468da[_0x375394(0x4f5)]:case _0x3468da['SR_DE_FISH_CYLINDER_CEILING']:case _0x3468da[_0x375394(0x3f3)]:return 0x3;case _0x3468da[_0x375394(0x4c2)]:case _0x3468da[_0x375394(0x2f5)]:case _0x3468da[_0x375394(0x2d3)]:case _0x3468da[_0x375394(0x3a9)]:case _0x3468da['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x3468da[_0x375394(0x4bf)]:case _0x3468da[_0x375394(0x33c)]:case _0x3468da['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x3468da[_0x375394(0x26f)]:return 0x1;case _0x3468da['SR_DE_FISH_SEMISPHERE']:case _0x3468da['SR_DE_FISH_ORIGINAL']:case _0x3468da['SR_DE_FISH_PLANET']:case _0x3468da[_0x375394(0x4c9)]:case _0x3468da[_0x375394(0x4dd)]:return 0x4;default:return 0x0;}return 0x0;}},{'key':_0x22f0ab(0x323),'value':function(_0x4e7581,_0x20c108){var _0x7b4ead=_0x22f0ab;if(_0x4e7581<0x0||0x20<=_0x4e7581)return _0x13949e['SR_ERR_PARAM'];if(null==_0x20c108)return _0x13949e[_0x7b4ead(0x203)];if(null==this[_0x7b4ead(0x45b)][_0x4e7581])return _0x13949e[_0x7b4ead(0x2cf)];var _0x516513=_0x13949e['SR_OK'];switch(_0x20c108[_0x7b4ead(0x260)]){case _0x3b5c80:if((_0x516513=this[_0x7b4ead(0x4e7)](_0x20c108[_0x7b4ead(0x27e)],_0x20c108[_0x7b4ead(0x469)],_0x20c108[_0x7b4ead(0x2bb)],_0x20c108['fRYBottom']))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this[_0x7b4ead(0x45b)][_0x4e7581]['bCut']=_0x20c108[_0x7b4ead(0x324)],this['bBlack']=_0x20c108[_0x7b4ead(0x40f)];break;case _0x1e8e38:if(_0x3468da[_0x7b4ead(0x208)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x4f5)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x2f5)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da['SR_DE_FISH_PANORAMA_FLOOR_180']!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)])return _0x13949e[_0x7b4ead(0x38d)];if((_0x516513=this[_0x7b4ead(0x2c0)](_0x4e7581,_0x20c108[_0x7b4ead(0x314)]))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this[_0x7b4ead(0x1ee)][_0x4e7581][_0x7b4ead(0x314)]=_0x20c108['fAngle'];break;case _0x2b1fa6:if(_0x3468da[_0x7b4ead(0x4bf)]!=this['pRenderParam'][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x2b7)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x4c2)]!=this['pRenderParam'][_0x4e7581]['nDisplayEffect'])return _0x13949e['SR_ERR_NOT_SUPPORT'];if((_0x516513=this[_0x7b4ead(0x28c)](_0x4e7581,_0x20c108[_0x7b4ead(0x3f4)]))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this['pFishParam'][_0x4e7581][_0x7b4ead(0x3f4)]=_0x20c108[_0x7b4ead(0x3f4)];break;case _0x1d678a:if(_0x3468da[_0x7b4ead(0x4bf)]!=this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x1fe)]&&_0x3468da[_0x7b4ead(0x2b7)]!=this[_0x7b4ead(0x45b)][_0x4e7581]['nDisplayEffect']&&_0x3468da[_0x7b4ead(0x4c2)]!=this['pRenderParam'][_0x4e7581][_0x7b4ead(0x1fe)])return _0x13949e[_0x7b4ead(0x38d)];if((_0x516513=this[_0x7b4ead(0x1ed)](_0x4e7581,_0x20c108[_0x7b4ead(0x3d6)],_0x20c108[_0x7b4ead(0x40c)],this[_0x7b4ead(0x45b)][_0x4e7581][_0x7b4ead(0x3f4)],!0x0))!=_0x13949e[_0x7b4ead(0x4a6)])return _0x516513;this[_0x7b4ead(0x1ee)][_0x4e7581][_0x7b4ead(0x3d6)]=_0x20c108[_0x7b4ead(0x3d6)],this[_0x7b4ead(0x1ee)][_0x4e7581][_0x7b4ead(0x40c)]=_0x20c108[_0x7b4ead(0x40c)];break;case _0x3c8826:return _0x13949e[_0x7b4ead(0x38d)];}return _0x516513=this['ComputePTZPoints']();}},{'key':_0x22f0ab(0x3e3),'value':function(_0x143d41,_0x429ae0){var _0x5f2252=_0x22f0ab;return _0x143d41<0x0||0x20<=_0x143d41||null==_0x429ae0||null==this[_0x5f2252(0x1ee)][_0x143d41]?_0x13949e[_0x5f2252(0x203)]:(_0x429ae0[_0x5f2252(0x27e)]=this['fRX1'],_0x429ae0[_0x5f2252(0x469)]=this[_0x5f2252(0x3aa)],_0x429ae0[_0x5f2252(0x2bb)]=this['fRY1'],_0x429ae0[_0x5f2252(0x2e9)]=this[_0x5f2252(0x4ed)],_0x429ae0[_0x5f2252(0x40f)]=this['bBlack'],_0x429ae0['bCut']=this[_0x5f2252(0x45b)][_0x143d41][_0x5f2252(0x324)],_0x429ae0[_0x5f2252(0x260)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x260)],_0x429ae0[_0x5f2252(0x314)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x314)],_0x429ae0[_0x5f2252(0x3f4)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x3f4)],_0x429ae0[_0x5f2252(0x3d6)]=this['pFishParam'][_0x143d41][_0x5f2252(0x3d6)],_0x429ae0[_0x5f2252(0x40c)]=this[_0x5f2252(0x1ee)][_0x143d41][_0x5f2252(0x40c)],_0x13949e[_0x5f2252(0x4a6)]);}},{'key':_0x22f0ab(0x503),'value':function(_0x538050,_0x20a220){var _0x140b11=_0x22f0ab;return _0x538050<0x0||0x20<=_0x538050||null==_0x20a220||null==this['pRenderParam'][_0x538050]?_0x13949e['SR_ERR_PARAM']:(_0x20a220[_0x140b11(0x27e)]=this[_0x140b11(0x1f8)],_0x20a220['fRXRight']=this[_0x140b11(0x3aa)],_0x20a220[_0x140b11(0x2bb)]=this[_0x140b11(0x34c)],_0x20a220[_0x140b11(0x2e9)]=this['fRY2'],_0x20a220[_0x140b11(0x40f)]=this[_0x140b11(0x40f)],_0x20a220['fCosH']=this[_0x140b11(0x45b)][_0x538050][_0x140b11(0x265)],_0x20a220[_0x140b11(0x2ee)]=this[_0x140b11(0x45b)][_0x538050][_0x140b11(0x2ee)],_0x20a220[_0x140b11(0x405)]=this['pRenderParam'][_0x538050][_0x140b11(0x405)],_0x20a220[_0x140b11(0x3e0)]=this['pRenderParam'][_0x538050][_0x140b11(0x3e0)],_0x20a220['fAngle']=this[_0x140b11(0x45b)][_0x538050]['fAngle'],_0x20a220[_0x140b11(0x3f4)]=this['pRenderParam'][_0x538050][_0x140b11(0x3f4)],_0x20a220[_0x140b11(0x1fe)]=this[_0x140b11(0x45b)][_0x538050][_0x140b11(0x1fe)],_0x20a220[_0x140b11(0x324)]=this[_0x140b11(0x45b)][_0x538050]['bCut'],_0x13949e[_0x140b11(0x4a6)]);}},{'key':_0x22f0ab(0x4e7),'value':function(_0xc43460,_0x43a0e9,_0xe4dbc8,_0x34708e){var _0x449b89=_0x22f0ab;if(_0xc43460<=-0.5||0.4<=_0xc43460||_0x43a0e9<=0.6||1.5<=_0x43a0e9||_0xe4dbc8<=-0.5||0.4<=_0xe4dbc8||_0x34708e<=0.6||1.5<=_0x34708e||_0xc43460+_0x43a0e9<=0.8||1.2<=_0xc43460+_0x43a0e9||_0xe4dbc8+_0x34708e<=0.8||1.2<=_0xe4dbc8+_0x34708e)return _0x13949e[_0x449b89(0x203)];if(_0xc43460<0x0||0x1<_0x43a0e9||_0xe4dbc8<0x0||0x1<_0x34708e){for(var _0x41e2a6=0x0;_0x41e2a6<0x20;++_0x41e2a6)if(_0x3468da[_0x449b89(0x2b7)]==this['pRenderParam'][_0x41e2a6][_0x449b89(0x1fe)]||_0x3468da[_0x449b89(0x4c2)]==this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x1fe)]||_0x3468da[_0x449b89(0x4bf)]==this[_0x449b89(0x45b)][_0x41e2a6]['nDisplayEffect']){var _0x423ca2=[];if(_0x423ca2[_0x449b89(0x25f)]=this[_0x449b89(0x45b)][_0x41e2a6]['fCosH'],_0x423ca2[_0x449b89(0x1e2)]=this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x2ee)],_0x423ca2[_0x449b89(0x299)]=this[_0x449b89(0x45b)][_0x41e2a6]['fCosV'],_0x423ca2[_0x449b89(0x528)]=this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x3e0)],0x0==this[_0x449b89(0x2ac)](_0xc43460,_0x43a0e9,_0xe4dbc8,_0x34708e,_0x423ca2,this[_0x449b89(0x45b)][_0x41e2a6]['fZoom'],this[_0x449b89(0x45b)][_0x41e2a6][_0x449b89(0x1fe)]))return _0x13949e[_0x449b89(0x203)];}}return this[_0x449b89(0x1f8)]=_0xc43460,this[_0x449b89(0x3aa)]=_0x43a0e9,this[_0x449b89(0x34c)]=_0xe4dbc8,this[_0x449b89(0x4ed)]=_0x34708e,_0x13949e[_0x449b89(0x4a6)];}},{'key':'UpdateWideScanAngle','value':function(_0x3a6b5f,_0x5536f3){var _0x4429f8=_0x22f0ab;return null==this['pRenderParam'][_0x3a6b5f]?_0x13949e[_0x4429f8(0x2cf)]:(_0x3468da[_0x4429f8(0x2f5)]==this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]||_0x3468da['SR_DE_FISH_PANORAMA_FLOOR_180']==this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]?this['pRenderParam'][_0x3a6b5f]['fAngle']=_0x5536f3:_0x3468da['SR_DE_FISH_PANORAMA_CEILING_360']!=this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]&&_0x3468da[_0x4429f8(0x4f5)]!=this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x1fe)]||(this[_0x4429f8(0x45b)][_0x3a6b5f][_0x4429f8(0x314)]=-_0x5536f3),_0x13949e[_0x4429f8(0x4a6)]);}},{'key':_0x22f0ab(0x207),'value':function(_0x2cdf66,_0x2a4fbb,_0x3bfb0f,_0x2f451a){var _0x432c17=_0x22f0ab,_0x52c448=Math['sqrt']((_0x2a4fbb-0.5)*(_0x2a4fbb-0.5)+(_0x2cdf66-0.5)*(_0x2cdf66-0.5));if(0.5<_0x52c448)return _0x13949e['SR_ERR_PARAM'];if(_0x52c448<0.001)return _0x3bfb0f[_0x432c17(0x299)]=0x1,_0x3bfb0f['fVAngleSin']=0x0,_0x3bfb0f[_0x432c17(0x25f)]=0x1,_0x3bfb0f['fHAngleSin']=0x0,_0x13949e[_0x432c17(0x4a6)];if(_0x2f451a==_0x3468da[_0x432c17(0x2b7)]){_0x3bfb0f[_0x432c17(0x25f)]=(0.5-_0x2a4fbb)/_0x52c448,_0x3bfb0f['fHAngleSin']=(0.5-_0x2cdf66)/_0x52c448;var _0x203ee9=_0x52c448*_0x48e6bf;_0x3bfb0f['fVAngleCos']=Math[_0x432c17(0x34b)](_0x203ee9),_0x3bfb0f['fVAngleSin']=Math[_0x432c17(0x202)](_0x203ee9);}else{if(_0x2f451a!=_0x3468da[_0x432c17(0x4c2)])return _0x13949e['SR_ERR_PARAM'];_0x3bfb0f[_0x432c17(0x25f)]=(_0x2a4fbb-0.5)/_0x52c448,_0x3bfb0f[_0x432c17(0x1e2)]=(0.5-_0x2cdf66)/_0x52c448,_0x203ee9=_0x52c448*_0x48e6bf,(_0x3bfb0f[_0x432c17(0x299)]=Math[_0x432c17(0x34b)](_0x203ee9),_0x3bfb0f[_0x432c17(0x528)]=Math['sin'](_0x203ee9));}return _0x13949e[_0x432c17(0x4a6)];}},{'key':_0x22f0ab(0x525),'value':function(_0x298627,_0x1d1ea5,_0x3085db){var _0x3e6163=_0x22f0ab,_0x4c5cd2,_0x4ec552;return 0.25<(_0x1d1ea5-0.5)*(_0x1d1ea5-0.5)+(_0x298627-0.5)*(_0x298627-0.5)?_0x13949e[_0x3e6163(0x203)]:(_0x1d1ea5=(_0x1d1ea5-0.5)/0.5*_0x48e6bf/0x2,_0x4c5cd2=Math[_0x3e6163(0x34b)](_0x1d1ea5),_0x1d1ea5=Math[_0x3e6163(0x202)](_0x1d1ea5),0x1<(_0x298627-0.5)/0.5/_0x4c5cd2||(_0x298627-0.5)/0.5/_0x4c5cd2<-0x1?SR_ERR_PARAM:(_0x298627=(_0x298627-0.5)/0.5/_0x4c5cd2*_0x48e6bf/0x2,_0x4ec552=Math[_0x3e6163(0x34b)](_0x298627),_0x298627=Math['sin'](_0x298627),_0x3085db[_0x3e6163(0x299)]=_0x4c5cd2,_0x3085db[_0x3e6163(0x528)]=_0x1d1ea5,_0x3085db[_0x3e6163(0x25f)]=_0x4ec552,_0x3085db['fHAngleSin']=_0x298627,_0x13949e[_0x3e6163(0x4a6)]));}},{'key':_0x22f0ab(0x2ac),'value':function(_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf,_0x3a99ba,_0x1c89f7){var _0x34b12a=_0x22f0ab;return 0x1!=this['IsOutofImage'](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf['fHAngleCos'],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf['fVAngleCos'],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0x1,0.5,_0x1c89f7)&&(0x1!=this['IsOutofImage'](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x0,0.5,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf['fVAngleCos'],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0.5,0x1,_0x1c89f7)&&(0x1!=this['IsOutofImage'](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0.5,0x0,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x0,0x0,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf['fHAngleCos'],_0x5c6caf['fHAngleSin'],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x0,0x1,_0x1c89f7)&&(0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf[_0x34b12a(0x528)],_0x3a99ba,0x1,0x1,_0x1c89f7)&&0x1!=this[_0x34b12a(0x3f2)](_0x24afa7,_0x44f8b6,_0x33e2fb,_0x34afb0,_0x5c6caf[_0x34b12a(0x25f)],_0x5c6caf[_0x34b12a(0x1e2)],_0x5c6caf[_0x34b12a(0x299)],_0x5c6caf['fVAngleSin'],_0x3a99ba,0x1,0x0,_0x1c89f7)))))));}},{'key':_0x22f0ab(0x3f2),'value':function(_0x4cc7ca,_0x5c0d8d,_0x43c536,_0x2dfe4c,_0x4a902e,_0x364b79,_0x8c51ef,_0x122369,_0x336385,_0x35ea07,_0x5bed77,_0x59b13c){var _0x14a46d=_0x22f0ab,_0x1719e2,_0x5bb98f,_0x18125f,_0x4fcc36=(_0x5c0d8d-_0x4cc7ca)/(_0x2dfe4c-_0x43c536),_0x2645d3=(_0x4cc7ca+_0x5c0d8d)/0x2*0x1,_0x43c536=(_0x43c536+_0x2dfe4c)/0x2*_0x4fcc36,_0x2dfe4c=(_0x5c0d8d-_0x4cc7ca)/0x2*0x1;if(_0x59b13c==SR_DE_FISH_PTZ_CEILING){if(_0x27bb8a=_0x35ea07-0.5,_0x2cbbf2=(_0x1719e2=0.5-_0x5bed77)*_0x8c51ef+(_0x5bb98f=_0x336385)*_0x122369,(_0x18125f=_0x5bb98f*_0x8c51ef-_0x1719e2*_0x122369)<=0x0)return!0x0;var _0x27bb8a,_0x2cbbf2,_0x25edb6,_0x557a3c=Math[_0x14a46d(0x41c)](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2),_0x5c0d8d=Math['sqrt'](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2+_0x18125f*_0x18125f),_0x4cc7ca=Math[_0x14a46d(0x2c8)](_0x557a3c/_0x5c0d8d)/1.5707963*0.5,_0x3b5866=(-((_0x27bb8a=_0x4cc7ca*_0x27bb8a/_0x557a3c)*_0x364b79+(_0x2cbbf2=_0x4cc7ca*_0x2cbbf2/_0x557a3c)*_0x4a902e)*_0x2dfe4c*0x2+_0x43c536)/_0x4fcc36;if((_0x25edb6=(_0x27bb8a*_0x4a902e-_0x2cbbf2*_0x364b79)*_0x2dfe4c*0x2+_0x2645d3)<0x0||0x1<_0x25edb6||_0x3b5866<0x0||0x1<_0x3b5866)return!0x0;}if(_0x59b13c==SR_DE_FISH_PTZ_FLOOR){if(_0x27bb8a=_0x35ea07-0.5,_0x2cbbf2=(_0x1719e2=_0x5bed77-0.5)*_0x8c51ef+(_0x5bb98f=_0x336385)*_0x122369,(_0x18125f=_0x5bb98f*_0x8c51ef-_0x1719e2*_0x122369)<=0x0)return!0x0;_0x557a3c=Math[_0x14a46d(0x41c)](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2),(_0x5c0d8d=Math['sqrt'](_0x27bb8a*_0x27bb8a+_0x2cbbf2*_0x2cbbf2+_0x18125f*_0x18125f),_0x4cc7ca=Math['asin'](_0x557a3c/_0x5c0d8d)/1.5707963*0.5);if(_0x3b5866=(((_0x27bb8a=_0x4cc7ca*_0x27bb8a/_0x557a3c)*_0x364b79+(_0x2cbbf2=_0x4cc7ca*_0x2cbbf2/_0x557a3c)*_0x4a902e)*_0x2dfe4c*0x2+_0x43c536)/_0x4fcc36,(_0x25edb6=(_0x27bb8a*_0x4a902e-_0x2cbbf2*_0x364b79)*_0x2dfe4c*0x2+_0x2645d3)<0x0||0x1<_0x25edb6||_0x3b5866<0x0||0x1<_0x3b5866)return!0x0;}if(_0x59b13c==SR_DE_FISH_PTZ_WALL){if(_0x25edb6=(_0x27bb8a=_0x35ea07-0.5)*_0x4a902e+(_0x18125f=(_0x5bb98f=_0x336385)*_0x8c51ef-(_0x1719e2=_0x5bed77-0.5)*_0x122369)*_0x364b79,_0x3b5866=_0x2cbbf2=_0x1719e2*_0x8c51ef+_0x5bb98f*_0x122369,(_0x5c0d8d=_0x18125f*_0x4a902e-_0x27bb8a*_0x364b79)<=0x0)return!0x0;_0x557a3c=Math[_0x14a46d(0x41c)](_0x25edb6*_0x25edb6+_0x3b5866*_0x3b5866),(_0x4cc7ca=Math[_0x14a46d(0x41c)](_0x25edb6*_0x25edb6+_0x3b5866*_0x3b5866+_0x5c0d8d*_0x5c0d8d),_0x59b13c=Math['asin'](_0x557a3c/_0x4cc7ca)/1.5707963*0.5);if(_0x3b5866=(_0x59b13c*_0x3b5866/_0x557a3c*_0x2dfe4c*0x2+_0x43c536)/_0x4fcc36,(_0x25edb6=_0x59b13c*_0x25edb6/_0x557a3c*_0x2dfe4c*0x2+_0x2645d3)<0x0||0x1<_0x25edb6||_0x3b5866<0x0||0x1<_0x3b5866)return!0x0;}return!0x1;}},{'key':_0x22f0ab(0x4d7),'value':function(){var _0x18aa5a=_0x22f0ab;if(-0x1==this['nWndPort'])return _0x13949e[_0x18aa5a(0x2cf)];for(var _0x255d41,_0x18cee9=0x0;_0x18cee9<0x20;++_0x18cee9)null==this['pRenderParam'][_0x18cee9]||_0x3468da['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x18cee9][_0x18aa5a(0x1fe)]&&_0x3468da[_0x18aa5a(0x4c2)]!=this['pRenderParam'][_0x18cee9]['nDisplayEffect']&&_0x3468da['SR_DE_FISH_PTZ_WALL']!=this[_0x18aa5a(0x45b)][_0x18cee9][_0x18aa5a(0x1fe)]||(_0x255d41=_0x13949e[_0x18aa5a(0x4a6)],this[_0x18aa5a(0x334)]==_0x46c232?(_0x255d41=this['GetRangePoints'](_0x18cee9),_0x13949e[_0x18aa5a(0x4a6)]==_0x255d41&&(_0x255d41=this[_0x18aa5a(0x38f)](_0x18cee9))):this[_0x18aa5a(0x334)]==_0xba837&&(_0x255d41=this['GetRectPoints'](_0x18cee9)));return _0x13949e[_0x18aa5a(0x4a6)];}},{'key':_0x22f0ab(0x289),'value':function(){var _0x50c128=_0x22f0ab;return this[_0x50c128(0x270)];}},{'key':_0x22f0ab(0x40b),'value':function(){var _0x8fd81f=_0x22f0ab;return this[_0x8fd81f(0x334)];}},{'key':'GetPTZColor','value':function(_0x547ab5,_0x4b15de){var _0x3cb11b=_0x22f0ab;return _0x547ab5<0x0||0x20<=_0x547ab5||null==_0x4b15de?_0x13949e[_0x3cb11b(0x203)]:(_0x4b15de['fA']=this[_0x3cb11b(0x320)][_0x547ab5]['fA'],_0x4b15de['fR']=this['stPTZColor'][_0x547ab5]['fR'],_0x4b15de['fG']=this[_0x3cb11b(0x320)][_0x547ab5]['fG'],_0x4b15de['fB']=this[_0x3cb11b(0x320)][_0x547ab5]['fB'],null!=this['pPTZSetColor']&&(Math[_0x3cb11b(0x1e6)](this[_0x3cb11b(0x3eb)][_0x547ab5]['fA'])<_0x3e9a49||Math[_0x3cb11b(0x1e6)](this[_0x3cb11b(0x3eb)][_0x547ab5]['fR'])<_0x3e9a49||Math['abs'](this[_0x3cb11b(0x3eb)][_0x547ab5]['fG'])<_0x3e9a49||Math[_0x3cb11b(0x1e6)](this[_0x3cb11b(0x3eb)][_0x547ab5]['fB'])<_0x3e9a49)&&(_0x4b15de['fA']=this[_0x3cb11b(0x3eb)][_0x547ab5]['fA'],_0x4b15de['fR']=this[_0x3cb11b(0x3eb)][_0x547ab5]['fR'],_0x4b15de['fG']=this[_0x3cb11b(0x3eb)][_0x547ab5]['fG'],_0x4b15de['fB']=this['pPTZSetColor'][_0x547ab5]['fB']),_0x13949e[_0x3cb11b(0x4a6)]);}},{'key':_0x22f0ab(0x52c),'value':function(_0x44c32e,_0x3b828d){var _0x16bb48=_0x22f0ab;if(_0x44c32e<0x0||0x20<=_0x44c32e)return _0x13949e[_0x16bb48(0x203)];if(null==_0x3b828d)return _0x13949e[_0x16bb48(0x203)];if(null==this[_0x16bb48(0x3eb)]){this[_0x16bb48(0x3eb)]=[];for(var _0x458351=0x0;_0x458351<0x20;++_0x458351)this['pPTZSetColor'][_0x458351]=[],this['pPTZSetColor'][_0x458351]['fR']=0x0,this['pPTZSetColor'][_0x458351]['fG']=0x0,this['pPTZSetColor'][_0x458351]['fB']=0x0,this[_0x16bb48(0x3eb)][_0x458351]['fA']=0x1;}return this[_0x16bb48(0x3eb)][_0x44c32e]['fR']=_0x3b828d['fR'],this[_0x16bb48(0x3eb)][_0x44c32e]['fG']=_0x3b828d['fG'],this[_0x16bb48(0x3eb)][_0x44c32e]['fB']=_0x3b828d['fB'],this[_0x16bb48(0x3eb)][_0x44c32e]['fA']=_0x3b828d['fA'],_0x13949e[_0x16bb48(0x4a6)];}},{'key':_0x22f0ab(0x303),'value':function(_0x206b44){return!(_0x206b44<0x0||0x20<=_0x206b44)&&this['bPTZSelected'][_0x206b44];}},{'key':_0x22f0ab(0x533),'value':function(_0x1ec40c,_0x501f73){var _0x26790e=_0x22f0ab;if(-0x1==this['nWndPort'])return-0x1;if(null==this[_0x26790e(0x45b)][this[_0x26790e(0x270)]])return-0x1;var _0x4c2285=0x20,_0x136752=[];_0x136752['fX']=_0x1ec40c,_0x136752['fY']=_0x501f73;for(var _0xd802d9=0x0;_0xd802d9<0x20;++_0xd802d9)this['bPTZSelected'][_0xd802d9]=!0x1;if(this[_0x26790e(0x334)]==_0x46c232){switch(this['pRenderParam'][this[_0x26790e(0x270)]][_0x26790e(0x1fe)]){case _0x3468da[_0x26790e(0x2f5)]:this[_0x26790e(0x510)](_0x136752,_0x1ec40c,_0x501f73);break;case _0x3468da[_0x26790e(0x208)]:this[_0x26790e(0x1d9)](_0x136752,_0x1ec40c,_0x501f73);break;case _0x3468da[_0x26790e(0x33c)]:this['GetPointPano2FishWall'](_0x136752,_0x1ec40c,_0x501f73);}for(var _0x386aa3=0x0;_0x386aa3<0x20;++_0x386aa3)if(0x0!=this['nOriPTZPointNum'][_0x386aa3]){var _0x31a50a=[],_0x46f960=(_0x31a50a['fX']=this['pOriPTZPoints'][_0x386aa3][0x0]['fX'],_0x31a50a['fY']=this[_0x26790e(0x22d)][_0x386aa3][0x0]['fY'],[]);_0x46f960['fX']=this['pOriPTZPoints'][_0x386aa3][0x0]['fX'],_0x46f960['fY']=this['pOriPTZPoints'][_0x386aa3][0x0]['fY'];for(var _0x494da2=0x1;_0x494da2<this[_0x26790e(0x21c)][_0x386aa3];++_0x494da2)this[_0x26790e(0x285)](_0x31a50a,_0x46f960,this[_0x26790e(0x22d)][_0x386aa3][_0x494da2]);if(_0x136752['fX']<=_0x31a50a['fX']&&_0x136752['fX']>=_0x46f960['fX']&&_0x136752['fY']>=_0x46f960['fY']&&_0x136752['fY']<=_0x31a50a['fY']){_0x4c2285=_0x386aa3;break;}}}else{if(this[_0x26790e(0x334)]!=_0xba837)return-0x1;for(var _0xa00358=0x0;_0xa00358<0x20;++_0xa00358)if(_0x136752['fX']<=this[_0x26790e(0x47b)][_0xa00358][0x2]['fX']&&_0x136752['fX']>=this['pRectPoints'][_0xa00358][0x0]['fX']&&_0x136752['fY']>=this[_0x26790e(0x47b)][_0xa00358][0x0]['fY']&&_0x136752['fY']<=this[_0x26790e(0x47b)][_0xa00358][0x2]['fY']){_0x4c2285=_0xa00358;break;}}return _0x4c2285<0x20?(this[_0x26790e(0x447)][_0x4c2285]=!0x0,_0x4c2285):-0x1;}},{'key':_0x22f0ab(0x3ca),'value':function(_0x8c11fc){var _0x554a23=_0x22f0ab;if(_0x8c11fc<0x0||0x20<=_0x8c11fc)return _0x13949e[_0x554a23(0x203)];for(var _0x548255=0x0;_0x548255<0x20;++_0x548255)this[_0x554a23(0x447)][_0x548255]=!0x1;if(this['nPTZDisplayMode']==_0x46c232){if(0x0==this[_0x554a23(0x21c)][_0x8c11fc])return _0x13949e[_0x554a23(0x203)];this[_0x554a23(0x447)][_0x8c11fc]=!0x0;}else{if(0x0==this[_0x554a23(0x4bc)][_0x8c11fc])return _0x13949e['SR_ERR_PARAM'];this[_0x554a23(0x447)][_0x8c11fc]=!0x0;}return _0x13949e[_0x554a23(0x4a6)];}},{'key':'GetPTZRectange','value':function(_0x56216f,_0x56d46d,_0x1de57b){var _0x20ac8f=_0x22f0ab;return _0x1de57b['fX']<_0x56d46d['fX']&&(_0x56d46d['fX']=_0x1de57b['fX']),_0x1de57b['fY']<_0x56d46d['fY']&&(_0x56d46d['fY']=_0x1de57b['fY']),_0x1de57b['fX']>_0x56216f['fX']&&(_0x56216f['fX']=_0x1de57b['fX']),_0x1de57b['fY']>_0x56216f['fY']&&(_0x56216f['fY']=_0x1de57b['fY']),_0x13949e[_0x20ac8f(0x4a6)];}},{'key':'GetPTZPoints','value':function(_0x42a0d4,_0x346ed6,_0x3f96c9){var _0x4ecd0d=_0x22f0ab;return _0x42a0d4<0x0||0x20<=_0x42a0d4?_0x13949e[_0x4ecd0d(0x203)]:null==this[_0x4ecd0d(0x45b)][this['nWndPort']]?_0x13949e[_0x4ecd0d(0x2cf)]:(_0x46c232==_0x3f96c9?null!=this['pOriPTZPoints'][_0x42a0d4]&&0x0!=this[_0x4ecd0d(0x21c)][_0x42a0d4]&&(_0x346ed6['pstPoints']=this[_0x4ecd0d(0x22d)][_0x42a0d4],_0x346ed6[_0x4ecd0d(0x216)]=this[_0x4ecd0d(0x21c)][_0x42a0d4]):_0xba837==_0x3f96c9&&null!=this['pRectPoints'][_0x42a0d4]&&(_0x346ed6[_0x4ecd0d(0x2f3)]=this[_0x4ecd0d(0x47b)][_0x42a0d4],_0x346ed6[_0x4ecd0d(0x216)]=0x4),_0x13949e[_0x4ecd0d(0x4a6)]);}},{'key':_0x22f0ab(0x524),'value':function(_0x105384){var _0x200023=_0x22f0ab;return this[_0x200023(0x334)]=_0x105384,this[_0x200023(0x4d7)]();}},{'key':_0x22f0ab(0x4ad),'value':function(_0x1e2546){var _0x36542a=_0x22f0ab;return _0x1e2546<0x0||0x20<=_0x1e2546?_0x13949e[_0x36542a(0x203)]:null==this[_0x36542a(0x45b)]?_0x13949e[_0x36542a(0x2cf)]:this['pRenderParam'][_0x1e2546]['nDisplayEffect'];}},{'key':_0x22f0ab(0x3b6),'value':function(_0x5d4b04,_0x4918e4,_0x18c305){var _0x586ca4=_0x22f0ab;if(_0x5d4b04<0x0||0x20<=_0x5d4b04)return _0x13949e[_0x586ca4(0x203)];if(null==this[_0x586ca4(0x3ab)][_0x5d4b04]||0x0==this[_0x586ca4(0x538)][_0x5d4b04])return _0x13949e[_0x586ca4(0x203)];var _0x215c72=this['nPTZFragmentNode'][_0x5d4b04][_0x18c305];if(_0x4918e4['nPointNum']=this[_0x586ca4(0x3ae)][_0x5d4b04][_0x18c305+0x1]-this[_0x586ca4(0x3ae)][_0x5d4b04][_0x18c305],_0x4918e4['nPointNum']<0x0)return _0x13949e[_0x586ca4(0x2cf)];_0x4918e4[_0x586ca4(0x2f3)]=[];for(var _0x1b99ff=0x0;_0x1b99ff<_0x4918e4['nPointNum'];++_0x1b99ff){var _0x24a3cd=[];_0x24a3cd['fX']=this[_0x586ca4(0x3ab)][_0x5d4b04][_0x215c72+_0x1b99ff]['fX'],_0x24a3cd['fY']=this['pPanoPTZPoints'][_0x5d4b04][_0x215c72+_0x1b99ff]['fY'],_0x4918e4['pstPoints'][_0x586ca4(0x51d)](_0x24a3cd);}return _0x13949e['SR_OK'];}},{'key':'GetPTZFragmentNum','value':function(_0x576f06){var _0x29db8c=_0x22f0ab;return _0x576f06<0x0||0x20<=_0x576f06?_0x13949e[_0x29db8c(0x203)]:0x0==this[_0x29db8c(0x371)][_0x576f06]?_0x13949e[_0x29db8c(0x2cf)]:this[_0x29db8c(0x371)][_0x576f06];}},{'key':'CalcPTZFragmentPoints','value':function(_0x51dc93){var _0x43d5bf=_0x22f0ab;if(_0x51dc93<0x0||0x20<=_0x51dc93)return _0x13949e[_0x43d5bf(0x203)];if(null==this['pPanoPTZPoints'][_0x51dc93]||0x0==this[_0x43d5bf(0x538)][_0x51dc93])return _0x13949e[_0x43d5bf(0x2cf)];this['nPTZFragmentNode'][_0x51dc93][0x0]=0x0,this[_0x43d5bf(0x371)][_0x51dc93]=0x1;for(var _0x566de4=0x0,_0x3f224a=0x0;_0x3f224a<this[_0x43d5bf(0x538)][_0x51dc93]-0x1;_0x3f224a++)0.5<Math[_0x43d5bf(0x1e6)](this[_0x43d5bf(0x3ab)][_0x51dc93][_0x3f224a+0x1]['fX']-this[_0x43d5bf(0x3ab)][_0x51dc93][_0x3f224a]['fX'])&&(_0x566de4=this['nPTZFragmentNum'][_0x51dc93],this['nPTZFragmentNode'][_0x51dc93][_0x566de4]=_0x3f224a+0x1,this['nPTZFragmentNum'][_0x51dc93]=this[_0x43d5bf(0x371)][_0x51dc93]+0x1);var _0x401f53=this[_0x43d5bf(0x538)][_0x51dc93];return Math['abs'](this[_0x43d5bf(0x3ab)][_0x51dc93][0x0]['fX']-this[_0x43d5bf(0x3ab)][_0x51dc93][_0x401f53-0x1]['fX'])<0.5&&(this[_0x43d5bf(0x3ab)][_0x51dc93][_0x401f53]['fX']=this['pPanoPTZPoints'][_0x51dc93][0x0]['fX'],this['pPanoPTZPoints'][_0x51dc93][_0x401f53]['fY']=this[_0x43d5bf(0x3ab)][_0x51dc93][0x0]['fY'],this[_0x43d5bf(0x538)][_0x51dc93]=this['nPanoPTZPointNum'][_0x51dc93]+0x1),_0x566de4=this[_0x43d5bf(0x371)][_0x51dc93],this[_0x43d5bf(0x3ae)][_0x51dc93][_0x566de4]=this[_0x43d5bf(0x538)][_0x51dc93],_0x13949e[_0x43d5bf(0x4a6)];}},{'key':_0x22f0ab(0x1dd),'value':function(_0x1bf892){var _0x14fccb=_0x22f0ab;return this[_0x14fccb(0x3ee)][_0x1bf892];}},{'key':_0x22f0ab(0x523),'value':function(_0x175f2a,_0x5d6bc9,_0x2ea935){var _0x4ec4f4=_0x22f0ab;if(null==this['pRenderParam'][this['nWndPort']])return _0x13949e[_0x4ec4f4(0x2cf)];if(null==_0x175f2a)return _0x13949e['SR_ERR_PARAM'];var _0x9d481c=(this['fRX2']-this[_0x4ec4f4(0x1f8)])/(this[_0x4ec4f4(0x4ed)]-this[_0x4ec4f4(0x34c)]),_0x490014=(this['fRX2']-this[_0x4ec4f4(0x1f8)])/0x2*0x1,_0x416e60=0x0,_0x9d481c=((0x1<this[_0x4ec4f4(0x3aa)]||0x1<this[_0x4ec4f4(0x4ed)]||this[_0x4ec4f4(0x1f8)]<0x0||this[_0x4ec4f4(0x34c)]<0x0)&&(this['fRX1']<0x0&&_0x416e60<(_0x877d52=-this[_0x4ec4f4(0x1f8)])&&(_0x416e60=_0x877d52),0x1<this['fRX2']&&_0x416e60<(_0x877d52=this[_0x4ec4f4(0x3aa)]-0x1)&&(_0x416e60=_0x877d52),this[_0x4ec4f4(0x34c)]<0x0&&_0x416e60<(_0x877d52=-this['fRY1']*_0x9d481c)&&(_0x416e60=_0x877d52),0x1<this[_0x4ec4f4(0x4ed)]&&_0x416e60<(_0x877d52=(this[_0x4ec4f4(0x4ed)]-0x1)*_0x9d481c)&&(_0x416e60=_0x877d52)),_0x416e60/_0x490014),_0x877d52=[];if(_0x877d52['fX']=0x0,_0x877d52['fY']=0x0,Math[_0x4ec4f4(0x1e6)](_0x5d6bc9-0.5)<_0x3e9a49&&Math[_0x4ec4f4(0x1e6)](_0x2ea935-0.5)<_0x3e9a49)return _0x13949e['SR_ERR_NOT_SUPPORT'];return _0x416e60=[],_0x490014=[],_0x416e60['fX']=_0x5d6bc9-0.5,_0x416e60['fY']=_0x2ea935-0.5,_0x490014['fX']=-0.5*Math[_0x4ec4f4(0x202)](this[_0x4ec4f4(0x45b)][this[_0x4ec4f4(0x270)]][_0x4ec4f4(0x314)]),_0x490014['fY']=0.5*Math[_0x4ec4f4(0x34b)](this[_0x4ec4f4(0x45b)][this[_0x4ec4f4(0x270)]][_0x4ec4f4(0x314)]),_0x5d6bc9=Math[_0x4ec4f4(0x41c)](_0x416e60['fX']*_0x416e60['fX']+_0x416e60['fY']*_0x416e60['fY']),_0x2ea935=Math[_0x4ec4f4(0x41c)](_0x490014['fX']*_0x490014['fX']+_0x490014['fY']*_0x490014['fY']),_0x2ea935=Math['acos']((_0x416e60['fX']*_0x490014['fX']+_0x416e60['fY']*_0x490014['fY'])/(_0x5d6bc9*_0x2ea935)),(0x0<_0x416e60['fX']*_0x490014['fY']-_0x416e60['fY']*_0x490014['fX']&&(_0x2ea935=6.2831852-_0x2ea935),_0x877d52['fX']=_0x2ea935/6.2831853,_0x877d52['fY']=(0x2*(0.5-_0x5d6bc9)-_0x9d481c)/(0.8-_0x9d481c),0x0<=_0x877d52['fY']&&0x0<=_0x877d52['fX']&&_0x877d52['fY']<=0x1&&_0x877d52['fX']<=0x1?(_0x175f2a['fX']=_0x877d52['fX'],_0x175f2a['fY']=_0x877d52['fY'],_0x13949e['SR_OK']):_0x13949e['SR_ERR_PARAM']);}},{'key':'GetPointFish2PanoFloor','value':function(_0x47c7ab,_0x7bc0a8,_0x2b85f4){var _0x227715=_0x22f0ab;if(null==this['pRenderParam'][this['nWndPort']])return _0x13949e[_0x227715(0x2cf)];if(null==_0x47c7ab)return _0x13949e[_0x227715(0x203)];var _0x451cd7=(this[_0x227715(0x3aa)]-this[_0x227715(0x1f8)])/(this['fRY2']-this[_0x227715(0x34c)]),_0x1b56bb=(this['fRX2']-this[_0x227715(0x1f8)])/0x2*0x1,_0x575d8b=0x0,_0x451cd7=((0x1<this[_0x227715(0x3aa)]||0x1<this[_0x227715(0x4ed)]||this[_0x227715(0x1f8)]<0x0||this[_0x227715(0x34c)]<0x0)&&(this[_0x227715(0x1f8)]<0x0&&_0x575d8b<(_0x1256ad=-this[_0x227715(0x1f8)])&&(_0x575d8b=_0x1256ad),0x1<this[_0x227715(0x3aa)]&&_0x575d8b<(_0x1256ad=this[_0x227715(0x3aa)]-0x1)&&(_0x575d8b=_0x1256ad),this[_0x227715(0x34c)]<0x0&&_0x575d8b<(_0x1256ad=-this[_0x227715(0x34c)]*_0x451cd7)&&(_0x575d8b=_0x1256ad),0x1<this['fRY2']&&_0x575d8b<(_0x1256ad=(this[_0x227715(0x4ed)]-0x1)*_0x451cd7)&&(_0x575d8b=_0x1256ad)),_0x575d8b/_0x1b56bb),_0x1256ad=[];if(_0x1256ad['fX']=0x0,_0x1256ad['fY']=0x0,Math[_0x227715(0x1e6)](_0x7bc0a8-0.5)<_0x3e9a49&&Math[_0x227715(0x1e6)](_0x2b85f4-0.5)<_0x3e9a49)return _0x13949e[_0x227715(0x38d)];return _0x575d8b=[],_0x1b56bb=[],_0x575d8b['fX']=_0x7bc0a8-0.5,_0x575d8b['fY']=_0x2b85f4-0.5,_0x1b56bb['fX']=-0.5*Math['sin'](this['pRenderParam'][this[_0x227715(0x270)]]['fAngle']),_0x1b56bb['fY']=0.5*Math[_0x227715(0x34b)](this['pRenderParam'][this[_0x227715(0x270)]][_0x227715(0x314)]),_0x7bc0a8=Math['sqrt'](_0x575d8b['fX']*_0x575d8b['fX']+_0x575d8b['fY']*_0x575d8b['fY']),_0x2b85f4=Math[_0x227715(0x41c)](_0x1b56bb['fX']*_0x1b56bb['fX']+_0x1b56bb['fY']*_0x1b56bb['fY']),_0x2b85f4=Math[_0x227715(0x432)]((_0x575d8b['fX']*_0x1b56bb['fX']+_0x575d8b['fY']*_0x1b56bb['fY'])/(_0x7bc0a8*_0x2b85f4)),(0x0<_0x575d8b['fX']*_0x1b56bb['fY']-_0x575d8b['fY']*_0x1b56bb['fX']&&(_0x2b85f4=6.2831852-_0x2b85f4),_0x1256ad['fX']=0x1-_0x2b85f4/6.2831853,_0x1256ad['fY']=0x1-(0x2*(0.5-_0x7bc0a8)-_0x451cd7)/(0.8-_0x451cd7),0x0<=_0x1256ad['fY']&&0x0<=_0x1256ad['fX']&&_0x1256ad['fY']<=0x1&&_0x1256ad['fX']<=0x1?(_0x47c7ab['fX']=_0x1256ad['fX'],_0x47c7ab['fY']=_0x1256ad['fY'],_0x13949e[_0x227715(0x4a6)]):_0x13949e[_0x227715(0x203)]);}},{'key':'GetPointFish2PanoWall','value':function(_0x5663f8,_0x1b4776,_0x255510){var _0x2fe0d9=_0x22f0ab;if(null==this['pRenderParam'][this[_0x2fe0d9(0x270)]])return _0x13949e[_0x2fe0d9(0x2cf)];if(null==_0x5663f8)return _0x13949e['SR_ERR_PARAM'];var _0x57e68a=(this['fRX2']-this[_0x2fe0d9(0x1f8)])/(this[_0x2fe0d9(0x4ed)]-this['fRY1']),_0xc2dd78=(this[_0x2fe0d9(0x3aa)]-this[_0x2fe0d9(0x1f8)])/0x2*0x1,_0x51bc6b=0x0,_0x85b815=0x1,_0x2945ea=0.1,_0x4f88ba=0.9,_0x57e68a=(this[_0x2fe0d9(0x1f8)]<0x0&&(_0x1fe26d=-this[_0x2fe0d9(0x1f8)],_0x51bc6b=_0x1fe26d/=0x2*_0xc2dd78),0x1<this[_0x2fe0d9(0x3aa)]&&(_0x1fe26d=this['fRX2']-0x1,_0x85b815=0x1-(_0x1fe26d/=0x2*_0xc2dd78)),this[_0x2fe0d9(0x34c)]<0x0&&(_0x1fe26d=-this[_0x2fe0d9(0x34c)]*_0x57e68a,_0x2945ea=0.1<(_0x1fe26d/=0x2*_0xc2dd78)?_0x1fe26d:0.1),0x1<this[_0x2fe0d9(0x4ed)]&&(_0x1fe26d=(this[_0x2fe0d9(0x4ed)]-0x1)*_0x57e68a,_0x4f88ba=0x1-0.9<(_0x1fe26d/=0x2*_0xc2dd78)?0x1-_0x1fe26d:0.9),[]),_0x1fe26d=(_0x57e68a['fX']=0x0,_0x57e68a['fY']=0x0,0x2*_0x1b4776*_0xc2dd78),_0x40967f=0x2*_0x255510*_0xc2dd78,_0x4dd0bb=Math[_0x2fe0d9(0x41c)](_0xc2dd78*_0xc2dd78-(_0x40967f-_0xc2dd78)*(_0x40967f-_0xc2dd78));return Math[_0x2fe0d9(0x1e6)](_0x4dd0bb)<_0x3e9a49?SR_ERR_PARAM:(_0x255510=_0x40967f,_0x57e68a['fX']=((_0x1b4776=_0xc2dd78*(_0x1fe26d-_0xc2dd78)/_0x4dd0bb+_0xc2dd78)-0x2*_0x51bc6b*_0xc2dd78)/(0x2*(_0x85b815-_0x51bc6b)*_0xc2dd78),_0x57e68a['fY']=(_0x255510-0x2*_0x2945ea*_0xc2dd78)/(0x2*(_0x4f88ba-_0x2945ea)*_0xc2dd78),0x0<=_0x57e68a['fY']&&0x0<=_0x57e68a['fX']&&_0x57e68a['fY']<=0x1&&_0x57e68a['fX']<=0x1?(_0x5663f8['fX']=_0x57e68a['fX'],_0x5663f8['fY']=_0x57e68a['fY'],_0x13949e[_0x2fe0d9(0x4a6)]):_0x13949e['SR_ERR_PARAM']);}}]),_0x92cc8d;}()),_0x174ce8=(function(){var _0x43f8ac=_0x99d5a2;function _0x5bd09b(){var _0x461f55=a0_0x1593;_0x160316(this,_0x5bd09b),this[_0x461f55(0x2c7)]='webgl',this[_0x461f55(0x47f)]=null,this[_0x461f55(0x448)]='',this[_0x461f55(0x422)]=0x0,this[_0x461f55(0x4a7)]=_0x3468da[_0x461f55(0x3c1)],this[_0x461f55(0x407)]=0x0,this[_0x461f55(0x376)]=0x0,this['FECShowMode']=0x0,this[_0x461f55(0x292)],this['InitFECParam']();}return _0x5a3b91(_0x5bd09b,[{'key':_0x43f8ac(0x4e8),'value':function(){var _0x3b847b=_0x43f8ac;this[_0x3b847b(0x4de)]=[];for(var _0xb399a4=0x0;_0xb399a4<0x20;_0xb399a4++)this[_0x3b847b(0x4de)][_0xb399a4]={},this['stFishEyeManager'][_0xb399a4]['pRender']=null,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x539)]=0x0,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x1e3)]='',this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x29b)]=0x0,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x4fe)]=0x0,this['stFishEyeManager'][_0xb399a4][_0x3b847b(0x477)]=0x0,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x26b)]=_0xf574bd,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x1e5)]=_0x462c41,this[_0x3b847b(0x4de)][_0xb399a4][_0x3b847b(0x46b)]=_0x3468da[_0x3b847b(0x224)];this[_0x3b847b(0x3c0)]=[];for(var _0x52886b=0x0;_0x52886b<0x20;_0x52886b++)this[_0x3b847b(0x3c0)][_0x52886b]={},this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x3c5)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x302)]={},this['stFishParam'][_0x52886b]['stPTZParam']['fPTZPositionX']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x302)][_0x3b847b(0x54b)]=0x0,this['stFishParam'][_0x52886b]['stCycleParam']={},this['stFishParam'][_0x52886b]['stCycleParam'][_0x3b847b(0x249)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x460)][_0x3b847b(0x326)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x460)][_0x3b847b(0x489)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x460)][_0x3b847b(0x394)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x3f4)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x1d0)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b]['stPTZColor']={},this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x320)]['nR']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x320)]['nG']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x320)]['nB']=0x0,this['stFishParam'][_0x52886b][_0x3b847b(0x320)]['nAlpha']=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x39b)]={},this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x39b)]['fTop']=0x0,this['stFishParam'][_0x52886b]['stPTZSelect'][_0x3b847b(0x339)]=0x0,this['stFishParam'][_0x52886b]['stPTZSelect'][_0x3b847b(0x478)]=0x0,this['stFishParam'][_0x52886b][_0x3b847b(0x39b)][_0x3b847b(0x2d2)]=0x0,this[_0x3b847b(0x3c0)][_0x52886b][_0x3b847b(0x1f5)]=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x164b33){return 0x1;}},{'key':_0x43f8ac(0x213),'value':function(_0x398d95,_0x21daea){var _0x217218=_0x43f8ac;return this[_0x217218(0x2c7)]=_0x21daea,this[_0x217218(0x448)]=_0x398d95,null==this[_0x217218(0x292)]&&(this[_0x217218(0x292)]=new _0x30e60b()),'2d'===this['renderEngine']||'2D'===this['renderEngine']?(this[_0x217218(0x47f)]=new _0x56d25f(),console[_0x217218(0x514)](_0x217218(0x287))):(this[_0x217218(0x47f)]=new _0x50f103(),this[_0x217218(0x47f)]['SR_SetFishParamManager'](this[_0x217218(0x292)]),console['log'](_0x217218(0x4ff))),this[_0x217218(0x47f)]['SR_Init'](_0x398d95),this[_0x217218(0x422)]=this[_0x217218(0x47f)][_0x217218(0x485)](this['mainFECCorrect']),null==this['stFishEyeManager'][0x0][_0x217218(0x3c4)]&&this[_0x217218(0x4a7)]!==_0x3468da[_0x217218(0x3c1)]&&(this['stFishEyeManager'][0x0][_0x217218(0x3c4)]=this[_0x217218(0x47f)],this[_0x217218(0x4de)][0x0][_0x217218(0x539)]=0x0,this['stFishEyeManager'][0x0][_0x217218(0x1e3)]=this['mainCanvasID'],this[_0x217218(0x4de)][0x0][_0x217218(0x29b)]=0x1,this[_0x217218(0x4de)][0x0][_0x217218(0x4fe)]=0x1,this[_0x217218(0x4de)][0x0]['nValidSubPort']=0x0),-0x1==this['mainSubPort']?(console[_0x217218(0x434)]('%c\\x20SR_AddSubPort\\x20error\\x20subport:%d',_0x217218(0x309),this[_0x217218(0x422)]),0x0):0x1;}},{'key':_0x43f8ac(0x4c7),'value':function(){var _0x484c68=_0x43f8ac;null!=this[_0x484c68(0x47f)]&&(this[_0x484c68(0x47f)][_0x484c68(0x41e)](this[_0x484c68(0x422)]),this['oVideoHandle'][_0x484c68(0x4b2)](),this[_0x484c68(0x47f)]=null);for(var _0x51de8c=0x0;_0x51de8c<0x20;_0x51de8c++)this[_0x484c68(0x4de)][_0x51de8c]['pRender']=null;return this[_0x484c68(0x4de)][_0x484c68(0x21a)](0x0,this[_0x484c68(0x4de)][_0x484c68(0x4f1)]),this[_0x484c68(0x3c0)][_0x484c68(0x21a)](0x0,this[_0x484c68(0x3c0)][_0x484c68(0x4f1)]),this[_0x484c68(0x292)][_0x484c68(0x3db)](),this[_0x484c68(0x292)]=null,0x1;}},{'key':_0x43f8ac(0x46a),'value':function(_0x3f330e){var _0x3ded4f=_0x43f8ac;return null!=this['oVideoHandle']?this[_0x3ded4f(0x47f)][_0x3ded4f(0x28d)](_0x3f330e):0x0;}},{'key':_0x43f8ac(0x355),'value':function(_0x12724d,_0x2631fe,_0x336758,_0x19d2e1){var _0x279ec5=_0x43f8ac;return null!=this[_0x279ec5(0x47f)]?this[_0x279ec5(0x47f)][_0x279ec5(0x414)](_0x12724d,_0x2631fe,_0x336758,_0x19d2e1):0x0;}},{'key':_0x43f8ac(0x4b7),'value':function(_0x310450,_0x3c976b){var _0x577b82=_0x43f8ac;return null!=this[_0x577b82(0x47f)]?this['oVideoHandle'][_0x577b82(0x375)](_0x310450,_0x3c976b):0x0;}},{'key':_0x43f8ac(0x286),'value':function(){var _0x57d180=_0x43f8ac;return null!=this['oVideoHandle']?this[_0x57d180(0x47f)][_0x57d180(0x547)]():0x0;}},{'key':_0x43f8ac(0x41f),'value':function(_0x364b18){var _0x368b02=_0x43f8ac;return null!=this[_0x368b02(0x47f)]?this[_0x368b02(0x47f)][_0x368b02(0x49d)](_0x364b18):0x0;}},{'key':'FEC_ResetCorrectType','value':function(_0x1e2813,_0x35ffd0,_0xd8b532){var _0x207ca8=_0x43f8ac;if(_0xd8b532!=_0x462c41&&_0xd8b532!=_0x4beee9&&_0xd8b532!=_0x316080&&_0xd8b532!=_0x17c71b)return console[_0x207ca8(0x514)](_0x207ca8(0x4db),_0x207ca8(0x4cf),_0xd8b532),0x10;var _0x5cf78a=this[_0x207ca8(0x380)](_0x35ffd0,_0xd8b532);return 0x0==_0x1e2813?(null!=this[_0x207ca8(0x47f)]&&(this[_0x207ca8(0x47f)][_0x207ca8(0x41e)](this[_0x207ca8(0x422)]),this[_0x207ca8(0x422)]=this[_0x207ca8(0x47f)][_0x207ca8(0x485)](_0x5cf78a),null==this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x3c4)]&&(this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x3c4)]=this['oVideoHandle'],this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x539)]=0x0,this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x1e3)]=this['mainCanvasID'],this['stFishEyeManager'][_0x1e2813]['bUsed']=0x1,this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x4fe)]=0x1,this['stFishEyeManager'][_0x1e2813][_0x207ca8(0x477)]=this[_0x207ca8(0x422)])),this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x26b)]=_0x35ffd0,this[_0x207ca8(0x4de)][_0x1e2813]['emCorrectType']=_0xd8b532,this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x46b)]=_0x5cf78a,this['mainFECCorrect']=_0x5cf78a,_0x17c71b<=this[_0x207ca8(0x4de)][_0x1e2813]['emCorrectType']&&(_0x35ffd0=this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x3c4)][_0x207ca8(0x3a7)](_0x45c70b,0x0),_0x13949e[_0x207ca8(0x4a6)]!=_0x35ffd0&&console['log'](_0x207ca8(0x307),_0x35ffd0))):null!=this[_0x207ca8(0x4de)][_0x1e2813]['pRender']?(this[_0x207ca8(0x4de)][_0x1e2813]['pRender'][_0x207ca8(0x41e)](this[_0x207ca8(0x4de)][_0x1e2813]['nValidSubPort']),this[_0x207ca8(0x4de)][_0x1e2813][_0x207ca8(0x477)]=this[_0x207ca8(0x4de)][_0x1e2813]['pRender'][_0x207ca8(0x485)](_0x5cf78a)):console['info']('%c\\x20FEC_ResetCorrectType\\x20error\\x20this\\x20canvas\\x20not\\x20play',_0x207ca8(0x4cf)),0x1;}},{'key':_0x43f8ac(0x20d),'value':function(_0x43ad98,_0x541ead){var _0x418bbf=_0x43f8ac;if((_0x3b95c4==_0x43ad98||_0xf574bd==_0x43ad98)&&_0x1ae667==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if(_0x40926f==_0x43ad98&&_0x3ccddf==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if(_0x40926f==_0x43ad98&&_0x1a4011==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if((_0x3b95c4==_0x43ad98||_0xf574bd==_0x43ad98)&&_0x11da1d==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if((_0x3b95c4==_0x43ad98||_0xf574bd==_0x43ad98)&&_0x5357b0==_0x541ead)return this[_0x418bbf(0x407)]=_0x332ff6,-0x1;if(_0x40926f!=_0x43ad98&&_0x3b95c4!=_0x43ad98&&_0xf574bd!=_0x43ad98)return this[_0x418bbf(0x407)]=MP_E_SUPPORT,-0x1;if(0x0!=_0x541ead&&_0x541ead!=_0x4ebb4e&&_0x541ead!=_0x4beee9&&_0x541ead!=_0x316080&&_0x541ead!=_0x1ae667&&_0x541ead!=_0x17c71b&&_0x541ead!=_0x3ccddf&&_0x541ead!=_0x1a4011&&_0x541ead!=_0x396f7c&&_0x541ead!=_0x11da1d&&_0x541ead!=_0x5357b0)return this[_0x418bbf(0x407)]=MP_E_SUPPORT,-0x1;for(var _0x22a23f=0x0,_0x123209=0x1;_0x123209<0x20;_0x123209++){if(this['stFishEyeManager'][_0x123209]['bUsed']&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x26b)]!=_0x43ad98)return this['FECErrorCode']=0x517,-0x1;if(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x29b)]&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x4ebb4e&&this['stFishEyeManager'][_0x123209][_0x418bbf(0x1e5)]!=_0x17c71b&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x3ccddf&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x1a4011&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x396f7c&&this['stFishEyeManager'][_0x123209]['emCorrectType']!=_0x11da1d&&this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]!=_0x5357b0&&_0x541ead!=_0x4ebb4e&&_0x541ead!=_0x17c71b&&_0x541ead!=_0x3ccddf&&_0x541ead!=_0x1a4011&&_0x541ead!=_0x396f7c&&_0x541ead!=_0x11da1d&&_0x541ead!=_0x5357b0)return this[_0x418bbf(0x407)]=0x518,-0x1;if(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x29b)]&&(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]==_0x4ebb4e&&_0x541ead==_0x4beee9||this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]==_0x4beee9&&_0x541ead==_0x4ebb4e))return this[_0x418bbf(0x407)]=0x518,-0x1;if(_0x5357b0==_0x541ead&&(this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x249)]<=-0.5||0x0<this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x249)]||this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x326)]<0x1||1.5<=this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x326)]||this[_0x418bbf(0x3c0)][0x0]['stCycleParam'][_0x418bbf(0x489)]<=-0.5||0.4<=this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']||this['stFishParam'][0x0][_0x418bbf(0x460)][_0x418bbf(0x394)]<=0.6||1.5<=this[_0x418bbf(0x3c0)][0x0]['stCycleParam']['fRadiusBottom']||this[_0x418bbf(0x3c0)][0x0]['stCycleParam'][_0x418bbf(0x249)]+this['stFishParam'][0x0]['stCycleParam'][_0x418bbf(0x326)]<=0.8||1.2<=this['stFishParam'][0x0][_0x418bbf(0x460)][_0x418bbf(0x249)]+this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)]['fRadiusRight']||this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x489)]+this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x394)]<=0.8||1.2<=this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)]['fRadiusTop']+this[_0x418bbf(0x3c0)][0x0][_0x418bbf(0x460)][_0x418bbf(0x394)]))return this[_0x418bbf(0x407)]=_0x36832c,-0x1;}for(_0x123209=0x1;_0x123209<0x20;_0x123209++)if(0x0==this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x539)]&&0x0==this['stFishEyeManager'][_0x123209]['bUsed']){this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x539)]=_0x123209,this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x477)]=-0x1,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x29b)]=0x1,this['stFishEyeManager'][_0x123209][_0x418bbf(0x26b)]=_0x43ad98,this['stFishEyeManager'][_0x123209][_0x418bbf(0x1e5)]=_0x541ead,_0x22a23f=_0x123209;break;}if(0x20==_0x123209)return this[_0x418bbf(0x407)]=0x504,-0x1;var _0x16209e=this['_ConvertDisplayEffect'](this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x26b)],this['stFishEyeManager'][_0x22a23f]['emCorrectType']);return _0x3468da[_0x418bbf(0x224)]!=_0x16209e?(0x0==this['stFishEyeManager'][_0x22a23f][_0x418bbf(0x454)]&&(this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x46b)]=_0x16209e,this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x454)]=0x0,this['stFishParam'][_0x22a23f][_0x418bbf(0x3f4)]=0.005,this['stFishParam'][_0x22a23f][_0x418bbf(0x302)][_0x418bbf(0x3d1)]=0.5,this[_0x418bbf(0x3c0)][_0x22a23f]['stPTZParam'][_0x418bbf(0x54b)]=0.5,this[_0x418bbf(0x3c0)][_0x22a23f][_0x418bbf(0x1d0)]=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x123209):_0x22a23f<0x20&&0x0==this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x454)]?(this['stFishEyeManager'][_0x22a23f][_0x418bbf(0x46b)]=_0x16209e,this[_0x418bbf(0x4de)][_0x22a23f][_0x418bbf(0x454)]=0x0,this[_0x418bbf(0x3c0)][_0x22a23f][_0x418bbf(0x3f4)]=0x0,this[_0x418bbf(0x3c0)][_0x22a23f][_0x418bbf(0x302)][_0x418bbf(0x3d1)]=0x0,this[_0x418bbf(0x3c0)][_0x22a23f]['stPTZParam'][_0x418bbf(0x54b)]=0x0,this['stFishParam'][_0x22a23f]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this[_0x418bbf(0x376)]++,_0x123209):(this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x3c4)]=null,this['stFishEyeManager'][_0x123209]['nSubPort']=0x0,this[_0x418bbf(0x4de)][_0x123209]['sCanvasID']='',this[_0x418bbf(0x4de)][_0x123209]['bUsed']=0x0,this[_0x418bbf(0x4de)][_0x123209]['bInit']=0x0,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x477)]=0x0,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x26b)]=_0xf574bd,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x1e5)]=_0x462c41,this[_0x418bbf(0x4de)][_0x123209][_0x418bbf(0x46b)]=_0x3468da[_0x418bbf(0x224)],this[_0x418bbf(0x407)]=_0x332ff6,-0x1);}},{'key':_0x43f8ac(0x4e0),'value':function(_0x18dba9){var _0x5df788=_0x43f8ac;return null!==this[_0x5df788(0x4de)][_0x18dba9][_0x5df788(0x3c4)]&&(this[_0x5df788(0x407)]=0x515,returnmpCtrlDefine[_0x5df788(0x519)]),null==this[_0x5df788(0x4de)][_0x18dba9][_0x5df788(0x3c4)]&&(this[_0x5df788(0x4de)][_0x18dba9]['pRender']=new _0x50f103(),this['stFishEyeManager'][_0x18dba9][_0x5df788(0x3c4)]['SR_SetFishParamManager'](this['pFishParamManager'])),1;}},{'key':_0x43f8ac(0x281),'value':function(_0x1ccc70,_0x1725b3){var _0x29e977=_0x43f8ac;if(null==this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x3c4)])return this[_0x29e977(0x407)]=_0x5a306e;if(_0x1ccc70<0x1||0x1f<_0x1ccc70)return this[_0x29e977(0x407)]=0x512;if(0x0==this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x29b)])return this[_0x29e977(0x407)]=_0xa54871;if(null==_0x1725b3)return this[_0x29e977(0x407)]=0x519;if(0x0==this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x539)]||0x0==this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x29b)])return this['FECErrorCode']=_0xa54871;if(0x0!=this[_0x29e977(0x4de)][_0x1ccc70]['bInited']&&null!=this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e3)])return _0x1725b3!=this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e3)]?this[_0x29e977(0x407)]=0x506:0x1;SR_DE_FISH_ORIGINAL;var _0xdeac49=this[_0x29e977(0x380)](this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x26b)],this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e5)]),_0x2db78=this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x3c4)][_0x29e977(0x3e5)](_0x1725b3);return this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x477)]=this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x3c4)][_0x29e977(0x485)](_0xdeac49),_0x13949e['SR_OK']!=_0x2db78||_0x13949e['SR_OK']!=retSASP?(this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x454)]=0x0,this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x1e3)]=null,this[_0x29e977(0x407)]=_0xa54871):(this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x454)]=0x1,this[_0x29e977(0x4de)][_0x1ccc70]['sCanvasID']=_0x1725b3,_0x17c71b<=this['stFishEyeManager'][_0x1ccc70][_0x29e977(0x1e5)]&&(_0xdeac49=this[_0x29e977(0x4de)][_0x1ccc70]['pRender'][_0x29e977(0x3a7)](_0x45c70b,0x0),_0x13949e['SR_OK']!=_0xdeac49&&console[_0x29e977(0x514)](_0x29e977(0x307),_0xdeac49)),0x0<this[_0x29e977(0x501)]&&(this[_0x29e977(0x4de)][_0x1ccc70][_0x29e977(0x3c4)][_0x29e977(0x2e7)](this[_0x29e977(0x501)]),this[_0x29e977(0x501)]=0x0),0x1);}},{'key':_0x43f8ac(0x3ed),'value':function(_0x42bad4,_0x524b3c,_0x578b65){var _0x13d559=_0x43f8ac;return 0x0!=_0x42bad4&&(0x1==this['stFishEyeManager'][_0x42bad4][_0x13d559(0x454)]&&(_0x13949e[_0x13d559(0x4a6)]==this[_0x13d559(0x4de)][_0x42bad4]['pRender'][_0x13d559(0x41e)](this['stFishEyeManager'][_0x42bad4][_0x13d559(0x477)])&&(this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x454)]=0x0,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x477)]=-0x1),this['stFishEyeManager'][_0x42bad4][_0x13d559(0x3c4)][_0x13d559(0x4b2)]()),this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x3c4)]=null,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x539)]=0x0,this['stFishEyeManager'][_0x42bad4][_0x13d559(0x1e3)]='',this['stFishEyeManager'][_0x42bad4][_0x13d559(0x29b)]=0x0,this[_0x13d559(0x4de)][_0x42bad4]['bInit']=0x0,this[_0x13d559(0x4de)][_0x42bad4]['nValidSubPort']=0x0,this[_0x13d559(0x4de)][_0x42bad4]['emPlaceType']=_0xf574bd,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x1e5)]=_0x462c41,this[_0x13d559(0x4de)][_0x42bad4][_0x13d559(0x46b)]=_0x3468da['SR_DE_FISH_ORIGINAL']),0x1;}},{'key':_0x43f8ac(0x3fb),'value':function(_0x418f60){var _0x329f65=_0x43f8ac;if(0x0!=_0x418f60){if(_0x418f60<0x1||0x1f<_0x418f60)return this[_0x329f65(0x407)]=0x512;if(0x0==this['stFishEyeManager'][_0x418f60][_0x329f65(0x29b)])return this[_0x329f65(0x407)]=_0xa54871;this['stFishParam'][_0x418f60][_0x329f65(0x460)]['fRadiusLeft']=0x0,this[_0x329f65(0x3c0)][_0x418f60][_0x329f65(0x460)]['fRadiusRight']=0x1,this['stFishParam'][_0x418f60][_0x329f65(0x460)][_0x329f65(0x489)]=0x0,this[_0x329f65(0x3c0)][_0x418f60][_0x329f65(0x460)]['fRadiusBottom']=0x1,this['FECErrorCode']=0x0,(this['FECShowMode']=0x0)<this[_0x329f65(0x376)]&&this['subPortNum']--;}return 0x1;}},{'key':_0x43f8ac(0x362),'value':function(_0x4f21ba,_0xa5d4c0){var _0x110f49=_0x43f8ac;if(this['FECErrorCode']=0x0,null==this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)])return this[_0x110f49(0x407)]=_0x5a306e;if(0x0==this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x29b)])return this[_0x110f49(0x407)]=_0xa54871;if(this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]>=_0x17c71b&&this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]<=_0x5357b0&&0x1e&_0xa5d4c0[_0x110f49(0x49e)])return this[_0x110f49(0x407)]=_0x566fd6;if(_0x367f2&_0xa5d4c0[_0x110f49(0x49e)]){if(null==_0xa5d4c0[_0x110f49(0x460)])return _0x36832c;for(var _0x12d85b=0x1;_0x12d85b<0x20;_0x12d85b++){if(this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x539)]&&_0x11da1d==this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x1e5)]&&(_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)]<=-0.5||0.4<=_0xa5d4c0['stCycleParam'][_0x110f49(0x249)]||_0xa5d4c0['stCycleParam'][_0x110f49(0x326)]<=0.6||1.5<=_0xa5d4c0['stCycleParam'][_0x110f49(0x326)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop']<=-0.5||0x0<_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusBottom']<0x1||1.5<=_0xa5d4c0['stCycleParam'][_0x110f49(0x394)]||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]<=0.8||1.2<=_0xa5d4c0[_0x110f49(0x460)]['fRadiusLeft']+_0xa5d4c0['stCycleParam'][_0x110f49(0x326)]||_0xa5d4c0['stCycleParam'][_0x110f49(0x489)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x394)]<=0.8||1.2<=_0xa5d4c0['stCycleParam'][_0x110f49(0x489)]+_0xa5d4c0['stCycleParam'][_0x110f49(0x394)]))return this[_0x110f49(0x407)]=_0x36832c;if(this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x539)]&&_0x5357b0==this[_0x110f49(0x4de)][_0x12d85b][_0x110f49(0x1e5)]&&(_0xa5d4c0[_0x110f49(0x460)]['fRadiusLeft']<=-0.5||0x0<_0xa5d4c0[_0x110f49(0x460)]['fRadiusLeft']||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]<0x1||1.5<=_0xa5d4c0[_0x110f49(0x460)]['fRadiusRight']||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)]<=-0.5||0.4<=_0xa5d4c0['stCycleParam'][_0x110f49(0x489)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusBottom']<=0.6||1.5<=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x394)]||_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]<=0.8||1.2<=_0xa5d4c0['stCycleParam'][_0x110f49(0x249)]+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)]||_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop']+_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x394)]<=0.8||1.2<=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)]+_0xa5d4c0['stCycleParam'][_0x110f49(0x394)]))return this[_0x110f49(0x407)]=_0x36832c;}}if(0x0==this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x454)]){if(_0x142076&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4beee9!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]&&_0x316080!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)]||_0x40926f==this[_0x110f49(0x4de)][_0x4f21ba]['emPlaceType'])return this[_0x110f49(0x407)]=_0x566fd6;for(var _0x4272d5=0x1;_0x4272d5<0x20;_0x4272d5++)if(this[_0x110f49(0x4de)][_0x4272d5]['nSubPort']&&this[_0x110f49(0x4de)][_0x4272d5][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x4272d5]['emCorrectType']==_0x4ebb4e)return this[_0x110f49(0x407)]=_0x127bf2;this['stFishParam'][_0x4f21ba][_0x110f49(0x1d0)]=_0xa5d4c0[_0x110f49(0x47c)];}if(_0x42215a&_0xa5d4c0[_0x110f49(0x49e)]){if(null==_0xa5d4c0[_0x110f49(0x320)])return _0x36832c;if(0xff<_0xa5d4c0[_0x110f49(0x320)]['nR']||0xff<_0xa5d4c0['stPTZColor']['nG']||0xff<_0xa5d4c0[_0x110f49(0x320)]['nB']||0xff<_0xa5d4c0['stPTZColor'][_0x110f49(0x24b)])return this[_0x110f49(0x407)]=_0x566fd6;this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nR']=_0xa5d4c0[_0x110f49(0x320)]['nR'],this[_0x110f49(0x3c0)][_0x4f21ba]['stPTZColor']['nG']=_0xa5d4c0[_0x110f49(0x320)]['nG'],this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nB']=_0xa5d4c0['stPTZColor']['nB'],this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nAlpha']=_0xa5d4c0[_0x110f49(0x320)]['nAlpha'];}if(_0x2802b6&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4ebb4e!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)])return this[_0x110f49(0x407)]=_0x566fd6;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x302)][_0x110f49(0x3d1)]=_0xa5d4c0[_0x110f49(0x4a3)]['fPTZPositionX'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x302)]['fPTZPositionY']=_0xa5d4c0[_0x110f49(0x4a3)][_0x110f49(0x54b)];}if(_0x168627&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4ebb4e!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)])return this[_0x110f49(0x407)]=_0x566fd6;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x3f4)]=_0xa5d4c0['fPTZZoom'];}if(_0x3db8be&_0xa5d4c0[_0x110f49(0x49e)]){if(null==this[_0x110f49(0x3c0)]['stPTZSelect'])return _0x566fd6;if(_0x4ebb4e!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)])return this['FECErrorCode']=_0x566fd6;this['stFishParam']['stPTZSelect'][_0x110f49(0x24a)]=_0xa5d4c0[_0x110f49(0x39b)]['fTop'],this[_0x110f49(0x3c0)][_0x110f49(0x39b)][_0x110f49(0x339)]=_0xa5d4c0[_0x110f49(0x39b)]['fBottom'],this[_0x110f49(0x3c0)][_0x110f49(0x39b)]['fLeft']=_0xa5d4c0[_0x110f49(0x39b)][_0x110f49(0x478)],this[_0x110f49(0x3c0)][_0x110f49(0x39b)]['fRight']=_0xa5d4c0[_0x110f49(0x39b)][_0x110f49(0x2d2)];}if(_0x367f2&_0xa5d4c0['upDateType']){if(null==_0xa5d4c0[_0x110f49(0x460)])return _0x36832c;if(0x0==this[_0x110f49(0x3cc)](_0xa5d4c0[_0x110f49(0x460)]))return this[_0x110f49(0x407)]=_0x36832c;this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x249)]=_0xa5d4c0['stCycleParam'][_0x110f49(0x249)],this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x326)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)],this[_0x110f49(0x3c0)][0x0]['stCycleParam']['fRadiusTop']=_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop'],this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x394)]=_0xa5d4c0['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x142076&_0xa5d4c0['upDateType']){if(_0x4beee9!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x1e5)]&&_0x316080!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)]||_0x40926f==this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x26b)])return this[_0x110f49(0x407)]=_0x566fd6;for(var _0x130833=0x1;_0x130833<0x20;_0x130833++)if(this[_0x110f49(0x4de)][_0x130833][_0x110f49(0x539)]&&this[_0x110f49(0x4de)][_0x130833][_0x110f49(0x29b)]&&this[_0x110f49(0x4de)][_0x130833][_0x110f49(0x1e5)]==_0x4ebb4e)return this[_0x110f49(0x407)]=_0x127bf2;var _0x20ce2b={};if(_0x20ce2b['nFishParamType']=_0x1e8e38,_0x20ce2b[_0x110f49(0x40f)]=0x0,_0x20ce2b['fAngle']=_0xa5d4c0[_0x110f49(0x47c)],_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](_0x20ce2b))return this[_0x110f49(0x407)]=_0x127bf2;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x1d0)]=_0xa5d4c0[_0x110f49(0x47c)];}if(_0x42215a&_0xa5d4c0[_0x110f49(0x49e)]){if(null==_0xa5d4c0[_0x110f49(0x320)])return _0x566fd6;if(0xff<_0xa5d4c0[_0x110f49(0x320)]['nR']||0xff<_0xa5d4c0['stPTZColor']['nG']||0xff<_0xa5d4c0['stPTZColor']['nB']||0xff<_0xa5d4c0[_0x110f49(0x320)]['nAlpha'])return this[_0x110f49(0x407)]=_0x566fd6;_0x20ce2b={},(_0x20ce2b['fR']=float(_0xa5d4c0[_0x110f49(0x320)]['nR']/0xff),_0x20ce2b['fG']=float(_0xa5d4c0[_0x110f49(0x320)]['nG']/0xff),_0x20ce2b['fB']=float(_0xa5d4c0[_0x110f49(0x320)]['nB']/0xff),_0x20ce2b['fA']=float(_0xa5d4c0['stPTZColor'][_0x110f49(0x24b)]/0xff),this['stFishParam'][_0x4f21ba][_0x110f49(0x320)]['nR']=_0xa5d4c0['stPTZColor']['nR'],this['stFishParam'][_0x4f21ba]['stPTZColor']['nG']=_0xa5d4c0[_0x110f49(0x320)]['nG'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x320)]['nB']=_0xa5d4c0['stPTZColor']['nB'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x320)][_0x110f49(0x24b)]=_0xa5d4c0[_0x110f49(0x320)][_0x110f49(0x24b)]);}if(_0x2802b6&_0xa5d4c0['upDateType']){if(_0x4ebb4e!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x1e5)])return this[_0x110f49(0x407)]=_0x566fd6;_0x20ce2b={};if(_0x20ce2b['nFishParamType']=_0x1d678a,_0x20ce2b[_0x110f49(0x40f)]=0x0,_0x20ce2b[_0x110f49(0x3d6)]=_0xa5d4c0[_0x110f49(0x4a3)][_0x110f49(0x3d1)],_0x20ce2b[_0x110f49(0x40c)]=_0xa5d4c0[_0x110f49(0x4a3)]['fPTZPositionY'],_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](_0x20ce2b))return this[_0x110f49(0x407)]=_0x127bf2;this[_0x110f49(0x3c0)][_0x4f21ba]['stPTZParam'][_0x110f49(0x3d1)]=_0xa5d4c0[_0x110f49(0x4a3)]['fPTZPositionX'],this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x302)][_0x110f49(0x54b)]=_0xa5d4c0[_0x110f49(0x4a3)][_0x110f49(0x54b)];}if(_0x168627&_0xa5d4c0[_0x110f49(0x49e)]){if(_0x4ebb4e!=this['stFishEyeManager'][_0x4f21ba]['emCorrectType'])return this[_0x110f49(0x407)]=_0x566fd6;_0x20ce2b={};if(_0x20ce2b[_0x110f49(0x260)]=_0x2b1fa6,_0x20ce2b[_0x110f49(0x40f)]=0x0,_0x20ce2b[_0x110f49(0x3f4)]=_0xa5d4c0[_0x110f49(0x50d)],_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](_0x20ce2b))return this['FECErrorCode']=_0x127bf2;this[_0x110f49(0x3c0)][_0x4f21ba][_0x110f49(0x3f4)]=_0xa5d4c0[_0x110f49(0x50d)];}if(_0x367f2&_0xa5d4c0[_0x110f49(0x49e)]){if(0x0==this['IsValidRadiusParam'](_0xa5d4c0[_0x110f49(0x460)]))return this[_0x110f49(0x407)]=_0x36832c;_0x20ce2b={};if(_0x20ce2b[_0x110f49(0x260)]=_0x3b5c80,_0x20ce2b[_0x110f49(0x40f)]=0x1,_0x20ce2b[_0x110f49(0x27e)]=_0xa5d4c0['stCycleParam']['fRadiusLeft'],_0x20ce2b[_0x110f49(0x469)]=_0xa5d4c0['stCycleParam'][_0x110f49(0x326)],_0x20ce2b['fRYTop']=_0xa5d4c0[_0x110f49(0x460)]['fRadiusTop'],_0x20ce2b[_0x110f49(0x2e9)]=_0xa5d4c0['stCycleParam'][_0x110f49(0x394)],_0x13949e[_0x110f49(0x4a6)]!=this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x3c4)][_0x110f49(0x4f0)](this['stFishEyeManager'][_0x4f21ba][_0x110f49(0x477)],_0x20ce2b))return this[_0x110f49(0x407)]=_0x36832c;this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x249)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x249)],this['stFishParam'][0x0][_0x110f49(0x460)][_0x110f49(0x326)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x326)],this[_0x110f49(0x3c0)][0x0][_0x110f49(0x460)][_0x110f49(0x489)]=_0xa5d4c0[_0x110f49(0x460)][_0x110f49(0x489)],this['stFishParam'][0x0][_0x110f49(0x460)]['fRadiusBottom']=_0xa5d4c0['stCycleParam']['fRadiusBottom'];}return _0x3db8be&_0xa5d4c0['upDateType']&&_0x4ebb4e==this[_0x110f49(0x4de)][_0x4f21ba]['emCorrectType']&&_0x13949e[_0x110f49(0x4a6)]!=this[_0x110f49(0x4de)][_0x4f21ba]['pRender']['SR_SetFishParam'](this[_0x110f49(0x4de)][_0x4f21ba][_0x110f49(0x39b)])?this[_0x110f49(0x407)]=0x513:0x1;}},{'key':_0x43f8ac(0x3cc),'value':function(_0x58b8b4){var _0x399f36=_0x43f8ac;return _0x58b8b4[_0x399f36(0x394)]<=_0x58b8b4[_0x399f36(0x489)]||_0x58b8b4[_0x399f36(0x326)]<=_0x58b8b4['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0x14f9dd,_0x3fd041,_0x3c156d){var _0x417574=_0x43f8ac;return _0x3fd041<_0x30de30||_0x1ab3fe<_0x3fd041?this['FECErrorCode']=_0x14f925:(this[_0x417574(0x407)]=0x0,null==this['stFishEyeManager'][_0x14f9dd]['pRender']?this[_0x417574(0x407)]=_0x5a306e:0x0==this[_0x417574(0x4de)][_0x14f9dd]['bInited']?this[_0x417574(0x407)]=_0xa54871:_0x17c71b<=this['stFishEyeManager'][_0x14f9dd][_0x417574(0x1e5)]?_0x13949e['SR_OK']!=this[_0x417574(0x4de)][_0x14f9dd]['pRender'][_0x417574(0x4c8)](_0x3fd041,_0x3c156d)?this[_0x417574(0x407)]=_0x14f925:0x1:this['FECErrorCode']=_0x566fd6);}},{'key':_0x43f8ac(0x22e),'value':function(_0x29e239,_0x105bcf){var _0x1d32dd=_0x43f8ac;return!(_0x105bcf<0x1||0x3<_0x105bcf||0x0==this['stFishEyeManager'][_0x29e239][_0x1d32dd(0x454)])&&_0x17c71b<=this[_0x1d32dd(0x4de)][_0x29e239][_0x1d32dd(0x1e5)]?this[_0x1d32dd(0x4de)][_0x29e239][_0x1d32dd(0x3c4)][_0x1d32dd(0x2ab)](_0x105bcf):-0x1;}},{'key':_0x43f8ac(0x544),'value':function(_0x16c02c,_0xc338c3,_0x2b49af,_0x96543,_0x4da71b,_0x1c0388,_0x42667f){var _0x4d5b8c=_0x43f8ac;return null==this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x3c4)]?this['FECErrorCode']=_0x5a306e:0x0!=_0xc338c3||0x0!=_0x2b49af?_0x14f925:this['stFishEyeManager'][_0x16c02c]['emCorrectType']!=_0x462c41&&this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x1e5)]!=_0x4beee9&&this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x1e5)]!=_0x316080&&this[_0x4d5b8c(0x4de)][_0x16c02c]['emCorrectType']!=_0x1ae667?_0x332ff6:0x0==this[_0x4d5b8c(0x4de)][_0x16c02c][_0x4d5b8c(0x454)]?this['FECErrorCode']=_0xa54871:_0x96543<0x0||_0x4da71b<0x0||_0x1c0388<0x0||_0x42667f<0x0?_0x14f925:_0x13949e[_0x4d5b8c(0x4a6)]!=this['stFishEyeManager'][_0x16c02c]['pRender']['SR_SetDisplayRect'](_0x96543,_0x4da71b,_0x1c0388,_0x42667f)?this['FECErrorCode']=0x511:0x1;}},{'key':_0x43f8ac(0x40e),'value':function(_0x523b63,_0x1cd530){var _0x5c3e70=_0x43f8ac;return null==this[_0x5c3e70(0x4de)][_0x523b63][_0x5c3e70(0x3c4)]?this[_0x5c3e70(0x407)]=_0x5a306e:0x0==this['stFishEyeManager'][_0x523b63]['bInited']?this[_0x5c3e70(0x407)]=_0xa54871:_0x13949e[_0x5c3e70(0x4a6)]!=this[_0x5c3e70(0x4de)][_0x523b63][_0x5c3e70(0x3c4)][_0x5c3e70(0x3a7)](_0x45c70b,_0x1cd530)?this['FECErrorCode']=0x511:0x1;}},{'key':_0x43f8ac(0x380),'value':function(_0x17f479,_0x25517d){var _0x19f2c6=_0x43f8ac;switch(_0x17f479){case _0x40926f:return _0x4ebb4e==_0x25517d?_0x3468da[_0x19f2c6(0x4bf)]:_0x316080==_0x25517d||_0x1ae667==_0x25517d?_0x3468da['SR_DE_FISH_PANORAMA_WALL']:_0x17c71b==_0x25517d?_0x3468da[_0x19f2c6(0x2e3)]:_0x396f7c==_0x25517d?_0x3468da[_0x19f2c6(0x4dd)]:_0x11da1d==_0x25517d?_0x3468da[_0x19f2c6(0x36e)]:_0x5357b0==_0x25517d?_0x3468da[_0x19f2c6(0x26f)]:_0x3468da[_0x19f2c6(0x224)];case _0x3b95c4:return _0x4ebb4e==_0x25517d?_0x3468da[_0x19f2c6(0x4c2)]:_0x316080==_0x25517d?_0x3468da[_0x19f2c6(0x2f5)]:_0x4beee9==_0x25517d?_0x3468da[_0x19f2c6(0x3a8)]:_0x1ae667==_0x25517d?_0x3468da[_0x19f2c6(0x33c)]:_0x17c71b==_0x25517d?_0x3468da['SR_DE_FISH_SEMISPHERE']:_0x3ccddf==_0x25517d?_0x3468da[_0x19f2c6(0x3a9)]:_0x1a4011==_0x25517d?_0x3468da[_0x19f2c6(0x4f9)]:_0x396f7c==_0x25517d?_0x3468da['SR_DE_FISH_PLANET']:_0x3468da[_0x19f2c6(0x224)];case _0xf574bd:return _0x4ebb4e==_0x25517d?_0x3468da[_0x19f2c6(0x2b7)]:_0x316080==_0x25517d?_0x3468da[_0x19f2c6(0x208)]:_0x4beee9==_0x25517d?_0x3468da['SR_DE_FISH_PANORAMA_CEILING_180']:_0x1ae667==_0x25517d?_0x3468da[_0x19f2c6(0x33c)]:_0x17c71b==_0x25517d?_0x3468da[_0x19f2c6(0x2e3)]:_0x3ccddf==_0x25517d?_0x3468da['SR_DE_FISH_CYLINDER_CEILING']:_0x1a4011==_0x25517d?_0x3468da[_0x19f2c6(0x3f3)]:_0x396f7c==_0x25517d?_0x3468da['SR_DE_FISH_PLANET']:_0x3468da[_0x19f2c6(0x224)];default:return _0x3468da[_0x19f2c6(0x224)];}return _0x3468da[_0x19f2c6(0x224)];}}]),_0x5bd09b;}()),_0x3b510c=(function(){var _0x19c763=_0x99d5a2;function _0x3bf9bf(){var _0x494c7e=a0_0x1593;_0x160316(this,_0x3bf9bf),this[_0x494c7e(0x1d3)]=0x0,this[_0x494c7e(0x2a1)]=0x0,this[_0x494c7e(0x2da)]=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}return _0x5a3b91(_0x3bf9bf,[{'key':_0x19c763(0x3a0),'value':function(){var _0x2e8656=_0x19c763;this[_0x2e8656(0x1d3)]=this[_0x2e8656(0x404)]();}},{'key':'GetCurTime','value':function(){var _0x27eaee=_0x19c763;return this[_0x27eaee(0x2a1)]=0x3c*new Date()[_0x27eaee(0x4e6)]()*0x3c*0x3e8+0x3c*new Date()[_0x27eaee(0x4d1)]()*0x3e8+0x3e8*new Date()[_0x27eaee(0x44b)]()+new Date()['getMilliseconds'](),this[_0x27eaee(0x1df)]=new Date()[_0x27eaee(0x31a)](),this[_0x27eaee(0x2a1)];}},{'key':_0x19c763(0x20e),'value':function(){var _0x1ada06=_0x19c763,_0x22054f=this[_0x1ada06(0x404)]()-this[_0x1ada06(0x1d3)];return this['lastDate']!==new Date()['getDate']()&&(_0x22054f+=0x18*(new Date()[_0x1ada06(0x31a)]()-this[_0x1ada06(0x1df)])*0x3c*0x3c*0x3e8),_0x22054f;}},{'key':_0x19c763(0x257),'value':function(){var _0x3f3041=_0x19c763;this[_0x3f3041(0x1d3)]=0x0,this[_0x3f3041(0x2a1)]=0x0,this[_0x3f3041(0x2da)]=0x0,this['lastDate']=0x0,this[_0x3f3041(0x1fa)]=0x0;}}]),_0x3bf9bf;}());_0x95cd63=new(function(){var _0xea9a0b=_0x99d5a2;function _0x24ab98(){var _0x85f1d5=a0_0x1593,_0x41dda4=0x0<arguments[_0x85f1d5(0x4f1)]&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x160316(this,_0x24ab98),this[_0x85f1d5(0x42d)]=null,this[_0x85f1d5(0x2ae)]=0x0,this[_0x85f1d5(0x48d)]=null,this[_0x85f1d5(0x3d5)]=null,this[_0x85f1d5(0x1fb)]=[],this[_0x85f1d5(0x313)]=!0x1,this[_0x85f1d5(0x353)]=0x0,this[_0x85f1d5(0x3bc)]=0x0,this[_0x85f1d5(0x329)]=!0x0,this[_0x85f1d5(0x24f)]=this['RenderFrame'][_0x85f1d5(0x336)](this),this[_0x85f1d5(0x23f)]=0x2,this[_0x85f1d5(0x439)]=0x1,this[_0x85f1d5(0x36b)]=0x1,this[_0x85f1d5(0x3fe)]=0xe,this[_0x85f1d5(0x3b8)]=!0x1,this[_0x85f1d5(0x509)]=!0x0,this[_0x85f1d5(0x2b0)]='',this[_0x85f1d5(0x2fb)]=!0x1,this[_0x85f1d5(0x4fa)]=!0x1,this[_0x85f1d5(0x455)]=0x0,this[_0x85f1d5(0x436)]=0x0,this[_0x85f1d5(0x52d)]=null,this[_0x85f1d5(0x4b1)]=[],this['curFrameInfo']={},this[_0x85f1d5(0x360)][_0x85f1d5(0x37a)]=0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this[_0x85f1d5(0x279)]=!0x1,this[_0x85f1d5(0x1e1)]=!0x1,this['displayRunning']=!0x0,this[_0x85f1d5(0x37d)]=null,this[_0x85f1d5(0x3d4)]=0x0,this[_0x85f1d5(0x39a)]=this[_0x85f1d5(0x455)]*this[_0x85f1d5(0x436)]*0x3/0x2,this['curFrameIsDisplay']=!0x0,(this[_0x85f1d5(0x4c3)]=null)!=_0x41dda4&&(this[_0x85f1d5(0x4c3)]=_0x41dda4),this[_0x85f1d5(0x2c7)]=_0x85f1d5(0x4eb),this[_0x85f1d5(0x3df)]=null;}return _0x5a3b91(_0x24ab98,[{'key':_0xea9a0b(0x462),'value':function(_0x5c1eba,_0x3b6194,_0x3446a3,_0x5be7bc){var _0xeaa69=_0xea9a0b;this[_0xeaa69(0x42d)]=_0x5c1eba,this[_0xeaa69(0x2ae)]=_0x3b6194,this[_0xeaa69(0x2c7)]=_0x5be7bc,this[_0xeaa69(0x3df)]=new _0x174ce8(),this[_0xeaa69(0x3df)][_0xeaa69(0x213)](this[_0xeaa69(0x42d)],this[_0xeaa69(0x2c7)]),this[_0xeaa69(0x3b2)](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0x4c7866(_0x3446a3,this,this[_0xeaa69(0x4c3)]),this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!==this[_0xeaa69(0x3d5)]&&this['oVideoDecoder']['initDecoder']()),null==this[_0xeaa69(0x37d)]&&(this[_0xeaa69(0x37d)]=new _0x3b510c());}},{'key':_0xea9a0b(0x46f),'value':function(){var _0x339af2=_0xea9a0b;this[_0x339af2(0x4c3)][_0x339af2(0x41b)](),this[_0x339af2(0x4c3)][_0x339af2(0x507)](0x0),this[_0x339af2(0x4c3)][_0x339af2(0x497)]();}},{'key':_0xea9a0b(0x2cd),'value':function(_0x9ae98,_0x302653){var _0x50b2e9=_0xea9a0b,_0x172b73={};_0x172b73['port']=_0x302653[_0x50b2e9(0x3c6)],_0x172b73[_0x50b2e9(0x272)]=_0x302653['codecType'],_0x172b73[_0x50b2e9(0x3fd)]=_0x302653[_0x50b2e9(0x3fd)],_0x172b73[_0x50b2e9(0x495)]=_0x302653[_0x50b2e9(0x495)],_0x172b73[_0x50b2e9(0x36f)]=_0x302653['width'],_0x172b73['height']=_0x302653[_0x50b2e9(0x483)],_0x172b73['timeStamp']=_0x302653[_0x50b2e9(0x37a)],_0x172b73[_0x50b2e9(0x4d9)]=_0x302653['frameRate'],_0x172b73[_0x50b2e9(0x1dc)]=_0x302653[_0x50b2e9(0x1dc)],_0x172b73[_0x50b2e9(0x50a)]=_0x302653['interlace'],_0x172b73[_0x50b2e9(0x2c4)]=_0x302653[_0x50b2e9(0x2c4)],_0x172b73[_0x50b2e9(0x46d)]=_0x302653[_0x50b2e9(0x46d)],_0x172b73['cropRight']=_0x302653[_0x50b2e9(0x2fd)],_0x172b73[_0x50b2e9(0x2ba)]=_0x302653[_0x50b2e9(0x2ba)],_0x172b73[_0x50b2e9(0x268)]=_0x302653['cropBottom'],_0x172b73[_0x50b2e9(0x321)]=_0x302653[_0x50b2e9(0x321)],_0x172b73[_0x50b2e9(0x3e1)]=_0x302653[_0x50b2e9(0x3e1)],_0x172b73['week']=_0x302653[_0x50b2e9(0x451)],_0x172b73[_0x50b2e9(0x3cd)]=_0x302653[_0x50b2e9(0x3cd)],_0x172b73[_0x50b2e9(0x2d4)]=_0x302653['hour'],_0x172b73[_0x50b2e9(0x3f9)]=_0x302653[_0x50b2e9(0x3f9)],_0x172b73[_0x50b2e9(0x430)]=_0x302653[_0x50b2e9(0x430)],_0x172b73[_0x50b2e9(0x465)]=_0x302653[_0x50b2e9(0x465)],this[_0x50b2e9(0x4b1)][_0x50b2e9(0x51d)](_0x172b73),this['oVideoDecoder']['inputData'](_0x9ae98,_0x302653);}},{'key':_0xea9a0b(0x31e),'value':function(){var _0x269949=this;return new Promise(function(_0x5871c6,_0x42657f){var _0x564e7=a0_0x1593;_0x269949[_0x564e7(0x3d5)][_0x564e7(0x3b7)]()[_0x564e7(0x39e)](function(){var _0xe37438=_0x564e7;_0x269949[_0xe37438(0x4b1)][_0xe37438(0x21a)](0x0,_0x269949[_0xe37438(0x4b1)][_0xe37438(0x4f1)]),_0x269949['curFrameInfo']={},_0x269949['renderCurStatus']=0x2,_0x269949[_0xe37438(0x4c3)]?_0x269949['player'][_0xe37438(0x450)]():postMessage({'function':'resetEnd'}),_0x5871c6();},function(){_0x42657f();});});}},{'key':_0xea9a0b(0x341),'value':function(){var _0x46697f=_0xea9a0b;this['initTimer']=!0x1,this[_0x46697f(0x353)]=0x0,this[_0x46697f(0x3bc)]=0x0,this[_0x46697f(0x329)]=!0x0,null!=this[_0x46697f(0x37d)]&&this[_0x46697f(0x37d)]['timerReset'](),this[_0x46697f(0x24f)]=this[_0x46697f(0x24f)]['bind'](this),this[_0x46697f(0x23f)]=0x2,this[_0x46697f(0x31d)]=0x0,this[_0x46697f(0x402)]=null,this[_0x46697f(0x2fb)]=!0x1,this[_0x46697f(0x4fa)]=!0x1,this[_0x46697f(0x279)]=!0x1,this['getCropImageBMP']=!0x1,this[_0x46697f(0x390)]=!0x0,this[_0x46697f(0x52d)]=null,this['displayFrameInfo']['splice'](0x0,this[_0x46697f(0x4b1)][_0x46697f(0x4f1)]),this[_0x46697f(0x360)]={};}},{'key':'_destroyPlayCtrl','value':function(){var _0x22b82e=_0xea9a0b,_0x20110c=this;this['oVideoDecoder'][_0x22b82e(0x409)]()[_0x22b82e(0x39e)](function(){var _0x54c9c9=_0x22b82e;(_0x20110c[_0x54c9c9(0x3d5)]=null)!=_0x20110c[_0x54c9c9(0x3df)]&&(_0x20110c['oVideoRender'][_0x54c9c9(0x4c7)](),_0x20110c[_0x54c9c9(0x3df)]=null),_0x20110c[_0x54c9c9(0x341)](),_0x20110c[_0x54c9c9(0x37d)]=null,console[_0x54c9c9(0x514)](_0x54c9c9(0x3b3)),_0x20110c[_0x54c9c9(0x248)]=!0x1;},function(){var _0x1fc14b=_0x22b82e;console[_0x1fc14b(0x514)](_0x1fc14b(0x296));});}},{'key':_0xea9a0b(0x24f),'value':function(){var _0xaa4da6=_0xea9a0b,_0x51240b,_0x52d931,_0x449d91,_0x475db2=this;switch(this[_0xaa4da6(0x23f)]){case 0x0:this[_0xaa4da6(0x341)](),this[_0xaa4da6(0x31e)]()['then'](function(){setTimeout(function(){var _0x163b8e=a0_0x1593;_0x475db2[_0x163b8e(0x24f)]();},0x1);},function(){});break;case 0x2:this[_0xaa4da6(0x248)]?(this[_0xaa4da6(0x402)]=this[_0xaa4da6(0x304)](),-0x1==this['displayBuf']||0x0==this[_0xaa4da6(0x2ae)]?(null!=this['chosenFrame']&&(this[_0xaa4da6(0x31d)]=this['chosenFrame'][_0xaa4da6(0x264)],this[_0xaa4da6(0x396)](this['chosenFrame'])),requestAnimationFrame(this[_0xaa4da6(0x24f)])):null!=this['chosenFrame']?(this[_0xaa4da6(0x313)]&&!this['resetTimer']||(this[_0xaa4da6(0x37d)][_0xaa4da6(0x3a0)](),this[_0xaa4da6(0x313)]=!0x0,this[_0xaa4da6(0x329)]=!0x1,this[_0xaa4da6(0x353)]=this[_0xaa4da6(0x402)][_0xaa4da6(0x264)],this[_0xaa4da6(0x3bc)]=this[_0xaa4da6(0x402)]['timestamp']),this[_0xaa4da6(0x31d)]=this[_0xaa4da6(0x402)][_0xaa4da6(0x264)],_0x51240b=this[_0xaa4da6(0x31d)]-this['preTimeStamp'],_0x449d91=this[_0xaa4da6(0x31d)]-this[_0xaa4da6(0x3bc)],(0x1388<_0x51240b||_0x51240b<0x0||_0x449d91<0x0)&&(this[_0xaa4da6(0x37d)][_0xaa4da6(0x3a0)](),this['preTimeStamp']=this[_0xaa4da6(0x402)]['timestamp'],this[_0xaa4da6(0x3bc)]=this[_0xaa4da6(0x31d)]),(_0x51240b=(this[_0xaa4da6(0x31d)]-this[_0xaa4da6(0x3bc)])/this[_0xaa4da6(0x439)]-this['oRenderTimer'][_0xaa4da6(0x20e)]())<0xf&&-0xf<_0x51240b?(this['paint'](this[_0xaa4da6(0x402)]),this[_0xaa4da6(0x353)]=this['curTimeStamp'],this[_0xaa4da6(0x24f)]()):_0x51240b<0x0?(setTimeout(this[_0xaa4da6(0x396)](this[_0xaa4da6(0x402)]),0x1),this[_0xaa4da6(0x353)]=this[_0xaa4da6(0x31d)],this[_0xaa4da6(0x24f)]()):_0x52d931=setTimeout(function(){var _0x3b4cff=_0xaa4da6;0x2==_0x475db2[_0x3b4cff(0x23f)]?(_0x475db2[_0x3b4cff(0x396)](_0x475db2[_0x3b4cff(0x402)]),_0x475db2['preTimeStamp']=_0x475db2['curTimeStamp']):_0x475db2[_0x3b4cff(0x390)]=!0x1,_0x475db2[_0x3b4cff(0x24f)](),clearTimeout(_0x52d931);},_0x51240b-0x5)):(_0x449d91=0x5,0x2<this[_0xaa4da6(0x439)]&&(_0x449d91=0x1),setTimeout(function(){var _0xe89497=_0xaa4da6;_0x475db2[_0xe89497(0x24f)]();},_0x449d91))):setTimeout(function(){var _0x4c3ab8=_0xaa4da6;_0x475db2[_0x4c3ab8(0x24f)]();},0x5);break;case 0x3:setTimeout(function(){var _0x13b3c5=_0xaa4da6;_0x475db2[_0x13b3c5(0x410)](),_0x475db2[_0x13b3c5(0x24f)]();},0x5);break;case 0x5:this[_0xaa4da6(0x3b8)]&&(this['chosenFrame']=this['chooseFrame'](),null!=this[_0xaa4da6(0x402)]&&setTimeout(function(){var _0x5c3099=_0xaa4da6;_0x475db2[_0x5c3099(0x396)](_0x475db2[_0x5c3099(0x402)]),_0x475db2[_0x5c3099(0x3b8)]=!0x1;},0x1)),setTimeout(function(){var _0x3e7f51=_0xaa4da6;_0x475db2[_0x3e7f51(0x410)](),_0x475db2['RenderFrame']();},0x5);break;case 0x4:return void this[_0xaa4da6(0x4d4)]();default:return;}}},{'key':_0xea9a0b(0x396),'value':function(_0x7dffa7){var _0x494d32=_0xea9a0b,_0x4baac6,_0x28620e,_0x33d7b9=this;0x4!=this[_0x494d32(0x3d9)]&&null!=_0x7dffa7&&(this[_0x494d32(0x3d4)]===_0x7dffa7['timestamp']&&(this[_0x494d32(0x329)]=!0x0),null!=this[_0x494d32(0x3df)]&&(this[_0x494d32(0x3df)][_0x494d32(0x46a)](_0x7dffa7),null!==this['displayFrameInfoCB']&&this[_0x494d32(0x4e5)](_0x7dffa7['timestamp']),(this[_0x494d32(0x2fb)]||this['getImageBMP']||this[_0x494d32(0x279)]||this[_0x494d32(0x1e1)])&&(this[_0x494d32(0x455)]===_0x7dffa7['displayWidth']&&this[_0x494d32(0x436)]==_0x7dffa7[_0x494d32(0x436)]||(this[_0x494d32(0x455)]=_0x7dffa7['displayWidth'],this['displayHeight']=_0x7dffa7['displayHeight'],this[_0x494d32(0x39a)]=this[_0x494d32(0x455)]*this[_0x494d32(0x436)]*0x3/0x2),_0x4baac6=new Uint8Array(this[_0x494d32(0x39a)]),_0x28620e=_0x7dffa7[_0x494d32(0x32a)],_0x7dffa7['copyTo'](_0x4baac6)[_0x494d32(0x39e)](function(){_0x33d7b9['postImageData'](_0x4baac6,_0x28620e);})),this['firstFrame']&&(null!=this[_0x494d32(0x4c3)]?null!=this['player'][_0x494d32(0x2dc)]&&this[_0x494d32(0x4c3)]['FFCallBackFun']():postMessage({'function':'firstFrameCB','value':!0x0}),this['firstFrame']=!0x1)));}},{'key':_0xea9a0b(0x4e5),'value':function(_0x445787){var _0x372813=_0xea9a0b;if(0x0!=this[_0x372813(0x4b1)]['length']&&this[_0x372813(0x360)][_0x372813(0x37a)]!==_0x445787){for(var _0x3ded74={},_0x34ce27=0x0;_0x34ce27<this[_0x372813(0x4b1)][_0x372813(0x4f1)]&&(_0x3ded74=this[_0x372813(0x4b1)][_0x372813(0x21b)]())['timeStamp']!=_0x445787;_0x34ce27++);this[_0x372813(0x360)][_0x372813(0x3c6)]=_0x3ded74[_0x372813(0x3c6)],this[_0x372813(0x360)]['codecType']=_0x3ded74[_0x372813(0x272)],this[_0x372813(0x360)]['frameType']=_0x3ded74[_0x372813(0x3fd)],this[_0x372813(0x360)][_0x372813(0x495)]=_0x3ded74['frameSize'],this[_0x372813(0x360)][_0x372813(0x36f)]=_0x3ded74[_0x372813(0x36f)],this['curFrameInfo']['height']=_0x3ded74[_0x372813(0x483)],this['curFrameInfo'][_0x372813(0x37a)]=_0x3ded74[_0x372813(0x37a)],this[_0x372813(0x360)]['frameRate']=_0x3ded74[_0x372813(0x4d9)],this[_0x372813(0x360)][_0x372813(0x1dc)]=_0x3ded74[_0x372813(0x1dc)],this['curFrameInfo'][_0x372813(0x50a)]=_0x3ded74[_0x372813(0x50a)],this[_0x372813(0x360)][_0x372813(0x2c4)]=_0x3ded74[_0x372813(0x2c4)],this['curFrameInfo'][_0x372813(0x46d)]=_0x3ded74[_0x372813(0x46d)],this['curFrameInfo'][_0x372813(0x2fd)]=_0x3ded74[_0x372813(0x2fd)],this[_0x372813(0x360)]['cropTop']=_0x3ded74[_0x372813(0x2ba)],this[_0x372813(0x360)][_0x372813(0x268)]=_0x3ded74[_0x372813(0x268)],this[_0x372813(0x360)][_0x372813(0x321)]=_0x3ded74[_0x372813(0x321)],this[_0x372813(0x360)]['month']=_0x3ded74[_0x372813(0x3e1)],this[_0x372813(0x360)][_0x372813(0x451)]=_0x3ded74[_0x372813(0x451)],this[_0x372813(0x360)][_0x372813(0x3cd)]=_0x3ded74[_0x372813(0x3cd)],this[_0x372813(0x360)][_0x372813(0x2d4)]=_0x3ded74[_0x372813(0x2d4)],this[_0x372813(0x360)][_0x372813(0x3f9)]=_0x3ded74[_0x372813(0x3f9)],this[_0x372813(0x360)][_0x372813(0x430)]=_0x3ded74[_0x372813(0x430)],this[_0x372813(0x360)][_0x372813(0x465)]=_0x3ded74[_0x372813(0x465)],this[_0x372813(0x52d)](this['curFrameInfo']);}}},{'key':_0xea9a0b(0x342),'value':function(_0x3b6eb6,_0x3d131d){var _0x262edd=_0xea9a0b;this[_0x262edd(0x4c3)]?(this[_0x262edd(0x2fb)]&&(this[_0x262edd(0x2fb)]=!0x1,this[_0x262edd(0x4c3)][_0x262edd(0x2df)](_0x3b6eb6,this[_0x262edd(0x39a)],this[_0x262edd(0x455)],this[_0x262edd(0x436)],_0x262edd(0x529),_0x3d131d,0x0,0x0,0x0,0x0)),this[_0x262edd(0x4fa)]&&(this['getImageBMP']=!0x1,this[_0x262edd(0x4c3)][_0x262edd(0x2df)](_0x3b6eb6,this['yuvLength'],this[_0x262edd(0x455)],this['displayHeight'],'bmp',_0x3d131d,0x0,0x0,0x0,0x0)),this[_0x262edd(0x279)]&&(this[_0x262edd(0x279)]=!0x1,this['player'][_0x262edd(0x2df)](_0x3b6eb6,this[_0x262edd(0x39a)],this[_0x262edd(0x455)],this['displayHeight'],_0x262edd(0x529),_0x3d131d,this['sx'],this['sy'],this['sw'],this['sh'])),this[_0x262edd(0x1e1)]&&(this[_0x262edd(0x1e1)]=!0x1,this['player']['_GetImage2'](_0x3b6eb6,this['yuvLength'],this[_0x262edd(0x455)],this['displayHeight'],_0x262edd(0x317),_0x3d131d,this['sx'],this['sy'],this['sw'],this['sh']))):(this[_0x262edd(0x2fb)]&&(this['getImageJPEG']=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6[_0x262edd(0x3b1)],'size':this[_0x262edd(0x39a)],'width':this[_0x262edd(0x455)],'height':this['displayHeight'],'type':'jpeg','yuvType':_0x3d131d,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x3b6eb6[_0x262edd(0x3b1)]])),this['getImageBMP']&&(this[_0x262edd(0x4fa)]=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6[_0x262edd(0x3b1)],'size':this['yuvLength'],'width':this['displayWidth'],'height':this[_0x262edd(0x436)],'type':_0x262edd(0x317),'yuvType':_0x3d131d,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x3b6eb6[_0x262edd(0x3b1)]])),this[_0x262edd(0x279)]&&(this[_0x262edd(0x279)]=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6['buffer'],'size':this[_0x262edd(0x39a)],'width':this[_0x262edd(0x455)],'height':this['displayHeight'],'type':_0x262edd(0x529),'yuvType':_0x3d131d,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x3b6eb6['buffer']])),this[_0x262edd(0x1e1)]&&(this['getCropImageBMP']=!0x1,postMessage({'function':_0x262edd(0x3f5),'value':_0x3b6eb6['buffer'],'size':this[_0x262edd(0x39a)],'width':this[_0x262edd(0x455)],'height':this[_0x262edd(0x436)],'type':_0x262edd(0x317),'yuvType':_0x3d131d,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x3b6eb6[_0x262edd(0x3b1)]])));}},{'key':_0xea9a0b(0x304),'value':function(){var _0x5b4c7a=_0xea9a0b,_0x3af6b5=this;if(0x1==this[_0x5b4c7a(0x2ae)]){if(this['frameBuffers']['length']<0x2)return null;}else{if(this[_0x5b4c7a(0x1fb)][_0x5b4c7a(0x4f1)]<0x1)return null;}if(!this['curFrameIsDisplay'])return this[_0x5b4c7a(0x390)]=!0x0,this[_0x5b4c7a(0x1fb)][0x0];{if(null!=this[_0x5b4c7a(0x402)]&&(this[_0x5b4c7a(0x1fb)][_0x5b4c7a(0x21b)]()[_0x5b4c7a(0x493)](),this[_0x5b4c7a(0x402)][_0x5b4c7a(0x493)](),this['chosenFrame']=null),!this[_0x5b4c7a(0x3d5)][_0x5b4c7a(0x2e4)])return this['frameBuffers']['length']<0x1?null:this[_0x5b4c7a(0x1fb)][0x0];this['oVideoDecoder'][_0x5b4c7a(0x3b7)]()['then'](function(){var _0x4256dc=_0x5b4c7a;return _0x3af6b5[_0x4256dc(0x3d5)][_0x4256dc(0x2e4)]=!0x1,null;},function(){return null;});}}},{'key':'SetDisplayRegion','value':function(_0x1e036b,_0x5536fe,_0x1ab49a,_0x16bcc0){var _0x2c9369=_0xea9a0b;return null==this['oVideoRender']?0x0:(this['sx']=_0x1e036b,this['sy']=_0x5536fe,this['sw']=_0x1ab49a,this['sh']=_0x16bcc0,this[_0x2c9369(0x3df)][_0x2c9369(0x355)](_0x1e036b,_0x5536fe,_0x1ab49a,_0x16bcc0));}},{'key':'SetCurStatus','value':function(_0x27b202){this['renderCurStatus']=_0x27b202;}},{'key':_0xea9a0b(0x3a4),'value':function(){var _0x4b8a4a=_0xea9a0b,_0x437f9f=this['_GetFastSpeed'](this['nplaySpeed']);return this[_0x4b8a4a(0x48a)](_0x437f9f);}},{'key':_0xea9a0b(0x536),'value':function(){var _0x3d5697=_0xea9a0b,_0xe47372=this[_0x3d5697(0x492)](this[_0x3d5697(0x36b)]);return this[_0x3d5697(0x48a)](_0xe47372);}},{'key':_0xea9a0b(0x1d2),'value':function(_0x118a98){var _0x1a08d4=_0xea9a0b;if(_0x118a98)this[_0x1a08d4(0x3b2)](0x3);else{if(0x3!==this[_0x1a08d4(0x23f)])return-0x1;this['SetCurStatus'](0x2),this[_0x1a08d4(0x329)]=!0x0;}return 0x1;}},{'key':'_refresh','value':function(){var _0x4e609d=_0xea9a0b;0x0!=this[_0x4e609d(0x1fb)][_0x4e609d(0x4f1)]&&this['paint'](this[_0x4e609d(0x1fb)][0x0]);}},{'key':_0xea9a0b(0x419),'value':function(_0x12dbd8){var _0x5884f6=_0xea9a0b;if(_0x12dbd8)this[_0x5884f6(0x3b2)](0x5),this[_0x5884f6(0x3b8)]=!0x0;else{if(0x5!==this[_0x5884f6(0x23f)])return-0x1;this[_0x5884f6(0x3b2)](0x2),this['resetTimer']=!0x0,this[_0x5884f6(0x3b8)]=!0x1,this[_0x5884f6(0x48a)](0x1);}return 0x1;}},{'key':_0xea9a0b(0x4b7),'value':function(_0x2dbc59,_0xce39a4){var _0x4402be=_0xea9a0b;return null!=this[_0x4402be(0x3df)]&&this['oVideoRender'][_0x4402be(0x4b7)](_0x2dbc59,_0xce39a4);}},{'key':_0xea9a0b(0x286),'value':function(){var _0x201fe7=_0xea9a0b;return null!=this[_0x201fe7(0x3df)]&&this[_0x201fe7(0x3df)][_0x201fe7(0x286)]();}},{'key':_0xea9a0b(0x417),'value':function(){var _0x5d0e83=_0xea9a0b;return this[_0x5d0e83(0x31d)];}},{'key':_0xea9a0b(0x48a),'value':function(_0x275baf){var _0x3287b8=_0xea9a0b;switch(_0x275baf){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x275baf!==this[_0x3287b8(0x36b)]&&(this[_0x3287b8(0x36b)]=_0x275baf,this[_0x3287b8(0x439)]=0x0<_0x275baf?_0x275baf:-0x1/_0x275baf,console[_0x3287b8(0x514)](_0x3287b8(0x349)+this[_0x3287b8(0x439)]),this[_0x3287b8(0x329)]=!0x0,this[_0x3287b8(0x3b8)]=!0x1,0x2!=this[_0x3287b8(0x23f)]&&this[_0x3287b8(0x3b2)](0x2)),0x1;}},{'key':_0xea9a0b(0x3f8),'value':function(_0x145035){var _0x5d2d4d=0x0;switch(_0x145035){case-0x10:_0x5d2d4d=-0x8;break;case-0x8:_0x5d2d4d=-0x4;break;case-0x4:_0x5d2d4d=-0x2;break;case-0x2:_0x5d2d4d=0x1;break;case 0x1:_0x5d2d4d=0x2;break;case 0x2:_0x5d2d4d=0x4;break;case 0x4:_0x5d2d4d=0x8;break;case 0x8:_0x5d2d4d=0x10;break;case 0x10:_0x5d2d4d=0x20;break;case 0x20:_0x5d2d4d=0x40;break;default:_0x5d2d4d=0x0;}return _0x5d2d4d;}},{'key':_0xea9a0b(0x492),'value':function(_0x187aa1){var _0x2748d1=0x0;switch(_0x187aa1){case-0x8:_0x2748d1=-0x10;break;case-0x4:_0x2748d1=-0x8;break;case-0x2:_0x2748d1=-0x4;break;case 0x1:_0x2748d1=-0x2;break;case 0x2:_0x2748d1=0x1;break;case 0x4:_0x2748d1=0x2;break;case 0x8:_0x2748d1=0x4;break;case 0x10:_0x2748d1=0x8;break;case 0x20:_0x2748d1=0x10;break;case 0x40:_0x2748d1=0x20;break;default:_0x2748d1=0x0;}return _0x2748d1;}},{'key':_0xea9a0b(0x2b8),'value':function(_0x36ab92){var _0x5cdd52=_0xea9a0b;return this[_0x5cdd52(0x3fe)]=_0x36ab92,0x1;}},{'key':_0xea9a0b(0x3be),'value':function(){var _0x48423f=_0xea9a0b;return this[_0x48423f(0x2fb)]=!0x0,this['getImageType']=_0x48423f(0x529),0x1;}},{'key':_0xea9a0b(0x40a),'value':function(){var _0xdf5952=_0xea9a0b;return this['getImageBMP']=!0x0,this[_0xdf5952(0x2b0)]=_0xdf5952(0x317),0x1;}},{'key':'GetCropJPEG','value':function(){var _0x13bd51=_0xea9a0b;return this[_0x13bd51(0x279)]=!0x0,this['getImageType']='Cropjpeg',0x1;}},{'key':'GetCropBMP','value':function(){var _0x227fef=_0xea9a0b;return this[_0x227fef(0x1e1)]=!0x0,this[_0x227fef(0x2b0)]='Cropbmp',0x1;}},{'key':_0xea9a0b(0x534),'value':function(_0x28b7b1){var _0x59e2cf=_0xea9a0b;return this[_0x59e2cf(0x3d4)]=_0x28b7b1,0x1;}},{'key':_0xea9a0b(0x49c),'value':function(){var _0x29ca06=_0xea9a0b;return this[_0x29ca06(0x3d5)][_0x29ca06(0x49c)](),0x1;}},{'key':'SetAntialias','value':function(_0x1233e9){var _0x366f21=_0xea9a0b;return null!=this[_0x366f21(0x3df)]?this[_0x366f21(0x3df)][_0x366f21(0x41f)](_0x1233e9):0x0;}},{'key':_0xea9a0b(0x427),'value':function(_0x4999e8,_0x37b739){var _0x368bd9=_0xea9a0b;return this[_0x368bd9(0x52d)]=_0x37b739?_0x4999e8:null,0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x384d1b){var _0x5bb786=_0xea9a0b;return'2d'===this[_0x5bb786(0x2c7)]||'2D'===this[_0x5bb786(0x2c7)]?(console[_0x5bb786(0x514)](_0x5bb786(0x2d8),'color:red'),0x0):null!=this[_0x5bb786(0x3df)]?this[_0x5bb786(0x3df)][_0x5bb786(0x2bf)](_0x384d1b):0x0;}},{'key':'FEC_ResetCorrectType','value':function(_0x536d6d,_0x5449e1,_0x29ecc8){var _0x4ac92b=_0xea9a0b;return'2d'===this[_0x4ac92b(0x2c7)]||'2D'===this[_0x4ac92b(0x2c7)]?(console[_0x4ac92b(0x514)](_0x4ac92b(0x2d8),_0x4ac92b(0x4cf)),0x0):null!=this['oVideoRender']?this['oVideoRender'][_0x4ac92b(0x49a)](_0x536d6d,_0x5449e1,_0x29ecc8):0x0;}},{'key':'FEC_GetPort','value':function(_0x2f4e33,_0x11e80b){var _0x21d93d=_0xea9a0b;return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log'](_0x21d93d(0x2d8),'color:red'),0x0):null!=this['oVideoRender']?this[_0x21d93d(0x3df)]['FEC_GetPort'](_0x2f4e33,_0x11e80b):0x0;}},{'key':_0xea9a0b(0x4e0),'value':function(_0x568f9b){var _0xcefcda=_0xea9a0b;return'2d'===this[_0xcefcda(0x2c7)]||'2D'===this[_0xcefcda(0x2c7)]?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct',_0xcefcda(0x4cf)),0x0):null!=this[_0xcefcda(0x3df)]?this[_0xcefcda(0x3df)][_0xcefcda(0x4e0)](_0x568f9b):0x0;}},{'key':_0xea9a0b(0x362),'value':function(_0x4ba09b,_0x283978){var _0x202c08=_0xea9a0b;return'2d'===this[_0x202c08(0x2c7)]||'2D'===this[_0x202c08(0x2c7)]?(console[_0x202c08(0x514)](_0x202c08(0x2d8),_0x202c08(0x4cf)),0x0):null!=this[_0x202c08(0x3df)]?this['oVideoRender'][_0x202c08(0x362)](_0x4ba09b,_0x283978):0x0;}},{'key':_0xea9a0b(0x4b6),'value':function(_0x34cd97,_0x373ca6,_0x18c2d3){var _0x529723=_0xea9a0b;return'2d'===this[_0x529723(0x2c7)]||'2D'===this[_0x529723(0x2c7)]?(console[_0x529723(0x514)](_0x529723(0x2d8),_0x529723(0x4cf)),0x0):null!=this[_0x529723(0x3df)]?this[_0x529723(0x3df)][_0x529723(0x4b6)](_0x34cd97,_0x373ca6,_0x18c2d3):0x0;}},{'key':_0xea9a0b(0x22e),'value':function(_0x196177,_0x2827e7){var _0x20c1df=_0xea9a0b;return'2d'===this[_0x20c1df(0x2c7)]||'2D'===this[_0x20c1df(0x2c7)]?(console[_0x20c1df(0x514)](_0x20c1df(0x2d8),_0x20c1df(0x4cf)),0x0):null!=this[_0x20c1df(0x3df)]?this[_0x20c1df(0x3df)][_0x20c1df(0x22e)](_0x196177,_0x2827e7):0x0;}},{'key':_0xea9a0b(0x281),'value':function(_0x47c68c,_0x68e551){var _0x595882=_0xea9a0b;return'2d'===this[_0x595882(0x2c7)]||'2D'===this[_0x595882(0x2c7)]?(console['log'](_0x595882(0x2d8),'color:red'),0x0):null!=this[_0x595882(0x3df)]?this[_0x595882(0x3df)]['FEC_SetWnd'](_0x47c68c,_0x68e551):0x0;}},{'key':'FEC_Disable','value':function(_0x16811c,_0xd2488b,_0x4f7c73){var _0x3d73e2=_0xea9a0b;return'2d'===this[_0x3d73e2(0x2c7)]||'2D'===this[_0x3d73e2(0x2c7)]?(console[_0x3d73e2(0x514)]('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct',_0x3d73e2(0x4cf)),0x0):null!=this['oVideoRender']?this[_0x3d73e2(0x3df)][_0x3d73e2(0x3ed)](_0x16811c,_0xd2488b,_0x4f7c73):0x0;}},{'key':'FEC_DelPort','value':function(_0xbdf370){var _0x2a2289=_0xea9a0b;return'2d'===this['renderEngine']||'2D'===this[_0x2a2289(0x2c7)]?(console[_0x2a2289(0x514)](_0x2a2289(0x2d8),'color:red'),0x0):null!=this[_0x2a2289(0x3df)]?this[_0x2a2289(0x3df)][_0x2a2289(0x3fb)](_0xbdf370):0x0;}},{'key':_0xea9a0b(0x544),'value':function(_0x30b6ba,_0x2ff878,_0x11104e,_0x4fd018,_0x85a955,_0x119c7d,_0x568b0b){var _0x5569dd=_0xea9a0b;return'2d'===this[_0x5569dd(0x2c7)]||'2D'===this['renderEngine']?(console[_0x5569dd(0x514)]('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct',_0x5569dd(0x4cf)),0x0):null!=this[_0x5569dd(0x3df)]?this[_0x5569dd(0x3df)][_0x5569dd(0x544)](_0x30b6ba,_0x2ff878,_0x11104e,_0x4fd018,_0x85a955,_0x119c7d,_0x568b0b):0x0;}},{'key':_0xea9a0b(0x40e),'value':function(_0xcbb05,_0x481dd8){var _0x5951c0=_0xea9a0b;return'2d'===this[_0x5951c0(0x2c7)]||'2D'===this['renderEngine']?(console['log'](_0x5951c0(0x2d8),_0x5951c0(0x4cf)),0x0):null!=this['oVideoRender']?this[_0x5951c0(0x3df)][_0x5951c0(0x40e)](_0xcbb05,_0x481dd8):0x0;}}]),_0x24ab98;}())(),self[_0x99d5a2(0x266)]=function(_0x4a7850){var _0x4e129c=_0x99d5a2,_0x7023b=_0x4a7850[_0x4e129c(0x39d)];switch(_0x7023b[_0x4e129c(0x429)]){case _0x4e129c(0x462):_0x95cd63[_0x4e129c(0x462)](_0x7023b[_0x4e129c(0x42d)],_0x7023b[_0x4e129c(0x2ae)],_0x7023b[_0x4e129c(0x4b5)],_0x7023b[_0x4e129c(0x2c7)]);break;case _0x4e129c(0x2cd):var _0x215010=new Uint8Array(_0x7023b[_0x4e129c(0x41a)]),_0x487c62=_0x7023b[_0x4e129c(0x2fc)];_0x95cd63[_0x4e129c(0x2cd)](_0x215010,_0x487c62),0x0;break;case _0x4e129c(0x433):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),_0x95cd63['SetDisplayRegion'](_0x7023b['sx'],_0x7023b['sy'],_0x7023b['sw'],_0x7023b['sh']);break;case'stop':null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),_0x95cd63[_0x4e129c(0x3b2)](0x4);let _0x546ac0=setInterval(()=>{var _0x4f30b8=_0x4e129c;_0x95cd63[_0x4f30b8(0x248)]||(_0x95cd63=null,self[_0x4f30b8(0x4ab)]({'function':'stop'}),clearInterval(_0x546ac0),_0x546ac0=null,self[_0x4f30b8(0x493)](),console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x95cd63&&self['postMessage']({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x3a4)]()&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x4ba)});break;case'slow':null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x536)]()&&self[_0x4e129c(0x4ab)]({'function':'paraError'});break;case _0x4e129c(0x2b8):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x2b8)](_0x7023b[_0x4e129c(0x38a)])&&self[_0x4e129c(0x4ab)]({'function':'paraError'});break;case'Pause':null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63['Pause'](_0x7023b[_0x4e129c(0x38a)])&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x4ba)});break;case _0x4e129c(0x419):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x419)](_0x7023b['value'])&&self['postMessage']({'function':'paraError'});break;case _0x4e129c(0x4b7):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x4b7)](_0x7023b[_0x4e129c(0x36f)],_0x7023b[_0x4e129c(0x483)])&&self['postMessage']({'function':_0x4e129c(0x4ba)});break;case _0x4e129c(0x286):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x399)}),0x1!==_0x95cd63[_0x4e129c(0x286)]()&&self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x4ba)});break;case _0x4e129c(0x417):null===_0x95cd63&&self[_0x4e129c(0x4ab)]({'function':'OrderError'}),_0x215010=_0x95cd63[_0x4e129c(0x417)](),0x0!==_0x215010&&self[_0x4e129c(0x4ab)]({'function':'GetPlayedTime','value':_0x215010});break;case _0x4e129c(0x35b):_0x95cd63['SetCurStatus'](0x0);break;case _0x4e129c(0x3be):_0x95cd63['GetJPEG']();break;case _0x4e129c(0x40a):_0x95cd63[_0x4e129c(0x40a)]();break;case _0x4e129c(0x393):_0x95cd63[_0x4e129c(0x393)]();break;case _0x4e129c(0x464):_0x95cd63[_0x4e129c(0x464)]();break;case'SetDecodeFrameType':_0x95cd63[_0x4e129c(0x534)](_0x7023b[_0x4e129c(0x264)]);break;case _0x4e129c(0x2c4):_0x95cd63[_0x4e129c(0x49c)]();break;case _0x4e129c(0x41f):_0x95cd63[_0x4e129c(0x41f)](_0x7023b[_0x4e129c(0x38a)]);break;case _0x4e129c(0x427):_0x95cd63['SetFrameInfoCallBack'](_0x29c143=>{var _0x3a09fa=_0x4e129c;self[_0x3a09fa(0x4ab)]({'function':_0x3a09fa(0x427),'curFrameInfo':_0x29c143});},_0x7023b[_0x4e129c(0x38a)]);case'FEC_SetCanvasID':_0x95cd63['FEC_SetCanvasID'](_0x7023b[_0x4e129c(0x280)]);break;case _0x4e129c(0x3a5):_0x95cd63[_0x4e129c(0x49a)](_0x7023b[_0x4e129c(0x370)],_0x7023b['placeType'],_0x7023b[_0x4e129c(0x2e0)]);break;case _0x4e129c(0x363):_0x95cd63[_0x4e129c(0x20d)](_0x7023b[_0x4e129c(0x3a1)],_0x7023b[_0x4e129c(0x2e0)]);break;case _0x4e129c(0x53f):_0x95cd63[_0x4e129c(0x4e0)](_0x7023b['fishSubPort']);break;case _0x4e129c(0x3f6):_0x95cd63[_0x4e129c(0x362)](_0x7023b[_0x4e129c(0x370)],_0x7023b['param2d']);break;case _0x4e129c(0x2a9):_0x95cd63[_0x4e129c(0x4b6)](_0x7023b['fishSubPort'],_0x7023b[_0x4e129c(0x49e)],_0x7023b[_0x4e129c(0x47c)]);break;case _0x4e129c(0x358):_0x487c62=_0x95cd63[_0x4e129c(0x22e)](_0x7023b[_0x4e129c(0x370)],_0x7023b[_0x4e129c(0x49e)]),self[_0x4e129c(0x4ab)]({'function':_0x4e129c(0x358),'fValue':_0x487c62});break;case'FECSetWnd':_0x95cd63[_0x4e129c(0x281)](_0x7023b['fishSubPort'],_0x7023b['offscrrenCnv']);break;case _0x4e129c(0x530):_0x95cd63[_0x4e129c(0x3ed)](_0x7023b['fishSubPort'],_0x7023b[_0x4e129c(0x28a)],_0x7023b[_0x4e129c(0x4aa)]);break;case _0x4e129c(0x51b):_0x95cd63[_0x4e129c(0x3fb)](_0x7023b[_0x4e129c(0x370)]);break;case _0x4e129c(0x42b):_0x95cd63['FEC_SetDisplayRegion'](_0x7023b[_0x4e129c(0x370)],_0x7023b[_0x4e129c(0x50c)],_0x7023b[_0x4e129c(0x491)],_0x7023b['sx'],_0x7023b['sy'],_0x7023b['sw'],_0x7023b['sh']);break;case'FECSetBackCilling':_0x95cd63[_0x4e129c(0x40e)](_0x7023b['fishSubPort'],_0x7023b[_0x4e129c(0x52f)]);}};})());})()));function a0_0xd9f6(){var _0x382391=['fPTZX','regionSy','bOrtho','curstatus','fRotateX','DeInit','Missing_Module','bCullBack','Invalid_Opcode','oVideoRender','fSinV','month','Get_Char_Index','GetFishParam','num_faces','SR_Init','done','CLAMP_TO_EDGE','Generator\\x20is\\x20already\\x20running','create','SR_ERR_FREETYPE_RESOURCE','pPTZSetColor','SR_DrawLines','FEC_Disable','bPortAllocated','position','Invalid_Argument','9876336DDWcsr','IsOutofImage','SR_DE_FISH_CYLINDER_SPLIT_CEILING','fZoom','imageYUV','FECSetParam','trunc','_GetFastSpeed','minute','bRecreateAntia','FEC_DelPort','flush','frameType','displayBuf','nCylinderPosSize','SR_GetPTZPort','DEFAULT','chosenFrame','style_flags','GetCurTime','fCosV','nSemiSphereTexSize','FECErrorCode','bindBuffer','destroyDecoder','GetBMP','GetPTZDisplayMode','fPTZY','toStringTag','FEC_SetBackCilling','bBlack','_refresh','Raster_Uninitialized','webgl2','abrupt','SR_SetDisplayRect','createTexture','bufferData','GetPlayedTime','IGNORE_TRANSFORM','OneByOne','rawData','JSPlayM4_Stop','sqrt','InitCamera','SR_DelSubPort','SetAntialias','SetNear','Invalid_Stream_Handle','mainSubPort','\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a','Raster_Corrupted','activeTexture','Out_Of_Memory','SetFrameInfoCallBack','COMPUTE_METRICS','command','DEF_In_Glyf_Bytecode','FECSetDisplayRegion','MAX','canvas','completion','arg','second','bLoop','acos','SetDisplayRegion','info','message','displayHeight','setPrototypeOf','@@iterator','playSpeed','SetOrtho','stop','Too_Many_Instruction_Defs','nBasePTZPointNum','glyph','Raster_Overflow','LINEAR_MIPMAP_NEAREST','pCylinderPos','glLinePosBuffer','\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a','FT_Init_FreeType','decodeProcess','clearBufferfi','bPTZSelected','mainCanvasID','Bbx_Too_Big','fScale','getSeconds','Invalid_CharMap_Format','264\\x20hard\\x20decoder','symbol','Invalid_Frame_Operation','JSPlayM4_ResetEnd','week','Too_Many_Function_Defs','nMaxFillBlockTriNum','bInited','displayWidth','Missing_Bitmap','nDrawFontHeight','SetPitch','deleteBuffer','RGBA','pRenderParam','SetRoll','VERTEX_SHADER','288yOchCO','regionSx','stCycleParam','PEDANTIC','init','Invalid_Face_Handle','GetCropBMP','milliseconds','Too_Many_Drivers','Invalid_Stream_Read','configured','fRXRight','DisplayFrame','emEffect','pfuncCBOut','cropLeft','Unlisted_Object','HardDecodeError','nBlockShaderProgram','Could_Not_Find_Context','Raster_Negative_Height','Invalid_Library_Handle','Cannot_Open_Stream','getShaderInfoLog','ascender','nValidSubPort','fLeft','uniformMatrix4fv','Invalid_CharMap_Handle','pRectPoints','fValue','FT_Get_Kerning','method','oVideoHandle','GetPitch','Invalid_Glyph_Format','deleteProgram','height','GetScale','SR_AddSubPort','GetFishPTZFloor','BLEND','FreetypeWasmLoadedCB','fRadiusTop','_SetPlaySpeed','Invalid_Glyph_Index','23456990eUZFpy','context','decoderObj','onload','GetPanoPTZFloor','regionNum','_GetSlowSpeed','close','Locations_Missing','frameSize','max_advance_width','JSPlayM4_Play','fAlpha','suspendedYield','FEC_ResetCorrectType','LIGHT','SetStreamEnd','SR_SetAntialias','upDateType','isGeneratorFunction','TEXTURE_WRAP_S','row','SR_SetPTZColor','fPTZParam','GetPTZPoints','bAntialias','SR_OK','mainFECCorrect','_bind','afterLoc','clearContext','postMessage','root','GetDisplayEffect','Invalid_Table','Render_Glyph','Set_Char_Size','displayFrameInfo','SR_Destroy','processData1','TEXTURE_MAG_FILTER','sab','FEC_SetViewParam','SetCanvasSize','\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a}\\x0a','createShader','paraError','canvas\\x20width:','nPTZRectNum','complete','4516myHmdm','SR_DE_FISH_PTZ_WALL','pCylinderTex','Invalid_Composite','SR_DE_FISH_PTZ_FLOOR','player','bRecreateTex','reportError','bBackground','ReleaseDisplay','SR_SetViewParam','SR_DE_FISH_SPHERE','NO_AUTOHINT','FT_Render_Glyph','codedHeight','Load_Char','depthFunc','color:red','Too_Many_Hints','getMinutes','configure','Corrupted_Font_Glyphs','_destroyPlayCtrl','pUserOut','enDisplayEffect','ComputePTZPoints','formatVideoDecoderConfigure','frameRate','NORMAL','%c\\x2020230516\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','SR_DE_FISH_CYLINDER_CEILING','SR_DE_FISH_PLANET','stFishEyeManager','getProgramInfoLog','FEC_Enable','prev','GetPanoPTZWall','SR_ERR_CANVAS','script','respondFrameInfoCB','getHours','UpdateCircyeParam','InitFECParam','regeneratorRuntime','Invalid_Stream_Seek','webgl','FT_Get_Char_Index','fRY2','texture','fNear','SR_SetFishParam','length','FLOAT','GetPlaceType','Post_Table_Missing','SR_DE_FISH_PANORAMA_CEILING_180','apply','NO_SCALE','nCylinderTexSize','SR_DE_FISH_CYLINDER_SPLIT_FLOOR','getImageBMP','__esModule','glLineClrBuffer','async','bInit','webgl\\x20render','next','FECShowMode','frameDisplayWidth','GetRenderParam','bitmap','arrayBuffer','\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','JSPlayM4_SetDecodeEngine','Cannot_Render_Glyph','firstFrame','interlace','glBlockClrBuffer','type','fPTZZoom','hardDecode\\x20reportError:','pstFontColor','GetPointPano2FishFloor','SR_GetFishParam','\\x0aattribute\\x20vec3\\x20xy;\\x0aattribute\\x20vec2\\x20uv;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20gl_Position\\x20=\\x20vec4(xy,\\x201.0);\\x0a\\x20\\x20//\\x20Map\\x20vertex\\x20coordinates\\x20(-1\\x20to\\x20+1)\\x20to\\x20UV\\x20coordinates\\x20(0\\x20to\\x201).\\x0a\\x20\\x20//\\x20UV\\x20coordinates\\x20are\\x20Y-flipped\\x20relative\\x20to\\x20vertex\\x20coordinates.\\x0a\\x20\\x20//v_uv\\x20=\\x20vec2((1.0\\x20+\\x20xy.x)\\x20/\\x202.0,\\x20(1.0\\x20-\\x20xy.y)\\x20/\\x202.0);\\x0a\\x20\\x20v_uv\\x20=\\x20uv;\\x0a}\\x0a','bBackGround','log','__proto__','nSurfaceTexture','5769620COWrYT','LINEAR_DESIGN','FEC_ERR_ENABLED','text/javascript','FECDelPort','resolve','push','ctx','scale(1)','pstFontBGLines','style_name','GetView','GetPointFish2PanoCeiling','SetPTZDisplayMode','ComputeAngleHorizontal','TRIANGLES','createProgram','fVAngleSin','jpeg','drawArrays','decoderCurStatus','SetPTZColor','displayFrameInfoCB','vertexPosBuffer','bValue','FECDisable','[object\\x20Generator]','prototype','GetPTZPort','SetDecodeFrameType','Library:init\\x20','slow','FT_Load_Char','nPanoPTZPointNum','nSubPort','nSemiSpherePosSize','resultName','underflow','texturePosBuffer','FreetypeLibHandle','FECEnable','nMaxPointNum','ready_frames','fill','key','FEC_SetDisplayRegion','prefer-software','COLOR_BUFFER_BIT','SR_GetCanvasSize','GetPointPano2FishWall','underline_position','subarray','fPTZPositionY','default','disable','Module','Invalid_Slot_Handle','SR_SetCallBack','fWideScanOffset','Invalid_Frame_Read','Pause','startTime','TEXTURE_MIN_FILTER','FORCE_AUTOHINT','matProj','Stack_Underflow','body','GetPointPano2FishCeiling','NONE','>>>JS\\x2001\\x20destroy\\x20decoderObj','frameNum','IsPortAllocated','nFontWidth','lastDate','bbox','getCropImageBMP','fHAngleSin','sCanvasID','experimental-webgl','emCorrectType','abs','tryEntries','Too_Few_Arguments','videoShaderProgram','354880YIvBTM','GetFishPTZCeiling','hardwareAcceleration','UpdatePTZPosition','pFishParam','vecUp','LCD','GeneratorFunction','onlySupportedWebGL1','Library:done\\x20','Missing_Fontboundingbox_Field','nCut','GetPTZColor','matView','fRX1','BITMAP_METRICS_ONLY','preTimerStamp','frameBuffers','needRect','SR_ERR_FREETYPE_INIT','nDisplayEffect','getAttribLocation','rval','dispatchException','sin','SR_ERR_PARAM','Too_Many_Extensions','nLineWidth','regionSh','ComputeAngleVertical','SR_DE_FISH_PANORAMA_CEILING_360','nStreamEnd','LINEAR','COMPOSITE','sent','FEC_GetPort','GetTimerWalk','Name_Table_Missing','SetYaw','num_glyphs','regeneratorRuntime\\x20=\\x20r','InitDisplay','regionSw','bInitFreetype','nPointNum','initDecoder','getShaderParameter','Missing_Property','splice','shift','nOriPTZPointNum','throw','style','\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a','GetPanoPTZCeiling','%c\\x20reset\\x20hard\\x20decoder','SR_GetPTZColor','executing','SR_DE_FISH_ORIGINAL','values','_invoke','fAspect','188hshwen','pfuncCBIn','generateMipmap','UNSIGNED_BYTE','max_advance_height','pOriPTZPoints','FEC_GetViewParam','DrawPTZLines','mark','ONE_MINUS_SRC_ALPHA','pLineClrVertices','VERTICAL_LAYOUT','state','SR_SetPTZPort','your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render','exports','CULL_FACE','Missing_Startfont_Field','concatenate','Missing_Size_Field','Get_Kerning','pFillBlockClrVertices','Nested_Frame_Access','renderCurStatus','completed','hypot','Corrupted_Font_Header','isKeyFrame','Lower_Module_Version','FT_Library_Version','hasOwnProperty','forEach','displayRunning','fRadiusLeft','fTop','nAlpha','No_Unicode_Glyph_Name','getPrototypeOf','finallyLoc','RenderFrame','Library_Version','pstBGColor','pUserIn','Invalid_Stream_Skip',',height:','output','defineProperty','timerReset','toString','DrawFillBlock','GetProj','NO_RECURSE','decodeQueueSize','Divide_By_Zero','GetFishPTZWALL','fHAngleCos','nFishParamType','Invalid_Pixel_Size','scale(0.2)','blendFunc','timestamp','fCosH','onmessage','SR_DrawLinesEx','cropBottom','src','pString','emPlaceType','return','SetScale','Code_Overflow','SR_DE_FISH_ARCSPHERE_VERTICAL_WALL','nWndPort','uniform1f','codecType','fBeta','decoderOutSuccess','SRC_ALPHA','GetFECPort',',frameRate:','Done_Face','getCropImageJPEG','charCodeAt','bitmap_top','%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','texImage2D','fRXLeft','ENDF_In_Exec_Stream','canvasID','FEC_SetWnd','Invalid_Reference','drawImage',',state:','GetPTZRectange','GetCanvasSize','2d\\x20render','useProgram','GetWndPort','clearFECCanvas','slice','UpdateRangeParam','SR_Draw','underline_thickness','linkProgram','delegate','Invalid_Version','pFishParamManager','BITMAP','undefined','Table_Missing','stop\\x20failed\\x20','loadWasm','Stack_Overflow','fVAngleCos','iterator','bUsed','glLineTexBuffer','ADVANCE_ONLY','nFECPort','clearDecoderObjBuffer','CMap_Table_Missing','curTime','nFontHeight','fRotateY','@@asyncIterator','Missing_Chars_Field','pFontColorBuffer','pLinePosVertices','4zRxQyx','FECSetViewParam','COMPILE_STATUS','SR_GetViewParam','IsInImage','only\\x20support\\x20webgl1','streamOpenMode','texParameteri','getImageType','Nested_DEFS','getContext','CompileProgram','FT_Done_FreeType','MONO','getUniformLocation','SR_DE_FISH_PTZ_CEILING','SetDisplayBuf','shaderSource','cropTop','fRYTop','bFECHandle','Init_FreeType','\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20v_uv.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a','FEC_SetCanvasID','UpdateWideScanAngle','fCylinderHeight','constructor','pFontPath','streamEnd','units_per_EM','bitmap_left','renderEngine','asin','\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x09r\\x20=\\x20texture2D(texture,\\x20origin.st).r;\\x20\\x0a\\x09g\\x20=\\x20texture2D(texture,\\x20origin.st).g;\\x20\\x0a\\x09b\\x20=\\x20texture2D(texture,\\x20origin.st).b;\\x20\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a','Execution_Too_Long','processData','uniform1i','inputData','DEPTH_BUFFER_BIT','SR_ERR_CALL_ORDER','Error_String','createElement','fRight','SR_DE_FISH_PANARAMA_FLOOR_180','hour','set','Invalid_Vert_Metrics','pSemiSphereTex','%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','Invalid_File_Format','timeWalk','The\\x20iterator\\x20does\\x20not\\x20provide\\x20a\\x20\\x27throw\\x27\\x20method','FFCallBackFun','rows','codec','_GetImage2','correctType','pCamera','face_flags','SR_DE_FISH_SEMISPHERE','decoderObjNeedReset','_sent','enableVertexAttribArray','SR_SetPTZDisplayMode','viewport','fRYBottom','pSemiSpherePos','Unknown_File_Format','RENDER','9465953NilOJJ','fSinH','Invalid_Handle','0\\x200','nWndHeight','configurable','pstPoints','ARRAY_BUFFER','SR_DE_FISH_PANORAMA_FLOOR_360','nFontColorTexture','Ignore','Missing_Startchar_Field','attachShader','Invalid_Character_Code','getImageJPEG','rawDataFrameInfo','cropRight','normal','Array_Too_Large','deleteTexture','descender','stPTZParam','IsPTZSelected','chooseFrame','compileShader','bufferSubData','>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a','IGNORE_GLOBAL_ADVANCE_WIDTH','color:\\x20red','end','COLOR','unconfigured','family_name','TEXTURE0','deleteShader','bindTexture','call','nCylinderPosNum','initTimer','fAngle','LCD_V','codedWidth','bmp','Outline_Decompose','oVideoRenderHandle','getDate','nFontBGNum','Syntax_Error','curTimeStamp','_resetDecoder','decode','stPTZColor','year','Unimplemented_Feature','SetFishParam','bCut','catchLoc','fRadiusRight','FTLibrary','Invalid_Offset','resetTimer','format','hvc1.1.6.L123.00','vecCenter','FreeFECPort','NO_HINTING','SR_SetFishParamManager','bIsCapturing','InitColorList','\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20xy;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec2\\x20uv;\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20xy;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv\\x20=\\x20uv;\\x0a\\x20\\x20\\x20\\x20}\\x0a','Glyph_Too_Big','nPTZDisplayMode','break','bind','vecEye','fCylinderRadius','fBottom','STATIC_DRAW','FT_Error_String','SR_DE_FISH_PANORAMA_WALL','createBuffer','reset','Too_Many_Caches','nSemiSpherePosNum','_resetRenderTimer','postImageData','tan','nPlaceType','fFar','Horiz_Header_Missing','Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20','getProgramParameter','playSpeed:','UpdateCamera','cos','fRY1','ComputeLinePoint','FT_Done_Face','texCoord','nLineTriangleNum','GetRoll','TEXTURE_2D','preTimeStamp','CreateSemiSphere','SetDisplayRect','@@toStringTag','Done_FreeType','FECGetViewParam','appendChild','Invalid_PPem','needReset','PLOTTER','Missing_Encoding_Field','color','Cannot_Open_Resource','curFrameInfo','DEPTH_STENCIL','FEC_SetParam','FECGetPort','\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a','SBITS_ONLY','avc1.','b3DPort','FRAGMENT_SHADER','delta','LESS','nplaySpeed','FirstFrame','pstColor','SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL','width','fishSubPort','nPTZFragmentNum','CROP_BITMAP','needSetPreSoft','Hmtx_Table_Missing','SR_SetCanvasSize','subPortNum','Missing_Bbx_Field','keys','SR_DrawFont','timeStamp','SR_ERR_ALLOC_MEMORY','name','oRenderTimer','Invalid_CodeRange','nLineShaderProgram','_ConvertDisplayEffect','tryLoc','pop','glBlockPosBuffer','Invalid_Horiz_Metrics','Debug_OpCode','pstStartPos','FT_Outline_Decompose','\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20v_uv.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a','MONOCHROME','value','pFillBlockPosVertices','Invalid_Cache_Handle','SR_ERR_NOT_SUPPORT','Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!','TransformPTZRangePoints','curFrameIsDisplay','nDrawFontWidth','SR_ERR_WEBGL_RESOURCE','GetCropJPEG','fRadiusBottom','FTFace','paint','FT_Set_Pixel_Size','wrap','OrderError','yuvLength','stPTZSelect','fTheta','data','then','__await','Init','placeType','Invalid_Post_Table_Format','displayName','fast','FECResetCorrectType','SetFov','SR_SetRenderState','SR_DE_FISH_PANORAMA_FLOOR_180','SR_DE_FISH_CYLINDER_FLOOR','fRX2','pPanoPTZPoints','NO_BITMAP','enumerable','nPTZFragmentNode','SetFar','frameDisplayHeight','buffer','SetCurStatus','>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender','LINK_STATUS','TEXTURE_WRAP_T','GetPTZFragmentPoints','resetDecoder','needForward','Missing_Font_Field','fFov','pBasePTZPoints','baseTimeStamp','GetPointFish2PanoWall','GetJPEG','face_index','stFishParam','SR_DE_NULL','vertexAttribPointer','clear','pRender','nUpDateType','port','Invalid_Stream_Operation','nFontShaderProgram','Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function','SetPTZPort','DEPTH_TEST','IsValidRadiusParam','day','enable','Invalid_Post_Table','function','fPTZPositionX','your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL','1447476ftHFsH','waitIFrameTimestamp','oVideoDecoder'];a0_0xd9f6=function(){return _0x382391;};return a0_0xd9f6();}","LCD","rawDataFrameInfoBuffer","fast","log","nUser","additionDataBuffer","The iterator does not provide a 'throw' method","vertexPosBuffer","nDisplayEffect","UpdateCamera","reportError","fRadiusLeft","clearBufferfi",">>>>>yff>>> JSPlayM4_GetPort 1","JSPlayM4_SetDisplayCallBack","bindTexture","awrap","pstPoints","frameDisplayHeight","downloadAudioBeforeRenderData","fTop","JSPlayM4_SetFirstFrameCallBack","Invalid_CharMap_Format","getImageType","enable","close","SR_SetPTZDisplayMode","fill","JSPlayM4_GetVolume","ComputeAngleVertical","fRX2","_JSPlayM4_SyncToAudio","pCylinderPos",`
    attribute vec4 xy;
    attribute vec2 uv;
    varying highp vec2 v_uv;

    uniform mat4 matProj;
    uniform mat4 matView;
    void main(void) {
        gl_Position = matProj * matView * xy;
        v_uv = uv;
    }
`,">>>JS JSPlayM4_FEC_SetViewParam JSPlayM4_FEC_SetViewParam this.decodeEngine：","JSPlayM4_DisplayCallBack","SetYaw","BITMAP","PEDANTIC","abrupt","_JSPlayM4_GetFishEye2DParam","SetCanvasSize","JSPlayM4_SetRunTimeInfoCallBackEx","decoderOutSuccess","Divide_By_Zero","glyph","GetRoll","viewport","subarray","AudioBeforeDecode.data","sCanvasID","VERTEX_SHADER","Set_Char_Size","bAntialias","prefer-hardware","iFECCanvasIDLen","FECDelPort","mainFECCorrect","clonedCanvas","JSPlayM4_SyncToAudio","NoHIKHead","canvasWidth","SR_DE_FISH_CYLINDER_CEILING","inputdata malloc failed!!!","SR_ERR_FREETYPE_RESOURCE","addtionCallBackFun","bBlack","download","constructor","pCylinderTex","pJpegData","TEXTURE_MIN_FILTER","download 1 Before Decode AudioData FrameNum:","uniform1f","JSPlayM4_RunTimeInfoCallBack","SBITS_ONLY","hypot","regionSw","getElementById","resizedataURL","Invalid_Horiz_Metrics","iAudioResampleFrameNum","Module","Invalid_Stream_Read","nStreamEnd","splice","viii","interlace","transformOrigin","GetRangePoints","Invalid_Size_Handle","download 3 Before Render AudioData FrameNum:","day","JSPlayM4_IgnoreHeaderAudioDefine","style","iRatio_x","FECViewParamCB","SetDisplayRect","pString","_JSPlayM4_GetSDKVersion","fRY2","Nested_Frame_Access","JSPlayM4_GetSourceBufferRemain","SR_DE_FISH_CYLINDER_FLOOR","LINEAR","Vertex shader failed to compile: ","reverse","FFCallBackFun","3271NcoGeP","FTLibrary","SR_SetFishParam","safari","SR_DE_FISH_CYLINDER_SPLIT_CEILING","arrayBuffer","getAttribLocation","underline_position","SR_GetViewParam","rows","fRotateX","_JSPlayM4_StopSound","SR_SetCanvasSize","_JSPlayM4_SetResampleValue","TRIANGLE_FAN","IGNORE_GLOBAL_ADVANCE_WIDTH","_JSPlayM4_SetDecodeEngine","JSPlayM4_SetPrintLogFlag","JSPlayM4_GetPlayedTimeEx","pFishParamManager","SetPTZPort","fPTZZoom","timeStamp","IsPortAllocated","Stack_Overflow","iRatio_y","Init_FreeType","destroyDecoder","JSPlayM4_SetCanvasSize","ComputePTZPoints","bufferSubData","AsyncIterator","Missing_Startfont_Field","writable","GetFishParam","FECGetPort","_JSPlayM4_FEC_SetDisplayRegion","HEAPU8","runtimeCBFun","top","generateMipmap","fVAngleSin","bBackGround","hardwareAcceleration","postImageData","ADVANCE_ONLY","ComputeAngleHorizontal","upDateType","map","aInputDataBuffer","mark",">>>JS 02 destroy oVideoDecoder/oVideoRender","join","pBmpSizeData","Missing_Size_Field","_JSPlayM4_SetDisplayRegion","SampleRate","parentNode",",height:","decodeFrameType","descender","clonedCanvasParentNode","SR_DE_FISH_PANORAMA_FLOOR_360","fRXLeft","SR_DE_FISH_PTZ_FLOOR","units_per_EM","getPlayTimeCallBackFun","PLOTTER","afterLoc","JSPlayM4_FEC_SetParam",">>>>>yff>>>>> JSPlayM4_OpenStream 5:","needResetCanvasSize","pCamera","set","%c1>your browser is IE ,it does not support play without plugin","%cstart load Decoder.js time:","1018QPxUaK",`>>>VideoRender.js SR_SetRenderState failed ret：%08x
`,"jpegDataCallback","544210lIBlqT","inputDataBufferSize","startTime","%c FEC_ResetCorrectType error this canvas not play","fCylinderRadius","charCodeAt","Missing_Bitmap","setValue","bottom","_JSPlayM4_GetJPEG","_JSPlayM4_SetVolume","month","SetDisRegionRight","document","decoderObjNeedReset","SR_SetCallBack","DeInit","vecCenter",">>>JS OrderError","DrawFillBlock","exports","src","Invalid_Cache_Handle","startTimeStamp",",placeType:","sin","SetPitch","fishPort is 0 ,main canvas doesn't need call FEC_GetPort",",left:","fRight","displayName","init","regionSy","pLinePosVertices","processData","Invalid_Stream_Skip","length","displayHeight","_JSPlayM4_VideoDataToBMP","SR_ERR_WEBGL_RESOURCE","arg","Get_Char_Index","printfFlag","shaderSource","CULL_FACE","dispatchEvent","JSPlayM4_FEC_Disable","GetTimerWalk","switchDecodeFrame","Bad_Argument","FRAGMENT_SHADER","Blob","glLineClrBuffer","Invalid_Handle","_JSPlayM4_Fast","data:application/javascript,","fWideScanOffset","Invalid_Frame_Operation","bSupHardOrSoft","MSBlobBuilder","hasWebWorker","fRadiusBottom","nFontShaderProgram","SR_SetAntialias","Nested_DEFS","fRadiusTop","nplaySpeed","pstColor","Too_Many_Hints","SetAntialias","timestamp","nBlockShaderProgram","GetImage.","FECSetDisplayRegion","SR_DE_FISH_PANARAMA_FLOOR_180","resetDecoder","_JSPlayM4_FEC_SetWnd","Syntax_Error","texCoord","Name_Table_Missing","needWaitIFrame","GeneratorFunction","_JSPlayM4_SetDecCBStream","nFishParamType","_free",",canvasWidth:","iFECRatio_x","GetFishPTZFloor","Init","SR_SetFontPath","getSeconds","JSPlayM4_DecCallBack","key","bIsCapturing","JSPlayM4_SetPlayOrBackSwitchMode","FECEnable","_JSPlayM4_FEC_SetParam","fRadiusRight","curTime","TEXTURE_2D","bmpDownloadFlag","underline_thickness","value","JSPlayM4_ResetBuffer","SR_OK","GetBmp.bmp","getCropImageJPEG","dataLength","CLAMP_TO_EDGE","HardDecodeError","TEXTURE0","configured","aTotalBuffer","output","pFillBlockClrVertices",",inputSize:","firefox","preTimerStamp","nMaxPointNum","Invalid_CharMap_Handle","nLineWidth","depthFunc","completed","stCycleParam","GetPTZColor","SR_DE_FISH_ARCSPHERE_VERTICAL_WALL","FORCE_AUTOHINT","tan","DrawPTZLines","Missing_Font_Field","_stringToBytes","Invalid_PPem","iZoomNum","formatVideoDecoderConfigure","Get_Kerning","I420","_GetImage2","fPTZParam","Invalid_Glyph_Format","year","COMPILE_STATUS","GetPointPano2FishWall","GetWndPort",",top:","cropTop","JSPlayM4_AudioResampleCallBack","_JSPlayM4_GetFrameInfo","_JSPlayM4_SetDisplayCallBack","Execution_Too_Long","Cannot_Open_Stream","%c2>there will decode 265 by softDecoder","GetPTZRectange",`
    attribute vec3 position;
    attribute vec4   color;
    varying   float  pp;
    varying   vec4  colorOut;
    void main()
    {
        gl_Position = vec4(position.x, position.y, 0.0, 1.0);
        pp = position.z;
        colorOut = color;
    }
`,"name","_refresh","pFontColorBuffer","defineProperty","bPTZSelected",",upDateType:","respondFrameInfoCB","fScale","SR_ERR_PARAM","_JSPlayM4_SetANRParam","nOriPTZPointNum","Unknown_File_Format","bitmap_top","normal","IsOutofImage","color:red","SR_Draw","SetFov","fPTZY","BLEND","Glyph_Too_Big","GetFrameData","bWriteAudioResampleData","nPointNum","frameNum","bLoop","bRecreateAntia","fRotateY","_JSPlayM4_GetPort","FEC_SetParam","NONE","bbox","_JSPlayM4_SetDecodeFrameType","pRenderParam",`
    attribute vec4  position;
    attribute vec4  texCoord;
    varying vec4  pp; 

    void main()
    { 
        gl_Position.x  = position.x;
        gl_Position.y  = position.y;
        gl_Position.z  = 0.1;
        gl_Position.w  = 1.0;
        pp = texCoord; 
    }
`,"SR_DE_FISH_ORIGINAL","return","Too_Many_Extensions","_JSPlayM4_GetSourceBufferRemain","param is not number","JSPlayM4_SetDecodeEngine","HEAPF32","edge","copyTo",">>>JS left:","GetCurTime","Unimplemented_Feature","forEach","GetPointPano2FishFloor","SR_DrawLines","color: red","_JSPlayM4_GetBMP","SR_ERR_ALLOC_MEMORY","errorcode:","currentFishSubPort","getHours","JSPlayM4_AudioBeforeRenderCallBack","isConfigSupported","DisplayFrame","MAX","Code_Overflow","curFrameIsDisplay","oRenderTimer","then","0 0","prev","decodeWorker create success!","face_index","_getExplore","JSPlayM4_PlaySound","startWorker","SR_ERR_FREETYPE_INIT","codecType","TEXTURE_MAG_FILTER","_SetPlaySpeed","_JSPlayM4_OpenStream","Stack_Underflow","_JSPlayM4_FEC_SetViewParam","canvas width:","getMinutes","_destroyPlayCtrl","subPortNum","bufferData","IsInImage","download600RawData","week","SetPTZDisplayMode","_JSPlayM4_FreePort","attachShader","regeneratorRuntime",">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine：","nPTZFragmentNum","getDate","Corrupted_Font_Glyphs","Invalid_Pixel_Size","fRY1","_JSPlayM4_SetRunTimeInfoCallBackEx","pPTZSetColor","FT_Get_Kerning","SharedArrayBuffer","InitCamera","keys","COLOR_BUFFER_BIT","timeWalk",">>>>>yff>>>>> JSPlayM4_OpenStream 2:",",hWnd:","Cannot_Render_Glyph","nCylinderTexSize","stPTZSelect","_JSPlayM4_SetDecodeThread","FECErrorCode","_JSPlayM4_GetCanvasSize","Error_String","GetRectPoints","useProgram","getShaderParameter","dataStrVersion",">>>JS JSPlayM4_FEC_DelPort this.decodeEngine：","texParameteri","bInited","bCullBack","experimental-webgl","FT_Set_Pixel_Size","_JSPlayM4_FEC_SetCanvasID",`
    varying lowp vec4 pp;
    uniform sampler2D texture;

    void main(void)
    {
        gl_FragColor = texture2D(texture, pp.st);
    }
`,"setPrototypeOf","GetPlayedTime","_JSPlayM4_SetSecretKey","_JSPlayM4_GetMpOffset","_JSPlayM4_SetSycGroup","JSPlayM4_Play","JSPlayM4_Fast","oVideoRender","texturePosBuffer","emEffect","replaceChild","output2","CalcPTZFragmentPoints","fCosH",">>>JS JSPlayM4_FEC_GetPort this.decodeEngine：","pFontPath","toBlob","GetJPEG","ReleaseDisplay","info","_GetImage","Missing_Encoding_Field","_JSPlayM4_IgnoreHeaderAudioDefine","_JSPlayM4_RenderPrivateData","SetAspect","FT_Done_FreeType","JSPlayM4_SetIFrameDecInterval","nSemiSpherePosNum","regionSx","GetRenderParam","style_flags","port","_JSPlayM4_OneByOne","NORMAL","nCylinderPosNum","GetPTZPoints","Invalid_File_Format","JSPlayM4_GetPort","JSPlayM4_SetDecCBStream","JSPlayM4_Stop","Invalid_Version","LCD_V","slice","fSinV","next","pFishParam","getShaderInfoLog","FEC_SetCanvasID","configurable","oJSPlayerObj","JudgeDisplayEffect","bCut","JSPlayM4_SetDecodeFrameType","offscreen","Invalid_Stream_Operation","JSPlayM4_SetGlobalBaseTime","blendFunc","SetFar","fRYBottom","JSPlayM4_FEC_SetViewParam","Missing_Property","bFECHandle","SetDisRegionLeft",`
    precision highp float;
    varying vec2 v_uv;
    uniform sampler2D texture;
    uniform float fAngle;
    uniform float fRX1;
    uniform float fRX2;
    uniform float fRY1;
    uniform float fRY2;
    
    void main()
    {
    
        float r,g,b; 
    
        vec4 origin;
        vec4 result;
        float  thetabase;
        float  d;
    
        float  w;
        float  h;
        float  fCenterX;
        float  fCenterY;
        float  fRadius;
        w = 1.0;
        h = (fRX2 - fRX1) / (fRY2 - fRY1);
        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标
        fCenterY = (fRY1 + fRY2) / 2.0 * h;
        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度
        float fMax = 0.0;
        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆
        {
            float tmp;
            if(fRX1 < 0.0)
            {
                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRX2 > 1.0)
            {
                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY1 < 0.0)
            {
                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY2 > 1.0)
            {
                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
        }
        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切
        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分
        origin.s = v_uv.s;
        origin.t = (bottomCut - topCut) * v_uv.t + topCut;
        thetabase = 6.2831853 * origin.s + fAngle;
        d = fRadius * (1.0 - origin.t);
        result.s = (fCenterX - d*sin(thetabase)) / w;
        result.t = (fCenterY + d*cos(thetabase)) / h;
    
        r = texture2D(texture, result.st).r;
        g = texture2D(texture, result.st).g;
        b = texture2D(texture, result.st).b;
        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
        {
            r = 0.0; 
            g = 0.0; 
            b = 0.0;
        }
        gl_FragColor = vec4(r, g, b, 1.0);
    }
`,"mainCanvasID","FEC_DelPort",",bottom:","nCut","nFontColorTexture","JSPlayM4_FirstFrameCallBack","concatenate","TransformPTZRangePoints","JSPlayM4_GetMpOffset","yuvType","GetPlaceType","_JSPlayM4_Play","%cEnd load Decoder.js time:","loadWasm","Worker","SetDisRegionTop","stDisplayRect","hvc1.1.6.L123.00","ENDF_In_Exec_Stream","JSPlayM4_GetRawData","RENDER","fFov","FT_Done_Face","_resetDecoder","createShader","SR_AddSubPort","context","SRC_ALPHA","Invalid_Face_Handle","max_advance_height","NO_HINTING","_GetFastSpeed","canvas","data","Invalid_CodeRange","JSPlayM4_FEC_SetCanvasID","InitFECParam","inputDataBuffer","OneByOne",">>>>>yff>>>>> JSPlayM4_Play 2:","uniform1i","MONO","webgl render","stFECDisplayRect","fPTZX","Support Error: hard decoder only support 264 and 265 !!!","decodeWorker","JSPlayM4_GetAdditionData","chosenFrame","_JSPlayM4_SetAudioDisplayBuf","pSemiSpherePos","color","New_Memory_Face","pBasePTZPoints","isGeneratorFunction","GetPointFish2PanoCeiling","Invalid_Driver_Handle","Missing_Fontboundingbox_Field","Outline_Decompose","nDrawFontWidth","UpdateRangeParam","SetDisRegionBottom","getUniformLocation","wrap","Bbx_Too_Big","nextLoc","closed","Invalid_Stream_Handle","JSPlayM4_SetDemuxModel","Psdata","iDataType","stFishEyeManager","_JSPlayM4_Stop",">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:",",right:","Fragment shader failed to compile: ",">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:","drawArrays","JSPlayM4_GetFileTime","Locations_Missing","number","_JSPlayM4_GetVolume","NO_BITMAP","STATIC_DRAW","fRX1","63BKMzml","RGBA","SR_GetCanvasSize","fRXRight","_JSPlayM4_ResetEnd","ONE_MINUS_SRC_ALPHA","UpdateCircyeParam","_JSPlayM4_GetBufferValue","SR_SetRenderState","asin","ctx","fVAngleCos","bWriteAudioAfterDecode","completion","RTPRaw.data","@@asyncIterator","catchLoc",",canvasHeight:","imageYUV","Inline worker is not supported","Too_Many_Drivers","_JSPlayM4_SetResetCallBack","WasmPlayerV3.0 input over","second","pstBGColor","pstFontBGLines","firstFrame","SR_DelSubPort","your browser does not support 2d render","delta","try statement without catch or finally","nBmpDataSize","InitColorList","needForward","getProgramInfoLog","_JSPlayM4_GetCropBMP","frameType","text/javascript","IsPTZSelected","UpdateWideScanAngle","matView","transferControlToOffscreen","%c1>your chrome version %d does not support 264/265 hard Decoder,please update the latest version above chromeV107","format","bUsed","JSPlayM4 need reset","push","paint","frameRate","sab","JSPlayM4_Pause","JSPlayM4_SetDecCallBack","_JSPlayM4_SetFrameInfoCallBack","30306rqBNkZ","fBeta","DEFAULT","_JSPlayM4_GetLastError","JSPlayM4_GetBufferValue","end","Post_Table_Missing","TEXTURE_WRAP_S","%c1>your browser support 264/265 hard Decoder","onlySupportedWebGL1","bind","getCropImageBMP","Cropbmp","_JSPlayM4_FEC_Disable","b3DPort","szBasePath","emPlaceType","JSPlayM4_FEC_SetBackCilling","JSPlayM4_InputRawData","fHAngleCos","fPTZPositionX","pBmpData","nAlpha","FEC_SetViewParam","GetPTZPort","SR_DE_FISH_PTZ_WALL","SetScale","Cannot_Open_Resource","hasThread","GetView","Missing_Chars_Field","bSupHardDecHEVC","%c1>your chrome version %d does not support 265 hard Decoder,please update the latest version above chromeV107","bBackground","GetFishPTZCeiling","JSPlayM4_AudioBeforeDecodeCallBack","playSpeed:","HEAP16","FT_Outline_Decompose","Could_Not_Find_Context","needRect","SR_DE_FISH_SEMISPHERE","undefined","FEC_GetPort","Invalid_Character_Code","glLinePosBuffer","FEC_Enable","audioAfDecOUTBuffer","COMPUTE_METRICS","SR_DE_FISH_PANORAMA_WALL","fishPort is 0 ,main canvas doesn't need call FEC_DelPort","FEC_SetBackCilling","getContext","OUTLINE","bRecreateTex","GetPanoPTZWall","fCosV","removeChild","decode","_JSPlayM4_GetPlayedTimeEx",">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine：","curFrameInfo","Invalid_Offset","_JSPlayM4_FEC_GetPort","bInit","Invalid_Glyph_Index",`
    varying  mediump float pp;
    varying  lowp vec4  colorOut;
    void main()
    {
        gl_FragColor = colorOut;
        mediump float fx = abs(pp);
        if (fx > 0.2)
        { 
            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);
        } 
    } 
`,"JSPlayM4_FEC_DelPort","state","nMaxFillBlockTriNum","HEAP32","pJPEGSizeData","hevcDecodeEngine","nBasePTZPointNum","FTFace","bindBuffer","GetCropJPEG.jpeg","SR_DE_FISH_SPHERE","SetDisplayBuf","waitIFrameTimestamp","isize","Raster_Negative_Height","body","position","SetDisplayRegion","downloadFlag","JSPlayM4_SetDecodeThread"," JSPlayM4_FEC_SetCanvasID canvasID is null :","SetFishParam","pcVideoManager","Lower_Module_Version","Cropjpeg","tryLoc","GetPTZDisplayMode","color: blue","_JSPlayM4_SetPrintLogFlag","pFillBlockPosVertices","onmessage",`
    precision highp float;
    varying vec2 v_uv;
    uniform sampler2D texture;
    uniform float fAngle;
    uniform float fRX1;
    uniform float fRX2;
    uniform float fRY1;
    uniform float fRY2;
    
    void main()
    {
        float r,g,b;  
    
        vec4 origin;
        vec4 result;
        float  thetabase;
        float  d;
    
        float  w;
        float  h;
        float  fCenterX;
        float  fCenterY;
        float  fRadius;
        w = 1.0;
        h = (fRX2 - fRX1) / (fRY2 - fRY1);
        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标
        fCenterY = (fRY1 + fRY2) / 2.0 * h;
        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度
        float fMax = 0.0;
        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆
        {
            float tmp;
            if(fRX1 < 0.0)
            {
                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度
                if(tmp > fMax)
                   fMax = tmp;
            }
            if(fRX2 > 1.0)
            {
                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY1 < 0.0)
            {
                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY2 > 1.0)
            {
                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
        }
        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切
        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分
        origin.s = 1.0 - v_uv.s;
        origin.t = (bottomCut - topCut) * (1.0 - v_uv.t) + topCut;
        thetabase = 6.2831853 * origin.s + fAngle;
        d = fRadius * (1.0 - origin.t);
        result.s = (fCenterX - d*sin(thetabase)) / w;
        result.t = (fCenterY + d*cos(thetabase)) / h;
    
        r = texture2D(texture, result.st).r;
        g = texture2D(texture, result.st).g;
        b = texture2D(texture, result.st).b;
        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
        {
            r = 0.0; 
            g = 0.0; 
            b = 0.0; 
        }
        gl_FragColor = vec4(r ,g ,b , 1.0);
    }
`,"pFECTotalCanvasIDData","downloadAudioBeforeDecodeData","streamEnd","COLOR","hikHeadBuffer malloc failed","%c reset hard decoder","buffer","pfuncCBOut","disable","GetPointFish2PanoFloor","DEPTH_STENCIL","drawImage","Pause","decodeEngine",`
precision mediump float;
varying vec2 v_uv;
uniform sampler2D texture;
uniform float fHAngleCos;
uniform float fHAngleSin;
uniform float fVAngleCos;
uniform float fVAngleSin;
uniform float fZoom;

uniform float fRX1; 
uniform float fRX2; 
uniform float fRY1; 
uniform float fRY2; 

void main()
{
    float r,g,b;  

    vec4 origin1;
    vec4 origin2;
    vec4 result;
    float  z1;
    float  z2;
    float  dnew;

    float  w;
    float  h;
    float  fCenterX;
    float  fCenterY;
    float  fRadius;
    w = 1.0;
    h = (fRX2 - fRX1) / (fRY2 - fRY1);
    fCenterX = (fRX1 + fRX2) / 2.0 * w;    
    fCenterY = (fRY1 + fRY2) / 2.0 * h;
    fRadius = (fRX2 - fRX1) / 2.0 * w; 

    origin1.s = v_uv.s - 0.5;
    origin1.t = 0.5 - v_uv.t;
    z1 = fZoom ;

    origin2.s = origin1.s ;
    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);
    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;

    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;
    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);
    float theta = asin(dnew/d);
    float tmp = theta / 1.5707963 * 0.5;
    origin2.s = tmp*origin2.s / dnew ;
    origin2.t = tmp*origin2.t / dnew ;

    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;
    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;

    r = texture2D(texture, result.st).r; 
    g = texture2D(texture, result.st).g; 
    b = texture2D(texture, result.st).b; 
    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
    {
        r = 0.0; 
        g = 0.0; 
        b = 0.0; 
    }
    gl_FragColor = vec4(r ,g ,b , 1.0);
} 
`,"download 3 Resample Decode AudioData  FrameNum:","UNSIGNED_BYTE","glBlockClrBuffer","postMessage",`
precision mediump float;
varying vec2 v_uv;
uniform sampler2D texture;  
uniform float fHAngleCos;  
uniform float fHAngleSin; 
uniform float fVAngleCos;  
uniform float fVAngleSin;  
uniform float fZoom;

uniform float fRX1; 
uniform float fRX2; 
uniform float fRY1; 
uniform float fRY2; 

void main()
{
    float r,g,b;

    vec4 origin1;
    vec4 origin2;
    vec4 result;
    float  z1;
    float  z2;
    float  dnew;

    float  w;
    float  h;
    float  fCenterX;
    float  fCenterY;
    float  fRadius;
    w = 1.0;
    h = (fRX2 - fRX1) / (fRY2 - fRY1);
    fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<Բ��ʵ������
    fCenterY = (fRY1 + fRY2) / 2.0 * h;
    fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<�뾶ʵ�ʳ���
    origin1.s = v_uv.s - 0.5;
    origin1.t = v_uv.t - 0.5;
    z1 = fZoom ;

    origin2.s = origin1.s ;
    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);
    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;

    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;
    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);
    float theta = asin(dnew/d);
    float tmp = theta / 1.5707963 * 0.5;
    origin2.s = tmp*origin2.s / dnew ;
    origin2.t = tmp*origin2.t / dnew ;

    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;
    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;

    r = texture2D(texture, result.st).r; 
    g = texture2D(texture, result.st).g; 
    b = texture2D(texture, result.st).b; 
    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
    {
        r = 0.0;
        g = 0.0; 
        b = 0.0; 
    }
    gl_FragColor = vec4(r ,g ,b , 1.0);
} 
`,"minute","apply","GetFishPTZWALL","GetPanoPTZCeiling","bSupHardDecAVC","Missing_Bbx_Field","IsValidRadiusParam","fAlpha","bInitFreetype",",fValue:","call",",state:","resultName",`
    precision highp float;
    varying vec2 v_uv;
    uniform sampler2D texture;
    uniform float fAngle;
    uniform float fRX1;
    uniform float fRX2;
    uniform float fRY1;
    uniform float fRY2;

    void main()
    {
        float r,g,b;  
        vec4 origin;
        vec4 result;
        float  thetabase;
        float  d;
    
        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点
        if (v_uv.t  <= 0.5) 
        {
            newpp.s =  v_uv.s / 2.0;
            newpp.t =  v_uv.t * 2.0;
        }
        else
        {
            newpp.s =  v_uv.s / 2.0 + 0.5;
            newpp.t =  (v_uv.t - 0.5) * 2.0;
        }
        float  w;
        float  h;
        float  fCenterX;
        float  fCenterY;
        float  fRadius;
        w = 1.0;
        h = (fRX2 - fRX1) / (fRY2 - fRY1);
        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标
        fCenterY = (fRY1 + fRY2) / 2.0 * h;
        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度
        float fMax = 0.0;
        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆
        {
             float tmp;
            if(fRX1 < 0.0)
            {
                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRX2 > 1.0)
            {
                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY1 < 0.0)
            {
                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
            if(fRY2 > 1.0)
            {
                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度
                if(tmp > fMax)
                    fMax = tmp;
            }
        }
        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切
        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分
        origin.s = 1.0 - newpp.s;
        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;
        thetabase = 6.2831853 * origin.s + fAngle;
        d = fRadius * (1.0 - origin.t);
        result.s = (fCenterX - d*sin(thetabase)) / w;
        result.t = (fCenterY + d*cos(thetabase)) / h;
    
        r = texture2D(texture, result.st).r; 
        g = texture2D(texture, result.st).g;
        b = texture2D(texture, result.st).b;
        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)
        {
            r = 0.0; 
            g = 0.0; 
            b = 0.0; 
        }
        gl_FragColor = vec4(r ,g ,b , 1.0);
    } 
`,"Invalid_Outline","JSPlayM4_ResetEnd","668348lmxozK","bPortAllocated","avcDecodeEngine","bmpDataCallback","nLineShaderProgram","nCylinderPosSize","SetStreamEnd","toStringTag","SR_ERR_NOT_SUPPORT","ready_frames","JSPlayM4_GetBMP","_JSPlayM4_SetIFrameDecInterval","SR_GetFishParam","createEvent","FT_Render_Glyph","frameSize","nPTZDisplayMode","Out_Of_Memory","_JSPlayM4_GetAdditionData","resetEnd","deleteProgram","GetCropJPEG","%c3>SharedArrayBuffer Error , does not support Soft Decdoe!!!!!",">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:","oVideoHandle","SR_ERR_CANVAS","glBlockPosBuffer","audioResampleBuffer","TEXTURE_WRAP_T","preTimeStamp","FECDisable","JSPlayM4_GetFrameInfo","SetOrtho","JSPlayM4_SetStreamEnd","nPTZFragmentNode","SR_DE_FISH_CYLINDER_SPLIT_FLOOR","stop failed ","RenderFrame","symbol","ascender","Missing_Startchar_Field","FEC_SetWnd","jpegDownloadFlag","playSpeed","dataTimeStamp","LINK_STATUS","_JSPlayM4_FEC_SetBackCilling","JSPlayM4_ReversePlay","initEvent","addEventListener","GetDisplayEffect","__await","_decoderLoaded","root","shift","canvasID","JSPlayM4_RenderPrivateData","left","pop","_downloadFile","decCallBackFun",">>>JS 01 destroy decoderObj","SR_SetDisplayRect","totalLength:","click","vecEye","%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","fRYTop",",fishSubPort:","onload","SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL","appendChild","FECcanvasIDArray","GetPitch","prototype","callBackParameter","iAudioBefDecFrameNum","fSinH","iAudioANRFrameNum","pOriPTZPoints","FECSetWnd","configure","Load_Char","continue","bWriteAudioBefDecData","ComputeLinePoint","setHasThread","Invalid_Opcode","downloadAudioAfterDecodeData","vertexAttribPointer","_JSPlayM4_VideoDataToJpeg","blob:","complete",">>>JS JSPlayM4_FEC_Enable this.decodeEngine：","enDisplayEffect","scale(0.2)","acos","canvasCnv","LINEAR_DESIGN","SetFrameInfoCallBack","JSPlayM4_RTPRawDataCallBack","deleteShader","FEC_ResetCorrectType","slow","stPTZColor","fBottom","GetProj","fHAngleSin","SR_DE_FISH_PANORAMA_CEILING_180","Invalid_Post_Table_Format","JSPlayM4_SetD3DPostProcess","oVideoDecoder","getMilliseconds","fishPort is 0 ,main canvas doesn't need call FEC_Enable","delegate","_JSPlayM4_RenderPrivateDataEx","JSPlayM4_Slow","milliseconds","needSetPreSoft","VERTICAL_LAYOUT","%c1>your browser does not support play without plugin","Ignore","rawDataFrameInfo","texImage2D","this.audioANRBuffer","nSemiSphereTexSize","pUserIn","DEF_In_Glyf_Bytecode","JSPlayM4_RawDataCallBack","mainSubPort","No_Unicode_Glyph_Name","error","texture","script","GetPointFish2PanoWall","jpeg","fNear","JSPlayM4_FEC_Enable","size",">>>>>yff>>>>> JSPlayM4_InputData 2 res:","URL","createObjectURL","yuvLength","nJPEGDataSize","bitPerSample","__esModule","JSPlayM4_GetSDKVersion","done","nPlaceType","NO_RECURSE","displayFrameInfo","iFrameNum","nLineTriangleNum","videoShaderProgram","webgl","suspendedStart","audioANRBuffer","revokeObjectURL","SR_DE_FISH_PLANET","this.playSpeed:","renderEngine","trunc","getImageJPEG","pstStartPos","cos","1017FfAjnz","FT_Set_Char_Size","initDecoder","chooseFrame","Render_Glyph","lastDate","FEC_ERR_ENABLED","face_flags","nWndHeight","nUpDateType","illegal catch attempt","FECResetCorrectType","Invalid_Reference","SR_DE_FISH_PTZ_CEILING","unconfigured",",iZoomNum:","JSPlayM4_StopSound","FECGetViewParam","create","Corrupted_Font_Header","Array_Too_Large","dataType","JSPlayM4_DisplayLostFrames","bmp","num_glyphs","SR_SetViewParam","displayRunning","enumerable","Horiz_Header_Missing","i32","SR_SetFishParamManager","match","catch","getImageBMP","fValue","JSPlayM4_AdditionDataCBFun","nValidSubPort","JSPlayM4_FreePort","compileShader","matProj","OrderError","Done_Face","%c2>there will decode 264 by softDecoder","family_name","nDrawFontHeight","JSPlayM4_GetCropBMP","SetCurStatus","samplesPerSec","throw","webkitURL"];return L=function(){return re},L()}}(Ut,Ut.exports);var Wt=Ut.exports,kt=256,ee=512,me=768,P=1536,Y={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}},Oe=function(){function N(fe){En(this,N),this.nWidth=0,this.nHeight=0,this.useHardDev=typeof fe.useHardDev<"u"?fe.useHardDev:!1,this.isHardH264=fe.isHardH264||!0,this.isHardH265=fe.isHardH265||!0,this.isSharedArrayBuffer=fe.isSharedArrayBuffer||!1,this.bGpuSupHardDecHEVC=!1,this.oStreamClient=new l.StreamClient,this.oStorageManager=new ye("./transform",{staticPath:"https://open.ys7.com/assets/ezuikit_v4.0"}),this.aHead=[],this.pCanvasData=null,this.bPlaySound=-1,this.szStorageUUID="",this.szStreamUUID="",this.g_port=0,this.szId=fe.szId,this.iWidth=fe.iWidth,this.iHeight=fe.iHeight,this.iRate=1,this.decoderVersion="2.0",this.staticPath=fe.staticPath||"https://open.ys7.com/assets/ezuikit_v5.0",this.bPause=!1,this.bPlay=!1,this.bInit=!1,this.portAvailable=!0,this.esCanvas=null,this.b3DZoom=!1,this.oJSPlugin=null,this.bPauseDate=null,this.FECSplitIds="",this.canvasFECSubPort=new Map,this.correctType=null,document.getElementById(fe.szId).style="display:inline-block;width:".concat(fe.iWidth,"px;height:").concat(fe.iHeight,"px;background:#000000;background-size:100% 100%;vertical-align:top;"),this.JS_Init(),this.oStyle=Object.assign({border:"#000000",borderSelect:"#FFCC00",background:"#4C4B4B"},fe.oStyle),typeof fe.szId=="string"?this.oJSPlugin=Ne("#"+fe.szId):this.oJSPlugin=fe.szId,this.createWindows(),this.esCanvas=new at(this.szId+"canvas_draw0");var I=this;this.oJSPlugin.find("."+fe.szId+"parent-wnd").eq(0).children().each(function(L){var re=this;Ne(re).bind("mouseenter",function(J){Ne("#"+fe.szId+"canvas_draw0").css("pointer-events","all"),I.b3DZoom?(console.log("e",J),console.log("id:",fe.szId),I.esCanvas=null,Ne("."+fe.szId+"draw-window").unbind(),I.esCanvas=new at(fe.szId+"canvas_draw0"),I.esCanvas.setShapeType("Rect"),I.esCanvas.setDrawStyle("#ff0000","",0),I.esCanvas.setDrawStatus(!0,function(De){I.fCallback&&I.fCallback(De)})):Ne("#"+fe.szId+"canvas_draw0").css("pointer-events","none")}),Ne(re).bind("mouseleave",function(J){Ne("#"+fe.szId+"canvas_draw0").css("pointer-events","none")})})}return Rn(N,[{key:"createWindows",value:function(I,L){var re=this;I&&L&&(re.iWidth=I,re.iHeight=L);var J=re.iWidth,De=re.iHeight,Ye=re.iWidth-J-2*2,et=re.iHeight-De-2*2,R=re.iWidth-J,He=re.iHeight-De,G=1;typeof this.szId=="string"?re.oJSPlugin=Ne("#"+this.szId):re.oJSPlugin=this.szId;var ge='<div class="'+this.szId+'parent-wnd" style="overflow:hidden;width:100%; height:100%; position: relative;">',xe=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(xe)for(var ke=0;ke<1;ke++){I=Ye+(ke%G===G-1?J:0),L=et+(ke+G>=Math.pow(G,2)?De:0);var ce=R+(ke%G===G-1?J:0),X=He+(ke+G>=Math.pow(G,2)?De:0);ce=ce*2,X=X*2,ge+='<div style="transform: scale(0.5);-webkit-transform: scale(0.5);-webkit-transform-origin:0 0;text-align:left;transform-origin:0 0; width:'+ce+"px;height:"+X+'px;"><div style="float:left; background-color: '+this.oStyle.background+'; position: relative; width:100%; height:100%;"><canvas id="'+this.szId+"canvas"+ke+'" class="'+this.szId+'play-window" wid="'+ke+'" width="'+ce+'" height="'+X+'"></canvas>'+(ke===0?'<img style="display:none;" id="playImg'+ke+'" src="">':"")+'<canvas id="'+this.szId+"canvas_draw"+ke+'"  class="'+this.szId+'draw-window" style="position:absolute; top:0; left:0;" wid="'+ke+'" width='+I+" height="+L+"></canvas></div></div>"}else for(var Be=0;Be<1;Be++){I=Ye+(Be%G===G-1?J:0),L=et+(Be+G>=Math.pow(G,2)?De:0);var lt=R+(Be%G===G-1?J:0),dt=He+(Be+G>=Math.pow(G,2)?De:0);ge+='<div id="'+this.szId+"-container-"+Be+'" style="float:left; background-color: '+this.oStyle.background+"; position: relative; width: "+lt+"px; height: "+dt+'px;"><canvas id="'+this.szId+'-player" class="'+this.szId+'play-window" wid="'+Be+'" width="'+lt+'" height="'+dt+'"></canvas>'+(Be===0?'<img style="display:none;" id="playImg'+Be+'" src="">':"")+'<canvas id="'+this.szId+"canvas_draw"+Be+'"  class="'+this.szId+'draw-window" style="position:absolute; top:0; left:0;" wid="'+Be+'" width='+I+" height="+L+"></canvas></div>"}ge+="</div>",re.oJSPlugin.html(ge)}},{key:"JS_Init",value:function(){var I=this,L=this;if(!L.initIng){L.initIng=!0;var L=this;if(this.bPlay)return!1;var re=new Promise(function(J,De){window["wasmplayer-".concat(I.szId)]&&(L.bInit=!0,J());var Ye=new Wt.JSPlayCtrl("".concat(L.staticPath,"/js/PlayCtrlWasm/").concat(I.isSharedArrayBuffer?"hasWorker":"noWorker","/Decoder.js"),function(et){var R=et.bGpuSupHardDecHEVC;L.bInit=!0,window.JSPlayerModuleLoaded=!0,L.initIng=!1,R==!1?console.log("当前GPU不支持H265硬解"):console.log("当前GPU支持H265硬解")},0,"webgl");window["wasmplayer-".concat(I.szId)]=Ye,J()});return re}}},{key:"PlayM4_openStream",value:function(I){var L=window["wasmplayer-".concat(this.szId)],re=this;new Uint8Array(I.buffer);var J=L.JSPlayM4_OpenStream(I,40,4*1024*1024),De=L.JSPlayM4_SetDecodeEngine((this.isHardH264||this.isHardH265)&&this.useHardDev?1:0);console.log("JSPlayM4_SetDecodeEngine:::",(this.isHardH264||this.isHardH265)&&this.useHardDev?1:0,De),L.JSPlayM4_SetFirstFrameCallBack(1,function(){console.log("%cfirst frame display end:"+new Date().getMinutes()+":"+new Date().getSeconds()+"."+new Date().getMilliseconds(),"color:blue")}),L.JSPlayM4_SetRunTimeInfoCallBackEx(1,function(Ye,et,R,He,G){re.EventCallback&&re.EventCallback.setRunTimeInfoCallBack&&re.EventCallback.setRunTimeInfoCallBack(Ye,et,R,He,G)}),console.log("3.打开流 resO:"+J)}},{key:"_doPlay",value:function(I,L,re,J,De){var Ye=this,et=window["wasmplayer-".concat(this.szId)];this.bPlayIng=!0;var R=this;if(R.playURL=L.playURL,R.szUrl=I,document.getElementById(R.szId+"-player")){var ge=document.getElementById(R.szId+"-container-0"),xe=document.getElementById(this.szId+"-player");console.log(xe),xe.style="position: absolute;",ge.removeChild(xe);var ke=document.createElement("canvas");document.getElementById(R.szId)?(ke.width=document.getElementById(R.szId).offsetWidth,ke.height=document.getElementById(R.szId).offsetHeight):(ke.width=R.iWidth,ke.height=R.iHeight),ke.id=R.szId+"-player",ge.appendChild(ke)}else{var He=document.getElementById(R.szId+"-container-0"),G=document.createElement("canvas");He.appendChild(G),document.getElementById(R.szId)?(G.width=document.getElementById(R.szId).offsetWidth,G.height=document.getElementById(R.szId).offsetHeight):(G.width=R.iWidth,G.height=R.iHeight),G.id=R.szId+"-player"}var ce=new Promise(function(X,Be){Ye.oStreamClient.stopAll(),R.g_port=et.JSPlayM4_GetPort(),console.log("1.获取播放库端口号 g_port:"+R.g_port),Ye.portAvailable=!1,R.EventCallback&&R.EventCallback.openStreamCallback&&(console.log("开始取流-----v2"),R.EventCallback.openStreamCallback()),R.oStreamClient.openStream(I,L,function(lt){if(Ye.oParams=L,lt.errorCode&&lt.errorCode!="1"&&R.EventCallback&&R.EventCallback.pluginErrorHandler&&R.EventCallback.pluginErrorHandler(re,lt.errorCode,lt),lt.bHead){R.EventCallback&&R.EventCallback.getStreamHeaderCallback&&(console.log("完成取流返回流头"),R.EventCallback.getStreamHeaderCallback()),R.PlayM4_openStream(lt.buf),R.aHead=new Uint8Array(lt.buf),R.secretKey&&et.JSPlayM4_SetSecretKey(R.secretKey);try{var dt=function(Pi,Ii){var ti=new RegExp("(^|&)"+Pi+"=([^&]*)(&|$)","i"),Vi=Ii.match(ti);return Vi!=null?unescape(Vi[2]):null},Lt=dt("begin",L.playURL),qt=parseInt(Lt.slice(0,4)),Si=parseInt(Lt.slice(4,6)),he=parseInt(Lt.slice(6,8)),Bi=parseInt(Lt.slice(9,11)),yt=parseInt(Lt.slice(11,13)),wt=parseInt(Lt.slice(13,15))+3,pt=et.JSPlayM4_SetGlobalBaseTime(qt,Si,he,Bi,yt,wt,0);console.log("设置OSD时间: ",qt+":"+Si+":"+he+":"+Bi+":"+yt+":"+wt+":0"),console.log("设置OSD时间res:",pt)}catch(mi){console.log("JSPlayM4_SetGlobalBaseTime:",mi)}R.bPlay=!0,R.bPlayIng=!1;var Dt=et.JSPlayM4_SetFrameInfoCallBack(1);if(Dt!=1){var St=et.JSPlayM4_GetLastError();console.log("resFrameInfoError:"+St)}et.JSPlayM4_RenderPrivateData(4,1),Ye.firstFlag=!0,Ye.firstGetData=!0,et.JSPlayM4_FEC_SetCanvasID(Ye.FECSplitIds);var Et=et.JSPlayM4_Play("".concat(R.szId,"-player"));Ye.canvasFECSubPort.set("".concat(R.szId,"-player"),gr({},Y)),console.log("4.开始播放 resP:"+Et,"".concat(R.szId,"-player")),X(Et)}else{if(Ye.firstGetData&&(Ye.firstGetData=!1,R.EventCallback&&R.EventCallback.getVideoStreamCallback&&R.EventCallback.getVideoStreamCallback()),Ye.firstFlag){var jt=et.JSPlayM4_GetFrameInfo(),_t=jt.width,Xt=jt.height;Ye.nWidth=_t,Ye.nHeight=Xt,_t&&(R.EventCallback&&R.EventCallback.appearFirstFrameCallback&&(console.log("出现首帧画面（播放成功）------多线程"),R.EventCallback.appearFirstFrameCallback()),R.EventCallback&&R.EventCallback.averageStreamSuccessCallback&&R.EventCallback.averageStreamSuccessCallback(),console.log("首帧展示",_t,Xt),Ye.firstFlag=!1)}var ot=new Uint8Array(lt.buf);lt.statusString?R.EventCallback&&R.EventCallback.pluginErrorHandler&&R.EventCallback.pluginErrorHandler(0,1001,lt):lt.type&&lt.type==="exception"&&R.EventCallback&&R.EventCallback.pluginErrorHandler&&R.EventCallback.pluginErrorHandler(0,1002,lt),et.JSPlayM4_InputData(ot,ot.length),ot=null}R.szStorageUUID&&R.oStorageManager.inputData(R.szStorageUUID,lt.buf)},function(){R.bPlay&&R.EventCallback&&R.EventCallback.pluginErrorHandler&&R.EventCallback.pluginErrorHandler(re,1003),R.bPlayIng=!1,Be()}).then(function(lt){R.szStreamUUID=lt,R.oStreamClient.startPlay(lt).then(function(){var dt=et.JSPlayM4_SetStreamOpenMode(1);console.log("2.设置流模式 resSSOM:"+dt)}).catch(function(dt){console.log("err",dt),R.bPlayIng=!1,Be(dt.oError)})},function(lt){R.bPlayIng=!1,R._doRelease(),Be(lt)})});return ce}},{key:"JSPlayM4_SetDecodeEngine",value:function(I){this.useHard=I}},{key:"JS_Play",value:function(){var I=this,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{playURL:""},J=arguments.length>2?arguments[2]:void 0,De=arguments.length>3?arguments[3]:void 0,Ye=arguments.length>4?arguments[4]:void 0;return new Promise(function(et,R){var He=setInterval(function(){window.JSPlayerModuleLoaded&&(clearInterval(He),I._doPlay(L,re,J,De,Ye).then(function(G){et(G)}).catch(function(G){R(G)}))},50)})}},{key:"JS_SetSecretKey",value:function(I,L){var re=window["wasmplayer-".concat(this.szId)];console.log("secretKey:::",L),this.secretKey=L;var J=re.JSPlayM4_SetSecretKey(L);console.log("resSetSecretKey："+J)}},{key:"JS_OpenSound",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=I.JSPlayM4_PlaySound();return L===1&&(this.bPlaySound=1),L}},{key:"JS_CloseSound",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=I.JSPlayM4_StopSound();return L===1&&(this.bPlaySound=-1),L}},{key:"JS_Enable3DZoom",value:function(I,L){if(!this.bPlay)return-1;var re=window["wasmplayer-".concat(this.szId)],J=re.JSPlayM4_GetFrameInfo();return this.JSPlayM4_SetDisplayRegion(0,J.width,0,J.height),Ne("."+this.szId+"draw-window").unbind(),this.fCallback=L,this.esCanvas=new at(this.szId+"canvas_draw0"),this.esCanvas.setShapeType("Rect"),this.esCanvas.setDrawStyle("#ff0000","",0),this.esCanvas.setDrawStatus(!0,function(De){L(De)}),this.b3DZoom=!0,0}},{key:"JS_Disable3DZoom",value:function(){return this.bPlay?(this.esCanvas.setDrawStatus(!1),this.b3DZoom=!1,0):-1}},{key:"JS_StartSave",value:function(I){var L=this,re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"".concat(new Date().getTime()),J=new Promise(function(De,Ye){L.oStorageManager.startRecord("".concat(re,".mp4"),L.aHead,2,0,{cbEventHandler:function(R){console.log("录制错误",R),Ye("录制错误 ".concat(R,"}"))},iPackage:0}).then(function(et){L.szStorageUUID=et,De()},function(){Ye()})});return J}},{key:"JS_StopSave",value:function(){var I=this,L=new Promise(function(re,J){I.oStorageManager.stopRecord(I.szStorageUUID).then(function(){I.szStorageUUID="",re()},function(De){console.log("iError",De),J(De)})});return L}},{key:"_JSPlayM4_GetFrameInfo",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=I.JSPlayM4_GetFrameInfo(),re=L.width,J=L.height;console.log("width:"+re+",height:"+J);var De=L.year,Ye=L.month,et=L.day,R=L.hour,He=L.minute,G=L.second,ge=L.milliseconds;return console.log("OSD时间："+De+"-"+Ye+"-"+et+"-"+R+"-"+He+"-"+G+"-"+ge),{width:re,height:J,year:De,month:Ye,day:et,hour:R,minute:He,second:G}}},{key:"_JSPlayM4_SetDisplayRegion",value:function(I,L,re,J){var De=this,Ye=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,et=this;new Promise(function(R,He){var G=window["wasmplayer-".concat(De.szId)],ge=G.JSPlayM4_SetDisplayRegion("".concat(De.szId,"-player"),et.iWidth*I/et.nWidth,et.iWidth*L/et.nWidth,et.iHeight*re/et.nHeight,et.iHeight*J/et.nHeight,!Ye,!1);console.log("oFrameInfo:",et.nWidth,et.nHeight),console.log("canvasInfo:",et.iWidth,et.iHeight),console.log("SetDisplayRegionRes:",ge,"".concat(De.szId,"-player"),et.iWidth*I/et.nWidth,et.iWidth*L/et.nWidth,et.iHeight*re/et.nHeight,et.iHeight*J/et.nHeight),R({code:0,data:ge})})}},{key:"JS_SetFrameInfoCallBack",value:function(I){var L=window["wasmplayer-".concat(this.szId)],re=L.JSPlayM4_SetFrameInfoCallBack(this.g_port,I);if(re!=1){var J=L.JSPlayM4_GetLastError(this.g_port);console.log("resFrameInfoError:"+J)}console.log("resFCB:"+re)}},{key:"JS_CapturePicture",value:function(I,L,re,J,De){var Ye=window["wasmplayer-".concat(this.szId)],et=function(xe){for(var ke=new Uint8Array(xe),ce="",X=0;X<ke.length;X++)ce+=String.fromCharCode(ke[X]);return"data:image/jpeg;base64,".concat(window.btoa(ce))};function R(ge){L.indexOf(".jpeg")===-1&&(L+=".jpeg"),J&&J({fileName:L,fileUint8Array:ge,base64:et(ge)})}!this.bPlay&&this.bPause&&this.tmpCapturePictureData&&reject({code:-1,msg:"暂停状态下无法截图"});var He=Ye.JSPlayM4_GetFrameInfo();this.nWidth=He.width,this.nHeight=He.height;var G=new Promise(function(ge,xe){var ke=Ye.JSPlayM4_GetJPEG(function(ce,X){if(ce){var Be=new Uint8Array(X);Be.set(ce.subarray(0,X)),R(ce),J||Ye._downloadFile(Be,"".concat(L||"capturePicture.jpeg")),ge({code:1,data:{fileName:L,fileUint8Array:ce,base64:et(ce)}})}},0);ke!==1&&xe({code:-1,msg:"截图失败"})});return G}},{key:"JS_GetOSDTime",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=new Promise(function(re,J){var De=I.JSPlayM4_GetFrameInfo(),Ye=De.year,et=De.month,R=De.day,He=De.hour,G=De.minute,ge=De.second,xe=new Date("".concat(Ye,"-").concat(et,"-").concat(R," ").concat(He,":").concat(G,":").concat(ge)).getTime()/1e3;re(xe)});return L}},{key:"JS_Resize",value:function(I,L){var re=window["wasmplayer-".concat(this.szId)];console.log("width:"+I+",height:"+L);var J=re.JSPlayM4_SetCanvasSize(I,L);this.iWidth=I,this.iHeight=L,document.getElementById(this.szId).style.height=L+"px",document.getElementById(this.szId).style.width=I+"px";var De=document.getElementById(this.szId+"-player");De&&(De.style.height=L+"px",De.style.width=I+"px");var Ye=document.getElementById(this.szId+"-container-0");Ye&&(Ye.style.height=L+"px",Ye.style.width=I+"px");var et=document.getElementById(this.szId+"-drawer0");et&&(et.style.height=L+"px",et.style.width=I+"px"),console.log("resSet:"+J)}},{key:"JS_GetSDKVersion",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=I.JSPlayM4_GetSDKVersion();return L.toString(16)}},{key:"_doRelease",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=I.JSPlayM4_CloseStream(),re=I.JSPlayM4_FreePort();re===1&&(this.portAvailable=!0),console.log("doRelease",L,re),console.log("stop end"),this.bPlay=!1,this.bPlayIng=!1}},{key:"JS_Stop",value:function(){var I=this,L=this.szStreamUUID,re=window["wasmplayer-".concat(this.szId)];this.szStorageUUID&&this.JS_StopSave();var J=function(et){for(var R=new Uint8Array(et),He="",G=0;G<R.length;G++)He+=String.fromCharCode(R[G]);return"data:image/jpeg;base64,".concat(window.btoa(He))},De=new Promise(function(Ye,et){re.JSPlayM4_GetJPEG(function(R,He){var G=document.getElementById(I.szId+"-container-0"),ge=document.getElementById(I.szId+"-player");ge&&G.removeChild(ge);var xe=new Uint8Array(He);xe.set(R.subarray(0,He)),I.tmpCapturePictureData=R,I.correctType===null?G.style.backgroundImage="url(".concat(J(R),")"):G.style.backgroundImage="",G.style.backgroundSize="100% 100%"},0),setTimeout(function(){var R=I.oStreamClient.stopAll(L);R.then(function(He){console.log("防抖 停止取流成功"),I._colseFECAllSubWnd();var G=re.JSPlayM4_Stop(!1);if(G==1)I._doRelease(),Ye({resS:G});else{var ge=re.JSPlayM4_GetLastError();if(ge==35)var xe=setInterval(function(){G?clearInterval(xe):(G=re.JSPlayM4_Stop(!1),G==1?(I._doRelease(),Ye({resS:G})):(ge=re.JSPlayM4_GetLastError(),console.log("stop error ",ge)))},50);else console.log("stop - other error, still resolve",ge,G),I._doRelease(),Ye({resS:G,jsPluginErrorCode:ge})}}).catch(function(He){console.log("停止取流失败_jsPluginErrorCode",He),I._doRelease();var G=re.JSPlayM4_GetLastError();console.log("停止取流失败_jsPluginErrorCode",G),Ye({jsPluginErrorCode:G})}),Ye()},300)});return De}},{key:"JS_DestroyWorker",value:function(){var I=window["wasmplayer-".concat(this.szId)];this._colseFECAllSubWnd();var L=document.getElementById(this.szId+"-container-0"),re=document.getElementById(this.szId+"-player");re&&L.removeChild(re),this.pCanvasData!==null&&(I._free(this.pCanvasData),this.pCanvasData=null),this.pCanvasString=null,console.log("stop end")}},{key:"JS_Fast",value:function(I,L){var re=this.iRate,J=window["wasmplayer-".concat(this.szId)];if(L)switch(L){case 1:case 2:case 4:re=L;break;case 3:re=.5;break;default:re=this.iRate;break}else switch(this.iRate){case 1:re=2;break;case 2:re=4;break;default:re=this.iRate;break}if(this.oStreamClient.setPlayRate(this.szStreamUUID,re),this.iRate=re,console.log("开启倍速播放,多线程倍速，全解",re),re==4){var De=J.JSPlayM4_SetDecodeThreadNum(8);console.log("SetDecodeThreadNumRes",De)}var Ye=J.JSPlayM4_Fast();console.log("res",Ye)}},{key:"JS_Slow",value:function(){var I=this.iRate;switch(this.iRate){case 2:I=1;break;case 4:I=2;break;default:I=this.iRate;break}this.oStreamClient.setPlayRate(this.szStreamUUID,I),this.iRate=I,console.log("开启倍速播放",I)}},{key:"JS_Speed",value:function(I){var L=window["wasmplayer-".concat(this.szId)];this.oStreamClient.setPlayRate(this.szStreamUUID,I!==3?I:.5),this.iRate===3&&(I===1&&L.JSPlayM4_Fast(),I===2&&(L.JSPlayM4_Fast(),L.JSPlayM4_Fast()),I===4&&(L.JSPlayM4_Fast(),L.JSPlayM4_Fast(),L.JSPlayM4_Fast())),this.iRate===1&&(I===3&&L.JSPlayM4_Slow(),I===2&&L.JSPlayM4_Fast(),I===4&&(L.JSPlayM4_Fast(),L.JSPlayM4_Fast())),this.iRate===2&&(I===1&&L.JSPlayM4_Slow(),I===3&&(L.JSPlayM4_Slow(),L.JSPlayM4_Slow()),I===4&&L.JSPlayM4_Fast()),this.iRate===4&&(I===1&&(L.JSPlayM4_Slow(),L.JSPlayM4_Slow()),I===2&&L.JSPlayM4_Slow(),I===3&&(L.JSPlayM4_Slow(),L.JSPlayM4_Slow(),L.JSPlayM4_Slow())),I==4&&L.JSPlayM4_SetDecodeThreadNum(8),this.iRate=I,console.log("开启倍速播放",I)}},{key:"JS_Seek",value:function(I,L,re){var J=this,De=new Promise(function(Ye,et){var R=window["wasmplayer-".concat(J.szId)],He=R.JSPlayM4_ResetBuffer(1);console.log("seek 清理缓存",He),J.oStreamClient.seek(J.szStreamUUID,L,re),Ye()});return De}},{key:"JSPlayM4_SetPrintLogFlag",value:function(){var I=window["wasmplayer-".concat(this.szId)],L=I.JSPlayM4_SetPrintLogFlag(2);console.log("LogValue:2,resDR:"+L)}},{key:"JSPlayM4_SetDisplayRegion",value:function(I,L,re,J){var De=this;new Promise(function(Ye,et){var R=window["wasmplayer-".concat(De.szId)],He=R.JSPlayM4_SetDisplayRegion("".concat(De.szId,"-player"),I,L,re,J,!1,!0);Ye({code:0,data:He})})}},{key:"JS_Pause",value:function(I,L){var re=this;if(!this.bPlay)return console.log("当前不是播放状态，无法暂停"),new Promise(function(Be,lt){lt({code:0,msg:"当前不是播放状态，不需要暂停"})});var J=this,De=window["wasmplayer-".concat(J.szId)],Ye=De.JSPlayM4_GetFrameInfo(),et=Ye.year,R=Ye.month,He=Ye.day,G=Ye.hour,ge=Ye.minute,xe=Ye.second,ke=new Date("".concat(et,"-").concat(R,"-").concat(He," ").concat(G,":").concat(ge,":").concat(xe)).getTime()/1e3,ce=new Date(ke*1e3);J.bPauseDate=ce.valueOf(),J.bPauseTime="".concat(et)+(R>9?R:"0".concat(R))+(He>9?He:"0".concat(He))+(G>9?G:"0".concat(G))+(ge>9?ge:"0".concat(ge))+(xe>9?xe:"0".concat(xe)),console.log("this.bPauseDate:::",J.bPauseDate),console.log("this.bPauseTime:::",J.bPauseTime);var X=new Promise(function(Be,lt){if(L)J.JS_Stop().then(function(){J.bPlay=!1,J.bPause=!0,J.bPauseDate=L.valueOf(),Be({code:1,msg:"暂停成功",pauseDate:ce})}).catch(function(Lt){lt({code:0,msg:"暂停失败"}),console.log("err",Lt)});else{J.oStreamClient.stopAll();var dt=De.JSPlayM4_Pause(1);dt?(J.bPlay=!1,J.bPlayIng=!1,J.bPause=!0,J.szStorageUUID&&re.JS_StopSave(),Be({pauseDate:ce})):lt()}});return X}},{key:"JS_Resume",value:function(I){var L=this,re=this,J=window["wasmplayer-".concat(re.szId)],De=new Promise(function(Ye,et){if(I&&(L.bPauseTime?L.bPauseTime=L.bPauseTime.slice(0,14-I.length)+I:L.bPauseTime=I),re.playURL.indexOf("playback")!==-1&&(re.playURL=re.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin=".concat(re.bPauseTime.slice(0,8),"T").concat(re.bPauseTime.slice(8,14),"Z"))),re.playURL.indexOf("cloudplayback")!==-1&&(re.playURL=re.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'.concat(re.bPauseDate))),I)re.JS_Play(re.szUrl,{playURL:re.playURL}).then(function(He){Ye(He)}).catch(function(He){et(He)});else{var R=re.szUrl;R.indexOf("playback")!==-1&&(R=R.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin=".concat(re.bPauseTime.slice(0,8),"T").concat(re.bPauseTime.slice(8,14),"Z"))),R.indexOf("cloudplayback")!==-1&&(R=R.replace(/"startTime":[0-9]{13}/gi,'"startTime":'.concat(re.bPauseDate))),re.oStreamClient.openStream(R,{playURL:re.playURL},function(He){if(He.errorCode&&He.errorCode!="1"&&(re.EventCallback&&re.EventCallback.pluginErrorHandler&&re.EventCallback.pluginErrorHandler(re.g_port,He.errorCode,He),et()),He.bHead){re.EventCallback&&re.EventCallback.getStreamHeaderCallback&&re.EventCallback.getStreamHeaderCallback(),re.aHead=new Uint8Array(He.buf),re.secretKey&&J.JSPlayM4_SetSecretKey(re.secretKey);try{var G=function(wt,pt){var Dt=new RegExp("(^|&)"+wt+"=([^&]*)(&|$)","i"),St=pt.match(Dt);return St!=null?unescape(St[2]):null},ge=G("begin",oParams.playURL),xe=parseInt(ge.slice(0,4)),ke=parseInt(ge.slice(4,6)),ce=parseInt(ge.slice(6,8)),X=parseInt(ge.slice(9,11)),Be=parseInt(ge.slice(11,13)),lt=parseInt(ge.slice(13,15))+3,dt=J.JSPlayM4_SetGlobalBaseTime(xe,ke,ce,X,Be,lt,0)}catch(yt){console.log("JSPlayM4_SetGlobalBaseTime:",yt)}re.bPlay=!0,re.bPlayIng=!1;var Lt=J.JSPlayM4_SetFrameInfoCallBack(1);Lt!=1&&J.JSPlayM4_GetLastError(),J.JSPlayM4_RenderPrivateData(4,1),re.firstFlag=!0,re.firstGetData=!0}else{if(re.firstGetData&&(re.firstGetData=!1,re.EventCallback&&re.EventCallback.getVideoStreamCallback&&re.EventCallback.getVideoStreamCallback()),re.firstFlag){var qt=J.JSPlayM4_GetFrameInfo(),Si=qt.width,he=qt.height;re.nWidth=Si,re.nHeight=he,Si&&(re.EventCallback&&re.EventCallback.appearFirstFrameCallback&&re.EventCallback.appearFirstFrameCallback(),re.EventCallback&&re.EventCallback.averageStreamSuccessCallback&&re.EventCallback.averageStreamSuccessCallback(),re.firstFlag=!1)}var Bi=new Uint8Array(He.buf);He.statusString?re.EventCallback&&re.EventCallback.pluginErrorHandler&&re.EventCallback.pluginErrorHandler(0,1001,He):He.type&&He.type==="exception"&&re.EventCallback&&re.EventCallback.pluginErrorHandler&&re.EventCallback.pluginErrorHandler(0,1002,He),J.JSPlayM4_InputData(Bi,Bi.length),Bi=null}re.szStorageUUID&&re.oStorageManager.inputData(re.szStorageUUID,He.buf)},function(){re.bPlay&&re.EventCallback&&re.EventCallback.pluginErrorHandler&&re.EventCallback.pluginErrorHandler(iWndNum,1003),re.bPlayIng=!1,et()}).then(function(He){re.szStreamUUID=He,re.oStreamClient.startPlay(He).then(function(){var G=J.JSPlayM4_Pause(0);G?(re.bPlay=!0,re.bPlayIng=!0,re.bPause=!1,re.bPauseDate=null,Ye(G)):et()}).catch(function(G){re.bPlayIng=!1,et(G.oError)})},function(He){re.bPlayIng=!1,re._doRelease(),et(He)})}});return De}},{key:"JS_FECCorrectType",value:function(I,L){var re=this;return this.FECSplitIds=L,this.correctType=I,new Promise(function(J,De){var Ye=re._createSplitVideos(I,L),et=Ye.find(function(R){return R.code===-1});et||Ye.length===0?De(Ye):J(Ye)})}},{key:"JS_FECSetParam2D",value:function(I,L){var re=window["wasmplayer-".concat(this.szId)];return re.JSPlayM4_FEC_SetParam(I,L)}},{key:"_createSplitVideos",value:function(I,L){var re=this,J="".concat(re.szId,"-player");L=J+","+L;var De=L?L.split(","):[],Ye=window["wasmplayer-".concat(re.szId)],et=[];if(I.correctList&&I.correctList.length>0){for(var R=0;R<I.correctList.length;R++)if(!(R===0&&I.correctList[R].hidden)){if(R===0){ce(I.correctList[0]);continue}if(!De[R]||!document.getElementById(De[R])||document.getElementById(De[R]).nodeName!=="CANVAS")return[];var He=Ye.JSPlayM4_FEC_GetPort(I.place,I.correctList[R].correctType),G=Ye.JSPlayM4_FEC_Enable(He),ge=Ye.JSPlayM4_FEC_SetWnd(He,De[R]),xe={upDateType:re._matchUpDateType(I.correctList[R].correctType),fValue:0,fPTZParam:{fPTZPositionX:I.correctList[R].x||0,fPTZPositionY:I.correctList[R].y||0},fPTZZoom:1e-5},ke=re.JS_FECSetParam2D(He,xe);G===0||ge===0||ke===0?et.push({code:-1,msg:"失败",port:He,id:De[R]}):(et.push({code:0,msg:"成功",port:He,id:De[R]}),re.canvasFECSubPort.set(De[R],gr(gr({},Y),{},{port:He,param2d:xe,startPTZPosition:{x:xe.fPTZParam.fPTZPositionX,y:xe.fPTZParam.fPTZPositionY}})),document.getElementById(De[R]).setAttribute("data-port",He),re._spliceCanvasMouseEvents(De[R],I.correctList[R]))}}else ce(I);function ce(X){var Be={upDateType:re._matchUpDateType(X.correctType),fValue:0,fPTZParam:{fPTZPositionX:X.x||0,fPTZPositionY:X.y||0},fPTZZoom:1e-5},lt=re.canvasFECSubPort.get(J),dt=lt.port;if(dt===void 0)return console.log("this canvas not display"),et;var Lt=Ye.JSPlayM4_FEC_ResetCorrectType(dt,I.place,X.correctType);if(Lt===1)et.push({code:0,msg:"成功",port:dt,id:J});else{et.push({code:-1,msg:"失败",port:dt,id:J});return}X.correctType<=me?re.JS_FECSetParam2D(dt,Be):X.viewParam&&setTimeout(function(){typeof X.viewParam.x=="number"&&typeof X.viewParam.y=="number"&&(Ye.JSPlayM4_FEC_SetViewParam(dt,2,X.viewParam.x),Ye.JSPlayM4_FEC_SetViewParam(dt,1,X.viewParam.y)),typeof X.viewParam.zoom=="number"&&Ye.JSPlayM4_FEC_SetViewParam(dt,3,X.viewParam.zoom)},200),re.canvasFECSubPort.set(J,gr(gr({},Y),{},{port:dt,param2d:Be,startPTZPosition:{x:Be.fPTZParam.fPTZPositionX,y:Be.fPTZParam.fPTZPositionY}})),re._spliceCanvasMouseEvents(J,X)}return et}},{key:"_matchUpDateType",value:function(I){switch(I){case me:return 4;case kt:return 8}return 2}},{key:"_spliceCanvasMouseEvents",value:function(I,L){if(I===void 0)return;var re=document.getElementById(I);if(re===null)return;var J=this,De=window["wasmplayer-".concat(J.szId)],Ye=re.getAttribute("id"),et=J.canvasFECSubPort.get(Ye);if(et.port===void 0)return;var R=re.width,He=re.height;function G(ce){var X=[ce.clientX,ce.clientY];et.diff.y=X[1]-et.start.y;var Be=(et.total.y+et.diff.y)/He*2*Math.PI,lt=(X[1]-et.lastCorrdsY)/(He*2),dt=Math.atan2(et.startPTZPosition.y-.5,et.startPTZPosition.x-.5),Lt=et.startPTZPosition.x+lt*Math.cos(dt),qt=et.startPTZPosition.y+lt*Math.sin(dt);et.diff.x=X[0]-et.start.x;var Si=(et.total.x+et.diff.x)/R*2*Math.PI,he=Math.sqrt(Math.pow(Lt-.5,2)+Math.pow(qt-.5,2)),Bi=-Si,yt=.5+he*Math.cos(Bi),wt=.5+he*Math.sin(Bi);if(L.correctType<=me){switch(L.correctType){case me:et.param2d.upDateType=4;break;case ee:et.param2d.upDateType=4;break;case kt:et.param2d.upDateType=8;var pt=Math.sqrt(Math.pow(yt-.5,2)+Math.pow(wt-.5,2));if(pt>.4)return;break}et.param2d.fValue=Si,et.param2d.fPTZParam.fPTZPositionX=yt,et.param2d.fPTZParam.fPTZPositionY=wt,De.JSPlayM4_FEC_SetParam(et.port,et.param2d)}else L.correctType===P&&(De.JSPlayM4_FEC_SetViewParam(et.port,2,Si),De.JSPlayM4_FEC_SetViewParam(et.port,1,Be))}var ge=function(){};function xe(ce){et.start.x=ce.pageX,et.start.y=ce.pageY,et.lastCorrdsY=ce.pageY,ge=function(Be){G(Be)},re.addEventListener("mousemove",ge)}re.addEventListener("mousedown",xe);var ke=function(){ge!==null&&(re.removeEventListener("mousemove",ge),ge=null,et.total.x+=et.diff.x,et.total.y+=et.diff.y)};re.addEventListener("mouseup",ke),re.addEventListener("mouseleave",ke),re.addEventListener("mouseout",ke)}},{key:"_colseFECAllSubWnd",value:function(){if(this.FECSplitIds&&this.canvasFECSubPort){var I=this.FECSplitIds.split(","),L=qo(I),re;try{for(L.s();!(re=L.n()).done;){var J=re.value;if(J){var De=this.canvasFECSubPort.get(J);if(De===void 0||De.port===void 0)continue;this.canvasFECSubPort.delete(J);var Ye=window["wasmplayer-".concat(this.szId)];Ye.JSPlayM4_FEC_Disable(De.port,!0),Ye.JSPlayM4_FEC_DelPort(De.port)}}}catch(et){L.e(et)}finally{L.f()}}}},{key:"FEC_Set3DViewParam",value:function(I){var L=window["wasmplayer-".concat(this.szId)];if(this.FECSplitIds&&this.canvasFECSubPort&&this.correctType){var re=L.JSPlayM4_FEC_SetViewParam(I.port,I.upDateType,I.fValue);return re===1?Promise.resolve(!0):Promise.reject(!1)}return Promise.reject(void 0)}},{key:"FEC_Get3DViewParam",value:function(I){var L=this,re=window["wasmplayer-".concat(this.szId)];return new Promise(function(J,De){var Ye=function(He){J(He)};if(L.FECSplitIds&&L.canvasFECSubPort&&L.correctType){var et=re.JSPlayM4_FEC_GetViewParam(I.port,I.upDateType,Ye);if(et!==1)return De(!1)}return De(void 0)})}}]),N}();return window.JSPluginV3=Oe,Oe})})(Of);var Nf=function(){function Z(m,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(m,o.key,o)}}return function(m,t,n){return t&&Z(m.prototype,t),n&&Z(m,n),m}}();function jf(Z,m){if(!(Z instanceof m))throw new TypeError("Cannot call a class as a function")}var x0=function(){var Z=void 0;return function(m){return m&&(Z=m),Z}}();(function(){function Z(){if(jf(this,Z),x0())return x0();if(Z.unique!==void 0)return Z.unique;Z.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var m=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new m,this.writeString=function(t,n,o){for(var l=0;l<o.length;l++)t.setUint8(n+l,o.charCodeAt(l))},this.setBufferToDataview=function(t,n,o){for(var l=0;l<o.length;l++,n++)t.setUint8(n,o[l])},x0(this)}return Nf(Z,[{key:"Play",value:function(t,n,o){var l=new ArrayBuffer(44+n),d=new DataView(l),c=o.samplesPerSec,E=o.channels,C=o.bitsPerSample;this.writeString(d,0,"RIFF"),d.setUint32(4,32+n*2,!0),this.writeString(d,8,"WAVE"),this.writeString(d,12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,E,!0),d.setUint32(24,c,!0),d.setUint32(28,c*2,!0),d.setUint16(32,E*C/8,!0),d.setUint16(34,C,!0),this.writeString(d,36,"data"),d.setUint32(40,n,!0),this.setBufferToDataview(d,44,t);var y=this;return this.oAudioContext.decodeAudioData(d.buffer,function(w){var g=y.oAudioContext.createBufferSource();if(g==null)return-1;g.buffer=w,g.start(0),(y.gainNode==null||y.bSetVolume)&&(y.gainNode=y.oAudioContext.createGain(),y.bSetVolume=!1),y.gainNode.gain.value=y.currentVolume/100,y.gainNode.connect(y.oAudioContext.destination),g.connect(y.gainNode)},function(w){return console.log("decode error"),-1}),0}},{key:"Stop",value:function(){return this.gainNode!=null&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(t){return this.bSetVolume=!0,this.currentVolume=t,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(t){this.iWndNum=t;var n=this.mVolumes.get(t);return n==null&&(n=80),this.currentVolume=n,!0}},{key:"GetVolume",value:function(){var t=this.mVolumes.get(this.iWndNum);return t==null&&(t=80),t}}]),window.AudioRenderer=Z,Z})();var Uf=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join(`
`),Hf=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join(`
`);(function(Z,m){window.SuperRender=m()})(void 0,function(){function Z(m){this.canvasElement=document.getElementById(m),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(Uf,Hf),this.initBuffers(),this.initTextures())}return Z.prototype.initContextGL=function(){var m=this.canvasElement,t=null;try{t=m.getContext("webgl")||m.getContext("experimental-webgl")}catch{t=null}(!t||typeof t.getParameter!="function")&&(t=null),this.contextGL=t,console.log("WebGL1.0")},Z.prototype.initProgram=function(m,t){var n=this.contextGL,o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,m),n.compileShader(o),n.getShaderParameter(o,n.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+n.getShaderInfoLog(o));var l=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(l,t),n.compileShader(l),n.getShaderParameter(l,n.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+n.getShaderInfoLog(l));var d=n.createProgram();return n.attachShader(d,o),n.attachShader(d,l),n.linkProgram(d),n.getProgramParameter(d,n.LINK_STATUS)||console.log("Program failed to compile: "+n.getProgramInfoLog(d)),n.deleteShader(o),n.deleteShader(l),d},Z.prototype.initBuffers=function(){var m=this.contextGL,t=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,t),m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),m.STATIC_DRAW),m.bindBuffer(m.ARRAY_BUFFER,null);var n=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,n),m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),m.DYNAMIC_DRAW),m.bindBuffer(m.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=n},Z.prototype.initTexture=function(){var m=this.contextGL,t=m.createTexture();return m.bindTexture(m.TEXTURE_2D,t),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.bindTexture(m.TEXTURE_2D,null),t},Z.prototype.initTextures=function(){var m=this.contextGL,t=this.YUVProgram;m.useProgram(t);var n=this.initTexture(),o=m.getUniformLocation(t,"ySampler");m.uniform1i(o,0),this.yTextureRef=n;var l=this.initTexture(),d=m.getUniformLocation(t,"uSampler");m.uniform1i(d,1),this.uTextureRef=l;var c=this.initTexture(),E=m.getUniformLocation(t,"vSampler");m.uniform1i(E,2),this.vTextureRef=c,m.useProgram(null)},Z.prototype.SR_DisplayFrameData=function(m,t,n,o,l){if(!(m<=0||t<=0)){var d=this.contextGL;if(n==null){d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT);return}var c=this.canvasElement;this.nWindowWidth=c.width,this.nWindowHeight=c.height;var E=this.nWindowWidth,C=this.nWindowHeight;d.clearColor(.8,.8,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT),d.viewport(0,0,E,C),this.updateFrameData(m,t,n,o,l);var y=this.YUVProgram;d.useProgram(y);var w=this.vertexPosBuffer;d.bindBuffer(d.ARRAY_BUFFER,w);var g=d.getAttribLocation(y,"vertexPos");d.enableVertexAttribArray(g),d.vertexAttribPointer(g,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,null);var p=this.texturePosBuffer;d.bindBuffer(d.ARRAY_BUFFER,p);var te=d.getAttribLocation(y,"texturePos");d.enableVertexAttribArray(te),d.vertexAttribPointer(te,2,d.FLOAT,!1,0,0),d.bindBuffer(d.ARRAY_BUFFER,null),d.drawArrays(d.TRIANGLE_STRIP,0,4),d.disableVertexAttribArray(g),d.disableVertexAttribArray(te),d.useProgram(null)}},Z.prototype.updateFrameData=function(m,t,n,o,l){var d=this.contextGL,c=this.yTextureRef,E=this.uTextureRef,C=this.vTextureRef,y=n;if(m==o&&t==l){var w=m*t,g=y.subarray(0,w);d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,m,t,0,d.LUMINANCE,d.UNSIGNED_BYTE,g);var p=m/2*t/2,te=y.subarray(m*t,m*t+p);d.activeTexture(d.TEXTURE2),d.bindTexture(d.TEXTURE_2D,C),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,m/2,t/2,0,d.LUMINANCE,d.UNSIGNED_BYTE,te);var ae=p,de=y.subarray(m*t+m*t/4,m*t+m*t/4+ae);d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,E),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,m/2,t/2,0,d.LUMINANCE,d.UNSIGNED_BYTE,de)}else{for(var w=o*l,g=new Uint8Array(w),ie=0;ie<l;ie++)for(var we=y.subarray(ie*m,ie*m+o),Ve=0;Ve<o;Ve++)g[ie*o+Ve]=we[Ve];d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,c),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,o,l,0,d.LUMINANCE,d.UNSIGNED_BYTE,g),g=null,we=null;for(var p=o/2*l/2,te=new Uint8Array(p),ie=0;ie<l/2;ie++)for(var ue=y.subarray(m*t+ie*m/2,m*t+ie*m/2+o/2),Ve=0;Ve<o/2;Ve++)te[ie*o/2+Ve]=ue[Ve];d.activeTexture(d.TEXTURE2),d.bindTexture(d.TEXTURE_2D,C),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,o/2,l/2,0,d.LUMINANCE,d.UNSIGNED_BYTE,te),te=null,ue=null;for(var ae=p,de=new Uint8Array(ae),ie=0;ie<l/2;ie++)for(var x=y.subarray(m*t*5/4+ie*m/2,m*t*5/4+ie*m/2+o/2),Ve=0;Ve<o/2;Ve++)de[ie*o/2+Ve]=x[Ve];d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,E),d.texImage2D(d.TEXTURE_2D,0,d.LUMINANCE,o/2,l/2,0,d.LUMINANCE,d.UNSIGNED_BYTE,de),de=null,x=null}},Z.prototype.SR_SetDisplayRect=function(m){var t=this.contextGL,n=this.nWindowWidth,o=this.nWindowHeight,l=null;if(m&&n>0&&o>0){var d=m.left/n,c=m.top/o,E=m.right/n,C=m.bottom/o;l=new Float32Array([E,c,d,c,E,C,d,C])}else l=new Float32Array([1,0,0,0,1,1,0,1]);var y=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,y),t.bufferSubData(t.ARRAY_BUFFER,0,l),t.bindBuffer(t.ARRAY_BUFFER,null)},Z.prototype.SR_Destroy=function(){var m=this.contextGL,t=this.YUVProgram;m.deleteProgram(t);var n=this.vertexPosBuffer,o=this.texturePosBuffer;m.deleteBuffer(n),m.deleteBuffer(o);var l=this.yTextureRef,d=this.uTextureRef,c=this.vTextureRef;m.deleteTexture(l),m.deleteTexture(d),m.deleteTexture(c)},Z});var td="https://openstatic.ys7.com",Vf="".concat(td,"/ezuikit_js/ezuikit_static/v65/v3"),Gf="".concat(td,"/ezuikit_js/ezuikit_static/v65/v1"),p0=function(m,t){var n=["theme","standard"],o=["pcLive","pcRec","mobileLive","mobileRec","noData","security","voice","simple","mobileCall","miniRec"];if(typeof m>"u")return t.themeData?{templateType:"themeData",templateId:"themeData"}:{templateType:"local",templateId:""};if(typeof m=="string"){if(m.length===32)return{templateType:"remote",templateId:m};if(n.indexOf(m)!==-1)return m==="simple"&&typeof t.header>"u"&&typeof t.footer>"u"?{templateType:"local",templateId:""}:{templateType:"iframe",templateId:m};if(o.indexOf(m)!==-1)return t.url.indexOf("rec")!=-1&&t.template!="simple"&&t.id!="miniRec"?{templateType:"local",templateId:Ko()?"mobileRec":"pcRec"}:{templateType:"local",templateId:m};if(t&&t.isCall)return{templateType:"invalid",templateId:m}}},$a=function(){var m=window.navigator.userAgent.toLowerCase(),t={sa:/version.*safari/.test(m),ch:/chrome/.test(m),ff:/gecko/.test(m)&&!/webkit/.test(m)};if(Ko())return!1;if(t.ch){var n=function(){for(var l=window.navigator.userAgent.split(" "),d="",c=0;c<l.length;c++)/chrome/i.test(l[c])&&(d=l[c]);return d?Number(d.split("/")[1].split(".")[0]):!1};return n()>91&&!!window.SharedArrayBuffer}return!1},id=function(){function Z(m){var t=this;En(this,Z),this.isStoping=!1;var n=m.autoplay,o=n===void 0?!0:n;if((m.template||m.themeData)&&(o=!1),this.params=m,this.autoplay=o,this.talkChannelNo=m.talkChannelNo||null,this.eventEmitter=new If,window.EZUIKit[m.id]={state:{EZUIKitPlayer:{init:window.EZUIKit[m.id]&&window.EZUIKit[m.id].state&&window.EZUIKit[m.id].state.EZUIKitPlayer.init||!1,themeInit:window.EZUIKit[m.id]&&window.EZUIKit[m.id].state&&window.EZUIKit[m.id].state.EZUIKitPlayer.themeInit||!1,talkInit:window.EZUIKit[m.id]&&window.EZUIKit[m.id].state&&window.EZUIKit[m.id].state.EZUIKitPlayer.talkInit||!1}}},p0(this.params.template,m).templateType!=="iframe"){this.id=m.id,this.width=m.width,this.height=m.height,this.fullScreenWidth=0,this.fullScreenHeight=0,this.isCall=m.isCall||!1,this.isWebConsole=m.isWebConsole||!1,this.callTime=m.callTime||null,this.hangUpCallback=m.hangUpCallback||null,this.isNeedBellRing=m.isNeedBellRing!==!1,this.url=m.url,this.accessToken=m.accessToken,this.deviceSerial=pn(m.url).deviceSerial,this.channelNo=pn(m.url).channelNo,this.themeId=p0(m.template,m).templateId,this.sourceThemeId=p0(m.template,m).templateId,this.id=m.id,this.audio=!0,this.poster=m.poster,this.speed=1,this.disabledTimeLine=!1,this.disabledPTZ=!1,this.enableSharedArrayBufferGuide=!1,this.capacity=null,this.playTimer=null,this.env={domain:"https://open.ys7.com"},this.isMobile=Ko(),this.support3DZoom=!1,this.use3DZoom=!1,this.is3DZooming=!1,this.useHardDev=typeof m.useHardDev<"u"?m.useHardDev:!1,this.isInspect=m.isInspect||!1,this.inspectRecordingDuration=m.inspectRecordingDuration||4*60*60*1e3,this.inspectVideoWidth=m.inspectVideoWidth||290,this.inspectVideoHeight=m.inspectVideoHeight||170,this._FECCorrectType=null,this._FECSplitIds="",document.getElementById("".concat(this.id,"-wrap"))&&(document.getElementById("".concat(this.id,"-wrap")).innerHTML="",document.getElementById("".concat(this.id,"-wrap")).id=this.id),this.staticPath=Gf;var l=!this.useHardDev&&$a()||this.useHardDev&&!this._IsSupHardDecAVC()&&!this._IsSupHardDecHEVC()&&$a()||this.useHardDev&&(this._IsSupHardDecAVC()||this._IsSupHardDecHEVC()||$a());this.isV3=l,l&&(this.staticPath=Vf),typeof m.staticPath=="string"&&(m.staticPath.startsWith("http")?this.staticPath=m.staticPath:this.staticPath=window.location.protocol+"//"+window.location.host+m.staticPath,l?this.staticPath+="/v3":this.staticPath+="/v1"),typeof m.audio<"u"&&(this.audio=m.audio),typeof m.env<"u"&&(this.env=Object.assign(this.env,m.env)),typeof m.isMobile<"u"&&(this.isMobile=m.isMobile),typeof m.disabledTimeLine<"u"&&(this.disabledTimeLine=m.disabledTimeLine),typeof m.disabledPTZ<"u"&&(this.disabledPTZ=m.disabledPTZ),typeof m.enableSharedArrayBufferGuide<"u"&&(this.enableSharedArrayBufferGuide=m.enableSharedArrayBufferGuide);var d=function(){if($a())console.log("启用多线程解析视频");else{var E=function(){for(var de=navigator.userAgent.split(" "),ie="",we=0;we<de.length;we++)/chrome/i.test(de[we])&&(ie=de[we]);return ie?Number(ie.split("/")[1].split(".")[0]):!1};if(!Ko&&91<E&&t.enableSharedArrayBufferGuide){console.log("提示用户开启谷歌实验室特性");var C="".concat(t.id,"-wrap"),y=document.createElement("div"),w=document.createElement("span");w.innerHTML="您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见",y.appendChild(w);var g=document.createElement("a");g.href="https://open.ys7.com/help/384",g.setAttribute("target","_blank"),y.appendChild(g),g.innerHTML="开启说明",y.id="".concat(t.id,"-guide"),y.style="font-size:12px;color:red;",setTimeout(function(){document.getElementById(C)&&document.getElementById(C).insertBefore(y,document.getElementById(t.id))},5e3)}}if(t.pluginStatus=new ys(t,t.id),t.videoInitTime=Date.now(),t.videoPlayState=1,window.monitorExtendsInfo={protocol:"ezopen",url:t.url,serial:t.deviceSerial,no:t.channelNo,env:t.env.domain,type:pn(t.url).type},window.ezuikitMonitor.report({action:1,logInfo:{pluginVersion:l?"v3":"v1",params:m}}),t.initTime=new Date().getTime(),t.autoplay){var p=t.initEZUIKitPlayer(m),te=t._getRealUrlPromise(m.accessToken,m.url);Promise.all([p,te]).then(function(ae){ae[1]?(t.playStartTime=new Date().getTime(),t._pluginPlay(ae[1],function(){if(t.videoPlayState===1||t.videoPlayState===4){t.videoPlayState=2;var de=Date.now();window.ezuikitMonitor.report({action:2,logInfo:{pluginVersion:t.isV3?"v3":"v1",loadTime:de-t.videoInitTime,loadTimeDesc:{initTime:t.playStartTime-t.videoInitTime,stopTime:0,getWsTime:t.doCreateWsTime-t.playStartTime,createWsTime:de-t.doCreateWsTime}}})}console.log("自动播放成功")},function(){console.log("自动播放失败")})):console.log("promise of one",ae),window.EZUIKit[m.id].state.EZUIKitPlayer.init=!0,document.getElementById("".concat(m.id,"canvas_draw0"))&&(document.getElementById("".concat(m.id,"canvas_draw0")).style.border="none")}).catch(function(ae){if(console.log("err",ae),t.videoPlayState===1||t.videoPlayState===4){t.videoPlayState=3;var de=Date.now();window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:t.isV3?"v3":"v1",loadTime:de-t.videoInitTime,err:ae}})}t.Theme&&t.Theme.setDisabled(!0),t.pluginStatus.loadingClear(),t.isInspect?(t.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(t.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:ae&&ae.msg,btnName:"重试",type:1}),t.Theme.jSPlugin.Zoom&&t.Theme.jSPlugin.Zoom.stopZoom(),t.Theme&&t.Theme.inspect&&t.Theme.inspect.InspectEvent&&t.Theme.inspect.InspectEvent.disableEvidenceBtn()):t.pluginStatus.loadingSetText({text:ae&&ae.msg||"获取播放地址失败",color:"red"})})}else{var p=t.initEZUIKitPlayer(m);p.then(function(de){console.log("初始化成功",de),window.EZUIKit[m.id].state.EZUIKitPlayer.init=!0,document.getElementById("".concat(m.id,"canvas_draw0"))&&(document.getElementById("".concat(m.id,"canvas_draw0")).style.border="none"),t.initSuccessTime=new Date().getTime()})}m.plugin&&m.plugin.indexOf("talk")!==-1&&(t.Talk=new Cs(t),window.EZUIKit[m.id].state.EZUIKitPlayer.talkInit=!0),t.getDeviceCapacity()};d()}else return new Df.EZUIKitPlayer(m);this.play=u0(function(c){return t._play(c)},500,!0),this.resume=u0(function(c){return t._resume(c)},500,!0),this.changePlayUrl=u0(function(c,E,C){return t._changePlayUrl(c,E,C)},500),window.addEventListener("beforeunload",function(){console.log("退出页面，停止视频流"),t.stop()})}return Rn(Z,[{key:"_getExplore",value:function(){var t={},n=navigator.userAgent.toLowerCase(),o;if((o=n.match(/rv:([\d.]+)\) like gecko/))||(o=n.match(/msie ([\d\.]+)/))?t.ie=o[1]:(o=n.match(/edge\/([\d\.]+)/))?t.edge=o[1]:(o=n.match(/firefox\/([\d\.]+)/))?t.firefox=o[1]:(o=n.match(/(?:opera|opr).([\d\.]+)/))?t.opera=o[1]:(o=n.match(/chrome\/([\d\.]+)/))?t.chrome=o[1]:(o=n.match(/version\/([\d\.]+).*safari/))&&(t.safari=o[1]),t.chrome){var l=t.chrome,d=l.indexOf("."),c=Number(l.substring(0,d));return c}else t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red"):t.firefox?console.info("%c1>your browser is Firefox ,it only support soft decode","color: red"):console.info("%c1>your browser does not support play without plugin","color: red");return-1}},{key:"_IsSupHardDecAVC",value:function(t){var n=this._getExplore();return n>=94?(t&&t(!0),!0):(t&&t(!1),!1)}},{key:"_IsSupHardDecHEVC",value:function(t){var n=!1,o=this._getExplore();if(o>=107){var l={codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"};VideoDecoder.isConfigSupported(l).then(function(d){d.supported?(n=!0,t&&t({bSupHardDecHEVC:n})):t&&t({bSupHardDecHEVC:n})})}else t&&t({bSupHardDecHEVC:n})}},{key:"initEZUIKitPlayer",value:function(t){var n=this,o=t.id,l=t.width,d=l===void 0?600:l,c=t.height,E=c===void 0?400:c;if(!t.width||!t.height){var C=document.getElementById(o).getBoundingClientRect();!t.width&&C.width>0&&(d=C.width),!t.height&&C.height>0&&(E=C.height)}if(!document.getElementById("".concat(o,"-wrap"))){var y=document.createElement("div");y.id="".concat(o,"-wrap"),y.style="display:inline-block;width:".concat(d,"px;position:relative;vertical-align: bottom;"),document.getElementById(o).parentNode.insertBefore(y,document.getElementById(o)),document.getElementById(o).parentNode.removeChild(document.getElementById(o)),this.isInspect&&(y.style.height="".concat(E,"px"),this.width-=this.inspectVideoWidth,this.height-=this.inspectVideoHeight,d=this.width,E=this.height),y.innerHTML="<div id=".concat(o,"></div>"),document.getElementById(o).style="display:inline-block;width:".concat(d,"px;height:").concat(E,"px;"),document.getElementById(o).style.verticalAlign="top"}this.themeId&&(console.log(this.themeId),t.isCall==!0?this.Theme=new uf(this,t.id):t.isInspect==!0?this.Theme=new kf(this):this.Theme=new Qu(this,t.id),window.EZUIKit[t.id].state.EZUIKitPlayer.themeInit=!0,typeof this.params.handleThemeChange=="function"&&(this.handleThemeChange=this.params.handleThemeChange));var w=new vu(this,o);this.Message=w;var g=function(ae,de){console.log("开始初始化decoder：",new Date().getTime());var ie=n,we;!n.useHardDev&&$a()||n.useHardDev&&!n._IsSupHardDecAVC()&&!n._IsSupHardDecHEVC()&&$a()||n.useHardDev&&(n._IsSupHardDecAVC()||n._IsSupHardDecHEVC()||$a())?we=new window.JSPluginV3({szId:o,iType:2,iWidth:d,iHeight:E,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",useHardDev:n.useHardDev,isHardH264:n._IsSupHardDecAVC(),isHardH265:n._IsSupHardDecHEVC(),isSharedArrayBuffer:$a(),staticPath:n.staticPath,oStyle:{border:"none",background:"#000000"}}):we=new window.JSPluginV1({szId:o,iType:2,iWidth:d,iHeight:E,iMaxSplit:1,iCurrentSplit:1,szBasePath:"",staticPath:n.staticPath,oStyle:{border:"none",background:"#000000"}}),n.pluginStatus.loadingStart(o),n.isCall||n.isInspect?n.pluginStatus.loadingSetText({text:"视频加载中"}):n.themeId=="miniRec"?n.pluginStatus.loadingSetText({text:""}):n.pluginStatus.loadingSetText({text:"初始化播放器完成"});var Ve=!1;we.EventCallback={openStreamCallback:function(){console.log("开启取流---v1"),n.openStreamTime=new Date().getTime(),Ve=!1},getStreamHeaderCallback:function(){console.log("完成取流返回流头"),n.getStreamHeaderTime=new Date().getTime(),Ve=!1},getVideoStreamCallback:function(){console.log("返回视频流(首次)"),n.getVideoStreamTime=new Date().getTime(),n.isCall&&n.Theme&&n.Theme.decoderState&&n.Theme.decoderState.state.rejection&&(console.log("挂断/拒绝状态------------stop"),n.stop(function(){n.pluginStatus.loadingClear(),n.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:n.isMobile,type:2})})),n.isInspect&&n.Theme.decoderState.state.play&&(n.Theme.inspectMode!=="map"&&n.Theme.jSPlugin.Zoom&&setTimeout(function(){n.Theme.jSPlugin.Zoom.startZoom()},1e3),n.Theme&&n.Theme.inspect&&n.Theme.inspect.InspectEvent&&n.Theme.inspect.InspectEvent.enableEvidenceBtn())},appearFirstFrameCallback:function(){console.log("出现首帧画面（播放成功）"),n.appearFirstFrameTime=new Date().getTime()},averageStreamSuccessCallback:function(){n.averageStreamSuccessTime=n.initSuccessTime-n.initTime+(n.gotWsUrlTime-n.startGetWsUrlTime)+(n.appearFirstFrameTime-n.openStreamTime),console.log("平均成功取流的出流耗时:",n.averageStreamSuccessTime)},loadEventHandler:function(){},zoomEventResponse:function(){},windowEventSelect:function(O){},pluginErrorHandler:function(O,ne,Q){if(!(n.isCall&&n.Theme&&n.Theme.decoderState&&n.Theme.decoderState.state.rejection))if(ne===1003)console.log("断流"),n.Theme&&n.Theme.setDecoderState({play:!1}),n.pluginStatus.setPlayStatus({play:!1}),we.bPlay||(n.pluginStatus.loadingClear(),n.isCall?n.pluginStatus.loadingSetTextWithBtn({text:"连接断开，请重试",color:"white",btnName:n.isMobile?"重试":"重新加载",isMobile:n.isMobile,type:n.isCall?1:2}):n.isInspect?(n.pluginStatus.loadingSetTextWithBtn({mask:!0,text:"连接断开，请重试",btnName:"重试",type:1}),n.Theme.jSPlugin.Zoom&&n.Theme.jSPlugin.Zoom.stopZoom(),n.Theme&&n.Theme.inspect&&n.Theme.inspect.InspectEvent&&n.Theme.inspect.InspectEvent.disableEvidenceBtn()):n.pluginStatus.loadingSetText({text:"连接断开，请重试",color:"red"})),typeof n.params.handleError=="function"&&n.params.handleError({msg:"连接断开，请重试",retcode:1003,id:n.params.id,type:"handleError"});else if(Q.errorCode!=1){var ye=Date.now();n.videoPlayState===1||n.videoPlayState===4?(n.videoPlayState=3,window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:n.isV3?"v3":"v1",err:Q,loadTime:ye-n.videoInitTime}})):n.videoPlayState===2&&(n.videoPlayState=5,window.ezuikitMonitor.report({action:5,logInfo:{pluginVersion:n.isV3?"v3":"v1",err:Q,loadTime:ye-n.videoInitTime}})),console.log("errorCode----------",Q.errorCode);var se=n.errorHander.matchErrorInfo(Q.errorCode),Ze="连接断开，请重试";se&&se.msg?Ze=se.msg:se&&se.description&&(Ze=se.description),n.Theme&&n.Theme.setDecoderState({play:!1}),n.pluginStatus.setPlayStatus({play:!1}),n.pluginStatus.loadingClear(),n.isCall?n.pluginStatus.loadingSetTextWithBtn({text:Ze,color:"white",btnName:n.isMobile?"重试":"重新加载",isMobile:n.isMobile}):n.isInspect?(n.Theme.jSPlugin.Zoom&&n.Theme.jSPlugin.Zoom.stopZoom(),n.pluginStatus.loadingSetTextWithBtn({mask:!0,text:Ze,btnName:"重试",type:1}),n.Theme&&n.Theme.inspect&&n.Theme.inspect.InspectEvent&&n.Theme.inspect.InspectEvent.disableEvidenceBtn()):n.pluginStatus.loadingSetText({text:Ze,color:"red"}),typeof n.params.handleError=="function"&&n.params.handleError({msg:Ze,retcode:Q.errorCode,id:n.params.id,type:"handleError"})}else n.pluginStatus.loadingClear(),n.Theme&&n.Theme.setDisabled(!1)},windowEventOver:function(O){},windowEventOut:function(O){},windowEventUp:function(O){},windowFullCcreenChange:function(O){},firstFrameDisplay:function(O,ne,Q){console.log(ne,Q),we.JS_SetCanFullScreen(!1)},performanceLack:function(){},mouseEvent:function(O,ne,Q){},setRunTimeInfoCallBack:function(O,ne,Q,ye,se){se===5&&(ie.pluginStatus.loadingClear(),ie.isInspect?(ie.Theme.jSPlugin.Zoom&&ie.Theme.jSPlugin.Zoom.stopZoom(),ie.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(n.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:"设备已加密",color:"white",btnName:"重试",type:1})):ie.pluginStatus.loadingSetText({text:"设备已加密",color:"red"})),typeof n.params.handleError=="function"&&!Ve&&t.handleError({retcode:-1,data:{nRunTimeModule:O,nStrVersion:ne,nFrameTimeStamp:Q,nFrameNum:ye,nErrorCode:se},id:n.params.id,type:"handleRunTimeInfoError"}),Ve=!0}},n.env={domain:"https://open.ys7.com"},typeof t.env<"u"&&(n.env=Object.assign(n.env,t.env)),typeof t.handleTalkSuccess<"u"&&(n.handleTalkSuccess=t.handleTalkSuccess),typeof t.handleTalkError<"u"&&(n.handleTalkError=t.handleTalkError),n.errorHander=new Cu,n.jSPlugin=we;var ue=setInterval(function(){window.JSPlayerModuleLoaded&&(clearInterval(ue),typeof n.params.handleInitSuccess=="function"&&n.params.handleInitSuccess({retcode:0,id:n.params.id,type:"handleInitSuccess"}),ae({meta:{retcode:200,msg:"初始化成功"}}))},50)},p=new Promise(g);return p}},{key:"_getRealUrlPromise",value:function(t,n){var o=this;console.log("开始获取ws播放地址： url => ".concat(n," ").concat(this.accessToken)),this.startGetWsTime=Date.now(),this.startGetWsUrlTime=new Date().getTime();var l=this.env.domain;this.env&&(l=this.env.domain);var d=function(y,w){var g="",p=l+"/api/lapp/live/url/ezopen",te=new FormData;te.append("ezopen",n),te.append("isFlv","false"),te.append("userAgent",window.navigator.userAgent),te.append("isHttp","false"),te.append("accessToken",t),fetch(p,{method:"POST",body:te}).then(function(ae){return ae.json()}).then(function(ae){if(ae.code==200||ae.retcode==0){var de="",ie="";ae.ext&&ae.ext.token?(g+=ae.data,ie=ae.ext.token,de=ae.data):ae.data&&ae.data.token&&(g+=ae.data.url,ie=ae.data.token,de=ae.data.url);var we=n.indexOf("live")!==-1?"live":"playback";we==="live"?g=g+"&ssn="+ie+"&auth=1&biz=4&cln=100":g=g+"&ssn="+ie+"&auth=1&cln=100",console.log(g);var Ve=ar("checkCode",g);if(Ve&&(typeof o.jSPlugin.decoderVersion<"u"&&o.jSPlugin.decoderVersion==="2.0"?o.validateCode=Ve:(console.log("设置密钥",Ve),o.validateCode=Ve,o.jSPlugin.JS_SetSecretKey(0,Ve))),g.indexOf("playback")!==-1){var ue=ar("begin",de)||ar("begin",n),x=ar("end",de)||ar("end",n);if(ue)g=g.replace("&begin="+ar("begin",de),"&begin="+c(ue,"000000")),ar("begin",g)||(g+="&begin="+c(ue,"000000"));else{var O=new Date;g=g+"&begin="+O.Format("yyyyMMdd")+"T000000Z"}if(x?(g=g.replace("&end="+ar("end",de),"&end="+c(x,"235959")),ar("end",g)||(g+="&end="+c(x,"235959"))):g=g+"&end="+c(ar("begin",g).substr(0,8),"235959"),ar("stream",de)||(g=g.replace("stream","&stream")),n.indexOf(".cloud")!==-1){var ne=function(wi){if(wi.code==200){var ui=[];if(wi.data&&wi.data.files&&wi.data.files.length>0){var di=wi.data.files,zi=new Date().getTime(),$e=wi.data.isAll;if($e){ui=Ne(di);var st=JSON.stringify(ui).replace("\\","");g+="&recSlice="+st.replace("\\","")+"&r="+Math.random(),y(g)}else{var Ke=function at(){function Ut(Wt){if(Wt.data&&Wt.data.files&&Wt.data.files.length>0)if(Wt.data.isAll==!1)Wt.data.files&&(di=di.concat(Wt.data.files)),zi=Wt.data.nextFileTime>0?Wt.data.nextFileTime:new Date().getTime(),at();else{ui=Ne(di);var kt=JSON.stringify(ui).replace("\\","");g+="&recSlice="+kt.replace("\\","")+"&r="+Math.random(),y(g)}else{ui=Ne(di);var kt=JSON.stringify(ui).replace("\\","");g+="&recSlice="+kt.replace("\\","")+"&r="+Math.random(),y(g)}}M.startTime=zi,Ca(Qe,"POST",M,"",Ut)};Ke()}}else w({retcode:-1,msg:"未找到录像片段"})}else w({retcode:-1,msg:"未找到录像片段"});function Ne(at){var Ut=[];return at.forEach(function(Wt,kt){Ut.length==0||Wt.downloadPath!==Ut[Ut.length-1].downloadPath?Ut.push({downloadPath:Wt.downloadPath,ownerId:Wt.ownerId,iStorageVersion:Wt.iStorageVersion,videoType:Wt.videoType,iPlaySpeed:0,startTime:Wt.startTime,endTime:Wt.endTime}):Ut[Ut.length-1].endTime=Wt.endTime}),Ut}},Q=E(ar("begin",g)),ye=E(ar("end",g)),se=ar("serial",g),Ze=ar("chn",g),Qe=l+"/api/lapp/video/by/time",M={accessToken:o.accessToken,recType:1,deviceSerial:se,channelNo:Ze,startTime:Q,endTime:ye,version:"2.0"};Ca(Qe,"POST",M,"",ne)}else if(n.indexOf("alarmId")!==-1){var Te=function(Ke){if(Ke.code==200){var Ne=[];if(Ke.data){Ne=Ut([Ke.data]);var at=JSON.stringify(Ne).replace("\\","");g+="&recSlice="+at.replace("\\",""),console.log("realUrl",g,Ke.data.recType),Ke.data.recType==1?g=g.replace("/playback","/cloudplayback"):g=g.replace("/cloudplayback","/playback"),y(g)}}function Ut(Wt){var kt=[];return Wt.forEach(function(ee,me){kt.length==0||ee.downloadPath!==kt[kt.length-1].downloadPath?kt.push({downloadPath:ee.downloadPath,ownerId:ee.ownerId,iStorageVersion:ee.iStorageVersion,videoType:ee.videoType,iPlaySpeed:0,startTime:ee.startTime,endTime:ee.endTime}):kt[kt.length-1].endTime=ee.endTime}),console.log("downloadPathArr",kt),kt}};console.log("进入alarmId回放");var ze=ar("alarmId",g),Q=E(ar("begin",g)),ye=E(ar("end",g)),se=ar("serial",g),Ze=ar("chn",g),Qe=l+"/api/lapp/video/by/id",M={accessToken:o.accessToken,deviceSerial:se,channelNo:Ze,alarmId:ze};Ca(Qe,"POST",M,"",Te)}else y(g)}else y(g)}else o.Theme&&(o.Theme.setDisabled(!0),o.Theme.setDecoderState({play:!1})),o.pluginStatus.setPlayStatus({play:!1}),o.pluginStatus.loadingClear(),o.isInspect?(o.Theme.jSPlugin.Zoom&&o.Theme.jSPlugin.Zoom.stopZoom(),o.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(o.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:ae.msg,color:"white",btnName:"重试",type:1}),o.Theme&&o.Theme.inspect&&o.Theme.inspect.InspectEvent&&o.Theme.inspect.InspectEvent.disableEvidenceBtn()):o.pluginStatus.loadingSetText({text:ae.msg,color:"red"}),typeof o.params.handleError=="function"&&o.params.handleError({retcode:ae.code,msg:ae.msg,id:o.params.id,type:"handleError"}),w(ae)})};return new Promise(function(C,y){return d(C,y)});function c(C,y){var w=/^[0-9]{8}T[0-9]{6}Z$/;if(w.test(C))return C;if(/[0-9]{8,14}/.test(C)){var g=6-(14-C.length),p=y.length,te=C+y.substring(g,p);return te.slice(0,8)+"T"+te.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}function E(C){var y=C.slice(0,4),w=C.slice(4,6),g=C.slice(6,8),p=C.slice(9,11),te=C.slice(11,13),ae=C.slice(13,15),de=y+"-"+w+"-"+g+" "+p+":"+te+":"+ae;return new Date(de.replace(/-/g,"/")).getTime()}}},{key:"_pluginPlay",value:function(t,n,o){var l=this;if(console.log("执行播放 _pluginPlay",t),!t)return!1;function d(y){var w=y.split("?")[0].replace("/live","").replace("/playback",""),g=(y.indexOf("/live")===-1?y.indexOf("cloudplayback")!==-1?"/cloudplayback?":"/playback?":"/live?")+y.split("?")[1];return g.indexOf("/playback")!==-1&&(g=g.replace("stream=2","stream=1")),{websocketConnectUrl:w,websocketStreamingParam:g}}var c=d(t).websocketConnectUrl;this.env&&this.env.wsUrl&&(c=this.env.wsUrl),this.doCreateWsTime=Date.now(),this.gotWsUrlTime=new Date().getTime();var E={playURL:d(t).websocketStreamingParam};console.log("播放前 stop 阶段 结束"),this.isStoping=!1;var C=Date.now();console.log("执行播放 ... this.jSPlugin.JS_Play at ",C),this.jSPlugin.JS_Play(c,E,0).then(function(){if(console.log("执行播放 ... this.jSPlugin.JS_Play 播放成功",c,E),console.log("执行播放耗时 ",Date.now()-C),l.isStoping){console.log("现在在播放前 stop 阶段，此次应为无效播放成功触发。不执行后续回调， 此次耗时无效");return}if(l.validateCode&&typeof l.jSPlugin.decoderVersion<"u"&&l.jSPlugin.decoderVersion==="2.0"&&l.jSPlugin.JS_SetSecretKey(0,l.validateCode),l.pluginStatus.loadingClear(),l.pluginStatus.setPlayStatus({play:!0,loading:!1}),l.Theme){if(l.Theme.setDecoderState({play:!0}),!l.isCall&&Object.keys(l.Theme.themeData).length>0)var y=vr.findIndex(l.Theme.themeData.footer.btnList,function(w){return w.iconId==="sound"&&w.isrender===1&&w.defaultActive===1})>-1;l.audio=y}l.audio&&setTimeout(function(){l.openSound()},100),typeof l.params.handleSuccess=="function"&&l.params.handleSuccess({retcode:0,id:l.params.id,type:"handleSuccess"}),n(E)},function(y){console.log("err",y);var w="播放失败，请检查设备及客户端网络",g=-1;if(l.jSPlugin.bPlay)return!1;if(y&&y.errorCode){var p=l.errorHander.matchErrorInfo(y.errorCode);l.Theme&&l.Theme.setDisabled(!0),p&&p.msg?w=p.msg:p&&p.description?w=p.description:w="播放失败，请检查设备及客户端网络",g=y.errorCode}l.isCall?l.Theme&&l.Theme.decoderState&&l.Theme.decoderState.state.rejection||(l.pluginStatus.loadingClear(),l.pluginStatus.loadingSetTextWithBtn({text:w,color:"white",btnName:l.isMobile?"重试":"重新加载",isMobile:l.isMobile})):(l.pluginStatus.loadingClear(),l.isInspect?(l.Theme.jSPlugin.Zoom&&l.Theme.jSPlugin.Zoom.stopZoom(),g===5404?document.getElementById("".concat(l.id,"-no-inspect-box"))||l.Theme&&l.Theme.inspectEnding():l.pluginStatus.loadingSetTextWithBtn({mask:!0,text:w,color:"white",btnName:"重试",type:1}),l.Theme&&l.Theme.inspect&&l.Theme.inspect.InspectEvent&&l.Theme.inspect.InspectEvent.disableEvidenceBtn()):l.pluginStatus.loadingSetText({text:w,color:"red"})),typeof l.params.handleError=="function"&&l.params.handleError({retcode:g,msg:w,id:l.params.id,type:"handleError"}),o()})}},{key:"_play",value:function(t){var n=this;console.log("执行播放 play options.url =>",t),this.pluginStatus.setPlayStatus({play:!1,loading:!0}),this.playStartTime=new Date().getTime(),t&&(typeof t=="string"&&(this.url=t),typeof t.url=="string"&&(this.url=t.url),typeof t.accessToken=="string"&&(this.accessToken=t.accessToken),typeof pn(this.url).deviceSerial=="string"&&(this.deviceSerial=pn(this.url).deviceSerial),typeof pn(this.url).channelNo=="string"&&(this.channelNo=pn(this.url).channelNo),this.Theme&&(typeof t.url=="string"||typeof t.accessToken=="string")&&this.Theme.getDeviceInfo(function(l){}));var o=new Promise(function(l,d){console.log("执行 播放前 stop"),n.isStoping=!0,n.jSPlugin.JS_Stop(0).then(function(){n.stopTime=Date.now(),console.log("播放前 stop 执行成功 this.url => ".concat(n.url," ").concat(n.accessToken)),n._getRealUrlPromise(n.accessToken,n.url).then(function(c){n._pluginPlay(c,function(E){if(console.log("---------------------播放成功回调"),console.log("this.videoPlayState",n.videoPlayState),n.eventEmitter&&n.eventEmitter.emit("play",{eventType:"play",code:0,target:n,msg:"播放成功"}),n.videoPlayState===1||n.videoPlayState===4){n.videoPlayState=2;var C=Date.now();window.ezuikitMonitor.report({action:2,logInfo:{pluginVersion:n.isV3?"v3":"v1",loadTime:C-n.videoInitTime,loadTimeDesc:{initTime:n.playStartTime-n.videoInitTime,stopTime:n.stopTime-n.playStartTime,getWsTime:n.doCreateWsTime-n.stopTime,createWsTime:C-n.doCreateWsTime}}})}setTimeout(function(){n.pluginStatus.loadingClear(),n.isCall&&n.Theme&&n.Theme.decoderState&&n.Theme.decoderState.state.rejection&&(console.log("挂断/拒绝状态------------stop"),n.stop(function(){n.pluginStatus.loadingClear(),n.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:n.isMobile,type:2})}))},500),n.jSPlugin&&n._FECSplitIds&&n._FECCorrectType&&n.jSPlugin.JS_FECCorrectType(n._FECCorrectType,n._FECSplitIds),l(!0)},function(){return d(!1)})}).catch(function(c){var E=Date.now();n.videoPlayState===1||n.videoPlayState===4?(n.videoPlayState=3,window.ezuikitMonitor.report({action:3,logInfo:{pluginVersion:n.isV3?"v3":"v1",err:c,loadTime:E-n.videoInitTime}})):n.videoPlayState===2&&(n.videoPlayState=5,window.ezuikitMonitor.report({action:5,logInfo:{pluginVersion:n.isV3?"v3":"v1",err:c,loadTime:E-n.videoInitTime}}));var C=c.msg?c.msg:"播放失败，请检查设备及客户端网络";n.Theme&&n.Theme.setDisabled(!0),n.isCall?n.Theme&&n.Theme.decoderState&&n.Theme.decoderState.state.rejection?c&&c.code==20018?n.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:n.isMobile,type:2}):n.pluginStatus.loadingSetTextWithBtn({text:"通话已结束",color:"white",isMobile:n.isMobile,type:2}):c&&c.code==20018?(n.pluginStatus.loadingSetTextWithBtn({text:"该用户不拥有该设备",color:"white",isMobile:n.isMobile,type:2}),!n.isWebConsole&&n.Theme&&n.Theme.call&&n.Theme.call.userNoDevice()):n.pluginStatus.loadingSetTextWithBtn({text:C,color:"white",btnName:n.isMobile?"重试":"重新加载",isMobile:n.isMobile}):n.isInspect?(n.Theme.jSPlugin.Zoom&&n.Theme.jSPlugin.Zoom.stopZoom(),n.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(n.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:C,color:"white",btnName:"重试",type:1}),n.Theme&&n.Theme.inspect&&n.Theme.inspect.InspectEvent&&n.Theme.inspect.InspectEvent.disableEvidenceBtn()):n.pluginStatus.loadingSetText({text:C,color:"red"}),typeof n.params.handleError=="function"&&n.params.handleError({retcode:c.oError?c.oError.errorCode:-1,msg:C,id:n.params.id,type:"handleError"}),n.eventEmitter&&n.eventEmitter.emit("play",{eventType:"play",code:c.oError?c.oError.errorCode:-1,target:n,msg:c.msg?c.msg:"播放失败，请检查设备及客户端网络"}),d({retcode:c.oError?c.oError.errorCode:-1,msg:C,id:n.params.id,type:"handleError"})})})});return o}},{key:"stop",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};return this.pluginStatus.setPlayStatus({loading:!0}),this.reSetTheme(),this.jSPlugin.JS_Stop(0).then(function(){console.log("停止成功"),t.pluginStatus.setPlayStatus({play:!1,loading:!1}),t.Theme&&t.Theme.setDecoderState({play:!1}),t.eventEmitter&&t.eventEmitter.emit("stop",{eventType:"stop",code:0,target:t,msg:"停止成功"}),n()})}},{key:"changeVideoLevel",value:function(t){var n=this.url,o=n;typeof t=="number"&&(o=t===1?n.replace(".live",".hd.live"):n.replace(".hd.live",".live"),this.jSPlugin.playURL=t?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2"),console.warn("changeVideoLevel","该方法将不在支持传入number类型的参数，建议使用对象类型的参数")),Ni(t)==="object"&&(typeof t.streamType=="number"&&["sd","hd"].includes(t.level)&&(o=t.level==="hd"?n.replace(".live",".hd.live"):n.replace(".hd.live",".live")),this.jSPlugin.playURL=t.streamType===1?this.jSPlugin.playURL.replace("stream=2","stream=1"):this.jSPlugin.playURL.replace("stream=1","stream=2")),this.url=o;var l=this.changePlayUrl({url:o},function(){},!1);return this.eventEmitter&&this.eventEmitter.emit("changeVideoLevel",{eventType:"changeVideoLevel",code:0,target:this,data:t,msg:"切换清晰度"}),Sa(l)?l:new Promise(function(d){d(l)})}},{key:"reSetTheme",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.Theme&&this.Theme.Ptz&&this.Theme.decoderState.state.pantile&&(this.Theme.setDecoderState({pantile:!1}),this.Theme.Ptz.hide()),this.Theme&&this.Theme.decoderState.state.recordvideo&&this.Theme.setDecoderState({recordvideo:!1}),t.indexOf("zoom")>-1&&(this.use3DZoom?(this.is3DZooming=!1,this.close3DZoom()):this.Zoom&&this.Zoom.currentScale>1&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1})),this.Theme&&this.Theme.decoderState.state.talk&&(this.stopTalk(),this.Theme.setDecoderState({talk:!1})),this.Theme&&this.Theme.Rec&&!this.Theme.isMobile&&this.Theme.Rec.datepickerHide(),this.Theme&&this.Theme.Rec&&(this.Theme.changeRecSpeed(1),this.Theme.nextRate=1,this.speed=1,this.Theme.setDecoderState({speed:!1})),this.eventEmitter&&this.eventEmitter.emit("reSetTheme",{eventType:"reSetTheme",code:0,target:this,msg:"重置主题"})}},{key:"_changePlayUrl",value:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.reSetTheme(["zoom"]),this.getDeviceCapacity({accessToken:t.accessToken||this.accessToken,deviceSerial:t.deviceSerial||this.deviceSerial});var d=this.url,c=C(d,t);t.accessToken&&(this.accessToken=t.accessToken,this.deviceSerial=t.deviceSerial,this.channelNo=t.channelNo),this.url=c,this.videoInitTime=Date.now(),this.videoPlayState=1,window.monitorExtendsInfo={protocol:"ezopen",url:this.url,serial:this.deviceSerial,no:this.channelNo,env:this.env.domain,type:pn(this.url).type},window.ezuikitMonitor.report({action:4,logInfo:{pluginVersion:this.isV3?"v3":"v1",type:pn(this.url).type,params:t}}),o(),this.pluginStatus.loadingStart(this.id),this.pluginStatus.loadingSetText({text:"加载中，请稍后"});var E=new Promise(function(y,w){var g={url:c};return t.accessToken&&(g.accessToken=t.accessToken),console.log("切换播放地址 参数 ",g),n.play(g).then(function(){console.log("切换播放地址 play 执行成功 ",n.url,n.accessToken),l&&(t.type?n.Theme&&(t.type=="rec"||t.type=="cloud.rec"?n.Theme.changeTheme(n.isMobile?"mobileRec":"pcRec"):t.type=="miniRec"?n.Theme.changeTheme("miniRec"):(n.Theme.changeTheme(n.isMobile?"mobileLive":"pcLive"),n.Theme.Rec.unSyncTimeLine())):n.Theme&&(n.url.indexOf(".rec")>-1?n.Theme.changeTheme(n.isMobile?"mobileRec":"pcRec"):(n.isCall?n.Theme.changeTheme(n.isMobile?"mobileCall":"webCall"):n.Theme.changeTheme(n.themeId),n.Theme.Rec.unSyncTimeLine()))),t&&t.begin&&t.deviceSerial&&n.Theme&&n.Theme.Rec.setDatepickerDate(t.begin),n.Theme&&n.Theme.setDisabled(!1),n.eventEmitter&&n.eventEmitter.emit("changePlayUrl",{eventType:"changePlayUrl",code:0,target:n,msg:"切换播放地址成功"}),y(c)}).catch(function(p){w(c),n.eventEmitter&&n.eventEmitter.emit("changePlayUrl",{eventType:"changePlayUrl",code:-1,target:n,msg:p&&p.msg?p.msg:"切换播放地址失败"}),p&&p.msg&&(n.Theme&&n.Theme.setDisabled(!0),n.pluginStatus.loadingClear(),n.isInspect?(n.Theme.jSPlugin.Zoom&&n.Theme.jSPlugin.Zoom.stopZoom(),n.pluginStatus.loadingSetTextWithBtn({mask:!0,maskStyle:"url(".concat(n.staticPath,"/imgs/bg.svg) no-repeat 100%/cover"),text:p.msg,color:"white",btnName:"重试",type:1}),n.Theme&&n.Theme.inspect&&n.Theme.inspect.InspectEvent&&n.Theme.inspect.InspectEvent.disableEvidenceBtn()):n.pluginStatus.loadingSetText({text:p.msg,color:"red"}))})});function C(y,w){if(w.url)return w.url;console.log("--------------matchInitUrl",y);var g=y.split("/")[4].split(".")[y.split("/")[4].split(".").length-1].split("?")[0];g==="rec"&&y.indexOf(".cloud.rec")!==-1&&(g="cloud.rec"),w.type&&(g=w.type=="miniRec"?"rec":w.type);var p=y.split("/")[3];w.deviceSerial&&(p=w.deviceSerial);var te=y.split("/")[4].split(".")[0];w.channelNo&&(te=w.channelNo);var ae=y.split("/")[2].split("@").length===2?y.split("/")[2].split("@")[0]:"";typeof w.validCode<"u"&&(ae=w.validCode);var de=typeof w.hd>"u"?y.indexOf(".hd")!==-1:w.hd,ie="ezopen://".concat(ae?"".concat(ae,"@"):"","open.ys7.com/").concat(p,"/").concat(te).concat(de?".hd":"",".").concat(g);return g==="live"||(ie="ezopen://".concat(ae?"".concat(ae,"@"):"","open.ys7.com/").concat(p,"/").concat(te,".").concat(g),w.begin&&w.end?ie+="?begin=".concat(w.begin,"&end=").concat(w.end):w.begin?ie+="?begin=".concat(w.begin):ar("begin",y)&&ar("end",y)?ie+="?begin=".concat(ar("begin",y),"&end=").concat(ar("end",y)):ar("begin",y)&&(ie+="?begin=".concat(ar("begin",y)))),ie}return E}},{key:"getOSDTime",value:function(){var t=this,n=new Promise(function(o,l){t.jSPlugin.JS_GetOSDTime(0).then(function(d){t.eventEmitter&&t.eventEmitter.emit("getOSDTime",{eventType:"getOSDTime",code:0,target:t,data:d,msg:"获取OSD时间"}),o({code:0,retcode:0,data:d}),typeof t.params.getOSDTimeCallBack=="function"&&t.params.getOSDTimeCallBack({id:t.id,type:"getOSDTime",code:0,data:d})}).catch(function(d){t.eventEmitter&&t.eventEmitter.emit("getOSDTime",{eventType:"getOSDTime",code:-1,target:t,msg:d||"获取OSD时间失败"}),l({code:-1,retcode:-1,data:d}),typeof t.params.getOSDTimeCallBack=="function"&&t.params.getOSDTimeCallBack({id:t.id,type:"getOSDTime",code:-1,data:-1})})});return n}},{key:"capturePicture",value:function(t){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=this.jSPlugin.JS_CapturePicture(0,t||new Date().getTime(),"JPEG",o,!!o);if(Sa(l))return new Promise(function(d,c){l.then(function(E){typeof n.params.capturePictureCallBack=="function"&&n.params.capturePictureCallBack({id:n.id,type:"capturePicture",code:0});var C={id:n.id,code:0,data:E.data,type:"handleCapturePicture"};n.eventEmitter&&n.eventEmitter.emit("capturePicture",{eventType:"capturePicture",code:0,target:n,data:E.data,msg:"截图成功"}),typeof n.params.handleCapturePicture=="function"&&n.params.handleCapturePicture(C),d(C)},function(E){typeof n.params.capturePictureCallBack=="function"&&n.params.capturePictureCallBack({id:n.id,type:"capturePicture",code:-1}),n.eventEmitter&&n.eventEmitter.emit("capturePicture",{eventType:"capturePicture",code:-1,target:n,msg:E||"截图失败"});var C=Object.assign({id:n.id,type:"handleCapturePicture",code:-1},E);typeof n.params.handleCapturePicture=="function"&&n.params.handleCapturePicture(C),c(C)})})}},{key:"startSave",value:function(t){var n=this.jSPlugin.JS_StartSave(0,t),o=this;return Sa(n)?(n.then(function(){typeof o.params.startSaveCallBack=="function"&&o.params.startSaveCallBack({id:o.id,type:"startSave",code:0}),o.eventEmitter&&o.eventEmitter.emit("startSave",{eventType:"startSave",code:0,target:o,msg:"开始录像成功"})}).catch(function(){o.eventEmitter&&o.eventEmitter.emit("startSave",{eventType:"startSave",code:-1,target:o,msg:"开始录像失败"}),typeof o.params.startSaveCallBack=="function"&&o.params.startSaveCallBack({id:o.id,type:"startSave",code:-1})}),n):(this.Theme&&this.Theme.setDecoderState({recordvideo:!0}),new Promise(function(l){l(n)}))}},{key:"stopSave",value:function(){var t=this.jSPlugin.JS_StopSave(0),n=this;return Sa(t)?(t.then(function(){n.eventEmitter&&n.eventEmitter.emit("stopSave",{eventType:"stopSave",code:0,target:n,msg:"停止录像成功"}),typeof n.params.stopSaveCallBack=="function"&&n.params.stopSaveCallBack({id:n.id,type:"stopSave",code:0})}).catch(function(){n.eventEmitter&&n.eventEmitter.emit("stopSave",{eventType:"stopSave",code:-1,target:n,msg:"停止录像失败"}),typeof n.params.stopSaveCallBack=="function"&&n.params.stopSaveCallBack({id:n.id,type:"stopSave",code:-1})}),t):(this.Theme&&this.Theme.setDecoderState({recordvideo:!1}),new Promise(function(o){o(t)}))}},{key:"openSound",value:function(){var t=this.jSPlugin.JS_OpenSound(0);return console.log("打开声音",t),this.eventEmitter&&this.eventEmitter.emit("openSound",{eventType:"openSound",code:t,target:this,msg:"打开声音"}),Sa(t)?t:(this.Theme&&this.Theme.setDecoderState({sound:!0}),typeof this.params.openSoundCallBack=="function"&&this.params.openSoundCallBack({id:this.id,type:"openSound",code:t}),new Promise(function(n){n(t)}))}},{key:"closeSound",value:function(){var t=this.jSPlugin.JS_CloseSound(0);return this.eventEmitter&&this.eventEmitter.emit("closeSound",{eventType:"closeSound",code:t,target:this,msg:"关闭声音"}),Sa(t)?t:(this.Theme&&this.Theme.setDecoderState({sound:!1}),typeof this.params.closeSoundCallBack=="function"&&this.params.closeSoundCallBack({id:this.id,type:"closeSound",code:t}),new Promise(function(n){n(t)}))}},{key:"enableZoom",value:function(){var t=this.jSPlugin.JS_EnableZoom(0);return this.eventEmitter&&this.eventEmitter.emit("startZoom",{eventType:"startZoom",code:t,target:this,msg:"开启电子放大"}),Sa(t)?t:new Promise(function(n){n(t)})}},{key:"closeZoom",value:function(){var t=this.jSPlugin.JS_DisableZoom(0);return this.eventEmitter&&this.eventEmitter.emit("closeZoom",{eventType:"closeZoom",code:t,target:this,msg:"关闭电子放大"}),Sa(t)?t:new Promise(function(n){n(t)})}},{key:"enable3DZoom",value:function(){var t=this;if(!this.use3DZoom)return new Promise(function(d,c){this.eventEmitter&&this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:-1,target:this,msg:"未启用3D定位功能"}),c({code:-1,msg:"未启用3D定位功能"})});function n(d,c){if(!d||!d.startPos||!d.endPos)return-1;var E=d.startPos[0],C=d.startPos[1],y=d.endPos[0],w=d.endPos[1];return c?y>E&&w<C?1:y<E&&w>C?0:-1:y>E&&w>C?1:y<E&&w<C?0:-1}function o(d,c,E){var C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;if(!d||!c||!E||!E.startPos||!E.endPos)return-1;var y=E.startPos[0],w=E.startPos[1],g=E.endPos[0],p=E.endPos[1],te=Math.abs(g-y),ae=Math.abs(p-w),de=parseInt((y+g)/2),ie=parseInt((w+p)/2),we=Math.round(d*c/(te*ae));return console.log("最大缩放倍数：",C),console.log("计算缩放倍数：",d*c/(te*ae)),console.log("下发缩放倍数：",we>C?C:we),{startPointX:parseInt(y/d*256),startPointY:parseInt(w/c*256),endPointX:parseInt(g/d*256),endPointY:parseInt(p/c*256),zoomRate:we>C?C:we,targetCenterX:de,targetCenterY:ie,targetWidth:te,targetHeight:ae}}if(this.is3DZooming)return new Promise(function(d,c){this.eventEmitter&&this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:-1,target:this,msg:"3D定位已处于开启状态"}),c({code:-1,msg:"3D定位已处于开启状态"})});if(this.isMobile||(this.Zoom&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1})),this.support3DZoom){this.is3DZooming=!0,this.Theme&&this.Theme.setDecoderState({zoom:!0}),document.getElementById("".concat(this.id,"-zoom-content"))&&(document.getElementById("".concat(this.id,"-zoom-content")).title="3D定位");var l=this.jSPlugin.JS_Enable3DZoom(0,function(d){var c=t.Theme&&t.Theme.decoderState.state.expend&&t.isMobile?t.fullScreenWidth:t.width,E=t.Theme&&t.Theme.decoderState.state.expend&&t.isMobile?t.fullScreenHeight:t.height,C=n(d,t.Theme&&t.Theme.decoderState.state.expend);if(C>-1)try{var y=o(c,E,d,t.capacity&&t.capacity.support_zoomOut_maxTime?t.capacity.support_zoomOut_maxTime:5),w=t.env.domain+"/api/v3/das/device/3d/zoom?accessToken=".concat(t.accessToken,"&deviceSerial=").concat(pn(t.url).deviceSerial,"&channelNo=").concat(pn(t.url).channelNo,"&command=").concat(C==0?9:8,"&zoomTimes=").concat(y.zoomRate,"&startPointX=").concat(y.startPointX,"&startPointY=").concat(y.startPointY,"&endPointX=").concat(y.endPointX,"&endPointY=").concat(y.endPointY,"&length=").concat(parseInt(E),"&width=").concat(parseInt(c),"&midPointX=").concat(y.targetCenterX,"&midPointY=").concat(y.targetCenterY,"&lengthX=").concat(y.targetWidth,"&lengthY=").concat(y.targetHeight);fetch(w,{method:"POST"}).then(function(g){return g.json()}).then(function(g){g.code!=200&&t.pluginStatus.loadingSetText({text:g.msg,color:"red",delayClear:2e3})}).catch(function(g){t.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})})}catch{t.pluginStatus.loadingSetText({text:"3D定位失败，请重试",color:"red",delayClear:2e3})}});return this.Zoom=new $o(this),this.eventEmitter&&this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:l,target:this,msg:"开启3D定位"}),Sa(l)?l:new Promise(function(d){d(l)})}else return this.is3DZooming=!1,document.getElementById("".concat(this.id,"-zoom-content"))&&(document.getElementById("".concat(this.id,"-zoom-content")).title="电子放大"),new Promise(function(d,c){this.eventEmitter&&this.eventEmitter.emit("enable3DZoom",{eventType:"enable3DZoom",code:-1,target:this,msg:"当前设备不支持3D定位功能"}),c({code:-1,msg:"当前设备不支持3D定位功能"})})}},{key:"close3DZoom",value:function(){var t=this;if(!this.use3DZoom)return new Promise(function(o,l){t.eventEmitter&&t.eventEmitter.emit("close3DZoom",{eventType:"close3DZoom",code:-1,target:t,msg:"未启用3D定位功能"}),l({code:-1,msg:"未启用3D定位功能"})});if(this.is3DZooming){this.Theme&&this.Theme.setDecoderState({zoom:!1});var n=this.jSPlugin.JS_Disable3DZoom(0);return this.Zoom=new $o(this),this.is3DZooming=!1,this.eventEmitter&&this.eventEmitter.emit("close3DZoom",{eventType:"close3DZoom",code:n,target:this,msg:"关闭3D定位"}),Sa(n)?n:new Promise(function(o){o(n)})}else return new Promise(function(o,l){this.eventEmitter&&this.eventEmitter.emit("close3DZoom",{eventType:"close3DZoom",code:-1,target:this,msg:"3D定位已处于关闭状态"}),l({code:-1,msg:"3D定位已处于关闭状态"})})}},{key:"changeZoomType",value:function(t){var n=this;if(t&&this.capacity&&!this.support3DZoom)return this.eventEmitter&&this.eventEmitter.emit("changeZoomType",{eventType:"changeZoomType",code:-1,target:this,msg:"当前设备不支持开启3D定位功能"}),{code:-1,msg:"当前设备不支持开启3D定位功能"};this.is3DZooming?this.close3DZoom():this.Theme&&this.Theme.decoderState.state.zoom&&this.Zoom&&this.Zoom.stopZoom(),this.Theme&&this.Theme.setDecoderState({zoom:!1}),this.use3DZoom=t,this.Zoom=new $o(this),setTimeout(function(){t?document.getElementById("".concat(n.id,"-zoom-content"))&&(document.getElementById("".concat(n.id,"-zoom-content")).title="3D定位"):document.getElementById("".concat(n.id,"-zoom-content"))&&(document.getElementById("".concat(n.id,"-zoom-content")).title="电子放大"),n.isMobile&&t&&n.enable3DZoom(),n.eventEmitter&&n.eventEmitter.emit("changeZoomType",{eventType:"changeZoomType",code:0,target:n,msg:"改变缩放模式"})},500)}},{key:"setPoster",value:function(t){$a()?document.getElementById("".concat(this.id))&&(document.getElementById("".concat(this.id)).style.backgroundImage="url(".concat(t,")"),document.getElementById("".concat(this.id)).style.backgroundSize="100% 100%"):document.getElementById("".concat(this.id,"canvas0"))&&(document.getElementById("".concat(this.id,"canvas0")).style.backgroundImage="url(".concat(t,")"),document.getElementById("".concat(this.id,"canvas0")).style.backgroundSize="cover"),this.eventEmitter&&this.eventEmitter.emit("setPoster",{eventType:"setPoster",code:0,target:this,msg:"设置播放器封面"})}},{key:"reSize",value:function(t,n){var o=0,l=0;if(this.params.height=n,this.params.width=t,this.Theme&&this.Theme.isNeedRenderHeader&&document.getElementById("".concat(this.id,"-headControl"))&&(o=parseInt(document.getElementById("".concat(this.id,"-headControl")).style.height,10)),this.Theme&&this.Theme.isNeedRenderTimeLine&&!this.isMobile&&(l=48),n=n-o-l,this.width=t,this.height=n,document.getElementById("".concat(this.id,"-wrap")).style="width:".concat(t,"px;position:relative;display:inline-block;vertical-align: bottom;"),document.getElementById("".concat(this.id)).style.width=t+"px",document.getElementById("".concat(this.id)).style.height=n+"px",this.jSPlugin&&this.jSPlugin.bPlay)this.jSPlugin&&(this.jSPlugin.iHeight=n,this.jSPlugin.iWidth=t),this.jSPlugin.JS_Resize(t,n);else{document.getElementById("".concat(this.id,"-player"))&&(document.getElementById("".concat(this.id,"-player")).width=t,document.getElementById("".concat(this.id,"-player")).height=n,document.getElementById("".concat(this.id,"-player")).style.width=t+"px",document.getElementById("".concat(this.id,"-player")).style.height=n+"px",document.getElementById("".concat(this.id,"-container-0")).style.height=n+"px");var d=1;if(document.getElementById("".concat(this.id,"canvas0"))){var c=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);c&&(d=2),document.getElementById("".concat(this.id,"canvas0")).style.width=t*d+"px",document.getElementById("".concat(this.id,"canvas0")).style.height=n*d+"px",document.getElementById("".concat(this.id,"canvas0")).width=t*d,document.getElementById("".concat(this.id,"canvas0")).height=n*d,document.getElementById("".concat(this.id,"canvas0")).parentNode.style.width=t*d+"px",document.getElementById("".concat(this.id,"canvas0")).parentNode.style.height=n*d+"px",document.getElementById("".concat(this.id,"canvas_draw0")).height=n*d}this.jSPlugin&&(this.jSPlugin.iHeight=n*d,this.jSPlugin.iWidth=t*d)}this.isInspect&&(document.getElementById("".concat(this.id,"-wrap")).style="width:".concat(t,"px; height:").concat(n,"px;position:relative;display:inline-block;vertical-align: bottom;"),this.width-=this.inspectVideoWidth,this.height-=this.inspectVideoHeight,t=this.width,n=this.height,this.width=t,this.height=n,this.Theme.inspect.reSize(t,n)),this.eventEmitter&&this.eventEmitter.emit("reSize",{eventType:"reSize",code:0,target:this,msg:"调整播放器尺寸"})}},{key:"fast",value:function(t){var n=this,o=this.speed;if(t){var l=this.jSPlugin.JS_Speed(t);this.Theme&&(this.Theme.changeRecSpeed(t),this.Theme.nextRate=t)}else{if(o===1)o=2;else if(o===2)o=4;else return console.log("当前已经是最大播放倍数"),typeof this.params.handleError=="function"&&this.params.handleError({msg:"播放速度最大为4倍速度",retcode:1003,id:this.id,type:"handleError"}),new Promise(function(c,E){n.speed=o,E({code:-1,data:{speed:o,result:"播放速度最大为4倍速度"}})});var l=this.jSPlugin.JS_Speed(o);this.Theme&&(this.Theme.changeRecSpeed(o),this.Theme.nextRate=o)}return new Promise(function(d){n.speed=o,n.eventEmitter&&n.eventEmitter.emit("fast",{eventType:"fast",code:0,data:o,target:n,msg:"倍速播放"}),d({code:0,data:{speed:o,result:l}})})}},{key:"slow",value:function(){var t=this,n=this.speed;if(n===4)n=2;else if(n===2)n=1;else return console.log("当前已经是最小播放倍数"),typeof this.params.handleError=="function"&&this.params.handleError({msg:"播放速度最小为1倍速度",retcode:1003,id:this.id,type:"handleError"}),new Promise(function(l,d){t.speed=n,d({code:-1,data:{speed:n,result:"播放速度最小为1倍速度"}})});var o=this.jSPlugin.JS_Speed(n);return new Promise(function(l){t.speed=n,t.eventEmitter&&t.eventEmitter.emit("slow",{eventType:"slow",code:0,data:n,target:t,msg:"倍速播放"}),l({code:0,data:{speed:n,result:o}})})}},{key:"seek",value:function(t,n){var o=this.url,l=(ar("begin",o)||new Date().Format("yyyyMMdd")).substr(0,8);if(n=d(l,"235959"),t.length===6)t=d(l,t);else if(t.length===16){if(t.substr(0,8)!==l)return typeof this.params.handleError=="function"&&(this.eventEmitter&&this.eventEmitter.emit("seek",{eventType:"seek",code:-1,target:this,msg:"seek时间不能跨日期"}),this.params.handleError({msg:"seek时间不能跨日期",retcode:-1,id:this.id,type:"handleError"})),!1}else return typeof this.params.handleError=="function"&&(this.eventEmitter&&this.eventEmitter.emit("seek",{eventType:"seek",code:-2,target:this,msg:"seek时间格式错误"}),this.params.handleError({msg:"seek时间格式错误",retcode:-1,id:this.id,type:"handleError"})),!1;function d(E,C){var y=/^[0-9]{8}T[0-9]{6}Z$/;if(y.test(E))return E;if(/[0-9]{8,14}/.test(E)){var w=6-(14-E.length),g=C.length,p=E+C.substring(w,g);return p.slice(0,8)+"T"+p.slice(8)+"Z"}throw new Error("回放时间格式有误，请确认")}var c=this.jSPlugin.JS_Seek(0,t,n);return console.log("seekRT",c),Sa(c)?c:new Promise(function(E){E(c)})}},{key:"fullScreen",value:function(){var t=this,n=Jo(document.getElementById("".concat(this.id)));n.then(function(l){console.log("全屏promise",window.screen.availWidth),t.jSPlugin.JS_Resize(window.screen.availWidth,window.screen.availHeight),t.eventEmitter&&t.eventEmitter.emit("fullScreen",{eventType:"fullScreen",code:0,target:t,msg:"全局全屏"}),typeof t.params.fullScreenCallBack=="function"&&t.params.fullScreenCallBack({id:t.id,type:"fullScreen",code:0})});var o=function(){var d=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;d||t.jSPlugin.JS_Resize(t.width,t.height),typeof t.params.fullScreenChangeCallBack=="function"&&t.params.fullScreenChangeCallBack({id:t.id,type:"fullScreen",code:d})};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"].forEach(function(l){window.addEventListener(l,function(d){return o()})})}},{key:"cancelFullScreen",value:function(){var t=this,n=gs();n.then(function(o){console.log("取消全屏",o,t.jSPlugin),t.jSPlugin.JS_Resize(t.width,t.height),t.eventEmitter&&t.eventEmitter.emit("cancelFullScreen",{eventType:"cancelFullScreen",code:0,target:t,msg:"退出全局全屏"})})}},{key:"startTalk",value:function(){this.Talk.startTalk()}},{key:"stopTalk",value:function(){this.Talk.stopTalk()}},{key:"destroy",value:function(){this.Theme&&(this.Theme.decoderState.state.play&&this.stop(),this.Theme=null,window.EZUIKit[this.params.id].state.EZUIKitPlayer.themeInit=!1);var t=this.jSPlugin.JS_DestroyWorker(0);return this.eventEmitter&&this.eventEmitter.emit("destroy",{eventType:"destroy",code:0,target:this,msg:"销毁"}),Sa(t)?t:new Promise(function(n){n(t)})}},{key:"getDeviceCapacity",value:function(t){var n=this,o=this.env.domain;this.capacity={},this.env&&(o=this.env.domain);var l=o+"/api/lapp/device/capacity",d=function(C){if(n.support3DZoom=!1,document.getElementById("".concat(n.id,"-zoom-content"))&&(document.getElementById("".concat(n.id,"-zoom-content")).title="电子放大"),C.code==200&&C.data){if(n.capacity=C.data,n.isMobile&&n.isCall&&(!n.capacity.support_doorcall_playback||n.capacity.support_doorcall_playback!=1)){if(console.log("小窗口initMiniRec-------------设备能力集失败"),n.isWebConsole)return;setTimeout(function(){document.getElementById("".concat(n.jSPlugin.id,"-wrap"))&&document.getElementById("miniRecbox")&&(document.getElementById("".concat(n.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniClose")),document.getElementById("".concat(n.jSPlugin.id,"-wrap")).removeChild(document.getElementById("miniRecbox")))},1500)}n.capacity&&n.capacity.support_3d_position=="1"&&n.url.indexOf(".live")>-1&&(n.support3DZoom=!0,n.params.use3DZoom&&(n.use3DZoom=!0,document.getElementById("".concat(n.id,"-zoom-content"))&&(document.getElementById("".concat(n.id,"-zoom-content")).title="3D定位"))),n.eventEmitter&&n.eventEmitter.emit("getDeviceCapacity",{eventType:"getDeviceCapacity",code:0,data:C,target:n,msg:"获取设备能力级"})}},c=t||{accessToken:this.accessToken,deviceSerial:pn(this.url).deviceSerial};Ca(l,"POST",c,"",d)}},{key:"pause",value:function(t){var n=this;return new Promise(function(o,l){n.jSPlugin.JS_CloseSound(0),n.jSPlugin.JS_Pause(0,t).then(function(d){n.eventEmitter&&n.eventEmitter.emit("pause",{eventType:"pause",code:0,target:n,msg:"暂停"}),n.Theme&&n.Theme.setDecoderState({play:!1,pauseDate:d.pauseDate}),o()}).catch(function(d){n.eventEmitter&&n.eventEmitter.emit("pause",{eventType:"pause",code:-1,target:n,msg:d||"暂停失败"}),console.log(d),l(d)})})}},{key:"_resume",value:function(t){var n=this;return new Promise(function(o,l){n.pluginStatus.setPlayStatus({play:!1,loading:!0}),n.validateCode&&n.validateCode!=""&&n.jSPlugin.JS_SetSecretKey(0,n.validateCode),n.jSPlugin.JS_Resume(t).then(function(d){if(setTimeout(function(){n.url.indexOf(".rec")!==-1&&n.speed!=1&&n.jSPlugin.JS_Speed(n.speed)},500),n.Theme){n.Theme.setDecoderState({play:!0}),n.fast(n.speed);var c=n.Theme.decoderState.state.sound;c&&setTimeout(function(){n.openSound()},500)}n.eventEmitter&&n.eventEmitter.emit("resume",{eventType:"resume",code:0,target:n,msg:"恢复播放"}),o(d)}).catch(function(d){console.log("resume err",d),n.eventEmitter&&n.eventEmitter.emit("resume",{eventType:"resume",code:-1,target:n,msg:d||"恢复播放失败"}),l(d)})})}},{key:"getDefinitionList",value:function(){return this.eventEmitter&&this.eventEmitter.emit("getDefinitionList",{eventType:"getDefinitionList",code:0,data:this.Theme?this.Theme.decoderState.state.hdList:[],target:this,msg:"获取设备支持的清晰度列表"}),this.Theme?this.Theme.decoderState.state.hdList:[]}},{key:"getDefinition",value:function(){return this.eventEmitter&&this.eventEmitter.emit("getDefinition",{eventType:"getDefinition",code:0,data:this.Theme?this.Theme.decoderState.state.hd:!1,target:this,msg:"获取设备支持的清晰度列表"}),this.Theme?this.Theme.decoderState.state.hd:!1}},{key:"setDefinition",value:function(t){var n=this.getDefinitionList().find(function(o){if(typeof t=="string")return o.level===t;if(Ni(t)==="object")return o.level===t.level});if(!n){this.eventEmitter&&this.eventEmitter.emit("setDefinition",{eventType:"setDefinition",code:-1,target:this,msg:"请输入正确的清晰度"}),console.log("请输入正确的清晰度");return}this.changeVideoLevel(n),this.Theme&&(this.Theme.setDecoderState({hd:n}),this.Theme.resetMobileZoomStatus()),this.Theme&&this.Theme.decoderState.state.recordvideo&&this.Theme.setDecoderState({recordvideo:!1}),this.eventEmitter&&this.eventEmitter.emit("setDefinition",{eventType:"setDefinition",code:0,target:this,msg:"切换清晰度"})}},{key:"getPtzStatus",value:function(){if(this.Theme)return this.eventEmitter&&this.eventEmitter.emit("getPtzStatus",{eventType:"getPtzStatus",code:0,data:this.Theme?this.Theme.Ptz.showPtz:!1,target:this,msg:"获取当前云台状态"}),console.log("当前是否开启云台：",this.Theme.Ptz.showPtz),this.Theme.Ptz.showPtz;this.eventEmitter&&this.eventEmitter.emit("getPtzStatus",{eventType:"getPtzStatus",code:-1,data:this.Theme?this.Theme.Ptz.showPtz:!1,target:this,msg:"未加载Theme模块，无法获取云台状态"})}},{key:"openPtz",value:function(){if(this.Theme){if(this.isMobile&&this.Theme&&!this.Theme.decoderState.state.expend)return console.log("移动端，非全屏状态不展示云台"),this.eventEmitter&&this.eventEmitter.emit("openPtz",{eventType:"openPtz",code:-1,target:this,msg:"移动端，非全屏状态不展示云台"}),!1;console.log("显示云台"),this.Theme.setDecoderState({pantile:!0}),this.Theme.Ptz.show()}else return this.eventEmitter&&this.eventEmitter.emit("openPtz",{eventType:"openPtz",code:-1,target:this,msg:"未加载Theme模块，无法操作云台"}),{code:-1,msg:"未加载Theme模块，无法操作云台"}}},{key:"closePtz",value:function(){if(this.Theme)console.log("隐藏云台"),this.Theme.setDecoderState({pantile:!1}),this.Theme.Ptz.hide();else return this.eventEmitter&&this.eventEmitter.emit("closePtz",{eventType:"closePtz",code:-1,target:this,msg:"未加载Theme模块，无法操作云台"}),{code:-1,msg:"未加载Theme模块，无法操作云台"}}},{key:"isBrowserFullscreen",value:function(){if(this.Theme)return console.log("当前是否为浏览器全屏状态：",this.Theme.decoderState.state.webExpend),this.eventEmitter&&this.eventEmitter.emit("isBrowserFullscreen",{eventType:"isBrowserFullscreen",code:0,target:this,data:this.Theme.decoderState.state.webExpend,msg:"获取浏览器网页全屏状态"}),this.Theme.decoderState.state.webExpend}},{key:"browserFullscreen",value:function(){this.Theme&&(this.Theme.webExpend(),this.Theme.setDecoderState({webExpend:!0}),this.eventEmitter&&this.eventEmitter.emit("browserFullscreen",{eventType:"browserFullscreen",code:0,target:this,msg:"开启网页全屏"}))}},{key:"exitBrowserFullscreen",value:function(t,n){var o=this,l=gs();l.then(function(d){o.jSPlugin.JS_Resize(t||o.width,n||o.height),o.Theme&&(o.Theme.Rec&&o.Theme.Rec.recAutoSize(),o.Theme.setDecoderState({webExpend:!1})),o.eventEmitter&&o.eventEmitter.emit("exitBrowserFullscreen",{eventType:"exitBrowserFullscreen",code:0,target:o,msg:"退出网页全屏"})})}},{key:"getPlayRate",value:function(){return console.log("当前播放速度：",this.speed),this.eventEmitter&&this.eventEmitter.emit("getPlayRate",{eventType:"getPlayRate",code:0,data:this.speed,target:this,msg:"获取当前播放速率"}),this.speed}},{key:"setMiooroFlip",value:function(t){return typeof t!="number"?(this.eventEmitter&&this.eventEmitter.emit("setMiooroFlip",{eventType:"setMiooroFlip",code:-1,target:this,msg:"翻转参数类型错误"}),Promise.reject({code:-1,msg:"翻转参数类型错误"})):(this.eventEmitter&&this.eventEmitter.emit("setMiooroFlip",{eventType:"setMiooroFlip",code:0,target:this,msg:"镜像翻转"}),Ku(this.env.domain,this.accessToken,this.deviceSerial,this.channelNo,t))}},{key:"setFECCorrectType",value:function(t,n){var o=this;if(!this.capacity||this.capacity&&this.capacity.support_fisheye_mode!=="1")return this.eventEmitter&&this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"设备不支持鱼眼模式"}),Promise.reject({code:-1,msg:"设备不支持鱼眼模式"});if(!this.jSPlugin.JS_FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev)return this.eventEmitter&&this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"现只有V3软解支持鱼眼矫正"}),Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正"});var l=t.place===1?Ff:t.place===3?Lf:[],d=l.find(function(c){return c.type===t.type&&c.place===t.place});return d?d.split>0&&Ni(n)===void 0?(this.eventEmitter&&this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"鱼眼矫正类型需要分屏，但是没有传".concat(d.split-1,"个分屏的canvas id")}),Promise.reject({code:-1,msg:"鱼眼矫正类型需要分屏，但是没有传".concat(d.split-1,"个分屏的canvas id")})):(this.jSPlugin.FECSplitIds=n,this.jSPlugin.correctType=d,this._FECCorrectType=d,this._FECSplitIds=n,this.stop().then(function(){return o.play().then(function(c){return d.place===1&&d.correctType===0||d.place===3&&d.correctType===0?o.Theme.resumeFECBtn():o.Theme.disabledFECBtn(),o.eventEmitter&&o.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:0,target:o,msg:"切换鱼眼矫正类型"}),c})})):(this.eventEmitter&&this.eventEmitter.emit("setFECCorrectType",{eventType:"setFECCorrectType",code:-1,target:this,msg:"鱼眼矫正类型暂时不支持"}),Promise.reject({code:-1,msg:"鱼眼矫正类型暂时不支持"}))}},{key:"setFEC3DViewParam",value:function(t){return!this._FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev?(this.eventEmitter&&this.eventEmitter.emit("setFEC3DViewParam",{eventType:"setFEC3DViewParam",code:-1,target:this,msg:"现只有V3软解支持鱼眼矫正"}),Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正"})):this.jSPlugin.FEC_Set3DViewParam&&this._FECCorrectType&&(this._FECCorrectType.place===3&&this._FECCorrectType.correctType===f0||this._FECCorrectType.place===1&&this._FECCorrectType.correctType===h0)?(this.eventEmitter&&this.eventEmitter.emit("setFEC3DViewParam",{eventType:"setFEC3DViewParam",code:0,target:this,msg:"设置3D矫正视角参数"}),this.jSPlugin.FEC_Set3DViewParam(t)):(this.eventEmitter&&this.eventEmitter.emit("setFEC3DViewParam",{eventType:"setFEC3DViewParam",code:-1,target:this,msg:"该矫正类型不能设置3D矫正视角参数"}),Promise.reject({code:-1,msg:"该矫正类型不能设置3D矫正视角参数"}))}},{key:"getFEC3DViewParam",value:function(t){return!this._FECCorrectType||(this.jSPlugin.isHardH264||this.jSPlugin.isHardH265)&&this.jSPlugin.useHardDev?(this.eventEmitter&&this.eventEmitter.emit("getFEC3DViewParam",{eventType:"getFEC3DViewParam",code:-1,target:this,msg:"现只有V3软解支持鱼眼矫正获取3D矫正视角参数"}),Promise.reject({code:-1,msg:"现只有V3软解支持鱼眼矫正获取3D矫正视角参数"})):this.jSPlugin.FEC_Set3DViewParam&&this._FECCorrectType&&(this._FECCorrectType.place===3&&this._FECCorrectType.correctType===f0||this._FECCorrectType.place===1&&this._FECCorrectType.correctType===h0)?(this.eventEmitter&&this.eventEmitter.emit("getFEC3DViewParam",{eventType:"getFEC3DViewParam",code:0,target:this,data:this.jSPlugin.FEC_Get3DViewParam(t),msg:"获取3D矫正视角参数"}),this.jSPlugin.FEC_Get3DViewParam(t)):(this.eventEmitter&&this.eventEmitter.emit("getFEC3DViewParam",{eventType:"getFEC3DViewParam",code:-1,target:this,msg:"该矫正类型不能获取3D矫正视角参数"}),Promise.reject({code:-1,msg:"该矫正类型不能获取3D矫正视角参数"}))}}]),Z}(),or=null;function Wf(Z,m,t,n){return new WebControl({szPluginContainer:Z,iServicePortStart:14510,iServicePortEnd:14519,cbConnectSuccess:m,cbConnectError:t,cbConnectClose:n})}function Zf(){or!=null&&(or.JS_DestroyWnd().then(function(){console.log("JS_DestroyWnd")},function(){}),or.JS_StopService("window").then(function(){or.JS_Disconnect().then(function(){console.log("JS_Disconnect")},function(){})}))}function Yf(Z){Z.responseMsg.eventName,console.log(Z.responseMsg)}function Xf(){or.JS_SetWindowControlCallback({cbIntegrationCallBack:Yf}),or.JS_StartService("window",{dllPath:"./chain/cloudTransform.dll"}).then(function(){or.JS_CreateWnd("playWnd",900,500).then(function(){console.log("JS_CreateWnd success")})})}function qf(){console.log("cbConnectError"),or=null,console.error("确认本地进程是否已安装并开启成功！")}function Jf(Z){console.log("cbConnectClose"),or=null}window.onscroll=function(){or!=null&&or.JS_Resize(900,500)},window.onresize=function(){or!=null&&or.JS_Resize(900,500)},window.onunload=function(){try{or.JS_HideWnd(),Zf()}catch(Z){console.error(Z)}},window.onpagehide=function(){try{or.JS_HideWnd()}catch(Z){console.error(Z)}};var Kf=function(){function Z(m){var t=this;En(this,Z),ln(this,"changeModel",function(n,o){var l=t;t.switchVideo=parseInt(n),or&&or.JS_RequestInterface({funcName:"ChangeModel",arguments:encodeURI(JSON.stringify({model:n}))}).then(function(d){n==0?l.play({deviceSerial:o.deviceSerial,channelNo:o.channelNo,validateCode:o.validateCode}):l.play({deviceSerial:o.deviceSerial,channelNo:o.channelNo,validateCode:o.validateCode,startTime:o.startTime,endTime:o.endTime})})}),ln(this,"init",function(n){var o,l=t;if(!n.appKey||!n.accessToken){l.showTips(!1,"请输入appkey和token");return}typeof n.appKey<"u"&&(t.appKey=n.appKey),typeof n.accessToken<"u"&&(t.accessToken=n.accessToken),typeof n.platformId<"u"&&(t.platformId=n.platformId);var d=(o={layout:+l.layout,userName:"",waterMark:""},ln(o,"waterMark","1"),ln(o,"iWndType",0),ln(o,"intelligenceEnable",1),ln(o,"isRecord",1),ln(o,"isSetPos",1),ln(o,"motionDetectEnable",0),ln(o,"playBackAlarmOverlyingEnable",0),ln(o,"response",{code:0,message:null,data:{appKey:n.appKey,ezvizToken:n.accessToken,videoLevel:0,logLevel:3,showMainTool:1,showSubTool:1,waterMark:"1",userName:"openteam",platformId:n.platformId}}),o);console.log("初始化入参",d),window.ezuikitMonitor.report({protocol:"hd",appKey:n.appKey,action:1,logInfo:{argumentsPram:d}}),or.JS_RequestInterface({funcName:"Init",arguments:encodeURI(JSON.stringify(d))}).then(function(c){console.log(c.responseMsg),l.showTips(!0,"视频初始化成功！")})}),ln(this,"play",function(n){var o=t;if(!(!n.deviceSerial||!n.channelNo)){typeof n.deviceSerial<"u"&&(t.deviceSerial=n.deviceSerial),typeof n.channelNo<"u"&&(t.channelNo=n.channelNo),typeof n.startTime<"u"&&n.startTime&&(t.startTime=n.startTime+" 00:00:00"),typeof n.endTime<"u"&&n.endTime&&(t.endTime=n.endTime+" 23:59:59"),typeof n.validateCode<"u"&&n.validateCode&&(t.validateCode=n.validateCode);var l={response:{code:0,message:null,data:{deviceSerial:n.deviceSerial,channelCode:n.channelNo,channelNo:+n.channelNo,codeIsEncrypt:0,validateCode:n.validateCode,deviceClass:o.deviceClass,deviceType:"10222",channelId:"2222222222",channelName:"channelNameTest",storeName:"storeName",storeId:"storeid",startTime:t.startTime,endTime:t.endTime}}};o.deviceClass==="1"?(l.response.data.channelCode=o.channelNo,l.response.data.platformId=o.platformId):l.response.data.channelNo=+o.channelNo,t.switchVideo===1&&(t.startTime&&(l.response.data.startTime=t.startTime),t.endTime&&(l.response.data.endTime=t.endTime)),console.log("预览/回放入参",l),or.JS_RequestInterface({funcName:t.switchVideo===0?"StartPreview":"StartPlayback",arguments:encodeURI(JSON.stringify(l))}).then(function(d){console.log(d.responseMsg),o.showTips(!0,"预览/回放成功！")}).catch(function(d){console.log("开始播放：",d)})}}),ln(this,"showCBInfo",function(n){t.callbackMessage=t.callbackMessage+JSON.stringify(n)+`

`,console.log(t.callbackMessage)}),ln(this,"showTips",function(n,o){}),ln(this,"hideVideo",function(){or.JS_HideWnd()}),ln(this,"showVideo",function(){or.JS_ShowWnd()}),ln(this,"GetLayout",function(){var n=null;or.JS_RequestInterface({funcName:"GetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:n}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"capturePicture",function(n){var o=null;or.JS_RequestInterface({funcName:"CaptureJPGEx",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:o}}))}).then(function(l){console.log(JSON.stringify(l.responseMsg)),console.log(l.responseMsg)})}),ln(this,"stop",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;or.JS_RequestInterface({funcName:"StopPlay",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(n)}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"setLayout",function(n){var o=parseInt(n);if(isNaN(o)||o==0||o>=13){console.log("不支持实际布局大于16的窗口数");return}t.layout=o,or.JS_RequestInterface({funcName:"SetLayout",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{layout:o}}}))}).then(function(l){console.log(JSON.stringify(l.responseMsg)),console.log(l.responseMsg)})}),ln(this,"setSoundVolumn",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,o=arguments.length>1?arguments[1]:void 0;or.JS_RequestInterface({funcName:"SoundVolumn",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(n),volumn:parseInt(o)}}}))}).then(function(l){console.log(JSON.stringify(l.responseMsg)),console.log(l.responseMsg)})}),ln(this,"testMute",function(){var n=parseInt(prompt("请输入窗口ID"));or.JS_RequestInterface({funcName:"MuteOnOff",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:n}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"testSelectWnd",function(){var n=parseInt(prompt("请输入窗口ID"));or.JS_RequestInterface({funcName:"SelectPlayWnd",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:n}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"setVideoLevel",function(n,o){or.JS_RequestInterface({funcName:"SetVideoLevel",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:t.switchVideo==1?0:parseInt(n),level:parseInt(o,10)}}}))}).then(function(l){console.log(JSON.stringify(l.responseMsg)),console.log(l.responseMsg)})}),ln(this,"startTalk",function(n){or.JS_RequestInterface({funcName:"StartTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(n)}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"stopTalk",function(n){or.JS_RequestInterface({funcName:"StopTalk",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(n)}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"startSave",function(n){or.JS_RequestInterface({funcName:"StartRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(n)}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),ln(this,"stopSave",function(n){or.JS_RequestInterface({funcName:"StopRecord",arguments:encodeURI(JSON.stringify({response:{code:0,message:null,data:{wndId:parseInt(n)}}}))}).then(function(o){console.log(JSON.stringify(o.responseMsg)),console.log(o.responseMsg)})}),this.appKey="b9a3ad6e8026410095d8252169fa430a",this.accessToken="at.2vtum8873rrcwbrv431qb6pn94dkbv23-8dw2twn355-1u3x014-wrthellzk",this.deviceSerial="C33368372",this.channelNo="1",this.validateCode="",this.deviceClass="0",this.platformId="",this.startTime="",this.endTime="",this.layout=2,this.switchVideo=0,this.tips="调用成功",this.successTip=!1,this.tipsShow=!1,or=Wf("playWnd",Xf,qf,Jf)}return Rn(Z,[{key:"alarmMsg",value:function(){var t={request:{body:{alarmTypes:[10800,0,0,0,0],channelId:"066dde0465dd4abaab6afe355baf9d0b",endTime:"1621007999000",startTime:"1620921600000"},callBack:"GetAlarmMsgOrders",majorKey:"",method:"POST",storeId:"",url:"/videoplugin/message/getMessageByTypes"},response:{code:0,message:null,data:[{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620921217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920678e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620920586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919513e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919483e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620919333e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918913e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620918305e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917858e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917658e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917244e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620917064e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916668e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916529e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916343e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620916081e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915825e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915394e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620915197e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914971e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914644e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914533e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914457e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914376e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620914284e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620913431e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912354e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912275e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912093e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620912024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091189e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911839e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091176e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911682e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091127e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620911184e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910982e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910781e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910727e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910677e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910647e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910588e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910544e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091041e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162091035e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910278e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910217e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620910124e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909939e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909847e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909817e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909664e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909605e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909575e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090912e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620909028e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908999e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908969e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908909e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090888e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908835e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090875e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090872e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908652e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908582e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908552e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908456e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620908268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090805e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907918e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907758e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907625e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907386e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907292e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620907127e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906828e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906797e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906747e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906717e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906632e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906368e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620906013e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905946e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905823e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905622e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905511e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905382e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905352e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905322e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905262e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620905196e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090515e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904994e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904813e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090473e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209047e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904618e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904286e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904173e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904053e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620904023e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903854e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903723e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903643e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903612e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903573e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903505e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903329e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903299e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903268e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16209032e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620903149e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090312e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902977e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090286e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090277e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902639e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902517e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902373e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090232e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902253e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902198e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620902132e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090194e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090185e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901789e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901685e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901638e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090152e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901489e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901424e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901271e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901233e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620901157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900915e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900774e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900744e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090065e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162090044e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900409e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900175e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900134e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900069e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620900016e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899976e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899908e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899826e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899756e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899467e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899406e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899265e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620899211e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089914e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089911e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089905e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898785e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898746e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898697e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898666e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898507e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898248e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898218e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898157e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620898088e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089802e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089796e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089785e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897807e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897771e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089769e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089763e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:16208976e5},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089757e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089754e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897475e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897369e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897339e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897279e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897237e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897207e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897172e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897142e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897112e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620897024e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896985e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896874e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896814e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896783e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896736e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896621e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896447e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896358e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896307e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896277e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896247e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620896214e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089604e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895953e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895921e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895868e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089577e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895704e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089559e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895559e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089548e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895442e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895377e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895347e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895293e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895171e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895136e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620895017e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894926e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894896e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894864e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894834e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894738e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894599e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894539e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894426e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894359e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894213e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894183e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620894051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893964e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893934e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893843e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893754e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893676e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893606e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089353e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893452e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893423e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893357e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893143e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893051e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620893006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892904e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892824e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892764e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892541e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892479e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892412e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892311e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892281e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892209e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620892063e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891991e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891931e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089187e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089181e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891708e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891655e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891585e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891531e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891401e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891297e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891257e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891178e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891128e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620891033e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162089094e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890879e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890794e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890714e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890616e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890586e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890469e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890346e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890288e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890179e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890108e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890041e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620890011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889937e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889719e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889635e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889481e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889451e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889317e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889227e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889139e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620889034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888973e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888902e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888837e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888767e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888737e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888706e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888633e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888571e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888413e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888353e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888323e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888249e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888162e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620888e6},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887859e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887776e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887734e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887692e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887619e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887501e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887355e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088732e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887289e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887126e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887066e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620887034e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088697e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886884e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886804e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886728e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886609e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886538e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886478e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886396e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886334e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886246e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886111e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620886011e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885956e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885894e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885696e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885514e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885484e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885414e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885383e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885341e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885306e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885276e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885216e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885186e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885114e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885037e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620885006e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884975e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884945e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884911e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884851e3},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:162088478e4},{alarmType:10800,alarmName:"移动侦测报警",alarmTime:1620884696e3}],success:!0}};console.log(t),or.JS_RequestInterface({funcName:"TransFunctionResult",arguments:encodeURI(JSON.stringify(t))})}}]),Z}();qe.sessions={},qe.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){var Z=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),m=33;return window.navigator.userAgent.match("Linux")&&(m=35),Z>=26&&Z<=m?!0:qe.extension.isInstalled()}else return!0};var nd={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return document.querySelector("#janus-extension-installed")!==null},getScreen:function(m){var t=window.setTimeout(function(){var n=new Error("NavigatorUserMediaError");return n.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',m(n)},1e3);this.cache[t]=m,window.postMessage({type:"janusGetScreen",id:t},"*")},init:function(){var m={};this.cache=m,window.addEventListener("message",function(t){if(t.origin==window.location.origin)if(t.data.type=="janusGotScreen"&&m[t.data.id]){var n=m[t.data.id];if(delete m[t.data.id],t.data.sourceId===""){var o=new Error("NavigatorUserMediaError");o.name="You cancelled the request for permission, giving up...",n(o)}else n(null,t.data.sourceId)}else t.data.type=="janusGetScreenPending"&&(console.log("clearing ",t.data.id),window.clearTimeout(t.data.id))})}};qe.useDefaultDependencies=function(Z){var m=Z&&Z.fetch||fetch,t=Z&&Z.Promise||Promise,n=Z&&Z.WebSocket||WebSocket;return{newWebSocket:function(l,d){return new n(l,d)},extension:Z&&Z.extension||nd,isArray:function(l){return Array.isArray(l)},webRTCAdapter:Z&&Z.adapter||adapter,httpAPICall:function(l,d){var c={method:d.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};d.verb==="POST"&&(c.headers["Content-Type"]="application/json"),d.withCredentials!==void 0&&(c.credentials=d.withCredentials===!0?"include":d.withCredentials?d.withCredentials:"omit"),d.body!==void 0&&(c.body=JSON.stringify(d.body));var E=m(l,c).catch(function(y){return t.reject({message:"Probably a network error, is the server down?",error:y})});if(d.timeout!==void 0){var C=new t(function(y,w){var g=setTimeout(function(){return clearTimeout(g),w({message:"Request timed out",timeout:d.timeout})},d.timeout)});E=t.race([E,C])}return E.then(function(y){if(y.ok){if(Ni(d.success)===Ni(qe.noop))return y.json().then(function(w){d.success(w)}).catch(function(w){return t.reject({message:"Failed to parse response body",error:w,response:y})})}else return t.reject({message:"API call failed",response:y})}).catch(function(y){Ni(d.error)===Ni(qe.noop)&&d.error(y.message||"<< internal error >>",y)}),E}}},qe.useOldDependencies=function(Z){var m=Z&&Z.jQuery||jQuery,t=Z&&Z.WebSocket||WebSocket;return{newWebSocket:function(o,l){return new t(o,l)},isArray:function(o){return m.isArray(o)},extension:Z&&Z.extension||nd,webRTCAdapter:Z&&Z.adapter||adapter,httpAPICall:function(o,l){var d=l.body!==void 0?{contentType:"application/json",data:JSON.stringify(l.body)}:{},c=l.withCredentials!==void 0?{xhrFields:{withCredentials:l.withCredentials}}:{};return m.ajax(m.extend(d,c,{url:o,type:l.verb,cache:!1,dataType:"json",async:l.async,timeout:l.timeout,success:function(C){Ni(l.success)===Ni(qe.noop)&&l.success(C)},error:function(C,y,w){Ni(l.error)===Ni(qe.noop)&&l.error(y,w)}}))}}},qe.noop=function(){},qe.dataChanDefaultLabel="JanusDataChannel",qe.endOfCandidates=null,qe.init=function(Z){if(Z=Z||{},Z.callback=typeof Z.callback=="function"?Z.callback:qe.noop,qe.initDone===!0)Z.callback();else{if((typeof console>"u"||typeof console.log>"u")&&(console={log:function(){}}),qe.trace=qe.noop,qe.debug=qe.noop,qe.vdebug=qe.noop,qe.log=qe.noop,qe.warn=qe.noop,qe.error=qe.noop,Z.debug===!0||Z.debug==="all")qe.trace=console.trace.bind(console),qe.debug=console.debug.bind(console),qe.vdebug=console.debug.bind(console),qe.log=console.log.bind(console),qe.warn=console.warn.bind(console),qe.error=console.error.bind(console);else if(Array.isArray(Z.debug))for(var m in Z.debug){var t=Z.debug[m];switch(t){case"trace":qe.trace=console.trace.bind(console);break;case"debug":qe.debug=console.debug.bind(console);break;case"vdebug":qe.vdebug=console.debug.bind(console);break;case"log":qe.log=console.log.bind(console);break;case"warn":qe.warn=console.warn.bind(console);break;case"error":qe.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+t+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}}qe.log("Initializing library");var n=Z.dependencies||qe.useDefaultDependencies();qe.isArray=n.isArray,qe.webRTCAdapter=n.webRTCAdapter,qe.httpAPICall=n.httpAPICall,qe.newWebSocket=n.newWebSocket,qe.extension=n.extension,qe.extension.init(),qe.listDevices=function(y,w){y=typeof y=="function"?y:qe.noop,w==null&&(w={audio:!0,video:!0}),qe.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(w).then(function(g){navigator.mediaDevices.enumerateDevices().then(function(p){qe.debug(p),y(p);try{var te=g.getTracks();for(var ae in te){var de=te[ae];de!=null&&de.stop()}}catch{}})}).catch(function(g){qe.error(g),y([])}):(qe.warn("navigator.mediaDevices unavailable"),y([]))},qe.attachMediaStream=function(y,w){if(qe.webRTCAdapter.browserDetails.browser==="chrome"){var g=qe.webRTCAdapter.browserDetails.version;g>=52?y.srcObject=w:typeof y.src<"u"?y.src=URL.createObjectURL(w):qe.error("Error attaching stream to element")}else y.srcObject=w},qe.reattachMediaStream=function(y,w){if(qe.webRTCAdapter.browserDetails.browser==="chrome"){var g=qe.webRTCAdapter.browserDetails.version;g>=52?y.srcObject=w.srcObject:typeof y.src<"u"?y.src=w.src:qe.error("Error reattaching stream to element")}else y.srcObject=w.srcObject};var o=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,l=o?"pagehide":"beforeunload",d=window["on"+l];if(window.addEventListener(l,function(y){qe.log("Closing window");for(var w in qe.sessions)qe.sessions[w]!==null&&qe.sessions[w]!==void 0&&qe.sessions[w].destroyOnUnload&&(qe.log("Destroying session "+w),qe.sessions[w].destroy({asyncRequest:!1,notifyDestroyed:!1}));d&&typeof d=="function"&&d()}),qe.safariVp8=!1,qe.webRTCAdapter.browserDetails.browser==="safari"&&qe.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(var m in RTCRtpSender.getCapabilities("video").codecs){var c=RTCRtpSender.getCapabilities("video").codecs[m];if(c&&c.mimeType&&c.mimeType.toLowerCase()==="video/vp8"){qe.safariVp8=!0;break}}qe.safariVp8?qe.log("This version of Safari supports VP8"):qe.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{var E=new RTCPeerConnection({},{});E.createOffer({offerToReceiveVideo:!0}).then(function(y){qe.safariVp8=y.sdp.indexOf("VP8")!==-1,qe.safariVp8?qe.log("This version of Safari supports VP8"):qe.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),E.close(),E=null})}if(qe.unifiedPlan=!1,qe.webRTCAdapter.browserDetails.browser==="firefox"&&qe.webRTCAdapter.browserDetails.version>=59)qe.unifiedPlan=!0;else if(qe.webRTCAdapter.browserDetails.browser==="chrome"&&qe.webRTCAdapter.browserDetails.version<72)qe.unifiedPlan=!1;else if(!("currentDirection"in RTCRtpTransceiver.prototype))qe.unifiedPlan=!1;else{var C=new RTCPeerConnection;try{C.addTransceiver("audio"),qe.unifiedPlan=!0}catch{}C.close()}qe.initDone=!0,Z.callback()}},qe.isWebrtcSupported=function(){return window.RTCPeerConnection!==void 0&&window.RTCPeerConnection!==null},qe.isGetUserMediaAvailable=function(){return navigator.mediaDevices!==void 0&&navigator.mediaDevices!==null&&navigator.mediaDevices.getUserMedia!==void 0&&navigator.mediaDevices.getUserMedia!==null},qe.randomString=function(Z){for(var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<Z;n++){var o=Math.floor(Math.random()*m.length);t+=m.substring(o,o+1)}return t};function qe(Z,m){if(qe.initDone===void 0)return Z.error("Library not initialized"),{};if(!qe.isWebrtcSupported())return Z.error("WebRTC not supported by this browser"),{};if(qe.log("Library initialized: "+qe.initDone),Z=Z||{},Z.success=typeof Z.success=="function"?Z.success:qe.noop,Z.error=typeof Z.error=="function"?Z.error:qe.noop,Z.destroyed=typeof Z.destroyed=="function"?Z.destroyed:qe.noop,Z.server===null||Z.server===void 0)return Z.error("Invalid server url"),{};var t=!1,n=null,o={},l=null,d=null,c=0,E=Z.server;qe.isArray(E)?(qe.log("Multiple servers provided ("+E.length+"), will use the first that works"),E=null,d=Z.server,qe.debug(d)):E.indexOf("ws")===0?(t=!0,qe.log("Using WebSockets to contact Janus: "+E)):(t=!1,qe.log("Using REST API to contact Janus: "+E));var C=Z.iceServers;C==null&&(C=[{urls:"stun:stun.l.google.com:19302"}]);var y=Z.iceTransportPolicy,w=Z.bundlePolicy,g=Z.ipv6;g==null&&(g=!1);var p=!1;Z.withCredentials!==void 0&&Z.withCredentials!==null&&(p=Z.withCredentials===!0);var te=10;Z.max_poll_events!==void 0&&Z.max_poll_events!==null&&(te=Z.max_poll_events),te<1&&(te=1);var ae=null;Z.token!==void 0&&Z.token!==null&&(ae=Z.token);var de=null;Z.apisecret!==void 0&&Z.apisecret!==null&&(de=Z.apisecret),this.destroyOnUnload=!0,Z.destroyOnUnload!==void 0&&Z.destroyOnUnload!==null&&(this.destroyOnUnload=Z.destroyOnUnload===!0);var ie=25e3;Z.keepAlivePeriod!==void 0&&Z.keepAlivePeriod!==null&&(ie=Z.keepAlivePeriod),isNaN(ie)&&(ie=25e3);var we=6e4;Z.longPollTimeout!==void 0&&Z.longPollTimeout!==null&&(we=Z.longPollTimeout),isNaN(we)&&(we=6e4);function Ve(G){var ge={high:9e5,medium:3e5,low:1e5};return G!=null&&(G.high&&(ge.high=G.high),G.medium&&(ge.medium=G.medium),G.low&&(ge.low=G.low)),ge}var ue=!1,x=null,O={},ne=this,Q=0,ye={};M(Z),this.getServer=function(){return E},this.isConnected=function(){return ue},this.reconnect=function(G){G=G||{},G.success=typeof G.success=="function"?G.success:qe.noop,G.error=typeof G.error=="function"?G.error:qe.noop,G.reconnect=!0,M(G)},this.getSessionId=function(){return x},this.destroy=function(G){Te(G)},this.attach=function(G){ze(G)};function se(){if(x!=null){if(qe.debug("Long poll..."),!ue){qe.warn("Is the server down? (connected=false)");return}var G=E+"/"+x+"?rid="+new Date().getTime();te!=null&&(G=G+"&maxev="+te),ae!=null&&(G=G+"&token="+encodeURIComponent(ae)),de!=null&&(G=G+"&apisecret="+encodeURIComponent(de)),qe.httpAPICall(G,{verb:"GET",withCredentials:p,success:Ze,timeout:we,error:function(xe,ke){if(qe.error(xe+":",ke),Q++,Q>3){ue=!1,Z.error("Lost connection to the server (is it down?)");return}se()}})}}function Ze(G,ge){if(Q=0,!t&&x!==void 0&&x!==null&&ge!==!0&&se(),!t&&qe.isArray(G)){for(var xe=0;xe<G.length;xe++)Ze(G[xe],!0);return}if(G.rtcgw==="keepalive"){qe.vdebug("Got a keepalive on session "+x);return}else if(G.rtcgw==="ack"){qe.debug("Got an ack on session "+x),qe.debug(G);var ke=G.transaction;if(ke!=null){var ce=ye[ke];ce!=null&&ce(G),delete ye[ke]}return}else if(G.rtcgw==="success"){qe.debug("Got a success on session "+x),qe.debug(G);var ke=G.transaction;if(ke!=null){var ce=ye[ke];ce!=null&&ce(G),delete ye[ke]}return}else if(G.rtcgw==="trickle"){var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Be=O[X];if(Be==null){qe.debug("This handle is not attached to this session");return}var lt=G.candidate;qe.debug("Got a trickled candidate on session "+x),qe.debug(lt);var dt=Be.webrtcStuff;dt.pc&&dt.remoteSdp?(qe.debug("Adding remote candidate:",lt),!lt||lt.completed===!0?dt.pc.addIceCandidate(qe.endOfCandidates):dt.pc.addIceCandidate(lt)):(qe.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),dt.candidates||(dt.candidates=[]),dt.candidates.push(lt),qe.debug(dt.candidates))}else if(G.rtcgw==="webrtcup"){qe.debug("Got a webrtcup event on session "+x),qe.debug(G);var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Be=O[X];if(Be==null){qe.debug("This handle is not attached to this session");return}Be.webrtcState(!0);return}else if(G.rtcgw==="hangup"){qe.debug("Got a hangup event on session "+x),qe.debug(G);var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Be=O[X];if(Be==null){qe.debug("This handle is not attached to this session");return}Be.webrtcState(!1,G.reason),Be.hangup()}else if(G.rtcgw==="detached"){qe.debug("Got a detached event on session "+x),qe.debug(G);var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Be=O[X];if(Be==null)return;Be.detached=!0,Be.ondetached(),Be.detach()}else if(G.rtcgw==="media"){qe.debug("Got a media event on session "+x),qe.debug(G);var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Be=O[X];if(Be==null){qe.debug("This handle is not attached to this session");return}Be.mediaState(G.type,G.receiving)}else if(G.rtcgw==="slowlink"){qe.debug("Got a slowlink event on session "+x),qe.debug(G),console.log("json的所有信息打印-----------------------------------------------",G);var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Be=O[X];if(Be==null){qe.debug("This handle is not attached to this session");return}Be.slowLink(G.uplink,G.lost)}else if(G.rtcgw==="error"){qe.error("Ooops: "+G.error.code+" "+G.error.reason),qe.debug(G);var ke=G.transaction;if(ke!=null){var ce=ye[ke];ce!=null&&ce(G),delete ye[ke]}return}else if(G.rtcgw==="event"){qe.debug("Got a plugin event on session "+x),qe.debug(G);var X=G.sender;if(X==null){qe.warn("Missing sender...");return}var Lt=G.plugindata;if(Lt==null){qe.warn("Missing plugindata...");return}qe.debug("  -- Event is coming from "+X+" ("+Lt.plugin+")");var qt=Lt.data;qe.debug(qt);var Be=O[X];if(Be==null){qe.warn("This handle is not attached to this session");return}var Si=G.jsep;Si!=null&&(qe.debug("Handling SDP as well..."),qe.debug(Si));var he=Be.onmessage;he!=null?(qe.debug("Notifying application..."),he(qt,Si)):qe.debug("No provided notification callback")}else if(G.rtcgw==="timeout"){qe.error("Timeout on session "+x),qe.debug(G),t&&n.close(3504,"Gateway timeout");return}else qe.warn("Unknown message/event  '"+G.rtcgw+"' on session "+x),qe.debug(G)}function Qe(){if(!(E===null||!t||!ue)){l=setTimeout(Qe,ie);var G={rtcgw:"keepalive",session_id:x,transaction:qe.randomString(12)};ae!=null&&(G.token=ae),de!=null&&(G.apisecret=de),n.send(JSON.stringify(G))}}function M(G){var ge=qe.randomString(12),xe={rtcgw:"create",transaction:ge,token:"testtoken"};if(xe=Object.assign({},xe,m),G.reconnect&&(ue=!1,xe.rtcgw="claim",xe.session_id=x,n&&(n.onopen=null,n.onerror=null,n.onclose=null,l&&(clearTimeout(l),l=null))),ae!=null&&(xe.token=ae),de!=null&&(xe.apisecret=de),E===null&&qe.isArray(d)&&(E=d[c],E.indexOf("ws")===0?(t=!0,qe.log("Server #"+(c+1)+": trying WebSockets to contact Janus ("+E+")")):(t=!1,qe.log("Server #"+(c+1)+": trying REST API to contact Janus ("+E+")"))),t){n=qe.newWebSocket(E,"rtcgw-protocol"),o={error:function(){if(qe.error("Error connecting to the Janus WebSockets server... "+E),qe.isArray(d)&&!G.reconnect){if(c++,c==d.length){G.error("Error connecting to any of the provided Janus servers: Is the server down?");return}E=null,setTimeout(function(){M(G)},200);return}G.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){ye[ge]=function(X){if(qe.debug(X),X.rtcgw!=="success"){qe.error("Ooops: "+X.error.code+" "+X.error.reason),G.error(X.error.reason);return}l=setTimeout(Qe,ie),ue=!0,x=X.session_id?X.session_id:X.data.id,G.reconnect?qe.log("Claimed session: "+x):qe.log("Created session: "+x),qe.sessions[x]=ne,G.success(x)},n.send(JSON.stringify(xe))},message:function(X){Ze(JSON.parse(X.data))}};for(var ke in o)n.addEventListener(ke,o[ke]);return}qe.httpAPICall(E,{verb:"POST",withCredentials:p,body:xe,success:function(X){if(qe.debug(X),X.rtcgw!=="success"){qe.error("Ooops: "+X.error.code+" "+X.error.reason),G.error(X.error.reason);return}ue=!0,x=X.session_id?X.session_id:X.data.id,G.reconnect?qe.log("Claimed session: "+x):qe.log("Created session: "+x),qe.sessions[x]=ne,se(),G.success()},error:function(X,Be){if(qe.error(X+":",Be),qe.isArray(d)&&!G.reconnect){if(c++,c==d.length){G.error("Error connecting to any of the provided Janus servers: Is the server down?");return}E=null,setTimeout(function(){M(G)},200);return}Be===""?G.error(X+": Is the server down?"):G.error(X+": "+Be)}})}function Te(G){G=G||{},G.success=typeof G.success=="function"?G.success:qe.noop;var ge=!0;G.asyncRequest!==void 0&&G.asyncRequest!==null&&(ge=G.asyncRequest===!0);var xe=!0;G.notifyDestroyed!==void 0&&G.notifyDestroyed!==null&&(xe=G.notifyDestroyed===!0);var ke=!1;if(G.cleanupHandles!==void 0&&G.cleanupHandles!==null&&(ke=G.cleanupHandles===!0),qe.log("Destroying session "+x+" (async="+ge+")"),!ue){qe.warn("Is the server down? (connected=false)"),G.success();return}if(x==null){qe.warn("No session to destroy"),G.success(),xe&&Z.destroyed();return}if(ke)for(var ce in O)$e(ce,{noRequest:!0});var X={rtcgw:"destroy",transaction:qe.randomString(12)};if(ae!=null&&(X.token=ae),de!=null&&(X.apisecret=de),t){X.session_id=x;var Be=function(){for(var qt in o)n.removeEventListener(qt,o[qt]);n.removeEventListener("message",lt),n.removeEventListener("error",dt),l&&clearTimeout(l),n.close()},lt=function(qt){var Si=JSON.parse(qt.data);Si.session_id==X.session_id&&Si.transaction==X.transaction&&(Be(),G.success(),xe&&Z.destroyed())},dt=function(qt){Be(),G.error("Failed to destroy the server: Is the server down?"),xe&&Z.destroyed()};n.addEventListener("message",lt),n.addEventListener("error",dt),n.send(JSON.stringify(X));return}qe.httpAPICall(E+"/"+x,{verb:"POST",async:ge,withCredentials:p,body:X,success:function(qt){qe.log("Destroyed session:"),qe.debug(qt),x=null,ue=!1,qt.rtcgw!=="success"&&qe.error("Ooops: "+qt.error.code+" "+qt.error.reason),G.success(),xe&&Z.destroyed()},error:function(qt,Si){qe.error(qt+":",Si),x=null,ue=!1,G.success(),xe&&Z.destroyed(),pluginHandlesp}})}function ze(G){if(G=G||{},G.success=typeof G.success=="function"?G.success:qe.noop,G.error=typeof G.error=="function"?G.error:qe.noop,G.consentDialog=typeof G.consentDialog=="function"?G.consentDialog:qe.noop,G.iceState=typeof G.iceState=="function"?G.iceState:qe.noop,G.mediaState=typeof G.mediaState=="function"?G.mediaState:qe.noop,G.webrtcState=typeof G.webrtcState=="function"?G.webrtcState:qe.noop,G.slowLink=typeof G.slowLink=="function"?G.slowLink:qe.noop,G.onmessage=typeof G.onmessage=="function"?G.onmessage:qe.noop,G.onlocalstream=typeof G.onlocalstream=="function"?G.onlocalstream:qe.noop,G.onremotestream=typeof G.onremotestream=="function"?G.onremotestream:qe.noop,G.ondata=typeof G.ondata=="function"?G.ondata:qe.noop,G.ondataopen=typeof G.ondataopen=="function"?G.ondataopen:qe.noop,G.oncleanup=typeof G.oncleanup=="function"?G.oncleanup:qe.noop,G.ondetached=typeof G.ondetached=="function"?G.ondetached:qe.noop,!ue){qe.warn("Is the server down? (connected=false)"),G.error("Is the server down? (connected=false)");return}var ge=G.plugin;if(ge==null){qe.error("Invalid plugin"),G.error("Invalid plugin");return}var xe=G.opaqueId,ke=G.token?G.token:ae,ce=qe.randomString(12),X={rtcgw:"attach",plugin:ge,opaque_id:xe,transaction:ce};if(ke!=null&&(X.token=ke),de!=null&&(X.apisecret=de),t){ye[ce]=function(Be){if(qe.debug(Be),Be.rtcgw!=="success"){qe.error("Ooops: "+Be.error.code+" "+Be.error.reason),G.error("Ooops: "+Be.error.code+" "+Be.error.reason);return}var lt=Be.data.id;qe.log("Created handle: "+lt);var dt={session:ne,plugin:ge,id:lt,token:ke,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return lt},getPlugin:function(){return ge},getVolume:function(){return kt(lt,!0)},getRemoteVolume:function(){return kt(lt,!0)},getLocalVolume:function(){return kt(lt,!1)},isAudioMuted:function(){return ee(lt,!1)},muteAudio:function(){return me(lt,!1,!0)},unmuteAudio:function(){return me(lt,!1,!1)},isVideoMuted:function(){return ee(lt,!0)},muteVideo:function(){return me(lt,!0,!0)},unmuteVideo:function(){return me(lt,!0,!1)},getBitrate:function(){return Y(lt)},getNetworkQuality:function(qt){P(lt,qt)},send:function(qt){oi(lt,qt)},data:function(qt){di(lt,qt)},dtmf:function(qt){zi(lt,qt)},consentDialog:G.consentDialog,iceState:G.iceState,mediaState:G.mediaState,webrtcState:G.webrtcState,slowLink:G.slowLink,onmessage:G.onmessage,createOffer:function(qt){Ke(lt,!0,qt)},createAnswer:function(qt){Ke(lt,!1,qt)},handleRemoteJsep:function(qt){Ne(lt,qt)},onlocalstream:G.onlocalstream,onremotestream:G.onremotestream,ondata:G.ondata,ondataopen:G.ondataopen,oncleanup:G.oncleanup,ondetached:G.ondetached,hangup:function(qt){N(lt,qt===!0)},detach:function(qt){$e(lt,qt)}};O[lt]=dt,G.success(dt)},X.session_id=x,n.send(JSON.stringify(X));return}qe.httpAPICall(E+"/"+x,{verb:"POST",withCredentials:p,body:X,success:function(lt){if(qe.debug(lt),lt.rtcgw!=="success"){qe.error("Ooops: "+lt.error.code+" "+lt.error.reason),G.error("Ooops: "+lt.error.code+" "+lt.error.reason);return}var dt=lt.data.id;qe.log("Created handle: "+dt);var Lt={session:ne,plugin:ge,id:dt,token:ke,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,remoteStream:null,mySdp:null,mediaConstraints:null,pc:null,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,volume:{value:null,timer:null},bitrate:{value:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,timer:null}},getId:function(){return dt},getPlugin:function(){return ge},getVolume:function(){return kt(dt,!0)},getRemoteVolume:function(){return kt(dt,!0)},getLocalVolume:function(){return kt(dt,!1)},isAudioMuted:function(){return ee(dt,!1)},muteAudio:function(){return me(dt,!1,!0)},unmuteAudio:function(){return me(dt,!1,!1)},isVideoMuted:function(){return ee(dt,!0)},muteVideo:function(){return me(dt,!0,!0)},unmuteVideo:function(){return me(dt,!0,!1)},getBitrate:function(){return Y(dt)},getNetworkQuality:function(Si){P(dt,Si)},send:function(Si){oi(dt,Si)},data:function(Si){di(dt,Si)},dtmf:function(Si){zi(dt,Si)},consentDialog:G.consentDialog,iceState:G.iceState,mediaState:G.mediaState,webrtcState:G.webrtcState,slowLink:G.slowLink,onmessage:G.onmessage,createOffer:function(Si){Ke(dt,!0,Si)},createAnswer:function(Si){Ke(dt,!1,Si)},handleRemoteJsep:function(Si){Ne(dt,Si)},onlocalstream:G.onlocalstream,onremotestream:G.onremotestream,ondata:G.ondata,ondataopen:G.ondataopen,oncleanup:G.oncleanup,ondetached:G.ondetached,hangup:function(Si){N(dt,Si===!0)},detach:function(Si){$e(dt,Si)}};O[dt]=Lt,G.success(Lt)},error:function(lt,dt){qe.error(lt+":",dt)}})}function oi(G,ge){if(ge=ge||{},ge.success=typeof ge.success=="function"?ge.success:qe.noop,ge.error=typeof ge.error=="function"?ge.error:qe.noop,!ue){qe.warn("Is the server down? (connected=false)"),ge.error("Is the server down? (connected=false)");return}var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0){qe.warn("Invalid handle"),ge.error("Invalid handle");return}var ke=ge.message,ce=ge.jsep,X=qe.randomString(12),Be={rtcgw:"message",body:ke,transaction:X};if(xe.token!==null&&xe.token!==void 0&&(Be.token=xe.token),de!=null&&(Be.apisecret=de),ce!=null&&(Be.jsep=ce),qe.debug("Sending message to plugin (handle="+G+"):"),qe.debug(Be),t){Be.session_id=x,Be.handle_id=G,ye[X]=function(lt){if(qe.debug("Message sent!"),qe.debug(lt),lt.rtcgw==="success"){var dt=lt.plugindata;if(dt==null){qe.warn("Request succeeded, but missing plugindata..."),ge.success();return}qe.log("Synchronous transaction successful ("+dt.plugin+")");var Lt=dt.data;qe.debug(Lt),ge.success(Lt);return}else if(lt.rtcgw!=="ack"){lt.error!==void 0&&lt.error!==null?(qe.error("Ooops: "+lt.error.code+" "+lt.error.reason),ge.error(lt.error.code+" "+lt.error.reason)):(qe.error("Unknown error"),ge.error("Unknown error"));return}ge.success()},n.send(JSON.stringify(Be));return}qe.httpAPICall(E+"/"+x+"/"+G,{verb:"POST",withCredentials:p,body:Be,success:function(dt){if(qe.debug("Message sent!"),qe.debug(dt),dt.rtcgw==="success"){var Lt=dt.plugindata;if(Lt==null){qe.warn("Request succeeded, but missing plugindata..."),ge.success();return}qe.log("Synchronous transaction successful ("+Lt.plugin+")");var qt=Lt.data;qe.debug(qt),ge.success(qt);return}else if(dt.rtcgw!=="ack"){dt.error!==void 0&&dt.error!==null?(qe.error("Ooops: "+dt.error.code+" "+dt.error.reason),ge.error(dt.error.code+" "+dt.error.reason)):(qe.error("Unknown error"),ge.error("Unknown error"));return}ge.success()},error:function(dt,Lt){qe.error(dt+":",Lt),ge.error(dt+": "+Lt)}})}function wi(G,ge){if(!ue){qe.warn("Is the server down? (connected=false)");return}var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0){qe.warn("Invalid handle");return}var ke={rtcgw:"trickle",candidate:ge,transaction:qe.randomString(12)};if(xe.token!==null&&xe.token!==void 0&&(ke.token=xe.token),de!=null&&(ke.apisecret=de),qe.vdebug("Sending trickle candidate (handle="+G+"):"),qe.vdebug(ke),t){ke.session_id=x,ke.handle_id=G,n.send(JSON.stringify(ke));return}qe.httpAPICall(E+"/"+x+"/"+G,{verb:"POST",withCredentials:p,body:ke,success:function(X){if(qe.vdebug("Candidate sent!"),qe.vdebug(X),X.rtcgw!=="ack"){qe.error("Ooops: "+X.error.code+" "+X.error.reason);return}},error:function(X,Be){qe.error(X+":",Be)}})}function ui(G,ge,xe,ke){var ce=O[G];if(ce==null||ce.webrtcStuff===null||ce.webrtcStuff===void 0){qe.warn("Invalid handle");return}var X=ce.webrtcStuff,Be=function(qt){qe.log("Received message on data channel:",qt);var Si=qt.target.label;ce.ondata(qt.data,Si)},lt=function(qt){qe.log("Received state change on data channel:",qt);var Si=qt.target.label,he=X.dataChannel[Si]?X.dataChannel[Si].readyState:"null";if(qe.log("State change on <"+Si+"> data channel: "+he),he==="open"){if(X.dataChannel[Si].pending&&X.dataChannel[Si].pending.length>0){qe.log("Sending pending messages on <"+Si+">:",X.dataChannel[Si].pending.length);for(var Bi in X.dataChannel[Si].pending){var yt=X.dataChannel[Si].pending[Bi];qe.log("Sending string on data channel <"+Si+">: "+yt),X.dataChannel[Si].send(yt)}X.dataChannel[Si].pending=[]}ce.ondataopen(Si)}},dt=function(qt){qe.error("Got error on data channel:",qt)};xe?X.dataChannel[ge]=xe:X.dataChannel[ge]=X.pc.createDataChannel(ge,{ordered:!1}),X.dataChannel[ge].onmessage=Be,X.dataChannel[ge].onopen=lt,X.dataChannel[ge].onclose=lt,X.dataChannel[ge].onerror=dt,X.dataChannel[ge].pending=[],ke&&X.dataChannel[ge].pending.push(ke)}function di(G,ge){ge=ge||{},ge.success=typeof ge.success=="function"?ge.success:qe.noop,ge.error=typeof ge.error=="function"?ge.error:qe.noop;var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0){qe.warn("Invalid handle"),ge.error("Invalid handle");return}var ke=xe.webrtcStuff,ce=ge.text;if(ce==null){qe.warn("Invalid text"),ge.error("Invalid text");return}var X=ge.label?ge.label:qe.dataChanDefaultLabel;if(!ke.dataChannel[X]){ui(G,X,!1,ce),ge.success();return}if(ke.dataChannel[X].readyState!=="open"){ke.dataChannel[X].pending.push(ce),ge.success();return}qe.log("Sending string on data channel <"+X+">: "+ce),ke.dataChannel[X].send(ce),ge.success()}function zi(G,ge){ge=ge||{},ge.success=typeof ge.success=="function"?ge.success:qe.noop,ge.error=typeof ge.error=="function"?ge.error:qe.noop;var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0){qe.warn("Invalid handle"),ge.error("Invalid handle");return}var ke=xe.webrtcStuff;if(ke.dtmfSender===null||ke.dtmfSender===void 0){if(ke.pc!==void 0&&ke.pc!==null){var ce=ke.pc.getSenders(),X=ce.find(function(qt){return qt.track&&qt.track.kind==="audio"});if(!X){qe.warn("Invalid DTMF configuration (no audio track)"),ge.error("Invalid DTMF configuration (no audio track)");return}ke.dtmfSender=X.dtmf,ke.dtmfSender&&(qe.log("Created DTMF Sender"),ke.dtmfSender.ontonechange=function(qt){qe.debug("Sent DTMF tone: "+qt.tone)})}if(ke.dtmfSender===null||ke.dtmfSender===void 0){qe.warn("Invalid DTMF configuration"),ge.error("Invalid DTMF configuration");return}}var Be=ge.dtmf;if(Be==null){qe.warn("Invalid DTMF parameters"),ge.error("Invalid DTMF parameters");return}var lt=Be.tones;if(lt==null){qe.warn("Invalid DTMF string"),ge.error("Invalid DTMF string");return}var dt=Be.duration;dt==null&&(dt=500);var Lt=Be.gap;Lt==null&&(Lt=50),qe.debug("Sending DTMF string "+lt+" (duration "+dt+"ms, gap "+Lt+"ms)"),ke.dtmfSender.insertDTMF(lt,dt,Lt),ge.success()}function $e(G,ge){ge=ge||{},ge.success=typeof ge.success=="function"?ge.success:qe.noop,ge.error=typeof ge.error=="function"?ge.error:qe.noop;var xe=!0;ge.asyncRequest!==void 0&&ge.asyncRequest!==null&&(xe=ge.asyncRequest===!0);var ke=!0;ge.noRequest!==void 0&&ge.noRequest!==null&&(ke=ge.noRequest===!0),qe.log("Destroying handle "+G+" (async="+xe+")"),N(G);var ce=O[G];if(ce==null||ce.detached){delete O[G],ge.success();return}if(ke){delete O[G],ge.success();return}if(!ue){qe.warn("Is the server down? (connected=false)"),ge.error("Is the server down? (connected=false)");return}var X={rtcgw:"detach",transaction:qe.randomString(12)};if(ce.token!==null&&ce.token!==void 0&&(X.token=ce.token),de!=null&&(X.apisecret=de),t){X.session_id=x,X.handle_id=G,n.send(JSON.stringify(X)),delete O[G],ge.success();return}qe.httpAPICall(E+"/"+x+"/"+G,{verb:"POST",async:xe,withCredentials:p,body:X,success:function(lt){qe.log("Destroyed handle:"),qe.debug(lt),lt.rtcgw!=="success"&&qe.error("Ooops: "+lt.error.code+" "+lt.error.reason),delete O[G],ge.success()},error:function(lt,dt){qe.error(lt+":",dt),delete O[G],ge.success()}})}function st(G,ge,xe,ke,ce){var X=O[G];if(X==null||X.webrtcStuff===null||X.webrtcStuff===void 0){qe.warn("Invalid handle"),ke.error("Invalid handle");return}var Be=X.webrtcStuff;qe.debug("streamsDone:",ce),ce&&(qe.debug("  -- Audio tracks:",ce.getAudioTracks()),qe.debug("  -- Video tracks:",ce.getVideoTracks()));var lt=!1;if(!Be.myStream||!xe.update||Be.streamExternal)Be.myStream=ce,lt=!0;else{if((!xe.update&&I(xe)||xe.update&&(xe.addAudio||xe.replaceAudio))&&ce.getAudioTracks()&&ce.getAudioTracks().length)if(Be.myStream.addTrack(ce.getAudioTracks()[0]),qe.unifiedPlan){qe.log((xe.replaceAudio?"Replacing":"Adding")+" audio track:",ce.getAudioTracks()[0]);var dt=null,Lt=Be.pc.getTransceivers();if(Lt&&Lt.length>0)for(var qt in Lt){var Si=Lt[qt];if(Si.sender&&Si.sender.track&&Si.sender.track.kind==="audio"||Si.receiver&&Si.receiver.track&&Si.receiver.track.kind==="audio"){dt=Si;break}}dt&&dt.sender?dt.sender.replaceTrack(ce.getAudioTracks()[0]):Be.pc.addTrack(ce.getAudioTracks()[0],ce)}else qe.log((xe.replaceAudio?"Replacing":"Adding")+" audio track:",ce.getAudioTracks()[0]),Be.pc.addTrack(ce.getAudioTracks()[0],ce);if((!xe.update&&J(xe)||xe.update&&(xe.addVideo||xe.replaceVideo))&&ce.getVideoTracks()&&ce.getVideoTracks().length)if(Be.myStream.addTrack(ce.getVideoTracks()[0]),qe.unifiedPlan){qe.log((xe.replaceVideo?"Replacing":"Adding")+" video track:",ce.getVideoTracks()[0]);var he=null,Lt=Be.pc.getTransceivers();if(Lt&&Lt.length>0)for(var qt in Lt){var Si=Lt[qt];if(Si.sender&&Si.sender.track&&Si.sender.track.kind==="video"||Si.receiver&&Si.receiver.track&&Si.receiver.track.kind==="video"){he=Si;break}}he&&he.sender?he.sender.replaceTrack(ce.getVideoTracks()[0]):Be.pc.addTrack(ce.getVideoTracks()[0],ce)}else qe.log((xe.replaceVideo?"Replacing":"Adding")+" video track:",ce.getVideoTracks()[0]),Be.pc.addTrack(ce.getVideoTracks()[0],ce)}if(!Be.pc){var Bi={iceServers:C,iceTransportPolicy:y,bundlePolicy:w};qe.webRTCAdapter.browserDetails.browser==="chrome"&&(Bi.sdpSemantics=qe.webRTCAdapter.browserDetails.version<72?"plan-b":"unified-plan");var yt={optional:[{DtlsSrtpKeyAgreement:!0}]};if(g===!0&&yt.optional.push({googIPv6:!0}),ke.rtcConstraints&&Ni(ke.rtcConstraints)==="object"){qe.debug("Adding custom PeerConnection constraints:",ke.rtcConstraints);for(var qt in ke.rtcConstraints)yt.optional.push(ke.rtcConstraints[qt])}qe.webRTCAdapter.browserDetails.browser==="edge"&&(Bi.bundlePolicy="max-bundle"),qe.log("Creating PeerConnection"),qe.debug(yt),Be.pc=new RTCPeerConnection(Bi,yt),qe.debug(Be.pc),Be.pc.getStats&&(Be.volume={},Be.bitrate.value="0 kbits/sec"),qe.log("Preparing local SDP and gathering candidates (trickle="+Be.trickle+")"),Be.pc.oniceconnectionstatechange=function(Xt){Be.pc&&X.iceState(Be.pc.iceConnectionState)},Be.pc.onicecandidate=function(Xt){if(Xt.candidate==null||qe.webRTCAdapter.browserDetails.browser==="edge"&&Xt.candidate.candidate.indexOf("endOfCandidates")>0)qe.log("End of candidates."),Be.iceDone=!0,Be.trickle===!0?wi(G,{completed:!0}):Wt(G,ke);else{var ot={candidate:Xt.candidate.candidate,sdpMid:Xt.candidate.sdpMid,sdpMLineIndex:Xt.candidate.sdpMLineIndex};Be.trickle===!0&&wi(G,ot)}},Be.pc.ontrack=function(Xt){qe.log("Handling Remote Track"),qe.debug(Xt),Xt.streams&&(Be.remoteStream=Xt.streams[0],X.onremotestream(Be.remoteStream),!Xt.track.onended&&(qe.log("Adding onended callback to track:",Xt.track),Xt.track.onended=function(ot){qe.log("Remote track muted/removed:",ot),Be.remoteStream&&(Be.remoteStream.removeTrack(ot.target),X.onremotestream(Be.remoteStream))},Xt.track.onmute=Xt.track.onended,Xt.track.onunmute=function(ot){qe.log("Remote track flowing again:",ot);try{Be.remoteStream.addTrack(ot.target),X.onremotestream(Be.remoteStream)}catch(mi){qe.error(mi)}}))}}if(lt&&ce!==null&&ce!==void 0)if(qe.log("Adding local stream"),console.log("callbacks",ke),ke.media.video=="screen"){var wt=ke.simulcast2===!0;ce.getTracks().forEach(function(Xt){if(qe.log("Adding local track:",Xt),Xt.applyConstraints({frameRate:5}),!wt)Be.pc.addTrack(Xt,ce);else if(Xt.kind==="audio")Be.pc.addTrack(Xt,ce);else{qe.log("Enabling rid-based simulcasting:",Xt);var ot=Ve(ke.simulcastMaxBitrates);Be.pc.addTransceiver(Xt,{direction:"sendrecv",streams:[ce],sendEncodings:[{rid:"h",active:!0,maxBitrate:ot.high},{rid:"m",active:!0,maxBitrate:ot.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:ot.low,scaleResolutionDownBy:4}]})}})}else{var wt=ke.simulcast2===!0,pt=ce.getTracks(),Dt=pt[0];if(Dt){var St=Dt.getSettings();console.log("videoTrack",Dt),console.log("videosettings",St)}var Et=ce.getAudioTracks(),jt=Et[0];if(jt){var _t=jt.getSettings();console.log("audiosettings",_t)}pt.forEach(function(ot){if(ot.applyConstraints({frameRate:{max:ke.frameRate}}),qe.log("Adding local track:",ot),wt){Be.pc.addTrack(ot,ce);var mi=null,Pi=Be.pc.getSenders();for(var Ii in Pi){var ti=Pi[Ii];ti&&ti.track&&ti.track.kind==="video"&&(mi=ti)}var Vi=null;mi&&(Vi=mi.getParameters()),Vi&&Vi.encodings&&(Vi.encodings[0].maxBitrate=1e5,mi.setParameters(Vi).then(function(At){console.log("Successed to set parameters!",Vi)}).catch(function(At){console.log("err",At),console.error(At)}))}else if(ot.kind==="audio")Be.pc.addTrack(ot,ce);else{qe.log("Enabling rid-based simulcasting:",ot);var Jt=ke.bitrate||1e5;Be.pc.addTransceiver(ot,{direction:"sendrecv",streams:[ce],sendEncodings:[{rid:"h",active:!0,maxBitrate:Jt}]})}})}R(xe)&&!Be.dataChannel[qe.dataChanDefaultLabel]&&(qe.log("Creating data channel"),ui(G,qe.dataChanDefaultLabel,!1),Be.pc.ondatachannel=function(Xt){qe.log("Data channel created by Janus:",Xt),ui(G,Xt.channel.label,Xt.channel)}),Be.myStream&&X.onlocalstream(Be.myStream),ge==null?at(G,xe,ke):Be.pc.setRemoteDescription(ge).then(function(){if(qe.log("Remote description accepted!"),Be.remoteSdp=ge.sdp,Be.candidates&&Be.candidates.length>0){for(var Xt=0;Xt<Be.candidates.length;Xt++){var ot=Be.candidates[Xt];qe.debug("Adding remote candidate:",ot),!ot||ot.completed===!0?Be.pc.addIceCandidate(qe.endOfCandidates):Be.pc.addIceCandidate(ot)}Be.candidates=[]}Ut(G,xe,ke)},ke.error)}function Ke(G,ge,xe){xe=xe||{},xe.success=typeof xe.success=="function"?xe.success:qe.noop,xe.error=typeof xe.error=="function"?xe.error:Oe;var ke=xe.jsep;if(ge&&ke){qe.error("Provided a JSEP to a createOffer"),xe.error("Provided a JSEP to a createOffer");return}else if(!ge&&(!ke||!ke.type||!ke.sdp)){qe.error("A valid JSEP is required for createAnswer"),xe.error("A valid JSEP is required for createAnswer");return}xe.media=xe.media||{audio:!0,video:!0};var ce=xe.media,X=O[G];if(X==null||X.webrtcStuff===null||X.webrtcStuff===void 0){qe.warn("Invalid handle"),xe.error("Invalid handle");return}var Be=X.webrtcStuff;if(Be.trickle=He(xe.trickle),Be.pc===void 0||Be.pc===null)ce.update=!1,ce.keepAudio=!1,ce.keepVideo=!1;else if(Be.pc!==void 0&&Be.pc!==null){if(qe.log("Updating existing media session"),ce.update=!0,xe.stream!==null&&xe.stream!==void 0)xe.stream!==Be.myStream&&qe.log("Renegotiation involves a new external stream");else{if(ce.addAudio){if(ce.keepAudio=!1,ce.replaceAudio=!1,ce.removeAudio=!1,ce.audioSend=!0,Be.myStream&&Be.myStream.getAudioTracks()&&Be.myStream.getAudioTracks().length){qe.error("Can't add audio stream, there already is one"),xe.error("Can't add audio stream, there already is one");return}}else ce.removeAudio?(ce.keepAudio=!1,ce.replaceAudio=!1,ce.addAudio=!1,ce.audioSend=!1):ce.replaceAudio&&(ce.keepAudio=!1,ce.addAudio=!1,ce.removeAudio=!1,ce.audioSend=!0);if(Be.myStream===null||Be.myStream===void 0?(ce.replaceAudio&&(ce.keepAudio=!1,ce.replaceAudio=!1,ce.addAudio=!0,ce.audioSend=!0),I(ce)&&(ce.keepAudio=!1,ce.addAudio=!0)):Be.myStream.getAudioTracks()===null||Be.myStream.getAudioTracks()===void 0||Be.myStream.getAudioTracks().length===0?(ce.replaceAudio&&(ce.keepAudio=!1,ce.replaceAudio=!1,ce.addAudio=!0,ce.audioSend=!0),I(ce)&&(ce.keepVideo=!1,ce.addAudio=!0)):I(ce)&&!ce.removeAudio&&!ce.replaceAudio&&(ce.keepAudio=!0),ce.addVideo){if(ce.keepVideo=!1,ce.replaceVideo=!1,ce.removeVideo=!1,ce.videoSend=!0,Be.myStream&&Be.myStream.getVideoTracks()&&Be.myStream.getVideoTracks().length){qe.error("Can't add video stream, there already is one"),xe.error("Can't add video stream, there already is one");return}}else ce.removeVideo?(ce.keepVideo=!1,ce.replaceVideo=!1,ce.addVideo=!1,ce.videoSend=!1):ce.replaceVideo&&(ce.keepVideo=!1,ce.addVideo=!1,ce.removeVideo=!1,ce.videoSend=!0);Be.myStream===null||Be.myStream===void 0||Be.myStream.getVideoTracks()===null||Be.myStream.getVideoTracks()===void 0||Be.myStream.getVideoTracks().length===0?(ce.replaceVideo&&(ce.keepVideo=!1,ce.replaceVideo=!1,ce.addVideo=!0,ce.videoSend=!0),J(ce)&&(ce.keepVideo=!1,ce.addVideo=!0)):J(ce)&&!ce.removeVideo&&!ce.replaceVideo&&(ce.keepVideo=!0),ce.addData&&(ce.data=!0)}if(I(ce)&&ce.keepAudio&&J(ce)&&ce.keepVideo){X.consentDialog(!1),st(G,ke,ce,xe,Be.myStream);return}}if(ce.update&&!Be.streamExternal){if(ce.removeAudio||ce.replaceAudio){if(Be.myStream&&Be.myStream.getAudioTracks()&&Be.myStream.getAudioTracks().length){var lt=Be.myStream.getAudioTracks()[0];qe.log("Removing audio track:",lt),Be.myStream.removeTrack(lt);try{lt.stop()}catch{}}if(Be.pc.getSenders()&&Be.pc.getSenders().length){var dt=!0;if(ce.replaceAudio&&qe.unifiedPlan&&(dt=!1),dt)for(var Lt in Be.pc.getSenders()){var lt=Be.pc.getSenders()[Lt];lt&&lt.track&&lt.track.kind==="audio"&&(qe.log("Removing audio sender:",lt),Be.pc.removeTrack(lt))}}}if(ce.removeVideo||ce.replaceVideo){if(Be.myStream&&Be.myStream.getVideoTracks()&&Be.myStream.getVideoTracks().length){var lt=Be.myStream.getVideoTracks()[0];qe.log("Removing video track:",lt),Be.myStream.removeTrack(lt);try{lt.stop()}catch{}}if(Be.pc.getSenders()&&Be.pc.getSenders().length){var qt=!0;if(ce.replaceVideo&&qe.unifiedPlan&&(qt=!1),qt)for(var Lt in Be.pc.getSenders()){var lt=Be.pc.getSenders()[Lt];lt&&lt.track&&lt.track.kind==="video"&&(qe.log("Removing video sender:",lt),Be.pc.removeTrack(lt))}}}}if(xe.stream!==null&&xe.stream!==void 0){var Si=xe.stream;if(qe.log("MediaStream provided by the application"),qe.debug(Si),ce.update&&Be.myStream&&Be.myStream!==xe.stream&&!Be.streamExternal){try{var he=Be.myStream.getTracks();for(var Bi in he){var yt=he[Bi];qe.log(yt),yt!=null&&yt.stop()}}catch{}Be.myStream=null}Be.streamExternal=!0,X.consentDialog(!1),st(G,ke,ce,xe,Si);return}if(I(ce)||J(ce)){if(!qe.isGetUserMediaAvailable()){xe.error("getUserMedia not available");return}var wt={mandatory:{},optional:[]};X.consentDialog(!0);var pt=I(ce);pt===!0&&ce!=null&&ce!=null&&Ni(ce.audio)==="object"&&(pt=ce.audio);var Dt=J(ce);if(Dt===!0&&ce!=null&&ce!=null){var St=xe.simulcast===!0,Et=xe.simulcast2===!0;if((St||Et)&&!ke&&(ce.video===void 0||ce.video===!1)&&(ce.video="hires"),ce.video&&ce.video!="screen"&&ce.video!="window")if(Ni(ce.video)==="object")Dt=ce.video;else{var jt=0,_t=0;ce.video==="lowres"?(_t=240,jt=320):ce.video==="lowres-16:9"?(_t=180,jt=320):ce.video==="hires"||ce.video==="hires-16:9"||ce.video==="hdres"?(_t=720,jt=1280):ce.video==="fhdres"?(_t=1080,jt=1920):ce.video==="4kres"?(_t=2160,jt=3840):ce.video==="stdres"?(_t=480,jt=640):ce.video==="stdres-16:9"?(_t=360,jt=640):(qe.log("Default video setting is stdres 4:3"),_t=480,jt=640),qe.log("Adding media constraint:",ce.video),Dt={height:{ideal:_t},width:{ideal:jt}},qe.log("Adding video constraint:",Dt)}else if(ce.video==="screen"||ce.video==="window"){var Xt=function(Vi,Jt){X.consentDialog(!1),Vi?xe.error(Vi):st(G,ke,ce,xe,Jt)},ot=function(Vi,Jt,At){qe.log("Adding media constraint (screen capture)"),qe.debug(Vi),navigator.mediaDevices.getUserMedia(Vi).then(function(j){At?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(T){j.addTrack(T.getAudioTracks()[0]),Jt(null,j)}):Jt(null,j)}).catch(function(j){X.consentDialog(!1),Jt(j)})};if(ce.screenshareFrameRate||(ce.screenshareFrameRate=3),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia){navigator.mediaDevices.getDisplayMedia({video:!0}).then(function(ti){X.consentDialog(!1),I(ce)&&!ce.keepAudio?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(Vi){ti.addTrack(Vi.getAudioTracks()[0]),st(G,ke,ce,xe,ti)}):st(G,ke,ce,xe,ti)},function(ti){X.consentDialog(!1),xe.error(ti)});return}if(qe.webRTCAdapter.browserDetails.browser==="chrome"){var mi=qe.webRTCAdapter.browserDetails.version,Pi=33;window.navigator.userAgent.match("Linux")&&(Pi=35),mi>=26&&mi<=Pi?(wt={video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:ce.screenshareFrameRate,maxFrameRate:ce.screenshareFrameRate,chromeMediaSource:"screen"}},audio:I(ce)&&!ce.keepAudio},ot(wt,Xt)):qe.extension.getScreen(function(ti,Vi){if(ti)return X.consentDialog(!1),xe.error(ti);wt={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,minFrameRate:ce.screenshareFrameRate,maxFrameRate:ce.screenshareFrameRate},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}},wt.video.mandatory.chromeMediaSourceId=Vi,ot(wt,Xt,I(ce)&&!ce.keepAudio)})}else if(qe.webRTCAdapter.browserDetails.browser==="firefox")if(qe.webRTCAdapter.browserDetails.version>=33)wt={video:{mozMediaSource:ce.video,mediaSource:ce.video},audio:I(ce)&&!ce.keepAudio},ot(wt,function(ti,Vi){if(Xt(ti,Vi),!ti)var Jt=Vi.currentTime,At=window.setInterval(function(){Vi||window.clearInterval(At),Vi.currentTime==Jt&&(window.clearInterval(At),Vi.onended&&Vi.onended()),Jt=Vi.currentTime},500)});else{var Ii=new Error("NavigatorUserMediaError");Ii.name="Your version of Firefox does not support screen sharing, please install Firefox 33 (or more recent versions)",X.consentDialog(!1),xe.error(Ii);return}return}}(ce==null||ce.video!=="screen")&&navigator.mediaDevices.enumerateDevices().then(function(ti){var Vi=ti.some(function(Me){return Me.kind==="audioinput"}),Jt=et(ce)||ti.some(function(Me){return Me.kind==="videoinput"}),At=I(ce),j=J(ce),T=L(ce),F=De(ce);if(At||j||T||F){var S=At?Vi:!1,be=j?Jt:!1;if(!S&&!be)return X.consentDialog(!1),xe.error("No capture device found"),!1;if(!S&&T)return X.consentDialog(!1),xe.error("Audio capture is required, but no capture device found"),!1;if(!be&&F)return X.consentDialog(!1),xe.error("Video capture is required, but no capture device found"),!1}var _e={audio:Vi&&!ce.keepAudio?pt:!1,video:Jt&&!ce.keepVideo?Dt:!1};ce.encodings&&(_e=ce.encodings),qe.debug("getUserMedia constraints",_e),!_e.audio&&!_e.video?(X.consentDialog(!1),st(G,ke,ce,xe,Si)):(console.log("gumConstraints_________",_e,ce.encodings),navigator.mediaDevices.getUserMedia(ce.encodings?ce.encodings:_e).then(function(Me){X.consentDialog(!1),st(G,ke,ce,xe,Me)}).catch(function(Me){X.consentDialog(!1),xe.error({code:Me.code,name:Me.name,message:Me.message})}))}).catch(function(ti){X.consentDialog(!1),xe.error("enumerateDevices error",ti)})}else st(G,ke,ce,xe)}function Ne(G,ge){ge=ge||{},ge.success=typeof ge.success=="function"?ge.success:qe.noop,ge.error=typeof ge.error=="function"?ge.error:Oe;var xe=ge.jsep,ke=O[G];if(ke==null||ke.webrtcStuff===null||ke.webrtcStuff===void 0){qe.warn("Invalid handle"),ge.error("Invalid handle");return}var ce=ke.webrtcStuff;if(xe!=null){if(ce.pc===null){qe.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),ge.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");return}ce.pc.setRemoteDescription(xe).then(function(){if(qe.log("Remote description accepted!"),ce.remoteSdp=xe.sdp,ce.candidates&&ce.candidates.length>0){for(var X=0;X<ce.candidates.length;X++){var Be=ce.candidates[X];qe.debug("Adding remote candidate:",Be),!Be||Be.completed===!0?ce.pc.addIceCandidate(qe.endOfCandidates):ce.pc.addIceCandidate(Be)}ce.candidates=[]}ge.success()},ge.error)}else ge.error("Invalid JSEP")}function at(G,ge,xe){xe=xe||{},xe.success=typeof xe.success=="function"?xe.success:qe.noop,xe.error=typeof xe.error=="function"?xe.error:qe.noop,xe.customizeSdp=typeof xe.customizeSdp=="function"?xe.customizeSdp:qe.noop;var ke=O[G];if(ke==null||ke.webrtcStuff===null||ke.webrtcStuff===void 0){qe.warn("Invalid handle"),xe.error("Invalid handle");return}var ce=ke.webrtcStuff,X=xe.simulcast===!0;X?qe.log("Creating offer (iceDone="+ce.iceDone+", simulcast="+X+")"):qe.log("Creating offer (iceDone="+ce.iceDone+")");var Be={};if(qe.unifiedPlan){var lt=null,dt=null,Lt=ce.pc.getTransceivers();if(Lt&&Lt.length>0)for(var qt in Lt){var Si=Lt[qt];if(Si.sender&&Si.sender.track&&Si.sender.track.kind==="audio"||Si.receiver&&Si.receiver.track&&Si.receiver.track.kind==="audio"){lt||(lt=Si);continue}if(Si.sender&&Si.sender.track&&Si.sender.track.kind==="video"||Si.receiver&&Si.receiver.track&&Si.receiver.track.kind==="video"){dt||(dt=Si);continue}}var he=I(ge),Bi=re(ge);!he&&!Bi?ge.removeAudio&&lt&&(lt.setDirection?lt.setDirection("inactive"):lt.direction="inactive",qe.log("Setting audio transceiver to inactive:",lt)):he&&Bi?lt&&(lt.setDirection?lt.setDirection("sendrecv"):lt.direction="sendrecv",qe.log("Setting audio transceiver to sendrecv:",lt)):he&&!Bi?lt&&(lt.setDirection?lt.setDirection("sendonly"):lt.direction="sendonly",qe.log("Setting audio transceiver to sendonly:",lt)):!he&&Bi&&(lt?(lt.setDirection?lt.setDirection("recvonly"):lt.direction="recvonly",qe.log("Setting audio transceiver to recvonly:",lt)):(lt=ce.pc.addTransceiver("audio",{direction:"recvonly"}),qe.log("Adding recvonly audio transceiver:",lt)));var yt=J(ge),wt=Ye(ge);!yt&&!wt?ge.removeVideo&&dt&&(dt.setDirection?dt.setDirection("inactive"):dt.direction="inactive",qe.log("Setting video transceiver to inactive:",dt)):yt&&wt?dt&&(dt.setDirection?dt.setDirection("sendrecv"):dt.direction="sendrecv",qe.log("Setting video transceiver to sendrecv:",dt)):yt&&!wt?dt&&(dt.setDirection?dt.setDirection("sendonly"):dt.direction="sendonly",qe.log("Setting video transceiver to sendonly:",dt)):!yt&&wt&&(dt?(dt.setDirection?dt.setDirection("recvonly"):dt.direction="recvonly",qe.log("Setting video transceiver to recvonly:",dt)):(dt=ce.pc.addTransceiver("video",{direction:"recvonly"}),qe.log("Adding recvonly video transceiver:",dt)))}else Be.offerToReceiveAudio=re(ge),Be.offerToReceiveVideo=Ye(ge);var pt=xe.iceRestart===!0;pt&&(Be.iceRestart=!0),qe.debug(Be);var Dt=J(ge);if(Dt&&X&&qe.webRTCAdapter.browserDetails.browser==="firefox"){qe.log("Enabling Simulcasting for Firefox (RID)");var St=ce.pc.getSenders().find(function(_t){return _t.track.kind=="video"});if(St){var Et=St.getParameters();Et||(Et={});var jt=Ve(xe.simulcastMaxBitrates);Et.encodings=[{rid:"h",active:!0,maxBitrate:jt.high},{rid:"m",active:!0,maxBitrate:jt.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,maxBitrate:jt.low,scaleResolutionDownBy:4}],St.setParameters(Et)}}ce.pc.createOffer(Be).then(function(_t){qe.debug(_t);var Xt={type:_t.type,sdp:_t.sdp};if(xe.customizeSdp(Xt),_t.sdp=Xt.sdp,qe.log("Setting local description"),Dt&&X&&(qe.webRTCAdapter.browserDetails.browser==="chrome"||qe.webRTCAdapter.browserDetails.browser==="safari"?(qe.log("Enabling Simulcasting for Chrome (SDP munging)"),_t.sdp=fe(_t.sdp)):qe.webRTCAdapter.browserDetails.browser!=="firefox"&&qe.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),ce.mySdp=_t.sdp,ce.pc.setLocalDescription(_t).catch(xe.error),ce.mediaConstraints=Be,!ce.iceDone&&!ce.trickle){qe.log("Waiting for all candidates...");return}qe.log("Offer ready"),qe.debug(xe),xe.success(_t)},xe.error)}function Ut(G,ge,xe){xe=xe||{},xe.success=typeof xe.success=="function"?xe.success:qe.noop,xe.error=typeof xe.error=="function"?xe.error:qe.noop,xe.customizeSdp=typeof xe.customizeSdp=="function"?xe.customizeSdp:qe.noop;var ke=O[G];if(ke==null||ke.webrtcStuff===null||ke.webrtcStuff===void 0){qe.warn("Invalid handle"),xe.error("Invalid handle");return}var ce=ke.webrtcStuff,X=xe.simulcast===!0;X?qe.log("Creating answer (iceDone="+ce.iceDone+", simulcast="+X+")"):qe.log("Creating answer (iceDone="+ce.iceDone+")");var Be=null;if(qe.unifiedPlan){Be={};var lt=null,dt=null,Lt=ce.pc.getTransceivers();if(Lt&&Lt.length>0)for(var qt in Lt){var Si=Lt[qt];if(Si.sender&&Si.sender.track&&Si.sender.track.kind==="audio"||Si.receiver&&Si.receiver.track&&Si.receiver.track.kind==="audio"){lt||(lt=Si);continue}if(Si.sender&&Si.sender.track&&Si.sender.track.kind==="video"||Si.receiver&&Si.receiver.track&&Si.receiver.track.kind==="video"){dt||(dt=Si);continue}}var he=I(ge),Bi=re(ge);if(!he&&!Bi){if(ge.removeAudio&&lt)try{lt.setDirection?lt.setDirection("inactive"):lt.direction="inactive",qe.log("Setting audio transceiver to inactive:",lt)}catch(jt){qe.error(jt)}}else if(he&&Bi){if(lt)try{lt.setDirection?lt.setDirection("sendrecv"):lt.direction="sendrecv",qe.log("Setting audio transceiver to sendrecv:",lt)}catch(jt){qe.error(jt)}}else if(he&&!Bi)try{lt&&(lt.setDirection?lt.setDirection("sendonly"):lt.direction="sendonly",qe.log("Setting audio transceiver to sendonly:",lt))}catch(jt){qe.error(jt)}else if(!he&&Bi)if(lt)try{lt.setDirection?lt.setDirection("recvonly"):lt.direction="recvonly",qe.log("Setting audio transceiver to recvonly:",lt)}catch(jt){qe.error(jt)}else lt=ce.pc.addTransceiver("audio",{direction:"recvonly"}),qe.log("Adding recvonly audio transceiver:",lt);var yt=J(ge),wt=Ye(ge);if(!yt&&!wt){if(ge.removeVideo&&dt)try{dt.setDirection?dt.setDirection("inactive"):dt.direction="inactive",qe.log("Setting video transceiver to inactive:",dt)}catch(jt){qe.error(jt)}}else if(yt&&wt){if(dt)try{dt.setDirection?dt.setDirection("sendrecv"):dt.direction="sendrecv",qe.log("Setting video transceiver to sendrecv:",dt)}catch(jt){qe.error(jt)}}else if(yt&&!wt){if(dt)try{dt.setDirection?dt.setDirection("sendonly"):dt.direction="sendonly",qe.log("Setting video transceiver to sendonly:",dt)}catch(jt){qe.error(jt)}}else if(!yt&&wt)if(dt)try{dt.setDirection?dt.setDirection("recvonly"):dt.direction="recvonly",qe.log("Setting video transceiver to recvonly:",dt)}catch(jt){qe.error(jt)}else dt=ce.pc.addTransceiver("video",{direction:"recvonly"}),qe.log("Adding recvonly video transceiver:",dt)}else qe.webRTCAdapter.browserDetails.browser=="firefox"||qe.webRTCAdapter.browserDetails.browser=="edge"?Be={offerToReceiveAudio:re(ge),offerToReceiveVideo:Ye(ge)}:Be={mandatory:{OfferToReceiveAudio:re(ge),OfferToReceiveVideo:Ye(ge)}};qe.debug(Be);var pt=J(ge);if(pt&&X&&qe.webRTCAdapter.browserDetails.browser==="firefox"){qe.log("Enabling Simulcasting for Firefox (RID)");var Dt=ce.pc.getSenders()[1];qe.log(Dt);var St=Dt.getParameters();qe.log(St);var Et=Ve(xe.simulcastMaxBitrates);Dt.setParameters({encodings:[{rid:"high",active:!0,priority:"high",maxBitrate:Et.high},{rid:"medium",active:!0,priority:"medium",maxBitrate:Et.medium},{rid:"low",active:!0,priority:"low",maxBitrate:Et.low}]})}ce.pc.createAnswer(Be).then(function(jt){qe.debug(jt);var _t={type:jt.type,sdp:jt.sdp};if(xe.customizeSdp(_t),jt.sdp=_t.sdp,qe.log("Setting local description"),pt&&X&&(qe.webRTCAdapter.browserDetails.browser==="chrome"?qe.warn("simulcast=true, but this is an answer, and video breaks in Chrome if we enable it"):qe.webRTCAdapter.browserDetails.browser!=="firefox"&&qe.warn("simulcast=true, but this is not Chrome nor Firefox, ignoring")),ce.mySdp=jt.sdp,ce.pc.setLocalDescription(jt).catch(xe.error),ce.mediaConstraints=Be,!ce.iceDone&&!ce.trickle){qe.log("Waiting for all candidates...");return}xe.success(jt)},xe.error)}function Wt(G,ge){ge=ge||{},ge.success=typeof ge.success=="function"?ge.success:qe.noop,ge.error=typeof ge.error=="function"?ge.error:qe.noop;var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0){qe.warn("Invalid handle, not sending anything");return}var ke=xe.webrtcStuff;if(qe.log("Sending offer/answer SDP..."),ke.mySdp===null||ke.mySdp===void 0){qe.warn("Local SDP instance is invalid, not sending anything...");return}ke.mySdp={type:ke.pc.localDescription.type,sdp:ke.pc.localDescription.sdp},ke.trickle===!1&&(ke.mySdp.trickle=!1),qe.debug(ge),ke.sdpSent=!0,ge.success(ke.mySdp)}function kt(G,ge){var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0)return qe.warn("Invalid handle"),0;var ke=ge?"remote":"local",ce=xe.webrtcStuff;return ce.volume[ke]||(ce.volume[ke]={value:0}),ce.pc.getStats&&qe.webRTCAdapter.browserDetails.browser==="chrome"?ge&&(ce.remoteStream===null||ce.remoteStream===void 0)?(qe.warn("Remote stream unavailable"),0):!ge&&(ce.myStream===null||ce.myStream===void 0)?(qe.warn("Local stream unavailable"),0):ce.volume[ke].timer===null||ce.volume[ke].timer===void 0?(qe.log("Starting "+ke+" volume monitor"),ce.volume[ke].timer=setInterval(function(){ce.pc.getStats(function(X){for(var Be=X.result(),lt=0;lt<Be.length;lt++){var dt=Be[lt];dt.type=="ssrc"&&(ge&&dt.stat("audioOutputLevel")?ce.volume[ke].value=parseInt(dt.stat("audioOutputLevel")):!ge&&dt.stat("audioInputLevel")&&(ce.volume[ke].value=parseInt(dt.stat("audioInputLevel"))))}})},200),0):ce.volume[ke].value:(qe.warn("Getting the "+ke+" volume unsupported by browser"),0)}function ee(G,ge){var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0)return qe.warn("Invalid handle"),!0;var ke=xe.webrtcStuff;return ke.pc===null||ke.pc===void 0?(qe.warn("Invalid PeerConnection"),!0):ke.myStream===void 0||ke.myStream===null?(qe.warn("Invalid local MediaStream"),!0):ge?ke.myStream.getVideoTracks()===null||ke.myStream.getVideoTracks()===void 0||ke.myStream.getVideoTracks().length===0?(qe.warn("No video track"),!0):!ke.myStream.getVideoTracks()[0].enabled:ke.myStream.getAudioTracks()===null||ke.myStream.getAudioTracks()===void 0||ke.myStream.getAudioTracks().length===0?(qe.warn("No audio track"),!0):!ke.myStream.getAudioTracks()[0].enabled}function me(G,ge,xe){var ke=O[G];if(ke==null||ke.webrtcStuff===null||ke.webrtcStuff===void 0)return qe.warn("Invalid handle"),!1;var ce=ke.webrtcStuff;return ce.pc===null||ce.pc===void 0?(qe.warn("Invalid PeerConnection"),!1):ce.myStream===void 0||ce.myStream===null?(qe.warn("Invalid local MediaStream"),!1):ge?ce.myStream.getVideoTracks()===null||ce.myStream.getVideoTracks()===void 0||ce.myStream.getVideoTracks().length===0?(qe.warn("No video track"),!1):(ce.myStream.getVideoTracks()[0].enabled=!xe,!0):ce.myStream.getAudioTracks()===null||ce.myStream.getAudioTracks()===void 0||ce.myStream.getAudioTracks().length===0?(qe.warn("No audio track"),!1):(ce.myStream.getAudioTracks()[0].enabled=!xe,!0)}function P(G,ge){var xe=O[G];if(xe==null||xe.webrtcStuff===null||xe.webrtcStuff===void 0)return qe.warn("Invalid handle"),"Invalid handle";var ke=xe.webrtcStuff;if(ke.pc===null||ke.pc===void 0)return"Invalid PeerConnection";if(ke.pc.getStats)ke.pc.getStats().then(function(ce){ce.forEach(function(X){if(X){var Be=!1;if(((X.mediaType==="video"||X.id.toLowerCase().indexOf("video")>-1)&&X.type==="inbound-rtp"&&X.id.indexOf("rtcp")<0||X.type=="ssrc"&&X.bytesReceived&&(X.googCodecName==="VP8"||X.googCodecName===""))&&(Be=!0),Be)if(ge&&ge(X),ke.bitrate.bsnow=X.bytesReceived,ke.bitrate.tsnow=X.timestamp,ke.bitrate.bsbefore===null||ke.bitrate.tsbefore===null)ke.bitrate.bsbefore=ke.bitrate.bsnow,ke.bitrate.tsbefore=ke.bitrate.tsnow;else{var lt=ke.bitrate.tsnow-ke.bitrate.tsbefore;qe.webRTCAdapter.browserDetails.browser=="safari"&&(lt=lt/1e3);var dt=Math.round((ke.bitrate.bsnow-ke.bitrate.bsbefore)*8/lt);qe.webRTCAdapter.browserDetails.browser==="safari"&&(dt=parseInt(dt/1e3)),ke.bitrate.value=dt+" kbits/sec",ke.bitrate.bsbefore=ke.bitrate.bsnow,ke.bitrate.tsbefore=ke.bitrate.tsnow}}})});else return qe.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function Y(G){var ge=O[G];if(ge==null||ge.webrtcStuff===null||ge.webrtcStuff===void 0)return qe.warn("Invalid handle"),"Invalid handle";var xe=ge.webrtcStuff;return xe.pc===null||xe.pc===void 0?"Invalid PeerConnection":xe.pc.getStats?xe.bitrate.timer===null||xe.bitrate.timer===void 0?(qe.log("Starting bitrate timer (via getStats)"),xe.bitrate.timer=setInterval(function(){xe.pc.getStats().then(function(ke){ke.forEach(function(ce){if(ce){var X=!1;if(((ce.mediaType==="video"||ce.id.toLowerCase().indexOf("video")>-1)&&ce.type==="inbound-rtp"&&ce.id.indexOf("rtcp")<0||ce.type=="ssrc"&&ce.bytesReceived&&(ce.googCodecName==="VP8"||ce.googCodecName===""))&&(X=!0),X)if(xe.bitrate.bsnow=ce.bytesReceived,xe.bitrate.tsnow=ce.timestamp,xe.bitrate.bsbefore===null||xe.bitrate.tsbefore===null)xe.bitrate.bsbefore=xe.bitrate.bsnow,xe.bitrate.tsbefore=xe.bitrate.tsnow;else{var Be=xe.bitrate.tsnow-xe.bitrate.tsbefore;qe.webRTCAdapter.browserDetails.browser=="safari"&&(Be=Be/1e3);var lt=Math.round((xe.bitrate.bsnow-xe.bitrate.bsbefore)*8/Be);qe.webRTCAdapter.browserDetails.browser==="safari"&&(lt=parseInt(lt/1e3)),xe.bitrate.value=lt+" kbits/sec",xe.bitrate.bsbefore=xe.bitrate.bsnow,xe.bitrate.tsbefore=xe.bitrate.tsnow}}})})},1e3),"0 kbits/sec"):xe.bitrate.value:(qe.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser")}function Oe(G){qe.error("WebRTC error:",G)}function N(G,ge){qe.log("Cleaning WebRTC stuff");var xe=O[G];if(xe!=null){var ke=xe.webrtcStuff;if(ke!=null){if(ge===!0){var ce={rtcgw:"hangup",transaction:qe.randomString(12)};xe.token!==null&&xe.token!==void 0&&(ce.token=xe.token),de!=null&&(ce.apisecret=de),qe.debug("Sending hangup request (handle="+G+"):"),qe.debug(ce),t?(ce.session_id=x,ce.handle_id=G,n.send(JSON.stringify(ce))):qe.httpAPICall(E+"/"+x+"/"+G,{verb:"POST",withCredentials:p,body:ce})}ke.remoteStream=null,ke.volume&&(ke.volume.local&&ke.volume.local.timer&&clearInterval(ke.volume.local.timer),ke.volume.remote&&ke.volume.remote.timer&&clearInterval(ke.volume.remote.timer)),ke.volume={},ke.bitrate.timer&&clearInterval(ke.bitrate.timer),ke.bitrate.timer=null,ke.bitrate.bsnow=null,ke.bitrate.bsbefore=null,ke.bitrate.tsnow=null,ke.bitrate.tsbefore=null,ke.bitrate.value=null;try{if(!ke.streamExternal&&ke.myStream!==null&&ke.myStream!==void 0){qe.log("Stopping local stream tracks");var X=ke.myStream.getTracks();for(var Be in X){var lt=X[Be];qe.log(lt),lt!=null&&lt.stop()}}}catch{}ke.streamExternal=!1,ke.myStream=null;try{ke.pc.close()}catch{}ke.pc=null,ke.candidates=null,ke.mySdp=null,ke.remoteSdp=null,ke.iceDone=!1,ke.dataChannel={},ke.dtmfSender=null}xe.oncleanup()}}function fe(G){for(var ge=G.split(`\r
`),xe=!1,ke=[-1],ce=[-1],X=null,Be=null,lt=null,dt=null,Lt=-1,qt=0;qt<ge.length;qt++){var Si=ge[qt].match(/m=(\w+) */);if(Si){var he=Si[1];if(he==="video")if(ke[0]<0)xe=!0;else{Lt=qt;break}else if(ke[0]>-1){Lt=qt;break}continue}if(xe){var Bi=ge[qt].match(/a=ssrc-group:FID (\d+) (\d+)/);if(Bi){ke[0]=Bi[1],ce[0]=Bi[2],ge.splice(qt,1),qt--;continue}if(ke[0]){var yt=ge[qt].match("a=ssrc:"+ke[0]+" cname:(.+)");if(yt&&(X=yt[1]),yt=ge[qt].match("a=ssrc:"+ke[0]+" msid:(.+)"),yt&&(Be=yt[1]),yt=ge[qt].match("a=ssrc:"+ke[0]+" mslabel:(.+)"),yt&&(lt=yt[1]),yt=ge[qt].match("a=ssrc:"+ke[0]+" label:(.+)"),yt&&(dt=yt[1]),ge[qt].indexOf("a=ssrc:"+ce[0])===0){ge.splice(qt,1),qt--;continue}if(ge[qt].indexOf("a=ssrc:"+ke[0])===0){ge.splice(qt,1),qt--;continue}}if(ge[qt].length==0){ge.splice(qt,1),qt--;continue}}}if(ke[0]<0){Lt=-1,xe=!1;for(var qt=0;qt<ge.length;qt++){var Si=ge[qt].match(/m=(\w+) */);if(Si){var he=Si[1];if(he==="video")if(ke[0]<0)xe=!0;else{Lt=qt;break}else if(ke[0]>-1){Lt=qt;break}continue}if(xe){if(ke[0]<0){var wt=ge[qt].match(/a=ssrc:(\d+)/);if(wt){ke[0]=wt[1],ge.splice(qt,1),qt--;continue}}else{var yt=ge[qt].match("a=ssrc:"+ke[0]+" cname:(.+)");if(yt&&(X=yt[1]),yt=ge[qt].match("a=ssrc:"+ke[0]+" msid:(.+)"),yt&&(Be=yt[1]),yt=ge[qt].match("a=ssrc:"+ke[0]+" mslabel:(.+)"),yt&&(lt=yt[1]),yt=ge[qt].match("a=ssrc:"+ke[0]+" label:(.+)"),yt&&(dt=yt[1]),ge[qt].indexOf("a=ssrc:"+ce[0])===0){ge.splice(qt,1),qt--;continue}if(ge[qt].indexOf("a=ssrc:"+ke[0])===0){ge.splice(qt,1),qt--;continue}}if(ge[qt].length==0){ge.splice(qt,1),qt--;continue}}}}if(ke[0]<0)return qe.warn("Couldn't find the video SSRC, simulcasting NOT enabled"),G;Lt<0&&(Lt=ge.length),ke[1]=Math.floor(Math.random()*4294967295),ke[2]=Math.floor(Math.random()*4294967295),ce[1]=Math.floor(Math.random()*4294967295),ce[2]=Math.floor(Math.random()*4294967295);for(var qt=0;qt<ke.length;qt++)X&&(ge.splice(Lt,0,"a=ssrc:"+ke[qt]+" cname:"+X),Lt++),Be&&(ge.splice(Lt,0,"a=ssrc:"+ke[qt]+" msid:"+Be),Lt++),lt&&(ge.splice(Lt,0,"a=ssrc:"+ke[qt]+" mslabel:"+lt),Lt++),dt&&(ge.splice(Lt,0,"a=ssrc:"+ke[qt]+" label:"+dt),Lt++),X&&(ge.splice(Lt,0,"a=ssrc:"+ce[qt]+" cname:"+X),Lt++),Be&&(ge.splice(Lt,0,"a=ssrc:"+ce[qt]+" msid:"+Be),Lt++),lt&&(ge.splice(Lt,0,"a=ssrc:"+ce[qt]+" mslabel:"+lt),Lt++),dt&&(ge.splice(Lt,0,"a=ssrc:"+ce[qt]+" label:"+dt),Lt++);return ge.splice(Lt,0,"a=ssrc-group:FID "+ke[2]+" "+ce[2]),ge.splice(Lt,0,"a=ssrc-group:FID "+ke[1]+" "+ce[1]),ge.splice(Lt,0,"a=ssrc-group:FID "+ke[0]+" "+ce[0]),ge.splice(Lt,0,"a=ssrc-group:SIM "+ke[0]+" "+ke[1]+" "+ke[2]),G=ge.join(`\r
`),G.endsWith(`\r
`)||(G+=`\r
`),G}function I(G){return qe.debug("isAudioSendEnabled:",G),G==null?!0:G.audio===!1?!1:G.audioSend===void 0||G.audioSend===null?!0:G.audioSend===!0}function L(G){return qe.debug("isAudioSendRequired:",G),G==null||G.audio===!1||G.audioSend===!1||G.failIfNoAudio===void 0||G.failIfNoAudio===null?!1:G.failIfNoAudio===!0}function re(G){return qe.debug("isAudioRecvEnabled:",G),G==null?!0:G.audio===!1?!1:G.audioRecv===void 0||G.audioRecv===null?!0:G.audioRecv===!0}function J(G){return qe.debug("isVideoSendEnabled:",G),G==null?!0:G.video===!1?!1:G.videoSend===void 0||G.videoSend===null?!0:G.videoSend===!0}function De(G){return qe.debug("isVideoSendRequired:",G),G==null||G.video===!1||G.videoSend===!1||G.failIfNoVideo===void 0||G.failIfNoVideo===null?!1:G.failIfNoVideo===!0}function Ye(G){return qe.debug("isVideoRecvEnabled:",G),G==null?!0:G.video===!1?!1:G.videoRecv===void 0||G.videoRecv===null?!0:G.videoRecv===!0}function et(G){if(qe.debug("isScreenSendEnabled:",G),G==null||Ni(G.video)!=="object"||Ni(G.video.mandatory)!=="object")return!1;var ge=G.video.mandatory;return ge.chromeMediaSource?ge.chromeMediaSource==="desktop"||ge.chromeMediaSource==="screen":ge.mozMediaSource?ge.mozMediaSource==="window"||ge.mozMediaSource==="screen":ge.mediaSource?ge.mediaSource==="window"||ge.mediaSource==="screen":!1}function R(G){return qe.debug("isDataEnabled:",G),qe.webRTCAdapter.browserDetails.browser=="edge"?(qe.warn("Edge doesn't support data channels yet"),!1):G==null?!1:G.data===!0}function He(G){return qe.debug("isTrickleEnabled:",G),G==null?!0:G===!0}}window.Janus=qe;var m0={version:"V1.0",apiDomain:"https://open.ys7.com"},Es={},$f=function(m,t){Es[m]||(Es[m]=[]),Es[m].push(t)},da=function(){var m=Array.prototype.shift.call(arguments),t=Es[m];if(!t||t.length===0)return!1;for(var n=0,o;o=t[n];n++)o.apply(this,arguments)};function Fr(){var Z={};return Z.promise=new Promise(function(m,t){Z.resolve=m,Z.reject=t}),Z}var Qf=function(){function Z(m){En(this,Z),ln(this,"subscribe",function(t){var n=Fr(),o={cmdType:"subremote",streamtype:t.type,customId:t.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},l=null;return window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(c){console.log("pluginHandle",c),t.type==8?window["ezuikit-webrtc"].opt.subscribeScreenHandle=c:(window["ezuikit-webrtc"].opt["".concat(t.clientId)]=c,t.type==1&&window["ezuikit-webrtc"].opt["".concat(t.clientId)].send({message:{cmdType:"unsubremote",streamtype:2,customId:t.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId},success:function(){},error:function(C){}})),l=c,l.createOffer({media:{videoSend:!1,audioSend:!1,audioRecv:!0,videoRecv:!0,audio:!0,video:!0,data:!1},simulcast:!1,simulcast2:!1,success:function(C){Janus.debug("remoteFeed createOffer Got SDP!"),Janus.debug(C),l.send({message:o,jsep:C})},error:function(C){Janus.error("remoteFeed WebRTC error:",C),n.reject(C)}})},error:function(c){console.error("  -- Error attaching plugin...",c),n.reject(c)},consentDialog:function(c){Janus.debug("Consent dialog should be "+(c?"on":"off")+" now")},iceState:function(c){switch(Janus.log("ICE state changed to "+c),c){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(c,E){Janus.log("Janus "+(E?"started":"stopped")+" receiving our "+c)},webrtcState:function(c){Janus.log("Janus says our WebRTC PeerConnection is "+(c?"up":"down")+" now")},slowLink:function(c,E){Janus.warn("Janus reports problems "+(c?"sending":"receiving")+" packets on this PeerConnection ("+E+" lost packets)")},onmessage:function(c,E){Janus.debug(" ::: Got a message :::"),Janus.debug(c),E!=null&&(Janus.debug("Handling SDP as well..."),Janus.debug(E),l.handleRemoteJsep({jsep:E})),c.rtcgw==="subremoteack"&&da("subremoteack",c)},onlocalstream:function(c){},onremotestream:function(c){console.log("remoteStream==================================",c);var E={clientId:t.clientId,stream:c,streamType:t.type};n.resolve(E),da("remoteStream",E)},ondataopen:function(c){Janus.log("The DataChannel is available!")},ondata:function(c){Janus.debug("We got data from the DataChannel! "+c)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),n.promise}),ln(this,"subscribeStream",function(t){var n=Fr(),o={cmdType:"resumesubremote",streamtype:t.type,customId:t.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt["".concat(t.clientId)]&&window["ezuikit-webrtc"].opt["".concat(t.clientId)].send({message:o,success:function(){n.resolve("success")},error:function(d){n.reject(d)}}),n.promise}),ln(this,"unsubscribe",function(t){var n=Fr(),o={cmdType:"unsubremote",streamtype:t.type,customId:t.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return t.type==8?window["ezuikit-webrtc"].opt.subscribeScreenHandle.send({message:o,success:function(){window["ezuikit-webrtc"].opt.subscribeScreenHandle.detach({noRequest:!1,success:function(){n.resolve("success")}})},error:function(d){n.reject(d)}}):window["ezuikit-webrtc"].opt["".concat(t.clientId)].send({message:o,success:function(){t.type==3?window["ezuikit-webrtc"].opt["".concat(t.clientId)].detach({noRequest:!1,success:function(){n.resolve("success")}}):n.resolve("success")},error:function(d){n.reject(d)}}),n.promise}),ln(this,"unsubscribeStream",function(t){var n=Fr(),o={cmdType:"pausesubremote",streamtype:t.type,customId:t.clientId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt["".concat(t.clientId)].send({message:o,success:function(){n.resolve("success")},error:function(d){n.reject(d)}}),n.promise}),ln(this,"listen",function(){return $f.apply(void 0,arguments)}),this.initEZWEBPlayer(m)}return Rn(Z,[{key:"initEZWEBPlayer",value:function(t){console.log("params",t),window["ezuikit-webrtc"]={opt:{roomParams:{room:0,userId:t.userId,video:1,internalRoomId:null,roomId:t.roomId,clientId:null,rtctoken:t.rtctoken},janus:null,mainHandle:null,sts:null,screenHandle:null,subscribeScreenHandle:null,opaqueId:"sts-"+Janus.randomString(12),localStreamType:null,server:null,accessToken:t.accessToken,stream:"",screenStream:null,apiDomain:m0.apiDomain,cln:{local:{username:"",client_id:""}}},videoParams:{},audioParams:{},cameraId:null,microphoneId:null,bitrate:1e5,frameRate:15,width:320,height:240},Ca("".concat(m0.apiDomain,"/api/v3/rtc/wss"),"POST",{appId:t.appId,roomId:t.roomId,customId:t.userId,accessToken:t.accessToken},{"Content-Type":"application/x-www-form-urlencoded",accessToken:t.accessToken},n);function n(o){if(console.log("data",o),o.meta.code!=200){t.handleError(o.meta);return}var l=o.data;l.clientId;var d=l.domain;l.internalRoomId;var c=l.wssPath;window["ezuikit-webrtc"].opt.server="wss://".concat(d,"/").concat(c),window["ezuikit-webrtc"].opt.roomParams.internalRoomId=o.data.internalRoomId,window["ezuikit-webrtc"].opt.roomParams.clientId=o.data.clientId;var E={token:"token=".concat(t.rtctoken,"&userId=").concat(t.userId,"&roomId=").concat(t.roomId,"&appId=").concat(t.appId),authtype:23};Janus.init({debug:"all",callback:function(){window["ezuikit-webrtc"].opt.janus=new Janus({server:window["ezuikit-webrtc"].opt.server,success:function(w){w&&t.onMessage(w)},error:function(w){t.handleError(w)},destroyed:function(){}},E)}})}}},{key:"getVersion",value:function(){var t=Fr();return t.resolve(m0.version),t.promise}},{key:"getSupport",value:function(){var t=Fr(),n={isWebrtcSupport:!0,isH264Support:!0},o=document.createElement("video");return o.canPlayType&&(o.canPlayType("video/mp4;codecs=“avc1.64001E”")?n.isH264Support=!0:n.isH264Support=!1),navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia?(n.isWebrtcSupport=!0,t.resolve(n)):(n.isWebrtcSupport=!1,t.reject(n)),t.promise}},{key:"getMediaList",value:function(){var t=Fr();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(n){t.resolve(n)}):t.reject("no devices"),t.promise}},{key:"getCamerasList",value:function(){var t=Fr();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(n){var o=[];n.map(function(l){l.kind=="videoinput"&&o.push(l)}),t.resolve(o)}):t.reject("no devices"),t.promise}},{key:"getMicrophonesList",value:function(){var t=Fr();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(n){var o=[];n.map(function(l){l.kind=="audioinput"&&o.push(l)}),t.resolve(o)}):t.reject("no devices"),t.promise}},{key:"getSpeakersList",value:function(){var t=Fr();return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(n){var o=[];n.map(function(l){l.kind=="audiooutput"&&o.push(l)}),t.resolve(o)}):t.reject("no devices"),t.promise}},{key:"play",value:function(t){var n=Fr(),o=document.getElementById(t.domId),l=window["ezuikit-webrtc"].opt.cln.local.stream;return Janus.attachMediaStream(o,l),o.play(),document.getElementById(t.domId)?n.resolve("success"):n.reject("no video dom"),n.promise}},{key:"leaveRoom",value:function(t){var n=Fr(),o={cmdType:"exitRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return window["ezuikit-webrtc"].opt.mainHandle.send({message:o,success:function(){window["ezuikit-webrtc"].opt.janus.destroy({success:function(){}}),n.resolve("success")},error:function(d){console.error("  -- Error attaching plugin...",d),n.reject(d)}}),n.promise}},{key:"setCameraDevice",value:function(t){var n=Fr();return window["ezuikit-webrtc"].cameraId=t.deviceId,window["ezuikit-webrtc"].opt.sts&&window["ezuikit-webrtc"].opt.sts.createOffer({media:{video:{deviceId:t.deviceId},replaceVideo:!0,audio:window["ezuikit-webrtc"].opt.localStreamType!=1},simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(l){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(l),n.resolve("success")},error:function(l){console.log("createOffererror"),Janus.error("WebRTC error:",l),n.reject(l)}}),n.promise}},{key:"setMicrophoneDevice",value:function(t){var n=Fr();return window["ezuikit-webrtc"].microphoneId=t.deviceId,window["ezuikit-webrtc"].opt.sts&&window["ezuikit-webrtc"].opt.sts.createOffer({media:{audio:{deviceId:t.deviceId},replaceAudio:!0,video:window["ezuikit-webrtc"].opt.localStreamType!=2},simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(l){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(l),n.resolve("success")},error:function(l){console.log("createOffererror"),Janus.error("WebRTC error:",l),n.reject(l)}}),n.promise}},{key:"setVideoProfile",value:function(t){var n=Fr(),o={video:{width:t.video.width||360,height:t.video.height||640,frameRate:t.video.frameRate},bitrate:t.video.bitrate||5e5,id:t.id};return window["ezuikit-webrtc"].videoParams=o.video,window["ezuikit-webrtc"].bitrate=o.bitrate*1e3,window["ezuikit-webrtc"].frameRate=t.video.frameRate,window["ezuikit-webrtc"].width=t.video.width,window["ezuikit-webrtc"].height=t.video.height,n.resolve("success"),n.promise}},{key:"setAudioProfile",value:function(t){var n={audio:{deviceId:window["ezuikit-webrtc"].cameraId,sampleRate:t.audio.sampleRate||"32000HZ",sampleSize:t.audio.sampleSize||16,channelCount:t.audio.channelCount||1},id:t.id};window["ezuikit-webrtc"].audioParams=n.audio,console.log("window['ezuikit-webrtc'].videoParams",window["ezuikit-webrtc"])}},{key:"joinRoom",value:function(t){var n=Fr();return window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(l){console.log("pluginHandle",l),window["ezuikit-webrtc"].opt.mainHandle=l,Janus.debug("Trying a createOffer too (audio/video sendrecv)");var d={cmdType:"enterRoom",customId:window["ezuikit-webrtc"].opt.roomParams.userId,clientId:window["ezuikit-webrtc"].opt.roomParams.clientId,strroomId:window["ezuikit-webrtc"].opt.roomParams.roomId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId,authtype:23,authentication:window["ezuikit-webrtc"].opt.roomParams.rtctoken};l.send({message:d}),n.resolve(l.id)},error:function(l){console.error("  -- Error attaching plugin...",l),n.reject(l)},consentDialog:function(l){Janus.debug("Consent dialog should be "+(l?"on":"off")+" now")},iceState:function(l){switch(Janus.log("ICE state changed to "+l),l){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(l,d){Janus.log("Janus "+(d?"started":"stopped")+" receiving our "+l)},webrtcState:function(l){Janus.log("Janus says our WebRTC PeerConnection is "+(l?"up":"down")+" now")},slowLink:function(l,d){Janus.warn("Janus reports problems "+(l?"sending":"receiving")+" packets on this PeerConnection ("+d+" lost packets)")},onmessage:function(l,d){Janus.debug(" ::: Got a message :::"),Janus.debug(l),d!=null&&(Janus.debug("Handling SDP as well..."),Janus.debug(d),window["ezuikit-webrtc"].opt.mainHandle.handleRemoteJsep({jsep:d}));var c=l.result;if(c!=null){if(c==="done")return;c.status}l.rtcgw==="enterRoomack"&&da("enterRoomack",l),l.rtcgw==="clientJoin"&&da("clientJoin",l),l.rtcgw==="clientLeave"&&da("clientLeave",l),l.rtcgw==="stream-added"&&da("steam-added",l),l.rtcgw==="stream-removed"&&da("stream-removed",l),l.rtcgw==="audioleve"&&da("audioleve",l),l.rtcgw==="networkquality"&&da("networkquality",l),l.rtcgw==="error"&&da("error",l),l.rtcgw==="audioleve"&&da("audioleve",l),l.rtcgw==="publishlocalstreamack"&&da("publishlocalstreamack",l),l.rtcgw==="subremoteack"&&da("subremoteack",l)},onlocalstream:function(l){console.log("onlocalstream",l),Janus.debug(" ::: Got a local stream :::"),Janus.debug(l),window["ezuikit-webrtc"].opt.cln.local.stream=l},onremotestream:function(l){},ondataopen:function(l){Janus.log("The DataChannel is available!")},ondata:function(l){Janus.debug("We got data from the DataChannel! "+l)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),n.promise}},{key:"getLocalStream",value:function(t){var n=Fr();return window["ezuikit-webrtc"].opt.cln.local.stream?n.resolve(window["ezuikit-webrtc"].opt.cln.local.stream):n.reject("no stream"),n.promise}},{key:"getScreenStream",value:function(t){var n=Fr();return window["ezuikit-webrtc"].opt.screenStream?n.resolve(window["ezuikit-webrtc"].opt.screenStream):n.reject("no stream"),n.promise}},{key:"suspendStream",value:function(t){var n=this;n.controlStream(t,"suspend")}},{key:"controlStream",value:function(t,n){var o=Fr(),l={cmdType:n=="resume"?"resumelocalstream":"pauselocalstream",streamtype:t.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return t.type==2&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach(function(d){d.kind=="audio"&&(n=="resume"?d.enabled=!0:d.enabled=!1)}),t.type==1&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach(function(d){d.kind=="video"&&(n=="resume"?d.enabled=!0:d.enabled=!1)}),t.type==8&&(console.log(" window['ezuikit-webrtc'].opt.screenStream.getTracks()",window["ezuikit-webrtc"].opt.screenStream.getTracks()),window["ezuikit-webrtc"].opt.screenStream.getTracks().forEach(function(d){n=="resume"?d.enabled=!0:d.enabled=!1})),t.type==3&&window["ezuikit-webrtc"].opt.cln.local.stream.getTracks().forEach(function(d){n=="resume"?d.enabled=!0:d.enabled=!1}),t.type==8?window["ezuikit-webrtc"].opt.screenHandle.send({message:l,success:function(){o.resolve("success")},error:function(c){o.reject(c)}}):window["ezuikit-webrtc"].opt.sts.send({message:l,success:function(){o.resolve("success")},error:function(c){o.reject(c)}}),o.promise}},{key:"resumeStream",value:function(t){var n=this;n.controlStream(t,"resume")}},{key:"publishStream",value:function(t){var n=Fr(),o={cmdType:"publishlocalstream",streamtype:t.type,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};t.type!=8&&(window["ezuikit-webrtc"].opt.localStreamType=t.type),window["ezuikit-webrtc"].videoParams;var l={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:"stdres",audio:!0};switch(t.type){case 1:l={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:!1};break;case 2:l={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:!1,audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 3:l={videoSend:!0,audioSend:!0,audioRecv:!0,videoRecv:!0,data:!1,video:{deviceId:window["ezuikit-webrtc"].cameraId,width:window["ezuikit-webrtc"].width,height:window["ezuikit-webrtc"].height},audio:{deviceId:window["ezuikit-webrtc"].microphoneId}};break;case 8:l={audioRecv:!1,videoRecv:!0,data:!1,audioSend:!1,videoSend:!0,video:"screen",screenshareFrameRate:3};break}return console.log("media-----------",l),console.log("window['ezuikit-webrtc'].bitrate",window["ezuikit-webrtc"].bitrate),console.log("window['ezuikit-webrtc'].opt.sts",window["ezuikit-webrtc"].opt.sts),window["ezuikit-webrtc"].opt.sts&&t.type!=8?window["ezuikit-webrtc"].opt.sts.createOffer({media:l,simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(c){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(c),window["ezuikit-webrtc"].opt.sts.send({message:o,jsep:c}),n.resolve("success")},error:function(c){console.log("createOffererror"),Janus.error("WebRTC error:",c),n.reject(c)}}):window["ezuikit-webrtc"].opt.janus.attach({plugin:"rtcgw.plugin.sts",opaqueId:window["ezuikit-webrtc"].opt.opaqueId,success:function(c){console.log("pluginHandle",c),t.type==8?window["ezuikit-webrtc"].opt.screenHandle=c:window["ezuikit-webrtc"].opt.sts=c,Janus.debug("Trying a createOffer too (audio/video sendrecv)"),c.createOffer({media:l,simulcast:!1,simulcast2:!1,bitrate:window["ezuikit-webrtc"].bitrate,frameRate:window["ezuikit-webrtc"].frameRate,success:function(C){console.log("createOffersuccess"),Janus.debug("Got SDP!"),Janus.debug(C),c.send({message:o,jsep:C}),n.resolve("success")},error:function(C){console.log("createOffererror"),Janus.error("WebRTC error:",C),n.reject(C)}})},error:function(c){console.error("  -- Error attaching plugin...",c),n.reject(c)},consentDialog:function(c){Janus.debug("Consent dialog should be "+(c?"on":"off")+" now")},iceState:function(c){switch(Janus.log("ICE state changed to "+c),c){case"connected":console.log("ice connect success");break;case"disconnected":console.log("ice connect loss");break}},mediaState:function(c,E){Janus.log("Janus "+(E?"started":"stopped")+" receiving our "+c)},webrtcState:function(c){Janus.log("Janus says our WebRTC PeerConnection is "+(c?"up":"down")+" now")},slowLink:function(c,E){Janus.warn("Janus reports problems "+(c?"sending":"receiving")+" packets on this PeerConnection ("+E+" lost packets)")},onmessage:function(c,E){console.log("消息回调+++++++++++++++++++++++++++++++++++++++++",c,E),Janus.debug(" ::: Got a message :::"),Janus.debug(c),E!=null&&(Janus.debug("Handling SDP as well..."),Janus.debug(E),t.type==8?window["ezuikit-webrtc"].opt.screenHandle.handleRemoteJsep({jsep:E}):window["ezuikit-webrtc"].opt.sts.handleRemoteJsep({jsep:E}))},onlocalstream:function(c){console.log("onlocalstream",c),Janus.debug(" ::: Got a local stream :::"),Janus.debug(c),t.type==8?(window["ezuikit-webrtc"].opt.screenStream=c,c.getVideoTracks()[0].addEventListener("ended",function(){console.log("停止了屏幕共享-----------------------");var E={cmdType:"unpublishlocalstream",streamtype:8,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};window["ezuikit-webrtc"].opt.screenHandle&&window["ezuikit-webrtc"].opt.screenHandle.send({message:E,success:function(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.screenHandle=null},error:function(y){}})})):window["ezuikit-webrtc"].opt.cln.local.stream=c},onremotestream:function(c){},ondataopen:function(c){Janus.log("The DataChannel is available!")},ondata:function(c){Janus.debug("We got data from the DataChannel! "+c)},oncleanup:function(){Janus.log(" ::: Got a cleanup notification :::")}}),n.promise}},{key:"unpublishStream",value:function(t){var n=Fr(),o={cmdType:"unpublishlocalstream",streamtype:3,customId:window["ezuikit-webrtc"].opt.roomParams.userId,roomId:window["ezuikit-webrtc"].opt.roomParams.internalRoomId};return t.type==8?window["ezuikit-webrtc"].opt.screenHandle.send({message:gr(gr({},o),{},{streamtype:8}),success:function(){window["ezuikit-webrtc"].opt.screenHandle.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.screenHandle=null,n.resolve("success")},error:function(d){n.reject(d)}}):window["ezuikit-webrtc"].opt.sts.send({message:o,success:function(){window["ezuikit-webrtc"].opt.sts.detach({noRequest:!1}),window["ezuikit-webrtc"].opt.sts=null,n.resolve("success")},error:function(d){n.reject(d)}}),n.promise}},{key:"ezwebTrigger",value:function(t){var n=window["ezuikit-webrtc"].opt.cln.local.stream,o={stream:n,clientId:"cliendId-".concat(Math.random()*20)};da("steam-added",o)}},{key:"playRemoteSteam",value:function(t){var n=document.getElementById(t.domId);Janus.attachMediaStream(n,t.stream),n.load();var o=n.play();o!==void 0&&o.then(function(){n.play()}).catch(function(l){})}},{key:"getQuality",value:function(t){window["ezuikit-webrtc"].opt.z3.getNetworkQuality(t.handleId,function(n){console.log("NetworkQuality",n)})}}]),Z}(),e1="@ezviz/ezuikit-js",t1=["jzy"],i1="1.2.1",n1="ezuikit javascript for npm",r1="ezuikit.js",a1={test:'echo "Error: no test specified" && exit 1'},o1={type:"git",url:"git+https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm.git"},s1=["ezuikit_static/","ezuikit.js","README.md","CHANGELOG.md"],l1=["video","ezuikit"],d1="yujianbo",c1="ISC",u1={url:"https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm/issues"},f1="https://github.com/Hikvision-Ezviz/EZUIKit-JavaScript-npm#readme",h1={name:e1,maintainers:t1,version:i1,description:n1,main:r1,scripts:a1,repository:o1,files:s1,keywords:l1,author:d1,license:c1,bugs:u1,homepage:f1};class Kr{static get JS_ERROR(){return"js_error"}static get RESOURCE_ERROR(){return"resource_error"}static get VUE_ERROR(){return"vue_error"}static get PROMISE_ERROR(){return"promise_error"}static get AJAX_ERROR(){return"ajax_error"}static get CONSOLE_INFO(){return"console_info"}static get CONSOLE_WARN(){return"console_warn"}static get CONSOLE_ERROR(){return"console_error"}static get CROSS_SCRIPT_ERROR(){return"cross_srcipt_error"}static get UNKNOW_ERROR(){return"unknow_error"}static get PERFORMANCE(){return"performance"}static get BUSINESS(){return"business"}}class Ha{static get ERROR(){return"Error"}static get WARN(){return"Warning"}static get INFO(){return"Info"}}class rd{static get FETCH(){return"fetch"}static get DEFAULT(){return"default"}}var x1=function(){var Z=typeof self<"u"?self:this,m=Z||{},t={navigator:typeof Z.navigator<"u"?Z.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},n=function(){return{getMatchMap:function(l){return{Trident:l.indexOf("Trident")>-1||l.indexOf("NET CLR")>-1,Presto:l.indexOf("Presto")>-1,WebKit:l.indexOf("AppleWebKit")>-1,Gecko:l.indexOf("Gecko/")>-1,Safari:l.indexOf("Safari")>-1,Chrome:l.indexOf("Chrome")>-1||l.indexOf("CriOS")>-1,IE:l.indexOf("MSIE")>-1||l.indexOf("Trident")>-1,Edge:l.indexOf("Edge")>-1,Firefox:l.indexOf("Firefox")>-1||l.indexOf("FxiOS")>-1,"Firefox Focus":l.indexOf("Focus")>-1,Chromium:l.indexOf("Chromium")>-1,Opera:l.indexOf("Opera")>-1||l.indexOf("OPR")>-1,Vivaldi:l.indexOf("Vivaldi")>-1,Yandex:l.indexOf("YaBrowser")>-1,Arora:l.indexOf("Arora")>-1,Lunascape:l.indexOf("Lunascape")>-1,QupZilla:l.indexOf("QupZilla")>-1,"Coc Coc":l.indexOf("coc_coc_browser")>-1,Kindle:l.indexOf("Kindle")>-1||l.indexOf("Silk/")>-1,Iceweasel:l.indexOf("Iceweasel")>-1,Konqueror:l.indexOf("Konqueror")>-1,Iceape:l.indexOf("Iceape")>-1,SeaMonkey:l.indexOf("SeaMonkey")>-1,Epiphany:l.indexOf("Epiphany")>-1,360:l.indexOf("QihooBrowser")>-1||l.indexOf("QHBrowser")>-1,"360EE":l.indexOf("360EE")>-1,"360SE":l.indexOf("360SE")>-1,UC:l.indexOf("UC")>-1||l.indexOf(" UBrowser")>-1,QQBrowser:l.indexOf("QQBrowser")>-1,QQ:l.indexOf("QQ/")>-1,Baidu:l.indexOf("Baidu")>-1||l.indexOf("BIDUBrowser")>-1,Maxthon:l.indexOf("Maxthon")>-1,Sogou:l.indexOf("MetaSr")>-1||l.indexOf("Sogou")>-1,LBBROWSER:l.indexOf("LBBROWSER")>-1,"2345Explorer":l.indexOf("2345Explorer")>-1,TheWorld:l.indexOf("TheWorld")>-1,XiaoMi:l.indexOf("MiuiBrowser")>-1,Quark:l.indexOf("Quark")>-1,Qiyu:l.indexOf("Qiyu")>-1,Wechat:l.indexOf("MicroMessenger")>-1,Taobao:l.indexOf("AliApp(TB")>-1,Alipay:l.indexOf("AliApp(AP")>-1,Weibo:l.indexOf("Weibo")>-1,Douban:l.indexOf("com.douban.frodo")>-1,Suning:l.indexOf("SNEBUY-APP")>-1,iQiYi:l.indexOf("IqiyiApp")>-1,Windows:l.indexOf("Windows")>-1,Linux:l.indexOf("Linux")>-1||l.indexOf("X11")>-1,"Mac OS":l.indexOf("Macintosh")>-1,Android:l.indexOf("Android")>-1||l.indexOf("Adr")>-1,Ubuntu:l.indexOf("Ubuntu")>-1,FreeBSD:l.indexOf("FreeBSD")>-1,Debian:l.indexOf("Debian")>-1,"Windows Phone":l.indexOf("IEMobile")>-1||l.indexOf("Windows Phone")>-1,BlackBerry:l.indexOf("BlackBerry")>-1||l.indexOf("RIM")>-1,MeeGo:l.indexOf("MeeGo")>-1,Symbian:l.indexOf("Symbian")>-1,iOS:l.indexOf("like Mac OS X")>-1,"Chrome OS":l.indexOf("CrOS")>-1,WebOS:l.indexOf("hpwOS")>-1,Mobile:l.indexOf("Mobi")>-1||l.indexOf("iPh")>-1||l.indexOf("480")>-1,Tablet:l.indexOf("Tablet")>-1||l.indexOf("Nexus 7")>-1,iPad:l.indexOf("iPad")>-1}},matchInfoMap:function(l){var d=t.navigator.userAgent||{},c=n.getMatchMap(d);for(var E in t.infoMap)for(var C=0;C<t.infoMap[E].length;C++){var y=t.infoMap[E][C];c[y]&&(l[E]=y)}},getOS:function(){var l=this;return n.matchInfoMap(l),l.os},getOSVersion:function(){var l=this,d=t.navigator.userAgent||{};l.osVersion="";var c={Windows:function(){var E=d.replace(/^.*Windows NT ([\d.]+);.*$/,"$1"),C={6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"};return C[E]||E},Android:function(){return d.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return d.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return d.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return d.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return d.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return d.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return c[l.os]&&(l.osVersion=c[l.os](),l.osVersion==d&&(l.osVersion="")),l.osVersion},getOrientationStatu:function(){var l="",d=window.matchMedia("(orientation: portrait)");return d.matches?l="竖屏":l="横屏",l},getDeviceType:function(){var l=this;return l.device="PC",n.matchInfoMap(l),l.device},getNetwork:function(){var l=navigator&&navigator.connection&&navigator.connection.effectiveType;return l},getLanguage:function(){var l=this;return l.language=function(){var d=t.navigator.browserLanguage||t.navigator.language,c=d.split("-");return c[1]&&(c[1]=c[1].toUpperCase()),c.join("_")}(),l.language},createFingerprint:function(l){var d;function c(te){var ae,de,ie,we="";for(te+="",ae=0,de=te.length;ae<de;ae++)ie=te.charCodeAt(ae).toString(16),we+=ie.length<2?"0"+ie:ie;return we}var E=document.createElement("canvas"),C=E.getContext("2d"),y=l||window.location.host;C.textBaseline="top",C.font="14px 'Arial'",C.textBaseline="tencent",C.fillStyle="#f60",C.fillRect(125,1,62,20),C.fillStyle="#069",C.fillText(y,2,15),C.fillStyle="rgba(102, 204, 0, 0.7)",C.fillText(y,4,17);var w=E.toDataURL().replace("data:image/png;base64,",""),g=atob(w),p=c(g.slice(-16,-12));return d=p,d},getBrowserInfo:function(){var l=this;n.matchInfoMap(l);var d=t.navigator.userAgent||{},c=function(p,te){var ae=t.navigator.mimeTypes;for(var de in ae)if(ae[de][p]==te)return!0;return!1},E=n.getMatchMap(d),C=!1;if(m.chrome){var y=d.replace(/^.*Chrome\/([\d]+).*$/,"$1");y>36&&m.showModalDialog?C=!0:y>45&&(C=c("type","application/vnd.chromium.remoting-viewer"))}if(E.Baidu&&E.Opera&&(E.Baidu=!1),E.Mobile&&(E.Mobile=!(d.indexOf("iPad")>-1)),C&&(c("type","application/gameplugin")||t.navigator&&typeof t.navigator.connection.saveData>"u"?E["360SE"]=!0:E["360EE"]=!0),E.IE||E.Edge){var w=window.screenTop-window.screenY;switch(w){case 71:break;case 74:break;case 99:break;case 102:E["360EE"]=!0;break;case 75:break;case 74:break;case 105:break;case 104:E["360SE"]=!0;break}}var g={Safari:function(){return d.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return d.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return d.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return d.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return d.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return d.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return d.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return d.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return d.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return d.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return d.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return d.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return d.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return d.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return d.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return d.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return d.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return d.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return d.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return d.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return d.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){var p={63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"},te=d.replace(/^.*Chrome\/([\d]+).*$/,"$1");return p[te]||""},"360EE":function(){var p={69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"},te=d.replace(/^.*Chrome\/([\d]+).*$/,"$1");return p[te]||""},Maxthon:function(){return d.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return d.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return d.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return d.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return d.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return d.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){var p={57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"},te=navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1");return p[te]||""},"2345Explorer":function(){return d.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return d.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return d.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return d.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return d.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return d.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},Taobao:function(){return d.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return d.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return d.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return d.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return d.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return d.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};return l.browserVersion="",g[l.browser]&&(l.browserVersion=g[l.browser](),l.browserVersion==d&&(l.browserVersion="")),l.browser=="Edge"&&(l.engine="EdgeHTML"),l.browser=="Chrome"&&parseInt(l.browserVersion)>27&&(l.engine="Blink"),l.browser=="Opera"&&parseInt(l.browserVersion)>12&&(l.engine="Blink"),l.browser=="Yandex"&&(l.engine="Blink"),l.browser+"（版本: "+l.browserVersion+"&nbsp;&nbsp;内核: "+l.engine+"）"}}}(),o=function(){return{DeviceInfoObj:function(l){l=l||{domain:""};var d={deviceType:n.getDeviceType(),OS:n.getOS(),OSVersion:n.getOSVersion(),screenHeight:m.screen.height,screenWidth:m.screen.width,language:n.getLanguage(),netWork:n.getNetwork(),orientation:n.getOrientationStatu(),browserInfo:n.getBrowserInfo(),fingerprint:n.createFingerprint(l.domain),userAgent:t.navigator.userAgent};if(!l.info||l.info.length==0)return d;var c={};for(var E in d)l.info.forEach(function(C){C.toLowerCase()==E.toLowerCase()&&(C=E,c[C]=d[C])});return c}}}();return{getDeviceInfo:function(l){return o.DeviceInfoObj(l)}}}(),_0={type(Z){return Object.prototype.toString.call(Z).replace(/\[object\s|\]/g,"")},isFunction(Z){return this.type(Z)==="Function"},isArray(Z){return this.type(Z)==="Array"},isNull(Z){return Z==null||Z==""||Z==null},objectIsNull(Z){return JSON.stringify(Z)==="{}"},isObject(Z){return this.type(Z)==="Object"}};class ad{toReport(m,t){try{let o=JSON.stringify(t);var n=new XMLHttpRequest;n.open("POST",m,!0),n.setRequestHeader("Content-Type","application/json"),n.send(o)}catch(o){console.log(o)}}}class p1{toReport(m,t){try{let n=JSON.stringify(t);fetch(m,{headers:{"Content-Type":"application/json"},method:"POST",body:n,mode:"same-origin",keepalive:!0})}catch(n){new ad().toReport(m,t),console.log("fetch请求异常",n)}}}class m1{toReport(m,t){try{var n=new Image;n.src=m+"?st="+new Date().getTime()+"&"+this.formatParams(t)}catch(o){console.log(o)}}formatParams(m){var t=[];for(var n in m)t.push(encodeURIComponent(n)+"="+encodeURIComponent(m[n]));return t.join("&")}}class _1{toReport(m,t){try{t.st=new Date().getTime(),navigator.sendBeacon&&navigator.sendBeacon(m,this.formatParamsByURLSearchParams(t))}catch(n){console.log(n)}}formatParamsByFormData(m){const t=new FormData;for(var n in m)t.append(n,m[n]);return t}formatParamsByURLSearchParams(m){const t=new URLSearchParams;for(var n in m)typeof m[n]=="object"&&(m[n]=JSON.stringify(m[n])),t.append(n,m[n]);return t}formatParams(m){var t=[];for(var n in m)t.push(encodeURIComponent(n)+"="+encodeURIComponent(m[n]));return t.join("&")}}class g1{constructor(m){this.url=m}report(m,t){if(t=t||{isFetch:!1,isXHR:!1,isImg:!1,isNavigator:!1},!this.checkUrl(this.url)){console.log("上报信息url地址格式不正确,url=",this.url);return}this.sendInfo(m,t)}sendInfo(m,t={}){let n=new p1,o=new m1,l=new ad,d=new _1;if(t.isImg){o.toReport(this.url,m);return}if(t.isFetch){n.toReport(this.url,m);return}if(t.isXHR){l.toReport(this.url,m);return}if(t.isNavigator){d.toReport(this.url,m);return}if(!!!(t.isFetch&&t.isImg&&t.isXHR&&t.isNavigator)){d.toReport(this.url,m);return}}checkUrl(m){if(!m)return!1;var t=/^[hH][tT][tT][pP]([sS]?):\/\//;return t.test(m)}}var g0={isStop:!0,queues:[],add:function(Z,m){this.queues.push({reportUrl:Z,data:m})},fire:function(){if(!this.queues||this.queues.length===0){this.isStop=!0;return}this.isStop=!1;let Z=this.queues[0];Z.reportUrl&&new g1(Z.reportUrl).report(Z.data),this.queues.splice(0,1),this.fire()}};class Qa{constructor(m){this.category=Kr.UNKNOW_ERROR,this.level=Ha.INFO,this.msg="",this.url="",this.line="",this.col="",this.errorObj="",this.reportUrl=m.reportUrl,this.extendsInfo=m.extendsInfo}recordError(){this.handleRecordError(),g0.isStop&&g0.fire()}handleRecordError(){try{if(!this.msg)return;if(this.reportUrl&&this.url&&this.url.toLowerCase().indexOf(this.reportUrl.toLowerCase())>=0){console.log("统计错误接口异常",this.msg);return}let m=this.handleErrorInfo();g0.add(this.reportUrl,m)}catch(m){console.log(m)}}handleErrorInfo(){let t=this.getExtendsInfo(),n="",o=0;switch(this.category){case Kr.BUSINESS:if(this.msg.textKey)n=JSON.stringify(this.msg),o=1,t.textKey=this.msg.textKey,this.msg.h&&(t.h=this.msg.h),this.msg.text&&(t.text=this.msg.text);else return t=Object.assign({},t,this.msg),t.l=window.location.href,t;break;case Kr.PERFORMANCE:n=JSON.stringify(this.msg),o=1e3,t.clientInfo=this.getDeviceInfo();break;case Kr.AJAX_ERROR:n=JSON.stringify(this.msg),o=100;break;case Kr.RESOURCE_ERROR:const l={msg:this.msg,url:encodeURIComponent(this.url)};n=JSON.stringify(l),o=101;break;case Kr.JS_ERROR:n="错误类别: "+this.category+`\r
`,n+="日志信息: "+this.msg+`\r
`,n+="url: "+encodeURIComponent(this.url)+`\r
`,n+="错误行号: "+this.line+`\r
`,n+="错误列号: "+this.col+`\r
`,this.errorObj&&this.errorObj.stack&&(n+="错误栈: "+this.errorObj.stack+`\r
`),o=102;break;default:n=this.msg,o=106;break}return t.logInfo=n,t.l=window.location.pathname,t.action=o,t}getExtendsInfo(){try{let t={},n=this.extendsInfo||{},o;_0.isFunction(n.getDynamic)&&(o=n.getDynamic()),_0.isObject(o)&&(n={...n,...o});for(var m in n)_0.isFunction(n[m])||(t[m]=n[m]);return t}catch(t){return console.log("call getExtendsInfo error",t),{}}}getDeviceInfo(){try{let m=x1.getDeviceInfo();return JSON.stringify(m)}catch(m){return console.log(m),""}}}function Rs(Z,m){if(!Z)return!0;if(typeof Z=="string"){if(m.startsWith("/")){if(window.location.hostname.endsWith(Z))return!0}else if(new URL(m).hostname.endsWith(Z))return!0;return!1}if(typeof Z=="object"&&Z instanceof Array){let t=!1;return Z.forEach(n=>{typeof n=="string"&&(m.startsWith("/")?window.location.hostname.endsWith(n)&&(t=!0):new URL(m).hostname.endsWith(n)&&(t=!0))}),t}return!1}class v1{constructor(m){this.params=m}handleError(m){switch(m){case rd.FETCH:new od(this.params).handleError();break;case rd.DEFAULT:new sd(this.params).handleError();break;default:new od(this.params).handleError(),new sd(this.params).handleError();break}}}const y1=Z=>typeof Z=="string";class od extends Qa{constructor(m){super(m),this.ajaxDomain=m.ajaxDomain}handleError(){if(!window.fetch)return;this.level=Ha.WARN,this.category=Kr.AJAX_ERROR;let m=this,t=window.fetch;window.fetch=function(){let n=arguments,o=new Date().getTime(),l=null;return t.apply(this,arguments).then(function(d){try{const c=d.headers?d.headers.get("content-type"):"";if(y1(c)&&c.includes("application/json")){const C=d.clone();l=C.status;let w=new Date().getTime()-o;C.json().then(function(g){const p={fetchStart:o,url:n[0],requestOptions:n[1],status:l,responseBody:g,loadTime:w};m.msg=p,Rs(m.ajaxDomain,p.url)&&m.recordError()})}else{const C=d.clone();l=C.status;let w=new Date().getTime()-o;C.text().then(function(g){try{g=JSON.parse(g)}catch{console.log("JSON.parse 失败")}const p={fetchStart:o,url:n[0],requestOptions:n[1],status:l,responseBody:g,loadTime:w};m.msg=p,Rs(m.ajaxDomain,p.url)&&m.recordError()})}}catch(c){console.log("获取响应数据上报异常"),console.log(c)}return d}).catch(function(d){console.log("获取响应数据上报异常"),console.log(d)})}}}class sd extends Qa{constructor(m){super(m),this.ajaxDomain=m.ajaxDomain}handleError(){if(!window.XMLHttpRequest)return;this.level=Ha.WARN,this.category=Kr.AJAX_ERROR;let m=this,t=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(o,l,d){return this._url=typeof l=="string"?l:l.href,this._method=o,t.call(this,o,this._url,typeof d=="boolean"?d:!0)},XMLHttpRequest.prototype.send=function(){let o=new Date().getTime();return this.addEventListener&&this.addEventListener("readystatechange",function(){if(this.readyState===4)if(this.status>=200&&this.status<300){let d=new Date().getTime()-o;const c={method:this._method},E={fetchStart:o,url:this._url,requestOptions:c,responseBody:this.response,status:this.status,loadTime:d};m.msg=E,Rs(m.ajaxDomain,E.url)&&m.recordError()}else{let d=new Date().getTime()-o;const c={method:this._method},E={fetchStart:o,url:this._url,requestOptions:c,status:this.status,loadTime:d};m.msg=E,Rs(m.ajaxDomain,E.url)&&m.recordError()}}),n.apply(this,arguments)}}}class b1 extends Qa{constructor(m){super(m)}handleError(){this.registerInfo(),this.registerWarn(),this.registerError()}registerInfo(){let m=this;console.tInfo=function(){m.handleLog(Ha.INFO,Kr.CONSOLE_INFO,arguments)}}registerWarn(){let m=this;console.tWarn=function(){m.handleLog(Ha.WARN,Kr.CONSOLE_WARN,arguments)}}registerError(){let m=this;console.tError=function(){m.handleLog(Ha.ERROR,Kr.CONSOLE_ERROR,arguments)}}handleLog(m,t,n){try{this.level=m;let o=[...n];this.msg=o.join(`\r
`),this.url=location.href,this.category=t,this.recordError()}catch(o){console.log("console统计错误异常",m,o)}}}(function(){window.console||(window.console={}),["tInfo","tWarn","tError"].forEach((m,t)=>{console[m]||(console[m]=function(){})})})();class S1 extends Qa{constructor(m){super(m)}handleError(){window.onerror=(m,t,n,o,l)=>{console.log("monitor onerror");try{this.level=Ha.WARN,this.category=Kr.JS_ERROR,this.msg=m,this.url=t,this.line=n,this.col=o,this.errorObj=l,this.recordError()}catch(d){console.log("js错误异常",d)}}}}class C1 extends Qa{constructor(m){super(m)}handleError(){window.addEventListener("unhandledrejection",m=>{try{if(!m||!m.reason)return;m.reason.config&&m.reason.config.url&&(this.url=m.reason.config.url),this.level=Ha.WARN,this.category=Kr.PROMISE_ERROR,this.msg=m.reason,this.recordError()}catch(t){console.log(t)}},!0)}}class T1 extends Qa{constructor(m){super(m)}handleError(){window.addEventListener("error",m=>{console.log("monitor addEventListener error");try{if(!m)return;this.category=Kr.RESOURCE_ERROR;let n=m.target||m.srcElement;var t=n instanceof HTMLScriptElement||n instanceof HTMLLinkElement||n instanceof HTMLImageElement;if(!t)return;this.level=n.tagName.toUpperCase()==="IMG"?Ha.WARN:Ha.ERROR,this.msg="加载 "+n.tagName+" 资源错误",this.url=n.src||n.href,this.errorObj=n,this.recordError()}catch(n){console.log("资源加载收集异常",n)}},!0)}}var mo,Qo,ld,ks,dd=-1,Fo=function(Z){addEventListener("pageshow",function(m){m.persisted&&(dd=m.timeStamp,Z(m))},!0)},v0=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Is=function(){var Z=v0();return Z&&Z.activationStart||0},Va=function(Z,m){var t=v0(),n="navigate";return dd>=0?n="back-forward-cache":t&&(document.prerendering||Is()>0?n="prerender":document.wasDiscarded?n="restore":t.type&&(n=t.type.replace(/_/g,"-"))),{name:Z,value:m===void 0?-1:m,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},Ds=function(Z,m,t){try{if(PerformanceObserver.supportedEntryTypes.includes(Z)){var n=new PerformanceObserver(function(o){Promise.resolve().then(function(){m(o.getEntries())})});return n.observe(Object.assign({type:Z,buffered:!0},t||{})),n}}catch{}},Ga=function(Z,m,t,n){var o,l;return function(d){m.value>=0&&(d||n)&&((l=m.value-(o||0))||o===void 0)&&(o=m.value,m.delta=l,m.rating=function(c,E){return c>E[1]?"poor":c>E[0]?"needs-improvement":"good"}(m.value,t),Z(m))}},y0=function(Z){requestAnimationFrame(function(){return requestAnimationFrame(function(){return Z()})})},b0=function(Z){var m=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||Z(t)};addEventListener("visibilitychange",m,!0),addEventListener("pagehide",m,!0)},S0=function(Z){var m=!1;return function(t){m||(Z(t),m=!0)}},zo=-1,cd=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},As=function(Z){document.visibilityState==="hidden"&&zo>-1&&(zo=Z.type==="visibilitychange"?Z.timeStamp:0,P1())},ud=function(){addEventListener("visibilitychange",As,!0),addEventListener("prerenderingchange",As,!0)},P1=function(){removeEventListener("visibilitychange",As,!0),removeEventListener("prerenderingchange",As,!0)},C0=function(){return zo<0&&(zo=cd(),ud(),Fo(function(){setTimeout(function(){zo=cd(),ud()},0)})),{get firstHiddenTime(){return zo}}},Ms=function(Z){document.prerendering?addEventListener("prerenderingchange",function(){return Z()},!0):Z()},fd=[1800,3e3],hd=function(Z,m){m=m||{},Ms(function(){var t,n=C0(),o=Va("FCP"),l=Ds("paint",function(d){d.forEach(function(c){c.name==="first-contentful-paint"&&(l.disconnect(),c.startTime<n.firstHiddenTime&&(o.value=Math.max(c.startTime-Is(),0),o.entries.push(c),t(!0)))})});l&&(t=Ga(Z,o,fd,m.reportAllChanges),Fo(function(d){o=Va("FCP"),t=Ga(Z,o,fd,m.reportAllChanges),y0(function(){o.value=performance.now()-d.timeStamp,t(!0)})}))})},xd=[.1,.25],w1=function(Z,m){m=m||{},hd(S0(function(){var t,n=Va("CLS",0),o=0,l=[],d=function(E){E.forEach(function(C){if(!C.hadRecentInput){var y=l[0],w=l[l.length-1];o&&C.startTime-w.startTime<1e3&&C.startTime-y.startTime<5e3?(o+=C.value,l.push(C)):(o=C.value,l=[C])}}),o>n.value&&(n.value=o,n.entries=l,t())},c=Ds("layout-shift",d);c&&(t=Ga(Z,n,xd,m.reportAllChanges),b0(function(){d(c.takeRecords()),t(!0)}),Fo(function(){o=0,n=Va("CLS",0),t=Ga(Z,n,xd,m.reportAllChanges),y0(function(){return t()})}),setTimeout(t,0))}))},es={passive:!0,capture:!0},E1=new Date,pd=function(Z,m){mo||(mo=m,Qo=Z,ld=new Date,_d(removeEventListener),md())},md=function(){if(Qo>=0&&Qo<ld-E1){var Z={entryType:"first-input",name:mo.type,target:mo.target,cancelable:mo.cancelable,startTime:mo.timeStamp,processingStart:mo.timeStamp+Qo};ks.forEach(function(m){m(Z)}),ks=[]}},R1=function(Z){if(Z.cancelable){var m=(Z.timeStamp>1e12?new Date:performance.now())-Z.timeStamp;Z.type=="pointerdown"?function(t,n){var o=function(){pd(t,n),d()},l=function(){d()},d=function(){removeEventListener("pointerup",o,es),removeEventListener("pointercancel",l,es)};addEventListener("pointerup",o,es),addEventListener("pointercancel",l,es)}(m,Z):pd(m,Z)}},_d=function(Z){["mousedown","keydown","touchstart","pointerdown"].forEach(function(m){return Z(m,R1,es)})},gd=[100,300],k1=function(Z,m){m=m||{},Ms(function(){var t,n=C0(),o=Va("FID"),l=function(E){E.startTime<n.firstHiddenTime&&(o.value=E.processingStart-E.startTime,o.entries.push(E),t(!0))},d=function(E){E.forEach(l)},c=Ds("first-input",d);t=Ga(Z,o,gd,m.reportAllChanges),c&&b0(S0(function(){d(c.takeRecords()),c.disconnect()})),c&&Fo(function(){var E;o=Va("FID"),t=Ga(Z,o,gd,m.reportAllChanges),ks=[],Qo=-1,mo=null,_d(addEventListener),E=l,ks.push(E),md()})})},vd=[2500,4e3],T0={},I1=function(Z,m){m=m||{},Ms(function(){var t,n=C0(),o=Va("LCP"),l=function(E){var C=E[E.length-1];C&&C.startTime<n.firstHiddenTime&&(o.value=Math.max(C.startTime-Is(),0),o.entries=[C],t())},d=Ds("largest-contentful-paint",l);if(d){t=Ga(Z,o,vd,m.reportAllChanges);var c=S0(function(){T0[o.id]||(l(d.takeRecords()),d.disconnect(),T0[o.id]=!0,t(!0))});["keydown","click"].forEach(function(E){addEventListener(E,c,!0)}),b0(c),Fo(function(E){o=Va("LCP"),t=Ga(Z,o,vd,m.reportAllChanges),y0(function(){o.value=performance.now()-E.timeStamp,T0[o.id]=!0,t(!0)})})}})},yd=[800,1800],D1=function Z(m){document.prerendering?Ms(function(){return Z(m)}):document.readyState!=="complete"?addEventListener("load",function(){return Z(m)},!0):setTimeout(m,0)},A1=function(Z,m){m=m||{};var t=Va("TTFB"),n=Ga(Z,t,yd,m.reportAllChanges);D1(function(){var o=v0();if(o){var l=o.responseStart;if(l<=0||l>performance.now())return;t.value=Math.max(l-Is(),0),t.entries=[o],n(!0),Fo(function(){t=Va("TTFB",0),(n=Ga(Z,t,yd,m.reportAllChanges))(!0)})}})};class M1 extends Qa{constructor(m){super(m||{}),this.category=Kr.PERFORMANCE,this.reportUrl=m.reportUrl||"",this.performanceData={},this.saveData=this.saveData.bind(this),hd(this.saveData),k1(this.saveData),I1(this.saveData),w1(this.saveData),A1(this.saveData)}saveData(m){this.performanceData[m.name]=m.value,m.name==="LCP"&&this.record(this.performanceData)}record(m){this.msg=m,this.recordError()}}const B1="textkey",bd="common_a",L1=/((<(A|B|BUTTON|DIV|H1|H2|H3|H4|H5|H6|P|IMG|SPAN|TABLE|TD|TEXTAREA|VIDEO)([^<>])*>)([^<>])+(<\/(A|B|BUTTON|DIV|H1|H2|H3|H4|H5|H6|P|IMG|SPAN|TABLE|TD|TEXTAREA|VIDEO)>)|(<(IMG|VIDEO)(.)+>))/i,Sd=20;function Cd(Z){var m=Z.nodeName,t="";if(Z.hasAttribute("data-monitor")&&Z.getAttribute("data-monitor"))return t=Z.getAttribute("data-monitor"),`${t}`.slice(0,Sd);var n=Z.outerHTML.match(L1);if(n&&n.length>0)switch(m){case"IMG":t=Z.getAttribute("alt");break;default:t=n[0].match(/>[^<>]+<\//)?n[0].match(/>[^<>]+<\//)[0]:"",t=t.replace(/[^A-Za-z0-9\u4e00-\u9fa5]/g,"");break}return`${t}`.slice(0,Sd)}class F1 extends Qa{constructor(m){super(m||{}),this.category=Kr.BUSINESS,this.reportUrl=m.reportUrl||"";const t=m.keyName||B1,n=this;window.addEventListener("click",function(o){let l=o.target;if(!l)return!1;let d=l.getAttribute(t),c=l.getAttribute("link")||l.getAttribute("href");if(d||c){const E={textKey:d||bd};c&&(E.h=c);const C=Cd(l);C&&(E.text=C),n.record(E)}else{for(;!d&&!c&&l.parentNode;)l=l.parentNode,l.getAttribute&&(d=l.getAttribute(t),c=l.getAttribute("link")||l.getAttribute("href"));if(d||c){const E={textKey:d||bd};c&&(E.h=c);const C=Cd(l);C&&(E.text=C),n.record(E)}}})}record(m){this.msg=m,this.recordError()}}class z1 extends Qa{constructor(m){super(m||{}),this.category=Kr.BUSINESS,this.reportUrl=m.reportUrl||""}record(m){this.msg=m,this.recordError()}}Date.prototype.format=function(Z){let m={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(Z)&&(Z=Z.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(Z)&&(Z=Z.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+t[this.getDay()+""]));for(let n in m)new RegExp("("+n+")").test(Z)&&(Z=Z.replace(RegExp.$1,RegExp.$1.length==1?m[n]:("00"+m[n]).substr((""+m[n]).length)));return Z};class O1{constructor(m){this.jsError=!0,this.promiseError=!0,this.resourceError=!0,this.ajaxError=!0,this.ajaxDomain=null,this.isReportHref=!1,this.consoleError=!1,m=m||{},this.jsError=m.jsError!==!1,this.promiseError=m.promiseError!==!1,this.resourceError=m.resourceError!==!1,this.consoleError=m.consoleError===!0,this.ajaxError=m.ajaxError!==!1,this.ajaxDomain=m.ajaxDomain||this.ajaxDomain,this.isReportHref=m.isReportHref||this.isReportHref,this.business=m.business!==!1,this.reportUrl=m.url,this.performace=m.performace!==!1,this.extendsInfo=m.extendsInfo||{};let t={reportUrl:this.reportUrl,extendsInfo:this.extendsInfo};if(this.jsError&&new S1(t).handleError(),this.promiseError&&new C1(t).handleError(),this.resourceError&&new T1(t).handleError(),this.ajaxError){let n=Object.assign({},t,{ajaxDomain:this.ajaxDomain});new v1(n).handleError()}this.consoleError&&new b1(t).handleError(),this.performace&&new M1(t),this.business&&new F1(t),this.manual=new z1(t)}report(m){return!1==="object"?(console.log("输入参数不正确"),!1):(this.manual&&this.manual.record(m),this)}}var N1="https://log.ys7.com/statistics.do/opensdk_ezuikit";window.monitorExtendsInfo={},window.ezuikitMonitor=new O1({ajaxDomain:["open.ys7.com",".ezvizlife.com"],url:N1,extendsInfo:{v:h1.version,getDynamic:function(){return window.monitorExtendsInfo}}});var Td={Core:cu,HLS:pu,FLV:_u,EZUIKitPlayer:id,EZUIKitHD:Kf,EZWebRtc:Qf};return window.EZUIKit=Td,Td})})(a0,a0.exports);var D_=a0.exports;const A_=E_(D_),M_={},B_={t:"1704314573988",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13688",width:"248",height:"248"},L_=Xo("path",{d:"M184 789.088L389.309 583.78a8 8 0 0 1 11.313 0l39.598 39.598a8 8 0 0 1 0 11.313L234.912 840H384c8.837 0 16 7.163 16 16v48a8 8 0 0 1-8 8H144c-17.673 0-32-14.327-32-32V632a8 8 0 0 1 8-8h48c8.837 0 16 7.163 16 16v149.088z m656-554.422L634.569 440.098a8 8 0 0 1-11.314 0L583.657 400.5a8 8 0 0 1 0-11.314L788.843 184H640c-8.837 0-16-7.163-16-16v-48a8 8 0 0 1 8-8h248c17.673 0 32 14.327 32 32v248a8 8 0 0 1-8 8h-48c-8.837 0-16-7.163-16-16V234.666z",fill:"currentColor",stroke:"currentColor","p-id":"13689"},null,-1),F_=[L_];function z_(xo,fs){return _l(),gl("svg",B_,F_)}const O_=su(M_,[["render",z_]]),N_={},j_={t:"1704316343420",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"14914",width:"248",height:"248"},U_=Xo("path",{d:"M242.858667 183.04L512 452.266667l269.141333-269.141334a42.325333 42.325333 0 0 1 59.733334 59.818667L571.904 512l269.141333 269.141333a42.325333 42.325333 0 0 1-59.818666 59.733334L512 571.904 242.858667 840.96a42.325333 42.325333 0 0 1-59.733334-59.818667L452.096 512 183.04 242.858667a42.325333 42.325333 0 0 1 59.818667-59.733334z",fill:"currentColor",stroke:"currentColor","p-id":"14915"},null,-1),H_=[U_];function V_(xo,fs){return _l(),gl("svg",j_,H_)}const G_=su(N_,[["render",V_]]),W_={id:"my_modal_play",class:"modal"},Z_={class:"modal-box p-0"},Y_=Xo("div",{class:"",id:"playWind1"},null,-1),J_={__name:"PlayView",props:{item:{type:Object,required:!0}},emits:["close"],setup(xo,{emit:fs}){const To=R_(null);let gr;const Ni=xo;k_(()=>{To.value=document.getElementById("my_modal_play"),Rn(Ni.item)}),I_(()=>{gr&&(console.log("销毁了"),gr.destroy(),gr=null)});const En=fs;console.log("创建了");function hs(){document.getElementById("my_modal_play").close(),En("close")}const Rn=ba=>{To.value&&To.value.showModal();var ps=document.documentElement.clientWidth,xs=document.documentElement.clientWidth*9/16,ps=document.querySelector(".modal-box").offsetWidth;gr=new A_.EZUIKitPlayer({id:"playWind1",useHardDev:!0,width:ps,height:xs,template:"c064bc45dd0b4d27ba16d7835199f85d",url:ba.play_url,accessToken:ba.accessToken,handleError:ms=>{console.log(ms)}}),window.EZOPENDemo1=gr};function ln(){var ba=document.getElementById("my_modal_play");ba.classList.contains("rotate-90")?(ba.classList.remove("rotate-90"),ba.classList.remove("scale-150")):(ba.classList.add("rotate-90"),ba.classList.add("scale-150"))}return(ba,xs)=>(_l(),gl("dialog",W_,[Xo("div",Z_,[Y_,Xo("button",{class:"btn btn-sm absolute right-4 top-4",onClick:hs},[ou(G_,{class:"text-primary-500 h-5 w-5"})]),Xo("button",{class:"btn btn-sm absolute right-4 bottom-4",onClick:ln},[ou(O_,{class:"text-primary-500 h-5 w-5"})])])]))}};export{J_ as _};
